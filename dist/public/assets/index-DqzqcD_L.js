var V4=e=>{throw TypeError(e)};var NN=(e,t,n)=>t.has(e)||V4("Cannot "+n);var xe=(e,t,n)=>(NN(e,t,"read from private field"),n?n.call(e):t.get(e)),xt=(e,t,n)=>t.has(e)?V4("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Je=(e,t,n,s)=>(NN(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),Rt=(e,t,n)=>(NN(e,t,"access private method"),n);var fv=(e,t,n,s)=>({set _(i){Je(e,t,i,n)},get _(){return xe(e,t,s)}});function dX(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(s,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var zf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var w6={exports:{}},tb={},N6={exports:{}},qt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var og=Symbol.for("react.element"),uX=Symbol.for("react.portal"),hX=Symbol.for("react.fragment"),mX=Symbol.for("react.strict_mode"),fX=Symbol.for("react.profiler"),pX=Symbol.for("react.provider"),xX=Symbol.for("react.context"),gX=Symbol.for("react.forward_ref"),vX=Symbol.for("react.suspense"),yX=Symbol.for("react.memo"),jX=Symbol.for("react.lazy"),U4=Symbol.iterator;function bX(e){return e===null||typeof e!="object"?null:(e=U4&&e[U4]||e["@@iterator"],typeof e=="function"?e:null)}var S6={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_6=Object.assign,P6={};function Sm(e,t,n){this.props=e,this.context=t,this.refs=P6,this.updater=n||S6}Sm.prototype.isReactComponent={};Sm.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Sm.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function C6(){}C6.prototype=Sm.prototype;function bC(e,t,n){this.props=e,this.context=t,this.refs=P6,this.updater=n||S6}var wC=bC.prototype=new C6;wC.constructor=bC;_6(wC,Sm.prototype);wC.isPureReactComponent=!0;var W4=Array.isArray,k6=Object.prototype.hasOwnProperty,NC={current:null},T6={key:!0,ref:!0,__self:!0,__source:!0};function A6(e,t,n){var s,i={},a=null,o=null;if(t!=null)for(s in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)k6.call(t,s)&&!T6.hasOwnProperty(s)&&(i[s]=t[s]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)i[s]===void 0&&(i[s]=l[s]);return{$$typeof:og,type:e,key:a,ref:o,props:i,_owner:NC.current}}function wX(e,t){return{$$typeof:og,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function SC(e){return typeof e=="object"&&e!==null&&e.$$typeof===og}function NX(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var H4=/\/+/g;function SN(e,t){return typeof e=="object"&&e!==null&&e.key!=null?NX(""+e.key):t.toString(36)}function dy(e,t,n,s,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case og:case uX:o=!0}}if(o)return o=e,i=i(o),e=s===""?"."+SN(o,0):s,W4(i)?(n="",e!=null&&(n=e.replace(H4,"$&/")+"/"),dy(i,t,n,"",function(d){return d})):i!=null&&(SC(i)&&(i=wX(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(H4,"$&/")+"/")+e)),t.push(i)),1;if(o=0,s=s===""?".":s+":",W4(e))for(var l=0;l<e.length;l++){a=e[l];var c=s+SN(a,l);o+=dy(a,t,n,c,i)}else if(c=bX(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=s+SN(a,l++),o+=dy(a,t,n,c,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function pv(e,t,n){if(e==null)return e;var s=[],i=0;return dy(e,s,"","",function(a){return t.call(n,a,i++)}),s}function SX(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var xs={current:null},uy={transition:null},_X={ReactCurrentDispatcher:xs,ReactCurrentBatchConfig:uy,ReactCurrentOwner:NC};function E6(){throw Error("act(...) is not supported in production builds of React.")}qt.Children={map:pv,forEach:function(e,t,n){pv(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return pv(e,function(){t++}),t},toArray:function(e){return pv(e,function(t){return t})||[]},only:function(e){if(!SC(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};qt.Component=Sm;qt.Fragment=hX;qt.Profiler=fX;qt.PureComponent=bC;qt.StrictMode=mX;qt.Suspense=vX;qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_X;qt.act=E6;qt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=_6({},e.props),i=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=NC.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)k6.call(t,c)&&!T6.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:og,type:e.type,key:i,ref:a,props:s,_owner:o}};qt.createContext=function(e){return e={$$typeof:xX,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:pX,_context:e},e.Consumer=e};qt.createElement=A6;qt.createFactory=function(e){var t=A6.bind(null,e);return t.type=e,t};qt.createRef=function(){return{current:null}};qt.forwardRef=function(e){return{$$typeof:gX,render:e}};qt.isValidElement=SC;qt.lazy=function(e){return{$$typeof:jX,_payload:{_status:-1,_result:e},_init:SX}};qt.memo=function(e,t){return{$$typeof:yX,type:e,compare:t===void 0?null:t}};qt.startTransition=function(e){var t=uy.transition;uy.transition={};try{e()}finally{uy.transition=t}};qt.unstable_act=E6;qt.useCallback=function(e,t){return xs.current.useCallback(e,t)};qt.useContext=function(e){return xs.current.useContext(e)};qt.useDebugValue=function(){};qt.useDeferredValue=function(e){return xs.current.useDeferredValue(e)};qt.useEffect=function(e,t){return xs.current.useEffect(e,t)};qt.useId=function(){return xs.current.useId()};qt.useImperativeHandle=function(e,t,n){return xs.current.useImperativeHandle(e,t,n)};qt.useInsertionEffect=function(e,t){return xs.current.useInsertionEffect(e,t)};qt.useLayoutEffect=function(e,t){return xs.current.useLayoutEffect(e,t)};qt.useMemo=function(e,t){return xs.current.useMemo(e,t)};qt.useReducer=function(e,t,n){return xs.current.useReducer(e,t,n)};qt.useRef=function(e){return xs.current.useRef(e)};qt.useState=function(e){return xs.current.useState(e)};qt.useSyncExternalStore=function(e,t,n){return xs.current.useSyncExternalStore(e,t,n)};qt.useTransition=function(){return xs.current.useTransition()};qt.version="18.3.1";N6.exports=qt;var j=N6.exports;const re=hr(j),O6=dX({__proto__:null,default:re},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PX=j,CX=Symbol.for("react.element"),kX=Symbol.for("react.fragment"),TX=Object.prototype.hasOwnProperty,AX=PX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,EX={key:!0,ref:!0,__self:!0,__source:!0};function M6(e,t,n){var s,i={},a=null,o=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(s in t)TX.call(t,s)&&!EX.hasOwnProperty(s)&&(i[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)i[s]===void 0&&(i[s]=t[s]);return{$$typeof:CX,type:e,key:a,ref:o,props:i,_owner:AX.current}}tb.Fragment=kX;tb.jsx=M6;tb.jsxs=M6;w6.exports=tb;var r=w6.exports,D6={exports:{}},ii={},I6={exports:{}},L6={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(W,V){var z=W.length;W.push(V);e:for(;0<z;){var q=z-1>>>1,J=W[q];if(0<i(J,V))W[q]=V,W[z]=J,z=q;else break e}}function n(W){return W.length===0?null:W[0]}function s(W){if(W.length===0)return null;var V=W[0],z=W.pop();if(z!==V){W[0]=z;e:for(var q=0,J=W.length,pe=J>>>1;q<pe;){var ye=2*(q+1)-1,Ne=W[ye],ke=ye+1,Ee=W[ke];if(0>i(Ne,z))ke<J&&0>i(Ee,Ne)?(W[q]=Ee,W[ke]=z,q=ke):(W[q]=Ne,W[ye]=z,q=ye);else if(ke<J&&0>i(Ee,z))W[q]=Ee,W[ke]=z,q=ke;else break e}}return V}function i(W,V){var z=W.sortIndex-V.sortIndex;return z!==0?z:W.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],h=1,m=null,f=3,g=!1,x=!1,p=!1,y=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(W){for(var V=n(d);V!==null;){if(V.callback===null)s(d);else if(V.startTime<=W)s(d),V.sortIndex=V.expirationTime,t(c,V);else break;V=n(d)}}function S(W){if(p=!1,N(W),!x)if(n(c)!==null)x=!0,H(P);else{var V=n(d);V!==null&&K(S,V.startTime-W)}}function P(W,V){x=!1,p&&(p=!1,b(O),O=-1),g=!0;var z=f;try{for(N(V),m=n(c);m!==null&&(!(m.expirationTime>V)||W&&!E());){var q=m.callback;if(typeof q=="function"){m.callback=null,f=m.priorityLevel;var J=q(m.expirationTime<=V);V=e.unstable_now(),typeof J=="function"?m.callback=J:m===n(c)&&s(c),N(V)}else s(c);m=n(c)}if(m!==null)var pe=!0;else{var ye=n(d);ye!==null&&K(S,ye.startTime-V),pe=!1}return pe}finally{m=null,f=z,g=!1}}var C=!1,k=null,O=-1,I=5,T=-1;function E(){return!(e.unstable_now()-T<I)}function D(){if(k!==null){var W=e.unstable_now();T=W;var V=!0;try{V=k(!0,W)}finally{V?B():(C=!1,k=null)}}else C=!1}var B;if(typeof w=="function")B=function(){w(D)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,U=M.port2;M.port1.onmessage=D,B=function(){U.postMessage(null)}}else B=function(){y(D,0)};function H(W){k=W,C||(C=!0,B())}function K(W,V){O=y(function(){W(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(W){W.callback=null},e.unstable_continueExecution=function(){x||g||(x=!0,H(P))},e.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<W?Math.floor(1e3/W):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(W){switch(f){case 1:case 2:case 3:var V=3;break;default:V=f}var z=f;f=V;try{return W()}finally{f=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(W,V){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var z=f;f=W;try{return V()}finally{f=z}},e.unstable_scheduleCallback=function(W,V,z){var q=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?q+z:q):z=q,W){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=z+J,W={id:h++,callback:V,priorityLevel:W,startTime:z,expirationTime:J,sortIndex:-1},z>q?(W.sortIndex=z,t(d,W),n(c)===null&&W===n(d)&&(p?(b(O),O=-1):p=!0,K(S,z-q))):(W.sortIndex=J,t(c,W),x||g||(x=!0,H(P))),W},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(W){var V=f;return function(){var z=f;f=V;try{return W.apply(this,arguments)}finally{f=z}}}})(L6);I6.exports=L6;var OX=I6.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MX=j,ei=OX;function Be(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var R6=new Set,Np={};function Qd(e,t){Eh(e,t),Eh(e+"Capture",t)}function Eh(e,t){for(Np[e]=t,e=0;e<t.length;e++)R6.add(t[e])}var zo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),PS=Object.prototype.hasOwnProperty,DX=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,q4={},K4={};function IX(e){return PS.call(K4,e)?!0:PS.call(q4,e)?!1:DX.test(e)?K4[e]=!0:(q4[e]=!0,!1)}function LX(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function RX(e,t,n,s){if(t===null||typeof t>"u"||LX(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function gs(e,t,n,s,i,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var Wn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Wn[e]=new gs(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Wn[t]=new gs(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Wn[e]=new gs(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Wn[e]=new gs(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Wn[e]=new gs(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Wn[e]=new gs(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Wn[e]=new gs(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Wn[e]=new gs(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Wn[e]=new gs(e,5,!1,e.toLowerCase(),null,!1,!1)});var _C=/[\-:]([a-z])/g;function PC(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(_C,PC);Wn[t]=new gs(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(_C,PC);Wn[t]=new gs(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(_C,PC);Wn[t]=new gs(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Wn[e]=new gs(e,1,!1,e.toLowerCase(),null,!1,!1)});Wn.xlinkHref=new gs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Wn[e]=new gs(e,1,!1,e.toLowerCase(),null,!0,!0)});function CC(e,t,n,s){var i=Wn.hasOwnProperty(t)?Wn[t]:null;(i!==null?i.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(RX(t,n,i,s)&&(n=null),s||i===null?IX(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,s=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var tl=MX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xv=Symbol.for("react.element"),Ou=Symbol.for("react.portal"),Mu=Symbol.for("react.fragment"),kC=Symbol.for("react.strict_mode"),CS=Symbol.for("react.profiler"),$6=Symbol.for("react.provider"),F6=Symbol.for("react.context"),TC=Symbol.for("react.forward_ref"),kS=Symbol.for("react.suspense"),TS=Symbol.for("react.suspense_list"),AC=Symbol.for("react.memo"),gl=Symbol.for("react.lazy"),z6=Symbol.for("react.offscreen"),G4=Symbol.iterator;function ff(e){return e===null||typeof e!="object"?null:(e=G4&&e[G4]||e["@@iterator"],typeof e=="function"?e:null)}var Gr=Object.assign,_N;function Bf(e){if(_N===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);_N=t&&t[1]||""}return`
`+_N+e}var PN=!1;function CN(e,t){if(!e||PN)return"";PN=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var s=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){s=d}e.call(t.prototype)}else{try{throw Error()}catch(d){s=d}e()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),a=s.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var c=`
`+i[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{PN=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Bf(e):""}function $X(e){switch(e.tag){case 5:return Bf(e.type);case 16:return Bf("Lazy");case 13:return Bf("Suspense");case 19:return Bf("SuspenseList");case 0:case 2:case 15:return e=CN(e.type,!1),e;case 11:return e=CN(e.type.render,!1),e;case 1:return e=CN(e.type,!0),e;default:return""}}function AS(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Mu:return"Fragment";case Ou:return"Portal";case CS:return"Profiler";case kC:return"StrictMode";case kS:return"Suspense";case TS:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case F6:return(e.displayName||"Context")+".Consumer";case $6:return(e._context.displayName||"Context")+".Provider";case TC:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case AC:return t=e.displayName||null,t!==null?t:AS(e.type)||"Memo";case gl:t=e._payload,e=e._init;try{return AS(e(t))}catch{}}return null}function FX(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return AS(t);case 8:return t===kC?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function sc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function B6(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function zX(e){var t=B6(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){s=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function gv(e){e._valueTracker||(e._valueTracker=zX(e))}function V6(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=B6(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function Ly(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ES(e,t){var n=t.checked;return Gr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Z4(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=sc(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function U6(e,t){t=t.checked,t!=null&&CC(e,"checked",t,!1)}function OS(e,t){U6(e,t);var n=sc(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?MS(e,t.type,n):t.hasOwnProperty("defaultValue")&&MS(e,t.type,sc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Y4(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function MS(e,t,n){(t!=="number"||Ly(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Vf=Array.isArray;function eh(e,t,n,s){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&s&&(e[n].defaultSelected=!0)}else{for(n=""+sc(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,s&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function DS(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Be(91));return Gr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function X4(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Be(92));if(Vf(n)){if(1<n.length)throw Error(Be(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:sc(n)}}function W6(e,t){var n=sc(t.value),s=sc(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function Q4(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function H6(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function IS(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?H6(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var vv,q6=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(vv=vv||document.createElement("div"),vv.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=vv.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Sp(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var tp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},BX=["Webkit","ms","Moz","O"];Object.keys(tp).forEach(function(e){BX.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),tp[t]=tp[e]})});function K6(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||tp.hasOwnProperty(e)&&tp[e]?(""+t).trim():t+"px"}function G6(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,i=K6(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,i):e[n]=i}}var VX=Gr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function LS(e,t){if(t){if(VX[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Be(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Be(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Be(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Be(62))}}function RS(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $S=null;function EC(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var FS=null,th=null,rh=null;function J4(e){if(e=dg(e)){if(typeof FS!="function")throw Error(Be(280));var t=e.stateNode;t&&(t=ab(t),FS(e.stateNode,e.type,t))}}function Z6(e){th?rh?rh.push(e):rh=[e]:th=e}function Y6(){if(th){var e=th,t=rh;if(rh=th=null,J4(e),t)for(e=0;e<t.length;e++)J4(t[e])}}function X6(e,t){return e(t)}function Q6(){}var kN=!1;function J6(e,t,n){if(kN)return e(t,n);kN=!0;try{return X6(e,t,n)}finally{kN=!1,(th!==null||rh!==null)&&(Q6(),Y6())}}function _p(e,t){var n=e.stateNode;if(n===null)return null;var s=ab(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Be(231,t,typeof n));return n}var zS=!1;if(zo)try{var pf={};Object.defineProperty(pf,"passive",{get:function(){zS=!0}}),window.addEventListener("test",pf,pf),window.removeEventListener("test",pf,pf)}catch{zS=!1}function UX(e,t,n,s,i,a,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(h){this.onError(h)}}var rp=!1,Ry=null,$y=!1,BS=null,WX={onError:function(e){rp=!0,Ry=e}};function HX(e,t,n,s,i,a,o,l,c){rp=!1,Ry=null,UX.apply(WX,arguments)}function qX(e,t,n,s,i,a,o,l,c){if(HX.apply(this,arguments),rp){if(rp){var d=Ry;rp=!1,Ry=null}else throw Error(Be(198));$y||($y=!0,BS=d)}}function Jd(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function e$(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function eO(e){if(Jd(e)!==e)throw Error(Be(188))}function KX(e){var t=e.alternate;if(!t){if(t=Jd(e),t===null)throw Error(Be(188));return t!==e?null:e}for(var n=e,s=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(s=i.return,s!==null){n=s;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return eO(i),e;if(a===s)return eO(i),t;a=a.sibling}throw Error(Be(188))}if(n.return!==s.return)n=i,s=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,s=a;break}if(l===s){o=!0,s=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,s=i;break}if(l===s){o=!0,s=a,n=i;break}l=l.sibling}if(!o)throw Error(Be(189))}}if(n.alternate!==s)throw Error(Be(190))}if(n.tag!==3)throw Error(Be(188));return n.stateNode.current===n?e:t}function t$(e){return e=KX(e),e!==null?r$(e):null}function r$(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=r$(e);if(t!==null)return t;e=e.sibling}return null}var n$=ei.unstable_scheduleCallback,tO=ei.unstable_cancelCallback,GX=ei.unstable_shouldYield,ZX=ei.unstable_requestPaint,nn=ei.unstable_now,YX=ei.unstable_getCurrentPriorityLevel,OC=ei.unstable_ImmediatePriority,s$=ei.unstable_UserBlockingPriority,Fy=ei.unstable_NormalPriority,XX=ei.unstable_LowPriority,i$=ei.unstable_IdlePriority,rb=null,Da=null;function QX(e){if(Da&&typeof Da.onCommitFiberRoot=="function")try{Da.onCommitFiberRoot(rb,e,void 0,(e.current.flags&128)===128)}catch{}}var aa=Math.clz32?Math.clz32:tQ,JX=Math.log,eQ=Math.LN2;function tQ(e){return e>>>=0,e===0?32:31-(JX(e)/eQ|0)|0}var yv=64,jv=4194304;function Uf(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function zy(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,i=e.suspendedLanes,a=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?s=Uf(l):(a&=o,a!==0&&(s=Uf(a)))}else o=n&~i,o!==0?s=Uf(o):a!==0&&(s=Uf(a));if(s===0)return 0;if(t!==0&&t!==s&&!(t&i)&&(i=s&-s,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-aa(t),i=1<<n,s|=e[n],t&=~i;return s}function rQ(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nQ(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-aa(a),l=1<<o,c=i[o];c===-1?(!(l&n)||l&s)&&(i[o]=rQ(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function VS(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function a$(){var e=yv;return yv<<=1,!(yv&4194240)&&(yv=64),e}function TN(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function lg(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-aa(t),e[t]=n}function sQ(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-aa(n),a=1<<i;t[i]=0,s[i]=-1,e[i]=-1,n&=~a}}function MC(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-aa(n),i=1<<s;i&t|e[s]&t&&(e[s]|=t),n&=~i}}var ur=0;function o$(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var l$,DC,c$,d$,u$,US=!1,bv=[],zl=null,Bl=null,Vl=null,Pp=new Map,Cp=new Map,jl=[],iQ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rO(e,t){switch(e){case"focusin":case"focusout":zl=null;break;case"dragenter":case"dragleave":Bl=null;break;case"mouseover":case"mouseout":Vl=null;break;case"pointerover":case"pointerout":Pp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cp.delete(t.pointerId)}}function xf(e,t,n,s,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:a,targetContainers:[i]},t!==null&&(t=dg(t),t!==null&&DC(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function aQ(e,t,n,s,i){switch(t){case"focusin":return zl=xf(zl,e,t,n,s,i),!0;case"dragenter":return Bl=xf(Bl,e,t,n,s,i),!0;case"mouseover":return Vl=xf(Vl,e,t,n,s,i),!0;case"pointerover":var a=i.pointerId;return Pp.set(a,xf(Pp.get(a)||null,e,t,n,s,i)),!0;case"gotpointercapture":return a=i.pointerId,Cp.set(a,xf(Cp.get(a)||null,e,t,n,s,i)),!0}return!1}function h$(e){var t=Yc(e.target);if(t!==null){var n=Jd(t);if(n!==null){if(t=n.tag,t===13){if(t=e$(n),t!==null){e.blockedOn=t,u$(e.priority,function(){c$(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function hy(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=WS(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);$S=s,n.target.dispatchEvent(s),$S=null}else return t=dg(n),t!==null&&DC(t),e.blockedOn=n,!1;t.shift()}return!0}function nO(e,t,n){hy(e)&&n.delete(t)}function oQ(){US=!1,zl!==null&&hy(zl)&&(zl=null),Bl!==null&&hy(Bl)&&(Bl=null),Vl!==null&&hy(Vl)&&(Vl=null),Pp.forEach(nO),Cp.forEach(nO)}function gf(e,t){e.blockedOn===t&&(e.blockedOn=null,US||(US=!0,ei.unstable_scheduleCallback(ei.unstable_NormalPriority,oQ)))}function kp(e){function t(i){return gf(i,e)}if(0<bv.length){gf(bv[0],e);for(var n=1;n<bv.length;n++){var s=bv[n];s.blockedOn===e&&(s.blockedOn=null)}}for(zl!==null&&gf(zl,e),Bl!==null&&gf(Bl,e),Vl!==null&&gf(Vl,e),Pp.forEach(t),Cp.forEach(t),n=0;n<jl.length;n++)s=jl[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<jl.length&&(n=jl[0],n.blockedOn===null);)h$(n),n.blockedOn===null&&jl.shift()}var nh=tl.ReactCurrentBatchConfig,By=!0;function lQ(e,t,n,s){var i=ur,a=nh.transition;nh.transition=null;try{ur=1,IC(e,t,n,s)}finally{ur=i,nh.transition=a}}function cQ(e,t,n,s){var i=ur,a=nh.transition;nh.transition=null;try{ur=4,IC(e,t,n,s)}finally{ur=i,nh.transition=a}}function IC(e,t,n,s){if(By){var i=WS(e,t,n,s);if(i===null)FN(e,t,s,Vy,n),rO(e,s);else if(aQ(i,e,t,n,s))s.stopPropagation();else if(rO(e,s),t&4&&-1<iQ.indexOf(e)){for(;i!==null;){var a=dg(i);if(a!==null&&l$(a),a=WS(e,t,n,s),a===null&&FN(e,t,s,Vy,n),a===i)break;i=a}i!==null&&s.stopPropagation()}else FN(e,t,s,null,n)}}var Vy=null;function WS(e,t,n,s){if(Vy=null,e=EC(s),e=Yc(e),e!==null)if(t=Jd(e),t===null)e=null;else if(n=t.tag,n===13){if(e=e$(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Vy=e,null}function m$(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(YX()){case OC:return 1;case s$:return 4;case Fy:case XX:return 16;case i$:return 536870912;default:return 16}default:return 16}}var Ml=null,LC=null,my=null;function f$(){if(my)return my;var e,t=LC,n=t.length,s,i="value"in Ml?Ml.value:Ml.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(s=1;s<=o&&t[n-s]===i[a-s];s++);return my=i.slice(e,1<s?1-s:void 0)}function fy(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function wv(){return!0}function sO(){return!1}function ai(e){function t(n,s,i,a,o){this._reactName=n,this._targetInst=i,this.type=s,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?wv:sO,this.isPropagationStopped=sO,this}return Gr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=wv)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=wv)},persist:function(){},isPersistent:wv}),t}var _m={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},RC=ai(_m),cg=Gr({},_m,{view:0,detail:0}),dQ=ai(cg),AN,EN,vf,nb=Gr({},cg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$C,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==vf&&(vf&&e.type==="mousemove"?(AN=e.screenX-vf.screenX,EN=e.screenY-vf.screenY):EN=AN=0,vf=e),AN)},movementY:function(e){return"movementY"in e?e.movementY:EN}}),iO=ai(nb),uQ=Gr({},nb,{dataTransfer:0}),hQ=ai(uQ),mQ=Gr({},cg,{relatedTarget:0}),ON=ai(mQ),fQ=Gr({},_m,{animationName:0,elapsedTime:0,pseudoElement:0}),pQ=ai(fQ),xQ=Gr({},_m,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),gQ=ai(xQ),vQ=Gr({},_m,{data:0}),aO=ai(vQ),yQ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jQ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bQ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wQ(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=bQ[e])?!!t[e]:!1}function $C(){return wQ}var NQ=Gr({},cg,{key:function(e){if(e.key){var t=yQ[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=fy(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?jQ[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$C,charCode:function(e){return e.type==="keypress"?fy(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?fy(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),SQ=ai(NQ),_Q=Gr({},nb,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oO=ai(_Q),PQ=Gr({},cg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$C}),CQ=ai(PQ),kQ=Gr({},_m,{propertyName:0,elapsedTime:0,pseudoElement:0}),TQ=ai(kQ),AQ=Gr({},nb,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),EQ=ai(AQ),OQ=[9,13,27,32],FC=zo&&"CompositionEvent"in window,np=null;zo&&"documentMode"in document&&(np=document.documentMode);var MQ=zo&&"TextEvent"in window&&!np,p$=zo&&(!FC||np&&8<np&&11>=np),lO=" ",cO=!1;function x$(e,t){switch(e){case"keyup":return OQ.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function g$(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Du=!1;function DQ(e,t){switch(e){case"compositionend":return g$(t);case"keypress":return t.which!==32?null:(cO=!0,lO);case"textInput":return e=t.data,e===lO&&cO?null:e;default:return null}}function IQ(e,t){if(Du)return e==="compositionend"||!FC&&x$(e,t)?(e=f$(),my=LC=Ml=null,Du=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return p$&&t.locale!=="ko"?null:t.data;default:return null}}var LQ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dO(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!LQ[e.type]:t==="textarea"}function v$(e,t,n,s){Z6(s),t=Uy(t,"onChange"),0<t.length&&(n=new RC("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var sp=null,Tp=null;function RQ(e){T$(e,0)}function sb(e){var t=Ru(e);if(V6(t))return e}function $Q(e,t){if(e==="change")return t}var y$=!1;if(zo){var MN;if(zo){var DN="oninput"in document;if(!DN){var uO=document.createElement("div");uO.setAttribute("oninput","return;"),DN=typeof uO.oninput=="function"}MN=DN}else MN=!1;y$=MN&&(!document.documentMode||9<document.documentMode)}function hO(){sp&&(sp.detachEvent("onpropertychange",j$),Tp=sp=null)}function j$(e){if(e.propertyName==="value"&&sb(Tp)){var t=[];v$(t,Tp,e,EC(e)),J6(RQ,t)}}function FQ(e,t,n){e==="focusin"?(hO(),sp=t,Tp=n,sp.attachEvent("onpropertychange",j$)):e==="focusout"&&hO()}function zQ(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return sb(Tp)}function BQ(e,t){if(e==="click")return sb(t)}function VQ(e,t){if(e==="input"||e==="change")return sb(t)}function UQ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ua=typeof Object.is=="function"?Object.is:UQ;function Ap(e,t){if(ua(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var i=n[s];if(!PS.call(t,i)||!ua(e[i],t[i]))return!1}return!0}function mO(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fO(e,t){var n=mO(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mO(n)}}function b$(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?b$(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function w$(){for(var e=window,t=Ly();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ly(e.document)}return t}function zC(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function WQ(e){var t=w$(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&b$(n.ownerDocument.documentElement,n)){if(s!==null&&zC(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(s.start,i);s=s.end===void 0?a:Math.min(s.end,i),!e.extend&&a>s&&(i=s,s=a,a=i),i=fO(n,a);var o=fO(n,s);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>s?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var HQ=zo&&"documentMode"in document&&11>=document.documentMode,Iu=null,HS=null,ip=null,qS=!1;function pO(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qS||Iu==null||Iu!==Ly(s)||(s=Iu,"selectionStart"in s&&zC(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),ip&&Ap(ip,s)||(ip=s,s=Uy(HS,"onSelect"),0<s.length&&(t=new RC("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=Iu)))}function Nv(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Lu={animationend:Nv("Animation","AnimationEnd"),animationiteration:Nv("Animation","AnimationIteration"),animationstart:Nv("Animation","AnimationStart"),transitionend:Nv("Transition","TransitionEnd")},IN={},N$={};zo&&(N$=document.createElement("div").style,"AnimationEvent"in window||(delete Lu.animationend.animation,delete Lu.animationiteration.animation,delete Lu.animationstart.animation),"TransitionEvent"in window||delete Lu.transitionend.transition);function ib(e){if(IN[e])return IN[e];if(!Lu[e])return e;var t=Lu[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in N$)return IN[e]=t[n];return e}var S$=ib("animationend"),_$=ib("animationiteration"),P$=ib("animationstart"),C$=ib("transitionend"),k$=new Map,xO="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yc(e,t){k$.set(e,t),Qd(t,[e])}for(var LN=0;LN<xO.length;LN++){var RN=xO[LN],qQ=RN.toLowerCase(),KQ=RN[0].toUpperCase()+RN.slice(1);yc(qQ,"on"+KQ)}yc(S$,"onAnimationEnd");yc(_$,"onAnimationIteration");yc(P$,"onAnimationStart");yc("dblclick","onDoubleClick");yc("focusin","onFocus");yc("focusout","onBlur");yc(C$,"onTransitionEnd");Eh("onMouseEnter",["mouseout","mouseover"]);Eh("onMouseLeave",["mouseout","mouseover"]);Eh("onPointerEnter",["pointerout","pointerover"]);Eh("onPointerLeave",["pointerout","pointerover"]);Qd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qd("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GQ=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wf));function gO(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,qX(s,t,void 0,e),e.currentTarget=null}function T$(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],i=s.event;s=s.listeners;e:{var a=void 0;if(t)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==a&&i.isPropagationStopped())break e;gO(i,l,d),a=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==a&&i.isPropagationStopped())break e;gO(i,l,d),a=c}}}if($y)throw e=BS,$y=!1,BS=null,e}function _r(e,t){var n=t[XS];n===void 0&&(n=t[XS]=new Set);var s=e+"__bubble";n.has(s)||(A$(t,e,2,!1),n.add(s))}function $N(e,t,n){var s=0;t&&(s|=4),A$(n,e,s,t)}var Sv="_reactListening"+Math.random().toString(36).slice(2);function Ep(e){if(!e[Sv]){e[Sv]=!0,R6.forEach(function(n){n!=="selectionchange"&&(GQ.has(n)||$N(n,!1,e),$N(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Sv]||(t[Sv]=!0,$N("selectionchange",!1,t))}}function A$(e,t,n,s){switch(m$(t)){case 1:var i=lQ;break;case 4:i=cQ;break;default:i=IC}n=i.bind(null,t,n,e),i=void 0,!zS||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),s?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function FN(e,t,n,s,i){var a=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Yc(l),o===null)return;if(c=o.tag,c===5||c===6){s=a=o;continue e}l=l.parentNode}}s=s.return}J6(function(){var d=a,h=EC(n),m=[];e:{var f=k$.get(e);if(f!==void 0){var g=RC,x=e;switch(e){case"keypress":if(fy(n)===0)break e;case"keydown":case"keyup":g=SQ;break;case"focusin":x="focus",g=ON;break;case"focusout":x="blur",g=ON;break;case"beforeblur":case"afterblur":g=ON;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=iO;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=hQ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=CQ;break;case S$:case _$:case P$:g=pQ;break;case C$:g=TQ;break;case"scroll":g=dQ;break;case"wheel":g=EQ;break;case"copy":case"cut":case"paste":g=gQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=oO}var p=(t&4)!==0,y=!p&&e==="scroll",b=p?f!==null?f+"Capture":null:f;p=[];for(var w=d,N;w!==null;){N=w;var S=N.stateNode;if(N.tag===5&&S!==null&&(N=S,b!==null&&(S=_p(w,b),S!=null&&p.push(Op(w,S,N)))),y)break;w=w.return}0<p.length&&(f=new g(f,x,null,n,h),m.push({event:f,listeners:p}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",f&&n!==$S&&(x=n.relatedTarget||n.fromElement)&&(Yc(x)||x[Bo]))break e;if((g||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,g?(x=n.relatedTarget||n.toElement,g=d,x=x?Yc(x):null,x!==null&&(y=Jd(x),x!==y||x.tag!==5&&x.tag!==6)&&(x=null)):(g=null,x=d),g!==x)){if(p=iO,S="onMouseLeave",b="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(p=oO,S="onPointerLeave",b="onPointerEnter",w="pointer"),y=g==null?f:Ru(g),N=x==null?f:Ru(x),f=new p(S,w+"leave",g,n,h),f.target=y,f.relatedTarget=N,S=null,Yc(h)===d&&(p=new p(b,w+"enter",x,n,h),p.target=N,p.relatedTarget=y,S=p),y=S,g&&x)t:{for(p=g,b=x,w=0,N=p;N;N=ju(N))w++;for(N=0,S=b;S;S=ju(S))N++;for(;0<w-N;)p=ju(p),w--;for(;0<N-w;)b=ju(b),N--;for(;w--;){if(p===b||b!==null&&p===b.alternate)break t;p=ju(p),b=ju(b)}p=null}else p=null;g!==null&&vO(m,f,g,p,!1),x!==null&&y!==null&&vO(m,y,x,p,!0)}}e:{if(f=d?Ru(d):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var P=$Q;else if(dO(f))if(y$)P=VQ;else{P=zQ;var C=FQ}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(P=BQ);if(P&&(P=P(e,d))){v$(m,P,n,h);break e}C&&C(e,f,d),e==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&MS(f,"number",f.value)}switch(C=d?Ru(d):window,e){case"focusin":(dO(C)||C.contentEditable==="true")&&(Iu=C,HS=d,ip=null);break;case"focusout":ip=HS=Iu=null;break;case"mousedown":qS=!0;break;case"contextmenu":case"mouseup":case"dragend":qS=!1,pO(m,n,h);break;case"selectionchange":if(HQ)break;case"keydown":case"keyup":pO(m,n,h)}var k;if(FC)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Du?x$(e,n)&&(O="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(O="onCompositionStart");O&&(p$&&n.locale!=="ko"&&(Du||O!=="onCompositionStart"?O==="onCompositionEnd"&&Du&&(k=f$()):(Ml=h,LC="value"in Ml?Ml.value:Ml.textContent,Du=!0)),C=Uy(d,O),0<C.length&&(O=new aO(O,e,null,n,h),m.push({event:O,listeners:C}),k?O.data=k:(k=g$(n),k!==null&&(O.data=k)))),(k=MQ?DQ(e,n):IQ(e,n))&&(d=Uy(d,"onBeforeInput"),0<d.length&&(h=new aO("onBeforeInput","beforeinput",null,n,h),m.push({event:h,listeners:d}),h.data=k))}T$(m,t)})}function Op(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Uy(e,t){for(var n=t+"Capture",s=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=_p(e,n),a!=null&&s.unshift(Op(e,a,i)),a=_p(e,t),a!=null&&s.push(Op(e,a,i))),e=e.return}return s}function ju(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function vO(e,t,n,s,i){for(var a=t._reactName,o=[];n!==null&&n!==s;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&d!==null&&(l=d,i?(c=_p(n,a),c!=null&&o.unshift(Op(n,c,l))):i||(c=_p(n,a),c!=null&&o.push(Op(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var ZQ=/\r\n?/g,YQ=/\u0000|\uFFFD/g;function yO(e){return(typeof e=="string"?e:""+e).replace(ZQ,`
`).replace(YQ,"")}function _v(e,t,n){if(t=yO(t),yO(e)!==t&&n)throw Error(Be(425))}function Wy(){}var KS=null,GS=null;function ZS(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var YS=typeof setTimeout=="function"?setTimeout:void 0,XQ=typeof clearTimeout=="function"?clearTimeout:void 0,jO=typeof Promise=="function"?Promise:void 0,QQ=typeof queueMicrotask=="function"?queueMicrotask:typeof jO<"u"?function(e){return jO.resolve(null).then(e).catch(JQ)}:YS;function JQ(e){setTimeout(function(){throw e})}function zN(e,t){var n=t,s=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(s===0){e.removeChild(i),kp(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=i}while(n);kp(t)}function Ul(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function bO(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Pm=Math.random().toString(36).slice(2),Ca="__reactFiber$"+Pm,Mp="__reactProps$"+Pm,Bo="__reactContainer$"+Pm,XS="__reactEvents$"+Pm,eJ="__reactListeners$"+Pm,tJ="__reactHandles$"+Pm;function Yc(e){var t=e[Ca];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Bo]||n[Ca]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=bO(e);e!==null;){if(n=e[Ca])return n;e=bO(e)}return t}e=n,n=e.parentNode}return null}function dg(e){return e=e[Ca]||e[Bo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ru(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Be(33))}function ab(e){return e[Mp]||null}var QS=[],$u=-1;function jc(e){return{current:e}}function Mr(e){0>$u||(e.current=QS[$u],QS[$u]=null,$u--)}function br(e,t){$u++,QS[$u]=e.current,e.current=t}var ic={},rs=jc(ic),As=jc(!1),_d=ic;function Oh(e,t){var n=e.type.contextTypes;if(!n)return ic;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=t[a];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Es(e){return e=e.childContextTypes,e!=null}function Hy(){Mr(As),Mr(rs)}function wO(e,t,n){if(rs.current!==ic)throw Error(Be(168));br(rs,t),br(As,n)}function E$(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var i in s)if(!(i in t))throw Error(Be(108,FX(e)||"Unknown",i));return Gr({},n,s)}function qy(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ic,_d=rs.current,br(rs,e),br(As,As.current),!0}function NO(e,t,n){var s=e.stateNode;if(!s)throw Error(Be(169));n?(e=E$(e,t,_d),s.__reactInternalMemoizedMergedChildContext=e,Mr(As),Mr(rs),br(rs,e)):Mr(As),br(As,n)}var vo=null,ob=!1,BN=!1;function O$(e){vo===null?vo=[e]:vo.push(e)}function rJ(e){ob=!0,O$(e)}function bc(){if(!BN&&vo!==null){BN=!0;var e=0,t=ur;try{var n=vo;for(ur=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}vo=null,ob=!1}catch(i){throw vo!==null&&(vo=vo.slice(e+1)),n$(OC,bc),i}finally{ur=t,BN=!1}}return null}var Fu=[],zu=0,Ky=null,Gy=0,vi=[],yi=0,Pd=null,No=1,So="";function Bc(e,t){Fu[zu++]=Gy,Fu[zu++]=Ky,Ky=e,Gy=t}function M$(e,t,n){vi[yi++]=No,vi[yi++]=So,vi[yi++]=Pd,Pd=e;var s=No;e=So;var i=32-aa(s)-1;s&=~(1<<i),n+=1;var a=32-aa(t)+i;if(30<a){var o=i-i%5;a=(s&(1<<o)-1).toString(32),s>>=o,i-=o,No=1<<32-aa(t)+i|n<<i|s,So=a+e}else No=1<<a|n<<i|s,So=e}function BC(e){e.return!==null&&(Bc(e,1),M$(e,1,0))}function VC(e){for(;e===Ky;)Ky=Fu[--zu],Fu[zu]=null,Gy=Fu[--zu],Fu[zu]=null;for(;e===Pd;)Pd=vi[--yi],vi[yi]=null,So=vi[--yi],vi[yi]=null,No=vi[--yi],vi[yi]=null}var Zs=null,Gs=null,Lr=!1,Ji=null;function D$(e,t){var n=_i(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function SO(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Zs=e,Gs=Ul(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Zs=e,Gs=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Pd!==null?{id:No,overflow:So}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=_i(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Zs=e,Gs=null,!0):!1;default:return!1}}function JS(e){return(e.mode&1)!==0&&(e.flags&128)===0}function e_(e){if(Lr){var t=Gs;if(t){var n=t;if(!SO(e,t)){if(JS(e))throw Error(Be(418));t=Ul(n.nextSibling);var s=Zs;t&&SO(e,t)?D$(s,n):(e.flags=e.flags&-4097|2,Lr=!1,Zs=e)}}else{if(JS(e))throw Error(Be(418));e.flags=e.flags&-4097|2,Lr=!1,Zs=e}}}function _O(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Zs=e}function Pv(e){if(e!==Zs)return!1;if(!Lr)return _O(e),Lr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ZS(e.type,e.memoizedProps)),t&&(t=Gs)){if(JS(e))throw I$(),Error(Be(418));for(;t;)D$(e,t),t=Ul(t.nextSibling)}if(_O(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Be(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Gs=Ul(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Gs=null}}else Gs=Zs?Ul(e.stateNode.nextSibling):null;return!0}function I$(){for(var e=Gs;e;)e=Ul(e.nextSibling)}function Mh(){Gs=Zs=null,Lr=!1}function UC(e){Ji===null?Ji=[e]:Ji.push(e)}var nJ=tl.ReactCurrentBatchConfig;function yf(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Be(309));var s=n.stateNode}if(!s)throw Error(Be(147,e));var i=s,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var l=i.refs;o===null?delete l[a]:l[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(Be(284));if(!n._owner)throw Error(Be(290,e))}return e}function Cv(e,t){throw e=Object.prototype.toString.call(t),Error(Be(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function PO(e){var t=e._init;return t(e._payload)}function L$(e){function t(b,w){if(e){var N=b.deletions;N===null?(b.deletions=[w],b.flags|=16):N.push(w)}}function n(b,w){if(!e)return null;for(;w!==null;)t(b,w),w=w.sibling;return null}function s(b,w){for(b=new Map;w!==null;)w.key!==null?b.set(w.key,w):b.set(w.index,w),w=w.sibling;return b}function i(b,w){return b=Kl(b,w),b.index=0,b.sibling=null,b}function a(b,w,N){return b.index=N,e?(N=b.alternate,N!==null?(N=N.index,N<w?(b.flags|=2,w):N):(b.flags|=2,w)):(b.flags|=1048576,w)}function o(b){return e&&b.alternate===null&&(b.flags|=2),b}function l(b,w,N,S){return w===null||w.tag!==6?(w=GN(N,b.mode,S),w.return=b,w):(w=i(w,N),w.return=b,w)}function c(b,w,N,S){var P=N.type;return P===Mu?h(b,w,N.props.children,S,N.key):w!==null&&(w.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===gl&&PO(P)===w.type)?(S=i(w,N.props),S.ref=yf(b,w,N),S.return=b,S):(S=by(N.type,N.key,N.props,null,b.mode,S),S.ref=yf(b,w,N),S.return=b,S)}function d(b,w,N,S){return w===null||w.tag!==4||w.stateNode.containerInfo!==N.containerInfo||w.stateNode.implementation!==N.implementation?(w=ZN(N,b.mode,S),w.return=b,w):(w=i(w,N.children||[]),w.return=b,w)}function h(b,w,N,S,P){return w===null||w.tag!==7?(w=xd(N,b.mode,S,P),w.return=b,w):(w=i(w,N),w.return=b,w)}function m(b,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return w=GN(""+w,b.mode,N),w.return=b,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case xv:return N=by(w.type,w.key,w.props,null,b.mode,N),N.ref=yf(b,null,w),N.return=b,N;case Ou:return w=ZN(w,b.mode,N),w.return=b,w;case gl:var S=w._init;return m(b,S(w._payload),N)}if(Vf(w)||ff(w))return w=xd(w,b.mode,N,null),w.return=b,w;Cv(b,w)}return null}function f(b,w,N,S){var P=w!==null?w.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return P!==null?null:l(b,w,""+N,S);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case xv:return N.key===P?c(b,w,N,S):null;case Ou:return N.key===P?d(b,w,N,S):null;case gl:return P=N._init,f(b,w,P(N._payload),S)}if(Vf(N)||ff(N))return P!==null?null:h(b,w,N,S,null);Cv(b,N)}return null}function g(b,w,N,S,P){if(typeof S=="string"&&S!==""||typeof S=="number")return b=b.get(N)||null,l(w,b,""+S,P);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case xv:return b=b.get(S.key===null?N:S.key)||null,c(w,b,S,P);case Ou:return b=b.get(S.key===null?N:S.key)||null,d(w,b,S,P);case gl:var C=S._init;return g(b,w,N,C(S._payload),P)}if(Vf(S)||ff(S))return b=b.get(N)||null,h(w,b,S,P,null);Cv(w,S)}return null}function x(b,w,N,S){for(var P=null,C=null,k=w,O=w=0,I=null;k!==null&&O<N.length;O++){k.index>O?(I=k,k=null):I=k.sibling;var T=f(b,k,N[O],S);if(T===null){k===null&&(k=I);break}e&&k&&T.alternate===null&&t(b,k),w=a(T,w,O),C===null?P=T:C.sibling=T,C=T,k=I}if(O===N.length)return n(b,k),Lr&&Bc(b,O),P;if(k===null){for(;O<N.length;O++)k=m(b,N[O],S),k!==null&&(w=a(k,w,O),C===null?P=k:C.sibling=k,C=k);return Lr&&Bc(b,O),P}for(k=s(b,k);O<N.length;O++)I=g(k,b,O,N[O],S),I!==null&&(e&&I.alternate!==null&&k.delete(I.key===null?O:I.key),w=a(I,w,O),C===null?P=I:C.sibling=I,C=I);return e&&k.forEach(function(E){return t(b,E)}),Lr&&Bc(b,O),P}function p(b,w,N,S){var P=ff(N);if(typeof P!="function")throw Error(Be(150));if(N=P.call(N),N==null)throw Error(Be(151));for(var C=P=null,k=w,O=w=0,I=null,T=N.next();k!==null&&!T.done;O++,T=N.next()){k.index>O?(I=k,k=null):I=k.sibling;var E=f(b,k,T.value,S);if(E===null){k===null&&(k=I);break}e&&k&&E.alternate===null&&t(b,k),w=a(E,w,O),C===null?P=E:C.sibling=E,C=E,k=I}if(T.done)return n(b,k),Lr&&Bc(b,O),P;if(k===null){for(;!T.done;O++,T=N.next())T=m(b,T.value,S),T!==null&&(w=a(T,w,O),C===null?P=T:C.sibling=T,C=T);return Lr&&Bc(b,O),P}for(k=s(b,k);!T.done;O++,T=N.next())T=g(k,b,O,T.value,S),T!==null&&(e&&T.alternate!==null&&k.delete(T.key===null?O:T.key),w=a(T,w,O),C===null?P=T:C.sibling=T,C=T);return e&&k.forEach(function(D){return t(b,D)}),Lr&&Bc(b,O),P}function y(b,w,N,S){if(typeof N=="object"&&N!==null&&N.type===Mu&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case xv:e:{for(var P=N.key,C=w;C!==null;){if(C.key===P){if(P=N.type,P===Mu){if(C.tag===7){n(b,C.sibling),w=i(C,N.props.children),w.return=b,b=w;break e}}else if(C.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===gl&&PO(P)===C.type){n(b,C.sibling),w=i(C,N.props),w.ref=yf(b,C,N),w.return=b,b=w;break e}n(b,C);break}else t(b,C);C=C.sibling}N.type===Mu?(w=xd(N.props.children,b.mode,S,N.key),w.return=b,b=w):(S=by(N.type,N.key,N.props,null,b.mode,S),S.ref=yf(b,w,N),S.return=b,b=S)}return o(b);case Ou:e:{for(C=N.key;w!==null;){if(w.key===C)if(w.tag===4&&w.stateNode.containerInfo===N.containerInfo&&w.stateNode.implementation===N.implementation){n(b,w.sibling),w=i(w,N.children||[]),w.return=b,b=w;break e}else{n(b,w);break}else t(b,w);w=w.sibling}w=ZN(N,b.mode,S),w.return=b,b=w}return o(b);case gl:return C=N._init,y(b,w,C(N._payload),S)}if(Vf(N))return x(b,w,N,S);if(ff(N))return p(b,w,N,S);Cv(b,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,w!==null&&w.tag===6?(n(b,w.sibling),w=i(w,N),w.return=b,b=w):(n(b,w),w=GN(N,b.mode,S),w.return=b,b=w),o(b)):n(b,w)}return y}var Dh=L$(!0),R$=L$(!1),Zy=jc(null),Yy=null,Bu=null,WC=null;function HC(){WC=Bu=Yy=null}function qC(e){var t=Zy.current;Mr(Zy),e._currentValue=t}function t_(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function sh(e,t){Yy=e,WC=Bu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Cs=!0),e.firstContext=null)}function Di(e){var t=e._currentValue;if(WC!==e)if(e={context:e,memoizedValue:t,next:null},Bu===null){if(Yy===null)throw Error(Be(308));Bu=e,Yy.dependencies={lanes:0,firstContext:e}}else Bu=Bu.next=e;return t}var Xc=null;function KC(e){Xc===null?Xc=[e]:Xc.push(e)}function $$(e,t,n,s){var i=t.interleaved;return i===null?(n.next=n,KC(t)):(n.next=i.next,i.next=n),t.interleaved=n,Vo(e,s)}function Vo(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var vl=!1;function GC(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function F$(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ao(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Wl(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,er&2){var i=s.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),s.pending=t,Vo(e,n)}return i=s.interleaved,i===null?(t.next=t,KC(s)):(t.next=i.next,i.next=t),s.interleaved=t,Vo(e,n)}function py(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,MC(e,n)}}function CO(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Xy(e,t,n,s){var i=e.updateQueue;vl=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?a=d:o.next=d,o=c;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(a!==null){var m=i.baseState;o=0,h=d=c=null,l=a;do{var f=l.lane,g=l.eventTime;if((s&f)===f){h!==null&&(h=h.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=e,p=l;switch(f=t,g=n,p.tag){case 1:if(x=p.payload,typeof x=="function"){m=x.call(g,m,f);break e}m=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=p.payload,f=typeof x=="function"?x.call(g,m,f):x,f==null)break e;m=Gr({},m,f);break e;case 2:vl=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else g={eventTime:g,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=g,c=m):h=h.next=g,o|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(c=m),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=h,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);kd|=o,e.lanes=o,e.memoizedState=m}}function kO(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],i=s.callback;if(i!==null){if(s.callback=null,s=n,typeof i!="function")throw Error(Be(191,i));i.call(s)}}}var ug={},Ia=jc(ug),Dp=jc(ug),Ip=jc(ug);function Qc(e){if(e===ug)throw Error(Be(174));return e}function ZC(e,t){switch(br(Ip,t),br(Dp,e),br(Ia,ug),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:IS(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=IS(t,e)}Mr(Ia),br(Ia,t)}function Ih(){Mr(Ia),Mr(Dp),Mr(Ip)}function z$(e){Qc(Ip.current);var t=Qc(Ia.current),n=IS(t,e.type);t!==n&&(br(Dp,e),br(Ia,n))}function YC(e){Dp.current===e&&(Mr(Ia),Mr(Dp))}var Ur=jc(0);function Qy(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var VN=[];function XC(){for(var e=0;e<VN.length;e++)VN[e]._workInProgressVersionPrimary=null;VN.length=0}var xy=tl.ReactCurrentDispatcher,UN=tl.ReactCurrentBatchConfig,Cd=0,Kr=null,bn=null,An=null,Jy=!1,ap=!1,Lp=0,sJ=0;function Hn(){throw Error(Be(321))}function QC(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ua(e[n],t[n]))return!1;return!0}function JC(e,t,n,s,i,a){if(Cd=a,Kr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,xy.current=e===null||e.memoizedState===null?lJ:cJ,e=n(s,i),ap){a=0;do{if(ap=!1,Lp=0,25<=a)throw Error(Be(301));a+=1,An=bn=null,t.updateQueue=null,xy.current=dJ,e=n(s,i)}while(ap)}if(xy.current=e0,t=bn!==null&&bn.next!==null,Cd=0,An=bn=Kr=null,Jy=!1,t)throw Error(Be(300));return e}function ek(){var e=Lp!==0;return Lp=0,e}function wa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return An===null?Kr.memoizedState=An=e:An=An.next=e,An}function Ii(){if(bn===null){var e=Kr.alternate;e=e!==null?e.memoizedState:null}else e=bn.next;var t=An===null?Kr.memoizedState:An.next;if(t!==null)An=t,bn=e;else{if(e===null)throw Error(Be(310));bn=e,e={memoizedState:bn.memoizedState,baseState:bn.baseState,baseQueue:bn.baseQueue,queue:bn.queue,next:null},An===null?Kr.memoizedState=An=e:An=An.next=e}return An}function Rp(e,t){return typeof t=="function"?t(e):t}function WN(e){var t=Ii(),n=t.queue;if(n===null)throw Error(Be(311));n.lastRenderedReducer=e;var s=bn,i=s.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}s.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,s=s.baseState;var l=o=null,c=null,d=a;do{var h=d.lane;if((Cd&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var m={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=m,o=s):c=c.next=m,Kr.lanes|=h,kd|=h}d=d.next}while(d!==null&&d!==a);c===null?o=s:c.next=l,ua(s,t.memoizedState)||(Cs=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,n.lastRenderedState=s}if(e=n.interleaved,e!==null){i=e;do a=i.lane,Kr.lanes|=a,kd|=a,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function HN(e){var t=Ii(),n=t.queue;if(n===null)throw Error(Be(311));n.lastRenderedReducer=e;var s=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=e(a,o.action),o=o.next;while(o!==i);ua(a,t.memoizedState)||(Cs=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,s]}function B$(){}function V$(e,t){var n=Kr,s=Ii(),i=t(),a=!ua(s.memoizedState,i);if(a&&(s.memoizedState=i,Cs=!0),s=s.queue,tk(H$.bind(null,n,s,e),[e]),s.getSnapshot!==t||a||An!==null&&An.memoizedState.tag&1){if(n.flags|=2048,$p(9,W$.bind(null,n,s,i,t),void 0,null),En===null)throw Error(Be(349));Cd&30||U$(n,t,i)}return i}function U$(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Kr.updateQueue,t===null?(t={lastEffect:null,stores:null},Kr.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function W$(e,t,n,s){t.value=n,t.getSnapshot=s,q$(t)&&K$(e)}function H$(e,t,n){return n(function(){q$(t)&&K$(e)})}function q$(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ua(e,n)}catch{return!0}}function K$(e){var t=Vo(e,1);t!==null&&oa(t,e,1,-1)}function TO(e){var t=wa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rp,lastRenderedState:e},t.queue=e,e=e.dispatch=oJ.bind(null,Kr,e),[t.memoizedState,e]}function $p(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=Kr.updateQueue,t===null?(t={lastEffect:null,stores:null},Kr.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function G$(){return Ii().memoizedState}function gy(e,t,n,s){var i=wa();Kr.flags|=e,i.memoizedState=$p(1|t,n,void 0,s===void 0?null:s)}function lb(e,t,n,s){var i=Ii();s=s===void 0?null:s;var a=void 0;if(bn!==null){var o=bn.memoizedState;if(a=o.destroy,s!==null&&QC(s,o.deps)){i.memoizedState=$p(t,n,a,s);return}}Kr.flags|=e,i.memoizedState=$p(1|t,n,a,s)}function AO(e,t){return gy(8390656,8,e,t)}function tk(e,t){return lb(2048,8,e,t)}function Z$(e,t){return lb(4,2,e,t)}function Y$(e,t){return lb(4,4,e,t)}function X$(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Q$(e,t,n){return n=n!=null?n.concat([e]):null,lb(4,4,X$.bind(null,t,e),n)}function rk(){}function J$(e,t){var n=Ii();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&QC(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function eF(e,t){var n=Ii();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&QC(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function tF(e,t,n){return Cd&21?(ua(n,t)||(n=a$(),Kr.lanes|=n,kd|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Cs=!0),e.memoizedState=n)}function iJ(e,t){var n=ur;ur=n!==0&&4>n?n:4,e(!0);var s=UN.transition;UN.transition={};try{e(!1),t()}finally{ur=n,UN.transition=s}}function rF(){return Ii().memoizedState}function aJ(e,t,n){var s=ql(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},nF(e))sF(t,n);else if(n=$$(e,t,n,s),n!==null){var i=ms();oa(n,e,s,i),iF(n,t,s)}}function oJ(e,t,n){var s=ql(e),i={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(nF(e))sF(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,l=a(o,n);if(i.hasEagerState=!0,i.eagerState=l,ua(l,o)){var c=t.interleaved;c===null?(i.next=i,KC(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=$$(e,t,i,s),n!==null&&(i=ms(),oa(n,e,s,i),iF(n,t,s))}}function nF(e){var t=e.alternate;return e===Kr||t!==null&&t===Kr}function sF(e,t){ap=Jy=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function iF(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,MC(e,n)}}var e0={readContext:Di,useCallback:Hn,useContext:Hn,useEffect:Hn,useImperativeHandle:Hn,useInsertionEffect:Hn,useLayoutEffect:Hn,useMemo:Hn,useReducer:Hn,useRef:Hn,useState:Hn,useDebugValue:Hn,useDeferredValue:Hn,useTransition:Hn,useMutableSource:Hn,useSyncExternalStore:Hn,useId:Hn,unstable_isNewReconciler:!1},lJ={readContext:Di,useCallback:function(e,t){return wa().memoizedState=[e,t===void 0?null:t],e},useContext:Di,useEffect:AO,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,gy(4194308,4,X$.bind(null,t,e),n)},useLayoutEffect:function(e,t){return gy(4194308,4,e,t)},useInsertionEffect:function(e,t){return gy(4,2,e,t)},useMemo:function(e,t){var n=wa();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=wa();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=aJ.bind(null,Kr,e),[s.memoizedState,e]},useRef:function(e){var t=wa();return e={current:e},t.memoizedState=e},useState:TO,useDebugValue:rk,useDeferredValue:function(e){return wa().memoizedState=e},useTransition:function(){var e=TO(!1),t=e[0];return e=iJ.bind(null,e[1]),wa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=Kr,i=wa();if(Lr){if(n===void 0)throw Error(Be(407));n=n()}else{if(n=t(),En===null)throw Error(Be(349));Cd&30||U$(s,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,AO(H$.bind(null,s,a,e),[e]),s.flags|=2048,$p(9,W$.bind(null,s,a,n,t),void 0,null),n},useId:function(){var e=wa(),t=En.identifierPrefix;if(Lr){var n=So,s=No;n=(s&~(1<<32-aa(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=Lp++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=sJ++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},cJ={readContext:Di,useCallback:J$,useContext:Di,useEffect:tk,useImperativeHandle:Q$,useInsertionEffect:Z$,useLayoutEffect:Y$,useMemo:eF,useReducer:WN,useRef:G$,useState:function(){return WN(Rp)},useDebugValue:rk,useDeferredValue:function(e){var t=Ii();return tF(t,bn.memoizedState,e)},useTransition:function(){var e=WN(Rp)[0],t=Ii().memoizedState;return[e,t]},useMutableSource:B$,useSyncExternalStore:V$,useId:rF,unstable_isNewReconciler:!1},dJ={readContext:Di,useCallback:J$,useContext:Di,useEffect:tk,useImperativeHandle:Q$,useInsertionEffect:Z$,useLayoutEffect:Y$,useMemo:eF,useReducer:HN,useRef:G$,useState:function(){return HN(Rp)},useDebugValue:rk,useDeferredValue:function(e){var t=Ii();return bn===null?t.memoizedState=e:tF(t,bn.memoizedState,e)},useTransition:function(){var e=HN(Rp)[0],t=Ii().memoizedState;return[e,t]},useMutableSource:B$,useSyncExternalStore:V$,useId:rF,unstable_isNewReconciler:!1};function Ki(e,t){if(e&&e.defaultProps){t=Gr({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function r_(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:Gr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var cb={isMounted:function(e){return(e=e._reactInternals)?Jd(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=ms(),i=ql(e),a=Ao(s,i);a.payload=t,n!=null&&(a.callback=n),t=Wl(e,a,i),t!==null&&(oa(t,e,i,s),py(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=ms(),i=ql(e),a=Ao(s,i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Wl(e,a,i),t!==null&&(oa(t,e,i,s),py(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ms(),s=ql(e),i=Ao(n,s);i.tag=2,t!=null&&(i.callback=t),t=Wl(e,i,s),t!==null&&(oa(t,e,s,n),py(t,e,s))}};function EO(e,t,n,s,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,a,o):t.prototype&&t.prototype.isPureReactComponent?!Ap(n,s)||!Ap(i,a):!0}function aF(e,t,n){var s=!1,i=ic,a=t.contextType;return typeof a=="object"&&a!==null?a=Di(a):(i=Es(t)?_d:rs.current,s=t.contextTypes,a=(s=s!=null)?Oh(e,i):ic),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=cb,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function OO(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&cb.enqueueReplaceState(t,t.state,null)}function n_(e,t,n,s){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},GC(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Di(a):(a=Es(t)?_d:rs.current,i.context=Oh(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(r_(e,t,a,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&cb.enqueueReplaceState(i,i.state,null),Xy(e,n,i,s),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Lh(e,t){try{var n="",s=t;do n+=$X(s),s=s.return;while(s);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function qN(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function s_(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var uJ=typeof WeakMap=="function"?WeakMap:Map;function oF(e,t,n){n=Ao(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){r0||(r0=!0,f_=s),s_(e,t)},n}function lF(e,t,n){n=Ao(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var i=t.value;n.payload=function(){return s(i)},n.callback=function(){s_(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){s_(e,t),typeof s!="function"&&(Hl===null?Hl=new Set([this]):Hl.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function MO(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new uJ;var i=new Set;s.set(t,i)}else i=s.get(t),i===void 0&&(i=new Set,s.set(t,i));i.has(n)||(i.add(n),e=_J.bind(null,e,t,n),t.then(e,e))}function DO(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function IO(e,t,n,s,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ao(-1,1),t.tag=2,Wl(n,t,1))),n.lanes|=1),e)}var hJ=tl.ReactCurrentOwner,Cs=!1;function cs(e,t,n,s){t.child=e===null?R$(t,null,n,s):Dh(t,e.child,n,s)}function LO(e,t,n,s,i){n=n.render;var a=t.ref;return sh(t,i),s=JC(e,t,n,s,a,i),n=ek(),e!==null&&!Cs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Uo(e,t,i)):(Lr&&n&&BC(t),t.flags|=1,cs(e,t,s,i),t.child)}function RO(e,t,n,s,i){if(e===null){var a=n.type;return typeof a=="function"&&!dk(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,cF(e,t,a,s,i)):(e=by(n.type,null,s,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Ap,n(o,s)&&e.ref===t.ref)return Uo(e,t,i)}return t.flags|=1,e=Kl(a,s),e.ref=t.ref,e.return=t,t.child=e}function cF(e,t,n,s,i){if(e!==null){var a=e.memoizedProps;if(Ap(a,s)&&e.ref===t.ref)if(Cs=!1,t.pendingProps=s=a,(e.lanes&i)!==0)e.flags&131072&&(Cs=!0);else return t.lanes=e.lanes,Uo(e,t,i)}return i_(e,t,n,s,i)}function dF(e,t,n){var s=t.pendingProps,i=s.children,a=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},br(Uu,Fs),Fs|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,br(Uu,Fs),Fs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:n,br(Uu,Fs),Fs|=s}else a!==null?(s=a.baseLanes|n,t.memoizedState=null):s=n,br(Uu,Fs),Fs|=s;return cs(e,t,i,n),t.child}function uF(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function i_(e,t,n,s,i){var a=Es(n)?_d:rs.current;return a=Oh(t,a),sh(t,i),n=JC(e,t,n,s,a,i),s=ek(),e!==null&&!Cs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Uo(e,t,i)):(Lr&&s&&BC(t),t.flags|=1,cs(e,t,n,i),t.child)}function $O(e,t,n,s,i){if(Es(n)){var a=!0;qy(t)}else a=!1;if(sh(t,i),t.stateNode===null)vy(e,t),aF(t,n,s),n_(t,n,s,i),s=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Di(d):(d=Es(n)?_d:rs.current,d=Oh(t,d));var h=n.getDerivedStateFromProps,m=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||c!==d)&&OO(t,o,s,d),vl=!1;var f=t.memoizedState;o.state=f,Xy(t,s,o,i),c=t.memoizedState,l!==s||f!==c||As.current||vl?(typeof h=="function"&&(r_(t,n,h,s),c=t.memoizedState),(l=vl||EO(t,n,l,s,f,c,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),o.props=s,o.state=c,o.context=d,s=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,F$(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Ki(t.type,l),o.props=d,m=t.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Di(c):(c=Es(n)?_d:rs.current,c=Oh(t,c));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||f!==c)&&OO(t,o,s,c),vl=!1,f=t.memoizedState,o.state=f,Xy(t,s,o,i);var x=t.memoizedState;l!==m||f!==x||As.current||vl?(typeof g=="function"&&(r_(t,n,g,s),x=t.memoizedState),(d=vl||EO(t,n,d,s,f,x,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,x,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=x),o.props=s,o.state=x,o.context=c,s=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),s=!1)}return a_(e,t,n,s,a,i)}function a_(e,t,n,s,i,a){uF(e,t);var o=(t.flags&128)!==0;if(!s&&!o)return i&&NO(t,n,!1),Uo(e,t,a);s=t.stateNode,hJ.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&o?(t.child=Dh(t,e.child,null,a),t.child=Dh(t,null,l,a)):cs(e,t,l,a),t.memoizedState=s.state,i&&NO(t,n,!0),t.child}function hF(e){var t=e.stateNode;t.pendingContext?wO(e,t.pendingContext,t.pendingContext!==t.context):t.context&&wO(e,t.context,!1),ZC(e,t.containerInfo)}function FO(e,t,n,s,i){return Mh(),UC(i),t.flags|=256,cs(e,t,n,s),t.child}var o_={dehydrated:null,treeContext:null,retryLane:0};function l_(e){return{baseLanes:e,cachePool:null,transitions:null}}function mF(e,t,n){var s=t.pendingProps,i=Ur.current,a=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),br(Ur,i&1),e===null)return e_(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=s.children,e=s.fallback,a?(s=t.mode,a=t.child,o={mode:"hidden",children:o},!(s&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=hb(o,s,0,null),e=xd(e,s,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=l_(n),t.memoizedState=o_,e):nk(t,o));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return mJ(e,t,o,s,l,i,n);if(a){a=s.fallback,o=t.mode,i=e.child,l=i.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&t.child!==i?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=Kl(i,c),s.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=Kl(l,a):(a=xd(a,o,n,null),a.flags|=2),a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,o=e.child.memoizedState,o=o===null?l_(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~n,t.memoizedState=o_,s}return a=e.child,e=a.sibling,s=Kl(a,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function nk(e,t){return t=hb({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function kv(e,t,n,s){return s!==null&&UC(s),Dh(t,e.child,null,n),e=nk(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function mJ(e,t,n,s,i,a,o){if(n)return t.flags&256?(t.flags&=-257,s=qN(Error(Be(422))),kv(e,t,o,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=s.fallback,i=t.mode,s=hb({mode:"visible",children:s.children},i,0,null),a=xd(a,i,o,null),a.flags|=2,s.return=t,a.return=t,s.sibling=a,t.child=s,t.mode&1&&Dh(t,e.child,null,o),t.child.memoizedState=l_(o),t.memoizedState=o_,a);if(!(t.mode&1))return kv(e,t,o,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var l=s.dgst;return s=l,a=Error(Be(419)),s=qN(a,s,void 0),kv(e,t,o,s)}if(l=(o&e.childLanes)!==0,Cs||l){if(s=En,s!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Vo(e,i),oa(s,e,i,-1))}return ck(),s=qN(Error(Be(421))),kv(e,t,o,s)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=PJ.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,Gs=Ul(i.nextSibling),Zs=t,Lr=!0,Ji=null,e!==null&&(vi[yi++]=No,vi[yi++]=So,vi[yi++]=Pd,No=e.id,So=e.overflow,Pd=t),t=nk(t,s.children),t.flags|=4096,t)}function zO(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),t_(e.return,t,n)}function KN(e,t,n,s,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=n,a.tailMode=i)}function fF(e,t,n){var s=t.pendingProps,i=s.revealOrder,a=s.tail;if(cs(e,t,s.children,n),s=Ur.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zO(e,n,t);else if(e.tag===19)zO(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(br(Ur,s),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Qy(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),KN(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Qy(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}KN(t,!0,n,null,a);break;case"together":KN(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function vy(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Uo(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),kd|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Be(153));if(t.child!==null){for(e=t.child,n=Kl(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Kl(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function fJ(e,t,n){switch(t.tag){case 3:hF(t),Mh();break;case 5:z$(t);break;case 1:Es(t.type)&&qy(t);break;case 4:ZC(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,i=t.memoizedProps.value;br(Zy,s._currentValue),s._currentValue=i;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(br(Ur,Ur.current&1),t.flags|=128,null):n&t.child.childLanes?mF(e,t,n):(br(Ur,Ur.current&1),e=Uo(e,t,n),e!==null?e.sibling:null);br(Ur,Ur.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return fF(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),br(Ur,Ur.current),s)break;return null;case 22:case 23:return t.lanes=0,dF(e,t,n)}return Uo(e,t,n)}var pF,c_,xF,gF;pF=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};c_=function(){};xF=function(e,t,n,s){var i=e.memoizedProps;if(i!==s){e=t.stateNode,Qc(Ia.current);var a=null;switch(n){case"input":i=ES(e,i),s=ES(e,s),a=[];break;case"select":i=Gr({},i,{value:void 0}),s=Gr({},s,{value:void 0}),a=[];break;case"textarea":i=DS(e,i),s=DS(e,s),a=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Wy)}LS(n,s);var o;n=null;for(d in i)if(!s.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Np.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in s){var c=s[d];if(l=i!=null?i[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Np.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&_r("scroll",e),a||l===c||(a=[])):(a=a||[]).push(d,c))}n&&(a=a||[]).push("style",n);var d=a;(t.updateQueue=d)&&(t.flags|=4)}};gF=function(e,t,n,s){n!==s&&(t.flags|=4)};function jf(e,t){if(!Lr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function qn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function pJ(e,t,n){var s=t.pendingProps;switch(VC(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qn(t),null;case 1:return Es(t.type)&&Hy(),qn(t),null;case 3:return s=t.stateNode,Ih(),Mr(As),Mr(rs),XC(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Pv(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ji!==null&&(g_(Ji),Ji=null))),c_(e,t),qn(t),null;case 5:YC(t);var i=Qc(Ip.current);if(n=t.type,e!==null&&t.stateNode!=null)xF(e,t,n,s,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(Be(166));return qn(t),null}if(e=Qc(Ia.current),Pv(t)){s=t.stateNode,n=t.type;var a=t.memoizedProps;switch(s[Ca]=t,s[Mp]=a,e=(t.mode&1)!==0,n){case"dialog":_r("cancel",s),_r("close",s);break;case"iframe":case"object":case"embed":_r("load",s);break;case"video":case"audio":for(i=0;i<Wf.length;i++)_r(Wf[i],s);break;case"source":_r("error",s);break;case"img":case"image":case"link":_r("error",s),_r("load",s);break;case"details":_r("toggle",s);break;case"input":Z4(s,a),_r("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},_r("invalid",s);break;case"textarea":X4(s,a),_r("invalid",s)}LS(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?s.textContent!==l&&(a.suppressHydrationWarning!==!0&&_v(s.textContent,l,e),i=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&_v(s.textContent,l,e),i=["children",""+l]):Np.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&_r("scroll",s)}switch(n){case"input":gv(s),Y4(s,a,!0);break;case"textarea":gv(s),Q4(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=Wy)}s=i,t.updateQueue=s,s!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=H6(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=o.createElement(n,{is:s.is}):(e=o.createElement(n),n==="select"&&(o=e,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):e=o.createElementNS(e,n),e[Ca]=t,e[Mp]=s,pF(e,t,!1,!1),t.stateNode=e;e:{switch(o=RS(n,s),n){case"dialog":_r("cancel",e),_r("close",e),i=s;break;case"iframe":case"object":case"embed":_r("load",e),i=s;break;case"video":case"audio":for(i=0;i<Wf.length;i++)_r(Wf[i],e);i=s;break;case"source":_r("error",e),i=s;break;case"img":case"image":case"link":_r("error",e),_r("load",e),i=s;break;case"details":_r("toggle",e),i=s;break;case"input":Z4(e,s),i=ES(e,s),_r("invalid",e);break;case"option":i=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},i=Gr({},s,{value:void 0}),_r("invalid",e);break;case"textarea":X4(e,s),i=DS(e,s),_r("invalid",e);break;default:i=s}LS(n,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?G6(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&q6(e,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Sp(e,c):typeof c=="number"&&Sp(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Np.hasOwnProperty(a)?c!=null&&a==="onScroll"&&_r("scroll",e):c!=null&&CC(e,a,c,o))}switch(n){case"input":gv(e),Y4(e,s,!1);break;case"textarea":gv(e),Q4(e);break;case"option":s.value!=null&&e.setAttribute("value",""+sc(s.value));break;case"select":e.multiple=!!s.multiple,a=s.value,a!=null?eh(e,!!s.multiple,a,!1):s.defaultValue!=null&&eh(e,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Wy)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return qn(t),null;case 6:if(e&&t.stateNode!=null)gF(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(Be(166));if(n=Qc(Ip.current),Qc(Ia.current),Pv(t)){if(s=t.stateNode,n=t.memoizedProps,s[Ca]=t,(a=s.nodeValue!==n)&&(e=Zs,e!==null))switch(e.tag){case 3:_v(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&_v(s.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Ca]=t,t.stateNode=s}return qn(t),null;case 13:if(Mr(Ur),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Lr&&Gs!==null&&t.mode&1&&!(t.flags&128))I$(),Mh(),t.flags|=98560,a=!1;else if(a=Pv(t),s!==null&&s.dehydrated!==null){if(e===null){if(!a)throw Error(Be(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Be(317));a[Ca]=t}else Mh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;qn(t),a=!1}else Ji!==null&&(g_(Ji),Ji=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Ur.current&1?Sn===0&&(Sn=3):ck())),t.updateQueue!==null&&(t.flags|=4),qn(t),null);case 4:return Ih(),c_(e,t),e===null&&Ep(t.stateNode.containerInfo),qn(t),null;case 10:return qC(t.type._context),qn(t),null;case 17:return Es(t.type)&&Hy(),qn(t),null;case 19:if(Mr(Ur),a=t.memoizedState,a===null)return qn(t),null;if(s=(t.flags&128)!==0,o=a.rendering,o===null)if(s)jf(a,!1);else{if(Sn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Qy(e),o!==null){for(t.flags|=128,jf(a,!1),s=o.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)a=n,e=s,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return br(Ur,Ur.current&1|2),t.child}e=e.sibling}a.tail!==null&&nn()>Rh&&(t.flags|=128,s=!0,jf(a,!1),t.lanes=4194304)}else{if(!s)if(e=Qy(o),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),jf(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Lr)return qn(t),null}else 2*nn()-a.renderingStartTime>Rh&&n!==1073741824&&(t.flags|=128,s=!0,jf(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(n=a.last,n!==null?n.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=nn(),t.sibling=null,n=Ur.current,br(Ur,s?n&1|2:n&1),t):(qn(t),null);case 22:case 23:return lk(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Fs&1073741824&&(qn(t),t.subtreeFlags&6&&(t.flags|=8192)):qn(t),null;case 24:return null;case 25:return null}throw Error(Be(156,t.tag))}function xJ(e,t){switch(VC(t),t.tag){case 1:return Es(t.type)&&Hy(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ih(),Mr(As),Mr(rs),XC(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return YC(t),null;case 13:if(Mr(Ur),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Be(340));Mh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Mr(Ur),null;case 4:return Ih(),null;case 10:return qC(t.type._context),null;case 22:case 23:return lk(),null;case 24:return null;default:return null}}var Tv=!1,Yn=!1,gJ=typeof WeakSet=="function"?WeakSet:Set,st=null;function Vu(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Xr(e,t,s)}else n.current=null}function d_(e,t,n){try{n()}catch(s){Xr(e,t,s)}}var BO=!1;function vJ(e,t){if(KS=By,e=w$(),zC(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var i=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,h=0,m=e,f=null;t:for(;;){for(var g;m!==n||i!==0&&m.nodeType!==3||(l=o+i),m!==a||s!==0&&m.nodeType!==3||(c=o+s),m.nodeType===3&&(o+=m.nodeValue.length),(g=m.firstChild)!==null;)f=m,m=g;for(;;){if(m===e)break t;if(f===n&&++d===i&&(l=o),f===a&&++h===s&&(c=o),(g=m.nextSibling)!==null)break;m=f,f=m.parentNode}m=g}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(GS={focusedElem:e,selectionRange:n},By=!1,st=t;st!==null;)if(t=st,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,st=e;else for(;st!==null;){t=st;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var p=x.memoizedProps,y=x.memoizedState,b=t.stateNode,w=b.getSnapshotBeforeUpdate(t.elementType===t.type?p:Ki(t.type,p),y);b.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Be(163))}}catch(S){Xr(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,st=e;break}st=t.return}return x=BO,BO=!1,x}function op(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&d_(t,n,a)}i=i.next}while(i!==s)}}function db(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function u_(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function vF(e){var t=e.alternate;t!==null&&(e.alternate=null,vF(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ca],delete t[Mp],delete t[XS],delete t[eJ],delete t[tJ])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function yF(e){return e.tag===5||e.tag===3||e.tag===4}function VO(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||yF(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function h_(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Wy));else if(s!==4&&(e=e.child,e!==null))for(h_(e,t,n),e=e.sibling;e!==null;)h_(e,t,n),e=e.sibling}function m_(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(m_(e,t,n),e=e.sibling;e!==null;)m_(e,t,n),e=e.sibling}var Rn=null,Zi=!1;function cl(e,t,n){for(n=n.child;n!==null;)jF(e,t,n),n=n.sibling}function jF(e,t,n){if(Da&&typeof Da.onCommitFiberUnmount=="function")try{Da.onCommitFiberUnmount(rb,n)}catch{}switch(n.tag){case 5:Yn||Vu(n,t);case 6:var s=Rn,i=Zi;Rn=null,cl(e,t,n),Rn=s,Zi=i,Rn!==null&&(Zi?(e=Rn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Rn.removeChild(n.stateNode));break;case 18:Rn!==null&&(Zi?(e=Rn,n=n.stateNode,e.nodeType===8?zN(e.parentNode,n):e.nodeType===1&&zN(e,n),kp(e)):zN(Rn,n.stateNode));break;case 4:s=Rn,i=Zi,Rn=n.stateNode.containerInfo,Zi=!0,cl(e,t,n),Rn=s,Zi=i;break;case 0:case 11:case 14:case 15:if(!Yn&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&d_(n,t,o),i=i.next}while(i!==s)}cl(e,t,n);break;case 1:if(!Yn&&(Vu(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(l){Xr(n,t,l)}cl(e,t,n);break;case 21:cl(e,t,n);break;case 22:n.mode&1?(Yn=(s=Yn)||n.memoizedState!==null,cl(e,t,n),Yn=s):cl(e,t,n);break;default:cl(e,t,n)}}function UO(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new gJ),t.forEach(function(s){var i=CJ.bind(null,e,s);n.has(s)||(n.add(s),s.then(i,i))})}}function Ui(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var i=n[s];try{var a=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Rn=l.stateNode,Zi=!1;break e;case 3:Rn=l.stateNode.containerInfo,Zi=!0;break e;case 4:Rn=l.stateNode.containerInfo,Zi=!0;break e}l=l.return}if(Rn===null)throw Error(Be(160));jF(a,o,i),Rn=null,Zi=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){Xr(i,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)bF(t,e),t=t.sibling}function bF(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ui(t,e),ba(e),s&4){try{op(3,e,e.return),db(3,e)}catch(p){Xr(e,e.return,p)}try{op(5,e,e.return)}catch(p){Xr(e,e.return,p)}}break;case 1:Ui(t,e),ba(e),s&512&&n!==null&&Vu(n,n.return);break;case 5:if(Ui(t,e),ba(e),s&512&&n!==null&&Vu(n,n.return),e.flags&32){var i=e.stateNode;try{Sp(i,"")}catch(p){Xr(e,e.return,p)}}if(s&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,o=n!==null?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&U6(i,a),RS(l,o);var d=RS(l,a);for(o=0;o<c.length;o+=2){var h=c[o],m=c[o+1];h==="style"?G6(i,m):h==="dangerouslySetInnerHTML"?q6(i,m):h==="children"?Sp(i,m):CC(i,h,m,d)}switch(l){case"input":OS(i,a);break;case"textarea":W6(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var g=a.value;g!=null?eh(i,!!a.multiple,g,!1):f!==!!a.multiple&&(a.defaultValue!=null?eh(i,!!a.multiple,a.defaultValue,!0):eh(i,!!a.multiple,a.multiple?[]:"",!1))}i[Mp]=a}catch(p){Xr(e,e.return,p)}}break;case 6:if(Ui(t,e),ba(e),s&4){if(e.stateNode===null)throw Error(Be(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(p){Xr(e,e.return,p)}}break;case 3:if(Ui(t,e),ba(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{kp(t.containerInfo)}catch(p){Xr(e,e.return,p)}break;case 4:Ui(t,e),ba(e);break;case 13:Ui(t,e),ba(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(ak=nn())),s&4&&UO(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(Yn=(d=Yn)||h,Ui(t,e),Yn=d):Ui(t,e),ba(e),s&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!h&&e.mode&1)for(st=e,h=e.child;h!==null;){for(m=st=h;st!==null;){switch(f=st,g=f.child,f.tag){case 0:case 11:case 14:case 15:op(4,f,f.return);break;case 1:Vu(f,f.return);var x=f.stateNode;if(typeof x.componentWillUnmount=="function"){s=f,n=f.return;try{t=s,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(p){Xr(s,n,p)}}break;case 5:Vu(f,f.return);break;case 22:if(f.memoizedState!==null){HO(m);continue}}g!==null?(g.return=f,st=g):HO(m)}h=h.sibling}e:for(h=null,m=e;;){if(m.tag===5){if(h===null){h=m;try{i=m.stateNode,d?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=K6("display",o))}catch(p){Xr(e,e.return,p)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(p){Xr(e,e.return,p)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Ui(t,e),ba(e),s&4&&UO(e);break;case 21:break;default:Ui(t,e),ba(e)}}function ba(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(yF(n)){var s=n;break e}n=n.return}throw Error(Be(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(Sp(i,""),s.flags&=-33);var a=VO(e);m_(e,a,i);break;case 3:case 4:var o=s.stateNode.containerInfo,l=VO(e);h_(e,l,o);break;default:throw Error(Be(161))}}catch(c){Xr(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function yJ(e,t,n){st=e,wF(e)}function wF(e,t,n){for(var s=(e.mode&1)!==0;st!==null;){var i=st,a=i.child;if(i.tag===22&&s){var o=i.memoizedState!==null||Tv;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||Yn;l=Tv;var d=Yn;if(Tv=o,(Yn=c)&&!d)for(st=i;st!==null;)o=st,c=o.child,o.tag===22&&o.memoizedState!==null?qO(i):c!==null?(c.return=o,st=c):qO(i);for(;a!==null;)st=a,wF(a),a=a.sibling;st=i,Tv=l,Yn=d}WO(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,st=a):WO(e)}}function WO(e){for(;st!==null;){var t=st;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Yn||db(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Yn)if(n===null)s.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Ki(t.type,n.memoizedProps);s.componentDidUpdate(i,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&kO(t,a,s);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}kO(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&kp(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Be(163))}Yn||t.flags&512&&u_(t)}catch(f){Xr(t,t.return,f)}}if(t===e){st=null;break}if(n=t.sibling,n!==null){n.return=t.return,st=n;break}st=t.return}}function HO(e){for(;st!==null;){var t=st;if(t===e){st=null;break}var n=t.sibling;if(n!==null){n.return=t.return,st=n;break}st=t.return}}function qO(e){for(;st!==null;){var t=st;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{db(4,t)}catch(c){Xr(t,n,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var i=t.return;try{s.componentDidMount()}catch(c){Xr(t,i,c)}}var a=t.return;try{u_(t)}catch(c){Xr(t,a,c)}break;case 5:var o=t.return;try{u_(t)}catch(c){Xr(t,o,c)}}}catch(c){Xr(t,t.return,c)}if(t===e){st=null;break}var l=t.sibling;if(l!==null){l.return=t.return,st=l;break}st=t.return}}var jJ=Math.ceil,t0=tl.ReactCurrentDispatcher,sk=tl.ReactCurrentOwner,ki=tl.ReactCurrentBatchConfig,er=0,En=null,hn=null,Un=0,Fs=0,Uu=jc(0),Sn=0,Fp=null,kd=0,ub=0,ik=0,lp=null,_s=null,ak=0,Rh=1/0,po=null,r0=!1,f_=null,Hl=null,Av=!1,Dl=null,n0=0,cp=0,p_=null,yy=-1,jy=0;function ms(){return er&6?nn():yy!==-1?yy:yy=nn()}function ql(e){return e.mode&1?er&2&&Un!==0?Un&-Un:nJ.transition!==null?(jy===0&&(jy=a$()),jy):(e=ur,e!==0||(e=window.event,e=e===void 0?16:m$(e.type)),e):1}function oa(e,t,n,s){if(50<cp)throw cp=0,p_=null,Error(Be(185));lg(e,n,s),(!(er&2)||e!==En)&&(e===En&&(!(er&2)&&(ub|=n),Sn===4&&bl(e,Un)),Os(e,s),n===1&&er===0&&!(t.mode&1)&&(Rh=nn()+500,ob&&bc()))}function Os(e,t){var n=e.callbackNode;nQ(e,t);var s=zy(e,e===En?Un:0);if(s===0)n!==null&&tO(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&tO(n),t===1)e.tag===0?rJ(KO.bind(null,e)):O$(KO.bind(null,e)),QQ(function(){!(er&6)&&bc()}),n=null;else{switch(o$(s)){case 1:n=OC;break;case 4:n=s$;break;case 16:n=Fy;break;case 536870912:n=i$;break;default:n=Fy}n=AF(n,NF.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function NF(e,t){if(yy=-1,jy=0,er&6)throw Error(Be(327));var n=e.callbackNode;if(ih()&&e.callbackNode!==n)return null;var s=zy(e,e===En?Un:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=s0(e,s);else{t=s;var i=er;er|=2;var a=_F();(En!==e||Un!==t)&&(po=null,Rh=nn()+500,pd(e,t));do try{NJ();break}catch(l){SF(e,l)}while(!0);HC(),t0.current=a,er=i,hn!==null?t=0:(En=null,Un=0,t=Sn)}if(t!==0){if(t===2&&(i=VS(e),i!==0&&(s=i,t=x_(e,i))),t===1)throw n=Fp,pd(e,0),bl(e,s),Os(e,nn()),n;if(t===6)bl(e,s);else{if(i=e.current.alternate,!(s&30)&&!bJ(i)&&(t=s0(e,s),t===2&&(a=VS(e),a!==0&&(s=a,t=x_(e,a))),t===1))throw n=Fp,pd(e,0),bl(e,s),Os(e,nn()),n;switch(e.finishedWork=i,e.finishedLanes=s,t){case 0:case 1:throw Error(Be(345));case 2:Vc(e,_s,po);break;case 3:if(bl(e,s),(s&130023424)===s&&(t=ak+500-nn(),10<t)){if(zy(e,0)!==0)break;if(i=e.suspendedLanes,(i&s)!==s){ms(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=YS(Vc.bind(null,e,_s,po),t);break}Vc(e,_s,po);break;case 4:if(bl(e,s),(s&4194240)===s)break;for(t=e.eventTimes,i=-1;0<s;){var o=31-aa(s);a=1<<o,o=t[o],o>i&&(i=o),s&=~a}if(s=i,s=nn()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*jJ(s/1960))-s,10<s){e.timeoutHandle=YS(Vc.bind(null,e,_s,po),s);break}Vc(e,_s,po);break;case 5:Vc(e,_s,po);break;default:throw Error(Be(329))}}}return Os(e,nn()),e.callbackNode===n?NF.bind(null,e):null}function x_(e,t){var n=lp;return e.current.memoizedState.isDehydrated&&(pd(e,t).flags|=256),e=s0(e,t),e!==2&&(t=_s,_s=n,t!==null&&g_(t)),e}function g_(e){_s===null?_s=e:_s.push.apply(_s,e)}function bJ(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var i=n[s],a=i.getSnapshot;i=i.value;try{if(!ua(a(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function bl(e,t){for(t&=~ik,t&=~ub,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-aa(t),s=1<<n;e[n]=-1,t&=~s}}function KO(e){if(er&6)throw Error(Be(327));ih();var t=zy(e,0);if(!(t&1))return Os(e,nn()),null;var n=s0(e,t);if(e.tag!==0&&n===2){var s=VS(e);s!==0&&(t=s,n=x_(e,s))}if(n===1)throw n=Fp,pd(e,0),bl(e,t),Os(e,nn()),n;if(n===6)throw Error(Be(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Vc(e,_s,po),Os(e,nn()),null}function ok(e,t){var n=er;er|=1;try{return e(t)}finally{er=n,er===0&&(Rh=nn()+500,ob&&bc())}}function Td(e){Dl!==null&&Dl.tag===0&&!(er&6)&&ih();var t=er;er|=1;var n=ki.transition,s=ur;try{if(ki.transition=null,ur=1,e)return e()}finally{ur=s,ki.transition=n,er=t,!(er&6)&&bc()}}function lk(){Fs=Uu.current,Mr(Uu)}function pd(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,XQ(n)),hn!==null)for(n=hn.return;n!==null;){var s=n;switch(VC(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Hy();break;case 3:Ih(),Mr(As),Mr(rs),XC();break;case 5:YC(s);break;case 4:Ih();break;case 13:Mr(Ur);break;case 19:Mr(Ur);break;case 10:qC(s.type._context);break;case 22:case 23:lk()}n=n.return}if(En=e,hn=e=Kl(e.current,null),Un=Fs=t,Sn=0,Fp=null,ik=ub=kd=0,_s=lp=null,Xc!==null){for(t=0;t<Xc.length;t++)if(n=Xc[t],s=n.interleaved,s!==null){n.interleaved=null;var i=s.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,s.next=o}n.pending=s}Xc=null}return e}function SF(e,t){do{var n=hn;try{if(HC(),xy.current=e0,Jy){for(var s=Kr.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}Jy=!1}if(Cd=0,An=bn=Kr=null,ap=!1,Lp=0,sk.current=null,n===null||n.return===null){Sn=1,Fp=t,hn=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Un,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=DO(o);if(g!==null){g.flags&=-257,IO(g,o,l,a,t),g.mode&1&&MO(a,d,t),t=g,c=d;var x=t.updateQueue;if(x===null){var p=new Set;p.add(c),t.updateQueue=p}else x.add(c);break e}else{if(!(t&1)){MO(a,d,t),ck();break e}c=Error(Be(426))}}else if(Lr&&l.mode&1){var y=DO(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),IO(y,o,l,a,t),UC(Lh(c,l));break e}}a=c=Lh(c,l),Sn!==4&&(Sn=2),lp===null?lp=[a]:lp.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var b=oF(a,c,t);CO(a,b);break e;case 1:l=c;var w=a.type,N=a.stateNode;if(!(a.flags&128)&&(typeof w.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Hl===null||!Hl.has(N)))){a.flags|=65536,t&=-t,a.lanes|=t;var S=lF(a,l,t);CO(a,S);break e}}a=a.return}while(a!==null)}CF(n)}catch(P){t=P,hn===n&&n!==null&&(hn=n=n.return);continue}break}while(!0)}function _F(){var e=t0.current;return t0.current=e0,e===null?e0:e}function ck(){(Sn===0||Sn===3||Sn===2)&&(Sn=4),En===null||!(kd&268435455)&&!(ub&268435455)||bl(En,Un)}function s0(e,t){var n=er;er|=2;var s=_F();(En!==e||Un!==t)&&(po=null,pd(e,t));do try{wJ();break}catch(i){SF(e,i)}while(!0);if(HC(),er=n,t0.current=s,hn!==null)throw Error(Be(261));return En=null,Un=0,Sn}function wJ(){for(;hn!==null;)PF(hn)}function NJ(){for(;hn!==null&&!GX();)PF(hn)}function PF(e){var t=TF(e.alternate,e,Fs);e.memoizedProps=e.pendingProps,t===null?CF(e):hn=t,sk.current=null}function CF(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=xJ(n,t),n!==null){n.flags&=32767,hn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Sn=6,hn=null;return}}else if(n=pJ(n,t,Fs),n!==null){hn=n;return}if(t=t.sibling,t!==null){hn=t;return}hn=t=e}while(t!==null);Sn===0&&(Sn=5)}function Vc(e,t,n){var s=ur,i=ki.transition;try{ki.transition=null,ur=1,SJ(e,t,n,s)}finally{ki.transition=i,ur=s}return null}function SJ(e,t,n,s){do ih();while(Dl!==null);if(er&6)throw Error(Be(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Be(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(sQ(e,a),e===En&&(hn=En=null,Un=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Av||(Av=!0,AF(Fy,function(){return ih(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=ki.transition,ki.transition=null;var o=ur;ur=1;var l=er;er|=4,sk.current=null,vJ(e,n),bF(n,e),WQ(GS),By=!!KS,GS=KS=null,e.current=n,yJ(n),ZX(),er=l,ur=o,ki.transition=a}else e.current=n;if(Av&&(Av=!1,Dl=e,n0=i),a=e.pendingLanes,a===0&&(Hl=null),QX(n.stateNode),Os(e,nn()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],s(i.value,{componentStack:i.stack,digest:i.digest});if(r0)throw r0=!1,e=f_,f_=null,e;return n0&1&&e.tag!==0&&ih(),a=e.pendingLanes,a&1?e===p_?cp++:(cp=0,p_=e):cp=0,bc(),null}function ih(){if(Dl!==null){var e=o$(n0),t=ki.transition,n=ur;try{if(ki.transition=null,ur=16>e?16:e,Dl===null)var s=!1;else{if(e=Dl,Dl=null,n0=0,er&6)throw Error(Be(331));var i=er;for(er|=4,st=e.current;st!==null;){var a=st,o=a.child;if(st.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(st=d;st!==null;){var h=st;switch(h.tag){case 0:case 11:case 15:op(8,h,a)}var m=h.child;if(m!==null)m.return=h,st=m;else for(;st!==null;){h=st;var f=h.sibling,g=h.return;if(vF(h),h===d){st=null;break}if(f!==null){f.return=g,st=f;break}st=g}}}var x=a.alternate;if(x!==null){var p=x.child;if(p!==null){x.child=null;do{var y=p.sibling;p.sibling=null,p=y}while(p!==null)}}st=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,st=o;else e:for(;st!==null;){if(a=st,a.flags&2048)switch(a.tag){case 0:case 11:case 15:op(9,a,a.return)}var b=a.sibling;if(b!==null){b.return=a.return,st=b;break e}st=a.return}}var w=e.current;for(st=w;st!==null;){o=st;var N=o.child;if(o.subtreeFlags&2064&&N!==null)N.return=o,st=N;else e:for(o=w;st!==null;){if(l=st,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:db(9,l)}}catch(P){Xr(l,l.return,P)}if(l===o){st=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,st=S;break e}st=l.return}}if(er=i,bc(),Da&&typeof Da.onPostCommitFiberRoot=="function")try{Da.onPostCommitFiberRoot(rb,e)}catch{}s=!0}return s}finally{ur=n,ki.transition=t}}return!1}function GO(e,t,n){t=Lh(n,t),t=oF(e,t,1),e=Wl(e,t,1),t=ms(),e!==null&&(lg(e,1,t),Os(e,t))}function Xr(e,t,n){if(e.tag===3)GO(e,e,n);else for(;t!==null;){if(t.tag===3){GO(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Hl===null||!Hl.has(s))){e=Lh(n,e),e=lF(t,e,1),t=Wl(t,e,1),e=ms(),t!==null&&(lg(t,1,e),Os(t,e));break}}t=t.return}}function _J(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=ms(),e.pingedLanes|=e.suspendedLanes&n,En===e&&(Un&n)===n&&(Sn===4||Sn===3&&(Un&130023424)===Un&&500>nn()-ak?pd(e,0):ik|=n),Os(e,t)}function kF(e,t){t===0&&(e.mode&1?(t=jv,jv<<=1,!(jv&130023424)&&(jv=4194304)):t=1);var n=ms();e=Vo(e,t),e!==null&&(lg(e,t,n),Os(e,n))}function PJ(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),kF(e,n)}function CJ(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(Be(314))}s!==null&&s.delete(t),kF(e,n)}var TF;TF=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||As.current)Cs=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Cs=!1,fJ(e,t,n);Cs=!!(e.flags&131072)}else Cs=!1,Lr&&t.flags&1048576&&M$(t,Gy,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;vy(e,t),e=t.pendingProps;var i=Oh(t,rs.current);sh(t,n),i=JC(null,t,s,e,i,n);var a=ek();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Es(s)?(a=!0,qy(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,GC(t),i.updater=cb,t.stateNode=i,i._reactInternals=t,n_(t,s,e,n),t=a_(null,t,s,!0,a,n)):(t.tag=0,Lr&&a&&BC(t),cs(null,t,i,n),t=t.child),t;case 16:s=t.elementType;e:{switch(vy(e,t),e=t.pendingProps,i=s._init,s=i(s._payload),t.type=s,i=t.tag=TJ(s),e=Ki(s,e),i){case 0:t=i_(null,t,s,e,n);break e;case 1:t=$O(null,t,s,e,n);break e;case 11:t=LO(null,t,s,e,n);break e;case 14:t=RO(null,t,s,Ki(s.type,e),n);break e}throw Error(Be(306,s,""))}return t;case 0:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Ki(s,i),i_(e,t,s,i,n);case 1:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Ki(s,i),$O(e,t,s,i,n);case 3:e:{if(hF(t),e===null)throw Error(Be(387));s=t.pendingProps,a=t.memoizedState,i=a.element,F$(e,t),Xy(t,s,null,n);var o=t.memoizedState;if(s=o.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=Lh(Error(Be(423)),t),t=FO(e,t,s,n,i);break e}else if(s!==i){i=Lh(Error(Be(424)),t),t=FO(e,t,s,n,i);break e}else for(Gs=Ul(t.stateNode.containerInfo.firstChild),Zs=t,Lr=!0,Ji=null,n=R$(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Mh(),s===i){t=Uo(e,t,n);break e}cs(e,t,s,n)}t=t.child}return t;case 5:return z$(t),e===null&&e_(t),s=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,o=i.children,ZS(s,i)?o=null:a!==null&&ZS(s,a)&&(t.flags|=32),uF(e,t),cs(e,t,o,n),t.child;case 6:return e===null&&e_(t),null;case 13:return mF(e,t,n);case 4:return ZC(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Dh(t,null,s,n):cs(e,t,s,n),t.child;case 11:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Ki(s,i),LO(e,t,s,i,n);case 7:return cs(e,t,t.pendingProps,n),t.child;case 8:return cs(e,t,t.pendingProps.children,n),t.child;case 12:return cs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,br(Zy,s._currentValue),s._currentValue=o,a!==null)if(ua(a.value,o)){if(a.children===i.children&&!As.current){t=Uo(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(a.tag===1){c=Ao(-1,n&-n),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),t_(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(Be(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),t_(o,n,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}cs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,s=t.pendingProps.children,sh(t,n),i=Di(i),s=s(i),t.flags|=1,cs(e,t,s,n),t.child;case 14:return s=t.type,i=Ki(s,t.pendingProps),i=Ki(s.type,i),RO(e,t,s,i,n);case 15:return cF(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Ki(s,i),vy(e,t),t.tag=1,Es(s)?(e=!0,qy(t)):e=!1,sh(t,n),aF(t,s,i),n_(t,s,i,n),a_(null,t,s,!0,e,n);case 19:return fF(e,t,n);case 22:return dF(e,t,n)}throw Error(Be(156,t.tag))};function AF(e,t){return n$(e,t)}function kJ(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _i(e,t,n,s){return new kJ(e,t,n,s)}function dk(e){return e=e.prototype,!(!e||!e.isReactComponent)}function TJ(e){if(typeof e=="function")return dk(e)?1:0;if(e!=null){if(e=e.$$typeof,e===TC)return 11;if(e===AC)return 14}return 2}function Kl(e,t){var n=e.alternate;return n===null?(n=_i(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function by(e,t,n,s,i,a){var o=2;if(s=e,typeof e=="function")dk(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Mu:return xd(n.children,i,a,t);case kC:o=8,i|=8;break;case CS:return e=_i(12,n,t,i|2),e.elementType=CS,e.lanes=a,e;case kS:return e=_i(13,n,t,i),e.elementType=kS,e.lanes=a,e;case TS:return e=_i(19,n,t,i),e.elementType=TS,e.lanes=a,e;case z6:return hb(n,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $6:o=10;break e;case F6:o=9;break e;case TC:o=11;break e;case AC:o=14;break e;case gl:o=16,s=null;break e}throw Error(Be(130,e==null?e:typeof e,""))}return t=_i(o,n,t,i),t.elementType=e,t.type=s,t.lanes=a,t}function xd(e,t,n,s){return e=_i(7,e,s,t),e.lanes=n,e}function hb(e,t,n,s){return e=_i(22,e,s,t),e.elementType=z6,e.lanes=n,e.stateNode={isHidden:!1},e}function GN(e,t,n){return e=_i(6,e,null,t),e.lanes=n,e}function ZN(e,t,n){return t=_i(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function AJ(e,t,n,s,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=TN(0),this.expirationTimes=TN(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=TN(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function uk(e,t,n,s,i,a,o,l,c){return e=new AJ(e,t,n,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=_i(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},GC(a),e}function EJ(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ou,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function EF(e){if(!e)return ic;e=e._reactInternals;e:{if(Jd(e)!==e||e.tag!==1)throw Error(Be(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Es(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Be(171))}if(e.tag===1){var n=e.type;if(Es(n))return E$(e,n,t)}return t}function OF(e,t,n,s,i,a,o,l,c){return e=uk(n,s,!0,e,i,a,o,l,c),e.context=EF(null),n=e.current,s=ms(),i=ql(n),a=Ao(s,i),a.callback=t??null,Wl(n,a,i),e.current.lanes=i,lg(e,i,s),Os(e,s),e}function mb(e,t,n,s){var i=t.current,a=ms(),o=ql(i);return n=EF(n),t.context===null?t.context=n:t.pendingContext=n,t=Ao(a,o),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Wl(i,t,o),e!==null&&(oa(e,i,o,a),py(e,i,o)),o}function i0(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ZO(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function hk(e,t){ZO(e,t),(e=e.alternate)&&ZO(e,t)}function OJ(){return null}var MF=typeof reportError=="function"?reportError:function(e){console.error(e)};function mk(e){this._internalRoot=e}fb.prototype.render=mk.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Be(409));mb(e,t,null,null)};fb.prototype.unmount=mk.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Td(function(){mb(null,e,null,null)}),t[Bo]=null}};function fb(e){this._internalRoot=e}fb.prototype.unstable_scheduleHydration=function(e){if(e){var t=d$();e={blockedOn:null,target:e,priority:t};for(var n=0;n<jl.length&&t!==0&&t<jl[n].priority;n++);jl.splice(n,0,e),n===0&&h$(e)}};function fk(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function pb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function YO(){}function MJ(e,t,n,s,i){if(i){if(typeof s=="function"){var a=s;s=function(){var d=i0(o);a.call(d)}}var o=OF(t,s,e,0,null,!1,!1,"",YO);return e._reactRootContainer=o,e[Bo]=o.current,Ep(e.nodeType===8?e.parentNode:e),Td(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof s=="function"){var l=s;s=function(){var d=i0(c);l.call(d)}}var c=uk(e,0,!1,null,null,!1,!1,"",YO);return e._reactRootContainer=c,e[Bo]=c.current,Ep(e.nodeType===8?e.parentNode:e),Td(function(){mb(t,c,n,s)}),c}function xb(e,t,n,s,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var c=i0(o);l.call(c)}}mb(t,o,e,i)}else o=MJ(n,t,e,i,s);return i0(o)}l$=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Uf(t.pendingLanes);n!==0&&(MC(t,n|1),Os(t,nn()),!(er&6)&&(Rh=nn()+500,bc()))}break;case 13:Td(function(){var s=Vo(e,1);if(s!==null){var i=ms();oa(s,e,1,i)}}),hk(e,1)}};DC=function(e){if(e.tag===13){var t=Vo(e,134217728);if(t!==null){var n=ms();oa(t,e,134217728,n)}hk(e,134217728)}};c$=function(e){if(e.tag===13){var t=ql(e),n=Vo(e,t);if(n!==null){var s=ms();oa(n,e,t,s)}hk(e,t)}};d$=function(){return ur};u$=function(e,t){var n=ur;try{return ur=e,t()}finally{ur=n}};FS=function(e,t,n){switch(t){case"input":if(OS(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var i=ab(s);if(!i)throw Error(Be(90));V6(s),OS(s,i)}}}break;case"textarea":W6(e,n);break;case"select":t=n.value,t!=null&&eh(e,!!n.multiple,t,!1)}};X6=ok;Q6=Td;var DJ={usingClientEntryPoint:!1,Events:[dg,Ru,ab,Z6,Y6,ok]},bf={findFiberByHostInstance:Yc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},IJ={bundleType:bf.bundleType,version:bf.version,rendererPackageName:bf.rendererPackageName,rendererConfig:bf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:tl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=t$(e),e===null?null:e.stateNode},findFiberByHostInstance:bf.findFiberByHostInstance||OJ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ev=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ev.isDisabled&&Ev.supportsFiber)try{rb=Ev.inject(IJ),Da=Ev}catch{}}ii.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DJ;ii.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fk(t))throw Error(Be(200));return EJ(e,t,null,n)};ii.createRoot=function(e,t){if(!fk(e))throw Error(Be(299));var n=!1,s="",i=MF;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=uk(e,1,!1,null,null,n,!1,s,i),e[Bo]=t.current,Ep(e.nodeType===8?e.parentNode:e),new mk(t)};ii.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Be(188)):(e=Object.keys(e).join(","),Error(Be(268,e)));return e=t$(t),e=e===null?null:e.stateNode,e};ii.flushSync=function(e){return Td(e)};ii.hydrate=function(e,t,n){if(!pb(t))throw Error(Be(200));return xb(null,e,t,!0,n)};ii.hydrateRoot=function(e,t,n){if(!fk(e))throw Error(Be(405));var s=n!=null&&n.hydratedSources||null,i=!1,a="",o=MF;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=OF(t,null,e,1,n??null,i,!1,a,o),e[Bo]=t.current,Ep(e),s)for(e=0;e<s.length;e++)n=s[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new fb(t)};ii.render=function(e,t,n){if(!pb(t))throw Error(Be(200));return xb(null,e,t,!1,n)};ii.unmountComponentAtNode=function(e){if(!pb(e))throw Error(Be(40));return e._reactRootContainer?(Td(function(){xb(null,null,e,!1,function(){e._reactRootContainer=null,e[Bo]=null})}),!0):!1};ii.unstable_batchedUpdates=ok;ii.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!pb(n))throw Error(Be(200));if(e==null||e._reactInternals===void 0)throw Error(Be(38));return xb(e,t,n,!1,s)};ii.version="18.3.1-next-f1338f8080-20240426";function DF(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(DF)}catch(e){console.error(e)}}DF(),D6.exports=ii;var wc=D6.exports;const LJ=hr(wc);var IF,XO=wc;IF=XO.createRoot,XO.hydrateRoot;const RJ="modulepreload",$J=function(e){return"/"+e},QO={},zp=function(t,n,s){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=$J(c),c in QO)return;QO[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":RJ,d||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((f,g)=>{m.addEventListener("load",f),m.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})};function FJ(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,s,i,a,o=[],l="",c=e.split("/");for(c[0]||c.shift();i=c.shift();)n=i[0],n==="*"?(o.push(n),l+=i[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(s=i.indexOf("?",1),a=i.indexOf(".",1),o.push(i.substring(1,~s?s:~a?a:i.length)),l+=~s&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(l+=(~s?"?":"")+"\\"+i.substring(a))):l+="/"+i;return{keys:o,pattern:new RegExp("^"+l+(t?"(?=$|/)":"/?$"),"i")}}var LF={exports:{}},RF={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $h=j;function zJ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var BJ=typeof Object.is=="function"?Object.is:zJ,VJ=$h.useState,UJ=$h.useEffect,WJ=$h.useLayoutEffect,HJ=$h.useDebugValue;function qJ(e,t){var n=t(),s=VJ({inst:{value:n,getSnapshot:t}}),i=s[0].inst,a=s[1];return WJ(function(){i.value=n,i.getSnapshot=t,YN(i)&&a({inst:i})},[e,n,t]),UJ(function(){return YN(i)&&a({inst:i}),e(function(){YN(i)&&a({inst:i})})},[e]),HJ(n),n}function YN(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!BJ(e,n)}catch{return!0}}function KJ(e,t){return t()}var GJ=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?KJ:qJ;RF.useSyncExternalStore=$h.useSyncExternalStore!==void 0?$h.useSyncExternalStore:GJ;LF.exports=RF;var ZJ=LF.exports;const YJ=O6.useInsertionEffect,XJ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",QJ=XJ?j.useLayoutEffect:j.useEffect,JJ=YJ||QJ,$F=e=>{const t=j.useRef([e,(...n)=>t[0](...n)]).current;return JJ(()=>{t[0]=e}),t[1]},eee="popstate",pk="pushState",xk="replaceState",tee="hashchange",JO=[eee,pk,xk,tee],ree=e=>{for(const t of JO)addEventListener(t,e);return()=>{for(const t of JO)removeEventListener(t,e)}},FF=(e,t)=>ZJ.useSyncExternalStore(ree,e,t),nee=()=>location.search,see=({ssrSearch:e=""}={})=>FF(nee,()=>e),eM=()=>location.pathname,iee=({ssrPath:e}={})=>FF(eM,e?()=>e:eM),aee=(e,{replace:t=!1,state:n=null}={})=>history[t?xk:pk](n,"",e),oee=(e={})=>[iee(e),aee],tM=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[tM]>"u"){for(const e of[pk,xk]){const t=history[e];history[e]=function(){const n=t.apply(this,arguments),s=new Event(e);return s.arguments=arguments,dispatchEvent(s),n}}Object.defineProperty(window,tM,{value:!0})}const lee=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",zF=(e="")=>e==="/"?"":e,cee=(e,t)=>e[0]==="~"?e.slice(1):zF(t)+e,dee=(e="",t)=>lee(rM(zF(e)),rM(t)),rM=e=>{try{return decodeURI(e)}catch{return e}},BF={hook:oee,searchHook:see,parser:FJ,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:e=>e},VF=j.createContext(BF),hg=()=>j.useContext(VF),UF={},WF=j.createContext(UF),Cm=()=>j.useContext(WF),gb=e=>{const[t,n]=e.hook(e);return[dee(e.base,t),$F((s,i)=>n(cee(s,e.base),i))]},Jr=()=>gb(hg()),HF=(e,t,n,s)=>{const{pattern:i,keys:a}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",s),o=i.exec(n)||[],[l,...c]=o;return l!==void 0?[!0,(()=>{const d=a!==!1?Object.fromEntries(a.map((m,f)=>[m,c[f]])):o.groups;let h={...c};return d&&Object.assign(h,d),h})(),...s?[l]:[]]:[!1,null]},uee=({children:e,...t})=>{var h,m;const n=hg(),s=t.hook?BF:n;let i=s;const[a,o]=((h=t.ssrPath)==null?void 0:h.split("?"))??[];o&&(t.ssrSearch=o,t.ssrPath=a),t.hrefs=t.hrefs??((m=t.hook)==null?void 0:m.hrefs);let l=j.useRef({}),c=l.current,d=c;for(let f in s){const g=f==="base"?s[f]+(t[f]||""):t[f]||s[f];c===d&&g!==d[f]&&(l.current=d={...d}),d[f]=g,g!==s[f]&&(i=d)}return j.createElement(VF.Provider,{value:i,children:e})},nM=({children:e,component:t},n)=>t?j.createElement(t,{params:n}):typeof e=="function"?e(n):e,hee=e=>{let t=j.useRef(UF),n=t.current;for(const s in e)e[s]!==n[s]&&(n=e);return Object.keys(e).length===0&&(n=e),t.current=n},nt=({path:e,nest:t,match:n,...s})=>{const i=hg(),[a]=gb(i),[o,l,c]=n??HF(i.parser,e,a,t),d=hee({...Cm(),...l});if(!o)return null;const h=c?j.createElement(uee,{base:c},nM(s,d)):nM(s,d);return j.createElement(WF.Provider,{value:d,children:h})},Ae=j.forwardRef((e,t)=>{const n=hg(),[s,i]=gb(n),{to:a="",href:o=a,onClick:l,asChild:c,children:d,className:h,replace:m,state:f,...g}=e,x=$F(y=>{y.ctrlKey||y.metaKey||y.altKey||y.shiftKey||y.button!==0||(l==null||l(y),y.defaultPrevented||(y.preventDefault(),i(o,e)))}),p=n.hrefs(o[0]==="~"?o.slice(1):n.base+o,n);return c&&j.isValidElement(d)?j.cloneElement(d,{onClick:x,href:p}):j.createElement("a",{...g,onClick:x,href:p,className:h!=null&&h.call?h(s===o):h,children:d,ref:t})}),qF=e=>Array.isArray(e)?e.flatMap(t=>qF(t&&t.type===j.Fragment?t.props.children:t)):[e],mee=({children:e,location:t})=>{const n=hg(),[s]=gb(n);for(const i of qF(e)){let a=0;if(j.isValidElement(i)&&(a=HF(n.parser,i.props.path,t||s,i.props.nest))[0])return j.cloneElement(i,{match:a})}return null};var km=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ad=typeof window>"u"||"Deno"in globalThis;function gi(){}function fee(e,t){return typeof e=="function"?e(t):e}function v_(e){return typeof e=="number"&&e>=0&&e!==1/0}function KF(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ah(e,t){return typeof e=="function"?e(t):e}function ea(e,t){return typeof e=="function"?e(t):e}function sM(e,t){const{type:n="all",exact:s,fetchStatus:i,predicate:a,queryKey:o,stale:l}=e;if(o){if(s){if(t.queryHash!==gk(o,t.options))return!1}else if(!Bp(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||i&&i!==t.state.fetchStatus||a&&!a(t))}function iM(e,t){const{exact:n,status:s,predicate:i,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(Ed(t.options.mutationKey)!==Ed(a))return!1}else if(!Bp(t.options.mutationKey,a))return!1}return!(s&&t.state.status!==s||i&&!i(t))}function gk(e,t){return((t==null?void 0:t.queryKeyHashFn)||Ed)(e)}function Ed(e){return JSON.stringify(e,(t,n)=>y_(n)?Object.keys(n).sort().reduce((s,i)=>(s[i]=n[i],s),{}):n)}function Bp(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!Bp(e[n],t[n])):!1}function GF(e,t){if(e===t)return e;const n=aM(e)&&aM(t);if(n||y_(e)&&y_(t)){const s=n?e:Object.keys(e),i=s.length,a=n?t:Object.keys(t),o=a.length,l=n?[]:{};let c=0;for(let d=0;d<o;d++){const h=n?d:a[d];(!n&&s.includes(h)||n)&&e[h]===void 0&&t[h]===void 0?(l[h]=void 0,c++):(l[h]=GF(e[h],t[h]),l[h]===e[h]&&e[h]!==void 0&&c++)}return i===o&&c===i?e:l}return t}function a0(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function aM(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function y_(e){if(!oM(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!oM(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function oM(e){return Object.prototype.toString.call(e)==="[object Object]"}function pee(e){return new Promise(t=>{setTimeout(t,e)})}function j_(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?GF(e,t):t}function xee(e,t,n=0){const s=[...e,t];return n&&s.length>n?s.slice(1):s}function gee(e,t,n=0){const s=[t,...e];return n&&s.length>n?s.slice(0,-1):s}var vk=Symbol();function ZF(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===vk?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var ld,Sl,vh,h6,vee=(h6=class extends km{constructor(){super();xt(this,ld);xt(this,Sl);xt(this,vh);Je(this,vh,t=>{if(!Ad&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){xe(this,Sl)||this.setEventListener(xe(this,vh))}onUnsubscribe(){var t;this.hasListeners()||((t=xe(this,Sl))==null||t.call(this),Je(this,Sl,void 0))}setEventListener(t){var n;Je(this,vh,t),(n=xe(this,Sl))==null||n.call(this),Je(this,Sl,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){xe(this,ld)!==t&&(Je(this,ld,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof xe(this,ld)=="boolean"?xe(this,ld):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},ld=new WeakMap,Sl=new WeakMap,vh=new WeakMap,h6),yk=new vee,yh,_l,jh,m6,yee=(m6=class extends km{constructor(){super();xt(this,yh,!0);xt(this,_l);xt(this,jh);Je(this,jh,t=>{if(!Ad&&window.addEventListener){const n=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}}})}onSubscribe(){xe(this,_l)||this.setEventListener(xe(this,jh))}onUnsubscribe(){var t;this.hasListeners()||((t=xe(this,_l))==null||t.call(this),Je(this,_l,void 0))}setEventListener(t){var n;Je(this,jh,t),(n=xe(this,_l))==null||n.call(this),Je(this,_l,t(this.setOnline.bind(this)))}setOnline(t){xe(this,yh)!==t&&(Je(this,yh,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return xe(this,yh)}},yh=new WeakMap,_l=new WeakMap,jh=new WeakMap,m6),o0=new yee;function b_(){let e,t;const n=new Promise((i,a)=>{e=i,t=a});n.status="pending",n.catch(()=>{});function s(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{s({status:"fulfilled",value:i}),e(i)},n.reject=i=>{s({status:"rejected",reason:i}),t(i)},n}function jee(e){return Math.min(1e3*2**e,3e4)}function YF(e){return(e??"online")==="online"?o0.isOnline():!0}var XF=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function XN(e){return e instanceof XF}function QF(e){let t=!1,n=0,s=!1,i;const a=b_(),o=p=>{var y;s||(f(new XF(p)),(y=e.abort)==null||y.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>yk.isFocused()&&(e.networkMode==="always"||o0.isOnline())&&e.canRun(),h=()=>YF(e.networkMode)&&e.canRun(),m=p=>{var y;s||(s=!0,(y=e.onSuccess)==null||y.call(e,p),i==null||i(),a.resolve(p))},f=p=>{var y;s||(s=!0,(y=e.onError)==null||y.call(e,p),i==null||i(),a.reject(p))},g=()=>new Promise(p=>{var y;i=b=>{(s||d())&&p(b)},(y=e.onPause)==null||y.call(e)}).then(()=>{var p;i=void 0,s||(p=e.onContinue)==null||p.call(e)}),x=()=>{if(s)return;let p;const y=n===0?e.initialPromise:void 0;try{p=y??e.fn()}catch(b){p=Promise.reject(b)}Promise.resolve(p).then(m).catch(b=>{var C;if(s)return;const w=e.retry??(Ad?0:3),N=e.retryDelay??jee,S=typeof N=="function"?N(n,b):N,P=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,b);if(t||!P){f(b);return}n++,(C=e.onFail)==null||C.call(e,n,b),pee(S).then(()=>d()?void 0:g()).then(()=>{t?f(b):x()})})};return{promise:a,cancel:o,continue:()=>(i==null||i(),a),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?x():g().then(x),a)}}function bee(){let e=[],t=0,n=l=>{l()},s=l=>{l()},i=l=>setTimeout(l,0);const a=l=>{t?e.push(l):i(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&i(()=>{s(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{i=l}}}var Nn=bee(),cd,f6,JF=(f6=class{constructor(){xt(this,cd)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),v_(this.gcTime)&&Je(this,cd,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Ad?1/0:5*60*1e3))}clearGcTimeout(){xe(this,cd)&&(clearTimeout(xe(this,cd)),Je(this,cd,void 0))}},cd=new WeakMap,f6),bh,wh,xi,Kn,ng,dd,Gi,uo,p6,wee=(p6=class extends JF{constructor(t){super();xt(this,Gi);xt(this,bh);xt(this,wh);xt(this,xi);xt(this,Kn);xt(this,ng);xt(this,dd);Je(this,dd,!1),Je(this,ng,t.defaultOptions),this.setOptions(t.options),this.observers=[],Je(this,xi,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Je(this,bh,Nee(this.options)),this.state=t.state??xe(this,bh),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=xe(this,Kn))==null?void 0:t.promise}setOptions(t){this.options={...xe(this,ng),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&xe(this,xi).remove(this)}setData(t,n){const s=j_(this.state.data,t,this.options);return Rt(this,Gi,uo).call(this,{data:s,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),s}setState(t,n){Rt(this,Gi,uo).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var s,i;const n=(s=xe(this,Kn))==null?void 0:s.promise;return(i=xe(this,Kn))==null||i.cancel(t),n?n.then(gi).catch(gi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(xe(this,bh))}isActive(){return this.observers.some(t=>ea(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===vk||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!KF(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=xe(this,Kn))==null||n.continue()}onOnline(){var n;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=xe(this,Kn))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),xe(this,xi).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(xe(this,Kn)&&(xe(this,dd)?xe(this,Kn).cancel({revert:!0}):xe(this,Kn).cancelRetry()),this.scheduleGc()),xe(this,xi).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Rt(this,Gi,uo).call(this,{type:"invalidate"})}fetch(t,n){var c,d,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(xe(this,Kn))return xe(this,Kn).continueRetry(),xe(this,Kn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const m=this.observers.find(f=>f.options.queryFn);m&&this.setOptions(m.options)}const s=new AbortController,i=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(Je(this,dd,!0),s.signal)})},a=()=>{const m=ZF(this.options,n),f={queryKey:this.queryKey,meta:this.meta};return i(f),Je(this,dd,!1),this.options.persister?this.options.persister(m,f,this):m(f)},o={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};i(o),(c=this.options.behavior)==null||c.onFetch(o,this),Je(this,wh,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&Rt(this,Gi,uo).call(this,{type:"fetch",meta:(h=o.fetchOptions)==null?void 0:h.meta});const l=m=>{var f,g,x,p;XN(m)&&m.silent||Rt(this,Gi,uo).call(this,{type:"error",error:m}),XN(m)||((g=(f=xe(this,xi).config).onError)==null||g.call(f,m,this),(p=(x=xe(this,xi).config).onSettled)==null||p.call(x,this.state.data,m,this)),this.scheduleGc()};return Je(this,Kn,QF({initialPromise:n==null?void 0:n.initialPromise,fn:o.fetchFn,abort:s.abort.bind(s),onSuccess:m=>{var f,g,x,p;if(m===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(y){l(y);return}(g=(f=xe(this,xi).config).onSuccess)==null||g.call(f,m,this),(p=(x=xe(this,xi).config).onSettled)==null||p.call(x,m,this.state.error,this),this.scheduleGc()},onError:l,onFail:(m,f)=>{Rt(this,Gi,uo).call(this,{type:"failed",failureCount:m,error:f})},onPause:()=>{Rt(this,Gi,uo).call(this,{type:"pause"})},onContinue:()=>{Rt(this,Gi,uo).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),xe(this,Kn).start()}},bh=new WeakMap,wh=new WeakMap,xi=new WeakMap,Kn=new WeakMap,ng=new WeakMap,dd=new WeakMap,Gi=new WeakSet,uo=function(t){const n=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...e8(s.data,this.options),fetchMeta:t.meta??null};case"success":return{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return XN(i)&&i.revert&&xe(this,wh)?{...xe(this,wh),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=n(this.state),Nn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),xe(this,xi).notify({query:this,type:"updated",action:t})})},p6);function e8(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:YF(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Nee(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,s=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Na,x6,See=(x6=class extends km{constructor(t={}){super();xt(this,Na);this.config=t,Je(this,Na,new Map)}build(t,n,s){const i=n.queryKey,a=n.queryHash??gk(i,n);let o=this.get(a);return o||(o=new wee({cache:this,queryKey:i,queryHash:a,options:t.defaultQueryOptions(n),state:s,defaultOptions:t.getQueryDefaults(i)}),this.add(o)),o}add(t){xe(this,Na).has(t.queryHash)||(xe(this,Na).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=xe(this,Na).get(t.queryHash);n&&(t.destroy(),n===t&&xe(this,Na).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Nn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return xe(this,Na).get(t)}getAll(){return[...xe(this,Na).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(s=>sM(n,s))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(s=>sM(t,s)):n}notify(t){Nn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Nn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Nn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Na=new WeakMap,x6),Sa,as,ud,_a,ml,g6,_ee=(g6=class extends JF{constructor(t){super();xt(this,_a);xt(this,Sa);xt(this,as);xt(this,ud);this.mutationId=t.mutationId,Je(this,as,t.mutationCache),Je(this,Sa,[]),this.state=t.state||t8(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){xe(this,Sa).includes(t)||(xe(this,Sa).push(t),this.clearGcTimeout(),xe(this,as).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Je(this,Sa,xe(this,Sa).filter(n=>n!==t)),this.scheduleGc(),xe(this,as).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){xe(this,Sa).length||(this.state.status==="pending"?this.scheduleGc():xe(this,as).remove(this))}continue(){var t;return((t=xe(this,ud))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,a,o,l,c,d,h,m,f,g,x,p,y,b,w,N,S,P,C,k;Je(this,ud,QF({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(O,I)=>{Rt(this,_a,ml).call(this,{type:"failed",failureCount:O,error:I})},onPause:()=>{Rt(this,_a,ml).call(this,{type:"pause"})},onContinue:()=>{Rt(this,_a,ml).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>xe(this,as).canRun(this)}));const n=this.state.status==="pending",s=!xe(this,ud).canStart();try{if(!n){Rt(this,_a,ml).call(this,{type:"pending",variables:t,isPaused:s}),await((a=(i=xe(this,as).config).onMutate)==null?void 0:a.call(i,t,this));const I=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,t));I!==this.state.context&&Rt(this,_a,ml).call(this,{type:"pending",context:I,variables:t,isPaused:s})}const O=await xe(this,ud).start();return await((d=(c=xe(this,as).config).onSuccess)==null?void 0:d.call(c,O,t,this.state.context,this)),await((m=(h=this.options).onSuccess)==null?void 0:m.call(h,O,t,this.state.context)),await((g=(f=xe(this,as).config).onSettled)==null?void 0:g.call(f,O,null,this.state.variables,this.state.context,this)),await((p=(x=this.options).onSettled)==null?void 0:p.call(x,O,null,t,this.state.context)),Rt(this,_a,ml).call(this,{type:"success",data:O}),O}catch(O){try{throw await((b=(y=xe(this,as).config).onError)==null?void 0:b.call(y,O,t,this.state.context,this)),await((N=(w=this.options).onError)==null?void 0:N.call(w,O,t,this.state.context)),await((P=(S=xe(this,as).config).onSettled)==null?void 0:P.call(S,void 0,O,this.state.variables,this.state.context,this)),await((k=(C=this.options).onSettled)==null?void 0:k.call(C,void 0,O,t,this.state.context)),O}finally{Rt(this,_a,ml).call(this,{type:"error",error:O})}}finally{xe(this,as).runNext(this)}}},Sa=new WeakMap,as=new WeakMap,ud=new WeakMap,_a=new WeakSet,ml=function(t){const n=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Nn.batch(()=>{xe(this,Sa).forEach(s=>{s.onMutationUpdate(t)}),xe(this,as).notify({mutation:this,type:"updated",action:t})})},g6);function t8(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var $s,sg,v6,Pee=(v6=class extends km{constructor(t={}){super();xt(this,$s);xt(this,sg);this.config=t,Je(this,$s,new Map),Je(this,sg,Date.now())}build(t,n,s){const i=new _ee({mutationCache:this,mutationId:++fv(this,sg)._,options:t.defaultMutationOptions(n),state:s});return this.add(i),i}add(t){const n=Ov(t),s=xe(this,$s).get(n)??[];s.push(t),xe(this,$s).set(n,s),this.notify({type:"added",mutation:t})}remove(t){var s;const n=Ov(t);if(xe(this,$s).has(n)){const i=(s=xe(this,$s).get(n))==null?void 0:s.filter(a=>a!==t);i&&(i.length===0?xe(this,$s).delete(n):xe(this,$s).set(n,i))}this.notify({type:"removed",mutation:t})}canRun(t){var s;const n=(s=xe(this,$s).get(Ov(t)))==null?void 0:s.find(i=>i.state.status==="pending");return!n||n===t}runNext(t){var s;const n=(s=xe(this,$s).get(Ov(t)))==null?void 0:s.find(i=>i!==t&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){Nn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...xe(this,$s).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(s=>iM(n,s))}findAll(t={}){return this.getAll().filter(n=>iM(t,n))}notify(t){Nn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Nn.batch(()=>Promise.all(t.map(n=>n.continue().catch(gi))))}},$s=new WeakMap,sg=new WeakMap,v6);function Ov(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function lM(e){return{onFetch:(t,n)=>{var h,m,f,g,x;const s=t.options,i=(f=(m=(h=t.fetchOptions)==null?void 0:h.meta)==null?void 0:m.fetchMore)==null?void 0:f.direction,a=((g=t.state.data)==null?void 0:g.pages)||[],o=((x=t.state.data)==null?void 0:x.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let p=!1;const y=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(t.signal.aborted?p=!0:t.signal.addEventListener("abort",()=>{p=!0}),t.signal)})},b=ZF(t.options,t.fetchOptions),w=async(N,S,P)=>{if(p)return Promise.reject();if(S==null&&N.pages.length)return Promise.resolve(N);const C={queryKey:t.queryKey,pageParam:S,direction:P?"backward":"forward",meta:t.options.meta};y(C);const k=await b(C),{maxPages:O}=t.options,I=P?gee:xee;return{pages:I(N.pages,k,O),pageParams:I(N.pageParams,S,O)}};if(i&&a.length){const N=i==="backward",S=N?Cee:cM,P={pages:a,pageParams:o},C=S(s,P);l=await w(P,C,N)}else{const N=e??a.length;do{const S=c===0?o[0]??s.initialPageParam:cM(s,l);if(c>0&&S==null)break;l=await w(l,S),c++}while(c<N)}return l};t.options.persister?t.fetchFn=()=>{var p,y;return(y=(p=t.options).persister)==null?void 0:y.call(p,d,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=d}}}function cM(e,{pages:t,pageParams:n}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,n[s],n):void 0}function Cee(e,{pages:t,pageParams:n}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,n[0],n):void 0}var Zr,Pl,Cl,Nh,Sh,kl,_h,Ph,y6,kee=(y6=class{constructor(e={}){xt(this,Zr);xt(this,Pl);xt(this,Cl);xt(this,Nh);xt(this,Sh);xt(this,kl);xt(this,_h);xt(this,Ph);Je(this,Zr,e.queryCache||new See),Je(this,Pl,e.mutationCache||new Pee),Je(this,Cl,e.defaultOptions||{}),Je(this,Nh,new Map),Je(this,Sh,new Map),Je(this,kl,0)}mount(){fv(this,kl)._++,xe(this,kl)===1&&(Je(this,_h,yk.subscribe(async e=>{e&&(await this.resumePausedMutations(),xe(this,Zr).onFocus())})),Je(this,Ph,o0.subscribe(async e=>{e&&(await this.resumePausedMutations(),xe(this,Zr).onOnline())})))}unmount(){var e,t;fv(this,kl)._--,xe(this,kl)===0&&((e=xe(this,_h))==null||e.call(this),Je(this,_h,void 0),(t=xe(this,Ph))==null||t.call(this),Je(this,Ph,void 0))}isFetching(e){return xe(this,Zr).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return xe(this,Pl).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=xe(this,Zr).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),s=xe(this,Zr).build(this,n);return e.revalidateIfStale&&s.isStaleByTime(ah(n.staleTime,s))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return xe(this,Zr).findAll(e).map(({queryKey:t,state:n})=>{const s=n.data;return[t,s]})}setQueryData(e,t,n){const s=this.defaultQueryOptions({queryKey:e}),i=xe(this,Zr).get(s.queryHash),a=i==null?void 0:i.state.data,o=fee(t,a);if(o!==void 0)return xe(this,Zr).build(this,s).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return Nn.batch(()=>xe(this,Zr).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=xe(this,Zr).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=xe(this,Zr);Nn.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=xe(this,Zr),s={type:"active",...e};return Nn.batch(()=>(n.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries(s,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},s=Nn.batch(()=>xe(this,Zr).findAll(e).map(i=>i.cancel(n)));return Promise.all(s).then(gi).catch(gi)}invalidateQueries(e={},t={}){return Nn.batch(()=>{if(xe(this,Zr).findAll(e).forEach(s=>{s.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},s=Nn.batch(()=>xe(this,Zr).findAll(e).filter(i=>!i.isDisabled()).map(i=>{let a=i.fetch(void 0,n);return n.throwOnError||(a=a.catch(gi)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(s).then(gi)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=xe(this,Zr).build(this,t);return n.isStaleByTime(ah(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(gi).catch(gi)}fetchInfiniteQuery(e){return e.behavior=lM(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(gi).catch(gi)}ensureInfiniteQueryData(e){return e.behavior=lM(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return o0.isOnline()?xe(this,Pl).resumePausedMutations():Promise.resolve()}getQueryCache(){return xe(this,Zr)}getMutationCache(){return xe(this,Pl)}getDefaultOptions(){return xe(this,Cl)}setDefaultOptions(e){Je(this,Cl,e)}setQueryDefaults(e,t){xe(this,Nh).set(Ed(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...xe(this,Nh).values()];let n={};return t.forEach(s=>{Bp(e,s.queryKey)&&(n={...n,...s.defaultOptions})}),n}setMutationDefaults(e,t){xe(this,Sh).set(Ed(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...xe(this,Sh).values()];let n={};return t.forEach(s=>{Bp(e,s.mutationKey)&&(n={...n,...s.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...xe(this,Cl).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=gk(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===vk&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...xe(this,Cl).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){xe(this,Zr).clear(),xe(this,Pl).clear()}},Zr=new WeakMap,Pl=new WeakMap,Cl=new WeakMap,Nh=new WeakMap,Sh=new WeakMap,kl=new WeakMap,_h=new WeakMap,Ph=new WeakMap,y6),bs,Zt,ig,os,hd,Ch,Tl,Pa,ag,kh,Th,md,fd,Al,Ah,lr,Hf,w_,N_,S_,__,P_,C_,k_,r8,j6,Tee=(j6=class extends km{constructor(t,n){super();xt(this,lr);xt(this,bs);xt(this,Zt);xt(this,ig);xt(this,os);xt(this,hd);xt(this,Ch);xt(this,Tl);xt(this,Pa);xt(this,ag);xt(this,kh);xt(this,Th);xt(this,md);xt(this,fd);xt(this,Al);xt(this,Ah,new Set);this.options=n,Je(this,bs,t),Je(this,Pa,null),Je(this,Tl,b_()),this.options.experimental_prefetchInRender||xe(this,Tl).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(xe(this,Zt).addObserver(this),dM(xe(this,Zt),this.options)?Rt(this,lr,Hf).call(this):this.updateResult(),Rt(this,lr,__).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return T_(xe(this,Zt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return T_(xe(this,Zt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Rt(this,lr,P_).call(this),Rt(this,lr,C_).call(this),xe(this,Zt).removeObserver(this)}setOptions(t,n){const s=this.options,i=xe(this,Zt);if(this.options=xe(this,bs).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ea(this.options.enabled,xe(this,Zt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Rt(this,lr,k_).call(this),xe(this,Zt).setOptions(this.options),s._defaulted&&!a0(this.options,s)&&xe(this,bs).getQueryCache().notify({type:"observerOptionsUpdated",query:xe(this,Zt),observer:this});const a=this.hasListeners();a&&uM(xe(this,Zt),i,this.options,s)&&Rt(this,lr,Hf).call(this),this.updateResult(n),a&&(xe(this,Zt)!==i||ea(this.options.enabled,xe(this,Zt))!==ea(s.enabled,xe(this,Zt))||ah(this.options.staleTime,xe(this,Zt))!==ah(s.staleTime,xe(this,Zt)))&&Rt(this,lr,w_).call(this);const o=Rt(this,lr,N_).call(this);a&&(xe(this,Zt)!==i||ea(this.options.enabled,xe(this,Zt))!==ea(s.enabled,xe(this,Zt))||o!==xe(this,Al))&&Rt(this,lr,S_).call(this,o)}getOptimisticResult(t){const n=xe(this,bs).getQueryCache().build(xe(this,bs),t),s=this.createResult(n,t);return Eee(this,s)&&(Je(this,os,s),Je(this,Ch,this.options),Je(this,hd,xe(this,Zt).state)),s}getCurrentResult(){return xe(this,os)}trackResult(t,n){const s={};return Object.keys(t).forEach(i=>{Object.defineProperty(s,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),n==null||n(i),t[i])})}),s}trackProp(t){xe(this,Ah).add(t)}getCurrentQuery(){return xe(this,Zt)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=xe(this,bs).defaultQueryOptions(t),s=xe(this,bs).getQueryCache().build(xe(this,bs),n);return s.fetch().then(()=>this.createResult(s,n))}fetch(t){return Rt(this,lr,Hf).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),xe(this,os)))}createResult(t,n){var O;const s=xe(this,Zt),i=this.options,a=xe(this,os),o=xe(this,hd),l=xe(this,Ch),d=t!==s?t.state:xe(this,ig),{state:h}=t;let m={...h},f=!1,g;if(n._optimisticResults){const I=this.hasListeners(),T=!I&&dM(t,n),E=I&&uM(t,s,n,i);(T||E)&&(m={...m,...e8(h.data,t.options)}),n._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:x,errorUpdatedAt:p,status:y}=m;if(n.select&&m.data!==void 0)if(a&&m.data===(o==null?void 0:o.data)&&n.select===xe(this,ag))g=xe(this,kh);else try{Je(this,ag,n.select),g=n.select(m.data),g=j_(a==null?void 0:a.data,g,n),Je(this,kh,g),Je(this,Pa,null)}catch(I){Je(this,Pa,I)}else g=m.data;if(n.placeholderData!==void 0&&g===void 0&&y==="pending"){let I;if(a!=null&&a.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData))I=a.data;else if(I=typeof n.placeholderData=="function"?n.placeholderData((O=xe(this,Th))==null?void 0:O.state.data,xe(this,Th)):n.placeholderData,n.select&&I!==void 0)try{I=n.select(I),Je(this,Pa,null)}catch(T){Je(this,Pa,T)}I!==void 0&&(y="success",g=j_(a==null?void 0:a.data,I,n),f=!0)}xe(this,Pa)&&(x=xe(this,Pa),g=xe(this,kh),p=Date.now(),y="error");const b=m.fetchStatus==="fetching",w=y==="pending",N=y==="error",S=w&&b,P=g!==void 0,k={status:y,fetchStatus:m.fetchStatus,isPending:w,isSuccess:y==="success",isError:N,isInitialLoading:S,isLoading:S,data:g,dataUpdatedAt:m.dataUpdatedAt,error:x,errorUpdatedAt:p,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>d.dataUpdateCount||m.errorUpdateCount>d.errorUpdateCount,isFetching:b,isRefetching:b&&!w,isLoadingError:N&&!P,isPaused:m.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:N&&P,isStale:jk(t,n),refetch:this.refetch,promise:xe(this,Tl)};if(this.options.experimental_prefetchInRender){const I=D=>{k.status==="error"?D.reject(k.error):k.data!==void 0&&D.resolve(k.data)},T=()=>{const D=Je(this,Tl,k.promise=b_());I(D)},E=xe(this,Tl);switch(E.status){case"pending":t.queryHash===s.queryHash&&I(E);break;case"fulfilled":(k.status==="error"||k.data!==E.value)&&T();break;case"rejected":(k.status!=="error"||k.error!==E.reason)&&T();break}}return k}updateResult(t){const n=xe(this,os),s=this.createResult(xe(this,Zt),this.options);if(Je(this,hd,xe(this,Zt).state),Je(this,Ch,this.options),xe(this,hd).data!==void 0&&Je(this,Th,xe(this,Zt)),a0(s,n))return;Je(this,os,s);const i={},a=()=>{if(!n)return!0;const{notifyOnChangeProps:o}=this.options,l=typeof o=="function"?o():o;if(l==="all"||!l&&!xe(this,Ah).size)return!0;const c=new Set(l??xe(this,Ah));return this.options.throwOnError&&c.add("error"),Object.keys(xe(this,os)).some(d=>{const h=d;return xe(this,os)[h]!==n[h]&&c.has(h)})};(t==null?void 0:t.listeners)!==!1&&a()&&(i.listeners=!0),Rt(this,lr,r8).call(this,{...i,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Rt(this,lr,__).call(this)}},bs=new WeakMap,Zt=new WeakMap,ig=new WeakMap,os=new WeakMap,hd=new WeakMap,Ch=new WeakMap,Tl=new WeakMap,Pa=new WeakMap,ag=new WeakMap,kh=new WeakMap,Th=new WeakMap,md=new WeakMap,fd=new WeakMap,Al=new WeakMap,Ah=new WeakMap,lr=new WeakSet,Hf=function(t){Rt(this,lr,k_).call(this);let n=xe(this,Zt).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(gi)),n},w_=function(){Rt(this,lr,P_).call(this);const t=ah(this.options.staleTime,xe(this,Zt));if(Ad||xe(this,os).isStale||!v_(t))return;const s=KF(xe(this,os).dataUpdatedAt,t)+1;Je(this,md,setTimeout(()=>{xe(this,os).isStale||this.updateResult()},s))},N_=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(xe(this,Zt)):this.options.refetchInterval)??!1},S_=function(t){Rt(this,lr,C_).call(this),Je(this,Al,t),!(Ad||ea(this.options.enabled,xe(this,Zt))===!1||!v_(xe(this,Al))||xe(this,Al)===0)&&Je(this,fd,setInterval(()=>{(this.options.refetchIntervalInBackground||yk.isFocused())&&Rt(this,lr,Hf).call(this)},xe(this,Al)))},__=function(){Rt(this,lr,w_).call(this),Rt(this,lr,S_).call(this,Rt(this,lr,N_).call(this))},P_=function(){xe(this,md)&&(clearTimeout(xe(this,md)),Je(this,md,void 0))},C_=function(){xe(this,fd)&&(clearInterval(xe(this,fd)),Je(this,fd,void 0))},k_=function(){const t=xe(this,bs).getQueryCache().build(xe(this,bs),this.options);if(t===xe(this,Zt))return;const n=xe(this,Zt);Je(this,Zt,t),Je(this,ig,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},r8=function(t){Nn.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(xe(this,os))}),xe(this,bs).getQueryCache().notify({query:xe(this,Zt),type:"observerResultsUpdated"})})},j6);function Aee(e,t){return ea(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function dM(e,t){return Aee(e,t)||e.state.data!==void 0&&T_(e,t,t.refetchOnMount)}function T_(e,t,n){if(ea(t.enabled,e)!==!1){const s=typeof n=="function"?n(e):n;return s==="always"||s!==!1&&jk(e,t)}return!1}function uM(e,t,n,s){return(e!==t||ea(s.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&jk(e,n)}function jk(e,t){return ea(t.enabled,e)!==!1&&e.isStaleByTime(ah(t.staleTime,e))}function Eee(e,t){return!a0(e.getCurrentResult(),t)}var El,Ol,ws,wo,Fo,wy,A_,b6,Oee=(b6=class extends km{constructor(n,s){super();xt(this,Fo);xt(this,El);xt(this,Ol);xt(this,ws);xt(this,wo);Je(this,El,n),this.setOptions(s),this.bindMethods(),Rt(this,Fo,wy).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var i;const s=this.options;this.options=xe(this,El).defaultMutationOptions(n),a0(this.options,s)||xe(this,El).getMutationCache().notify({type:"observerOptionsUpdated",mutation:xe(this,ws),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&Ed(s.mutationKey)!==Ed(this.options.mutationKey)?this.reset():((i=xe(this,ws))==null?void 0:i.state.status)==="pending"&&xe(this,ws).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=xe(this,ws))==null||n.removeObserver(this)}onMutationUpdate(n){Rt(this,Fo,wy).call(this),Rt(this,Fo,A_).call(this,n)}getCurrentResult(){return xe(this,Ol)}reset(){var n;(n=xe(this,ws))==null||n.removeObserver(this),Je(this,ws,void 0),Rt(this,Fo,wy).call(this),Rt(this,Fo,A_).call(this)}mutate(n,s){var i;return Je(this,wo,s),(i=xe(this,ws))==null||i.removeObserver(this),Je(this,ws,xe(this,El).getMutationCache().build(xe(this,El),this.options)),xe(this,ws).addObserver(this),xe(this,ws).execute(n)}},El=new WeakMap,Ol=new WeakMap,ws=new WeakMap,wo=new WeakMap,Fo=new WeakSet,wy=function(){var s;const n=((s=xe(this,ws))==null?void 0:s.state)??t8();Je(this,Ol,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},A_=function(n){Nn.batch(()=>{var s,i,a,o,l,c,d,h;if(xe(this,wo)&&this.hasListeners()){const m=xe(this,Ol).variables,f=xe(this,Ol).context;(n==null?void 0:n.type)==="success"?((i=(s=xe(this,wo)).onSuccess)==null||i.call(s,n.data,m,f),(o=(a=xe(this,wo)).onSettled)==null||o.call(a,n.data,null,m,f)):(n==null?void 0:n.type)==="error"&&((c=(l=xe(this,wo)).onError)==null||c.call(l,n.error,m,f),(h=(d=xe(this,wo)).onSettled)==null||h.call(d,void 0,n.error,m,f))}this.listeners.forEach(m=>{m(xe(this,Ol))})})},b6),n8=j.createContext(void 0),pn=e=>{const t=j.useContext(n8);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Mee=({client:e,children:t})=>(j.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),r.jsx(n8.Provider,{value:e,children:t})),s8=j.createContext(!1),Dee=()=>j.useContext(s8);s8.Provider;function Iee(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Lee=j.createContext(Iee()),Ree=()=>j.useContext(Lee);function i8(e,t){return typeof e=="function"?e(...t):!!e}function E_(){}var $ee=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Fee=e=>{j.useEffect(()=>{e.clearReset()},[e])},zee=({result:e,errorResetBoundary:t,throwOnError:n,query:s})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&i8(n,[e.error,s]),Bee=e=>{e.suspense&&(e.staleTime===void 0&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},Vee=(e,t)=>e.isLoading&&e.isFetching&&!t,Uee=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,hM=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function Wee(e,t,n){var h,m,f,g,x;const s=pn(),i=Dee(),a=Ree(),o=s.defaultQueryOptions(e);(m=(h=s.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||m.call(h,o),o._optimisticResults=i?"isRestoring":"optimistic",Bee(o),$ee(o,a),Fee(a);const l=!s.getQueryCache().get(o.queryHash),[c]=j.useState(()=>new t(s,o)),d=c.getOptimisticResult(o);if(j.useSyncExternalStore(j.useCallback(p=>{const y=i?E_:c.subscribe(Nn.batchCalls(p));return c.updateResult(),y},[c,i]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),j.useEffect(()=>{c.setOptions(o,{listeners:!1})},[o,c]),Uee(o,d))throw hM(o,c,a);if(zee({result:d,errorResetBoundary:a,throwOnError:o.throwOnError,query:s.getQueryCache().get(o.queryHash)}))throw d.error;if((g=(f=s.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||g.call(f,o,d),o.experimental_prefetchInRender&&!Ad&&Vee(d,i)){const p=l?hM(o,c,a):(x=s.getQueryCache().get(o.queryHash))==null?void 0:x.promise;p==null||p.catch(E_).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function Re(e,t){return Wee(e,Tee)}function pt(e,t){const n=pn(),[s]=j.useState(()=>new Oee(n,e));j.useEffect(()=>{s.setOptions(e)},[s,e]);const i=j.useSyncExternalStore(j.useCallback(o=>s.subscribe(Nn.batchCalls(o)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),a=j.useCallback((o,l)=>{s.mutate(o,l).catch(E_)},[s]);if(i.error&&i8(s.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}async function a8(e){if(!e.ok){const t=await e.text()||e.statusText;throw new Error(`${e.status}: ${t}`)}}async function Bt(e,t){const n=await fetch(e,{method:(t==null?void 0:t.method)||"GET",headers:(t==null?void 0:t.headers)||{},body:t==null?void 0:t.body,credentials:"include"});return await a8(n),n}const Hee=({on401:e})=>async({queryKey:t})=>{const n=await fetch(t[0],{credentials:"include"});return e==="returnNull"&&n.status===401?null:(await a8(n),await n.json())},Dr=new kee({defaultOptions:{queries:{queryFn:Hee({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:5*60*1e3,retry:1},mutations:{retry:!1}}});Dr.setMutationDefaults(["*"],{onError:e=>{console.error("Global mutation error:",e)}});async function mM(e){return(await Bt(e)).json()}async function Pi(e,t){return(await Bt(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()}async function Gl(e,t){return(await Bt(e,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()}async function vb(e){return(await Bt(e,{method:"DELETE"})).json()}const qee=1,Kee=3e3;let QN=0;function Gee(){return QN=(QN+1)%Number.MAX_SAFE_INTEGER,QN.toString()}const JN=new Map,fM=e=>{if(JN.has(e))return;const t=setTimeout(()=>{JN.delete(e),dp({type:"REMOVE_TOAST",toastId:e})},Kee);JN.set(e,t)},Zee=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,qee)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?fM(n):e.toasts.forEach(s=>{fM(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===n||n===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Ny=[];let Sy={toasts:[]};function dp(e){Sy=Zee(Sy,e),Ny.forEach(t=>{t(Sy)})}function Yee({...e}){const t=Gee(),n=i=>dp({type:"UPDATE_TOAST",toast:{...i,id:t}}),s=()=>dp({type:"DISMISS_TOAST",toastId:t});return dp({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:i=>{i||s()}}}),setTimeout(()=>{s()},3e3),{id:t,dismiss:s,update:n}}function ft(){const[e,t]=j.useState(Sy);return j.useEffect(()=>(Ny.push(t),()=>{const n=Ny.indexOf(t);n>-1&&Ny.splice(n,1)}),[e]),{...e,toast:Yee,dismiss:n=>dp({type:"DISMISS_TOAST",toastId:n})}}function Fe(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function pM(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function yb(...e){return t=>{let n=!1;const s=e.map(i=>{const a=pM(i,t);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<s.length;i++){const a=s[i];typeof a=="function"?a():pM(e[i],null)}}}}function St(...e){return j.useCallback(yb(...e),e)}function Xee(e,t){const n=j.createContext(t),s=a=>{const{children:o,...l}=a,c=j.useMemo(()=>l,Object.values(l));return r.jsx(n.Provider,{value:c,children:o})};s.displayName=e+"Provider";function i(a){const o=j.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[s,i]}function xn(e,t=[]){let n=[];function s(a,o){const l=j.createContext(o),c=n.length;n=[...n,o];const d=m=>{var b;const{scope:f,children:g,...x}=m,p=((b=f==null?void 0:f[e])==null?void 0:b[c])||l,y=j.useMemo(()=>x,Object.values(x));return r.jsx(p.Provider,{value:y,children:g})};d.displayName=a+"Provider";function h(m,f){var p;const g=((p=f==null?void 0:f[e])==null?void 0:p[c])||l,x=j.useContext(g);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${a}\``)}return[d,h]}const i=()=>{const a=n.map(o=>j.createContext(o));return function(l){const c=(l==null?void 0:l[e])||a;return j.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return i.scopeName=e,[s,Qee(i,...t)]}function Qee(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=s.reduce((l,{useScope:c,scopeName:d})=>{const m=c(a)[`__scope${d}`];return{...l,...m}},{});return j.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function Od(e){const t=Jee(e),n=j.forwardRef((s,i)=>{const{children:a,...o}=s,l=j.Children.toArray(a),c=l.find(ete);if(c){const d=c.props.children,h=l.map(m=>m===c?j.Children.count(d)>1?j.Children.only(null):j.isValidElement(d)?d.props.children:null:m);return r.jsx(t,{...o,ref:i,children:j.isValidElement(d)?j.cloneElement(d,void 0,h):null})}return r.jsx(t,{...o,ref:i,children:a})});return n.displayName=`${e}.Slot`,n}var o8=Od("Slot");function Jee(e){const t=j.forwardRef((n,s)=>{const{children:i,...a}=n;if(j.isValidElement(i)){const o=rte(i),l=tte(a,i.props);return i.type!==j.Fragment&&(l.ref=s?yb(s,o):o),j.cloneElement(i,l)}return j.Children.count(i)>1?j.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var l8=Symbol("radix.slottable");function c8(e){const t=({children:n})=>r.jsx(r.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=l8,t}function ete(e){return j.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===l8}function tte(e,t){const n={...t};for(const s in t){const i=e[s],a=t[s];/^on[A-Z]/.test(s)?i&&a?n[s]=(...l)=>{a(...l),i(...l)}:i&&(n[s]=i):s==="style"?n[s]={...i,...a}:s==="className"&&(n[s]=[i,a].filter(Boolean).join(" "))}return{...e,...n}}function rte(e){var s,i;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function mg(e){const t=e+"CollectionProvider",[n,s]=xn(t),[i,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:y,children:b}=p,w=re.useRef(null),N=re.useRef(new Map).current;return r.jsx(i,{scope:y,itemMap:N,collectionRef:w,children:b})};o.displayName=t;const l=e+"CollectionSlot",c=Od(l),d=re.forwardRef((p,y)=>{const{scope:b,children:w}=p,N=a(l,b),S=St(y,N.collectionRef);return r.jsx(c,{ref:S,children:w})});d.displayName=l;const h=e+"CollectionItemSlot",m="data-radix-collection-item",f=Od(h),g=re.forwardRef((p,y)=>{const{scope:b,children:w,...N}=p,S=re.useRef(null),P=St(y,S),C=a(h,b);return re.useEffect(()=>(C.itemMap.set(S,{ref:S,...N}),()=>void C.itemMap.delete(S))),r.jsx(f,{[m]:"",ref:P,children:w})});g.displayName=h;function x(p){const y=a(e+"CollectionConsumer",p);return re.useCallback(()=>{const w=y.collectionRef.current;if(!w)return[];const N=Array.from(w.querySelectorAll(`[${m}]`));return Array.from(y.itemMap.values()).sort((C,k)=>N.indexOf(C.ref.current)-N.indexOf(k.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:d,ItemSlot:g},x,s]}var nte=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Qe=nte.reduce((e,t)=>{const n=Od(`Primitive.${t}`),s=j.forwardRef((i,a)=>{const{asChild:o,...l}=i,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...l,ref:a})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function bk(e,t){e&&wc.flushSync(()=>e.dispatchEvent(t))}function Rr(e){const t=j.useRef(e);return j.useEffect(()=>{t.current=e}),j.useMemo(()=>(...n)=>{var s;return(s=t.current)==null?void 0:s.call(t,...n)},[])}function ste(e,t=globalThis==null?void 0:globalThis.document){const n=Rr(e);j.useEffect(()=>{const s=i=>{i.key==="Escape"&&n(i)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[n,t])}var ite="DismissableLayer",O_="dismissableLayer.update",ate="dismissableLayer.pointerDownOutside",ote="dismissableLayer.focusOutside",xM,d8=j.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Tm=j.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=e,d=j.useContext(d8),[h,m]=j.useState(null),f=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=j.useState({}),x=St(t,k=>m(k)),p=Array.from(d.layers),[y]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),b=p.indexOf(y),w=h?p.indexOf(h):-1,N=d.layersWithOutsidePointerEventsDisabled.size>0,S=w>=b,P=cte(k=>{const O=k.target,I=[...d.branches].some(T=>T.contains(O));!S||I||(i==null||i(k),o==null||o(k),k.defaultPrevented||l==null||l())},f),C=dte(k=>{const O=k.target;[...d.branches].some(T=>T.contains(O))||(a==null||a(k),o==null||o(k),k.defaultPrevented||l==null||l())},f);return ste(k=>{w===d.layers.size-1&&(s==null||s(k),!k.defaultPrevented&&l&&(k.preventDefault(),l()))},f),j.useEffect(()=>{if(h)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(xM=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),gM(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=xM)}},[h,f,n,d]),j.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),gM())},[h,d]),j.useEffect(()=>{const k=()=>g({});return document.addEventListener(O_,k),()=>document.removeEventListener(O_,k)},[]),r.jsx(Qe.div,{...c,ref:x,style:{pointerEvents:N?S?"auto":"none":void 0,...e.style},onFocusCapture:Fe(e.onFocusCapture,C.onFocusCapture),onBlurCapture:Fe(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:Fe(e.onPointerDownCapture,P.onPointerDownCapture)})});Tm.displayName=ite;var lte="DismissableLayerBranch",u8=j.forwardRef((e,t)=>{const n=j.useContext(d8),s=j.useRef(null),i=St(t,s);return j.useEffect(()=>{const a=s.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),r.jsx(Qe.div,{...e,ref:i})});u8.displayName=lte;function cte(e,t=globalThis==null?void 0:globalThis.document){const n=Rr(e),s=j.useRef(!1),i=j.useRef(()=>{});return j.useEffect(()=>{const a=l=>{if(l.target&&!s.current){let c=function(){h8(ate,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=c,t.addEventListener("click",i.current,{once:!0})):c()}else t.removeEventListener("click",i.current);s.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",a),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>s.current=!0}}function dte(e,t=globalThis==null?void 0:globalThis.document){const n=Rr(e),s=j.useRef(!1);return j.useEffect(()=>{const i=a=>{a.target&&!s.current&&h8(ote,n,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function gM(){const e=new CustomEvent(O_);document.dispatchEvent(e)}function h8(e,t,n,{discrete:s}){const i=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),s?bk(i,a):i.dispatchEvent(a)}var ute=Tm,hte=u8,ln=globalThis!=null&&globalThis.document?j.useLayoutEffect:()=>{},mte="Portal",fg=j.forwardRef((e,t)=>{var l;const{container:n,...s}=e,[i,a]=j.useState(!1);ln(()=>a(!0),[]);const o=n||i&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?LJ.createPortal(r.jsx(Qe.div,{...s,ref:t}),o):null});fg.displayName=mte;function fte(e,t){return j.useReducer((n,s)=>t[n][s]??n,e)}var On=e=>{const{present:t,children:n}=e,s=pte(t),i=typeof n=="function"?n({present:s.isPresent}):j.Children.only(n),a=St(s.ref,xte(i));return typeof n=="function"||s.isPresent?j.cloneElement(i,{ref:a}):null};On.displayName="Presence";function pte(e){const[t,n]=j.useState(),s=j.useRef({}),i=j.useRef(e),a=j.useRef("none"),o=e?"mounted":"unmounted",[l,c]=fte(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return j.useEffect(()=>{const d=Mv(s.current);a.current=l==="mounted"?d:"none"},[l]),ln(()=>{const d=s.current,h=i.current;if(h!==e){const f=a.current,g=Mv(d);e?c("MOUNT"):g==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(h&&f!==g?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,c]),ln(()=>{if(t){let d;const h=t.ownerDocument.defaultView??window,m=g=>{const p=Mv(s.current).includes(g.animationName);if(g.target===t&&p&&(c("ANIMATION_END"),!i.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",d=h.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},f=g=>{g.target===t&&(a.current=Mv(s.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{h.clearTimeout(d),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:j.useCallback(d=>{d&&(s.current=getComputedStyle(d)),n(d)},[])}}function Mv(e){return(e==null?void 0:e.animationName)||"none"}function xte(e){var s,i;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Li({prop:e,defaultProp:t,onChange:n=()=>{}}){const[s,i]=gte({defaultProp:t,onChange:n}),a=e!==void 0,o=a?e:s,l=Rr(n),c=j.useCallback(d=>{if(a){const m=typeof d=="function"?d(e):d;m!==e&&l(m)}else i(d)},[a,e,i,l]);return[o,c]}function gte({defaultProp:e,onChange:t}){const n=j.useState(e),[s]=n,i=j.useRef(s),a=Rr(t);return j.useEffect(()=>{i.current!==s&&(a(s),i.current=s)},[s,i,a]),n}var vte="VisuallyHidden",pg=j.forwardRef((e,t)=>r.jsx(Qe.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));pg.displayName=vte;var yte=pg,wk="ToastProvider",[Nk,jte,bte]=mg("Toast"),[m8,EUe]=xn("Toast",[bte]),[wte,jb]=m8(wk),f8=e=>{const{__scopeToast:t,label:n="Notification",duration:s=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:o}=e,[l,c]=j.useState(null),[d,h]=j.useState(0),m=j.useRef(!1),f=j.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${wk}\`. Expected non-empty \`string\`.`),r.jsx(Nk.Provider,{scope:t,children:r.jsx(wte,{scope:t,label:n,duration:s,swipeDirection:i,swipeThreshold:a,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:j.useCallback(()=>h(g=>g+1),[]),onToastRemove:j.useCallback(()=>h(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:f,children:o})})};f8.displayName=wk;var p8="ToastViewport",Nte=["F8"],M_="toast.viewportPause",D_="toast.viewportResume",x8=j.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:s=Nte,label:i="Notifications ({hotkey})",...a}=e,o=jb(p8,n),l=jte(n),c=j.useRef(null),d=j.useRef(null),h=j.useRef(null),m=j.useRef(null),f=St(t,m,o.onViewportChange),g=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=o.toastCount>0;j.useEffect(()=>{const y=b=>{var N;s.length!==0&&s.every(S=>b[S]||b.code===S)&&((N=m.current)==null||N.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[s]),j.useEffect(()=>{const y=c.current,b=m.current;if(x&&y&&b){const w=()=>{if(!o.isClosePausedRef.current){const C=new CustomEvent(M_);b.dispatchEvent(C),o.isClosePausedRef.current=!0}},N=()=>{if(o.isClosePausedRef.current){const C=new CustomEvent(D_);b.dispatchEvent(C),o.isClosePausedRef.current=!1}},S=C=>{!y.contains(C.relatedTarget)&&N()},P=()=>{y.contains(document.activeElement)||N()};return y.addEventListener("focusin",w),y.addEventListener("focusout",S),y.addEventListener("pointermove",w),y.addEventListener("pointerleave",P),window.addEventListener("blur",w),window.addEventListener("focus",N),()=>{y.removeEventListener("focusin",w),y.removeEventListener("focusout",S),y.removeEventListener("pointermove",w),y.removeEventListener("pointerleave",P),window.removeEventListener("blur",w),window.removeEventListener("focus",N)}}},[x,o.isClosePausedRef]);const p=j.useCallback(({tabbingDirection:y})=>{const w=l().map(N=>{const S=N.ref.current,P=[S,...Lte(S)];return y==="forwards"?P:P.reverse()});return(y==="forwards"?w.reverse():w).flat()},[l]);return j.useEffect(()=>{const y=m.current;if(y){const b=w=>{var P,C,k;const N=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!N){const O=document.activeElement,I=w.shiftKey;if(w.target===y&&I){(P=d.current)==null||P.focus();return}const D=p({tabbingDirection:I?"backwards":"forwards"}),B=D.findIndex(M=>M===O);e1(D.slice(B+1))?w.preventDefault():I?(C=d.current)==null||C.focus():(k=h.current)==null||k.focus()}};return y.addEventListener("keydown",b),()=>y.removeEventListener("keydown",b)}},[l,p]),r.jsxs(hte,{ref:c,role:"region","aria-label":i.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&r.jsx(I_,{ref:d,onFocusFromOutsideViewport:()=>{const y=p({tabbingDirection:"forwards"});e1(y)}}),r.jsx(Nk.Slot,{scope:n,children:r.jsx(Qe.ol,{tabIndex:-1,...a,ref:f})}),x&&r.jsx(I_,{ref:h,onFocusFromOutsideViewport:()=>{const y=p({tabbingDirection:"backwards"});e1(y)}})]})});x8.displayName=p8;var g8="ToastFocusProxy",I_=j.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:s,...i}=e,a=jb(g8,n);return r.jsx(pg,{"aria-hidden":!0,tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=a.viewport)!=null&&d.contains(l))&&s()}})});I_.displayName=g8;var bb="Toast",Ste="toast.swipeStart",_te="toast.swipeMove",Pte="toast.swipeCancel",Cte="toast.swipeEnd",v8=j.forwardRef((e,t)=>{const{forceMount:n,open:s,defaultOpen:i,onOpenChange:a,...o}=e,[l=!0,c]=Li({prop:s,defaultProp:i,onChange:a});return r.jsx(On,{present:n||l,children:r.jsx(Ate,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:Rr(e.onPause),onResume:Rr(e.onResume),onSwipeStart:Fe(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Fe(e.onSwipeMove,d=>{const{x:h,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:Fe(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Fe(e.onSwipeEnd,d=>{const{x:h,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),c(!1)})})})});v8.displayName=bb;var[kte,Tte]=m8(bb,{onClose(){}}),Ate=j.forwardRef((e,t)=>{const{__scopeToast:n,type:s="foreground",duration:i,open:a,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:h,onSwipeMove:m,onSwipeCancel:f,onSwipeEnd:g,...x}=e,p=jb(bb,n),[y,b]=j.useState(null),w=St(t,M=>b(M)),N=j.useRef(null),S=j.useRef(null),P=i||p.duration,C=j.useRef(0),k=j.useRef(P),O=j.useRef(0),{onToastAdd:I,onToastRemove:T}=p,E=Rr(()=>{var U;(y==null?void 0:y.contains(document.activeElement))&&((U=p.viewport)==null||U.focus()),o()}),D=j.useCallback(M=>{!M||M===1/0||(window.clearTimeout(O.current),C.current=new Date().getTime(),O.current=window.setTimeout(E,M))},[E]);j.useEffect(()=>{const M=p.viewport;if(M){const U=()=>{D(k.current),d==null||d()},H=()=>{const K=new Date().getTime()-C.current;k.current=k.current-K,window.clearTimeout(O.current),c==null||c()};return M.addEventListener(M_,H),M.addEventListener(D_,U),()=>{M.removeEventListener(M_,H),M.removeEventListener(D_,U)}}},[p.viewport,P,c,d,D]),j.useEffect(()=>{a&&!p.isClosePausedRef.current&&D(P)},[a,P,p.isClosePausedRef,D]),j.useEffect(()=>(I(),()=>T()),[I,T]);const B=j.useMemo(()=>y?_8(y):null,[y]);return p.viewport?r.jsxs(r.Fragment,{children:[B&&r.jsx(Ete,{__scopeToast:n,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:B}),r.jsx(kte,{scope:n,onClose:E,children:wc.createPortal(r.jsx(Nk.ItemSlot,{scope:n,children:r.jsx(ute,{asChild:!0,onEscapeKeyDown:Fe(l,()=>{p.isFocusedToastEscapeKeyDownRef.current||E(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:r.jsx(Qe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":p.swipeDirection,...x,ref:w,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Fe(e.onKeyDown,M=>{M.key==="Escape"&&(l==null||l(M.nativeEvent),M.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,E()))}),onPointerDown:Fe(e.onPointerDown,M=>{M.button===0&&(N.current={x:M.clientX,y:M.clientY})}),onPointerMove:Fe(e.onPointerMove,M=>{if(!N.current)return;const U=M.clientX-N.current.x,H=M.clientY-N.current.y,K=!!S.current,W=["left","right"].includes(p.swipeDirection),V=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,z=W?V(0,U):0,q=W?0:V(0,H),J=M.pointerType==="touch"?10:2,pe={x:z,y:q},ye={originalEvent:M,delta:pe};K?(S.current=pe,Dv(_te,m,ye,{discrete:!1})):vM(pe,p.swipeDirection,J)?(S.current=pe,Dv(Ste,h,ye,{discrete:!1}),M.target.setPointerCapture(M.pointerId)):(Math.abs(U)>J||Math.abs(H)>J)&&(N.current=null)}),onPointerUp:Fe(e.onPointerUp,M=>{const U=S.current,H=M.target;if(H.hasPointerCapture(M.pointerId)&&H.releasePointerCapture(M.pointerId),S.current=null,N.current=null,U){const K=M.currentTarget,W={originalEvent:M,delta:U};vM(U,p.swipeDirection,p.swipeThreshold)?Dv(Cte,g,W,{discrete:!0}):Dv(Pte,f,W,{discrete:!0}),K.addEventListener("click",V=>V.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),Ete=e=>{const{__scopeToast:t,children:n,...s}=e,i=jb(bb,t),[a,o]=j.useState(!1),[l,c]=j.useState(!1);return Dte(()=>o(!0)),j.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:r.jsx(fg,{asChild:!0,children:r.jsx(pg,{...s,children:a&&r.jsxs(r.Fragment,{children:[i.label," ",n]})})})},Ote="ToastTitle",y8=j.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e;return r.jsx(Qe.div,{...s,ref:t})});y8.displayName=Ote;var Mte="ToastDescription",j8=j.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e;return r.jsx(Qe.div,{...s,ref:t})});j8.displayName=Mte;var b8="ToastAction",w8=j.forwardRef((e,t)=>{const{altText:n,...s}=e;return n.trim()?r.jsx(S8,{altText:n,asChild:!0,children:r.jsx(Sk,{...s,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${b8}\`. Expected non-empty \`string\`.`),null)});w8.displayName=b8;var N8="ToastClose",Sk=j.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e,i=Tte(N8,n);return r.jsx(S8,{asChild:!0,children:r.jsx(Qe.button,{type:"button",...s,ref:t,onClick:Fe(e.onClick,i.onClose)})})});Sk.displayName=N8;var S8=j.forwardRef((e,t)=>{const{__scopeToast:n,altText:s,...i}=e;return r.jsx(Qe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...i,ref:t})});function _8(e){const t=[];return Array.from(e.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&t.push(s.textContent),Ite(s)){const i=s.ariaHidden||s.hidden||s.style.display==="none",a=s.dataset.radixToastAnnounceExclude==="";if(!i)if(a){const o=s.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(..._8(s))}}),t}function Dv(e,t,n,{discrete:s}){const i=n.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),s?bk(i,a):i.dispatchEvent(a)}var vM=(e,t,n=0)=>{const s=Math.abs(e.x),i=Math.abs(e.y),a=s>i;return t==="left"||t==="right"?a&&s>n:!a&&i>n};function Dte(e=()=>{}){const t=Rr(e);ln(()=>{let n=0,s=0;return n=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(s)}},[t])}function Ite(e){return e.nodeType===e.ELEMENT_NODE}function Lte(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const i=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||i?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function e1(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var Rte=f8,P8=x8,C8=v8,k8=y8,T8=j8,A8=w8,E8=Sk;function O8(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=O8(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function Kt(){for(var e,t,n=0,s="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=O8(e))&&(s&&(s+=" "),s+=t);return s}const yM=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,jM=Kt,Am=(e,t)=>n=>{var s;if((t==null?void 0:t.variants)==null)return jM(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:a}=t,o=Object.keys(i).map(d=>{const h=n==null?void 0:n[d],m=a==null?void 0:a[d];if(h===null)return null;const f=yM(h)||yM(m);return i[d][f]}),l=n&&Object.entries(n).reduce((d,h)=>{let[m,f]=h;return f===void 0||(d[m]=f),d},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((d,h)=>{let{class:m,className:f,...g}=h;return Object.entries(g).every(x=>{let[p,y]=x;return Array.isArray(y)?y.includes({...a,...l}[p]):{...a,...l}[p]===y})?[...d,m,f]:d},[]);return jM(e,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $te=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),M8=(...e)=>e.filter((t,n,s)=>!!t&&s.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fte={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zte=j.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:i="",children:a,iconNode:o,...l},c)=>j.createElement("svg",{ref:c,...Fte,width:t,height:t,stroke:e,strokeWidth:s?Number(n)*24/Number(t):n,className:M8("lucide",i),...l},[...o.map(([d,h])=>j.createElement(d,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=(e,t)=>{const n=j.forwardRef(({className:s,...i},a)=>j.createElement(zte,{ref:a,iconNode:t,className:M8(`lucide-${$te(e)}`,s),...i}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l0=Oe("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=Oe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=Oe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bte=Oe("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=Oe("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=Oe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c0=Oe("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vte=Oe("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D8=Oe("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl=Oe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=Oe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=Oe("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_=Oe("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ute=Oe("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=Oe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=Oe("ChefHat",[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wb=Oe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wte=Oe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pk=Oe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=Oe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=Oe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=Oe("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=Oe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ck=Oe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hte=Oe("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=Oe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qte=Oe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vp=Oe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kte=Oe("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=Oe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eu=Oe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oh=Oe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_=Oe("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=Oe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=Oe("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=Oe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d0=Oe("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=Oe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nb=Oe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=Oe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=Oe("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Up=Oe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=Oe("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $_=Oe("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gte=Oe("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I8=Oe("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zte=Oe("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=Oe("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=Oe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yte=Oe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wp=Oe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=Oe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=Oe("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u0=Oe("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xte=Oe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L8=Oe("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R8=Oe("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qte=Oe("MonitorSpeaker",[["path",{d:"M5.5 20H8",key:"1k40s5"}],["path",{d:"M17 9h.01",key:"1j24nn"}],["rect",{width:"10",height:"16",x:"12",y:"4",rx:"2",key:"ixliua"}],["path",{d:"M8 6H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h4",key:"1mp6e1"}],["circle",{cx:"17",cy:"15",r:"1",key:"tqvash"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jte=Oe("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=Oe("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=Oe("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=Oe("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ere=Oe("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tre=Oe("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F_=Oe("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=Oe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qf=Oe("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=Oe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rre=Oe("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=Oe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0=Oe("Route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nre=Oe("Satellite",[["path",{d:"M13 7 9 3 5 7l4 4",key:"vyckw6"}],["path",{d:"m17 11 4 4-4 4-4-4",key:"rchckc"}],["path",{d:"m8 12 4 4 6-6-4-4Z",key:"1sshf7"}],["path",{d:"m16 8 3-3",key:"x428zp"}],["path",{d:"M9 21a6 6 0 0 0-6-6",key:"1iajcf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=Oe("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=Oe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=Oe("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=Oe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hp=Oe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sre=Oe("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qp=Oe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=Oe("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=Oe("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ire=Oe("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=Oe("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $8=Oe("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=Oe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=Oe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=Oe("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kp=Oe("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=Oe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const are=Oe("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F8=Oe("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=Oe("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=Oe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ore=Oe("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=Oe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=Oe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=Oe("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lre=Oe("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=Oe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=Oe("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cre=Oe("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=Oe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vd=Oe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fh=Oe("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=Oe("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dre=Oe("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=Oe("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=Oe("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ure=Oe("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hre=Oe("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=Oe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mre=Oe("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gp=Oe("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),kk="-",fre=e=>{const t=xre(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:o=>{const l=o.split(kk);return l[0]===""&&l.length!==1&&l.shift(),z8(l,t)||pre(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&s[o]?[...c,...s[o]]:c}}},z8=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],s=t.nextPart.get(n),i=s?z8(e.slice(1),s):void 0;if(i)return i;if(t.validators.length===0)return;const a=e.join(kk);return(o=t.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},CM=/^\[(.+)\]$/,pre=e=>{if(CM.test(e)){const t=CM.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},xre=e=>{const{theme:t,prefix:n}=e,s={nextPart:new Map,validators:[]};return vre(Object.entries(e.classGroups),n).forEach(([a,o])=>{B_(o,s,a,t)}),s},B_=(e,t,n,s)=>{e.forEach(i=>{if(typeof i=="string"){const a=i===""?t:kM(t,i);a.classGroupId=n;return}if(typeof i=="function"){if(gre(i)){B_(i(s),t,n,s);return}t.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([a,o])=>{B_(o,kM(t,a),n,s)})})},kM=(e,t)=>{let n=e;return t.split(kk).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},gre=e=>e.isThemeGetter,vre=(e,t)=>t?e.map(([n,s])=>{const i=s.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[t+o,l])):a);return[n,i]}):e,yre=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,s=new Map;const i=(a,o)=>{n.set(a,o),t++,t>e&&(t=0,s=n,n=new Map)};return{get(a){let o=n.get(a);if(o!==void 0)return o;if((o=s.get(a))!==void 0)return i(a,o),o},set(a,o){n.has(a)?n.set(a,o):i(a,o)}}},B8="!",jre=e=>{const{separator:t,experimentalParseClassName:n}=e,s=t.length===1,i=t[0],a=t.length,o=l=>{const c=[];let d=0,h=0,m;for(let y=0;y<l.length;y++){let b=l[y];if(d===0){if(b===i&&(s||l.slice(y,y+a)===t)){c.push(l.slice(h,y)),h=y+a;continue}if(b==="/"){m=y;continue}}b==="["?d++:b==="]"&&d--}const f=c.length===0?l:l.substring(h),g=f.startsWith(B8),x=g?f.substring(1):f,p=m&&m>h?m-h:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:x,maybePostfixModifierPosition:p}};return n?l=>n({className:l,parseClassName:o}):o},bre=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(s=>{s[0]==="["?(t.push(...n.sort(),s),n=[]):n.push(s)}),t.push(...n.sort()),t},wre=e=>({cache:yre(e.cacheSize),parseClassName:jre(e),...fre(e)}),Nre=/\s+/,Sre=(e,t)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:i}=t,a=[],o=e.trim().split(Nre);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:h,hasImportantModifier:m,baseClassName:f,maybePostfixModifierPosition:g}=n(d);let x=!!g,p=s(x?f.substring(0,g):f);if(!p){if(!x){l=d+(l.length>0?" "+l:l);continue}if(p=s(f),!p){l=d+(l.length>0?" "+l:l);continue}x=!1}const y=bre(h).join(":"),b=m?y+B8:y,w=b+p;if(a.includes(w))continue;a.push(w);const N=i(p,x);for(let S=0;S<N.length;++S){const P=N[S];a.push(b+P)}l=d+(l.length>0?" "+l:l)}return l};function _re(){let e=0,t,n,s="";for(;e<arguments.length;)(t=arguments[e++])&&(n=V8(t))&&(s&&(s+=" "),s+=n);return s}const V8=e=>{if(typeof e=="string")return e;let t,n="";for(let s=0;s<e.length;s++)e[s]&&(t=V8(e[s]))&&(n&&(n+=" "),n+=t);return n};function Pre(e,...t){let n,s,i,a=o;function o(c){const d=t.reduce((h,m)=>m(h),e());return n=wre(d),s=n.cache.get,i=n.cache.set,a=l,l(c)}function l(c){const d=s(c);if(d)return d;const h=Sre(c,n);return i(c,h),h}return function(){return a(_re.apply(null,arguments))}}const Sr=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},U8=/^\[(?:([a-z-]+):)?(.+)\]$/i,Cre=/^\d+\/\d+$/,kre=new Set(["px","full","screen"]),Tre=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Are=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Ere=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Ore=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Mre=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ao=e=>lh(e)||kre.has(e)||Cre.test(e),dl=e=>Em(e,"length",Bre),lh=e=>!!e&&!Number.isNaN(Number(e)),n1=e=>Em(e,"number",lh),wf=e=>!!e&&Number.isInteger(Number(e)),Dre=e=>e.endsWith("%")&&lh(e.slice(0,-1)),Dt=e=>U8.test(e),ul=e=>Tre.test(e),Ire=new Set(["length","size","percentage"]),Lre=e=>Em(e,Ire,W8),Rre=e=>Em(e,"position",W8),$re=new Set(["image","url"]),Fre=e=>Em(e,$re,Ure),zre=e=>Em(e,"",Vre),Nf=()=>!0,Em=(e,t,n)=>{const s=U8.exec(e);return s?s[1]?typeof t=="string"?s[1]===t:t.has(s[1]):n(s[2]):!1},Bre=e=>Are.test(e)&&!Ere.test(e),W8=()=>!1,Vre=e=>Ore.test(e),Ure=e=>Mre.test(e),Wre=()=>{const e=Sr("colors"),t=Sr("spacing"),n=Sr("blur"),s=Sr("brightness"),i=Sr("borderColor"),a=Sr("borderRadius"),o=Sr("borderSpacing"),l=Sr("borderWidth"),c=Sr("contrast"),d=Sr("grayscale"),h=Sr("hueRotate"),m=Sr("invert"),f=Sr("gap"),g=Sr("gradientColorStops"),x=Sr("gradientColorStopPositions"),p=Sr("inset"),y=Sr("margin"),b=Sr("opacity"),w=Sr("padding"),N=Sr("saturate"),S=Sr("scale"),P=Sr("sepia"),C=Sr("skew"),k=Sr("space"),O=Sr("translate"),I=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],E=()=>["auto",Dt,t],D=()=>[Dt,t],B=()=>["",ao,dl],M=()=>["auto",lh,Dt],U=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],H=()=>["solid","dashed","dotted","double","none"],K=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],W=()=>["start","end","center","between","around","evenly","stretch"],V=()=>["","0",Dt],z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],q=()=>[lh,Dt];return{cacheSize:500,separator:":",theme:{colors:[Nf],spacing:[ao,dl],blur:["none","",ul,Dt],brightness:q(),borderColor:[e],borderRadius:["none","","full",ul,Dt],borderSpacing:D(),borderWidth:B(),contrast:q(),grayscale:V(),hueRotate:q(),invert:V(),gap:D(),gradientColorStops:[e],gradientColorStopPositions:[Dre,dl],inset:E(),margin:E(),opacity:q(),padding:D(),saturate:q(),scale:q(),sepia:V(),skew:q(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",Dt]}],container:["container"],columns:[{columns:[ul]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...U(),Dt]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",wf,Dt]}],basis:[{basis:E()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Dt]}],grow:[{grow:V()}],shrink:[{shrink:V()}],order:[{order:["first","last","none",wf,Dt]}],"grid-cols":[{"grid-cols":[Nf]}],"col-start-end":[{col:["auto",{span:["full",wf,Dt]},Dt]}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":[Nf]}],"row-start-end":[{row:["auto",{span:[wf,Dt]},Dt]}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Dt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Dt]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...W()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...W(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...W(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Dt,t]}],"min-w":[{"min-w":[Dt,t,"min","max","fit"]}],"max-w":[{"max-w":[Dt,t,"none","full","min","max","fit","prose",{screen:[ul]},ul]}],h:[{h:[Dt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Dt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Dt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Dt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ul,dl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",n1]}],"font-family":[{font:[Nf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Dt]}],"line-clamp":[{"line-clamp":["none",lh,n1]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ao,Dt]}],"list-image":[{"list-image":["none",Dt]}],"list-style-type":[{list:["none","disc","decimal",Dt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...H(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ao,dl]}],"underline-offset":[{"underline-offset":["auto",ao,Dt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Dt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Dt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...U(),Rre]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Lre]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Fre]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...H(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:H()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...H()]}],"outline-offset":[{"outline-offset":[ao,Dt]}],"outline-w":[{outline:[ao,dl]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:B()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[ao,dl]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ul,zre]}],"shadow-color":[{shadow:[Nf]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...K(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":K()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ul,Dt]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[m]}],saturate:[{saturate:[N]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[N]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Dt]}],duration:[{duration:q()}],ease:[{ease:["linear","in","out","in-out",Dt]}],delay:[{delay:q()}],animate:[{animate:["none","spin","ping","pulse","bounce",Dt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[wf,Dt]}],"translate-x":[{"translate-x":[O]}],"translate-y":[{"translate-y":[O]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Dt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Dt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Dt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[ao,dl,n1]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Hre=Pre(Wre);function Ve(...e){return Hre(Kt(e))}const qre=Rte,H8=j.forwardRef(({className:e,...t},n)=>r.jsx(P8,{ref:n,className:Ve("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));H8.displayName=P8.displayName;const Kre=Am("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),q8=j.forwardRef(({className:e,variant:t,...n},s)=>r.jsx(C8,{ref:s,className:Ve(Kre({variant:t}),e),...n}));q8.displayName=C8.displayName;const Gre=j.forwardRef(({className:e,...t},n)=>r.jsx(A8,{ref:n,className:Ve("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));Gre.displayName=A8.displayName;const K8=j.forwardRef(({className:e,...t},n)=>r.jsx(E8,{ref:n,className:Ve("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:r.jsx(Fr,{className:"h-4 w-4"})}));K8.displayName=E8.displayName;const G8=j.forwardRef(({className:e,...t},n)=>r.jsx(k8,{ref:n,className:Ve("text-sm font-semibold",e),...t}));G8.displayName=k8.displayName;const Z8=j.forwardRef(({className:e,...t},n)=>r.jsx(T8,{ref:n,className:Ve("text-sm opacity-90",e),...t}));Z8.displayName=T8.displayName;function Zre(){const{toasts:e}=ft();return r.jsxs(qre,{children:[e.map(function({id:t,title:n,description:s,action:i,...a}){return r.jsxs(q8,{...a,children:[r.jsxs("div",{className:"grid gap-1",children:[n&&r.jsx(G8,{children:n}),s&&r.jsx(Z8,{children:s})]}),i,r.jsx(K8,{})]},t)}),r.jsx(H8,{})]})}var Yre=O6[" useId ".trim().toString()]||(()=>{}),Xre=0;function ca(e){const[t,n]=j.useState(Yre());return ln(()=>{n(s=>s??String(Xre++))},[e]),t?`radix-${t}`:""}const Qre=["top","right","bottom","left"],oc=Math.min,Hs=Math.max,m0=Math.round,Iv=Math.floor,Ra=e=>({x:e,y:e}),Jre={left:"right",right:"left",bottom:"top",top:"bottom"},ene={start:"end",end:"start"};function V_(e,t,n){return Hs(e,oc(t,n))}function Ho(e,t){return typeof e=="function"?e(t):e}function qo(e){return e.split("-")[0]}function Om(e){return e.split("-")[1]}function Tk(e){return e==="x"?"y":"x"}function Ak(e){return e==="y"?"height":"width"}function lc(e){return["top","bottom"].includes(qo(e))?"y":"x"}function Ek(e){return Tk(lc(e))}function tne(e,t,n){n===void 0&&(n=!1);const s=Om(e),i=Ek(e),a=Ak(i);let o=i==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=f0(o)),[o,f0(o)]}function rne(e){const t=f0(e);return[U_(e),t,U_(t)]}function U_(e){return e.replace(/start|end/g,t=>ene[t])}function nne(e,t,n){const s=["left","right"],i=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:s:t?s:i;case"left":case"right":return t?a:o;default:return[]}}function sne(e,t,n,s){const i=Om(e);let a=nne(qo(e),n==="start",s);return i&&(a=a.map(o=>o+"-"+i),t&&(a=a.concat(a.map(U_)))),a}function f0(e){return e.replace(/left|right|bottom|top/g,t=>Jre[t])}function ine(e){return{top:0,right:0,bottom:0,left:0,...e}}function Y8(e){return typeof e!="number"?ine(e):{top:e,right:e,bottom:e,left:e}}function p0(e){const{x:t,y:n,width:s,height:i}=e;return{width:s,height:i,top:n,left:t,right:t+s,bottom:n+i,x:t,y:n}}function TM(e,t,n){let{reference:s,floating:i}=e;const a=lc(t),o=Ek(t),l=Ak(o),c=qo(t),d=a==="y",h=s.x+s.width/2-i.width/2,m=s.y+s.height/2-i.height/2,f=s[l]/2-i[l]/2;let g;switch(c){case"top":g={x:h,y:s.y-i.height};break;case"bottom":g={x:h,y:s.y+s.height};break;case"right":g={x:s.x+s.width,y:m};break;case"left":g={x:s.x-i.width,y:m};break;default:g={x:s.x,y:s.y}}switch(Om(t)){case"start":g[o]-=f*(n&&d?-1:1);break;case"end":g[o]+=f*(n&&d?-1:1);break}return g}const ane=async(e,t,n)=>{const{placement:s="bottom",strategy:i="absolute",middleware:a=[],platform:o}=n,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:h,y:m}=TM(d,s,c),f=s,g={},x=0;for(let p=0;p<l.length;p++){const{name:y,fn:b}=l[p],{x:w,y:N,data:S,reset:P}=await b({x:h,y:m,initialPlacement:s,placement:f,strategy:i,middlewareData:g,rects:d,platform:o,elements:{reference:e,floating:t}});h=w??h,m=N??m,g={...g,[y]:{...g[y],...S}},P&&x<=50&&(x++,typeof P=="object"&&(P.placement&&(f=P.placement),P.rects&&(d=P.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):P.rects),{x:h,y:m}=TM(d,f,c)),p=-1)}return{x:h,y:m,placement:f,strategy:i,middlewareData:g}};async function Zp(e,t){var n;t===void 0&&(t={});const{x:s,y:i,platform:a,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:m="floating",altBoundary:f=!1,padding:g=0}=Ho(t,e),x=Y8(g),y=l[f?m==="floating"?"reference":"floating":m],b=p0(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(y)))==null||n?y:y.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:d,rootBoundary:h,strategy:c})),w=m==="floating"?{x:s,y:i,width:o.floating.width,height:o.floating.height}:o.reference,N=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),S=await(a.isElement==null?void 0:a.isElement(N))?await(a.getScale==null?void 0:a.getScale(N))||{x:1,y:1}:{x:1,y:1},P=p0(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:N,strategy:c}):w);return{top:(b.top-P.top+x.top)/S.y,bottom:(P.bottom-b.bottom+x.bottom)/S.y,left:(b.left-P.left+x.left)/S.x,right:(P.right-b.right+x.right)/S.x}}const one=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:s,placement:i,rects:a,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:h=0}=Ho(e,t)||{};if(d==null)return{};const m=Y8(h),f={x:n,y:s},g=Ek(i),x=Ak(g),p=await o.getDimensions(d),y=g==="y",b=y?"top":"left",w=y?"bottom":"right",N=y?"clientHeight":"clientWidth",S=a.reference[x]+a.reference[g]-f[g]-a.floating[x],P=f[g]-a.reference[g],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let k=C?C[N]:0;(!k||!await(o.isElement==null?void 0:o.isElement(C)))&&(k=l.floating[N]||a.floating[x]);const O=S/2-P/2,I=k/2-p[x]/2-1,T=oc(m[b],I),E=oc(m[w],I),D=T,B=k-p[x]-E,M=k/2-p[x]/2+O,U=V_(D,M,B),H=!c.arrow&&Om(i)!=null&&M!==U&&a.reference[x]/2-(M<D?T:E)-p[x]/2<0,K=H?M<D?M-D:M-B:0;return{[g]:f[g]+K,data:{[g]:U,centerOffset:M-U-K,...H&&{alignmentOffset:K}},reset:H}}}),lne=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,s;const{placement:i,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:h=!0,crossAxis:m=!0,fallbackPlacements:f,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:p=!0,...y}=Ho(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const b=qo(i),w=lc(l),N=qo(l)===l,S=await(c.isRTL==null?void 0:c.isRTL(d.floating)),P=f||(N||!p?[f0(l)]:rne(l)),C=x!=="none";!f&&C&&P.push(...sne(l,p,x,S));const k=[l,...P],O=await Zp(t,y),I=[];let T=((s=a.flip)==null?void 0:s.overflows)||[];if(h&&I.push(O[b]),m){const M=tne(i,o,S);I.push(O[M[0]],O[M[1]])}if(T=[...T,{placement:i,overflows:I}],!I.every(M=>M<=0)){var E,D;const M=(((E=a.flip)==null?void 0:E.index)||0)+1,U=k[M];if(U)return{data:{index:M,overflows:T},reset:{placement:U}};let H=(D=T.filter(K=>K.overflows[0]<=0).sort((K,W)=>K.overflows[1]-W.overflows[1])[0])==null?void 0:D.placement;if(!H)switch(g){case"bestFit":{var B;const K=(B=T.filter(W=>{if(C){const V=lc(W.placement);return V===w||V==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(V=>V>0).reduce((V,z)=>V+z,0)]).sort((W,V)=>W[1]-V[1])[0])==null?void 0:B[0];K&&(H=K);break}case"initialPlacement":H=l;break}if(i!==H)return{reset:{placement:H}}}return{}}}};function AM(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function EM(e){return Qre.some(t=>e[t]>=0)}const cne=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:s="referenceHidden",...i}=Ho(e,t);switch(s){case"referenceHidden":{const a=await Zp(t,{...i,elementContext:"reference"}),o=AM(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:EM(o)}}}case"escaped":{const a=await Zp(t,{...i,altBoundary:!0}),o=AM(a,n.floating);return{data:{escapedOffsets:o,escaped:EM(o)}}}default:return{}}}}};async function dne(e,t){const{placement:n,platform:s,elements:i}=e,a=await(s.isRTL==null?void 0:s.isRTL(i.floating)),o=qo(n),l=Om(n),c=lc(n)==="y",d=["left","top"].includes(o)?-1:1,h=a&&c?-1:1,m=Ho(t,e);let{mainAxis:f,crossAxis:g,alignmentAxis:x}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof x=="number"&&(g=l==="end"?x*-1:x),c?{x:g*h,y:f*d}:{x:f*d,y:g*h}}const une=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,s;const{x:i,y:a,placement:o,middlewareData:l}=t,c=await dne(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:i+c.x,y:a+c.y,data:{...c,placement:o}}}}},hne=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:s,placement:i}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:y=>{let{x:b,y:w}=y;return{x:b,y:w}}},...c}=Ho(e,t),d={x:n,y:s},h=await Zp(t,c),m=lc(qo(i)),f=Tk(m);let g=d[f],x=d[m];if(a){const y=f==="y"?"top":"left",b=f==="y"?"bottom":"right",w=g+h[y],N=g-h[b];g=V_(w,g,N)}if(o){const y=m==="y"?"top":"left",b=m==="y"?"bottom":"right",w=x+h[y],N=x-h[b];x=V_(w,x,N)}const p=l.fn({...t,[f]:g,[m]:x});return{...p,data:{x:p.x-n,y:p.y-s,enabled:{[f]:a,[m]:o}}}}}},mne=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:s,placement:i,rects:a,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=Ho(e,t),h={x:n,y:s},m=lc(i),f=Tk(m);let g=h[f],x=h[m];const p=Ho(l,t),y=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const N=f==="y"?"height":"width",S=a.reference[f]-a.floating[N]+y.mainAxis,P=a.reference[f]+a.reference[N]-y.mainAxis;g<S?g=S:g>P&&(g=P)}if(d){var b,w;const N=f==="y"?"width":"height",S=["top","left"].includes(qo(i)),P=a.reference[m]-a.floating[N]+(S&&((b=o.offset)==null?void 0:b[m])||0)+(S?0:y.crossAxis),C=a.reference[m]+a.reference[N]+(S?0:((w=o.offset)==null?void 0:w[m])||0)-(S?y.crossAxis:0);x<P?x=P:x>C&&(x=C)}return{[f]:g,[m]:x}}}},fne=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,s;const{placement:i,rects:a,platform:o,elements:l}=t,{apply:c=()=>{},...d}=Ho(e,t),h=await Zp(t,d),m=qo(i),f=Om(i),g=lc(i)==="y",{width:x,height:p}=a.floating;let y,b;m==="top"||m==="bottom"?(y=m,b=f===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(b=m,y=f==="end"?"top":"bottom");const w=p-h.top-h.bottom,N=x-h.left-h.right,S=oc(p-h[y],w),P=oc(x-h[b],N),C=!t.middlewareData.shift;let k=S,O=P;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(O=N),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(k=w),C&&!f){const T=Hs(h.left,0),E=Hs(h.right,0),D=Hs(h.top,0),B=Hs(h.bottom,0);g?O=x-2*(T!==0||E!==0?T+E:Hs(h.left,h.right)):k=p-2*(D!==0||B!==0?D+B:Hs(h.top,h.bottom))}await c({...t,availableWidth:O,availableHeight:k});const I=await o.getDimensions(l.floating);return x!==I.width||p!==I.height?{reset:{rects:!0}}:{}}}};function Sb(){return typeof window<"u"}function Mm(e){return X8(e)?(e.nodeName||"").toLowerCase():"#document"}function Qs(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Qa(e){var t;return(t=(X8(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function X8(e){return Sb()?e instanceof Node||e instanceof Qs(e).Node:!1}function ha(e){return Sb()?e instanceof Element||e instanceof Qs(e).Element:!1}function qa(e){return Sb()?e instanceof HTMLElement||e instanceof Qs(e).HTMLElement:!1}function OM(e){return!Sb()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Qs(e).ShadowRoot}function xg(e){const{overflow:t,overflowX:n,overflowY:s,display:i}=ma(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!["inline","contents"].includes(i)}function pne(e){return["table","td","th"].includes(Mm(e))}function _b(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Ok(e){const t=Mk(),n=ha(e)?ma(e):e;return["transform","translate","scale","rotate","perspective"].some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(s=>(n.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(n.contain||"").includes(s))}function xne(e){let t=cc(e);for(;qa(t)&&!zh(t);){if(Ok(t))return t;if(_b(t))return null;t=cc(t)}return null}function Mk(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function zh(e){return["html","body","#document"].includes(Mm(e))}function ma(e){return Qs(e).getComputedStyle(e)}function Pb(e){return ha(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function cc(e){if(Mm(e)==="html")return e;const t=e.assignedSlot||e.parentNode||OM(e)&&e.host||Qa(e);return OM(t)?t.host:t}function Q8(e){const t=cc(e);return zh(t)?e.ownerDocument?e.ownerDocument.body:e.body:qa(t)&&xg(t)?t:Q8(t)}function Yp(e,t,n){var s;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=Q8(e),a=i===((s=e.ownerDocument)==null?void 0:s.body),o=Qs(i);if(a){const l=W_(o);return t.concat(o,o.visualViewport||[],xg(i)?i:[],l&&n?Yp(l):[])}return t.concat(i,Yp(i,[],n))}function W_(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function J8(e){const t=ma(e);let n=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const i=qa(e),a=i?e.offsetWidth:n,o=i?e.offsetHeight:s,l=m0(n)!==a||m0(s)!==o;return l&&(n=a,s=o),{width:n,height:s,$:l}}function Dk(e){return ha(e)?e:e.contextElement}function ch(e){const t=Dk(e);if(!qa(t))return Ra(1);const n=t.getBoundingClientRect(),{width:s,height:i,$:a}=J8(t);let o=(a?m0(n.width):n.width)/s,l=(a?m0(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const gne=Ra(0);function ez(e){const t=Qs(e);return!Mk()||!t.visualViewport?gne:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function vne(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Qs(e)?!1:t}function $d(e,t,n,s){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),a=Dk(e);let o=Ra(1);t&&(s?ha(s)&&(o=ch(s)):o=ch(e));const l=vne(a,n,s)?ez(a):Ra(0);let c=(i.left+l.x)/o.x,d=(i.top+l.y)/o.y,h=i.width/o.x,m=i.height/o.y;if(a){const f=Qs(a),g=s&&ha(s)?Qs(s):s;let x=f,p=W_(x);for(;p&&s&&g!==x;){const y=ch(p),b=p.getBoundingClientRect(),w=ma(p),N=b.left+(p.clientLeft+parseFloat(w.paddingLeft))*y.x,S=b.top+(p.clientTop+parseFloat(w.paddingTop))*y.y;c*=y.x,d*=y.y,h*=y.x,m*=y.y,c+=N,d+=S,x=Qs(p),p=W_(x)}}return p0({width:h,height:m,x:c,y:d})}function Ik(e,t){const n=Pb(e).scrollLeft;return t?t.left+n:$d(Qa(e)).left+n}function tz(e,t,n){n===void 0&&(n=!1);const s=e.getBoundingClientRect(),i=s.left+t.scrollLeft-(n?0:Ik(e,s)),a=s.top+t.scrollTop;return{x:i,y:a}}function yne(e){let{elements:t,rect:n,offsetParent:s,strategy:i}=e;const a=i==="fixed",o=Qa(s),l=t?_b(t.floating):!1;if(s===o||l&&a)return n;let c={scrollLeft:0,scrollTop:0},d=Ra(1);const h=Ra(0),m=qa(s);if((m||!m&&!a)&&((Mm(s)!=="body"||xg(o))&&(c=Pb(s)),qa(s))){const g=$d(s);d=ch(s),h.x=g.x+s.clientLeft,h.y=g.y+s.clientTop}const f=o&&!m&&!a?tz(o,c,!0):Ra(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+h.x+f.x,y:n.y*d.y-c.scrollTop*d.y+h.y+f.y}}function jne(e){return Array.from(e.getClientRects())}function bne(e){const t=Qa(e),n=Pb(e),s=e.ownerDocument.body,i=Hs(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),a=Hs(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let o=-n.scrollLeft+Ik(e);const l=-n.scrollTop;return ma(s).direction==="rtl"&&(o+=Hs(t.clientWidth,s.clientWidth)-i),{width:i,height:a,x:o,y:l}}function wne(e,t){const n=Qs(e),s=Qa(e),i=n.visualViewport;let a=s.clientWidth,o=s.clientHeight,l=0,c=0;if(i){a=i.width,o=i.height;const d=Mk();(!d||d&&t==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}return{width:a,height:o,x:l,y:c}}function Nne(e,t){const n=$d(e,!0,t==="fixed"),s=n.top+e.clientTop,i=n.left+e.clientLeft,a=qa(e)?ch(e):Ra(1),o=e.clientWidth*a.x,l=e.clientHeight*a.y,c=i*a.x,d=s*a.y;return{width:o,height:l,x:c,y:d}}function MM(e,t,n){let s;if(t==="viewport")s=wne(e,n);else if(t==="document")s=bne(Qa(e));else if(ha(t))s=Nne(t,n);else{const i=ez(e);s={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return p0(s)}function rz(e,t){const n=cc(e);return n===t||!ha(n)||zh(n)?!1:ma(n).position==="fixed"||rz(n,t)}function Sne(e,t){const n=t.get(e);if(n)return n;let s=Yp(e,[],!1).filter(l=>ha(l)&&Mm(l)!=="body"),i=null;const a=ma(e).position==="fixed";let o=a?cc(e):e;for(;ha(o)&&!zh(o);){const l=ma(o),c=Ok(o);!c&&l.position==="fixed"&&(i=null),(a?!c&&!i:!c&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||xg(o)&&!c&&rz(e,o))?s=s.filter(h=>h!==o):i=l,o=cc(o)}return t.set(e,s),s}function _ne(e){let{element:t,boundary:n,rootBoundary:s,strategy:i}=e;const o=[...n==="clippingAncestors"?_b(t)?[]:Sne(t,this._c):[].concat(n),s],l=o[0],c=o.reduce((d,h)=>{const m=MM(t,h,i);return d.top=Hs(m.top,d.top),d.right=oc(m.right,d.right),d.bottom=oc(m.bottom,d.bottom),d.left=Hs(m.left,d.left),d},MM(t,l,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Pne(e){const{width:t,height:n}=J8(e);return{width:t,height:n}}function Cne(e,t,n){const s=qa(t),i=Qa(t),a=n==="fixed",o=$d(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const c=Ra(0);if(s||!s&&!a)if((Mm(t)!=="body"||xg(i))&&(l=Pb(t)),s){const f=$d(t,!0,a,t);c.x=f.x+t.clientLeft,c.y=f.y+t.clientTop}else i&&(c.x=Ik(i));const d=i&&!s&&!a?tz(i,l):Ra(0),h=o.left+l.scrollLeft-c.x-d.x,m=o.top+l.scrollTop-c.y-d.y;return{x:h,y:m,width:o.width,height:o.height}}function s1(e){return ma(e).position==="static"}function DM(e,t){if(!qa(e)||ma(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Qa(e)===n&&(n=n.ownerDocument.body),n}function nz(e,t){const n=Qs(e);if(_b(e))return n;if(!qa(e)){let i=cc(e);for(;i&&!zh(i);){if(ha(i)&&!s1(i))return i;i=cc(i)}return n}let s=DM(e,t);for(;s&&pne(s)&&s1(s);)s=DM(s,t);return s&&zh(s)&&s1(s)&&!Ok(s)?n:s||xne(e)||n}const kne=async function(e){const t=this.getOffsetParent||nz,n=this.getDimensions,s=await n(e.floating);return{reference:Cne(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function Tne(e){return ma(e).direction==="rtl"}const Ane={convertOffsetParentRelativeRectToViewportRelativeRect:yne,getDocumentElement:Qa,getClippingRect:_ne,getOffsetParent:nz,getElementRects:kne,getClientRects:jne,getDimensions:Pne,getScale:ch,isElement:ha,isRTL:Tne};function sz(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Ene(e,t){let n=null,s;const i=Qa(e);function a(){var l;clearTimeout(s),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const d=e.getBoundingClientRect(),{left:h,top:m,width:f,height:g}=d;if(l||t(),!f||!g)return;const x=Iv(m),p=Iv(i.clientWidth-(h+f)),y=Iv(i.clientHeight-(m+g)),b=Iv(h),N={rootMargin:-x+"px "+-p+"px "+-y+"px "+-b+"px",threshold:Hs(0,oc(1,c))||1};let S=!0;function P(C){const k=C[0].intersectionRatio;if(k!==c){if(!S)return o();k?o(!1,k):s=setTimeout(()=>{o(!1,1e-7)},1e3)}k===1&&!sz(d,e.getBoundingClientRect())&&o(),S=!1}try{n=new IntersectionObserver(P,{...N,root:i.ownerDocument})}catch{n=new IntersectionObserver(P,N)}n.observe(e)}return o(!0),a}function One(e,t,n,s){s===void 0&&(s={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,d=Dk(e),h=i||a?[...d?Yp(d):[],...Yp(t)]:[];h.forEach(b=>{i&&b.addEventListener("scroll",n,{passive:!0}),a&&b.addEventListener("resize",n)});const m=d&&l?Ene(d,n):null;let f=-1,g=null;o&&(g=new ResizeObserver(b=>{let[w]=b;w&&w.target===d&&g&&(g.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var N;(N=g)==null||N.observe(t)})),n()}),d&&!c&&g.observe(d),g.observe(t));let x,p=c?$d(e):null;c&&y();function y(){const b=$d(e);p&&!sz(p,b)&&n(),p=b,x=requestAnimationFrame(y)}return n(),()=>{var b;h.forEach(w=>{i&&w.removeEventListener("scroll",n),a&&w.removeEventListener("resize",n)}),m==null||m(),(b=g)==null||b.disconnect(),g=null,c&&cancelAnimationFrame(x)}}const Mne=une,Dne=hne,Ine=lne,Lne=fne,Rne=cne,IM=one,$ne=mne,Fne=(e,t,n)=>{const s=new Map,i={platform:Ane,...n},a={...i.platform,_c:s};return ane(e,t,{...i,platform:a})};var _y=typeof document<"u"?j.useLayoutEffect:j.useEffect;function x0(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,s,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(s=n;s--!==0;)if(!x0(e[s],t[s]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(t,i[s]))return!1;for(s=n;s--!==0;){const a=i[s];if(!(a==="_owner"&&e.$$typeof)&&!x0(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function iz(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function LM(e,t){const n=iz(e);return Math.round(t*n)/n}function i1(e){const t=j.useRef(e);return _y(()=>{t.current=e}),t}function zne(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:s=[],platform:i,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[h,m]=j.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,g]=j.useState(s);x0(f,s)||g(s);const[x,p]=j.useState(null),[y,b]=j.useState(null),w=j.useCallback(W=>{W!==C.current&&(C.current=W,p(W))},[]),N=j.useCallback(W=>{W!==k.current&&(k.current=W,b(W))},[]),S=a||x,P=o||y,C=j.useRef(null),k=j.useRef(null),O=j.useRef(h),I=c!=null,T=i1(c),E=i1(i),D=i1(d),B=j.useCallback(()=>{if(!C.current||!k.current)return;const W={placement:t,strategy:n,middleware:f};E.current&&(W.platform=E.current),Fne(C.current,k.current,W).then(V=>{const z={...V,isPositioned:D.current!==!1};M.current&&!x0(O.current,z)&&(O.current=z,wc.flushSync(()=>{m(z)}))})},[f,t,n,E,D]);_y(()=>{d===!1&&O.current.isPositioned&&(O.current.isPositioned=!1,m(W=>({...W,isPositioned:!1})))},[d]);const M=j.useRef(!1);_y(()=>(M.current=!0,()=>{M.current=!1}),[]),_y(()=>{if(S&&(C.current=S),P&&(k.current=P),S&&P){if(T.current)return T.current(S,P,B);B()}},[S,P,B,T,I]);const U=j.useMemo(()=>({reference:C,floating:k,setReference:w,setFloating:N}),[w,N]),H=j.useMemo(()=>({reference:S,floating:P}),[S,P]),K=j.useMemo(()=>{const W={position:n,left:0,top:0};if(!H.floating)return W;const V=LM(H.floating,h.x),z=LM(H.floating,h.y);return l?{...W,transform:"translate("+V+"px, "+z+"px)",...iz(H.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:V,top:z}},[n,l,H.floating,h.x,h.y]);return j.useMemo(()=>({...h,update:B,refs:U,elements:H,floatingStyles:K}),[h,B,U,H,K])}const Bne=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:s,padding:i}=typeof e=="function"?e(n):e;return s&&t(s)?s.current!=null?IM({element:s.current,padding:i}).fn(n):{}:s?IM({element:s,padding:i}).fn(n):{}}}},Vne=(e,t)=>({...Mne(e),options:[e,t]}),Une=(e,t)=>({...Dne(e),options:[e,t]}),Wne=(e,t)=>({...$ne(e),options:[e,t]}),Hne=(e,t)=>({...Ine(e),options:[e,t]}),qne=(e,t)=>({...Lne(e),options:[e,t]}),Kne=(e,t)=>({...Rne(e),options:[e,t]}),Gne=(e,t)=>({...Bne(e),options:[e,t]});var Zne="Arrow",az=j.forwardRef((e,t)=>{const{children:n,width:s=10,height:i=5,...a}=e;return r.jsx(Qe.svg,{...a,ref:t,width:s,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:r.jsx("polygon",{points:"0,0 30,0 15,10"})})});az.displayName=Zne;var Yne=az;function gg(e){const[t,n]=j.useState(void 0);return ln(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;n({width:o,height:l})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else n(void 0)},[e]),t}var Lk="Popper",[oz,Dm]=xn(Lk),[Xne,lz]=oz(Lk),cz=e=>{const{__scopePopper:t,children:n}=e,[s,i]=j.useState(null);return r.jsx(Xne,{scope:t,anchor:s,onAnchorChange:i,children:n})};cz.displayName=Lk;var dz="PopperAnchor",uz=j.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:s,...i}=e,a=lz(dz,n),o=j.useRef(null),l=St(t,o);return j.useEffect(()=>{a.onAnchorChange((s==null?void 0:s.current)||o.current)}),s?null:r.jsx(Qe.div,{...i,ref:l})});uz.displayName=dz;var Rk="PopperContent",[Qne,Jne]=oz(Rk),hz=j.forwardRef((e,t)=>{var Ee,We,Se,Me,Ie,$;const{__scopePopper:n,side:s="bottom",sideOffset:i=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:m="partial",hideWhenDetached:f=!1,updatePositionStrategy:g="optimized",onPlaced:x,...p}=e,y=lz(Rk,n),[b,w]=j.useState(null),N=St(t,ee=>w(ee)),[S,P]=j.useState(null),C=gg(S),k=(C==null?void 0:C.width)??0,O=(C==null?void 0:C.height)??0,I=s+(a!=="center"?"-"+a:""),T=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},E=Array.isArray(d)?d:[d],D=E.length>0,B={padding:T,boundary:E.filter(tse),altBoundary:D},{refs:M,floatingStyles:U,placement:H,isPositioned:K,middlewareData:W}=zne({strategy:"fixed",placement:I,whileElementsMounted:(...ee)=>One(...ee,{animationFrame:g==="always"}),elements:{reference:y.anchor},middleware:[Vne({mainAxis:i+O,alignmentAxis:o}),c&&Une({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?Wne():void 0,...B}),c&&Hne({...B}),qne({...B,apply:({elements:ee,rects:X,availableWidth:Ce,availableHeight:$e})=>{const{width:He,height:lt}=X.reference,Tt=ee.floating.style;Tt.setProperty("--radix-popper-available-width",`${Ce}px`),Tt.setProperty("--radix-popper-available-height",`${$e}px`),Tt.setProperty("--radix-popper-anchor-width",`${He}px`),Tt.setProperty("--radix-popper-anchor-height",`${lt}px`)}}),S&&Gne({element:S,padding:l}),rse({arrowWidth:k,arrowHeight:O}),f&&Kne({strategy:"referenceHidden",...B})]}),[V,z]=pz(H),q=Rr(x);ln(()=>{K&&(q==null||q())},[K,q]);const J=(Ee=W.arrow)==null?void 0:Ee.x,pe=(We=W.arrow)==null?void 0:We.y,ye=((Se=W.arrow)==null?void 0:Se.centerOffset)!==0,[Ne,ke]=j.useState();return ln(()=>{b&&ke(window.getComputedStyle(b).zIndex)},[b]),r.jsx("div",{ref:M.setFloating,"data-radix-popper-content-wrapper":"",style:{...U,transform:K?U.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ne,"--radix-popper-transform-origin":[(Me=W.transformOrigin)==null?void 0:Me.x,(Ie=W.transformOrigin)==null?void 0:Ie.y].join(" "),...(($=W.hide)==null?void 0:$.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:r.jsx(Qne,{scope:n,placedSide:V,onArrowChange:P,arrowX:J,arrowY:pe,shouldHideArrow:ye,children:r.jsx(Qe.div,{"data-side":V,"data-align":z,...p,ref:N,style:{...p.style,animation:K?void 0:"none"}})})})});hz.displayName=Rk;var mz="PopperArrow",ese={top:"bottom",right:"left",bottom:"top",left:"right"},fz=j.forwardRef(function(t,n){const{__scopePopper:s,...i}=t,a=Jne(mz,s),o=ese[a.placedSide];return r.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:r.jsx(Yne,{...i,ref:n,style:{...i.style,display:"block"}})})});fz.displayName=mz;function tse(e){return e!==null}var rse=e=>({name:"transformOrigin",options:e,fn(t){var y,b,w;const{placement:n,rects:s,middlewareData:i}=t,o=((y=i.arrow)==null?void 0:y.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[d,h]=pz(n),m={start:"0%",center:"50%",end:"100%"}[h],f=(((b=i.arrow)==null?void 0:b.x)??0)+l/2,g=(((w=i.arrow)==null?void 0:w.y)??0)+c/2;let x="",p="";return d==="bottom"?(x=o?m:`${f}px`,p=`${-c}px`):d==="top"?(x=o?m:`${f}px`,p=`${s.floating.height+c}px`):d==="right"?(x=`${-c}px`,p=o?m:`${g}px`):d==="left"&&(x=`${s.floating.width+c}px`,p=o?m:`${g}px`),{data:{x,y:p}}}});function pz(e){const[t,n="center"]=e.split("-");return[t,n]}var xz=cz,$k=uz,Fk=hz,zk=fz,[Cb,OUe]=xn("Tooltip",[Dm]),Bk=Dm(),gz="TooltipProvider",nse=700,RM="tooltip.open",[sse,vz]=Cb(gz),yz=e=>{const{__scopeTooltip:t,delayDuration:n=nse,skipDelayDuration:s=300,disableHoverableContent:i=!1,children:a}=e,o=j.useRef(!0),l=j.useRef(!1),c=j.useRef(0);return j.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),r.jsx(sse,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:j.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:j.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,s)},[s]),isPointerInTransitRef:l,onPointerInTransitChange:j.useCallback(d=>{l.current=d},[]),disableHoverableContent:i,children:a})};yz.displayName=gz;var jz="Tooltip",[MUe,kb]=Cb(jz),H_="TooltipTrigger",ise=j.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,i=kb(H_,n),a=vz(H_,n),o=Bk(n),l=j.useRef(null),c=St(t,l,i.onTriggerChange),d=j.useRef(!1),h=j.useRef(!1),m=j.useCallback(()=>d.current=!1,[]);return j.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),r.jsx($k,{asChild:!0,...o,children:r.jsx(Qe.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...s,ref:c,onPointerMove:Fe(e.onPointerMove,f=>{f.pointerType!=="touch"&&!h.current&&!a.isPointerInTransitRef.current&&(i.onTriggerEnter(),h.current=!0)}),onPointerLeave:Fe(e.onPointerLeave,()=>{i.onTriggerLeave(),h.current=!1}),onPointerDown:Fe(e.onPointerDown,()=>{i.open&&i.onClose(),d.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:Fe(e.onFocus,()=>{d.current||i.onOpen()}),onBlur:Fe(e.onBlur,i.onClose),onClick:Fe(e.onClick,i.onClose)})})});ise.displayName=H_;var ase="TooltipPortal",[DUe,ose]=Cb(ase,{forceMount:void 0}),Bh="TooltipContent",bz=j.forwardRef((e,t)=>{const n=ose(Bh,e.__scopeTooltip),{forceMount:s=n.forceMount,side:i="top",...a}=e,o=kb(Bh,e.__scopeTooltip);return r.jsx(On,{present:s||o.open,children:o.disableHoverableContent?r.jsx(wz,{side:i,...a,ref:t}):r.jsx(lse,{side:i,...a,ref:t})})}),lse=j.forwardRef((e,t)=>{const n=kb(Bh,e.__scopeTooltip),s=vz(Bh,e.__scopeTooltip),i=j.useRef(null),a=St(t,i),[o,l]=j.useState(null),{trigger:c,onClose:d}=n,h=i.current,{onPointerInTransitChange:m}=s,f=j.useCallback(()=>{l(null),m(!1)},[m]),g=j.useCallback((x,p)=>{const y=x.currentTarget,b={x:x.clientX,y:x.clientY},w=mse(b,y.getBoundingClientRect()),N=fse(b,w),S=pse(p.getBoundingClientRect()),P=gse([...N,...S]);l(P),m(!0)},[m]);return j.useEffect(()=>()=>f(),[f]),j.useEffect(()=>{if(c&&h){const x=y=>g(y,h),p=y=>g(y,c);return c.addEventListener("pointerleave",x),h.addEventListener("pointerleave",p),()=>{c.removeEventListener("pointerleave",x),h.removeEventListener("pointerleave",p)}}},[c,h,g,f]),j.useEffect(()=>{if(o){const x=p=>{const y=p.target,b={x:p.clientX,y:p.clientY},w=(c==null?void 0:c.contains(y))||(h==null?void 0:h.contains(y)),N=!xse(b,o);w?f():N&&(f(),d())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[c,h,o,d,f]),r.jsx(wz,{...e,ref:a})}),[cse,dse]=Cb(jz,{isInside:!1}),use=c8("TooltipContent"),wz=j.forwardRef((e,t)=>{const{__scopeTooltip:n,children:s,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:o,...l}=e,c=kb(Bh,n),d=Bk(n),{onClose:h}=c;return j.useEffect(()=>(document.addEventListener(RM,h),()=>document.removeEventListener(RM,h)),[h]),j.useEffect(()=>{if(c.trigger){const m=f=>{const g=f.target;g!=null&&g.contains(c.trigger)&&h()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[c.trigger,h]),r.jsx(Tm,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:m=>m.preventDefault(),onDismiss:h,children:r.jsxs(Fk,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[r.jsx(use,{children:s}),r.jsx(cse,{scope:n,isInside:!0,children:r.jsx(yte,{id:c.contentId,role:"tooltip",children:i||s})})]})})});bz.displayName=Bh;var Nz="TooltipArrow",hse=j.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,i=Bk(n);return dse(Nz,n).isInside?null:r.jsx(zk,{...i,...s,ref:t})});hse.displayName=Nz;function mse(e,t){const n=Math.abs(t.top-e.y),s=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,s,i,a)){case a:return"left";case i:return"right";case n:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function fse(e,t,n=5){const s=[];switch(t){case"top":s.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":s.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":s.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":s.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return s}function pse(e){const{top:t,right:n,bottom:s,left:i}=e;return[{x:i,y:t},{x:n,y:t},{x:n,y:s},{x:i,y:s}]}function xse(e,t){const{x:n,y:s}=e;let i=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a].x,c=t[a].y,d=t[o].x,h=t[o].y;c>s!=h>s&&n<(d-l)*(s-c)/(h-c)+l&&(i=!i)}return i}function gse(e){const t=e.slice();return t.sort((n,s)=>n.x<s.x?-1:n.x>s.x?1:n.y<s.y?-1:n.y>s.y?1:0),vse(t)}function vse(e){if(e.length<=1)return e.slice();const t=[];for(let s=0;s<e.length;s++){const i=e[s];for(;t.length>=2;){const a=t[t.length-1],o=t[t.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}t.pop();const n=[];for(let s=e.length-1;s>=0;s--){const i=e[s];for(;n.length>=2;){const a=n[n.length-1],o=n[n.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var yse=yz,Sz=bz;const jse=yse,bse=j.forwardRef(({className:e,sideOffset:t=4,...n},s)=>r.jsx(Sz,{ref:s,sideOffset:t,className:Ve("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...n}));bse.displayName=Sz.displayName;const _z=j.createContext(void 0);function wse({children:e}){const[t,n]=j.useState(null),[s,i]=j.useState(!0),a=async f=>{try{const g=await fetch(`/api/auth/refresh?userId=${f}`);if(g.ok){const x=await g.json();x.user?(n(x.user),localStorage.setItem("user",JSON.stringify(x.user))):(console.warn("No user data in refresh response - clearing invalid session"),n(null),localStorage.removeItem("user"))}else g.status===404?(console.warn("User not found in database - clearing invalid session"),n(null),localStorage.removeItem("user")):console.warn("Failed to refresh user data:",g.status)}catch(g){console.error("Failed to refresh user data:",g)}};j.useEffect(()=>{const f=localStorage.getItem("user");if(f)try{const g=JSON.parse(f);if(g&&g.id&&g.email){if(n(g),a(g.id),g.role==="shopkeeper"&&g.status!=="active"){const x=setInterval(async()=>{try{await a(g.id)}catch{}},3e4);return()=>clearInterval(x)}}else console.warn("Invalid user data in localStorage - clearing"),localStorage.removeItem("user")}catch{console.warn("Corrupted user data in localStorage - clearing"),localStorage.removeItem("user")}i(!1)},[]);const o=async(f,g)=>{const x=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:f,password:g})});if(!x.ok){const y=await x.json();throw new Error(y.error||"Login failed")}const{user:p}=await x.json();n(p),localStorage.setItem("user",JSON.stringify(p)),p.role==="delivery_partner"?window.location.href="/delivery-partner/dashboard":p.role==="shopkeeper"&&d(p.id)},l=async f=>{const g=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)});if(!g.ok){const p=await g.json();throw new Error(p.error||"Registration failed")}const{user:x}=await g.json();n(x),localStorage.setItem("user",JSON.stringify(x))},c=f=>{const g=["restaurant","cafe","food","kitchen","dining","eatery","bistro","pizzeria","burger","pizza","chicken","biryani","dosa","samosa","chinese","indian","nepali","thai","continental","fast food","dhaba","hotel","canteen","mess","tiffin","sweet","bakery","tyres"],x=f.toLowerCase();return g.some(p=>x.includes(p))},d=async f=>{try{const g=await fetch(`/api/stores/user/${f}`);if(g.ok){const x=await g.json();if(x.length>0){const p=x[0];p.storeType==="restaurant"||c(p.name)?window.location.href="/restaurant/dashboard":window.location.href="/seller/dashboard"}else window.location.href="/seller/dashboard"}}catch(g){console.error("Failed to check store type:",g),window.location.href="/seller/dashboard"}},h=async()=>{t!=null&&t.id&&await a(t.id)},m=()=>{n(null),localStorage.removeItem("user"),window.location.href="/"};return r.jsx(_z.Provider,{value:{user:t,login:o,register:l,logout:m,refreshUser:h,isLoading:s},children:e})}function Gt(){const e=j.useContext(_z);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}class Nse{constructor(){this.config={volume:.5,enabled:!0},this.sounds={},this.userHasInteracted=!1,this.loadSettings(),this.setupUserInteractionDetection(),this.preloadSounds()}setupUserInteractionDetection(){const t=()=>{this.userHasInteracted=!0,console.log(" User interaction detected - audio enabled"),document.removeEventListener("click",t),document.removeEventListener("touchstart",t),document.removeEventListener("keydown",t),document.removeEventListener("scroll",t),document.removeEventListener("mousemove",t)};document.addEventListener("click",t),document.addEventListener("touchstart",t),document.addEventListener("keydown",t),document.addEventListener("scroll",t),document.addEventListener("mousemove",t),setTimeout(()=>{if(!this.userHasInteracted)try{const n=new Audio;n.volume=0,n.play().then(()=>{this.userHasInteracted=!0,console.log(" Audio context enabled automatically")}).catch(()=>{console.log("  Audio requires user interaction - click anywhere to enable sounds")})}catch{console.log("  Audio context setup pending user interaction")}},100)}loadSettings(){try{const t=localStorage.getItem("siraha-sound-settings");t&&(this.config={...this.config,...JSON.parse(t)})}catch{console.log("Using default sound settings")}}saveSettings(){try{localStorage.setItem("siraha-sound-settings",JSON.stringify(this.config))}catch{console.log("Failed to save sound settings")}}preloadSounds(){const t={"cart-add":this.createAudioElement("/sounds/cart-add.mp3",()=>this.createBeepSound(800,100)),"cart-remove":this.createAudioElement("/sounds/cart-remove.mp3",()=>this.createBeepSound(400,150)),"cart-clear":this.createAudioElement("/sounds/cart-clear.mp3",()=>this.createBeepSound(300,200)),"order-placed":this.createAudioElement("/sounds/order-placed.mp3",()=>this.createSuccessSound()),"order-confirmed":this.createAudioElement("/sounds/order-confirmed.mp3",()=>this.createBeepSound(600,100,2)),"order-ready":this.createAudioElement("/sounds/notification.mp3",()=>this.createNotificationSound()),notification:this.createAudioElement("/sounds/notification.mp3",()=>this.createNotificationSound()),message:this.createAudioElement("/sounds/message.mp3",()=>this.createBeepSound(700,80)),alert:this.createAudioElement("/sounds/alert.mp3",()=>this.createAlertSound()),success:this.createAudioElement("/sounds/success.mp3",()=>this.createSuccessSound()),error:this.createAudioElement("/sounds/error.mp3",()=>this.createErrorSound()),"button-click":this.createAudioElement("/sounds/button-click.mp3",()=>this.createBeepSound(500,50)),toggle:this.createAudioElement("/sounds/toggle.mp3",()=>this.createBeepSound(600,40)),"tab-switch":this.createAudioElement("/sounds/tab-switch.mp3",()=>this.createBeepSound(450,60)),"modal-open":this.createAudioElement("/sounds/modal-open.mp3",()=>this.createBeepSound(650,80)),"modal-close":this.createAudioElement("/sounds/modal-close.mp3",()=>this.createBeepSound(350,80)),"product-like":this.createAudioElement("/sounds/product-like.mp3",()=>this.createBeepSound(750,70)),"review-submit":this.createAudioElement("/sounds/review-submit.mp3",()=>this.createSuccessSound()),"payment-success":this.createAudioElement("/sounds/payment-success.mp3",()=>this.createPaymentSuccessSound()),"delivery-update":this.createAudioElement("/sounds/delivery-update.mp3",()=>this.createNotificationSound())};this.sounds=t}createAudioElement(t,n){const s=new Audio;return s.src=t,s.preload="auto",s.volume=this.config.volume,s.addEventListener("canplaythrough",()=>{console.log(` Successfully loaded ${t}`)}),s.addEventListener("error",i=>{if(console.log(` Failed to load ${t}, using fallback immediately`),n)try{const a=n();s.src=a.src,s.volume=this.config.volume,console.log(` Fallback set for ${t.split("/").pop()}`)}catch(a){console.error("Fallback sound generation failed:",a)}}),s.addEventListener("loadstart",()=>{console.log(` Loading ${t}...`)}),s}createBeepSound(t,n,s=1){const i=new Audio,a=8e3,o=Math.min(n,200),l=Math.floor(a*o/1e3),c=new ArrayBuffer(44+l*2),d=new DataView(c),h=(x,p)=>{for(let y=0;y<p.length;y++)d.setUint8(x+y,p.charCodeAt(y))};h(0,"RIFF"),d.setUint32(4,36+l*2,!0),h(8,"WAVE"),h(12,"fmt "),d.setUint32(16,16,!0),d.setUint16(20,1,!0),d.setUint16(22,1,!0),d.setUint32(24,a,!0),d.setUint32(28,a*2,!0),d.setUint16(32,2,!0),d.setUint16(34,16,!0),h(36,"data"),d.setUint32(40,l*2,!0);for(let x=0;x<l;x++){const p=Math.min(1,x/(l*.1)),y=Math.min(1,(l-x)/(l*.1)),b=p*y,w=Math.sin(2*Math.PI*t*x/a)*.3*b;d.setInt16(44+x*2,w*32767,!0)}const m=new Uint8Array(c);let f="";for(let x=0;x<m.byteLength;x++)f+=String.fromCharCode(m[x]);const g=btoa(f);return i.src=`data:audio/wav;base64,${g}`,i.preload="auto",i}createNotificationSound(){return this.createMultiToneSound([523,659,784],[100,100,200])}createSuccessSound(){return this.createMultiToneSound([523,659,784,1047],[150,150,150,300])}createErrorSound(){return this.createMultiToneSound([400,350,300],[200,200,300])}createAlertSound(){return this.createMultiToneSound([800,600,800,600],[100,100,100,100])}createPaymentSuccessSound(){return this.createMultiToneSound([523,659,784,1047,1319],[120,120,120,120,400])}createMultiToneSound(t,n){const s=new Audio,i=8e3,a=n.reduce((x,p)=>x+p,0),o=Math.floor(i*a/1e3),l=new ArrayBuffer(44+o*2),c=new DataView(l),d=(x,p)=>{for(let y=0;y<p.length;y++)c.setUint8(x+y,p.charCodeAt(y))};d(0,"RIFF"),c.setUint32(4,36+o*2,!0),d(8,"WAVE"),d(12,"fmt "),c.setUint32(16,16,!0),c.setUint16(20,1,!0),c.setUint16(22,1,!0),c.setUint32(24,i,!0),c.setUint32(28,i*2,!0),c.setUint16(32,2,!0),c.setUint16(34,16,!0),d(36,"data"),c.setUint32(40,o*2,!0);let h=0;t.forEach((x,p)=>{const y=n[p],b=Math.floor(i*y/1e3);for(let w=0;w<b;w++){const N=Math.sin(2*Math.PI*x*w/i)*.3;c.setInt16(44+(h+w)*2,N*32767,!0)}h+=b});const m=new Uint8Array(l);let f="";for(let x=0;x<m.byteLength;x++)f+=String.fromCharCode(m[x]);const g=btoa(f);return s.src=`data:audio/wav;base64,${g}`,s.preload="auto",s}play(t,n){if(!this.config.enabled&&!(n!=null&&n.force)){console.log(` Sound '${t}' disabled`);return}if(!this.userHasInteracted){console.log(`  Cannot play sound '${t}' - waiting for user interaction`),console.log(" TIP: Click anywhere on the page first, then try adding to cart");return}const s=this.sounds[t];if(!s){console.log(` Sound '${t}' not found`);return}try{s.volume=this.config.volume,s.currentTime=0,console.log(` Playing sound '${t}' (src: ${s.src})`);const i=s.play();i!==void 0&&i.then(()=>{console.log(` Successfully played '${t}'`)}).catch(a=>{console.log(` Failed to play sound '${t}':`,a.message),this.tryFallbackSound(t)})}catch(i){console.log(` Error playing sound '${t}':`,i)}}tryFallbackSound(t){if(t==="cart-add")try{const n=this.createBeepSound(800,100);n.volume=this.config.volume,n.play().catch(s=>console.log("Fallback sound also failed:",s.message)),console.log(" Using fallback beep for cart-add")}catch(n){console.log(" Fallback sound creation failed:",n)}}setVolume(t){this.config.volume=Math.max(0,Math.min(1,t)),this.saveSettings()}getVolume(){return this.config.volume}setEnabled(t){this.config.enabled=t,this.saveSettings()}isEnabled(){return this.config.enabled}test(t){t?this.play(t,{force:!0}):Object.keys(this.sounds).forEach((n,s)=>{setTimeout(()=>this.play(n,{force:!0}),s*300)})}}const rr=new Nse,cr={cartAdd:()=>{console.log(" Cart Add sound requested"),rr.play("cart-add")},cartRemove:()=>{console.log(" Cart Remove sound requested"),rr.play("cart-remove")},cartClear:()=>{console.log(" Cart Clear sound requested"),rr.play("cart-clear")},orderPlaced:()=>rr.play("order-placed"),orderConfirmed:()=>rr.play("order-confirmed"),orderReady:()=>rr.play("order-ready"),notification:()=>rr.play("notification"),message:()=>rr.play("message"),alert:()=>rr.play("alert"),success:()=>rr.play("success"),error:()=>rr.play("error"),buttonClick:()=>rr.play("button-click"),toggle:()=>rr.play("toggle"),tabSwitch:()=>rr.play("tab-switch"),modalOpen:()=>rr.play("modal-open"),modalClose:()=>rr.play("modal-close"),productLike:()=>rr.play("product-like"),reviewSubmit:()=>rr.play("review-submit"),paymentSuccess:()=>rr.play("payment-success"),deliveryUpdate:()=>rr.play("delivery-update")},Pz=j.createContext(void 0);function Sse({children:e}){const[t,n]=j.useState([]),[s,i]=j.useState(!1),[a,o]=j.useState(0),[l,c]=j.useState(new Set),{user:d}=Gt(),h=async()=>{if(!d){i(!0);try{const C=JSON.parse(localStorage.getItem("guestCart")||"[]");if(C.length>0){const k=await Promise.all(C.map(async O=>{try{const I=await fetch(`/api/products/${O.productId}`);if(I.ok){const T=await I.json();return{...O,product:T}}return O}catch(I){return console.error(`Failed to fetch product ${O.productId}:`,I),O}}));n(k)}else n([])}catch(C){console.error("Failed to load guest cart:",C),n([])}finally{i(!1)}return}i(!0);try{const C=await fetch(`/api/cart/${d.id}`);if(C.ok){const k=await C.json();n(k)}}catch(C){console.error("Failed to fetch cart:",C)}finally{i(!1)}};j.useEffect(()=>{h()},[d]);const m=async(C,k)=>{if(!d){const I=JSON.parse(localStorage.getItem("guestCart")||"[]"),T=I.find(D=>D.productId===C);T?T.quantity+=k:I.push({id:Date.now(),productId:C,quantity:k,userId:null,createdAt:new Date().toISOString()}),localStorage.setItem("guestCart",JSON.stringify(I)),localStorage.setItem("cartHasSelections","true"),cr.cartAdd();const E=await fetch(`/api/products/${C}`);if(E.ok){const D=await E.json(),B=I.map(M=>({...M,product:M.productId===C?D:M.product}));n(B)}return}if(!(await fetch("/api/cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:d.id,productId:C,quantity:k})})).ok)throw new Error("Failed to add item to cart");localStorage.setItem("cartHasSelections","true"),cr.cartAdd(),await h()},f=async(C,k)=>{if(!(await fetch(`/api/cart/${C}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({quantity:k})})).ok)throw new Error("Failed to update cart item");await h()},g=async C=>{try{if(!t.find(I=>I.id===C)){console.log(`Cart item ${C} not found in current cart, skipping removal`),await h();return}console.log(`Attempting to remove cart item ID: ${C}`);const O=await fetch(`/api/cart/${C}`,{method:"DELETE"});if(!O.ok){const I=await O.json();if(O.status===404){console.log("Item already removed, refreshing cart"),await h();return}throw console.error(`Failed to remove cart item ${C}:`,I),new Error(I.error||"Failed to remove item from cart")}console.log(`Successfully removed cart item ${C}`),cr.cartRemove(),await h()}catch(k){const O=k instanceof Error?k.message:"Unknown error";if(O.includes("already removed")||console.error("Remove from cart error:",k),await h(),!O.includes("Cart item not found"))throw k}},x=async()=>{if(!d){localStorage.removeItem("guestCart"),localStorage.removeItem("cartHasSelections"),n([]),c(new Set),cr.cartClear();return}if(console.log(`Clearing cart for user ${d.id}`),!(await fetch(`/api/cart/user/${d.id}`,{method:"DELETE"})).ok)throw new Error("Failed to clear cart");console.log("Cart cleared successfully, refreshing frontend"),n([]),c(new Set),cr.cartClear(),await h()},p=async()=>{if(!d){const k=JSON.parse(localStorage.getItem("guestCart")||"[]"),O=Array.from(l),I=k.filter(T=>!O.includes(T.id));localStorage.setItem("guestCart",JSON.stringify(I)),cr.cartClear(),c(new Set),await h();return}const C=w();for(const k of C)try{const O=await fetch(`/api/cart/${k.id}`,{method:"DELETE"});O.ok||O.status!==404&&console.error(`Failed to remove item ${k.id} from cart`)}catch(O){console.error(`Error removing item ${k.id}:`,O)}c(new Set),await h()},y=t.reduce((C,k)=>k.product?C+Number(k.product.price)*k.quantity:C,0),b=t.reduce((C,k)=>C+k.quantity,0),w=()=>t.filter(C=>l.has(C.id)),N=()=>{const C=w(),k=C.reduce((I,T)=>T.product?I+Number(T.product.price)*T.quantity:I,0),O=C.reduce((I,T)=>I+T.quantity,0);return{amount:k,items:O}},S=async C=>{const k=t.find(O=>O.productId===C);if(k)c(new Set([k.id]));else{await m(C,1),await h();const O=t.find(I=>I.productId===C);O&&c(new Set([O.id]))}localStorage.setItem("cartHasSelections","true")},P=()=>{localStorage.removeItem("cartHasSelections"),c(new Set)};return j.useEffect(()=>{const C=localStorage.getItem("cartHasSelections")==="true";t.length===0?(localStorage.removeItem("cartHasSelections"),c(new Set)):t.length>0&&l.size===0&&!C&&c(new Set(t.map(k=>k.id)))},[t]),r.jsx(Pz.Provider,{value:{cartItems:t,addToCart:m,updateCartItem:f,removeFromCart:g,clearCart:x,clearSelectedItems:p,totalAmount:y,totalItems:b,isLoading:s,refreshCart:h,deliveryFee:a,setDeliveryFee:o,selectedItems:l,setSelectedItems:c,getSelectedCartItems:w,getSelectedTotals:N,selectSingleItem:S,resetSelectionState:P},children:e})}function Nc(){const e=j.useContext(Pz);if(e===void 0)throw new Error("useCart must be used within a CartProvider");return e}const Cz=j.createContext(void 0);function _se({children:e}){const{user:t}=Gt(),[n,s]=j.useState([]),[i,a]=j.useState(!1),o=async()=>{if(t){a(!0);try{const g=await mM(`/api/wishlist/${t.id}`),x=await Promise.all(g.map(async p=>{try{const y=await mM(`/api/products/${p.productId}`);return{...p,product:y}}catch{return p}}));s(x)}catch(g){console.error("Failed to fetch wishlist:",g)}finally{a(!1)}}},l=async g=>{if(t)try{await Pi("/api/wishlist",{userId:t.id,productId:g}),await o()}catch(x){console.error("Failed to add to wishlist:",x)}},c=async g=>{var x,p;try{await vb(`/api/wishlist/${g}`),await o()}catch(y){console.error("Failed to remove from wishlist:",y),((x=y==null?void 0:y.message)!=null&&x.includes("not found")||(p=y==null?void 0:y.message)!=null&&p.includes("404"))&&(console.log("Item not found on server, refreshing wishlist..."),await o())}},d=g=>n.some(x=>x.productId===g),h=async g=>{const x=n.find(p=>p.productId===g);if(x)try{await c(x.id)}catch(p){console.error("Error toggling wishlist item:",p),await o()}else await l(g)},m=async()=>{await o()};j.useEffect(()=>{t?o():s([])},[t]);const f=n.length;return r.jsx(Cz.Provider,{value:{wishlistItems:n,addToWishlist:l,removeFromWishlist:c,isInWishlist:d,toggleWishlist:h,totalItems:f,isLoading:i,refreshWishlist:m},children:e})}function vg(){const e=j.useContext(Cz);if(e===void 0)throw new Error("useWishlist must be used within a WishlistProvider");return e}const kz=j.createContext(void 0);function Pse({children:e}){const[t,n]=j.useState("shopping"),[,s]=Jr(),[i,a]=j.useState(null),o=j.useCallback(()=>{i&&i()},[i]),l=j.useCallback(d=>{const h=t;n(d),h!==d&&(o(),(d==="food"||d==="shopping")&&s("/"))},[t,o,s]),c=j.useCallback(d=>{a(()=>d)},[]);return r.jsx(kz.Provider,{value:{mode:t,setMode:l,clearSearchOnModeChange:o,setClearSearchCallback:c},children:e})}function Ja(){const e=j.useContext(kz);if(e===void 0)throw new Error("useAppMode must be used within an AppModeProvider");return e}const Tz=j.createContext(void 0);function Cse({children:e}){const[t,n]=j.useState(rr.isEnabled()),[s,i]=j.useState(rr.getVolume());j.useEffect(()=>{n(rr.isEnabled()),i(rr.getVolume())},[]);const l={isEnabled:t,volume:s,setEnabled:c=>{n(c),rr.setEnabled(c)},setVolume:c=>{i(c),rr.setVolume(c)},play:rr.play.bind(rr),playCartAdd:cr.cartAdd,playCartRemove:cr.cartRemove,playCartClear:cr.cartClear,playOrderPlaced:cr.orderPlaced,playOrderConfirmed:cr.orderConfirmed,playOrderReady:cr.orderReady,playNotification:cr.notification,playMessage:cr.message,playAlert:cr.alert,playSuccess:cr.success,playError:cr.error,playButtonClick:cr.buttonClick,playToggle:cr.toggle,playTabSwitch:cr.tabSwitch,playModalOpen:cr.modalOpen,playModalClose:cr.modalClose,playProductLike:cr.productLike,playReviewSubmit:cr.reviewSubmit,playPaymentSuccess:cr.paymentSuccess,playDeliveryUpdate:cr.deliveryUpdate,testAllSounds:rr.test.bind(rr)};return r.jsx(Tz.Provider,{value:l,children:e})}function Az(){const e=j.useContext(Tz);if(!e)throw new Error("useSoundEffects must be used within a SoundProvider");return e}function Vk(){const e=Az();return{onCartAdd:e.playCartAdd,onCartRemove:e.playCartRemove,onCartClear:e.playCartClear,onOrderPlaced:e.playOrderPlaced,onOrderConfirmed:e.playOrderConfirmed,onOrderReady:e.playOrderReady,onSuccess:e.playSuccess,onError:e.playError,onButtonClick:e.playButtonClick,onNotification:e.playNotification,onAlert:e.playAlert,onProductLike:e.playProductLike,onReviewSubmit:e.playReviewSubmit,onPaymentSuccess:e.playPaymentSuccess,onApprove:e.playSuccess,onReject:e.playError,onModalOpen:e.playModalOpen,onModalClose:e.playModalClose,onTabSwitch:e.playTabSwitch,settings:{isEnabled:e.isEnabled,volume:e.volume,setEnabled:e.setEnabled,setVolume:e.setVolume},testAll:e.testAllSounds,play:e.play}}const G=j.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ve("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));G.displayName="Card";const se=j.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ve("flex flex-col space-y-1.5 p-6",e),...t}));se.displayName="CardHeader";const ie=j.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ve("text-2xl font-semibold leading-none tracking-tight",e),...t}));ie.displayName="CardTitle";const Ct=j.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ve("text-sm text-muted-foreground",e),...t}));Ct.displayName="CardDescription";const Z=j.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ve("p-6 pt-0",e),...t}));Z.displayName="CardContent";const Ez=j.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ve("flex items-center p-6 pt-0",e),...t}));Ez.displayName="CardFooter";function kse(){return r.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:r.jsx(G,{className:"w-full max-w-md mx-4",children:r.jsxs(Z,{className:"pt-6",children:[r.jsxs("div",{className:"flex mb-4 gap-2",children:[r.jsx(wr,{className:"h-8 w-8 text-red-500"}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),r.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function Tse(){const{user:e}=Gt(),{data:t=[]}=Re({queryKey:[`/api/stores/user/${e==null?void 0:e.id}`],enabled:!!(e!=null&&e.id)&&(e==null?void 0:e.role)==="shopkeeper"});return t.some(s=>s.storeType==="restaurant"||Ase(s.name))?r.jsxs(Ae,{href:"/restaurant/dashboard",className:"flex items-center space-x-1 hover:text-accent transition-colors",children:[r.jsx(Ta,{className:"h-4 w-4"}),r.jsx("span",{children:"Restaurant Dashboard"})]}):r.jsxs(Ae,{href:"/seller/dashboard",className:"flex items-center space-x-1 hover:text-accent transition-colors",children:[r.jsx(ti,{className:"h-4 w-4"}),r.jsx("span",{children:"Dashboard"})]})}function Ase(e){const t=["restaurant","cafe","food","kitchen","dining","eatery","bistro","pizzeria","burger","pizza","chicken","biryani","dosa","samosa","chinese","indian","nepali","thai","continental","fast food","dhaba","hotel","canteen","mess","tiffin","sweet","bakery","tyres"],n=e.toLowerCase();return t.some(s=>n.includes(s))}const Uk=Am("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),F=j.forwardRef(({className:e,variant:t,size:n,asChild:s=!1,...i},a)=>{const o=s?o8:"button";return r.jsx(o,{className:Ve(Uk({variant:t,size:n,className:e})),ref:a,...i})});F.displayName="Button";const Ese=Am("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function le({className:e,variant:t,...n}){return r.jsx("div",{className:Ve(Ese({variant:t}),e),...n})}var Ose=j.createContext(void 0);function ru(e){const t=j.useContext(Ose);return e||t||"ltr"}function Xp(e,[t,n]){return Math.min(n,Math.max(t,e))}function Mse(e,t){return j.useReducer((n,s)=>t[n][s]??n,e)}var Wk="ScrollArea",[Oz,IUe]=xn(Wk),[Dse,$i]=Oz(Wk),Mz=j.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:s="hover",dir:i,scrollHideDelay:a=600,...o}=e,[l,c]=j.useState(null),[d,h]=j.useState(null),[m,f]=j.useState(null),[g,x]=j.useState(null),[p,y]=j.useState(null),[b,w]=j.useState(0),[N,S]=j.useState(0),[P,C]=j.useState(!1),[k,O]=j.useState(!1),I=St(t,E=>c(E)),T=ru(i);return r.jsx(Dse,{scope:n,type:s,dir:T,scrollHideDelay:a,scrollArea:l,viewport:d,onViewportChange:h,content:m,onContentChange:f,scrollbarX:g,onScrollbarXChange:x,scrollbarXEnabled:P,onScrollbarXEnabledChange:C,scrollbarY:p,onScrollbarYChange:y,scrollbarYEnabled:k,onScrollbarYEnabledChange:O,onCornerWidthChange:w,onCornerHeightChange:S,children:r.jsx(Qe.div,{dir:T,...o,ref:I,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":N+"px",...e.style}})})});Mz.displayName=Wk;var Dz="ScrollAreaViewport",Iz=j.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:s,nonce:i,...a}=e,o=$i(Dz,n),l=j.useRef(null),c=St(t,l,o.onViewportChange);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),r.jsx(Qe.div,{"data-radix-scroll-area-viewport":"",...a,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:r.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});Iz.displayName=Dz;var eo="ScrollAreaScrollbar",Hk=j.forwardRef((e,t)=>{const{forceMount:n,...s}=e,i=$i(eo,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=i,l=e.orientation==="horizontal";return j.useEffect(()=>(l?a(!0):o(!0),()=>{l?a(!1):o(!1)}),[l,a,o]),i.type==="hover"?r.jsx(Ise,{...s,ref:t,forceMount:n}):i.type==="scroll"?r.jsx(Lse,{...s,ref:t,forceMount:n}):i.type==="auto"?r.jsx(Lz,{...s,ref:t,forceMount:n}):i.type==="always"?r.jsx(qk,{...s,ref:t}):null});Hk.displayName=eo;var Ise=j.forwardRef((e,t)=>{const{forceMount:n,...s}=e,i=$i(eo,e.__scopeScrollArea),[a,o]=j.useState(!1);return j.useEffect(()=>{const l=i.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),o(!0)},h=()=>{c=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",h),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",h)}}},[i.scrollArea,i.scrollHideDelay]),r.jsx(On,{present:n||a,children:r.jsx(Lz,{"data-state":a?"visible":"hidden",...s,ref:t})})}),Lse=j.forwardRef((e,t)=>{const{forceMount:n,...s}=e,i=$i(eo,e.__scopeScrollArea),a=e.orientation==="horizontal",o=Ab(()=>c("SCROLL_END"),100),[l,c]=Mse("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return j.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,i.scrollHideDelay,c]),j.useEffect(()=>{const d=i.viewport,h=a?"scrollLeft":"scrollTop";if(d){let m=d[h];const f=()=>{const g=d[h];m!==g&&(c("SCROLL"),o()),m=g};return d.addEventListener("scroll",f),()=>d.removeEventListener("scroll",f)}},[i.viewport,a,c,o]),r.jsx(On,{present:n||l!=="hidden",children:r.jsx(qk,{"data-state":l==="hidden"?"hidden":"visible",...s,ref:t,onPointerEnter:Fe(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Fe(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),Lz=j.forwardRef((e,t)=>{const n=$i(eo,e.__scopeScrollArea),{forceMount:s,...i}=e,[a,o]=j.useState(!1),l=e.orientation==="horizontal",c=Ab(()=>{if(n.viewport){const d=n.viewport.offsetWidth<n.viewport.scrollWidth,h=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?d:h)}},10);return Vh(n.viewport,c),Vh(n.content,c),r.jsx(On,{present:s||a,children:r.jsx(qk,{"data-state":a?"visible":"hidden",...i,ref:t})})}),qk=j.forwardRef((e,t)=>{const{orientation:n="vertical",...s}=e,i=$i(eo,e.__scopeScrollArea),a=j.useRef(null),o=j.useRef(0),[l,c]=j.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=Bz(l.viewport,l.content),h={...s,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:f=>a.current=f,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:f=>o.current=f};function m(f,g){return Vse(f,o.current,l,g)}return n==="horizontal"?r.jsx(Rse,{...h,ref:t,onThumbPositionChange:()=>{if(i.viewport&&a.current){const f=i.viewport.scrollLeft,g=$M(f,l,i.dir);a.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:f=>{i.viewport&&(i.viewport.scrollLeft=f)},onDragScroll:f=>{i.viewport&&(i.viewport.scrollLeft=m(f,i.dir))}}):n==="vertical"?r.jsx($se,{...h,ref:t,onThumbPositionChange:()=>{if(i.viewport&&a.current){const f=i.viewport.scrollTop,g=$M(f,l);a.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:f=>{i.viewport&&(i.viewport.scrollTop=f)},onDragScroll:f=>{i.viewport&&(i.viewport.scrollTop=m(f))}}):null}),Rse=j.forwardRef((e,t)=>{const{sizes:n,onSizesChange:s,...i}=e,a=$i(eo,e.__scopeScrollArea),[o,l]=j.useState(),c=j.useRef(null),d=St(t,c,a.onScrollbarXChange);return j.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),r.jsx($z,{"data-orientation":"horizontal",...i,ref:d,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Tb(n)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.x),onDragScroll:h=>e.onDragScroll(h.x),onWheelScroll:(h,m)=>{if(a.viewport){const f=a.viewport.scrollLeft+h.deltaX;e.onWheelScroll(f),Uz(f,m)&&h.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&s({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:v0(o.paddingLeft),paddingEnd:v0(o.paddingRight)}})}})}),$se=j.forwardRef((e,t)=>{const{sizes:n,onSizesChange:s,...i}=e,a=$i(eo,e.__scopeScrollArea),[o,l]=j.useState(),c=j.useRef(null),d=St(t,c,a.onScrollbarYChange);return j.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),r.jsx($z,{"data-orientation":"vertical",...i,ref:d,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Tb(n)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.y),onDragScroll:h=>e.onDragScroll(h.y),onWheelScroll:(h,m)=>{if(a.viewport){const f=a.viewport.scrollTop+h.deltaY;e.onWheelScroll(f),Uz(f,m)&&h.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&s({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:v0(o.paddingTop),paddingEnd:v0(o.paddingBottom)}})}})}),[Fse,Rz]=Oz(eo),$z=j.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:s,hasThumb:i,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:h,onResize:m,...f}=e,g=$i(eo,n),[x,p]=j.useState(null),y=St(t,I=>p(I)),b=j.useRef(null),w=j.useRef(""),N=g.viewport,S=s.content-s.viewport,P=Rr(h),C=Rr(c),k=Ab(m,10);function O(I){if(b.current){const T=I.clientX-b.current.left,E=I.clientY-b.current.top;d({x:T,y:E})}}return j.useEffect(()=>{const I=T=>{const E=T.target;(x==null?void 0:x.contains(E))&&P(T,S)};return document.addEventListener("wheel",I,{passive:!1}),()=>document.removeEventListener("wheel",I,{passive:!1})},[N,x,S,P]),j.useEffect(C,[s,C]),Vh(x,k),Vh(g.content,k),r.jsx(Fse,{scope:n,scrollbar:x,hasThumb:i,onThumbChange:Rr(a),onThumbPointerUp:Rr(o),onThumbPositionChange:C,onThumbPointerDown:Rr(l),children:r.jsx(Qe.div,{...f,ref:y,style:{position:"absolute",...f.style},onPointerDown:Fe(e.onPointerDown,I=>{I.button===0&&(I.target.setPointerCapture(I.pointerId),b.current=x.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),O(I))}),onPointerMove:Fe(e.onPointerMove,O),onPointerUp:Fe(e.onPointerUp,I=>{const T=I.target;T.hasPointerCapture(I.pointerId)&&T.releasePointerCapture(I.pointerId),document.body.style.webkitUserSelect=w.current,g.viewport&&(g.viewport.style.scrollBehavior=""),b.current=null})})})}),g0="ScrollAreaThumb",Fz=j.forwardRef((e,t)=>{const{forceMount:n,...s}=e,i=Rz(g0,e.__scopeScrollArea);return r.jsx(On,{present:n||i.hasThumb,children:r.jsx(zse,{ref:t,...s})})}),zse=j.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:s,...i}=e,a=$i(g0,n),o=Rz(g0,n),{onThumbPositionChange:l}=o,c=St(t,m=>o.onThumbChange(m)),d=j.useRef(void 0),h=Ab(()=>{d.current&&(d.current(),d.current=void 0)},100);return j.useEffect(()=>{const m=a.viewport;if(m){const f=()=>{if(h(),!d.current){const g=Use(m,l);d.current=g,l()}};return l(),m.addEventListener("scroll",f),()=>m.removeEventListener("scroll",f)}},[a.viewport,h,l]),r.jsx(Qe.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:Fe(e.onPointerDownCapture,m=>{const g=m.target.getBoundingClientRect(),x=m.clientX-g.left,p=m.clientY-g.top;o.onThumbPointerDown({x,y:p})}),onPointerUp:Fe(e.onPointerUp,o.onThumbPointerUp)})});Fz.displayName=g0;var Kk="ScrollAreaCorner",zz=j.forwardRef((e,t)=>{const n=$i(Kk,e.__scopeScrollArea),s=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&s?r.jsx(Bse,{...e,ref:t}):null});zz.displayName=Kk;var Bse=j.forwardRef((e,t)=>{const{__scopeScrollArea:n,...s}=e,i=$i(Kk,n),[a,o]=j.useState(0),[l,c]=j.useState(0),d=!!(a&&l);return Vh(i.scrollbarX,()=>{var m;const h=((m=i.scrollbarX)==null?void 0:m.offsetHeight)||0;i.onCornerHeightChange(h),c(h)}),Vh(i.scrollbarY,()=>{var m;const h=((m=i.scrollbarY)==null?void 0:m.offsetWidth)||0;i.onCornerWidthChange(h),o(h)}),d?r.jsx(Qe.div,{...s,ref:t,style:{width:a,height:l,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function v0(e){return e?parseInt(e,10):0}function Bz(e,t){const n=e/t;return isNaN(n)?0:n}function Tb(e){const t=Bz(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-n)*t;return Math.max(s,18)}function Vse(e,t,n,s="ltr"){const i=Tb(n),a=i/2,o=t||a,l=i-o,c=n.scrollbar.paddingStart+o,d=n.scrollbar.size-n.scrollbar.paddingEnd-l,h=n.content-n.viewport,m=s==="ltr"?[0,h]:[h*-1,0];return Vz([c,d],m)(e)}function $M(e,t,n="ltr"){const s=Tb(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-i,o=t.content-t.viewport,l=a-s,c=n==="ltr"?[0,o]:[o*-1,0],d=Xp(e,c);return Vz([0,o],[0,l])(d)}function Vz(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(n-e[0])}}function Uz(e,t){return e>0&&e<t}var Use=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},s=0;return function i(){const a={left:e.scrollLeft,top:e.scrollTop},o=n.left!==a.left,l=n.top!==a.top;(o||l)&&t(),n=a,s=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(s)};function Ab(e,t){const n=Rr(e),s=j.useRef(0);return j.useEffect(()=>()=>window.clearTimeout(s.current),[]),j.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(n,t)},[n,t])}function Vh(e,t){const n=Rr(t);ln(()=>{let s=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(s),i.unobserve(e)}}},[e,n])}var Wz=Mz,Wse=Iz,Hse=zz;const Gk=j.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(Wz,{ref:s,className:Ve("relative overflow-hidden",e),...n,children:[r.jsx(Wse,{className:"h-full w-full rounded-[inherit]",children:t}),r.jsx(Hz,{}),r.jsx(Hse,{})]}));Gk.displayName=Wz.displayName;const Hz=j.forwardRef(({className:e,orientation:t="vertical",...n},s)=>r.jsx(Hk,{ref:s,orientation:t,className:Ve("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:r.jsx(Fz,{className:"relative flex-1 rounded-full bg-border"})}));Hz.displayName=Hk.displayName;const he=j.forwardRef(({className:e,type:t,...n},s)=>r.jsx("input",{type:t,className:Ve("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...n}));he.displayName="Input";function a1({onSearch:e,placeholder:t="Search products and stores...",className:n=""}){const[s,i]=j.useState(""),[a,o]=j.useState(!1),[,l]=Jr(),c=j.useRef(null),{setClearSearchCallback:d}=Ja();j.useEffect(()=>{d(()=>{i(""),o(!1)})},[]);const{data:h}=Re({queryKey:["/api/search/suggestions",s],queryFn:async()=>{const x=await fetch(`/api/search/suggestions?q=${encodeURIComponent(s)}`);if(!x.ok)throw new Error("Failed to fetch suggestions");return x.json()},enabled:s.length>=2}),m=x=>{if(x.preventDefault(),console.log("SearchWithSuggestions handleSearch called with:",`"${s}"`),e)e(s.trim());else if(s.trim()){const p=`/products?search=${encodeURIComponent(s.trim())}`;console.log("Navigating to:",p),l(p)}else console.log("Clearing search - navigating to /products (empty search)"),l("/products");o(!1)},f=(x,p)=>{l(x==="product"?`/products/${p}`:`/stores/${p}`),i(""),o(!1)};j.useEffect(()=>{const x=p=>{c.current&&!c.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const g=h&&(h.products.length>0||h.stores.length>0);return r.jsxs("div",{ref:c,className:`relative ${n}`,children:[r.jsxs("form",{onSubmit:m,className:"relative",children:[r.jsx(he,{type:"text",placeholder:t,value:s,onChange:x=>{i(x.target.value),o(x.target.value.length>=2),console.log("Search input changed to:",`"${x.target.value}"`)},onFocus:()=>o(s.length>=2),onKeyDown:x=>{x.key==="Enter"&&console.log("Enter key pressed with search query:",`"${s}"`)},className:"w-full pl-4 pr-12 py-2 bg-white text-gray-900 border-none focus:ring-2 focus:ring-white"}),r.jsx(F,{type:"submit",size:"sm",className:"absolute right-0 top-0 h-full bg-accent hover:bg-accent/90 border-none rounded-l-none",children:r.jsx(zn,{className:"h-4 w-4"})})]}),a&&g&&r.jsx(G,{className:"absolute top-full left-0 right-0 mt-1 z-50 max-h-96 overflow-y-auto bg-white shadow-lg border",children:r.jsxs("div",{className:"p-2",children:[h.products.length>0&&r.jsxs("div",{className:"mb-2",children:[r.jsx("div",{className:"px-2 py-1 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Products"}),h.products.map(x=>r.jsxs("button",{onClick:()=>f("product",x.id),className:"w-full flex items-center space-x-3 px-2 py-2 hover:bg-gray-100 rounded-md text-left transition-colors",children:[r.jsx(rt,{className:"h-4 w-4 text-blue-500 flex-shrink-0"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:x.name}),x.description&&r.jsx("div",{className:"text-xs text-gray-500 truncate",children:x.description})]}),r.jsxs("div",{className:"text-sm font-semibold text-green-600",children:["$",x.price]})]},x.id))]}),h.stores.length>0&&r.jsxs("div",{children:[r.jsx("div",{className:"px-2 py-1 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Stores"}),h.stores.map(x=>r.jsxs("button",{onClick:()=>f("store",x.id),className:"w-full flex items-center space-x-3 px-2 py-2 hover:bg-gray-100 rounded-md text-left transition-colors",children:[r.jsx(nr,{className:"h-4 w-4 text-purple-500 flex-shrink-0"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:x.name}),x.description&&r.jsx("div",{className:"text-xs text-gray-500 truncate",children:x.description})]}),r.jsx("div",{className:"text-xs text-gray-500",children:"Store"})]},x.id))]})]})})]})}var o1=0;function Zk(){j.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??FM()),document.body.insertAdjacentElement("beforeend",e[1]??FM()),o1++,()=>{o1===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),o1--}},[])}function FM(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var l1="focusScope.autoFocusOnMount",c1="focusScope.autoFocusOnUnmount",zM={bubbles:!1,cancelable:!0},qse="FocusScope",Eb=j.forwardRef((e,t)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=e,[l,c]=j.useState(null),d=Rr(i),h=Rr(a),m=j.useRef(null),f=St(t,p=>c(p)),g=j.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;j.useEffect(()=>{if(s){let p=function(N){if(g.paused||!l)return;const S=N.target;l.contains(S)?m.current=S:fl(m.current,{select:!0})},y=function(N){if(g.paused||!l)return;const S=N.relatedTarget;S!==null&&(l.contains(S)||fl(m.current,{select:!0}))},b=function(N){if(document.activeElement===document.body)for(const P of N)P.removedNodes.length>0&&fl(l)};document.addEventListener("focusin",p),document.addEventListener("focusout",y);const w=new MutationObserver(b);return l&&w.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",y),w.disconnect()}}},[s,l,g.paused]),j.useEffect(()=>{if(l){VM.add(g);const p=document.activeElement;if(!l.contains(p)){const b=new CustomEvent(l1,zM);l.addEventListener(l1,d),l.dispatchEvent(b),b.defaultPrevented||(Kse(Qse(qz(l)),{select:!0}),document.activeElement===p&&fl(l))}return()=>{l.removeEventListener(l1,d),setTimeout(()=>{const b=new CustomEvent(c1,zM);l.addEventListener(c1,h),l.dispatchEvent(b),b.defaultPrevented||fl(p??document.body,{select:!0}),l.removeEventListener(c1,h),VM.remove(g)},0)}}},[l,d,h,g]);const x=j.useCallback(p=>{if(!n&&!s||g.paused)return;const y=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,b=document.activeElement;if(y&&b){const w=p.currentTarget,[N,S]=Gse(w);N&&S?!p.shiftKey&&b===S?(p.preventDefault(),n&&fl(N,{select:!0})):p.shiftKey&&b===N&&(p.preventDefault(),n&&fl(S,{select:!0})):b===w&&p.preventDefault()}},[n,s,g.paused]);return r.jsx(Qe.div,{tabIndex:-1,...o,ref:f,onKeyDown:x})});Eb.displayName=qse;function Kse(e,{select:t=!1}={}){const n=document.activeElement;for(const s of e)if(fl(s,{select:t}),document.activeElement!==n)return}function Gse(e){const t=qz(e),n=BM(t,e),s=BM(t.reverse(),e);return[n,s]}function qz(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const i=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||i?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function BM(e,t){for(const n of e)if(!Zse(n,{upTo:t}))return n}function Zse(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Yse(e){return e instanceof HTMLInputElement&&"select"in e}function fl(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Yse(e)&&t&&e.select()}}var VM=Xse();function Xse(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=UM(e,t),e.unshift(t)},remove(t){var n;e=UM(e,t),(n=e[0])==null||n.resume()}}}function UM(e,t){const n=[...e],s=n.indexOf(t);return s!==-1&&n.splice(s,1),n}function Qse(e){return e.filter(t=>t.tagName!=="A")}var d1="rovingFocusGroup.onEntryFocus",Jse={bubbles:!1,cancelable:!0},Ob="RovingFocusGroup",[q_,Kz,eie]=mg(Ob),[tie,Im]=xn(Ob,[eie]),[rie,nie]=tie(Ob),Gz=j.forwardRef((e,t)=>r.jsx(q_.Provider,{scope:e.__scopeRovingFocusGroup,children:r.jsx(q_.Slot,{scope:e.__scopeRovingFocusGroup,children:r.jsx(sie,{...e,ref:t})})}));Gz.displayName=Ob;var sie=j.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...m}=e,f=j.useRef(null),g=St(t,f),x=ru(a),[p=null,y]=Li({prop:o,defaultProp:l,onChange:c}),[b,w]=j.useState(!1),N=Rr(d),S=Kz(n),P=j.useRef(!1),[C,k]=j.useState(0);return j.useEffect(()=>{const O=f.current;if(O)return O.addEventListener(d1,N),()=>O.removeEventListener(d1,N)},[N]),r.jsx(rie,{scope:n,orientation:s,dir:x,loop:i,currentTabStopId:p,onItemFocus:j.useCallback(O=>y(O),[y]),onItemShiftTab:j.useCallback(()=>w(!0),[]),onFocusableItemAdd:j.useCallback(()=>k(O=>O+1),[]),onFocusableItemRemove:j.useCallback(()=>k(O=>O-1),[]),children:r.jsx(Qe.div,{tabIndex:b||C===0?-1:0,"data-orientation":s,...m,ref:g,style:{outline:"none",...e.style},onMouseDown:Fe(e.onMouseDown,()=>{P.current=!0}),onFocus:Fe(e.onFocus,O=>{const I=!P.current;if(O.target===O.currentTarget&&I&&!b){const T=new CustomEvent(d1,Jse);if(O.currentTarget.dispatchEvent(T),!T.defaultPrevented){const E=S().filter(H=>H.focusable),D=E.find(H=>H.active),B=E.find(H=>H.id===p),U=[D,B,...E].filter(Boolean).map(H=>H.ref.current);Xz(U,h)}}P.current=!1}),onBlur:Fe(e.onBlur,()=>w(!1))})})}),Zz="RovingFocusGroupItem",Yz=j.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:i=!1,tabStopId:a,...o}=e,l=ca(),c=a||l,d=nie(Zz,n),h=d.currentTabStopId===c,m=Kz(n),{onFocusableItemAdd:f,onFocusableItemRemove:g}=d;return j.useEffect(()=>{if(s)return f(),()=>g()},[s,f,g]),r.jsx(q_.ItemSlot,{scope:n,id:c,focusable:s,active:i,children:r.jsx(Qe.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...o,ref:t,onMouseDown:Fe(e.onMouseDown,x=>{s?d.onItemFocus(c):x.preventDefault()}),onFocus:Fe(e.onFocus,()=>d.onItemFocus(c)),onKeyDown:Fe(e.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){d.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const p=oie(x,d.orientation,d.dir);if(p!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let b=m().filter(w=>w.focusable).map(w=>w.ref.current);if(p==="last")b.reverse();else if(p==="prev"||p==="next"){p==="prev"&&b.reverse();const w=b.indexOf(x.currentTarget);b=d.loop?lie(b,w+1):b.slice(w+1)}setTimeout(()=>Xz(b))}})})})});Yz.displayName=Zz;var iie={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function aie(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function oie(e,t,n){const s=aie(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return iie[s]}function Xz(e,t=!1){const n=document.activeElement;for(const s of e)if(s===n||(s.focus({preventScroll:t}),document.activeElement!==n))return}function lie(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var Yk=Gz,Xk=Yz,cie=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},bu=new WeakMap,Lv=new WeakMap,Rv={},u1=0,Qz=function(e){return e&&(e.host||Qz(e.parentNode))},die=function(e,t){return t.map(function(n){if(e.contains(n))return n;var s=Qz(n);return s&&e.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},uie=function(e,t,n,s){var i=die(t,Array.isArray(e)?e:[e]);Rv[n]||(Rv[n]=new WeakMap);var a=Rv[n],o=[],l=new Set,c=new Set(i),d=function(m){!m||l.has(m)||(l.add(m),d(m.parentNode))};i.forEach(d);var h=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(f){if(l.has(f))h(f);else try{var g=f.getAttribute(s),x=g!==null&&g!=="false",p=(bu.get(f)||0)+1,y=(a.get(f)||0)+1;bu.set(f,p),a.set(f,y),o.push(f),p===1&&x&&Lv.set(f,!0),y===1&&f.setAttribute(n,"true"),x||f.setAttribute(s,"true")}catch(b){console.error("aria-hidden: cannot operate on ",f,b)}})};return h(t),l.clear(),u1++,function(){o.forEach(function(m){var f=bu.get(m)-1,g=a.get(m)-1;bu.set(m,f),a.set(m,g),f||(Lv.has(m)||m.removeAttribute(s),Lv.delete(m)),g||m.removeAttribute(n)}),u1--,u1||(bu=new WeakMap,bu=new WeakMap,Lv=new WeakMap,Rv={})}},Qk=function(e,t,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),i=cie(e);return i?(s.push.apply(s,Array.from(i.querySelectorAll("[aria-live]"))),uie(s,i,n,"aria-hidden")):function(){return null}},ka=function(){return ka=Object.assign||function(t){for(var n,s=1,i=arguments.length;s<i;s++){n=arguments[s];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},ka.apply(this,arguments)};function Jz(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]]);return n}function hie(e,t,n){if(n||arguments.length===2)for(var s=0,i=t.length,a;s<i;s++)(a||!(s in t))&&(a||(a=Array.prototype.slice.call(t,0,s)),a[s]=t[s]);return e.concat(a||Array.prototype.slice.call(t))}var Py="right-scroll-bar-position",Cy="width-before-scroll-bar",mie="with-scroll-bars-hidden",fie="--removed-body-scroll-bar-size";function h1(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function pie(e,t){var n=j.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(s){var i=n.value;i!==s&&(n.value=s,n.callback(s,i))}}}})[0];return n.callback=t,n.facade}var xie=typeof window<"u"?j.useLayoutEffect:j.useEffect,WM=new WeakMap;function gie(e,t){var n=pie(null,function(s){return e.forEach(function(i){return h1(i,s)})});return xie(function(){var s=WM.get(n);if(s){var i=new Set(s),a=new Set(e),o=n.current;i.forEach(function(l){a.has(l)||h1(l,null)}),a.forEach(function(l){i.has(l)||h1(l,o)})}WM.set(n,e)},[e]),n}function vie(e){return e}function yie(e,t){t===void 0&&(t=vie);var n=[],s=!1,i={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var o=t(a,s);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(s=!0;n.length;){var o=n;n=[],o.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){s=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(a),o=n}var c=function(){var h=o;o=[],h.forEach(a)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(h){o.push(h),d()},filter:function(h){return o=o.filter(h),n}}}};return i}function jie(e){e===void 0&&(e={});var t=yie(null);return t.options=ka({async:!0,ssr:!1},e),t}var eB=function(e){var t=e.sideCar,n=Jz(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return j.createElement(s,ka({},n))};eB.isSideCarExport=!0;function bie(e,t){return e.useMedium(t),eB}var tB=jie(),m1=function(){},Mb=j.forwardRef(function(e,t){var n=j.useRef(null),s=j.useState({onScrollCapture:m1,onWheelCapture:m1,onTouchMoveCapture:m1}),i=s[0],a=s[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,h=e.enabled,m=e.shards,f=e.sideCar,g=e.noIsolation,x=e.inert,p=e.allowPinchZoom,y=e.as,b=y===void 0?"div":y,w=e.gapMode,N=Jz(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=f,P=gie([n,t]),C=ka(ka({},N),i);return j.createElement(j.Fragment,null,h&&j.createElement(S,{sideCar:tB,removeScrollBar:d,shards:m,noIsolation:g,inert:x,setCallbacks:a,allowPinchZoom:!!p,lockRef:n,gapMode:w}),o?j.cloneElement(j.Children.only(l),ka(ka({},C),{ref:P})):j.createElement(b,ka({},C,{className:c,ref:P}),l))});Mb.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Mb.classNames={fullWidth:Cy,zeroRight:Py};var wie=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Nie(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=wie();return t&&e.setAttribute("nonce",t),e}function Sie(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function _ie(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Pie=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Nie())&&(Sie(t,n),_ie(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Cie=function(){var e=Pie();return function(t,n){j.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},rB=function(){var e=Cie(),t=function(n){var s=n.styles,i=n.dynamic;return e(s,i),null};return t},kie={left:0,top:0,right:0,gap:0},f1=function(e){return parseInt(e||"",10)||0},Tie=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[f1(n),f1(s),f1(i)]},Aie=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return kie;var t=Tie(e),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-n+t[2]-t[0])}},Eie=rB(),dh="data-scroll-locked",Oie=function(e,t,n,s){var i=e.left,a=e.top,o=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(mie,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(l,"px ").concat(s,`;
  }
  body[`).concat(dh,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Py,` {
    right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(Cy,` {
    margin-right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(Py," .").concat(Py,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(Cy," .").concat(Cy,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(dh,`] {
    `).concat(fie,": ").concat(l,`px;
  }
`)},HM=function(){var e=parseInt(document.body.getAttribute(dh)||"0",10);return isFinite(e)?e:0},Mie=function(){j.useEffect(function(){return document.body.setAttribute(dh,(HM()+1).toString()),function(){var e=HM()-1;e<=0?document.body.removeAttribute(dh):document.body.setAttribute(dh,e.toString())}},[])},Die=function(e){var t=e.noRelative,n=e.noImportant,s=e.gapMode,i=s===void 0?"margin":s;Mie();var a=j.useMemo(function(){return Aie(i)},[i]);return j.createElement(Eie,{styles:Oie(a,!t,i,n?"":"!important")})},K_=!1;if(typeof window<"u")try{var $v=Object.defineProperty({},"passive",{get:function(){return K_=!0,!0}});window.addEventListener("test",$v,$v),window.removeEventListener("test",$v,$v)}catch{K_=!1}var wu=K_?{passive:!1}:!1,Iie=function(e){return e.tagName==="TEXTAREA"},nB=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Iie(e)&&n[t]==="visible")},Lie=function(e){return nB(e,"overflowY")},Rie=function(e){return nB(e,"overflowX")},qM=function(e,t){var n=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var i=sB(e,s);if(i){var a=iB(e,s),o=a[1],l=a[2];if(o>l)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},$ie=function(e){var t=e.scrollTop,n=e.scrollHeight,s=e.clientHeight;return[t,n,s]},Fie=function(e){var t=e.scrollLeft,n=e.scrollWidth,s=e.clientWidth;return[t,n,s]},sB=function(e,t){return e==="v"?Lie(t):Rie(t)},iB=function(e,t){return e==="v"?$ie(t):Fie(t)},zie=function(e,t){return e==="h"&&t==="rtl"?-1:1},Bie=function(e,t,n,s,i){var a=zie(e,window.getComputedStyle(t).direction),o=a*s,l=n.target,c=t.contains(l),d=!1,h=o>0,m=0,f=0;do{var g=iB(e,l),x=g[0],p=g[1],y=g[2],b=p-y-a*x;(x||b)&&sB(e,l)&&(m+=b,f+=x),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(h&&(Math.abs(m)<1||!i)||!h&&(Math.abs(f)<1||!i))&&(d=!0),d},Fv=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},KM=function(e){return[e.deltaX,e.deltaY]},GM=function(e){return e&&"current"in e?e.current:e},Vie=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Uie=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Wie=0,Nu=[];function Hie(e){var t=j.useRef([]),n=j.useRef([0,0]),s=j.useRef(),i=j.useState(Wie++)[0],a=j.useState(rB)[0],o=j.useRef(e);j.useEffect(function(){o.current=e},[e]),j.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var p=hie([e.lockRef.current],(e.shards||[]).map(GM),!0).filter(Boolean);return p.forEach(function(y){return y.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),p.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var l=j.useCallback(function(p,y){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var b=Fv(p),w=n.current,N="deltaX"in p?p.deltaX:w[0]-b[0],S="deltaY"in p?p.deltaY:w[1]-b[1],P,C=p.target,k=Math.abs(N)>Math.abs(S)?"h":"v";if("touches"in p&&k==="h"&&C.type==="range")return!1;var O=qM(k,C);if(!O)return!0;if(O?P=k:(P=k==="v"?"h":"v",O=qM(k,C)),!O)return!1;if(!s.current&&"changedTouches"in p&&(N||S)&&(s.current=P),!P)return!0;var I=s.current||P;return Bie(I,y,p,I==="h"?N:S,!0)},[]),c=j.useCallback(function(p){var y=p;if(!(!Nu.length||Nu[Nu.length-1]!==a)){var b="deltaY"in y?KM(y):Fv(y),w=t.current.filter(function(P){return P.name===y.type&&(P.target===y.target||y.target===P.shadowParent)&&Vie(P.delta,b)})[0];if(w&&w.should){y.cancelable&&y.preventDefault();return}if(!w){var N=(o.current.shards||[]).map(GM).filter(Boolean).filter(function(P){return P.contains(y.target)}),S=N.length>0?l(y,N[0]):!o.current.noIsolation;S&&y.cancelable&&y.preventDefault()}}},[]),d=j.useCallback(function(p,y,b,w){var N={name:p,delta:y,target:b,should:w,shadowParent:qie(b)};t.current.push(N),setTimeout(function(){t.current=t.current.filter(function(S){return S!==N})},1)},[]),h=j.useCallback(function(p){n.current=Fv(p),s.current=void 0},[]),m=j.useCallback(function(p){d(p.type,KM(p),p.target,l(p,e.lockRef.current))},[]),f=j.useCallback(function(p){d(p.type,Fv(p),p.target,l(p,e.lockRef.current))},[]);j.useEffect(function(){return Nu.push(a),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:f}),document.addEventListener("wheel",c,wu),document.addEventListener("touchmove",c,wu),document.addEventListener("touchstart",h,wu),function(){Nu=Nu.filter(function(p){return p!==a}),document.removeEventListener("wheel",c,wu),document.removeEventListener("touchmove",c,wu),document.removeEventListener("touchstart",h,wu)}},[]);var g=e.removeScrollBar,x=e.inert;return j.createElement(j.Fragment,null,x?j.createElement(a,{styles:Uie(i)}):null,g?j.createElement(Die,{gapMode:e.gapMode}):null)}function qie(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Kie=bie(tB,Hie);var Db=j.forwardRef(function(e,t){return j.createElement(Mb,ka({},e,{ref:t,sideCar:Kie}))});Db.classNames=Mb.classNames;var G_=["Enter"," "],Gie=["ArrowDown","PageUp","Home"],aB=["ArrowUp","PageDown","End"],Zie=[...Gie,...aB],Yie={ltr:[...G_,"ArrowRight"],rtl:[...G_,"ArrowLeft"]},Xie={ltr:["ArrowLeft"],rtl:["ArrowRight"]},yg="Menu",[Qp,Qie,Jie]=mg(yg),[nu,oB]=xn(yg,[Jie,Dm,Im]),Ib=Dm(),lB=Im(),[eae,su]=nu(yg),[tae,jg]=nu(yg),cB=e=>{const{__scopeMenu:t,open:n=!1,children:s,dir:i,onOpenChange:a,modal:o=!0}=e,l=Ib(t),[c,d]=j.useState(null),h=j.useRef(!1),m=Rr(a),f=ru(i);return j.useEffect(()=>{const g=()=>{h.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>h.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),r.jsx(xz,{...l,children:r.jsx(eae,{scope:t,open:n,onOpenChange:m,content:c,onContentChange:d,children:r.jsx(tae,{scope:t,onClose:j.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:h,dir:f,modal:o,children:s})})})};cB.displayName=yg;var rae="MenuAnchor",Jk=j.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,i=Ib(n);return r.jsx($k,{...i,...s,ref:t})});Jk.displayName=rae;var eT="MenuPortal",[nae,dB]=nu(eT,{forceMount:void 0}),uB=e=>{const{__scopeMenu:t,forceMount:n,children:s,container:i}=e,a=su(eT,t);return r.jsx(nae,{scope:t,forceMount:n,children:r.jsx(On,{present:n||a.open,children:r.jsx(fg,{asChild:!0,container:i,children:s})})})};uB.displayName=eT;var Ai="MenuContent",[sae,tT]=nu(Ai),hB=j.forwardRef((e,t)=>{const n=dB(Ai,e.__scopeMenu),{forceMount:s=n.forceMount,...i}=e,a=su(Ai,e.__scopeMenu),o=jg(Ai,e.__scopeMenu);return r.jsx(Qp.Provider,{scope:e.__scopeMenu,children:r.jsx(On,{present:s||a.open,children:r.jsx(Qp.Slot,{scope:e.__scopeMenu,children:o.modal?r.jsx(iae,{...i,ref:t}):r.jsx(aae,{...i,ref:t})})})})}),iae=j.forwardRef((e,t)=>{const n=su(Ai,e.__scopeMenu),s=j.useRef(null),i=St(t,s);return j.useEffect(()=>{const a=s.current;if(a)return Qk(a)},[]),r.jsx(rT,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Fe(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),aae=j.forwardRef((e,t)=>{const n=su(Ai,e.__scopeMenu);return r.jsx(rT,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),oae=Od("MenuContent.ScrollLock"),rT=j.forwardRef((e,t)=>{const{__scopeMenu:n,loop:s=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:m,onInteractOutside:f,onDismiss:g,disableOutsideScroll:x,...p}=e,y=su(Ai,n),b=jg(Ai,n),w=Ib(n),N=lB(n),S=Qie(n),[P,C]=j.useState(null),k=j.useRef(null),O=St(t,k,y.onContentChange),I=j.useRef(0),T=j.useRef(""),E=j.useRef(0),D=j.useRef(null),B=j.useRef("right"),M=j.useRef(0),U=x?Db:j.Fragment,H=x?{as:oae,allowPinchZoom:!0}:void 0,K=V=>{var Ee,We;const z=T.current+V,q=S().filter(Se=>!Se.disabled),J=document.activeElement,pe=(Ee=q.find(Se=>Se.ref.current===J))==null?void 0:Ee.textValue,ye=q.map(Se=>Se.textValue),Ne=yae(ye,z,pe),ke=(We=q.find(Se=>Se.textValue===Ne))==null?void 0:We.ref.current;(function Se(Me){T.current=Me,window.clearTimeout(I.current),Me!==""&&(I.current=window.setTimeout(()=>Se(""),1e3))})(z),ke&&setTimeout(()=>ke.focus())};j.useEffect(()=>()=>window.clearTimeout(I.current),[]),Zk();const W=j.useCallback(V=>{var q,J;return B.current===((q=D.current)==null?void 0:q.side)&&bae(V,(J=D.current)==null?void 0:J.area)},[]);return r.jsx(sae,{scope:n,searchRef:T,onItemEnter:j.useCallback(V=>{W(V)&&V.preventDefault()},[W]),onItemLeave:j.useCallback(V=>{var z;W(V)||((z=k.current)==null||z.focus(),C(null))},[W]),onTriggerLeave:j.useCallback(V=>{W(V)&&V.preventDefault()},[W]),pointerGraceTimerRef:E,onPointerGraceIntentChange:j.useCallback(V=>{D.current=V},[]),children:r.jsx(U,{...H,children:r.jsx(Eb,{asChild:!0,trapped:i,onMountAutoFocus:Fe(a,V=>{var z;V.preventDefault(),(z=k.current)==null||z.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:r.jsx(Tm,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:m,onInteractOutside:f,onDismiss:g,children:r.jsx(Yk,{asChild:!0,...N,dir:b.dir,orientation:"vertical",loop:s,currentTabStopId:P,onCurrentTabStopIdChange:C,onEntryFocus:Fe(c,V=>{b.isUsingKeyboardRef.current||V.preventDefault()}),preventScrollOnEntryFocus:!0,children:r.jsx(Fk,{role:"menu","aria-orientation":"vertical","data-state":kB(y.open),"data-radix-menu-content":"",dir:b.dir,...w,...p,ref:O,style:{outline:"none",...p.style},onKeyDown:Fe(p.onKeyDown,V=>{const q=V.target.closest("[data-radix-menu-content]")===V.currentTarget,J=V.ctrlKey||V.altKey||V.metaKey,pe=V.key.length===1;q&&(V.key==="Tab"&&V.preventDefault(),!J&&pe&&K(V.key));const ye=k.current;if(V.target!==ye||!Zie.includes(V.key))return;V.preventDefault();const ke=S().filter(Ee=>!Ee.disabled).map(Ee=>Ee.ref.current);aB.includes(V.key)&&ke.reverse(),gae(ke)}),onBlur:Fe(e.onBlur,V=>{V.currentTarget.contains(V.target)||(window.clearTimeout(I.current),T.current="")}),onPointerMove:Fe(e.onPointerMove,Jp(V=>{const z=V.target,q=M.current!==V.clientX;if(V.currentTarget.contains(z)&&q){const J=V.clientX>M.current?"right":"left";B.current=J,M.current=V.clientX}}))})})})})})})});hB.displayName=Ai;var lae="MenuGroup",nT=j.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return r.jsx(Qe.div,{role:"group",...s,ref:t})});nT.displayName=lae;var cae="MenuLabel",mB=j.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return r.jsx(Qe.div,{...s,ref:t})});mB.displayName=cae;var y0="MenuItem",ZM="menu.itemSelect",Lb=j.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:s,...i}=e,a=j.useRef(null),o=jg(y0,e.__scopeMenu),l=tT(y0,e.__scopeMenu),c=St(t,a),d=j.useRef(!1),h=()=>{const m=a.current;if(!n&&m){const f=new CustomEvent(ZM,{bubbles:!0,cancelable:!0});m.addEventListener(ZM,g=>s==null?void 0:s(g),{once:!0}),bk(m,f),f.defaultPrevented?d.current=!1:o.onClose()}};return r.jsx(fB,{...i,ref:c,disabled:n,onClick:Fe(e.onClick,h),onPointerDown:m=>{var f;(f=e.onPointerDown)==null||f.call(e,m),d.current=!0},onPointerUp:Fe(e.onPointerUp,m=>{var f;d.current||(f=m.currentTarget)==null||f.click()}),onKeyDown:Fe(e.onKeyDown,m=>{const f=l.searchRef.current!=="";n||f&&m.key===" "||G_.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});Lb.displayName=y0;var fB=j.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:s=!1,textValue:i,...a}=e,o=tT(y0,n),l=lB(n),c=j.useRef(null),d=St(t,c),[h,m]=j.useState(!1),[f,g]=j.useState("");return j.useEffect(()=>{const x=c.current;x&&g((x.textContent??"").trim())},[a.children]),r.jsx(Qp.ItemSlot,{scope:n,disabled:s,textValue:i??f,children:r.jsx(Xk,{asChild:!0,...l,focusable:!s,children:r.jsx(Qe.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...a,ref:d,onPointerMove:Fe(e.onPointerMove,Jp(x=>{s?o.onItemLeave(x):(o.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Fe(e.onPointerLeave,Jp(x=>o.onItemLeave(x))),onFocus:Fe(e.onFocus,()=>m(!0)),onBlur:Fe(e.onBlur,()=>m(!1))})})})}),dae="MenuCheckboxItem",pB=j.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:s,...i}=e;return r.jsx(jB,{scope:e.__scopeMenu,checked:n,children:r.jsx(Lb,{role:"menuitemcheckbox","aria-checked":j0(n)?"mixed":n,...i,ref:t,"data-state":iT(n),onSelect:Fe(i.onSelect,()=>s==null?void 0:s(j0(n)?!0:!n),{checkForDefaultPrevented:!1})})})});pB.displayName=dae;var xB="MenuRadioGroup",[uae,hae]=nu(xB,{value:void 0,onValueChange:()=>{}}),gB=j.forwardRef((e,t)=>{const{value:n,onValueChange:s,...i}=e,a=Rr(s);return r.jsx(uae,{scope:e.__scopeMenu,value:n,onValueChange:a,children:r.jsx(nT,{...i,ref:t})})});gB.displayName=xB;var vB="MenuRadioItem",yB=j.forwardRef((e,t)=>{const{value:n,...s}=e,i=hae(vB,e.__scopeMenu),a=n===i.value;return r.jsx(jB,{scope:e.__scopeMenu,checked:a,children:r.jsx(Lb,{role:"menuitemradio","aria-checked":a,...s,ref:t,"data-state":iT(a),onSelect:Fe(s.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,n)},{checkForDefaultPrevented:!1})})})});yB.displayName=vB;var sT="MenuItemIndicator",[jB,mae]=nu(sT,{checked:!1}),bB=j.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:s,...i}=e,a=mae(sT,n);return r.jsx(On,{present:s||j0(a.checked)||a.checked===!0,children:r.jsx(Qe.span,{...i,ref:t,"data-state":iT(a.checked)})})});bB.displayName=sT;var fae="MenuSeparator",wB=j.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return r.jsx(Qe.div,{role:"separator","aria-orientation":"horizontal",...s,ref:t})});wB.displayName=fae;var pae="MenuArrow",NB=j.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,i=Ib(n);return r.jsx(zk,{...i,...s,ref:t})});NB.displayName=pae;var xae="MenuSub",[LUe,SB]=nu(xae),Kf="MenuSubTrigger",_B=j.forwardRef((e,t)=>{const n=su(Kf,e.__scopeMenu),s=jg(Kf,e.__scopeMenu),i=SB(Kf,e.__scopeMenu),a=tT(Kf,e.__scopeMenu),o=j.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,d={__scopeMenu:e.__scopeMenu},h=j.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return j.useEffect(()=>h,[h]),j.useEffect(()=>{const m=l.current;return()=>{window.clearTimeout(m),c(null)}},[l,c]),r.jsx(Jk,{asChild:!0,...d,children:r.jsx(fB,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":kB(n.open),...e,ref:yb(t,i.onTriggerChange),onClick:m=>{var f;(f=e.onClick)==null||f.call(e,m),!(e.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Fe(e.onPointerMove,Jp(m=>{a.onItemEnter(m),!m.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),h()},100))})),onPointerLeave:Fe(e.onPointerLeave,Jp(m=>{var g,x;h();const f=(g=n.content)==null?void 0:g.getBoundingClientRect();if(f){const p=(x=n.content)==null?void 0:x.dataset.side,y=p==="right",b=y?-5:5,w=f[y?"left":"right"],N=f[y?"right":"left"];a.onPointerGraceIntentChange({area:[{x:m.clientX+b,y:m.clientY},{x:w,y:f.top},{x:N,y:f.top},{x:N,y:f.bottom},{x:w,y:f.bottom}],side:p}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(m),m.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Fe(e.onKeyDown,m=>{var g;const f=a.searchRef.current!=="";e.disabled||f&&m.key===" "||Yie[s.dir].includes(m.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),m.preventDefault())})})})});_B.displayName=Kf;var PB="MenuSubContent",CB=j.forwardRef((e,t)=>{const n=dB(Ai,e.__scopeMenu),{forceMount:s=n.forceMount,...i}=e,a=su(Ai,e.__scopeMenu),o=jg(Ai,e.__scopeMenu),l=SB(PB,e.__scopeMenu),c=j.useRef(null),d=St(t,c);return r.jsx(Qp.Provider,{scope:e.__scopeMenu,children:r.jsx(On,{present:s||a.open,children:r.jsx(Qp.Slot,{scope:e.__scopeMenu,children:r.jsx(rT,{id:l.contentId,"aria-labelledby":l.triggerId,...i,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var m;o.isUsingKeyboardRef.current&&((m=c.current)==null||m.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:Fe(e.onFocusOutside,h=>{h.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Fe(e.onEscapeKeyDown,h=>{o.onClose(),h.preventDefault()}),onKeyDown:Fe(e.onKeyDown,h=>{var g;const m=h.currentTarget.contains(h.target),f=Xie[o.dir].includes(h.key);m&&f&&(a.onOpenChange(!1),(g=l.trigger)==null||g.focus(),h.preventDefault())})})})})})});CB.displayName=PB;function kB(e){return e?"open":"closed"}function j0(e){return e==="indeterminate"}function iT(e){return j0(e)?"indeterminate":e?"checked":"unchecked"}function gae(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function vae(e,t){return e.map((n,s)=>e[(t+s)%e.length])}function yae(e,t,n){const i=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let o=vae(e,Math.max(a,0));i.length===1&&(o=o.filter(d=>d!==n));const c=o.find(d=>d.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function jae(e,t){const{x:n,y:s}=e;let i=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a].x,c=t[a].y,d=t[o].x,h=t[o].y;c>s!=h>s&&n<(d-l)*(s-c)/(h-c)+l&&(i=!i)}return i}function bae(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return jae(n,t)}function Jp(e){return t=>t.pointerType==="mouse"?e(t):void 0}var wae=cB,Nae=Jk,Sae=uB,_ae=hB,Pae=nT,Cae=mB,kae=Lb,Tae=pB,Aae=gB,Eae=yB,Oae=bB,Mae=wB,Dae=NB,Iae=_B,Lae=CB,aT="DropdownMenu",[Rae,RUe]=xn(aT,[oB]),vs=oB(),[$ae,TB]=Rae(aT),AB=e=>{const{__scopeDropdownMenu:t,children:n,dir:s,open:i,defaultOpen:a,onOpenChange:o,modal:l=!0}=e,c=vs(t),d=j.useRef(null),[h=!1,m]=Li({prop:i,defaultProp:a,onChange:o});return r.jsx($ae,{scope:t,triggerId:ca(),triggerRef:d,contentId:ca(),open:h,onOpenChange:m,onOpenToggle:j.useCallback(()=>m(f=>!f),[m]),modal:l,children:r.jsx(wae,{...c,open:h,onOpenChange:m,dir:s,modal:l,children:n})})};AB.displayName=aT;var EB="DropdownMenuTrigger",OB=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:s=!1,...i}=e,a=TB(EB,n),o=vs(n);return r.jsx(Nae,{asChild:!0,...o,children:r.jsx(Qe.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...i,ref:yb(t,a.triggerRef),onPointerDown:Fe(e.onPointerDown,l=>{!s&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:Fe(e.onKeyDown,l=>{s||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});OB.displayName=EB;var Fae="DropdownMenuPortal",MB=e=>{const{__scopeDropdownMenu:t,...n}=e,s=vs(t);return r.jsx(Sae,{...s,...n})};MB.displayName=Fae;var DB="DropdownMenuContent",IB=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=TB(DB,n),a=vs(n),o=j.useRef(!1);return r.jsx(_ae,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...s,ref:t,onCloseAutoFocus:Fe(e.onCloseAutoFocus,l=>{var c;o.current||(c=i.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:Fe(e.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,h=c.button===2||d;(!i.modal||h)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});IB.displayName=DB;var zae="DropdownMenuGroup",Bae=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=vs(n);return r.jsx(Pae,{...i,...s,ref:t})});Bae.displayName=zae;var Vae="DropdownMenuLabel",LB=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=vs(n);return r.jsx(Cae,{...i,...s,ref:t})});LB.displayName=Vae;var Uae="DropdownMenuItem",RB=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=vs(n);return r.jsx(kae,{...i,...s,ref:t})});RB.displayName=Uae;var Wae="DropdownMenuCheckboxItem",$B=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=vs(n);return r.jsx(Tae,{...i,...s,ref:t})});$B.displayName=Wae;var Hae="DropdownMenuRadioGroup",qae=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=vs(n);return r.jsx(Aae,{...i,...s,ref:t})});qae.displayName=Hae;var Kae="DropdownMenuRadioItem",FB=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=vs(n);return r.jsx(Eae,{...i,...s,ref:t})});FB.displayName=Kae;var Gae="DropdownMenuItemIndicator",zB=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=vs(n);return r.jsx(Oae,{...i,...s,ref:t})});zB.displayName=Gae;var Zae="DropdownMenuSeparator",BB=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=vs(n);return r.jsx(Mae,{...i,...s,ref:t})});BB.displayName=Zae;var Yae="DropdownMenuArrow",Xae=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=vs(n);return r.jsx(Dae,{...i,...s,ref:t})});Xae.displayName=Yae;var Qae="DropdownMenuSubTrigger",VB=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=vs(n);return r.jsx(Iae,{...i,...s,ref:t})});VB.displayName=Qae;var Jae="DropdownMenuSubContent",UB=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=vs(n);return r.jsx(Lae,{...i,...s,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});UB.displayName=Jae;var eoe=AB,toe=OB,roe=MB,WB=IB,HB=LB,qB=RB,KB=$B,GB=FB,ZB=zB,YB=BB,XB=VB,QB=UB;const oT=eoe,lT=toe,noe=j.forwardRef(({className:e,inset:t,children:n,...s},i)=>r.jsxs(XB,{ref:i,className:Ve("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...s,children:[n,r.jsx(Wte,{className:"ml-auto"})]}));noe.displayName=XB.displayName;const soe=j.forwardRef(({className:e,...t},n)=>r.jsx(QB,{ref:n,className:Ve("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...t}));soe.displayName=QB.displayName;const Rb=j.forwardRef(({className:e,sideOffset:t=4,...n},s)=>r.jsx(roe,{children:r.jsx(WB,{ref:s,sideOffset:t,className:Ve("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...n})}));Rb.displayName=WB.displayName;const bi=j.forwardRef(({className:e,inset:t,...n},s)=>r.jsx(qB,{ref:s,className:Ve("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...n}));bi.displayName=qB.displayName;const ioe=j.forwardRef(({className:e,children:t,checked:n,...s},i)=>r.jsxs(KB,{ref:i,className:Ve("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...s,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(ZB,{children:r.jsx(Md,{className:"h-4 w-4"})})}),t]}));ioe.displayName=KB.displayName;const aoe=j.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(GB,{ref:s,className:Ve("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(ZB,{children:r.jsx(Ck,{className:"h-2 w-2 fill-current"})})}),t]}));aoe.displayName=GB.displayName;const ooe=j.forwardRef(({className:e,inset:t,...n},s)=>r.jsx(HB,{ref:s,className:Ve("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));ooe.displayName=HB.displayName;const Uh=j.forwardRef(({className:e,...t},n)=>r.jsx(YB,{ref:n,className:Ve("-mx-1 my-1 h-px bg-muted",e),...t}));Uh.displayName=YB.displayName;function loe(){const[e,t]=j.useState("default"),[n,s]=j.useState(!1),[i,a]=j.useState([]),[o,l]=j.useState(0),{user:c}=Gt(),{toast:d}=ft();j.useEffect(()=>{"Notification"in window&&(s(!0),t(Notification.permission))},[]);const h=async()=>{if(!n)return d({title:"Not Supported",description:"Your browser doesn't support notifications",variant:"destructive"}),!1;try{const y=await Notification.requestPermission();return t(y),y==="granted"?(d({title:"Notifications Enabled",description:"You'll now receive notifications for important updates"}),!0):(d({title:"Notifications Disabled",description:"You can enable notifications in your browser settings",variant:"destructive"}),!1)}catch(y){return console.error("Error requesting notification permission:",y),!1}},m=(y,b)=>{if(e==="granted"&&n){const w=new Notification(y,{icon:"/favicon.ico",badge:"/favicon.ico",...b});return setTimeout(()=>w.close(),5e3),w}return null},f=async()=>{if(c!=null&&c.id)try{const y=await fetch(`/api/notifications/user/${c.id}`);if(y.ok){const b=await y.json(),w=i.map(S=>S.id),N=b.filter(S=>!w.includes(S.id)&&!S.isRead);N.length>0&&N.forEach(S=>{if(S.title.includes("Approved")||S.message.includes("approved")){try{const C=new Audio("/notification.mp3");C.volume=.8,C.play().then(()=>{console.log("Approval notification sound played"),setTimeout(()=>{const k=new Audio("/notification.mp3");k.volume=.5,k.play().catch(()=>{console.log("Could not play celebratory sound")})},500)}).catch(()=>{console.log("Could not play approval notification sound")})}catch(C){console.log("Error playing approval notification sound:",C)}d({title:" "+S.title,description:S.message,duration:8e3})}}),a(b),l(b.filter(S=>!S.isRead).length)}}catch(y){console.error("Error fetching notifications:",y)}},g=async y=>{try{(await fetch(`/api/notifications/${y}/read`,{method:"PUT"})).ok&&(a(w=>w.map(N=>N.id===y?{...N,isRead:!0}:N)),l(w=>Math.max(0,w-1)))}catch(b){console.error("Error marking notification as read:",b)}},x=async()=>{if(c!=null&&c.id)try{(await fetch(`/api/notifications/user/${c.id}/read-all`,{method:"PUT"})).ok&&(a(b=>b.map(w=>({...w,isRead:!0}))),l(0))}catch(y){console.error("Error marking all notifications as read:",y)}};return j.useEffect(()=>{if(!(c!=null&&c.id))return;f();const y=setInterval(f,3e4);return()=>clearInterval(y)},[c==null?void 0:c.id]),{isSupported:n,permission:e,notifications:i,unreadCount:o,requestPermission:h,showNotification:m,showNewNotification:y=>{var b;a(w=>[y,...w]),l(w=>w+1);try{const w=new Audio("/notification.mp3"),N=y.title.includes("Approved")||y.message.includes("approved")||y.data&&((b=JSON.parse(y.data))==null?void 0:b.playSound);w.volume=N?.8:.6,w.play().then(()=>{console.log("Notification sound played successfully"),N&&setTimeout(()=>{const S=new Audio("/notification.mp3");S.volume=.5,S.play().catch(()=>{console.log("Could not play celebratory sound")})},500)}).catch(()=>{console.log("Could not play notification sound")})}catch(w){console.log("Error playing notification sound:",w)}if(m(y.title,{body:y.message,tag:`notification-${y.id}`}),window.innerWidth>=768){const w=y.title.includes("Approved");d({title:y.title,description:y.message,duration:w?8e3:5e3})}},fetchNotifications:f,markAsRead:g,markAllAsRead:x}}function gr(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function dc(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const JB=6048e5,coe=864e5,zv=43200,YM=1440;let doe={};function bg(){return doe}function ex(e,t){var l,c,d,h;const n=bg(),s=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,i=gr(e),a=i.getDay(),o=(a<s?7:0)+a-s;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function b0(e){return ex(e,{weekStartsOn:1})}function eV(e){const t=gr(e),n=t.getFullYear(),s=dc(e,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const i=b0(s),a=dc(e,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=b0(a);return t.getTime()>=i.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function XM(e){const t=gr(e);return t.setHours(0,0,0,0),t}function w0(e){const t=gr(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function uoe(e,t){const n=XM(e),s=XM(t),i=+n-w0(n),a=+s-w0(s);return Math.round((i-a)/coe)}function hoe(e){const t=eV(e),n=dc(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),b0(n)}function ky(e,t){const n=gr(e),s=gr(t),i=n.getTime()-s.getTime();return i<0?-1:i>0?1:i}function moe(e){return dc(e,Date.now())}function foe(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function poe(e){if(!foe(e)&&typeof e!="number")return!1;const t=gr(e);return!isNaN(Number(t))}function xoe(e,t){const n=gr(e),s=gr(t),i=n.getFullYear()-s.getFullYear(),a=n.getMonth()-s.getMonth();return i*12+a}function goe(e){return t=>{const s=(e?Math[e]:Math.trunc)(t);return s===0?0:s}}function voe(e,t){return+gr(e)-+gr(t)}function yoe(e){const t=gr(e);return t.setHours(23,59,59,999),t}function joe(e){const t=gr(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function boe(e){const t=gr(e);return+yoe(t)==+joe(t)}function woe(e,t){const n=gr(e),s=gr(t),i=ky(n,s),a=Math.abs(xoe(n,s));let o;if(a<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*a);let l=ky(n,s)===-i;boe(gr(e))&&a===1&&ky(e,s)===1&&(l=!1),o=i*(a-Number(l))}return o===0?0:o}function Noe(e,t,n){const s=voe(e,t)/1e3;return goe(n==null?void 0:n.roundingMethod)(s)}function Soe(e){const t=gr(e),n=dc(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}const _oe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Poe=(e,t,n)=>{let s;const i=_oe[e];return typeof i=="string"?s=i:t===1?s=i.one:s=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function p1(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Coe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},koe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Toe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Aoe={date:p1({formats:Coe,defaultWidth:"full"}),time:p1({formats:koe,defaultWidth:"full"}),dateTime:p1({formats:Toe,defaultWidth:"full"})},Eoe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Ooe=(e,t,n,s)=>Eoe[e];function Sf(e){return(t,n)=>{const s=n!=null&&n.context?String(n.context):"standalone";let i;if(s==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;i=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;i=e.values[l]||e.values[o]}const a=e.argumentCallback?e.argumentCallback(t):t;return i[a]}}const Moe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Doe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ioe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Loe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Roe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},$oe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Foe=(e,t)=>{const n=Number(e),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},zoe={ordinalNumber:Foe,era:Sf({values:Moe,defaultWidth:"wide"}),quarter:Sf({values:Doe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Sf({values:Ioe,defaultWidth:"wide"}),day:Sf({values:Loe,defaultWidth:"wide"}),dayPeriod:Sf({values:Roe,defaultWidth:"wide",formattingValues:$oe,defaultFormattingWidth:"wide"})};function _f(e){return(t,n={})=>{const s=n.width,i=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],a=t.match(i);if(!a)return null;const o=a[0],l=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?Voe(l,m=>m.test(o)):Boe(l,m=>m.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;const h=t.slice(o.length);return{value:d,rest:h}}}function Boe(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Voe(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function Uoe(e){return(t,n={})=>{const s=t.match(e.matchPattern);if(!s)return null;const i=s[0],a=t.match(e.parsePattern);if(!a)return null;let o=e.valueCallback?e.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(i.length);return{value:o,rest:l}}}const Woe=/^(\d+)(th|st|nd|rd)?/i,Hoe=/\d+/i,qoe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Koe={any:[/^b/i,/^(a|c)/i]},Goe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Zoe={any:[/1/i,/2/i,/3/i,/4/i]},Yoe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Xoe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Qoe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Joe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ele={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},tle={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},rle={ordinalNumber:Uoe({matchPattern:Woe,parsePattern:Hoe,valueCallback:e=>parseInt(e,10)}),era:_f({matchPatterns:qoe,defaultMatchWidth:"wide",parsePatterns:Koe,defaultParseWidth:"any"}),quarter:_f({matchPatterns:Goe,defaultMatchWidth:"wide",parsePatterns:Zoe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:_f({matchPatterns:Yoe,defaultMatchWidth:"wide",parsePatterns:Xoe,defaultParseWidth:"any"}),day:_f({matchPatterns:Qoe,defaultMatchWidth:"wide",parsePatterns:Joe,defaultParseWidth:"any"}),dayPeriod:_f({matchPatterns:ele,defaultMatchWidth:"any",parsePatterns:tle,defaultParseWidth:"any"})},tV={code:"en-US",formatDistance:Poe,formatLong:Aoe,formatRelative:Ooe,localize:zoe,match:rle,options:{weekStartsOn:0,firstWeekContainsDate:1}};function nle(e){const t=gr(e);return uoe(t,Soe(t))+1}function sle(e){const t=gr(e),n=+b0(t)-+hoe(t);return Math.round(n/JB)+1}function rV(e,t){var h,m,f,g;const n=gr(e),s=n.getFullYear(),i=bg(),a=(t==null?void 0:t.firstWeekContainsDate)??((m=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??i.firstWeekContainsDate??((g=(f=i.locale)==null?void 0:f.options)==null?void 0:g.firstWeekContainsDate)??1,o=dc(e,0);o.setFullYear(s+1,0,a),o.setHours(0,0,0,0);const l=ex(o,t),c=dc(e,0);c.setFullYear(s,0,a),c.setHours(0,0,0,0);const d=ex(c,t);return n.getTime()>=l.getTime()?s+1:n.getTime()>=d.getTime()?s:s-1}function ile(e,t){var l,c,d,h;const n=bg(),s=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,i=rV(e,t),a=dc(e,0);return a.setFullYear(i,0,s),a.setHours(0,0,0,0),ex(a,t)}function ale(e,t){const n=gr(e),s=+ex(n,t)-+ile(n,t);return Math.round(s/JB)+1}function dr(e,t){const n=e<0?"-":"",s=Math.abs(e).toString().padStart(t,"0");return n+s}const hl={y(e,t){const n=e.getFullYear(),s=n>0?n:1-n;return dr(t==="yy"?s%100:s,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):dr(n+1,2)},d(e,t){return dr(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return dr(e.getHours()%12||12,t.length)},H(e,t){return dr(e.getHours(),t.length)},m(e,t){return dr(e.getMinutes(),t.length)},s(e,t){return dr(e.getSeconds(),t.length)},S(e,t){const n=t.length,s=e.getMilliseconds(),i=Math.trunc(s*Math.pow(10,n-3));return dr(i,t.length)}},Su={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},QM={G:function(e,t,n){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const s=e.getFullYear(),i=s>0?s:1-s;return n.ordinalNumber(i,{unit:"year"})}return hl.y(e,t)},Y:function(e,t,n,s){const i=rV(e,s),a=i>0?i:1-i;if(t==="YY"){const o=a%100;return dr(o,2)}return t==="Yo"?n.ordinalNumber(a,{unit:"year"}):dr(a,t.length)},R:function(e,t){const n=eV(e);return dr(n,t.length)},u:function(e,t){const n=e.getFullYear();return dr(n,t.length)},Q:function(e,t,n){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return dr(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,n){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return dr(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,n){const s=e.getMonth();switch(t){case"M":case"MM":return hl.M(e,t);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,n){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return dr(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,n,s){const i=ale(e,s);return t==="wo"?n.ordinalNumber(i,{unit:"week"}):dr(i,t.length)},I:function(e,t,n){const s=sle(e);return t==="Io"?n.ordinalNumber(s,{unit:"week"}):dr(s,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):hl.d(e,t)},D:function(e,t,n){const s=nle(e);return t==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):dr(s,t.length)},E:function(e,t,n){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,n,s){const i=e.getDay(),a=(i-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return dr(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,s){const i=e.getDay(),a=(i-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return dr(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const s=e.getDay(),i=s===0?7:s;switch(t){case"i":return String(i);case"ii":return dr(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,n){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){const s=e.getHours();let i;switch(s===12?i=Su.noon:s===0?i=Su.midnight:i=s/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const s=e.getHours();let i;switch(s>=17?i=Su.evening:s>=12?i=Su.afternoon:s>=4?i=Su.morning:i=Su.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let s=e.getHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return hl.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):hl.H(e,t)},K:function(e,t,n){const s=e.getHours()%12;return t==="Ko"?n.ordinalNumber(s,{unit:"hour"}):dr(s,t.length)},k:function(e,t,n){let s=e.getHours();return s===0&&(s=24),t==="ko"?n.ordinalNumber(s,{unit:"hour"}):dr(s,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):hl.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):hl.s(e,t)},S:function(e,t){return hl.S(e,t)},X:function(e,t,n){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return eD(s);case"XXXX":case"XX":return Uc(s);case"XXXXX":case"XXX":default:return Uc(s,":")}},x:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"x":return eD(s);case"xxxx":case"xx":return Uc(s);case"xxxxx":case"xxx":default:return Uc(s,":")}},O:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+JM(s,":");case"OOOO":default:return"GMT"+Uc(s,":")}},z:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+JM(s,":");case"zzzz":default:return"GMT"+Uc(s,":")}},t:function(e,t,n){const s=Math.trunc(e.getTime()/1e3);return dr(s,t.length)},T:function(e,t,n){const s=e.getTime();return dr(s,t.length)}};function JM(e,t=""){const n=e>0?"-":"+",s=Math.abs(e),i=Math.trunc(s/60),a=s%60;return a===0?n+String(i):n+String(i)+t+dr(a,2)}function eD(e,t){return e%60===0?(e>0?"-":"+")+dr(Math.abs(e)/60,2):Uc(e,t)}function Uc(e,t=""){const n=e>0?"-":"+",s=Math.abs(e),i=dr(Math.trunc(s/60),2),a=dr(s%60,2);return n+i+t+a}const tD=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},nV=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},ole=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],s=n[1],i=n[2];if(!i)return tD(e,t);let a;switch(s){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",tD(s,t)).replace("{{time}}",nV(i,t))},lle={p:nV,P:ole},cle=/^D+$/,dle=/^Y+$/,ule=["D","DD","YY","YYYY"];function hle(e){return cle.test(e)}function mle(e){return dle.test(e)}function fle(e,t,n){const s=ple(e,t,n);if(console.warn(s),ule.includes(e))throw new RangeError(s)}function ple(e,t,n){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const xle=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,gle=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,vle=/^'([^]*?)'?$/,yle=/''/g,jle=/[a-zA-Z]/;function oo(e,t,n){var h,m,f,g;const s=bg(),i=s.locale??tV,a=s.firstWeekContainsDate??((m=(h=s.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,o=s.weekStartsOn??((g=(f=s.locale)==null?void 0:f.options)==null?void 0:g.weekStartsOn)??0,l=gr(e);if(!poe(l))throw new RangeError("Invalid time value");let c=t.match(gle).map(x=>{const p=x[0];if(p==="p"||p==="P"){const y=lle[p];return y(x,i.formatLong)}return x}).join("").match(xle).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const p=x[0];if(p==="'")return{isToken:!1,value:ble(x)};if(QM[p])return{isToken:!0,value:x};if(p.match(jle))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:x}});i.localize.preprocessor&&(c=i.localize.preprocessor(l,c));const d={firstWeekContainsDate:a,weekStartsOn:o,locale:i};return c.map(x=>{if(!x.isToken)return x.value;const p=x.value;(mle(p)||hle(p))&&fle(p,t,String(e));const y=QM[p[0]];return y(l,p,i.localize,d)}).join("")}function ble(e){const t=e.match(vle);return t?t[1].replace(yle,"'"):e}function wle(e,t,n){const s=bg(),i=(n==null?void 0:n.locale)??s.locale??tV,a=2520,o=ky(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o});let c,d;o>0?(c=gr(t),d=gr(e)):(c=gr(e),d=gr(t));const h=Noe(d,c),m=(w0(d)-w0(c))/1e3,f=Math.round((h-m)/60);let g;if(f<2)return n!=null&&n.includeSeconds?h<5?i.formatDistance("lessThanXSeconds",5,l):h<10?i.formatDistance("lessThanXSeconds",10,l):h<20?i.formatDistance("lessThanXSeconds",20,l):h<40?i.formatDistance("halfAMinute",0,l):h<60?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",1,l):f===0?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",f,l);if(f<45)return i.formatDistance("xMinutes",f,l);if(f<90)return i.formatDistance("aboutXHours",1,l);if(f<YM){const x=Math.round(f/60);return i.formatDistance("aboutXHours",x,l)}else{if(f<a)return i.formatDistance("xDays",1,l);if(f<zv){const x=Math.round(f/YM);return i.formatDistance("xDays",x,l)}else if(f<zv*2)return g=Math.round(f/zv),i.formatDistance("aboutXMonths",g,l)}if(g=woe(d,c),g<12){const x=Math.round(f/zv);return i.formatDistance("xMonths",x,l)}else{const x=g%12,p=Math.trunc(g/12);return x<3?i.formatDistance("aboutXYears",p,l):x<9?i.formatDistance("overXYears",p,l):i.formatDistance("almostXYears",p+1,l)}}function Nle(e,t){return wle(e,moe(e),t)}function $b(){const[e,t]=j.useState(!1),{notifications:n,unreadCount:s,permission:i,requestPermission:a,markAsRead:o,markAllAsRead:l}=loe(),c=(m,f)=>{f||o(m)},d=m=>{switch(m){case"order":return"";case"delivery":return"";case"payment":return"";case"product":return"";case"store":return"";case"system":return"";default:return""}},h=m=>{switch(m){case"order":return"bg-blue-100 text-blue-800";case"delivery":return"bg-green-100 text-green-800";case"payment":return"bg-yellow-100 text-yellow-800";case"product":return"bg-purple-100 text-purple-800";case"store":return"bg-orange-100 text-orange-800";case"system":return"bg-gray-100 text-gray-800";default:return"bg-blue-100 text-blue-800"}};return r.jsxs("div",{className:"relative",children:[i==="default"&&r.jsx(F,{variant:"outline",size:"sm",onClick:a,className:"mr-2 text-xs",children:"Enable Notifications"}),r.jsxs(oT,{open:e,onOpenChange:t,children:[r.jsx(lT,{asChild:!0,children:r.jsxs(F,{variant:"ghost",size:"sm",className:"relative",children:[r.jsx(Xt,{className:"h-5 w-5"}),s>0&&r.jsx(le,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 text-xs flex items-center justify-center",children:s>99?"99+":s})]})}),r.jsxs(Rb,{align:"end",className:"w-80",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[r.jsx("h3",{className:"font-semibold",children:"Notifications"}),s>0&&r.jsxs(F,{variant:"ghost",size:"sm",onClick:l,className:"text-xs",children:[r.jsx(Ute,{className:"h-4 w-4 mr-1"}),"Mark all read"]})]}),r.jsx(Uh,{}),r.jsx(Gk,{className:"h-96",children:n.length===0?r.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No notifications yet"}):n.map(m=>r.jsx(bi,{className:`p-3 cursor-pointer border-l-4 ${m.isRead?"border-transparent bg-background":"border-primary bg-primary/5"}`,onClick:()=>c(m.id,m.isRead),children:r.jsxs("div",{className:"flex items-start space-x-3 w-full",children:[r.jsx("div",{className:`p-1 rounded-full text-sm ${h(m.type)}`,children:d(m.type)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:`text-sm font-medium truncate ${m.isRead?"text-muted-foreground":"text-foreground"}`,children:m.title}),!m.isRead&&r.jsx("div",{className:"h-2 w-2 bg-primary rounded-full ml-2 flex-shrink-0"})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:m.message}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:(()=>{try{if(!m.createdAt)return"Just now";const f=new Date(m.createdAt);return isNaN(f.getTime())?"Recently":Nle(f,{addSuffix:!0})}catch{return"Recently"}})()})]})]})},m.id))}),n.length>0&&r.jsxs(r.Fragment,{children:[r.jsx(Uh,{}),r.jsx("div",{className:"p-2",children:r.jsx(F,{variant:"ghost",className:"w-full text-xs",children:"View all notifications"})})]})]})]})]})}function Sle(){const[,e]=Jr(),[t,n]=j.useState(!1),{user:s,logout:i}=Gt(),{cartItems:a}=Nc(),{mode:o,setMode:l}=Ja(),c=pn(),{toast:d}=ft(),h=(a==null?void 0:a.length)||0,{data:m=[]}=Re({queryKey:[`/api/notifications/user/${s==null?void 0:s.id}`],enabled:!!(s!=null&&s.id),refetchInterval:3e4}),f=j.useMemo(()=>m.filter(P=>!P.isRead).length,[m]),g=pt({mutationFn:async P=>{const C=await fetch(`/api/notifications/${P}/read`,{method:"PUT",credentials:"include"});if(!C.ok)throw new Error("Failed to mark as read");return C.json()},onSuccess:()=>{c.invalidateQueries({queryKey:[`/api/notifications/user/${s==null?void 0:s.id}`]}),d({title:"Notification marked as read",description:"The notification has been marked as read successfully."})}}),x=pt({mutationFn:async()=>{const P=await fetch(`/api/notifications/user/${s==null?void 0:s.id}/read-all`,{method:"PUT",credentials:"include"});if(!P.ok)throw new Error("Failed to mark all as read");return P.json()},onSuccess:()=>{c.invalidateQueries({queryKey:[`/api/notifications/user/${s==null?void 0:s.id}`]}),d({title:"All notifications marked as read",description:"All notifications have been marked as read successfully."})}}),p=P=>{g.mutate(P)},y=()=>{x.mutate()},b=P=>{const C=new Date,k=new Date(P),O=Math.floor((C.getTime()-k.getTime())/1e3);return O<60?"Just now":O<3600?`${Math.floor(O/60)}m ago`:O<86400?`${Math.floor(O/3600)}h ago`:`${Math.floor(O/86400)}d ago`},w=P=>{switch(P){case"order":return"";case"delivery":return"";case"payment":return"";case"product":return"";case"store":return"";case"system":return"";default:return""}},N=P=>{switch(P){case"order":return"bg-blue-100 text-blue-800";case"delivery":return"bg-green-100 text-green-800";case"payment":return"bg-yellow-100 text-yellow-800";case"product":return"bg-purple-100 text-purple-800";case"store":return"bg-orange-100 text-orange-800";case"system":return"bg-gray-100 text-gray-800";default:return"bg-blue-100 text-blue-800"}},S=()=>{i(),e("/")};return r.jsxs("nav",{className:"bg-primary text-white shadow-lg sticky top-0 z-40",children:[r.jsxs("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:[r.jsxs("div",{className:"flex justify-between items-center h-12 sm:h-14",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Ae,{href:"/",className:"flex items-center space-x-1",children:o==="food"?r.jsx("img",{src:"/assets/icon1.png",alt:"Food Delivery",className:"h-8 w-auto rounded-lg"}):r.jsx("img",{src:"/assets/icon2.png",alt:"Siraha Bazaar",className:"h-8 w-auto rounded-lg"})}),(s==null?void 0:s.role)!=="shopkeeper"&&r.jsx("div",{className:"relative bg-white/10 backdrop-blur-sm rounded-lg p-1 border border-white/20",children:r.jsxs("div",{className:"flex",children:[r.jsxs("button",{onClick:()=>l("shopping"),className:`flex items-center space-x-1 px-3 py-1.5 rounded-md text-xs font-medium transition-all duration-200 ${o==="shopping"?"bg-white text-primary shadow-sm":"text-white/80 hover:text-white hover:bg-white/10"}`,children:[r.jsx(Wo,{className:"h-3.5 w-3.5"}),r.jsx("span",{children:"Shop"})]}),r.jsxs("button",{onClick:()=>l("food"),className:`flex items-center space-x-1 px-3 py-1.5 rounded-md text-xs font-medium transition-all duration-200 ${o==="food"?"bg-white text-primary shadow-sm":"text-white/80 hover:text-white hover:bg-white/10"}`,children:[r.jsx(Fh,{className:"h-3.5 w-3.5"}),r.jsx("span",{children:"Food"})]})]})})]}),r.jsx("div",{className:"hidden md:flex items-center space-x-6 flex-1 justify-center",children:(s==null?void 0:s.role)==="shopkeeper"?r.jsxs(r.Fragment,{children:[r.jsx(Tse,{}),r.jsxs(Ae,{href:"/seller/store",className:"flex items-center space-x-1 hover:text-accent transition-colors",children:[r.jsx(nr,{className:"h-4 w-4"}),r.jsx("span",{children:"Store"})]}),r.jsxs(Ae,{href:"/seller/orders",className:"flex items-center space-x-1 hover:text-accent transition-colors",children:[r.jsx(Bn,{className:"h-4 w-4"}),r.jsx("span",{children:"Orders"})]}),r.jsxs(Ae,{href:"/seller/inventory",className:"flex items-center space-x-1 hover:text-accent transition-colors",children:[r.jsx(rt,{className:"h-4 w-4"}),r.jsx("span",{children:"Inventory"})]}),r.jsxs(Ae,{href:"/seller/promotions",className:"flex items-center space-x-1 hover:text-accent transition-colors",children:[r.jsx(Kp,{className:"h-4 w-4"}),r.jsx("span",{children:"Promotions"})]}),r.jsxs(Ae,{href:"/account",className:"flex items-center space-x-1 hover:text-accent transition-colors",children:[r.jsx(Wr,{className:"h-4 w-4"}),r.jsx("span",{children:"Account"})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs(Ae,{href:"/",className:"flex items-center space-x-1 hover:text-accent transition-colors",children:[r.jsx(ti,{className:"h-4 w-4"}),r.jsx("span",{children:"Home"})]}),o==="shopping"?r.jsxs(r.Fragment,{children:[r.jsxs(Ae,{href:"/products",className:"flex items-center space-x-1 hover:text-accent transition-colors",children:[r.jsx(rt,{className:"h-4 w-4"}),r.jsx("span",{children:"Products"})]}),r.jsxs(Ae,{href:"/stores",className:"flex items-center space-x-1 hover:text-accent transition-colors",children:[r.jsx(nr,{className:"h-4 w-4"}),r.jsx("span",{children:"Stores"})]}),r.jsxs(Ae,{href:"/store-maps",className:"flex items-center space-x-1 hover:text-accent transition-colors",children:[r.jsx(Le,{className:"h-4 w-4"}),r.jsx("span",{children:"Store Map"})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs(Ae,{href:"/food-categories",className:"flex items-center space-x-1 hover:text-accent transition-colors",children:[r.jsx(Fh,{className:"h-4 w-4"}),r.jsx("span",{children:"Menu"})]}),r.jsxs(Ae,{href:"/quick-bites",className:"flex items-center space-x-1 hover:text-accent transition-colors",children:[r.jsx(Ta,{className:"h-4 w-4"}),r.jsx("span",{children:"Quick Bites"})]}),r.jsxs(Ae,{href:"/restaurants",className:"flex items-center space-x-1 hover:text-accent transition-colors",children:[r.jsx(nr,{className:"h-4 w-4"}),r.jsx("span",{children:"Restaurants"})]}),r.jsxs(Ae,{href:"/restaurant-maps",className:"flex items-center space-x-1 hover:text-accent transition-colors",children:[r.jsx(Le,{className:"h-4 w-4"}),r.jsx("span",{children:"Restaurant Map"})]})]}),s&&r.jsxs(Ae,{href:"/customer-dashboard",className:"flex items-center space-x-1 hover:text-accent transition-colors",children:[r.jsx(Wr,{className:"h-4 w-4"}),r.jsx("span",{children:"Account"})]})]})}),r.jsx("div",{className:"hidden md:flex max-w-sm mx-4",children:(s==null?void 0:s.role)==="shopkeeper"?r.jsx(a1,{placeholder:"Search your products, orders..."}):r.jsx(a1,{placeholder:o==="shopping"?"Search products and stores...":"Search food and restaurants..."})}),r.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[(s==null?void 0:s.role)!=="shopkeeper"&&r.jsxs(r.Fragment,{children:[r.jsxs(Ae,{href:"/cart",className:"relative hover:text-accent transition-colors p-2",children:[r.jsx(Bn,{className:"h-5 w-5"}),h>0&&r.jsx("span",{className:"absolute -top-1 -right-1 bg-accent text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:h})]}),r.jsx(Ae,{href:"/wishlist",className:"hover:text-accent transition-colors p-2",children:r.jsx(La,{className:"h-5 w-5"})})]}),s?r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx($b,{}),r.jsxs(oT,{children:[r.jsx(lT,{asChild:!0,children:r.jsx(F,{variant:"ghost",className:"text-white hover:text-accent p-2",children:r.jsx(Wr,{className:"h-5 w-5"})})}),r.jsxs(Rb,{align:"end",className:"w-56",children:[r.jsx(bi,{asChild:!0,children:r.jsxs(Ae,{href:"/customer-dashboard",className:"cursor-pointer",children:[r.jsx(Wr,{className:"h-4 w-4 mr-2"}),"My Account"]})}),s.role==="shopkeeper"&&r.jsxs(r.Fragment,{children:[r.jsx(Uh,{}),r.jsx(bi,{asChild:!0,children:r.jsxs(Ae,{href:"/seller/dashboard",className:"cursor-pointer",children:[r.jsx(nr,{className:"h-4 w-4 mr-2"}),"Seller Hub"]})}),r.jsx(bi,{asChild:!0,children:r.jsxs(Ae,{href:"/seller/inventory",className:"cursor-pointer",children:[r.jsx(rt,{className:"h-4 w-4 mr-2"}),"Inventory"]})}),r.jsx(bi,{asChild:!0,children:r.jsxs(Ae,{href:"/seller/promotions",className:"cursor-pointer",children:[r.jsx(Kp,{className:"h-4 w-4 mr-2"}),"Promotions"]})})]})]})]}),r.jsx(F,{variant:"ghost",className:"text-white hover:text-accent p-2",onClick:S,children:r.jsx(Wp,{className:"h-5 w-5"})})]}):r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Ae,{href:"/login",children:r.jsx(F,{variant:"ghost",className:"text-white hover:text-accent",children:"Login"})}),r.jsx(Ae,{href:"/register",children:r.jsx(F,{variant:"outline",className:"text-white border-white hover:bg-white hover:text-primary",children:"Sign Up"})})]})]}),r.jsxs("div",{className:"md:hidden flex items-center space-x-1",children:[s&&r.jsxs(F,{variant:"ghost",size:"sm",className:"relative text-white hover:text-accent p-1",onClick:()=>n(!t),children:[r.jsx(Xt,{className:"h-5 w-5"}),f>0&&r.jsx(le,{variant:"destructive",className:"absolute -top-1 -right-1 h-4 w-4 rounded-full p-0 text-xs flex items-center justify-center min-w-0",children:f>99?"99+":f})]}),(s==null?void 0:s.role)!=="shopkeeper"&&r.jsxs(r.Fragment,{children:[r.jsxs(Ae,{href:"/cart",className:"relative hover:text-accent transition-colors p-1",children:[r.jsx(Bn,{className:"h-5 w-5"}),h>0&&r.jsx("span",{className:"absolute -top-1 -right-1 bg-accent text-white text-xs rounded-full h-4 w-4 flex items-center justify-center",children:h})]}),r.jsx(Ae,{href:"/wishlist",className:"hover:text-accent transition-colors p-1",children:r.jsx(La,{className:"h-5 w-5"})})]}),s?r.jsxs(r.Fragment,{children:[s.role==="shopkeeper"&&r.jsxs(r.Fragment,{children:[r.jsx(Ae,{href:"/seller/dashboard",className:"hover:text-accent transition-colors p-1",children:r.jsx(ti,{className:"h-5 w-5"})}),r.jsx(Ae,{href:"/seller/inventory",className:"hover:text-accent transition-colors p-1",children:r.jsx(rt,{className:"h-5 w-5"})}),r.jsx(Ae,{href:"/seller/orders",className:"hover:text-accent transition-colors p-1",children:r.jsx(Bn,{className:"h-5 w-5"})})]}),s.role!=="shopkeeper"&&r.jsx(Ae,{href:"/customer-dashboard",className:"hover:text-accent transition-colors p-1",children:r.jsx(Wr,{className:"h-5 w-5"})}),r.jsx(F,{variant:"ghost",className:"text-white hover:text-accent p-1",onClick:S,children:r.jsx(Wp,{className:"h-5 w-5"})})]}):r.jsx(Ae,{href:"/login",className:"hover:text-accent transition-colors p-1",children:r.jsx(Wr,{className:"h-5 w-5"})})]})]}),r.jsx("div",{className:"md:hidden pb-3",children:r.jsx(a1,{placeholder:"Search products, stores..."})})]}),t&&s&&r.jsxs("div",{className:"fixed inset-0 z-50 md:hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:()=>n(!1)}),r.jsx("div",{className:"absolute top-0 right-0 h-full w-full max-w-sm bg-white shadow-xl",children:r.jsxs(G,{className:"h-full rounded-none border-0",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 border-b bg-primary text-white",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"text-base sm:text-lg font-semibold",children:"Notifications"}),f>0&&r.jsxs(le,{variant:"secondary",className:"bg-white/20 text-white text-xs",children:[f," new"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[f>0&&r.jsx(F,{variant:"ghost",size:"sm",className:"text-white hover:text-white hover:bg-white/20 text-xs px-2 py-1",onClick:y,disabled:x.isPending,children:"Mark all read"}),r.jsx(F,{variant:"ghost",size:"sm",className:"text-white hover:text-white hover:bg-white/20 p-1",onClick:()=>n(!1),children:r.jsx(Fr,{className:"h-5 w-5"})})]})]}),r.jsx(Z,{className:"p-0 h-[calc(100%-3.5rem)] sm:h-[calc(100%-4rem)]",children:r.jsx(Gk,{className:"h-full",children:m.length===0?r.jsxs("div",{className:"text-center py-6 sm:py-8 text-muted-foreground px-4",children:[r.jsx(Xt,{className:"h-10 w-10 sm:h-12 sm:w-12 mx-auto mb-3 sm:mb-4 opacity-50"}),r.jsx("p",{className:"text-sm sm:text-base",children:"No notifications yet"})]}):r.jsx("div",{className:"divide-y",children:m.map(P=>r.jsxs("div",{className:`relative group hover:bg-gray-50 transition-colors cursor-pointer ${P.isRead?"":"bg-blue-50 border-l-4 border-l-primary"}`,onClick:()=>{P.isRead||p(P.id)},children:[r.jsx("div",{className:"p-3 sm:p-4",children:r.jsxs("div",{className:"flex items-start space-x-2 sm:space-x-3",children:[r.jsx("div",{className:"text-base sm:text-lg flex-shrink-0 mt-0.5",children:w(P.type)}),r.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[r.jsxs("div",{className:"flex items-start justify-between mb-1 gap-2",children:[r.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-900 leading-tight line-clamp-2",children:P.title}),r.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 flex-shrink-0",children:[r.jsx(le,{className:`text-xs px-1.5 py-0.5 ${N(P.type)}`,children:P.type}),!P.isRead&&r.jsx("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-primary rounded-full flex-shrink-0 animate-pulse"})]})]}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-2 leading-relaxed word-wrap break-words overflow-wrap-anywhere",children:P.message}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-xs text-gray-400",children:b(P.createdAt)}),!P.isRead&&r.jsx(F,{variant:"ghost",size:"sm",className:"text-xs h-6 px-2 text-primary hover:bg-primary hover:text-white opacity-0 group-hover:opacity-100 transition-opacity",onClick:C=>{C.preventDefault(),C.stopPropagation(),p(P.id)},disabled:g.isPending,children:"Mark as read"})]})]})]})}),!P.isRead&&r.jsx(F,{variant:"ghost",size:"sm",className:"absolute top-2 right-2 h-6 w-6 p-0 text-primary hover:bg-primary hover:text-white opacity-0 group-hover:opacity-100 transition-opacity",onClick:C=>{C.preventDefault(),C.stopPropagation(),p(P.id)},disabled:g.isPending,title:"Mark as read",children:""})]},P.id))})})})]})})]})]})}function _le(){const[e,t]=j.useState(!1),[n,s]=Jr(),{user:i,logout:a}=Gt(),o=()=>{a(),s("/")},l=[{label:"Dashboard",href:"/delivery-partner/dashboard",icon:L_},{label:"Notifications",href:"/delivery-partner/notifications",icon:Xt,badge:3},{label:"Active Deliveries",href:"/delivery-partner/test",icon:rt,badge:2},{label:"Live Tracking",href:"/delivery-partner/tracking",icon:jt}];return r.jsx("nav",{className:"bg-blue-600 text-white shadow-lg sticky top-0 z-40",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-8",children:[r.jsxs("div",{className:"flex justify-between items-center h-14 sm:h-16",children:[r.jsx("div",{className:"flex items-center space-x-2 sm:space-x-4",children:r.jsxs(Ae,{href:"/delivery-partner/dashboard",className:"flex items-center space-x-2",children:[r.jsx("div",{className:"p-1.5 sm:p-2 bg-white/10 rounded-lg",children:r.jsx(kt,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),r.jsxs("div",{className:"hidden xs:block",children:[r.jsx("span",{className:"text-sm sm:text-lg font-bold",children:"Siraha Delivery"}),r.jsx("div",{className:"text-[10px] sm:text-xs text-blue-100",children:"Partner Portal"})]})]})}),r.jsx("div",{className:"hidden lg:flex items-center space-x-4 xl:space-x-6",children:l.map(c=>{const d=c.icon,h=n===c.href;return r.jsxs(Ae,{href:c.href,className:`flex items-center space-x-2 px-3 py-2 rounded-lg transition-colors relative ${h?"bg-white/20 text-white":"text-blue-100 hover:text-white hover:bg-white/10"}`,children:[r.jsx(d,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm font-medium",children:c.label}),c.badge&&r.jsx(le,{variant:"destructive",className:"h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs",children:c.badge})]},c.href)})}),r.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[r.jsxs("div",{className:"hidden sm:flex lg:flex items-center space-x-2 bg-green-500/20 px-2 sm:px-3 py-1 rounded-full",children:[r.jsx("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-green-400 rounded-full animate-pulse"}),r.jsx("span",{className:"text-[10px] sm:text-xs font-medium",children:"Online"})]}),r.jsx("div",{className:"sm:hidden flex items-center",children:r.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"})}),r.jsxs("div",{className:"hidden md:flex items-center space-x-1 sm:space-x-2 bg-white/10 px-2 sm:px-3 py-1 rounded-lg",children:[r.jsx(Hr,{className:"h-3 w-3 sm:h-4 sm:w-4 text-green-300"}),r.jsx("span",{className:"text-xs sm:text-sm font-medium",children:"425"})]}),r.jsx("div",{className:"md:hidden flex items-center bg-white/10 px-2 py-1 rounded",children:r.jsx("span",{className:"text-xs font-medium",children:"425"})}),r.jsxs(oT,{children:[r.jsx(lT,{asChild:!0,children:r.jsxs(F,{variant:"ghost",className:"flex items-center space-x-1 sm:space-x-2 hover:bg-white/10 px-2 sm:px-3",children:[r.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-white/20 rounded-full flex items-center justify-center",children:r.jsx(Wr,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),r.jsx("span",{className:"hidden lg:block text-sm font-medium truncate max-w-24",children:(i==null?void 0:i.fullName)||"Partner"})]})}),r.jsxs(Rb,{align:"end",className:"w-48 sm:w-56",children:[r.jsxs("div",{className:"px-3 py-2 border-b",children:[r.jsx("p",{className:"text-sm font-medium truncate",children:i==null?void 0:i.fullName}),r.jsx("p",{className:"text-xs text-muted-foreground truncate",children:i==null?void 0:i.email}),r.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),r.jsx("span",{className:"text-xs text-green-600",children:"Online & Available"})]})]}),r.jsxs(bi,{onClick:()=>s("/delivery-partner/dashboard"),children:[r.jsx(L_,{className:"mr-2 h-4 w-4"}),"Dashboard"]}),r.jsxs(bi,{onClick:()=>s("/delivery-partner/notifications"),children:[r.jsx(Xt,{className:"mr-2 h-4 w-4"}),"Notifications",r.jsx(le,{variant:"secondary",className:"ml-auto",children:"3"})]}),r.jsxs(bi,{onClick:()=>s("/delivery-partner/tracking"),children:[r.jsx(jt,{className:"mr-2 h-4 w-4"}),"Live Tracking"]}),r.jsx(Uh,{}),r.jsxs(bi,{children:[r.jsx(Rd,{className:"mr-2 h-4 w-4"}),"Settings"]}),r.jsxs(bi,{children:[r.jsx(Le,{className:"mr-2 h-4 w-4"}),"Update Location"]}),r.jsx(Uh,{}),r.jsxs(bi,{onClick:o,children:[r.jsx(Wp,{className:"mr-2 h-4 w-4"}),"Sign out"]})]})]}),r.jsx("button",{onClick:()=>t(!e),className:"lg:hidden p-1.5 sm:p-2 rounded-lg hover:bg-white/10",children:e?r.jsx(Fr,{className:"h-4 w-4 sm:h-5 sm:w-5"}):r.jsx(Xte,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]})]}),e&&r.jsx("div",{className:"lg:hidden border-t border-white/20",children:r.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[r.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-white/10 rounded-lg mb-3",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),r.jsx("span",{className:"text-sm font-medium",children:"Online"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Hr,{className:"h-4 w-4 text-green-300"}),r.jsx("span",{className:"text-sm font-medium",children:"425 today"})]})]}),l.map(c=>{const d=c.icon,h=n===c.href;return r.jsxs(Ae,{href:c.href,className:`flex items-center justify-between px-3 py-3 rounded-lg transition-colors ${h?"bg-white/20 text-white":"text-blue-100 hover:text-white hover:bg-white/10"}`,onClick:()=>t(!1),children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(d,{className:"h-5 w-5"}),r.jsx("span",{className:"font-medium",children:c.label})]}),c.badge&&r.jsx(le,{variant:"destructive",className:"h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs",children:c.badge})]},c.href)}),r.jsx("div",{className:"border-t border-white/20 pt-3 mt-3",children:r.jsxs("button",{onClick:o,className:"flex items-center space-x-3 px-3 py-3 rounded-lg text-blue-100 hover:text-white hover:bg-white/10 w-full",children:[r.jsx(Wp,{className:"h-5 w-5"}),r.jsx("span",{className:"font-medium",children:"Sign out"})]})})]})})]})})}function Ple(){const{user:e}=Gt();return(e==null?void 0:e.role)==="delivery_partner"?r.jsx(_le,{}):r.jsx(Sle,{})}function rl(){const{user:e,login:t,logout:n,register:s,isLoading:i,refreshUserData:a}=Gt();return{user:e,login:t,logout:n,register:s,isLoading:i,refreshUserData:a,isAuthenticated:!!e}}function Cle(){const[e]=Jr(),{user:t}=Gt(),{mode:n}=Ja(),{user:s}=rl();if((s==null?void 0:s.role)==="delivery_partner")return null;const i=[{href:"/seller/dashboard",icon:ti,label:"Dashboard",active:e.startsWith("/seller/dashboard")},{href:"/seller/store",icon:nr,label:"Store",active:e.startsWith("/seller/store")},{href:"/seller/orders",icon:Bn,label:"Orders",active:e.startsWith("/seller/orders")},{href:"/seller/inventory",icon:rt,label:"Inventory",active:e.startsWith("/seller/inventory")},{href:"/account",icon:Wr,label:"Account",active:e.startsWith("/account")}],a=[{href:"/",icon:ti,label:"Home",active:e==="/"},...n==="shopping"?[{href:"/products",icon:rt,label:"Products",active:e.startsWith("/products")},{href:"/stores",icon:nr,label:"Stores",active:e.startsWith("/stores")},{href:"/store-maps",icon:Le,label:"Map",active:e==="/store-maps"}]:[{href:"/food-categories",icon:Fh,label:"Menu",active:e.startsWith("/food-categories")||e.startsWith("/categories")},{href:"/restaurants",icon:Ta,label:"Restaurants",active:e.startsWith("/restaurants")},{href:"/restaurant-maps",icon:Le,label:"Map",active:e==="/restaurant-maps"}],{href:t?"/account":"/login",icon:Wr,label:"Account",active:e.startsWith("/account")||e.startsWith("/customer-dashboard")}],o=(t==null?void 0:t.role)==="shopkeeper"?i:a;return r.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-800 z-50 md:hidden safe-area-inset-bottom",children:r.jsx("div",{className:"flex items-center justify-around h-16 px-4 pb-safe",children:o.map(l=>{const c=l.icon;return r.jsxs(Ae,{href:l.href,className:Ve("flex flex-col items-center justify-center space-y-1 py-2 px-1 sm:px-3 rounded-lg transition-colors min-w-0 flex-1",l.active?"text-primary bg-primary/10":"text-gray-600 dark:text-gray-400 hover:text-primary hover:bg-primary/5"),children:[r.jsx(c,{className:"h-4 w-4 sm:h-5 sm:w-5"}),r.jsx("span",{className:"text-xs font-medium truncate",children:l.label})]},l.href)})})})}function kle(){const[e,t]=j.useState(!1);return r.jsxs("footer",{className:"bg-gray-800 text-white mt-8 mb-20",children:[r.jsxs("div",{className:"max-w-7xl mx-auto px-3 py-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center space-x-2",children:r.jsx("img",{src:"/assets/icon2.png",alt:"Siraha Bazaar",className:"h-6 w-6 object-contain rounded-lg"})}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("a",{href:"/SirahaBazaar.apk",download:"SirahaBazaar.apk",className:"inline-flex items-center space-x-1 bg-blue-600 hover:bg-blue-700 text-white px-2 py-1 rounded text-xs font-medium transition-colors",children:[r.jsx(eu,{className:"h-3 w-3"}),r.jsx("span",{className:"hidden xs:inline",children:"App"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("a",{href:"https://www.facebook.com/profile.php?id=61578565817335",target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white transition-colors",children:r.jsx(NM,{className:"h-3.5 w-3.5"})}),r.jsx("a",{href:"https://www.tiktok.com/@sirahabazaar.service?_t=ZS-8ySvLQ8IiG1&_r=1",target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white transition-colors",children:r.jsx(_M,{className:"h-3.5 w-3.5"})}),r.jsx("a",{href:"https://www.instagram.com/sirahabazaar?igsh=MTJnZnh3cmR1MWkxeQ==",target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white transition-colors",children:r.jsx(SM,{className:"h-3.5 w-3.5"})})]}),r.jsx("button",{onClick:()=>t(!e),className:"flex items-center text-gray-300 hover:text-white transition-colors",children:e?r.jsx(Pk,{className:"h-4 w-4"}):r.jsx(wb,{className:"h-4 w-4"})})]})]}),r.jsx("div",{className:"mt-2 pt-2 border-t border-gray-700",children:r.jsxs("div",{className:"flex flex-col xs:flex-row items-center justify-between space-y-1 xs:space-y-0 text-xs text-gray-400",children:[r.jsx("span",{children:" 2024 Siraha Bazaar"}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Id,{className:"h-3 w-3"}),r.jsx("span",{className:"truncate",children:"sirahabazzar@gmail.com"})]})]})})]}),e&&r.jsx("div",{className:"border-t border-gray-700 bg-gray-900",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-3 py-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold mb-2 text-white text-sm",children:"Links"}),r.jsxs("ul",{className:"space-y-1 text-gray-300",children:[r.jsx("li",{children:r.jsx(Ae,{href:"/",className:"hover:text-white transition-colors",children:"Home"})}),r.jsx("li",{children:r.jsx(Ae,{href:"/products",className:"hover:text-white transition-colors",children:"Products"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"About"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Contact"})})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold mb-2 text-white text-sm",children:"Shop"}),r.jsxs("ul",{className:"space-y-1 text-gray-300",children:[r.jsx("li",{children:r.jsx(Ae,{href:"/products?category=1",className:"hover:text-white transition-colors",children:"Groceries"})}),r.jsx("li",{children:r.jsx(Ae,{href:"/products?category=2",className:"hover:text-white transition-colors",children:"Clothing"})}),r.jsx("li",{children:r.jsx(Ae,{href:"/products?category=3",className:"hover:text-white transition-colors",children:"Electronics"})}),r.jsx("li",{children:r.jsx(Ae,{href:"/products?category=4",className:"hover:text-white transition-colors",children:"Kitchen"})})]})]})]}),r.jsx("div",{className:"mt-4 pt-3 border-t border-gray-700",children:r.jsxs("div",{className:"flex flex-col space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-300",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ot,{className:"h-3 w-3"}),r.jsx("span",{children:"+9779805916598"})]}),r.jsx("span",{children:"Siraha, Nepal"})]}),r.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[r.jsx("a",{href:"https://www.facebook.com/profile.php?id=61578565817335",target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white transition-colors",children:r.jsx(NM,{className:"h-4 w-4"})}),r.jsx("a",{href:"https://www.tiktok.com/@sirahabazaar.service?_t=ZS-8ySvLQ8IiG1&_r=1",target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white transition-colors",children:r.jsx(_M,{className:"h-4 w-4"})}),r.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition-colors",children:r.jsx(lre,{className:"h-4 w-4"})}),r.jsx("a",{href:"https://www.instagram.com/sirahabazaar?igsh=MTJnZnh3cmR1MWkxeQ==",target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white transition-colors",children:r.jsx(SM,{className:"h-4 w-4"})}),r.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition-colors",children:r.jsx(mre,{className:"h-4 w-4"})})]})]})})]})})]})}const Tle=()=>{};var rD={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sV=function(e){const t=[];let n=0;for(let s=0;s<e.length;s++){let i=e.charCodeAt(s);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&s+1<e.length&&(e.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++s)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},Ale=function(e){const t=[];let n=0,s=0;for(;n<e.length;){const i=e[n++];if(i<128)t[s++]=String.fromCharCode(i);else if(i>191&&i<224){const a=e[n++];t[s++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=e[n++],o=e[n++],l=e[n++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;t[s++]=String.fromCharCode(55296+(c>>10)),t[s++]=String.fromCharCode(56320+(c&1023))}else{const a=e[n++],o=e[n++];t[s++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return t.join("")},iV={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<e.length;i+=3){const a=e[i],o=i+1<e.length,l=o?e[i+1]:0,c=i+2<e.length,d=c?e[i+2]:0,h=a>>2,m=(a&3)<<4|l>>4;let f=(l&15)<<2|d>>6,g=d&63;c||(g=64,o||(f=64)),s.push(n[h],n[m],n[f],n[g])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(sV(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Ale(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<e.length;){const a=n[e.charAt(i++)],l=i<e.length?n[e.charAt(i)]:0;++i;const d=i<e.length?n[e.charAt(i)]:64;++i;const m=i<e.length?n[e.charAt(i)]:64;if(++i,a==null||l==null||d==null||m==null)throw new Ele;const f=a<<2|l>>4;if(s.push(f),d!==64){const g=l<<4&240|d>>2;if(s.push(g),m!==64){const x=d<<6&192|m;s.push(x)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ele extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ole=function(e){const t=sV(e);return iV.encodeByteArray(t,!0)},aV=function(e){return Ole(e).replace(/\./g,"")},Mle=function(e){try{return iV.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dle(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ile=()=>Dle().__FIREBASE_DEFAULTS__,Lle=()=>{if(typeof process>"u"||typeof rD>"u")return;const e=rD.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Rle=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&Mle(e[1]);return t&&JSON.parse(t)},$le=()=>{try{return Tle()||Ile()||Lle()||Rle()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},oV=()=>{var e;return(e=$le())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fle{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}function lV(){try{return typeof indexedDB=="object"}catch{return!1}}function cV(){return new Promise((e,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;t(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){t(n)}})}function zle(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ble="FirebaseError";class Lm extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=Ble,Object.setPrototypeOf(this,Lm.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fb.prototype.create)}}class Fb{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},i=`${this.service}/${t}`,a=this.errors[t],o=a?Vle(a,s):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Lm(i,l,s)}}function Vle(e,t){return e.replace(Ule,(n,s)=>{const i=t[s];return i!=null?String(i):`<${s}?>`})}const Ule=/\{\$([^}]+)}/g;function Z_(e,t){if(e===t)return!0;const n=Object.keys(e),s=Object.keys(t);for(const i of n){if(!s.includes(i))return!1;const a=e[i],o=t[i];if(nD(a)&&nD(o)){if(!Z_(a,o))return!1}else if(a!==o)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function nD(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(e){return e&&e._delegate?e._delegate:e}class uc{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wle{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new Fle;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(qle(t))try{this.getOrInitializeService({instanceIdentifier:Wc})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});s.resolve(a)}catch{}}}}clearInstance(t=Wc){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Wc){return this.instances.has(t)}getOptions(t=Wc){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);s===l&&o.resolve(i)}return i}onInit(t,n){var s;const i=this.normalizeInstanceIdentifier(n),a=(s=this.onInitCallbacks.get(i))!==null&&s!==void 0?s:new Set;a.add(t),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&t(o,i),()=>{a.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Hle(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Wc){return this.component?this.component.multipleInstances?t:Wc:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Hle(e){return e===Wc?void 0:e}function qle(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kle{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Wle(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cr;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Cr||(Cr={}));const Gle={debug:Cr.DEBUG,verbose:Cr.VERBOSE,info:Cr.INFO,warn:Cr.WARN,error:Cr.ERROR,silent:Cr.SILENT},Zle=Cr.INFO,Yle={[Cr.DEBUG]:"log",[Cr.VERBOSE]:"log",[Cr.INFO]:"info",[Cr.WARN]:"warn",[Cr.ERROR]:"error"},Xle=(e,t,...n)=>{if(t<e.logLevel)return;const s=new Date().toISOString(),i=Yle[t];if(i)console[i](`[${s}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Qle{constructor(t){this.name=t,this._logLevel=Zle,this._logHandler=Xle,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Cr))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Gle[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Cr.DEBUG,...t),this._logHandler(this,Cr.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Cr.VERBOSE,...t),this._logHandler(this,Cr.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Cr.INFO,...t),this._logHandler(this,Cr.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Cr.WARN,...t),this._logHandler(this,Cr.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Cr.ERROR,...t),this._logHandler(this,Cr.ERROR,...t)}}const Jle=(e,t)=>t.some(n=>e instanceof n);let sD,iD;function ece(){return sD||(sD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tce(){return iD||(iD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dV=new WeakMap,Y_=new WeakMap,uV=new WeakMap,x1=new WeakMap,dT=new WeakMap;function rce(e){const t=new Promise((n,s)=>{const i=()=>{e.removeEventListener("success",a),e.removeEventListener("error",o)},a=()=>{n(Oo(e.result)),i()},o=()=>{s(e.error),i()};e.addEventListener("success",a),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&dV.set(n,e)}).catch(()=>{}),dT.set(t,e),t}function nce(e){if(Y_.has(e))return;const t=new Promise((n,s)=>{const i=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",o),e.removeEventListener("abort",o)},a=()=>{n(),i()},o=()=>{s(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",a),e.addEventListener("error",o),e.addEventListener("abort",o)});Y_.set(e,t)}let X_={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Y_.get(e);if(t==="objectStoreNames")return e.objectStoreNames||uV.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Oo(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function sce(e){X_=e(X_)}function ice(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=e.call(g1(this),t,...n);return uV.set(s,t.sort?t.sort():[t]),Oo(s)}:tce().includes(e)?function(...t){return e.apply(g1(this),t),Oo(dV.get(this))}:function(...t){return Oo(e.apply(g1(this),t))}}function ace(e){return typeof e=="function"?ice(e):(e instanceof IDBTransaction&&nce(e),Jle(e,ece())?new Proxy(e,X_):e)}function Oo(e){if(e instanceof IDBRequest)return rce(e);if(x1.has(e))return x1.get(e);const t=ace(e);return t!==e&&(x1.set(e,t),dT.set(t,e)),t}const g1=e=>dT.get(e);function zb(e,t,{blocked:n,upgrade:s,blocking:i,terminated:a}={}){const o=indexedDB.open(e,t),l=Oo(o);return s&&o.addEventListener("upgradeneeded",c=>{s(Oo(o.result),c.oldVersion,c.newVersion,Oo(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}function v1(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",s=>t(s.oldVersion,s)),Oo(n).then(()=>{})}const oce=["get","getKey","getAll","getAllKeys","count"],lce=["put","add","delete","clear"],y1=new Map;function aD(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(y1.get(t))return y1.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,i=lce.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||oce.includes(n)))return;const a=async function(o,...l){const c=this.transaction(o,i?"readwrite":"readonly");let d=c.store;return s&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),i&&c.done]))[0]};return y1.set(t,a),a}sce(e=>({...e,get:(t,n,s)=>aD(t,n)||e.get(t,n,s),has:(t,n)=>!!aD(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cce{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(dce(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function dce(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Q_="@firebase/app",oD="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko=new Qle("@firebase/app"),uce="@firebase/app-compat",hce="@firebase/analytics-compat",mce="@firebase/analytics",fce="@firebase/app-check-compat",pce="@firebase/app-check",xce="@firebase/auth",gce="@firebase/auth-compat",vce="@firebase/database",yce="@firebase/data-connect",jce="@firebase/database-compat",bce="@firebase/functions",wce="@firebase/functions-compat",Nce="@firebase/installations",Sce="@firebase/installations-compat",_ce="@firebase/messaging",Pce="@firebase/messaging-compat",Cce="@firebase/performance",kce="@firebase/performance-compat",Tce="@firebase/remote-config",Ace="@firebase/remote-config-compat",Ece="@firebase/storage",Oce="@firebase/storage-compat",Mce="@firebase/firestore",Dce="@firebase/ai",Ice="@firebase/firestore-compat",Lce="firebase";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_="[DEFAULT]",Rce={[Q_]:"fire-core",[uce]:"fire-core-compat",[mce]:"fire-analytics",[hce]:"fire-analytics-compat",[pce]:"fire-app-check",[fce]:"fire-app-check-compat",[xce]:"fire-auth",[gce]:"fire-auth-compat",[vce]:"fire-rtdb",[yce]:"fire-data-connect",[jce]:"fire-rtdb-compat",[bce]:"fire-fn",[wce]:"fire-fn-compat",[Nce]:"fire-iid",[Sce]:"fire-iid-compat",[_ce]:"fire-fcm",[Pce]:"fire-fcm-compat",[Cce]:"fire-perf",[kce]:"fire-perf-compat",[Tce]:"fire-rc",[Ace]:"fire-rc-compat",[Ece]:"fire-gcs",[Oce]:"fire-gcs-compat",[Mce]:"fire-fst",[Ice]:"fire-fst-compat",[Dce]:"fire-vertex","fire-js":"fire-js",[Lce]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0=new Map,$ce=new Map,e2=new Map;function lD(e,t){try{e.container.addComponent(t)}catch(n){Ko.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Fd(e){const t=e.name;if(e2.has(t))return Ko.debug(`There were multiple attempts to register component ${t}.`),!1;e2.set(t,e);for(const n of N0.values())lD(n,e);for(const n of $ce.values())lD(n,e);return!0}function uT(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fce={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yl=new Fb("app","Firebase",Fce);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zce{constructor(t,n,s){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new uc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Yl.create("app-deleted",{appName:this._name})}}function hT(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const s=Object.assign({name:J_,automaticDataCollectionEnabled:!0},t),i=s.name;if(typeof i!="string"||!i)throw Yl.create("bad-app-name",{appName:String(i)});if(n||(n=oV()),!n)throw Yl.create("no-options");const a=N0.get(i);if(a){if(Z_(n,a.options)&&Z_(s,a.config))return a;throw Yl.create("duplicate-app",{appName:i})}const o=new Kle(i);for(const c of e2.values())o.addComponent(c);const l=new zce(n,s,o);return N0.set(i,l),l}function Bce(e=J_){const t=N0.get(e);if(!t&&e===J_&&oV())return hT();if(!t)throw Yl.create("no-app",{appName:e});return t}function Xl(e,t,n){var s;let i=(s=Rce[e])!==null&&s!==void 0?s:e;n&&(i+=`-${n}`);const a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){const l=[`Unable to register library "${i}" with version "${t}":`];a&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&l.push("and"),o&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ko.warn(l.join(" "));return}Fd(new uc(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vce="firebase-heartbeat-database",Uce=1,tx="firebase-heartbeat-store";let j1=null;function hV(){return j1||(j1=zb(Vce,Uce,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(tx)}catch(n){console.warn(n)}}}}).catch(e=>{throw Yl.create("idb-open",{originalErrorMessage:e.message})})),j1}async function Wce(e){try{const n=(await hV()).transaction(tx),s=await n.objectStore(tx).get(mV(e));return await n.done,s}catch(t){if(t instanceof Lm)Ko.warn(t.message);else{const n=Yl.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ko.warn(n.message)}}}async function cD(e,t){try{const s=(await hV()).transaction(tx,"readwrite");await s.objectStore(tx).put(t,mV(e)),await s.done}catch(n){if(n instanceof Lm)Ko.warn(n.message);else{const s=Yl.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ko.warn(s.message)}}}function mV(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hce=1024,qce=30;class Kce{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Zce(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var t,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=dD();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>qce){const o=Yce(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Ko.warn(s)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=dD(),{heartbeatsToSend:s,unsentEntries:i}=Gce(this._heartbeatsCache.heartbeats),a=aV(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Ko.warn(n),""}}}function dD(){return new Date().toISOString().substring(0,10)}function Gce(e,t=Hce){const n=[];let s=e.slice();for(const i of e){const a=n.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),uD(n)>t){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),uD(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class Zce{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lV()?cV().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Wce(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return cD(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return cD(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function uD(e){return aV(JSON.stringify({version:2,heartbeats:e})).length}function Yce(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let s=1;s<e.length;s++)e[s].date<n&&(n=e[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xce(e){Fd(new uc("platform-logger",t=>new cce(t),"PRIVATE")),Fd(new uc("heartbeat",t=>new Kce(t),"PRIVATE")),Xl(Q_,oD,e),Xl(Q_,oD,"esm2017"),Xl("fire-js","")}Xce("");var Qce="firebase",Jce="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xl(Qce,Jce,"app");const fV="@firebase/installations",mT="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV=1e4,xV=`w:${mT}`,gV="FIS_v2",ede="https://firebaseinstallations.googleapis.com/v1",tde=60*60*1e3,rde="installations",nde="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sde={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},zd=new Fb(rde,nde,sde);function vV(e){return e instanceof Lm&&e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yV({projectId:e}){return`${ede}/projects/${e}/installations`}function jV(e){return{token:e.token,requestStatus:2,expiresIn:ade(e.expiresIn),creationTime:Date.now()}}async function bV(e,t){const s=(await t.json()).error;return zd.create("request-failed",{requestName:e,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function wV({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function ide(e,{refreshToken:t}){const n=wV(e);return n.append("Authorization",ode(t)),n}async function NV(e){const t=await e();return t.status>=500&&t.status<600?e():t}function ade(e){return Number(e.replace("s","000"))}function ode(e){return`${gV} ${e}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lde({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const s=yV(e),i=wV(e),a=t.getImmediate({optional:!0});if(a){const d=await a.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const o={fid:n,authVersion:gV,appId:e.appId,sdkVersion:xV},l={method:"POST",headers:i,body:JSON.stringify(o)},c=await NV(()=>fetch(s,l));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:jV(d.authToken)}}else throw await bV("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SV(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cde(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dde=/^[cdef][\w-]{21}$/,t2="";function ude(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const n=hde(e);return dde.test(n)?n:t2}catch{return t2}}function hde(e){return cde(e).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(e){return`${e.appName}!${e.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V=new Map;function PV(e,t){const n=Bb(e);CV(n,t),mde(n,t)}function CV(e,t){const n=_V.get(e);if(n)for(const s of n)s(t)}function mde(e,t){const n=fde();n&&n.postMessage({key:e,fid:t}),pde()}let ed=null;function fde(){return!ed&&"BroadcastChannel"in self&&(ed=new BroadcastChannel("[Firebase] FID Change"),ed.onmessage=e=>{CV(e.data.key,e.data.fid)}),ed}function pde(){_V.size===0&&ed&&(ed.close(),ed=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xde="firebase-installations-database",gde=1,Bd="firebase-installations-store";let b1=null;function fT(){return b1||(b1=zb(xde,gde,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(Bd)}}})),b1}async function S0(e,t){const n=Bb(e),i=(await fT()).transaction(Bd,"readwrite"),a=i.objectStore(Bd),o=await a.get(n);return await a.put(t,n),await i.done,(!o||o.fid!==t.fid)&&PV(e,t.fid),t}async function kV(e){const t=Bb(e),s=(await fT()).transaction(Bd,"readwrite");await s.objectStore(Bd).delete(t),await s.done}async function Vb(e,t){const n=Bb(e),i=(await fT()).transaction(Bd,"readwrite"),a=i.objectStore(Bd),o=await a.get(n),l=t(o);return l===void 0?await a.delete(n):await a.put(l,n),await i.done,l&&(!o||o.fid!==l.fid)&&PV(e,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pT(e){let t;const n=await Vb(e.appConfig,s=>{const i=vde(s),a=yde(e,i);return t=a.registrationPromise,a.installationEntry});return n.fid===t2?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}function vde(e){const t=e||{fid:ude(),registrationStatus:0};return TV(t)}function yde(e,t){if(t.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(zd.create("app-offline"));return{installationEntry:t,registrationPromise:i}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},s=jde(e,n);return{installationEntry:n,registrationPromise:s}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:bde(e)}:{installationEntry:t}}async function jde(e,t){try{const n=await lde(e,t);return S0(e.appConfig,n)}catch(n){throw vV(n)&&n.customData.serverCode===409?await kV(e.appConfig):await S0(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}async function bde(e){let t=await hD(e.appConfig);for(;t.registrationStatus===1;)await SV(100),t=await hD(e.appConfig);if(t.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await pT(e);return s||n}return t}function hD(e){return Vb(e,t=>{if(!t)throw zd.create("installation-not-found");return TV(t)})}function TV(e){return wde(e)?{fid:e.fid,registrationStatus:0}:e}function wde(e){return e.registrationStatus===1&&e.registrationTime+pV<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nde({appConfig:e,heartbeatServiceProvider:t},n){const s=Sde(e,n),i=ide(e,n),a=t.getImmediate({optional:!0});if(a){const d=await a.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const o={installation:{sdkVersion:xV,appId:e.appId}},l={method:"POST",headers:i,body:JSON.stringify(o)},c=await NV(()=>fetch(s,l));if(c.ok){const d=await c.json();return jV(d)}else throw await bV("Generate Auth Token",c)}function Sde(e,{fid:t}){return`${yV(e)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xT(e,t=!1){let n;const s=await Vb(e.appConfig,a=>{if(!AV(a))throw zd.create("not-registered");const o=a.authToken;if(!t&&Cde(o))return a;if(o.requestStatus===1)return n=_de(e,t),a;{if(!navigator.onLine)throw zd.create("app-offline");const l=Tde(a);return n=Pde(e,l),l}});return n?await n:s.authToken}async function _de(e,t){let n=await mD(e.appConfig);for(;n.authToken.requestStatus===1;)await SV(100),n=await mD(e.appConfig);const s=n.authToken;return s.requestStatus===0?xT(e,t):s}function mD(e){return Vb(e,t=>{if(!AV(t))throw zd.create("not-registered");const n=t.authToken;return Ade(n)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function Pde(e,t){try{const n=await Nde(e,t),s=Object.assign(Object.assign({},t),{authToken:n});return await S0(e.appConfig,s),n}catch(n){if(vV(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await kV(e.appConfig);else{const s=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await S0(e.appConfig,s)}throw n}}function AV(e){return e!==void 0&&e.registrationStatus===2}function Cde(e){return e.requestStatus===2&&!kde(e)}function kde(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+tde}function Tde(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function Ade(e){return e.requestStatus===1&&e.requestTime+pV<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ede(e){const t=e,{installationEntry:n,registrationPromise:s}=await pT(t);return s?s.catch(console.error):xT(t).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ode(e,t=!1){const n=e;return await Mde(n),(await xT(n,t)).token}async function Mde(e){const{registrationPromise:t}=await pT(e);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dde(e){if(!e||!e.options)throw w1("App Configuration");if(!e.name)throw w1("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw w1(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function w1(e){return zd.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV="installations",Ide="installations-internal",Lde=e=>{const t=e.getProvider("app").getImmediate(),n=Dde(t),s=uT(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},Rde=e=>{const t=e.getProvider("app").getImmediate(),n=uT(t,EV).getImmediate();return{getId:()=>Ede(n),getToken:i=>Ode(n,i)}};function $de(){Fd(new uc(EV,Lde,"PUBLIC")),Fd(new uc(Ide,Rde,"PRIVATE"))}$de();Xl(fV,mT);Xl(fV,mT,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fde="/firebase-messaging-sw.js",zde="/firebase-cloud-messaging-push-scope",OV="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Bde="https://fcmregistrations.googleapis.com/v1",MV="google.c.a.c_id",Vde="google.c.a.c_l",Ude="google.c.a.ts",Wde="google.c.a.e",fD=1e4;var pD;(function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(pD||(pD={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var rx;(function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"})(rx||(rx={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xo(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Hde(e){const t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),s=atob(n),i=new Uint8Array(s.length);for(let a=0;a<s.length;++a)i[a]=s.charCodeAt(a);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1="fcm_token_details_db",qde=5,xD="fcm_token_object_Store";async function Kde(e){if("databases"in indexedDB&&!(await indexedDB.databases()).map(a=>a.name).includes(N1))return null;let t=null;return(await zb(N1,qde,{upgrade:async(s,i,a,o)=>{var l;if(i<2||!s.objectStoreNames.contains(xD))return;const c=o.objectStore(xD),d=await c.index("fcmSenderId").get(e);if(await c.clear(),!!d){if(i===2){const h=d;if(!h.auth||!h.p256dh||!h.endpoint)return;t={token:h.fcmToken,createTime:(l=h.createTime)!==null&&l!==void 0?l:Date.now(),subscriptionOptions:{auth:h.auth,p256dh:h.p256dh,endpoint:h.endpoint,swScope:h.swScope,vapidKey:typeof h.vapidKey=="string"?h.vapidKey:xo(h.vapidKey)}}}else if(i===3){const h=d;t={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:xo(h.auth),p256dh:xo(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:xo(h.vapidKey)}}}else if(i===4){const h=d;t={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:xo(h.auth),p256dh:xo(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:xo(h.vapidKey)}}}}}})).close(),await v1(N1),await v1("fcm_vapid_details_db"),await v1("undefined"),Gde(t)?t:null}function Gde(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return typeof e.createTime=="number"&&e.createTime>0&&typeof e.token=="string"&&e.token.length>0&&typeof t.auth=="string"&&t.auth.length>0&&typeof t.p256dh=="string"&&t.p256dh.length>0&&typeof t.endpoint=="string"&&t.endpoint.length>0&&typeof t.swScope=="string"&&t.swScope.length>0&&typeof t.vapidKey=="string"&&t.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zde="firebase-messaging-database",Yde=1,nx="firebase-messaging-store";let S1=null;function DV(){return S1||(S1=zb(Zde,Yde,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(nx)}}})),S1}async function Xde(e){const t=IV(e),s=await(await DV()).transaction(nx).objectStore(nx).get(t);if(s)return s;{const i=await Kde(e.appConfig.senderId);if(i)return await gT(e,i),i}}async function gT(e,t){const n=IV(e),i=(await DV()).transaction(nx,"readwrite");return await i.objectStore(nx).put(t,n),await i.done,t}function IV({appConfig:e}){return e.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qde={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},es=new Fb("messaging","Messaging",Qde);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jde(e,t){const n=await yT(e),s=LV(t),i={method:"POST",headers:n,body:JSON.stringify(s)};let a;try{a=await(await fetch(vT(e.appConfig),i)).json()}catch(o){throw es.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(a.error){const o=a.error.message;throw es.create("token-subscribe-failed",{errorInfo:o})}if(!a.token)throw es.create("token-subscribe-no-token");return a.token}async function eue(e,t){const n=await yT(e),s=LV(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(s)};let a;try{a=await(await fetch(`${vT(e.appConfig)}/${t.token}`,i)).json()}catch(o){throw es.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(a.error){const o=a.error.message;throw es.create("token-update-failed",{errorInfo:o})}if(!a.token)throw es.create("token-update-no-token");return a.token}async function tue(e,t){const s={method:"DELETE",headers:await yT(e)};try{const a=await(await fetch(`${vT(e.appConfig)}/${t}`,s)).json();if(a.error){const o=a.error.message;throw es.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw es.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function vT({projectId:e}){return`${Bde}/projects/${e}/registrations`}async function yT({appConfig:e,installations:t}){const n=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function LV({p256dh:e,auth:t,endpoint:n,vapidKey:s}){const i={web:{endpoint:n,auth:t,p256dh:e}};return s!==OV&&(i.web.applicationPubKey=s),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rue=7*24*60*60*1e3;async function nue(e){const t=await iue(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:xo(t.getKey("auth")),p256dh:xo(t.getKey("p256dh"))},s=await Xde(e.firebaseDependencies);if(s){if(aue(s.subscriptionOptions,n))return Date.now()>=s.createTime+rue?sue(e,{token:s.token,createTime:Date.now(),subscriptionOptions:n}):s.token;try{await tue(e.firebaseDependencies,s.token)}catch(i){console.warn(i)}return gD(e.firebaseDependencies,n)}else return gD(e.firebaseDependencies,n)}async function sue(e,t){try{const n=await eue(e.firebaseDependencies,t),s=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return await gT(e.firebaseDependencies,s),n}catch(n){throw n}}async function gD(e,t){const s={token:await Jde(e,t),createTime:Date.now(),subscriptionOptions:t};return await gT(e,s),s.token}async function iue(e,t){const n=await e.pushManager.getSubscription();return n||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Hde(t)})}function aue(e,t){const n=t.vapidKey===e.vapidKey,s=t.endpoint===e.endpoint,i=t.auth===e.auth,a=t.p256dh===e.p256dh;return n&&s&&i&&a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return oue(t,e),lue(t,e),cue(t,e),t}function oue(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const s=t.notification.body;s&&(e.notification.body=s);const i=t.notification.image;i&&(e.notification.image=i);const a=t.notification.icon;a&&(e.notification.icon=a)}function lue(e,t){t.data&&(e.data=t.data)}function cue(e,t){var n,s,i,a,o;if(!t.fcmOptions&&!(!((n=t.notification)===null||n===void 0)&&n.click_action))return;e.fcmOptions={};const l=(i=(s=t.fcmOptions)===null||s===void 0?void 0:s.link)!==null&&i!==void 0?i:(a=t.notification)===null||a===void 0?void 0:a.click_action;l&&(e.fcmOptions.link=l);const c=(o=t.fcmOptions)===null||o===void 0?void 0:o.analytics_label;c&&(e.fcmOptions.analyticsLabel=c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function due(e){return typeof e=="object"&&!!e&&MV in e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uue(e){if(!e||!e.options)throw _1("App Configuration Object");if(!e.name)throw _1("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const s of t)if(!n[s])throw _1(s);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function _1(e){return es.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hue{constructor(t,n,s){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=uue(t);this.firebaseDependencies={app:t,appConfig:i,installations:n,analyticsProvider:s}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mue(e){try{e.swRegistration=await navigator.serviceWorker.register(Fde,{scope:zde}),e.swRegistration.update().catch(()=>{}),await fue(e.swRegistration)}catch(t){throw es.create("failed-service-worker-registration",{browserErrorMessage:t==null?void 0:t.message})}}async function fue(e){return new Promise((t,n)=>{const s=setTimeout(()=>n(new Error(`Service worker not registered after ${fD} ms`)),fD),i=e.installing||e.waiting;e.active?(clearTimeout(s),t()):i?i.onstatechange=a=>{var o;((o=a.target)===null||o===void 0?void 0:o.state)==="activated"&&(i.onstatechange=null,clearTimeout(s),t())}:(clearTimeout(s),n(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pue(e,t){if(!t&&!e.swRegistration&&await mue(e),!(!t&&e.swRegistration)){if(!(t instanceof ServiceWorkerRegistration))throw es.create("invalid-sw-registration");e.swRegistration=t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xue(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=OV)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RV(e,t){if(!navigator)throw es.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw es.create("permission-blocked");return await xue(e,t==null?void 0:t.vapidKey),await pue(e,t==null?void 0:t.serviceWorkerRegistration),nue(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gue(e,t,n){const s=vue(t);(await e.firebaseDependencies.analyticsProvider.get()).logEvent(s,{message_id:n[MV],message_name:n[Vde],message_time:n[Ude],message_device_time:Math.floor(Date.now()/1e3)})}function vue(e){switch(e){case rx.NOTIFICATION_CLICKED:return"notification_open";case rx.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yue(e,t){const n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===rx.PUSH_RECEIVED&&(typeof e.onMessageHandler=="function"?e.onMessageHandler(vD(n)):e.onMessageHandler.next(vD(n)));const s=n.data;due(s)&&s[Wde]==="1"&&await gue(e,n.messageType,s)}const yD="@firebase/messaging",jD="0.12.21";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jue=e=>{const t=new hue(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>yue(t,n)),t},bue=e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:s=>RV(t,s)}};function wue(){Fd(new uc("messaging",jue,"PUBLIC")),Fd(new uc("messaging-internal",bue,"PRIVATE")),Xl(yD,jD),Xl(yD,jD,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nue(){try{await cV()}catch{return!1}return typeof window<"u"&&lV()&&zle()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sue(e,t){if(!navigator)throw es.create("only-available-in-window");return e.onMessageHandler=t,()=>{e.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $V(e=Bce()){return Nue().then(t=>{if(!t)throw es.create("unsupported-browser")},t=>{throw es.create("indexed-db-unsupported")}),uT(cT(e),"messaging").getImmediate()}async function jT(e,t){return e=cT(e),RV(e,t)}function _ue(e,t){return e=cT(e),Sue(e,t)}wue();const Pue=()=>({apiKey:"AIzaSyBbHSV2EJZ9BPE1C1ZC4_ZNYwFYJIR9VSo",authDomain:"myweb-1c1f37b3.firebaseapp.com",projectId:"myweb-1c1f37b3",storageBucket:"myweb-1c1f37b3.firebasestorage.app",messagingSenderId:"774950702828",appId:"1:774950702828:web:09c2dfc1198d45244a9fc9",measurementId:"G-XH9SP47FYT"}),Cue=()=>"BBeY7MuZB7850MAibtxV4fJxcKYAF3oQxNBB60l1FzHK63IjkTSI9ZFDPW1hmHnKSJPckGFM5gu7JlaCGavnwqA",kue=e=>{const t=["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"];for(const n of t)if(!e[n])return console.error(`Firebase config missing required field: ${n}`),!1;return!0},_u=Pue(),Gf=Cue();let Bv=null,Il=null;const wg=async()=>{try{if(console.log(" Initializing Firebase Cloud Messaging..."),console.log(" Firebase Config:",{apiKey:_u.apiKey?`${_u.apiKey.substring(0,20)}...`:"missing",projectId:_u.projectId,messagingSenderId:_u.messagingSenderId}),console.log(" VAPID Key:",Gf?`${Gf.substring(0,20)}...`:"missing"),!kue(_u))throw new Error("Invalid Firebase configuration");if(Bv||(Bv=hT(_u),console.log(" Firebase App initialized")),!Il&&"serviceWorker"in navigator){if(Il=$V(Bv),console.log(" Firebase Messaging initialized"),await navigator.serviceWorker.getRegistration("/firebase-messaging-sw.js"))console.log(" Firebase service worker already registered");else{console.log(" Registering Firebase service worker...");try{const t=await navigator.serviceWorker.register("/firebase-messaging-sw.js");console.log(" Firebase service worker registered:",t.scope)}catch(t){throw console.error(" Service worker registration failed:",t),new Error(`Service worker registration failed: ${(t==null?void 0:t.message)||"Unknown error"}`)}}if(console.log(" Checking notification permission:",Notification.permission),Notification.permission==="granted")try{console.log(" Permission granted, generating FCM token...");const t=await jT(Il,{vapidKey:Gf});t&&(console.log(" FCM Token automatically generated on initialization!"),console.log(" Firebase Cloud Messaging Token:"),console.log(" FCM Token:",t),console.log(" Token Length:",t.length,"characters"),console.log(" Copy this token for testing:",t),console.log(" Token (abbreviated):",t.substring(0,20)+"..."+t.substring(t.length-20)))}catch(t){console.error(" Error generating FCM token:",t)}else console.log(" FCM Token will be generated when permission is granted"),console.log(" Call requestNotificationPermission() to get the token")}return{app:Bv,messaging:Il}}catch(e){throw console.error(" Error initializing Firebase:",e),e}},Ub=async()=>{try{return Notification.permission==="granted"?!0:await Notification.requestPermission()==="granted"}catch(e){return console.error("Error requesting notification permission:",e),!1}},bT=async()=>{try{if(console.log(" Starting FCM token generation process..."),Notification.permission!=="granted")throw console.log(" Notification permission not granted. Current status:",Notification.permission),new Error("Notification permission is required to generate FCM token. Please grant permission first.");if(await wg(),!Il)throw new Error("Firebase messaging not initialized properly");console.log(" Attempting to get FCM token with VAPID key...");const e=await jT(Il,{vapidKey:Gf});if(!e)throw new Error("Failed to generate FCM token. This may be due to blocked notifications or browser restrictions.");return console.log(" Firebase Cloud Messaging Token:"),console.log(" FCM Token:",e),console.log(" Token Length:",e.length,"characters"),console.log(" Copy this token for testing:",e),console.log(" Token (abbreviated):",e.substring(0,20)+"..."+e.substring(e.length-20)),e}catch(e){throw console.error(" Error getting Firebase token:",e),(e==null?void 0:e.code)==="messaging/permission-blocked"?new Error("Push notifications are blocked in your browser. Please enable notifications and try again."):(e==null?void 0:e.code)==="messaging/token-subscribe-failed"?new Error("Failed to subscribe to FCM. This may be due to network issues or Firebase configuration problems."):(e==null?void 0:e.code)==="messaging/invalid-vapid-key"?new Error("Invalid VAPID key configuration. Please check Firebase project settings."):e}},FV=async(e,t)=>{try{const n=await fetch("/api/device-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,token:t,deviceType:"web"})});if(!n.ok)throw new Error(`Failed to save token: ${n.statusText}`);return!0}catch(n){throw console.error("Error saving device token:",n),n}},zV=e=>{Il&&_ue(Il,t=>{var n,s,i;console.log("Foreground message received:",t);try{const{playSound:a}=require("../lib/soundEffects");a.notification()}catch(a){console.log("Sound effect not available:",a)}if(Notification.permission==="granted"){const a=new Notification(((n=t.notification)==null?void 0:n.title)||"Siraha Bazaar",{body:(s=t.notification)==null?void 0:s.body,icon:"/favicon.ico",badge:"/favicon.ico",data:t.data,tag:((i=t.data)==null?void 0:i.type)||"general",requireInteraction:!1,silent:!1,vibrate:[200,100,200]});a.onclick=()=>{window.focus(),a.close(),e&&e(t)},setTimeout(()=>a.close(),5e3)}e&&e(t)})},wT=async e=>{try{const{AndroidBridge:t}=await zp(async()=>{const{AndroidBridge:a}=await Promise.resolve().then(()=>Aue);return{AndroidBridge:a}},void 0);if(t.isAndroidApp()){t.logMessage("Setting up notifications for Android app");const a=await t.registerForNotifications(e);return a&&t.showToast("Push notifications enabled!"),a}if(!await Ub())throw new Error("Notification permission not granted");await wg();const s=await bT();if(!s)throw new Error("Failed to get Firebase token");if(await FV(e,s),t.setFirebaseToken(s),zV(a=>{console.log("Test notification received:",a)}),!(await fetch("/api/test-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,title:"Push Notifications Enabled!",message:"You will now receive notifications from Siraha Bazaar",type:"setup_test"})})).ok)throw new Error("Failed to send test notification");return!0}catch(t){throw console.error("Error testing notification setup:",t),t}},NT=()=>"Notification"in window&&"serviceWorker"in navigator,_0=Object.freeze(Object.defineProperty({__proto__:null,getFirebaseToken:bT,initializeFirebaseNotifications:wg,requestNotificationPermission:Ub,saveDeviceToken:FV,setupForegroundMessageListener:zV,supportsNotifications:NT,testNotificationSetup:wT},Symbol.toStringTag,{value:"Module"}));function Tue({className:e}){const{user:t}=rl(),[n,s]=j.useState(!1),[i,a]=j.useState(!1),[o,l]=j.useState(!1),[c,d]=j.useState(null);j.useEffect(()=>{const f=(t==null?void 0:t.id)&&NT()&&!i&&!localStorage.getItem("notification-bar-dismissed")&&Notification.permission!=="granted"&&Notification.permission!=="denied";s(f)},[t,i]);const h=async()=>{if(t!=null&&t.id){l(!0),d(null);try{await wT(t.id),s(!1),localStorage.setItem("notification-setup-complete","true")}catch(f){console.error("Failed to enable notifications:",f),d(f instanceof Error?f.message:"Failed to enable notifications")}finally{l(!1)}}},m=()=>{a(!0),s(!1),localStorage.setItem("notification-bar-dismissed","true")};return n?r.jsx("div",{className:`fixed bottom-4 left-4 right-4 z-50 md:left-auto md:right-4 md:max-w-sm ${e||""}`,children:r.jsx(G,{className:"border-blue-200 bg-blue-50",children:r.jsx(Z,{className:"p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-blue-100",children:r.jsx(Xt,{className:"h-4 w-4 text-blue-600"})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h4",{className:"text-sm font-medium text-blue-900",children:"Stay Updated!"}),r.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"Enable notifications to get instant updates on your orders and deliveries."}),r.jsxs("div",{className:"flex gap-2 mt-3",children:[r.jsxs(F,{size:"sm",onClick:h,disabled:o,className:"text-xs h-7 bg-blue-600 hover:bg-blue-700",children:[r.jsx(tu,{className:"h-3 w-3 mr-1"}),o?"Setting up...":"Enable"]}),r.jsx(F,{size:"sm",variant:"ghost",onClick:m,className:"text-xs h-7 text-blue-600 hover:bg-blue-100",children:"Not now"})]}),c&&r.jsx("p",{className:"text-xs text-red-600 mt-2",children:c})]}),r.jsx("button",{onClick:m,className:"flex-shrink-0 text-blue-400 hover:text-blue-600",children:r.jsx(Fr,{className:"h-4 w-4"})})]})})})}):null}const VE=class VE{static initialize(){return this.isAndroid=!!(window.AndroidBridge&&window.AndroidBridge.isAndroidApp),this.isAndroid?(console.log(" Android WebView detected - Bridge initialized"),this.logMessage("Android Bridge initialized successfully")):console.log(" Running in web browser - Android Bridge not available"),this.isAndroid}static isAndroidApp(){return this.isAndroid}static setFirebaseToken(t){this.isAndroid&&window.AndroidBridge?(window.AndroidBridge.setFirebaseToken(t),console.log(" Firebase token sent to Android app")):console.log(" Firebase token registered for web app")}static getFirebaseToken(){return this.isAndroid&&window.AndroidBridge?window.AndroidBridge.getFirebaseToken():""}static showToast(t){this.isAndroid&&window.AndroidBridge?window.AndroidBridge.showToast(t):console.log("Toast:",t)}static logMessage(t){this.isAndroid&&window.AndroidBridge&&window.AndroidBridge.logMessage(t)}static handleNotificationReceived(t){if(this.isAndroid)switch(this.logMessage(`Notification received: ${JSON.stringify(t)}`),t.type){case"order_update":window.location.href=`/orders/${t.orderId}`;break;case"delivery_assignment":window.location.href="/delivery-partner/dashboard";break;case"promotion":window.location.href="/special-offers";break;default:window.location.href="/"}}static setupNotificationHandlers(){this.isAndroid&&(window.addEventListener("message",t=>{t.data&&t.data.type==="notification"&&this.handleNotificationReceived(t.data)}),this.logMessage("Notification handlers setup complete"))}static async registerForNotifications(t){try{if(this.isAndroid)return this.showToast("Push notifications enabled for Android app"),!0;{const{testNotificationSetup:n}=await zp(async()=>{const{testNotificationSetup:s}=await Promise.resolve().then(()=>_0);return{testNotificationSetup:s}},void 0);return await n(t)}}catch(n){return console.error("Failed to register for notifications:",n),!1}}static getNotificationPreferences(){return this.isAndroid?{platform:"android",available:!0}:{platform:"web",available:"Notification"in window&&"serviceWorker"in navigator}}};VE.isAndroid=!1;let sx=VE;sx.initialize();const Aue=Object.freeze(Object.defineProperty({__proto__:null,AndroidBridge:sx},Symbol.toStringTag,{value:"Module"}));class ho extends re.Component{constructor(t){super(t),this.resetError=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})},this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){console.error("Error caught by boundary:",t,n),this.setState({error:t,errorInfo:n})}render(){if(this.state.hasError){if(this.props.fallback){const t=this.props.fallback;return r.jsx(t,{error:this.state.error,resetError:this.resetError})}return r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:r.jsx(G,{className:"w-full max-w-md",children:r.jsxs(Z,{className:"pt-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(wr,{className:"h-8 w-8 text-red-500 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Something went wrong"}),r.jsx("p",{className:"text-sm text-gray-600",children:"An unexpected error occurred"})]})]}),this.state.error&&r.jsx("div",{className:"mb-4 p-3 bg-red-50 rounded-md",children:r.jsx("p",{className:"text-sm text-red-800 font-mono",children:this.state.error.message})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(F,{onClick:this.resetError,className:"flex-1",children:[r.jsx(Ms,{className:"h-4 w-4 mr-2"}),"Try Again"]}),r.jsx(F,{variant:"outline",onClick:()=>window.location.reload(),className:"flex-1",children:"Reload Page"})]})]})})})}return this.props.children}}const Eue=Am("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ri=j.forwardRef(({className:e,variant:t,...n},s)=>r.jsx("div",{ref:s,role:"alert",className:Ve(Eue({variant:t}),e),...n}));ri.displayName="Alert";const Oue=j.forwardRef(({className:e,...t},n)=>r.jsx("h5",{ref:n,className:Ve("mb-1 font-medium leading-none tracking-tight",e),...t}));Oue.displayName="AlertTitle";const ni=j.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ve("text-sm [&_p]:leading-relaxed",e),...t}));ni.displayName="AlertDescription";const BV=e=>e==="food"?"https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=400&h=300&fit=crop&auto=format":"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400&h=300&fit=crop&auto=format",r2=(e,t)=>e.images&&e.images.length>0?e.images.filter(n=>n&&n.trim()!==""):e.imageUrl&&e.imageUrl.trim()!==""?[e.imageUrl]:[BV(e.productType)],n2=(e,t)=>BV(e.productType);function Wh({product:e}){const{addToCart:t}=Nc(),{toggleWishlist:n,isInWishlist:s}=vg(),{user:i}=Gt(),{toast:a}=ft(),[o,l]=j.useState(0),[c,d]=j.useState(!1),[h,m]=j.useState(null),[f,g]=j.useState(null),x=j.useRef(null),p=r2(e),y=p.length>1,b=50,w=I=>{I.preventDefault(),I.stopPropagation(),t(e.id,1),a({title:"Added to cart",description:`${e.name} has been added to your cart.`})},N=async I=>{if(I.preventDefault(),I.stopPropagation(),!i){a({title:"Login required",description:"Please login to add items to your wishlist.",variant:"destructive"});return}const T=s(e.id);await n(e.id),a({title:T?"Removed from wishlist":"Added to wishlist",description:`${e.name} has been ${T?"removed from":"added to"} your wishlist.`})},S=e.originalPrice?Math.round((Number(e.originalPrice)-Number(e.price))/Number(e.originalPrice)*100):0;j.useEffect(()=>{if(!y||!c||!window.matchMedia("(hover: hover)").matches)return;const T=setInterval(()=>{l(E=>(E+1)%p.length)},2e3);return()=>clearInterval(T)},[c,y,p.length]);const P=I=>{if(l(I),x.current){const T=I*x.current.offsetWidth;x.current.scrollTo({left:T,behavior:"smooth"})}},C=I=>{g(null),m(I.targetTouches[0].clientX)},k=I=>{g(I.targetTouches[0].clientX)},O=()=>{if(!h||!f)return;const I=h-f,T=I>b,E=I<-b;if(T){const D=o<p.length-1?o+1:0;P(D)}if(E){const D=o>0?o-1:p.length-1;P(D)}};return r.jsx(Ae,{href:`/products/${e.id}`,children:r.jsxs("div",{className:"product-card overflow-hidden group",children:[r.jsxs("div",{className:"relative overflow-hidden touch-pan-y",onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),onTouchStart:C,onTouchMove:k,onTouchEnd:O,children:[r.jsx("div",{ref:x,className:"flex transition-transform duration-500 ease-in-out",style:{transform:`translateX(-${o*100}%)`},children:p.map((I,T)=>r.jsx("img",{src:I,alt:`${e.name} ${T+1}`,className:"w-full h-40 sm:h-48 md:h-56 lg:h-60 object-cover flex-shrink-0",onError:E=>{const D=E.target;D.src.includes("unsplash")||(D.src=n2(e))},loading:"lazy"},T))}),y&&r.jsx("div",{className:"absolute bottom-1 left-1/2 -translate-x-1/2 flex gap-1 px-2 py-1 rounded-full bg-black/20 backdrop-blur-sm",children:p.map((I,T)=>r.jsx("button",{className:`transition-all duration-300 touch-manipulation ${o===T?"w-2 h-0.5 bg-white rounded-full shadow-sm sm:w-6 sm:h-2":"w-0.5 h-0.5 bg-white/60 rounded-full hover:bg-white/80 sm:w-2 sm:h-2"}`,onClick:E=>{E.preventDefault(),E.stopPropagation(),P(T)}},T))}),S>0&&r.jsxs(le,{className:"absolute top-2 left-2 bg-red-500 text-white z-10",children:[S,"% OFF"]}),y&&r.jsxs("div",{className:"absolute top-2 right-2 bg-black/70 text-white text-xs px-2 py-1 rounded-full shadow-sm backdrop-blur-sm",children:[o+1,"/",p.length]})]}),r.jsxs("div",{className:"p-2",children:[r.jsx("h3",{className:"font-medium text-foreground text-[10px] mb-1 line-clamp-2",children:e.name}),e.storeName&&r.jsxs("div",{className:"text-[9px] text-muted-foreground mb-1 flex items-center justify-between",children:[r.jsx("span",{className:"truncate",children:e.storeName}),e.storeDistance!==void 0&&r.jsxs("div",{className:"flex items-center gap-1 text-[8px] text-blue-600",children:[r.jsx(Le,{className:"h-2 w-2"}),r.jsxs("span",{children:[e.storeDistance.toFixed(1),"km"]})]})]}),e.deliveryTime&&r.jsxs("div",{className:"text-[8px] text-muted-foreground mb-1 flex items-center gap-1",children:[r.jsx(gt,{className:"h-2 w-2"}),r.jsx("span",{children:e.deliveryTime})]}),e.rating&&parseFloat(e.rating)>0&&r.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[r.jsx($t,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),r.jsx("span",{className:"text-[10px] text-gray-600",children:parseFloat(e.rating).toFixed(1)})]}),r.jsxs("div",{className:"flex items-center space-x-1 mb-2",children:[r.jsxs("span",{className:"text-xs font-bold text-foreground",children:["",Number(e.price).toLocaleString()]}),e.originalPrice&&r.jsxs("span",{className:"text-[10px] text-muted-foreground line-through",children:["",Number(e.originalPrice).toLocaleString()]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(F,{onClick:w,className:"flex-1 btn-secondary text-xs py-1 h-8",size:"sm",children:r.jsx(Bn,{className:"h-3 w-3"})}),r.jsx(F,{onClick:N,variant:"outline",className:"text-xs py-1 h-8 w-8 p-0",size:"sm",children:r.jsx(La,{className:`h-3 w-3 transition-colors ${s(e.id)?"fill-red-500 text-red-500":"text-gray-600 hover:text-red-400"}`})})]})]})]})})}function Hh(e,t){const s=(t.latitude-e.latitude)*Math.PI/180,i=(t.longitude-e.longitude)*Math.PI/180,a=Math.sin(s/2)*Math.sin(s/2)+Math.cos(e.latitude*Math.PI/180)*Math.cos(t.latitude*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2),l=6371*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)));return Math.round(l*100)/100}function Go(){return new Promise((e,t)=>{if(!navigator.geolocation){t(new Error("Geolocation is not supported by this browser"));return}navigator.geolocation.getCurrentPosition(n=>{e({latitude:n.coords.latitude,longitude:n.coords.longitude})},n=>{switch(n.code){case n.PERMISSION_DENIED:t(new Error("Location access denied by user"));break;case n.POSITION_UNAVAILABLE:t(new Error("Location information is unavailable"));break;case n.TIMEOUT:t(new Error("Location request timed out"));break;default:t(new Error("An unknown error occurred while retrieving location"));break}},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})})}function Ql(e){return e<1?`${Math.round(e*1e3)}m`:`${e.toFixed(1)}km`}async function VV(e){try{return console.log(`Geocoding address: ${e}`),null}catch(t){return console.error("Geocoding failed:",t),null}}function UV({store:e,showDistance:t=!0}){const[n,s]=j.useState(null),[i,a]=j.useState(!1),[o,l]=j.useState(null);j.useEffect(()=>{t&&e.latitude&&e.longitude&&(a(!0),Go().then(h=>{l(h);const m=Hh(h,{latitude:parseFloat(e.latitude),longitude:parseFloat(e.longitude)});s(m),a(!1)}).catch(()=>{a(!1)}))},[e.latitude,e.longitude,t]);const c=()=>{if(e.latitude&&e.longitude){const h=`https://maps.google.com/?q=${e.latitude},${e.longitude}`;window.open(h,"_blank")}},d=()=>{if(e.latitude&&e.longitude&&o){const h=`https://maps.google.com/maps?saddr=${o.latitude},${o.longitude}&daddr=${e.latitude},${e.longitude}`;window.open(h,"_blank")}else if(e.latitude&&e.longitude){const h=`https://maps.google.com/maps?daddr=${e.latitude},${e.longitude}`;window.open(h,"_blank")}};return r.jsx(Ae,{href:`/store/${e.id}`,children:r.jsxs(G,{className:"hover:shadow-lg transition-shadow duration-200 cursor-pointer group",children:[r.jsx(se,{className:"pb-2 p-3",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-sm group-hover:text-primary transition-colors line-clamp-1",children:e.name}),r.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[r.jsx(le,{variant:e.storeType==="restaurant"?"default":"secondary",className:"text-xs px-1 py-0",children:e.storeType==="restaurant"?"Restaurant":"Retail"}),e.cuisineType&&r.jsx(le,{variant:"outline",className:"text-xs px-1 py-0",children:e.cuisineType})]})]}),r.jsx("img",{src:e.logo||"https://images.unsplash.com/photo-1560472355-536de3962603?w=400&h=400&fit=crop&crop=center",alt:`${e.name} logo`,className:"w-8 h-8 rounded object-cover",onError:h=>{h.currentTarget.src="https://images.unsplash.com/photo-1560472355-536de3962603?w=400&h=400&fit=crop&crop=center"}})]})}),r.jsxs(Z,{className:"space-y-2 p-3 pt-0",children:[r.jsx("img",{src:e.coverImage||(e.storeType==="restaurant"?"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800&h=400&fit=crop&crop=center":"https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=800&h=400&fit=crop&crop=center"),alt:`${e.name} cover`,className:"w-full h-20 rounded object-cover",onError:h=>{h.currentTarget.src=e.storeType==="restaurant"?"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800&h=400&fit=crop&crop=center":"https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=800&h=400&fit=crop&crop=center"}}),r.jsxs("div",{className:"flex items-center justify-between gap-2 text-xs text-muted-foreground",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx($t,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),r.jsx("span",{children:parseFloat(e.rating).toFixed(1)}),r.jsxs("span",{children:["(",e.totalReviews,")"]})]}),e.deliveryTime&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(gt,{className:"h-3 w-3"}),r.jsx("span",{className:"truncate",children:e.deliveryTime})]})]}),t&&r.jsx("div",{className:"flex-shrink-0",children:i?r.jsxs(le,{variant:"outline",className:"text-xs animate-pulse",children:[r.jsx(Le,{className:"h-3 w-3 mr-1"}),"..."]}):n!==null?r.jsx(le,{variant:n<=1?"default":n<=5?"secondary":"outline",className:"text-xs font-medium bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100",children:Ql(n)}):null})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[r.jsx(Le,{className:"h-3 w-3 text-muted-foreground flex-shrink-0"}),r.jsx("span",{className:"text-muted-foreground flex-1 line-clamp-1",children:e.address})]}),e.latitude&&e.longitude&&r.jsxs("div",{className:"text-xs text-muted-foreground/70 font-mono",children:[" ",parseFloat(e.latitude).toFixed(4),", ",parseFloat(e.longitude).toFixed(4)]})]}),e.latitude&&e.longitude&&r.jsxs("div",{className:"flex gap-1 pt-1",children:[r.jsx(F,{variant:"outline",size:"sm",onClick:h=>{h.preventDefault(),h.stopPropagation(),c()},className:"flex-1 text-xs h-7 w-7 p-0",children:r.jsx(oh,{className:"h-3 w-3"})}),r.jsx(F,{variant:"outline",size:"sm",onClick:h=>{h.preventDefault(),h.stopPropagation(),d()},className:"flex-1 text-xs h-7 w-7 p-0",children:r.jsx(jt,{className:"h-3 w-3"})})]}),e.isDeliveryAvailable&&r.jsx(le,{className:"w-full justify-center text-xs py-1",children:"Delivery Available"})]})]})})}function bD(e){return e!==null&&typeof e=="object"&&"constructor"in e&&e.constructor===Object}function ST(e,t){e===void 0&&(e={}),t===void 0&&(t={});const n=["__proto__","constructor","prototype"];Object.keys(t).filter(s=>n.indexOf(s)<0).forEach(s=>{typeof e[s]>"u"?e[s]=t[s]:bD(t[s])&&bD(e[s])&&Object.keys(t[s]).length>0&&ST(e[s],t[s])})}const WV={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function $a(){const e=typeof document<"u"?document:{};return ST(e,WV),e}const Mue={document:WV,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(e){return typeof setTimeout>"u"?(e(),null):setTimeout(e,0)},cancelAnimationFrame(e){typeof setTimeout>"u"||clearTimeout(e)}};function ys(){const e=typeof window<"u"?window:{};return ST(e,Mue),e}function Due(e){return e===void 0&&(e=""),e.trim().split(" ").filter(t=>!!t.trim())}function Iue(e){const t=e;Object.keys(t).forEach(n=>{try{t[n]=null}catch{}try{delete t[n]}catch{}})}function s2(e,t){return t===void 0&&(t=0),setTimeout(e,t)}function yd(){return Date.now()}function Lue(e){const t=ys();let n;return t.getComputedStyle&&(n=t.getComputedStyle(e,null)),!n&&e.currentStyle&&(n=e.currentStyle),n||(n=e.style),n}function Rue(e,t){t===void 0&&(t="x");const n=ys();let s,i,a;const o=Lue(e);return n.WebKitCSSMatrix?(i=o.transform||o.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map(l=>l.replace(",",".")).join(", ")),a=new n.WebKitCSSMatrix(i==="none"?"":i)):(a=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),s=a.toString().split(",")),t==="x"&&(n.WebKitCSSMatrix?i=a.m41:s.length===16?i=parseFloat(s[12]):i=parseFloat(s[4])),t==="y"&&(n.WebKitCSSMatrix?i=a.m42:s.length===16?i=parseFloat(s[13]):i=parseFloat(s[5])),i||0}function Vv(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"}function $ue(e){return typeof window<"u"&&typeof window.HTMLElement<"u"?e instanceof HTMLElement:e&&(e.nodeType===1||e.nodeType===11)}function Bs(){const e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"];for(let n=1;n<arguments.length;n+=1){const s=n<0||arguments.length<=n?void 0:arguments[n];if(s!=null&&!$ue(s)){const i=Object.keys(Object(s)).filter(a=>t.indexOf(a)<0);for(let a=0,o=i.length;a<o;a+=1){const l=i[a],c=Object.getOwnPropertyDescriptor(s,l);c!==void 0&&c.enumerable&&(Vv(e[l])&&Vv(s[l])?s[l].__swiper__?e[l]=s[l]:Bs(e[l],s[l]):!Vv(e[l])&&Vv(s[l])?(e[l]={},s[l].__swiper__?e[l]=s[l]:Bs(e[l],s[l])):e[l]=s[l])}}}return e}function Uv(e,t,n){e.style.setProperty(t,n)}function HV(e){let{swiper:t,targetPosition:n,side:s}=e;const i=ys(),a=-t.translate;let o=null,l;const c=t.params.speed;t.wrapperEl.style.scrollSnapType="none",i.cancelAnimationFrame(t.cssModeFrameID);const d=n>a?"next":"prev",h=(f,g)=>d==="next"&&f>=g||d==="prev"&&f<=g,m=()=>{l=new Date().getTime(),o===null&&(o=l);const f=Math.max(Math.min((l-o)/c,1),0),g=.5-Math.cos(f*Math.PI)/2;let x=a+g*(n-a);if(h(x,n)&&(x=n),t.wrapperEl.scrollTo({[s]:x}),h(x,n)){t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout(()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[s]:x})}),i.cancelAnimationFrame(t.cssModeFrameID);return}t.cssModeFrameID=i.requestAnimationFrame(m)};m()}function Aa(e,t){t===void 0&&(t="");const n=ys(),s=[...e.children];return n.HTMLSlotElement&&e instanceof HTMLSlotElement&&s.push(...e.assignedElements()),t?s.filter(i=>i.matches(t)):s}function Fue(e,t){const n=[t];for(;n.length>0;){const s=n.shift();if(e===s)return!0;n.push(...s.children,...s.shadowRoot?s.shadowRoot.children:[],...s.assignedElements?s.assignedElements():[])}}function zue(e,t){const n=ys();let s=t.contains(e);return!s&&n.HTMLSlotElement&&t instanceof HTMLSlotElement&&(s=[...t.assignedElements()].includes(e),s||(s=Fue(e,t))),s}function P0(e){try{console.warn(e);return}catch{}}function C0(e,t){t===void 0&&(t=[]);const n=document.createElement(e);return n.classList.add(...Array.isArray(t)?t:Due(t)),n}function Bue(e,t){const n=[];for(;e.previousElementSibling;){const s=e.previousElementSibling;t?s.matches(t)&&n.push(s):n.push(s),e=s}return n}function Vue(e,t){const n=[];for(;e.nextElementSibling;){const s=e.nextElementSibling;t?s.matches(t)&&n.push(s):n.push(s),e=s}return n}function Ll(e,t){return ys().getComputedStyle(e,null).getPropertyValue(t)}function k0(e){let t=e,n;if(t){for(n=0;(t=t.previousSibling)!==null;)t.nodeType===1&&(n+=1);return n}}function qV(e,t){const n=[];let s=e.parentElement;for(;s;)t?s.matches(t)&&n.push(s):n.push(s),s=s.parentElement;return n}function P1(e,t){function n(s){s.target===e&&(t.call(e,s),e.removeEventListener("transitionend",n))}t&&e.addEventListener("transitionend",n)}function i2(e,t,n){const s=ys();return e[t==="width"?"offsetWidth":"offsetHeight"]+parseFloat(s.getComputedStyle(e,null).getPropertyValue(t==="width"?"margin-right":"margin-top"))+parseFloat(s.getComputedStyle(e,null).getPropertyValue(t==="width"?"margin-left":"margin-bottom"))}function kn(e){return(Array.isArray(e)?e:[e]).filter(t=>!!t)}function T0(e,t){t===void 0&&(t=""),typeof trustedTypes<"u"?e.innerHTML=trustedTypes.createPolicy("html",{createHTML:n=>n}).createHTML(t):e.innerHTML=t}let C1;function Uue(){const e=ys(),t=$a();return{smoothScroll:t.documentElement&&t.documentElement.style&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch)}}function KV(){return C1||(C1=Uue()),C1}let k1;function Wue(e){let{userAgent:t}=e===void 0?{}:e;const n=KV(),s=ys(),i=s.navigator.platform,a=t||s.navigator.userAgent,o={ios:!1,android:!1},l=s.screen.width,c=s.screen.height,d=a.match(/(Android);?[\s\/]+([\d.]+)?/);let h=a.match(/(iPad).*OS\s([\d_]+)/);const m=a.match(/(iPod)(.*OS\s([\d_]+))?/),f=!h&&a.match(/(iPhone\sOS|iOS)\s([\d_]+)/),g=i==="Win32";let x=i==="MacIntel";const p=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!h&&x&&n.touch&&p.indexOf(`${l}x${c}`)>=0&&(h=a.match(/(Version)\/([\d.]+)/),h||(h=[0,1,"13_0_0"]),x=!1),d&&!g&&(o.os="android",o.android=!0),(h||f||m)&&(o.os="ios",o.ios=!0),o}function GV(e){return e===void 0&&(e={}),k1||(k1=Wue(e)),k1}let T1;function Hue(){const e=ys(),t=GV();let n=!1;function s(){const l=e.navigator.userAgent.toLowerCase();return l.indexOf("safari")>=0&&l.indexOf("chrome")<0&&l.indexOf("android")<0}if(s()){const l=String(e.navigator.userAgent);if(l.includes("Version/")){const[c,d]=l.split("Version/")[1].split(" ")[0].split(".").map(h=>Number(h));n=c<16||c===16&&d<2}}const i=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent),a=s(),o=a||i&&t.ios;return{isSafari:n||a,needPerspectiveFix:n,need3dFix:o,isWebView:i}}function ZV(){return T1||(T1=Hue()),T1}function que(e){let{swiper:t,on:n,emit:s}=e;const i=ys();let a=null,o=null;const l=()=>{!t||t.destroyed||!t.initialized||(s("beforeResize"),s("resize"))},c=()=>{!t||t.destroyed||!t.initialized||(a=new ResizeObserver(m=>{o=i.requestAnimationFrame(()=>{const{width:f,height:g}=t;let x=f,p=g;m.forEach(y=>{let{contentBoxSize:b,contentRect:w,target:N}=y;N&&N!==t.el||(x=w?w.width:(b[0]||b).inlineSize,p=w?w.height:(b[0]||b).blockSize)}),(x!==f||p!==g)&&l()})}),a.observe(t.el))},d=()=>{o&&i.cancelAnimationFrame(o),a&&a.unobserve&&t.el&&(a.unobserve(t.el),a=null)},h=()=>{!t||t.destroyed||!t.initialized||s("orientationchange")};n("init",()=>{if(t.params.resizeObserver&&typeof i.ResizeObserver<"u"){c();return}i.addEventListener("resize",l),i.addEventListener("orientationchange",h)}),n("destroy",()=>{d(),i.removeEventListener("resize",l),i.removeEventListener("orientationchange",h)})}function Kue(e){let{swiper:t,extendParams:n,on:s,emit:i}=e;const a=[],o=ys(),l=function(h,m){m===void 0&&(m={});const f=o.MutationObserver||o.WebkitMutationObserver,g=new f(x=>{if(t.__preventObserver__)return;if(x.length===1){i("observerUpdate",x[0]);return}const p=function(){i("observerUpdate",x[0])};o.requestAnimationFrame?o.requestAnimationFrame(p):o.setTimeout(p,0)});g.observe(h,{attributes:typeof m.attributes>"u"?!0:m.attributes,childList:t.isElement||(typeof m.childList>"u"?!0:m).childList,characterData:typeof m.characterData>"u"?!0:m.characterData}),a.push(g)},c=()=>{if(t.params.observer){if(t.params.observeParents){const h=qV(t.hostEl);for(let m=0;m<h.length;m+=1)l(h[m])}l(t.hostEl,{childList:t.params.observeSlideChildren}),l(t.wrapperEl,{attributes:!1})}},d=()=>{a.forEach(h=>{h.disconnect()}),a.splice(0,a.length)};n({observer:!1,observeParents:!1,observeSlideChildren:!1}),s("init",c),s("destroy",d)}var Gue={on(e,t,n){const s=this;if(!s.eventsListeners||s.destroyed||typeof t!="function")return s;const i=n?"unshift":"push";return e.split(" ").forEach(a=>{s.eventsListeners[a]||(s.eventsListeners[a]=[]),s.eventsListeners[a][i](t)}),s},once(e,t,n){const s=this;if(!s.eventsListeners||s.destroyed||typeof t!="function")return s;function i(){s.off(e,i),i.__emitterProxy&&delete i.__emitterProxy;for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];t.apply(s,o)}return i.__emitterProxy=t,s.on(e,i,n)},onAny(e,t){const n=this;if(!n.eventsListeners||n.destroyed||typeof e!="function")return n;const s=t?"unshift":"push";return n.eventsAnyListeners.indexOf(e)<0&&n.eventsAnyListeners[s](e),n},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsAnyListeners)return t;const n=t.eventsAnyListeners.indexOf(e);return n>=0&&t.eventsAnyListeners.splice(n,1),t},off(e,t){const n=this;return!n.eventsListeners||n.destroyed||!n.eventsListeners||e.split(" ").forEach(s=>{typeof t>"u"?n.eventsListeners[s]=[]:n.eventsListeners[s]&&n.eventsListeners[s].forEach((i,a)=>{(i===t||i.__emitterProxy&&i.__emitterProxy===t)&&n.eventsListeners[s].splice(a,1)})}),n},emit(){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsListeners)return e;let t,n,s;for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return typeof a[0]=="string"||Array.isArray(a[0])?(t=a[0],n=a.slice(1,a.length),s=e):(t=a[0].events,n=a[0].data,s=a[0].context||e),n.unshift(s),(Array.isArray(t)?t:t.split(" ")).forEach(c=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach(d=>{d.apply(s,[c,...n])}),e.eventsListeners&&e.eventsListeners[c]&&e.eventsListeners[c].forEach(d=>{d.apply(s,n)})}),e}};function Zue(){const e=this;let t,n;const s=e.el;typeof e.params.width<"u"&&e.params.width!==null?t=e.params.width:t=s.clientWidth,typeof e.params.height<"u"&&e.params.height!==null?n=e.params.height:n=s.clientHeight,!(t===0&&e.isHorizontal()||n===0&&e.isVertical())&&(t=t-parseInt(Ll(s,"padding-left")||0,10)-parseInt(Ll(s,"padding-right")||0,10),n=n-parseInt(Ll(s,"padding-top")||0,10)-parseInt(Ll(s,"padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(n)&&(n=0),Object.assign(e,{width:t,height:n,size:e.isHorizontal()?t:n}))}function Yue(){const e=this;function t(T,E){return parseFloat(T.getPropertyValue(e.getDirectionLabel(E))||0)}const n=e.params,{wrapperEl:s,slidesEl:i,size:a,rtlTranslate:o,wrongRTL:l}=e,c=e.virtual&&n.virtual.enabled,d=c?e.virtual.slides.length:e.slides.length,h=Aa(i,`.${e.params.slideClass}, swiper-slide`),m=c?e.virtual.slides.length:h.length;let f=[];const g=[],x=[];let p=n.slidesOffsetBefore;typeof p=="function"&&(p=n.slidesOffsetBefore.call(e));let y=n.slidesOffsetAfter;typeof y=="function"&&(y=n.slidesOffsetAfter.call(e));const b=e.snapGrid.length,w=e.slidesGrid.length;let N=n.spaceBetween,S=-p,P=0,C=0;if(typeof a>"u")return;typeof N=="string"&&N.indexOf("%")>=0?N=parseFloat(N.replace("%",""))/100*a:typeof N=="string"&&(N=parseFloat(N)),e.virtualSize=-N,h.forEach(T=>{o?T.style.marginLeft="":T.style.marginRight="",T.style.marginBottom="",T.style.marginTop=""}),n.centeredSlides&&n.cssMode&&(Uv(s,"--swiper-centered-offset-before",""),Uv(s,"--swiper-centered-offset-after",""));const k=n.grid&&n.grid.rows>1&&e.grid;k?e.grid.initSlides(h):e.grid&&e.grid.unsetSlides();let O;const I=n.slidesPerView==="auto"&&n.breakpoints&&Object.keys(n.breakpoints).filter(T=>typeof n.breakpoints[T].slidesPerView<"u").length>0;for(let T=0;T<m;T+=1){O=0;let E;if(h[T]&&(E=h[T]),k&&e.grid.updateSlide(T,E,h),!(h[T]&&Ll(E,"display")==="none")){if(n.slidesPerView==="auto"){I&&(h[T].style[e.getDirectionLabel("width")]="");const D=getComputedStyle(E),B=E.style.transform,M=E.style.webkitTransform;if(B&&(E.style.transform="none"),M&&(E.style.webkitTransform="none"),n.roundLengths)O=e.isHorizontal()?i2(E,"width"):i2(E,"height");else{const U=t(D,"width"),H=t(D,"padding-left"),K=t(D,"padding-right"),W=t(D,"margin-left"),V=t(D,"margin-right"),z=D.getPropertyValue("box-sizing");if(z&&z==="border-box")O=U+W+V;else{const{clientWidth:q,offsetWidth:J}=E;O=U+H+K+W+V+(J-q)}}B&&(E.style.transform=B),M&&(E.style.webkitTransform=M),n.roundLengths&&(O=Math.floor(O))}else O=(a-(n.slidesPerView-1)*N)/n.slidesPerView,n.roundLengths&&(O=Math.floor(O)),h[T]&&(h[T].style[e.getDirectionLabel("width")]=`${O}px`);h[T]&&(h[T].swiperSlideSize=O),x.push(O),n.centeredSlides?(S=S+O/2+P/2+N,P===0&&T!==0&&(S=S-a/2-N),T===0&&(S=S-a/2-N),Math.abs(S)<1/1e3&&(S=0),n.roundLengths&&(S=Math.floor(S)),C%n.slidesPerGroup===0&&f.push(S),g.push(S)):(n.roundLengths&&(S=Math.floor(S)),(C-Math.min(e.params.slidesPerGroupSkip,C))%e.params.slidesPerGroup===0&&f.push(S),g.push(S),S=S+O+N),e.virtualSize+=O+N,P=O,C+=1}}if(e.virtualSize=Math.max(e.virtualSize,a)+y,o&&l&&(n.effect==="slide"||n.effect==="coverflow")&&(s.style.width=`${e.virtualSize+N}px`),n.setWrapperSize&&(s.style[e.getDirectionLabel("width")]=`${e.virtualSize+N}px`),k&&e.grid.updateWrapperSize(O,f),!n.centeredSlides){const T=[];for(let E=0;E<f.length;E+=1){let D=f[E];n.roundLengths&&(D=Math.floor(D)),f[E]<=e.virtualSize-a&&T.push(D)}f=T,Math.floor(e.virtualSize-a)-Math.floor(f[f.length-1])>1&&f.push(e.virtualSize-a)}if(c&&n.loop){const T=x[0]+N;if(n.slidesPerGroup>1){const E=Math.ceil((e.virtual.slidesBefore+e.virtual.slidesAfter)/n.slidesPerGroup),D=T*n.slidesPerGroup;for(let B=0;B<E;B+=1)f.push(f[f.length-1]+D)}for(let E=0;E<e.virtual.slidesBefore+e.virtual.slidesAfter;E+=1)n.slidesPerGroup===1&&f.push(f[f.length-1]+T),g.push(g[g.length-1]+T),e.virtualSize+=T}if(f.length===0&&(f=[0]),N!==0){const T=e.isHorizontal()&&o?"marginLeft":e.getDirectionLabel("marginRight");h.filter((E,D)=>!n.cssMode||n.loop?!0:D!==h.length-1).forEach(E=>{E.style[T]=`${N}px`})}if(n.centeredSlides&&n.centeredSlidesBounds){let T=0;x.forEach(D=>{T+=D+(N||0)}),T-=N;const E=T>a?T-a:0;f=f.map(D=>D<=0?-p:D>E?E+y:D)}if(n.centerInsufficientSlides){let T=0;x.forEach(D=>{T+=D+(N||0)}),T-=N;const E=(n.slidesOffsetBefore||0)+(n.slidesOffsetAfter||0);if(T+E<a){const D=(a-T-E)/2;f.forEach((B,M)=>{f[M]=B-D}),g.forEach((B,M)=>{g[M]=B+D})}}if(Object.assign(e,{slides:h,snapGrid:f,slidesGrid:g,slidesSizesGrid:x}),n.centeredSlides&&n.cssMode&&!n.centeredSlidesBounds){Uv(s,"--swiper-centered-offset-before",`${-f[0]}px`),Uv(s,"--swiper-centered-offset-after",`${e.size/2-x[x.length-1]/2}px`);const T=-e.snapGrid[0],E=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map(D=>D+T),e.slidesGrid=e.slidesGrid.map(D=>D+E)}if(m!==d&&e.emit("slidesLengthChange"),f.length!==b&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),g.length!==w&&e.emit("slidesGridLengthChange"),n.watchSlidesProgress&&e.updateSlidesOffset(),e.emit("slidesUpdated"),!c&&!n.cssMode&&(n.effect==="slide"||n.effect==="fade")){const T=`${n.containerModifierClass}backface-hidden`,E=e.el.classList.contains(T);m<=n.maxBackfaceHiddenSlides?E||e.el.classList.add(T):E&&e.el.classList.remove(T)}}function Xue(e){const t=this,n=[],s=t.virtual&&t.params.virtual.enabled;let i=0,a;typeof e=="number"?t.setTransition(e):e===!0&&t.setTransition(t.params.speed);const o=l=>s?t.slides[t.getSlideIndexByData(l)]:t.slides[l];if(t.params.slidesPerView!=="auto"&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||[]).forEach(l=>{n.push(l)});else for(a=0;a<Math.ceil(t.params.slidesPerView);a+=1){const l=t.activeIndex+a;if(l>t.slides.length&&!s)break;n.push(o(l))}else n.push(o(t.activeIndex));for(a=0;a<n.length;a+=1)if(typeof n[a]<"u"){const l=n[a].offsetHeight;i=l>i?l:i}(i||i===0)&&(t.wrapperEl.style.height=`${i}px`)}function Que(){const e=this,t=e.slides,n=e.isElement?e.isHorizontal()?e.wrapperEl.offsetLeft:e.wrapperEl.offsetTop:0;for(let s=0;s<t.length;s+=1)t[s].swiperSlideOffset=(e.isHorizontal()?t[s].offsetLeft:t[s].offsetTop)-n-e.cssOverflowAdjustment()}const wD=(e,t,n)=>{t&&!e.classList.contains(n)?e.classList.add(n):!t&&e.classList.contains(n)&&e.classList.remove(n)};function Jue(e){e===void 0&&(e=this&&this.translate||0);const t=this,n=t.params,{slides:s,rtlTranslate:i,snapGrid:a}=t;if(s.length===0)return;typeof s[0].swiperSlideOffset>"u"&&t.updateSlidesOffset();let o=-e;i&&(o=e),t.visibleSlidesIndexes=[],t.visibleSlides=[];let l=n.spaceBetween;typeof l=="string"&&l.indexOf("%")>=0?l=parseFloat(l.replace("%",""))/100*t.size:typeof l=="string"&&(l=parseFloat(l));for(let c=0;c<s.length;c+=1){const d=s[c];let h=d.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(h-=s[0].swiperSlideOffset);const m=(o+(n.centeredSlides?t.minTranslate():0)-h)/(d.swiperSlideSize+l),f=(o-a[0]+(n.centeredSlides?t.minTranslate():0)-h)/(d.swiperSlideSize+l),g=-(o-h),x=g+t.slidesSizesGrid[c],p=g>=0&&g<=t.size-t.slidesSizesGrid[c],y=g>=0&&g<t.size-1||x>1&&x<=t.size||g<=0&&x>=t.size;y&&(t.visibleSlides.push(d),t.visibleSlidesIndexes.push(c)),wD(d,y,n.slideVisibleClass),wD(d,p,n.slideFullyVisibleClass),d.progress=i?-m:m,d.originalProgress=i?-f:f}}function ehe(e){const t=this;if(typeof e>"u"){const h=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*h||0}const n=t.params,s=t.maxTranslate()-t.minTranslate();let{progress:i,isBeginning:a,isEnd:o,progressLoop:l}=t;const c=a,d=o;if(s===0)i=0,a=!0,o=!0;else{i=(e-t.minTranslate())/s;const h=Math.abs(e-t.minTranslate())<1,m=Math.abs(e-t.maxTranslate())<1;a=h||i<=0,o=m||i>=1,h&&(i=0),m&&(i=1)}if(n.loop){const h=t.getSlideIndexByData(0),m=t.getSlideIndexByData(t.slides.length-1),f=t.slidesGrid[h],g=t.slidesGrid[m],x=t.slidesGrid[t.slidesGrid.length-1],p=Math.abs(e);p>=f?l=(p-f)/x:l=(p+x-g)/x,l>1&&(l-=1)}Object.assign(t,{progress:i,progressLoop:l,isBeginning:a,isEnd:o}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&t.updateSlidesProgress(e),a&&!c&&t.emit("reachBeginning toEdge"),o&&!d&&t.emit("reachEnd toEdge"),(c&&!a||d&&!o)&&t.emit("fromEdge"),t.emit("progress",i)}const A1=(e,t,n)=>{t&&!e.classList.contains(n)?e.classList.add(n):!t&&e.classList.contains(n)&&e.classList.remove(n)};function the(){const e=this,{slides:t,params:n,slidesEl:s,activeIndex:i}=e,a=e.virtual&&n.virtual.enabled,o=e.grid&&n.grid&&n.grid.rows>1,l=m=>Aa(s,`.${n.slideClass}${m}, swiper-slide${m}`)[0];let c,d,h;if(a)if(n.loop){let m=i-e.virtual.slidesBefore;m<0&&(m=e.virtual.slides.length+m),m>=e.virtual.slides.length&&(m-=e.virtual.slides.length),c=l(`[data-swiper-slide-index="${m}"]`)}else c=l(`[data-swiper-slide-index="${i}"]`);else o?(c=t.find(m=>m.column===i),h=t.find(m=>m.column===i+1),d=t.find(m=>m.column===i-1)):c=t[i];c&&(o||(h=Vue(c,`.${n.slideClass}, swiper-slide`)[0],n.loop&&!h&&(h=t[0]),d=Bue(c,`.${n.slideClass}, swiper-slide`)[0],n.loop&&!d===0&&(d=t[t.length-1]))),t.forEach(m=>{A1(m,m===c,n.slideActiveClass),A1(m,m===h,n.slideNextClass),A1(m,m===d,n.slidePrevClass)}),e.emitSlidesClasses()}const Ty=(e,t)=>{if(!e||e.destroyed||!e.params)return;const n=()=>e.isElement?"swiper-slide":`.${e.params.slideClass}`,s=t.closest(n());if(s){let i=s.querySelector(`.${e.params.lazyPreloaderClass}`);!i&&e.isElement&&(s.shadowRoot?i=s.shadowRoot.querySelector(`.${e.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{s.shadowRoot&&(i=s.shadowRoot.querySelector(`.${e.params.lazyPreloaderClass}`),i&&i.remove())})),i&&i.remove()}},E1=(e,t)=>{if(!e.slides[t])return;const n=e.slides[t].querySelector('[loading="lazy"]');n&&n.removeAttribute("loading")},a2=e=>{if(!e||e.destroyed||!e.params)return;let t=e.params.lazyPreloadPrevNext;const n=e.slides.length;if(!n||!t||t<0)return;t=Math.min(t,n);const s=e.params.slidesPerView==="auto"?e.slidesPerViewDynamic():Math.ceil(e.params.slidesPerView),i=e.activeIndex;if(e.params.grid&&e.params.grid.rows>1){const o=i,l=[o-t];l.push(...Array.from({length:t}).map((c,d)=>o+s+d)),e.slides.forEach((c,d)=>{l.includes(c.column)&&E1(e,d)});return}const a=i+s-1;if(e.params.rewind||e.params.loop)for(let o=i-t;o<=a+t;o+=1){const l=(o%n+n)%n;(l<i||l>a)&&E1(e,l)}else for(let o=Math.max(i-t,0);o<=Math.min(a+t,n-1);o+=1)o!==i&&(o>a||o<i)&&E1(e,o)};function rhe(e){const{slidesGrid:t,params:n}=e,s=e.rtlTranslate?e.translate:-e.translate;let i;for(let a=0;a<t.length;a+=1)typeof t[a+1]<"u"?s>=t[a]&&s<t[a+1]-(t[a+1]-t[a])/2?i=a:s>=t[a]&&s<t[a+1]&&(i=a+1):s>=t[a]&&(i=a);return n.normalizeSlideIndex&&(i<0||typeof i>"u")&&(i=0),i}function nhe(e){const t=this,n=t.rtlTranslate?t.translate:-t.translate,{snapGrid:s,params:i,activeIndex:a,realIndex:o,snapIndex:l}=t;let c=e,d;const h=g=>{let x=g-t.virtual.slidesBefore;return x<0&&(x=t.virtual.slides.length+x),x>=t.virtual.slides.length&&(x-=t.virtual.slides.length),x};if(typeof c>"u"&&(c=rhe(t)),s.indexOf(n)>=0)d=s.indexOf(n);else{const g=Math.min(i.slidesPerGroupSkip,c);d=g+Math.floor((c-g)/i.slidesPerGroup)}if(d>=s.length&&(d=s.length-1),c===a&&!t.params.loop){d!==l&&(t.snapIndex=d,t.emit("snapIndexChange"));return}if(c===a&&t.params.loop&&t.virtual&&t.params.virtual.enabled){t.realIndex=h(c);return}const m=t.grid&&i.grid&&i.grid.rows>1;let f;if(t.virtual&&i.virtual.enabled&&i.loop)f=h(c);else if(m){const g=t.slides.find(p=>p.column===c);let x=parseInt(g.getAttribute("data-swiper-slide-index"),10);Number.isNaN(x)&&(x=Math.max(t.slides.indexOf(g),0)),f=Math.floor(x/i.grid.rows)}else if(t.slides[c]){const g=t.slides[c].getAttribute("data-swiper-slide-index");g?f=parseInt(g,10):f=c}else f=c;Object.assign(t,{previousSnapIndex:l,snapIndex:d,previousRealIndex:o,realIndex:f,previousIndex:a,activeIndex:c}),t.initialized&&a2(t),t.emit("activeIndexChange"),t.emit("snapIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&(o!==f&&t.emit("realIndexChange"),t.emit("slideChange"))}function she(e,t){const n=this,s=n.params;let i=e.closest(`.${s.slideClass}, swiper-slide`);!i&&n.isElement&&t&&t.length>1&&t.includes(e)&&[...t.slice(t.indexOf(e)+1,t.length)].forEach(l=>{!i&&l.matches&&l.matches(`.${s.slideClass}, swiper-slide`)&&(i=l)});let a=!1,o;if(i){for(let l=0;l<n.slides.length;l+=1)if(n.slides[l]===i){a=!0,o=l;break}}if(i&&a)n.clickedSlide=i,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(i.getAttribute("data-swiper-slide-index"),10):n.clickedIndex=o;else{n.clickedSlide=void 0,n.clickedIndex=void 0;return}s.slideToClickedSlide&&n.clickedIndex!==void 0&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}var ihe={updateSize:Zue,updateSlides:Yue,updateAutoHeight:Xue,updateSlidesOffset:Que,updateSlidesProgress:Jue,updateProgress:ehe,updateSlidesClasses:the,updateActiveIndex:nhe,updateClickedSlide:she};function ahe(e){e===void 0&&(e=this.isHorizontal()?"x":"y");const t=this,{params:n,rtlTranslate:s,translate:i,wrapperEl:a}=t;if(n.virtualTranslate)return s?-i:i;if(n.cssMode)return i;let o=Rue(a,e);return o+=t.cssOverflowAdjustment(),s&&(o=-o),o||0}function ohe(e,t){const n=this,{rtlTranslate:s,params:i,wrapperEl:a,progress:o}=n;let l=0,c=0;const d=0;n.isHorizontal()?l=s?-e:e:c=e,i.roundLengths&&(l=Math.floor(l),c=Math.floor(c)),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?l:c,i.cssMode?a[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-l:-c:i.virtualTranslate||(n.isHorizontal()?l-=n.cssOverflowAdjustment():c-=n.cssOverflowAdjustment(),a.style.transform=`translate3d(${l}px, ${c}px, ${d}px)`);let h;const m=n.maxTranslate()-n.minTranslate();m===0?h=0:h=(e-n.minTranslate())/m,h!==o&&n.updateProgress(e),n.emit("setTranslate",n.translate,t)}function lhe(){return-this.snapGrid[0]}function che(){return-this.snapGrid[this.snapGrid.length-1]}function dhe(e,t,n,s,i){e===void 0&&(e=0),t===void 0&&(t=this.params.speed),n===void 0&&(n=!0),s===void 0&&(s=!0);const a=this,{params:o,wrapperEl:l}=a;if(a.animating&&o.preventInteractionOnTransition)return!1;const c=a.minTranslate(),d=a.maxTranslate();let h;if(s&&e>c?h=c:s&&e<d?h=d:h=e,a.updateProgress(h),o.cssMode){const m=a.isHorizontal();if(t===0)l[m?"scrollLeft":"scrollTop"]=-h;else{if(!a.support.smoothScroll)return HV({swiper:a,targetPosition:-h,side:m?"left":"top"}),!0;l.scrollTo({[m?"left":"top"]:-h,behavior:"smooth"})}return!0}return t===0?(a.setTransition(0),a.setTranslate(h),n&&(a.emit("beforeTransitionStart",t,i),a.emit("transitionEnd"))):(a.setTransition(t),a.setTranslate(h),n&&(a.emit("beforeTransitionStart",t,i),a.emit("transitionStart")),a.animating||(a.animating=!0,a.onTranslateToWrapperTransitionEnd||(a.onTranslateToWrapperTransitionEnd=function(f){!a||a.destroyed||f.target===this&&(a.wrapperEl.removeEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.onTranslateToWrapperTransitionEnd=null,delete a.onTranslateToWrapperTransitionEnd,a.animating=!1,n&&a.emit("transitionEnd"))}),a.wrapperEl.addEventListener("transitionend",a.onTranslateToWrapperTransitionEnd))),!0}var uhe={getTranslate:ahe,setTranslate:ohe,minTranslate:lhe,maxTranslate:che,translateTo:dhe};function hhe(e,t){const n=this;n.params.cssMode||(n.wrapperEl.style.transitionDuration=`${e}ms`,n.wrapperEl.style.transitionDelay=e===0?"0ms":""),n.emit("setTransition",e,t)}function YV(e){let{swiper:t,runCallbacks:n,direction:s,step:i}=e;const{activeIndex:a,previousIndex:o}=t;let l=s;l||(a>o?l="next":a<o?l="prev":l="reset"),t.emit(`transition${i}`),n&&l==="reset"?t.emit(`slideResetTransition${i}`):n&&a!==o&&(t.emit(`slideChangeTransition${i}`),l==="next"?t.emit(`slideNextTransition${i}`):t.emit(`slidePrevTransition${i}`))}function mhe(e,t){e===void 0&&(e=!0);const n=this,{params:s}=n;s.cssMode||(s.autoHeight&&n.updateAutoHeight(),YV({swiper:n,runCallbacks:e,direction:t,step:"Start"}))}function fhe(e,t){e===void 0&&(e=!0);const n=this,{params:s}=n;n.animating=!1,!s.cssMode&&(n.setTransition(0),YV({swiper:n,runCallbacks:e,direction:t,step:"End"}))}var phe={setTransition:hhe,transitionStart:mhe,transitionEnd:fhe};function xhe(e,t,n,s,i){e===void 0&&(e=0),n===void 0&&(n=!0),typeof e=="string"&&(e=parseInt(e,10));const a=this;let o=e;o<0&&(o=0);const{params:l,snapGrid:c,slidesGrid:d,previousIndex:h,activeIndex:m,rtlTranslate:f,wrapperEl:g,enabled:x}=a;if(!x&&!s&&!i||a.destroyed||a.animating&&l.preventInteractionOnTransition)return!1;typeof t>"u"&&(t=a.params.speed);const p=Math.min(a.params.slidesPerGroupSkip,o);let y=p+Math.floor((o-p)/a.params.slidesPerGroup);y>=c.length&&(y=c.length-1);const b=-c[y];if(l.normalizeSlideIndex)for(let k=0;k<d.length;k+=1){const O=-Math.floor(b*100),I=Math.floor(d[k]*100),T=Math.floor(d[k+1]*100);typeof d[k+1]<"u"?O>=I&&O<T-(T-I)/2?o=k:O>=I&&O<T&&(o=k+1):O>=I&&(o=k)}if(a.initialized&&o!==m&&(!a.allowSlideNext&&(f?b>a.translate&&b>a.minTranslate():b<a.translate&&b<a.minTranslate())||!a.allowSlidePrev&&b>a.translate&&b>a.maxTranslate()&&(m||0)!==o))return!1;o!==(h||0)&&n&&a.emit("beforeSlideChangeStart"),a.updateProgress(b);let w;o>m?w="next":o<m?w="prev":w="reset";const N=a.virtual&&a.params.virtual.enabled;if(!(N&&i)&&(f&&-b===a.translate||!f&&b===a.translate))return a.updateActiveIndex(o),l.autoHeight&&a.updateAutoHeight(),a.updateSlidesClasses(),l.effect!=="slide"&&a.setTranslate(b),w!=="reset"&&(a.transitionStart(n,w),a.transitionEnd(n,w)),!1;if(l.cssMode){const k=a.isHorizontal(),O=f?b:-b;if(t===0)N&&(a.wrapperEl.style.scrollSnapType="none",a._immediateVirtual=!0),N&&!a._cssModeVirtualInitialSet&&a.params.initialSlide>0?(a._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{g[k?"scrollLeft":"scrollTop"]=O})):g[k?"scrollLeft":"scrollTop"]=O,N&&requestAnimationFrame(()=>{a.wrapperEl.style.scrollSnapType="",a._immediateVirtual=!1});else{if(!a.support.smoothScroll)return HV({swiper:a,targetPosition:O,side:k?"left":"top"}),!0;g.scrollTo({[k?"left":"top"]:O,behavior:"smooth"})}return!0}const C=ZV().isSafari;return N&&!i&&C&&a.isElement&&a.virtual.update(!1,!1,o),a.setTransition(t),a.setTranslate(b),a.updateActiveIndex(o),a.updateSlidesClasses(),a.emit("beforeTransitionStart",t,s),a.transitionStart(n,w),t===0?a.transitionEnd(n,w):a.animating||(a.animating=!0,a.onSlideToWrapperTransitionEnd||(a.onSlideToWrapperTransitionEnd=function(O){!a||a.destroyed||O.target===this&&(a.wrapperEl.removeEventListener("transitionend",a.onSlideToWrapperTransitionEnd),a.onSlideToWrapperTransitionEnd=null,delete a.onSlideToWrapperTransitionEnd,a.transitionEnd(n,w))}),a.wrapperEl.addEventListener("transitionend",a.onSlideToWrapperTransitionEnd)),!0}function ghe(e,t,n,s){e===void 0&&(e=0),n===void 0&&(n=!0),typeof e=="string"&&(e=parseInt(e,10));const i=this;if(i.destroyed)return;typeof t>"u"&&(t=i.params.speed);const a=i.grid&&i.params.grid&&i.params.grid.rows>1;let o=e;if(i.params.loop)if(i.virtual&&i.params.virtual.enabled)o=o+i.virtual.slidesBefore;else{let l;if(a){const f=o*i.params.grid.rows;l=i.slides.find(g=>g.getAttribute("data-swiper-slide-index")*1===f).column}else l=i.getSlideIndexByData(o);const c=a?Math.ceil(i.slides.length/i.params.grid.rows):i.slides.length,{centeredSlides:d}=i.params;let h=i.params.slidesPerView;h==="auto"?h=i.slidesPerViewDynamic():(h=Math.ceil(parseFloat(i.params.slidesPerView,10)),d&&h%2===0&&(h=h+1));let m=c-l<h;if(d&&(m=m||l<Math.ceil(h/2)),s&&d&&i.params.slidesPerView!=="auto"&&!a&&(m=!1),m){const f=d?l<i.activeIndex?"prev":"next":l-i.activeIndex-1<i.params.slidesPerView?"next":"prev";i.loopFix({direction:f,slideTo:!0,activeSlideIndex:f==="next"?l+1:l-c+1,slideRealIndex:f==="next"?i.realIndex:void 0})}if(a){const f=o*i.params.grid.rows;o=i.slides.find(g=>g.getAttribute("data-swiper-slide-index")*1===f).column}else o=i.getSlideIndexByData(o)}return requestAnimationFrame(()=>{i.slideTo(o,t,n,s)}),i}function vhe(e,t,n){t===void 0&&(t=!0);const s=this,{enabled:i,params:a,animating:o}=s;if(!i||s.destroyed)return s;typeof e>"u"&&(e=s.params.speed);let l=a.slidesPerGroup;a.slidesPerView==="auto"&&a.slidesPerGroup===1&&a.slidesPerGroupAuto&&(l=Math.max(s.slidesPerViewDynamic("current",!0),1));const c=s.activeIndex<a.slidesPerGroupSkip?1:l,d=s.virtual&&a.virtual.enabled;if(a.loop){if(o&&!d&&a.loopPreventsSliding)return!1;if(s.loopFix({direction:"next"}),s._clientLeft=s.wrapperEl.clientLeft,s.activeIndex===s.slides.length-1&&a.cssMode)return requestAnimationFrame(()=>{s.slideTo(s.activeIndex+c,e,t,n)}),!0}return a.rewind&&s.isEnd?s.slideTo(0,e,t,n):s.slideTo(s.activeIndex+c,e,t,n)}function yhe(e,t,n){t===void 0&&(t=!0);const s=this,{params:i,snapGrid:a,slidesGrid:o,rtlTranslate:l,enabled:c,animating:d}=s;if(!c||s.destroyed)return s;typeof e>"u"&&(e=s.params.speed);const h=s.virtual&&i.virtual.enabled;if(i.loop){if(d&&!h&&i.loopPreventsSliding)return!1;s.loopFix({direction:"prev"}),s._clientLeft=s.wrapperEl.clientLeft}const m=l?s.translate:-s.translate;function f(w){return w<0?-Math.floor(Math.abs(w)):Math.floor(w)}const g=f(m),x=a.map(w=>f(w)),p=i.freeMode&&i.freeMode.enabled;let y=a[x.indexOf(g)-1];if(typeof y>"u"&&(i.cssMode||p)){let w;a.forEach((N,S)=>{g>=N&&(w=S)}),typeof w<"u"&&(y=p?a[w]:a[w>0?w-1:w])}let b=0;if(typeof y<"u"&&(b=o.indexOf(y),b<0&&(b=s.activeIndex-1),i.slidesPerView==="auto"&&i.slidesPerGroup===1&&i.slidesPerGroupAuto&&(b=b-s.slidesPerViewDynamic("previous",!0)+1,b=Math.max(b,0))),i.rewind&&s.isBeginning){const w=s.params.virtual&&s.params.virtual.enabled&&s.virtual?s.virtual.slides.length-1:s.slides.length-1;return s.slideTo(w,e,t,n)}else if(i.loop&&s.activeIndex===0&&i.cssMode)return requestAnimationFrame(()=>{s.slideTo(b,e,t,n)}),!0;return s.slideTo(b,e,t,n)}function jhe(e,t,n){t===void 0&&(t=!0);const s=this;if(!s.destroyed)return typeof e>"u"&&(e=s.params.speed),s.slideTo(s.activeIndex,e,t,n)}function bhe(e,t,n,s){t===void 0&&(t=!0),s===void 0&&(s=.5);const i=this;if(i.destroyed)return;typeof e>"u"&&(e=i.params.speed);let a=i.activeIndex;const o=Math.min(i.params.slidesPerGroupSkip,a),l=o+Math.floor((a-o)/i.params.slidesPerGroup),c=i.rtlTranslate?i.translate:-i.translate;if(c>=i.snapGrid[l]){const d=i.snapGrid[l],h=i.snapGrid[l+1];c-d>(h-d)*s&&(a+=i.params.slidesPerGroup)}else{const d=i.snapGrid[l-1],h=i.snapGrid[l];c-d<=(h-d)*s&&(a-=i.params.slidesPerGroup)}return a=Math.max(a,0),a=Math.min(a,i.slidesGrid.length-1),i.slideTo(a,e,t,n)}function whe(){const e=this;if(e.destroyed)return;const{params:t,slidesEl:n}=e,s=t.slidesPerView==="auto"?e.slidesPerViewDynamic():t.slidesPerView;let i=e.clickedIndex,a;const o=e.isElement?"swiper-slide":`.${t.slideClass}`;if(t.loop){if(e.animating)return;a=parseInt(e.clickedSlide.getAttribute("data-swiper-slide-index"),10),t.centeredSlides?i<e.loopedSlides-s/2||i>e.slides.length-e.loopedSlides+s/2?(e.loopFix(),i=e.getSlideIndex(Aa(n,`${o}[data-swiper-slide-index="${a}"]`)[0]),s2(()=>{e.slideTo(i)})):e.slideTo(i):i>e.slides.length-s?(e.loopFix(),i=e.getSlideIndex(Aa(n,`${o}[data-swiper-slide-index="${a}"]`)[0]),s2(()=>{e.slideTo(i)})):e.slideTo(i)}else e.slideTo(i)}var Nhe={slideTo:xhe,slideToLoop:ghe,slideNext:vhe,slidePrev:yhe,slideReset:jhe,slideToClosest:bhe,slideToClickedSlide:whe};function She(e,t){const n=this,{params:s,slidesEl:i}=n;if(!s.loop||n.virtual&&n.params.virtual.enabled)return;const a=()=>{Aa(i,`.${s.slideClass}, swiper-slide`).forEach((f,g)=>{f.setAttribute("data-swiper-slide-index",g)})},o=n.grid&&s.grid&&s.grid.rows>1,l=s.slidesPerGroup*(o?s.grid.rows:1),c=n.slides.length%l!==0,d=o&&n.slides.length%s.grid.rows!==0,h=m=>{for(let f=0;f<m;f+=1){const g=n.isElement?C0("swiper-slide",[s.slideBlankClass]):C0("div",[s.slideClass,s.slideBlankClass]);n.slidesEl.append(g)}};if(c){if(s.loopAddBlankSlides){const m=l-n.slides.length%l;h(m),n.recalcSlides(),n.updateSlides()}else P0("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");a()}else if(d){if(s.loopAddBlankSlides){const m=s.grid.rows-n.slides.length%s.grid.rows;h(m),n.recalcSlides(),n.updateSlides()}else P0("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");a()}else a();n.loopFix({slideRealIndex:e,direction:s.centeredSlides?void 0:"next",initial:t})}function _he(e){let{slideRealIndex:t,slideTo:n=!0,direction:s,setTranslate:i,activeSlideIndex:a,initial:o,byController:l,byMousewheel:c}=e===void 0?{}:e;const d=this;if(!d.params.loop)return;d.emit("beforeLoopFix");const{slides:h,allowSlidePrev:m,allowSlideNext:f,slidesEl:g,params:x}=d,{centeredSlides:p,initialSlide:y}=x;if(d.allowSlidePrev=!0,d.allowSlideNext=!0,d.virtual&&x.virtual.enabled){n&&(!x.centeredSlides&&d.snapIndex===0?d.slideTo(d.virtual.slides.length,0,!1,!0):x.centeredSlides&&d.snapIndex<x.slidesPerView?d.slideTo(d.virtual.slides.length+d.snapIndex,0,!1,!0):d.snapIndex===d.snapGrid.length-1&&d.slideTo(d.virtual.slidesBefore,0,!1,!0)),d.allowSlidePrev=m,d.allowSlideNext=f,d.emit("loopFix");return}let b=x.slidesPerView;b==="auto"?b=d.slidesPerViewDynamic():(b=Math.ceil(parseFloat(x.slidesPerView,10)),p&&b%2===0&&(b=b+1));const w=x.slidesPerGroupAuto?b:x.slidesPerGroup;let N=w;N%w!==0&&(N+=w-N%w),N+=x.loopAdditionalSlides,d.loopedSlides=N;const S=d.grid&&x.grid&&x.grid.rows>1;h.length<b+N||d.params.effect==="cards"&&h.length<b+N*2?P0("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled or not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):S&&x.grid.fill==="row"&&P0("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const P=[],C=[],k=S?Math.ceil(h.length/x.grid.rows):h.length,O=o&&k-y<b&&!p;let I=O?y:d.activeIndex;typeof a>"u"?a=d.getSlideIndex(h.find(H=>H.classList.contains(x.slideActiveClass))):I=a;const T=s==="next"||!s,E=s==="prev"||!s;let D=0,B=0;const U=(S?h[a].column:a)+(p&&typeof i>"u"?-b/2+.5:0);if(U<N){D=Math.max(N-U,w);for(let H=0;H<N-U;H+=1){const K=H-Math.floor(H/k)*k;if(S){const W=k-K-1;for(let V=h.length-1;V>=0;V-=1)h[V].column===W&&P.push(V)}else P.push(k-K-1)}}else if(U+b>k-N){B=Math.max(U-(k-N*2),w),O&&(B=Math.max(B,b-k+y+1));for(let H=0;H<B;H+=1){const K=H-Math.floor(H/k)*k;S?h.forEach((W,V)=>{W.column===K&&C.push(V)}):C.push(K)}}if(d.__preventObserver__=!0,requestAnimationFrame(()=>{d.__preventObserver__=!1}),d.params.effect==="cards"&&h.length<b+N*2&&(C.includes(a)&&C.splice(C.indexOf(a),1),P.includes(a)&&P.splice(P.indexOf(a),1)),E&&P.forEach(H=>{h[H].swiperLoopMoveDOM=!0,g.prepend(h[H]),h[H].swiperLoopMoveDOM=!1}),T&&C.forEach(H=>{h[H].swiperLoopMoveDOM=!0,g.append(h[H]),h[H].swiperLoopMoveDOM=!1}),d.recalcSlides(),x.slidesPerView==="auto"?d.updateSlides():S&&(P.length>0&&E||C.length>0&&T)&&d.slides.forEach((H,K)=>{d.grid.updateSlide(K,H,d.slides)}),x.watchSlidesProgress&&d.updateSlidesOffset(),n){if(P.length>0&&E){if(typeof t>"u"){const H=d.slidesGrid[I],W=d.slidesGrid[I+D]-H;c?d.setTranslate(d.translate-W):(d.slideTo(I+Math.ceil(D),0,!1,!0),i&&(d.touchEventsData.startTranslate=d.touchEventsData.startTranslate-W,d.touchEventsData.currentTranslate=d.touchEventsData.currentTranslate-W))}else if(i){const H=S?P.length/x.grid.rows:P.length;d.slideTo(d.activeIndex+H,0,!1,!0),d.touchEventsData.currentTranslate=d.translate}}else if(C.length>0&&T)if(typeof t>"u"){const H=d.slidesGrid[I],W=d.slidesGrid[I-B]-H;c?d.setTranslate(d.translate-W):(d.slideTo(I-B,0,!1,!0),i&&(d.touchEventsData.startTranslate=d.touchEventsData.startTranslate-W,d.touchEventsData.currentTranslate=d.touchEventsData.currentTranslate-W))}else{const H=S?C.length/x.grid.rows:C.length;d.slideTo(d.activeIndex-H,0,!1,!0)}}if(d.allowSlidePrev=m,d.allowSlideNext=f,d.controller&&d.controller.control&&!l){const H={slideRealIndex:t,direction:s,setTranslate:i,activeSlideIndex:a,byController:!0};Array.isArray(d.controller.control)?d.controller.control.forEach(K=>{!K.destroyed&&K.params.loop&&K.loopFix({...H,slideTo:K.params.slidesPerView===x.slidesPerView?n:!1})}):d.controller.control instanceof d.constructor&&d.controller.control.params.loop&&d.controller.control.loopFix({...H,slideTo:d.controller.control.params.slidesPerView===x.slidesPerView?n:!1})}d.emit("loopFix")}function Phe(){const e=this,{params:t,slidesEl:n}=e;if(!t.loop||!n||e.virtual&&e.params.virtual.enabled)return;e.recalcSlides();const s=[];e.slides.forEach(i=>{const a=typeof i.swiperSlideIndex>"u"?i.getAttribute("data-swiper-slide-index")*1:i.swiperSlideIndex;s[a]=i}),e.slides.forEach(i=>{i.removeAttribute("data-swiper-slide-index")}),s.forEach(i=>{n.append(i)}),e.recalcSlides(),e.slideTo(e.realIndex,0)}var Che={loopCreate:She,loopFix:_he,loopDestroy:Phe};function khe(e){const t=this;if(!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const n=t.params.touchEventsTarget==="container"?t.el:t.wrapperEl;t.isElement&&(t.__preventObserver__=!0),n.style.cursor="move",n.style.cursor=e?"grabbing":"grab",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1})}function The(){const e=this;e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.isElement&&(e.__preventObserver__=!0),e[e.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1}))}var Ahe={setGrabCursor:khe,unsetGrabCursor:The};function Ehe(e,t){t===void 0&&(t=this);function n(s){if(!s||s===$a()||s===ys())return null;s.assignedSlot&&(s=s.assignedSlot);const i=s.closest(e);return!i&&!s.getRootNode?null:i||n(s.getRootNode().host)}return n(t)}function ND(e,t,n){const s=ys(),{params:i}=e,a=i.edgeSwipeDetection,o=i.edgeSwipeThreshold;return a&&(n<=o||n>=s.innerWidth-o)?a==="prevent"?(t.preventDefault(),!0):!1:!0}function Ohe(e){const t=this,n=$a();let s=e;s.originalEvent&&(s=s.originalEvent);const i=t.touchEventsData;if(s.type==="pointerdown"){if(i.pointerId!==null&&i.pointerId!==s.pointerId)return;i.pointerId=s.pointerId}else s.type==="touchstart"&&s.targetTouches.length===1&&(i.touchId=s.targetTouches[0].identifier);if(s.type==="touchstart"){ND(t,s,s.targetTouches[0].pageX);return}const{params:a,touches:o,enabled:l}=t;if(!l||!a.simulateTouch&&s.pointerType==="mouse"||t.animating&&a.preventInteractionOnTransition)return;!t.animating&&a.cssMode&&a.loop&&t.loopFix();let c=s.target;if(a.touchEventsTarget==="wrapper"&&!zue(c,t.wrapperEl)||"which"in s&&s.which===3||"button"in s&&s.button>0||i.isTouched&&i.isMoved)return;const d=!!a.noSwipingClass&&a.noSwipingClass!=="",h=s.composedPath?s.composedPath():s.path;d&&s.target&&s.target.shadowRoot&&h&&(c=h[0]);const m=a.noSwipingSelector?a.noSwipingSelector:`.${a.noSwipingClass}`,f=!!(s.target&&s.target.shadowRoot);if(a.noSwiping&&(f?Ehe(m,c):c.closest(m))){t.allowClick=!0;return}if(a.swipeHandler&&!c.closest(a.swipeHandler))return;o.currentX=s.pageX,o.currentY=s.pageY;const g=o.currentX,x=o.currentY;if(!ND(t,s,g))return;Object.assign(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=g,o.startY=x,i.touchStartTime=yd(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,a.threshold>0&&(i.allowThresholdMove=!1);let p=!0;c.matches(i.focusableElements)&&(p=!1,c.nodeName==="SELECT"&&(i.isTouched=!1)),n.activeElement&&n.activeElement.matches(i.focusableElements)&&n.activeElement!==c&&(s.pointerType==="mouse"||s.pointerType!=="mouse"&&!c.matches(i.focusableElements))&&n.activeElement.blur();const y=p&&t.allowTouchMove&&a.touchStartPreventDefault;(a.touchStartForcePreventDefault||y)&&!c.isContentEditable&&s.preventDefault(),a.freeMode&&a.freeMode.enabled&&t.freeMode&&t.animating&&!a.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",s)}function Mhe(e){const t=$a(),n=this,s=n.touchEventsData,{params:i,touches:a,rtlTranslate:o,enabled:l}=n;if(!l||!i.simulateTouch&&e.pointerType==="mouse")return;let c=e;if(c.originalEvent&&(c=c.originalEvent),c.type==="pointermove"&&(s.touchId!==null||c.pointerId!==s.pointerId))return;let d;if(c.type==="touchmove"){if(d=[...c.changedTouches].find(C=>C.identifier===s.touchId),!d||d.identifier!==s.touchId)return}else d=c;if(!s.isTouched){s.startMoving&&s.isScrolling&&n.emit("touchMoveOpposite",c);return}const h=d.pageX,m=d.pageY;if(c.preventedByNestedSwiper){a.startX=h,a.startY=m;return}if(!n.allowTouchMove){c.target.matches(s.focusableElements)||(n.allowClick=!1),s.isTouched&&(Object.assign(a,{startX:h,startY:m,currentX:h,currentY:m}),s.touchStartTime=yd());return}if(i.touchReleaseOnEdges&&!i.loop)if(n.isVertical()){if(m<a.startY&&n.translate<=n.maxTranslate()||m>a.startY&&n.translate>=n.minTranslate()){s.isTouched=!1,s.isMoved=!1;return}}else{if(o&&(h>a.startX&&-n.translate<=n.maxTranslate()||h<a.startX&&-n.translate>=n.minTranslate()))return;if(!o&&(h<a.startX&&n.translate<=n.maxTranslate()||h>a.startX&&n.translate>=n.minTranslate()))return}if(t.activeElement&&t.activeElement.matches(s.focusableElements)&&t.activeElement!==c.target&&c.pointerType!=="mouse"&&t.activeElement.blur(),t.activeElement&&c.target===t.activeElement&&c.target.matches(s.focusableElements)){s.isMoved=!0,n.allowClick=!1;return}s.allowTouchCallbacks&&n.emit("touchMove",c),a.previousX=a.currentX,a.previousY=a.currentY,a.currentX=h,a.currentY=m;const f=a.currentX-a.startX,g=a.currentY-a.startY;if(n.params.threshold&&Math.sqrt(f**2+g**2)<n.params.threshold)return;if(typeof s.isScrolling>"u"){let C;n.isHorizontal()&&a.currentY===a.startY||n.isVertical()&&a.currentX===a.startX?s.isScrolling=!1:f*f+g*g>=25&&(C=Math.atan2(Math.abs(g),Math.abs(f))*180/Math.PI,s.isScrolling=n.isHorizontal()?C>i.touchAngle:90-C>i.touchAngle)}if(s.isScrolling&&n.emit("touchMoveOpposite",c),typeof s.startMoving>"u"&&(a.currentX!==a.startX||a.currentY!==a.startY)&&(s.startMoving=!0),s.isScrolling||c.type==="touchmove"&&s.preventTouchMoveFromPointerMove){s.isTouched=!1;return}if(!s.startMoving)return;n.allowClick=!1,!i.cssMode&&c.cancelable&&c.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&c.stopPropagation();let x=n.isHorizontal()?f:g,p=n.isHorizontal()?a.currentX-a.previousX:a.currentY-a.previousY;i.oneWayMovement&&(x=Math.abs(x)*(o?1:-1),p=Math.abs(p)*(o?1:-1)),a.diff=x,x*=i.touchRatio,o&&(x=-x,p=-p);const y=n.touchesDirection;n.swipeDirection=x>0?"prev":"next",n.touchesDirection=p>0?"prev":"next";const b=n.params.loop&&!i.cssMode,w=n.touchesDirection==="next"&&n.allowSlideNext||n.touchesDirection==="prev"&&n.allowSlidePrev;if(!s.isMoved){if(b&&w&&n.loopFix({direction:n.swipeDirection}),s.startTranslate=n.getTranslate(),n.setTransition(0),n.animating){const C=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});n.wrapperEl.dispatchEvent(C)}s.allowMomentumBounce=!1,i.grabCursor&&(n.allowSlideNext===!0||n.allowSlidePrev===!0)&&n.setGrabCursor(!0),n.emit("sliderFirstMove",c)}let N;if(new Date().getTime(),i._loopSwapReset!==!1&&s.isMoved&&s.allowThresholdMove&&y!==n.touchesDirection&&b&&w&&Math.abs(x)>=1){Object.assign(a,{startX:h,startY:m,currentX:h,currentY:m,startTranslate:s.currentTranslate}),s.loopSwapReset=!0,s.startTranslate=s.currentTranslate;return}n.emit("sliderMove",c),s.isMoved=!0,s.currentTranslate=x+s.startTranslate;let S=!0,P=i.resistanceRatio;if(i.touchReleaseOnEdges&&(P=0),x>0?(b&&w&&!N&&s.allowThresholdMove&&s.currentTranslate>(i.centeredSlides?n.minTranslate()-n.slidesSizesGrid[n.activeIndex+1]-(i.slidesPerView!=="auto"&&n.slides.length-i.slidesPerView>=2?n.slidesSizesGrid[n.activeIndex+1]+n.params.spaceBetween:0)-n.params.spaceBetween:n.minTranslate())&&n.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),s.currentTranslate>n.minTranslate()&&(S=!1,i.resistance&&(s.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+s.startTranslate+x)**P))):x<0&&(b&&w&&!N&&s.allowThresholdMove&&s.currentTranslate<(i.centeredSlides?n.maxTranslate()+n.slidesSizesGrid[n.slidesSizesGrid.length-1]+n.params.spaceBetween+(i.slidesPerView!=="auto"&&n.slides.length-i.slidesPerView>=2?n.slidesSizesGrid[n.slidesSizesGrid.length-1]+n.params.spaceBetween:0):n.maxTranslate())&&n.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:n.slides.length-(i.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(parseFloat(i.slidesPerView,10)))}),s.currentTranslate<n.maxTranslate()&&(S=!1,i.resistance&&(s.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-s.startTranslate-x)**P))),S&&(c.preventedByNestedSwiper=!0),!n.allowSlideNext&&n.swipeDirection==="next"&&s.currentTranslate<s.startTranslate&&(s.currentTranslate=s.startTranslate),!n.allowSlidePrev&&n.swipeDirection==="prev"&&s.currentTranslate>s.startTranslate&&(s.currentTranslate=s.startTranslate),!n.allowSlidePrev&&!n.allowSlideNext&&(s.currentTranslate=s.startTranslate),i.threshold>0)if(Math.abs(x)>i.threshold||s.allowThresholdMove){if(!s.allowThresholdMove){s.allowThresholdMove=!0,a.startX=a.currentX,a.startY=a.currentY,s.currentTranslate=s.startTranslate,a.diff=n.isHorizontal()?a.currentX-a.startX:a.currentY-a.startY;return}}else{s.currentTranslate=s.startTranslate;return}!i.followFinger||i.cssMode||((i.freeMode&&i.freeMode.enabled&&n.freeMode||i.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),i.freeMode&&i.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(s.currentTranslate),n.setTranslate(s.currentTranslate))}function Dhe(e){const t=this,n=t.touchEventsData;let s=e;s.originalEvent&&(s=s.originalEvent);let i;if(s.type==="touchend"||s.type==="touchcancel"){if(i=[...s.changedTouches].find(P=>P.identifier===n.touchId),!i||i.identifier!==n.touchId)return}else{if(n.touchId!==null||s.pointerId!==n.pointerId)return;i=s}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(s.type)&&!(["pointercancel","contextmenu"].includes(s.type)&&(t.browser.isSafari||t.browser.isWebView)))return;n.pointerId=null,n.touchId=null;const{params:o,touches:l,rtlTranslate:c,slidesGrid:d,enabled:h}=t;if(!h||!o.simulateTouch&&s.pointerType==="mouse")return;if(n.allowTouchCallbacks&&t.emit("touchEnd",s),n.allowTouchCallbacks=!1,!n.isTouched){n.isMoved&&o.grabCursor&&t.setGrabCursor(!1),n.isMoved=!1,n.startMoving=!1;return}o.grabCursor&&n.isMoved&&n.isTouched&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!1);const m=yd(),f=m-n.touchStartTime;if(t.allowClick){const P=s.path||s.composedPath&&s.composedPath();t.updateClickedSlide(P&&P[0]||s.target,P),t.emit("tap click",s),f<300&&m-n.lastClickTime<300&&t.emit("doubleTap doubleClick",s)}if(n.lastClickTime=yd(),s2(()=>{t.destroyed||(t.allowClick=!0)}),!n.isTouched||!n.isMoved||!t.swipeDirection||l.diff===0&&!n.loopSwapReset||n.currentTranslate===n.startTranslate&&!n.loopSwapReset){n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;return}n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;let g;if(o.followFinger?g=c?t.translate:-t.translate:g=-n.currentTranslate,o.cssMode)return;if(o.freeMode&&o.freeMode.enabled){t.freeMode.onTouchEnd({currentPos:g});return}const x=g>=-t.maxTranslate()&&!t.params.loop;let p=0,y=t.slidesSizesGrid[0];for(let P=0;P<d.length;P+=P<o.slidesPerGroupSkip?1:o.slidesPerGroup){const C=P<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;typeof d[P+C]<"u"?(x||g>=d[P]&&g<d[P+C])&&(p=P,y=d[P+C]-d[P]):(x||g>=d[P])&&(p=P,y=d[d.length-1]-d[d.length-2])}let b=null,w=null;o.rewind&&(t.isBeginning?w=o.virtual&&o.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(b=0));const N=(g-d[p])/y,S=p<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;if(f>o.longSwipesMs){if(!o.longSwipes){t.slideTo(t.activeIndex);return}t.swipeDirection==="next"&&(N>=o.longSwipesRatio?t.slideTo(o.rewind&&t.isEnd?b:p+S):t.slideTo(p)),t.swipeDirection==="prev"&&(N>1-o.longSwipesRatio?t.slideTo(p+S):w!==null&&N<0&&Math.abs(N)>o.longSwipesRatio?t.slideTo(w):t.slideTo(p))}else{if(!o.shortSwipes){t.slideTo(t.activeIndex);return}t.navigation&&(s.target===t.navigation.nextEl||s.target===t.navigation.prevEl)?s.target===t.navigation.nextEl?t.slideTo(p+S):t.slideTo(p):(t.swipeDirection==="next"&&t.slideTo(b!==null?b:p+S),t.swipeDirection==="prev"&&t.slideTo(w!==null?w:p))}}function SD(){const e=this,{params:t,el:n}=e;if(n&&n.offsetWidth===0)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:s,allowSlidePrev:i,snapGrid:a}=e,o=e.virtual&&e.params.virtual.enabled;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses();const l=o&&t.loop;(t.slidesPerView==="auto"||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides&&!l?e.slideTo(e.slides.length-1,0,!1,!0):e.params.loop&&!o?e.slideToLoop(e.realIndex,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&(clearTimeout(e.autoplay.resizeTimeout),e.autoplay.resizeTimeout=setTimeout(()=>{e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.resume()},500)),e.allowSlidePrev=i,e.allowSlideNext=s,e.params.watchOverflow&&a!==e.snapGrid&&e.checkOverflow()}function Ihe(e){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function Lhe(){const e=this,{wrapperEl:t,rtlTranslate:n,enabled:s}=e;if(!s)return;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,e.translate===0&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();let i;const a=e.maxTranslate()-e.minTranslate();a===0?i=0:i=(e.translate-e.minTranslate())/a,i!==e.progress&&e.updateProgress(n?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}function Rhe(e){const t=this;Ty(t,e.target),!(t.params.cssMode||t.params.slidesPerView!=="auto"&&!t.params.autoHeight)&&t.update()}function $he(){const e=this;e.documentTouchHandlerProceeded||(e.documentTouchHandlerProceeded=!0,e.params.touchReleaseOnEdges&&(e.el.style.touchAction="auto"))}const XV=(e,t)=>{const n=$a(),{params:s,el:i,wrapperEl:a,device:o}=e,l=!!s.nested,c=t==="on"?"addEventListener":"removeEventListener",d=t;!i||typeof i=="string"||(n[c]("touchstart",e.onDocumentTouchStart,{passive:!1,capture:l}),i[c]("touchstart",e.onTouchStart,{passive:!1}),i[c]("pointerdown",e.onTouchStart,{passive:!1}),n[c]("touchmove",e.onTouchMove,{passive:!1,capture:l}),n[c]("pointermove",e.onTouchMove,{passive:!1,capture:l}),n[c]("touchend",e.onTouchEnd,{passive:!0}),n[c]("pointerup",e.onTouchEnd,{passive:!0}),n[c]("pointercancel",e.onTouchEnd,{passive:!0}),n[c]("touchcancel",e.onTouchEnd,{passive:!0}),n[c]("pointerout",e.onTouchEnd,{passive:!0}),n[c]("pointerleave",e.onTouchEnd,{passive:!0}),n[c]("contextmenu",e.onTouchEnd,{passive:!0}),(s.preventClicks||s.preventClicksPropagation)&&i[c]("click",e.onClick,!0),s.cssMode&&a[c]("scroll",e.onScroll),s.updateOnWindowResize?e[d](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",SD,!0):e[d]("observerUpdate",SD,!0),i[c]("load",e.onLoad,{capture:!0}))};function Fhe(){const e=this,{params:t}=e;e.onTouchStart=Ohe.bind(e),e.onTouchMove=Mhe.bind(e),e.onTouchEnd=Dhe.bind(e),e.onDocumentTouchStart=$he.bind(e),t.cssMode&&(e.onScroll=Lhe.bind(e)),e.onClick=Ihe.bind(e),e.onLoad=Rhe.bind(e),XV(e,"on")}function zhe(){XV(this,"off")}var Bhe={attachEvents:Fhe,detachEvents:zhe};const _D=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;function Vhe(){const e=this,{realIndex:t,initialized:n,params:s,el:i}=e,a=s.breakpoints;if(!a||a&&Object.keys(a).length===0)return;const o=$a(),l=s.breakpointsBase==="window"||!s.breakpointsBase?s.breakpointsBase:"container",c=["window","container"].includes(s.breakpointsBase)||!s.breakpointsBase?e.el:o.querySelector(s.breakpointsBase),d=e.getBreakpoint(a,l,c);if(!d||e.currentBreakpoint===d)return;const m=(d in a?a[d]:void 0)||e.originalParams,f=_D(e,s),g=_D(e,m),x=e.params.grabCursor,p=m.grabCursor,y=s.enabled;f&&!g?(i.classList.remove(`${s.containerModifierClass}grid`,`${s.containerModifierClass}grid-column`),e.emitContainerClasses()):!f&&g&&(i.classList.add(`${s.containerModifierClass}grid`),(m.grid.fill&&m.grid.fill==="column"||!m.grid.fill&&s.grid.fill==="column")&&i.classList.add(`${s.containerModifierClass}grid-column`),e.emitContainerClasses()),x&&!p?e.unsetGrabCursor():!x&&p&&e.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(C=>{if(typeof m[C]>"u")return;const k=s[C]&&s[C].enabled,O=m[C]&&m[C].enabled;k&&!O&&e[C].disable(),!k&&O&&e[C].enable()});const b=m.direction&&m.direction!==s.direction,w=s.loop&&(m.slidesPerView!==s.slidesPerView||b),N=s.loop;b&&n&&e.changeDirection(),Bs(e.params,m);const S=e.params.enabled,P=e.params.loop;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),y&&!S?e.disable():!y&&S&&e.enable(),e.currentBreakpoint=d,e.emit("_beforeBreakpoint",m),n&&(w?(e.loopDestroy(),e.loopCreate(t),e.updateSlides()):!N&&P?(e.loopCreate(t),e.updateSlides()):N&&!P&&e.loopDestroy()),e.emit("breakpoint",m)}function Uhe(e,t,n){if(t===void 0&&(t="window"),!e||t==="container"&&!n)return;let s=!1;const i=ys(),a=t==="window"?i.innerHeight:n.clientHeight,o=Object.keys(e).map(l=>{if(typeof l=="string"&&l.indexOf("@")===0){const c=parseFloat(l.substr(1));return{value:a*c,point:l}}return{value:l,point:l}});o.sort((l,c)=>parseInt(l.value,10)-parseInt(c.value,10));for(let l=0;l<o.length;l+=1){const{point:c,value:d}=o[l];t==="window"?i.matchMedia(`(min-width: ${d}px)`).matches&&(s=c):d<=n.clientWidth&&(s=c)}return s||"max"}var Whe={setBreakpoint:Vhe,getBreakpoint:Uhe};function Hhe(e,t){const n=[];return e.forEach(s=>{typeof s=="object"?Object.keys(s).forEach(i=>{s[i]&&n.push(t+i)}):typeof s=="string"&&n.push(t+s)}),n}function qhe(){const e=this,{classNames:t,params:n,rtl:s,el:i,device:a}=e,o=Hhe(["initialized",n.direction,{"free-mode":e.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:s},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&n.grid.fill==="column"},{android:a.android},{ios:a.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);t.push(...o),i.classList.add(...t),e.emitContainerClasses()}function Khe(){const e=this,{el:t,classNames:n}=e;!t||typeof t=="string"||(t.classList.remove(...n),e.emitContainerClasses())}var Ghe={addClasses:qhe,removeClasses:Khe};function Zhe(){const e=this,{isLocked:t,params:n}=e,{slidesOffsetBefore:s}=n;if(s){const i=e.slides.length-1,a=e.slidesGrid[i]+e.slidesSizesGrid[i]+s*2;e.isLocked=e.size>a}else e.isLocked=e.snapGrid.length===1;n.allowSlideNext===!0&&(e.allowSlideNext=!e.isLocked),n.allowSlidePrev===!0&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}var Yhe={checkOverflow:Zhe},o2={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function Xhe(e,t){return function(s){s===void 0&&(s={});const i=Object.keys(s)[0],a=s[i];if(typeof a!="object"||a===null){Bs(t,s);return}if(e[i]===!0&&(e[i]={enabled:!0}),i==="navigation"&&e[i]&&e[i].enabled&&!e[i].prevEl&&!e[i].nextEl&&(e[i].auto=!0),["pagination","scrollbar"].indexOf(i)>=0&&e[i]&&e[i].enabled&&!e[i].el&&(e[i].auto=!0),!(i in e&&"enabled"in a)){Bs(t,s);return}typeof e[i]=="object"&&!("enabled"in e[i])&&(e[i].enabled=!0),e[i]||(e[i]={enabled:!1}),Bs(t,s)}}const O1={eventsEmitter:Gue,update:ihe,translate:uhe,transition:phe,slide:Nhe,loop:Che,grabCursor:Ahe,events:Bhe,breakpoints:Whe,checkOverflow:Yhe,classes:Ghe},M1={};let _T=class mo{constructor(){let t,n;for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];i.length===1&&i[0].constructor&&Object.prototype.toString.call(i[0]).slice(8,-1)==="Object"?n=i[0]:[t,n]=i,n||(n={}),n=Bs({},n),t&&!n.el&&(n.el=t);const o=$a();if(n.el&&typeof n.el=="string"&&o.querySelectorAll(n.el).length>1){const h=[];return o.querySelectorAll(n.el).forEach(m=>{const f=Bs({},n,{el:m});h.push(new mo(f))}),h}const l=this;l.__swiper__=!0,l.support=KV(),l.device=GV({userAgent:n.userAgent}),l.browser=ZV(),l.eventsListeners={},l.eventsAnyListeners=[],l.modules=[...l.__modules__],n.modules&&Array.isArray(n.modules)&&l.modules.push(...n.modules);const c={};l.modules.forEach(h=>{h({params:n,swiper:l,extendParams:Xhe(n,c),on:l.on.bind(l),once:l.once.bind(l),off:l.off.bind(l),emit:l.emit.bind(l)})});const d=Bs({},o2,c);return l.params=Bs({},d,M1,n),l.originalParams=Bs({},l.params),l.passedParams=Bs({},n),l.params&&l.params.on&&Object.keys(l.params.on).forEach(h=>{l.on(h,l.params.on[h])}),l.params&&l.params.onAny&&l.onAny(l.params.onAny),Object.assign(l,{enabled:l.params.enabled,el:t,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return l.params.direction==="horizontal"},isVertical(){return l.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:l.params.allowSlideNext,allowSlidePrev:l.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:l.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:l.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),l.emit("_swiper"),l.params.init&&l.init(),l}getDirectionLabel(t){return this.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]}getSlideIndex(t){const{slidesEl:n,params:s}=this,i=Aa(n,`.${s.slideClass}, swiper-slide`),a=k0(i[0]);return k0(t)-a}getSlideIndexByData(t){return this.getSlideIndex(this.slides.find(n=>n.getAttribute("data-swiper-slide-index")*1===t))}recalcSlides(){const t=this,{slidesEl:n,params:s}=t;t.slides=Aa(n,`.${s.slideClass}, swiper-slide`)}enable(){const t=this;t.enabled||(t.enabled=!0,t.params.grabCursor&&t.setGrabCursor(),t.emit("enable"))}disable(){const t=this;t.enabled&&(t.enabled=!1,t.params.grabCursor&&t.unsetGrabCursor(),t.emit("disable"))}setProgress(t,n){const s=this;t=Math.min(Math.max(t,0),1);const i=s.minTranslate(),o=(s.maxTranslate()-i)*t+i;s.translateTo(o,typeof n>"u"?0:n),s.updateActiveIndex(),s.updateSlidesClasses()}emitContainerClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const n=t.el.className.split(" ").filter(s=>s.indexOf("swiper")===0||s.indexOf(t.params.containerModifierClass)===0);t.emit("_containerClasses",n.join(" "))}getSlideClasses(t){const n=this;return n.destroyed?"":t.className.split(" ").filter(s=>s.indexOf("swiper-slide")===0||s.indexOf(n.params.slideClass)===0).join(" ")}emitSlidesClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const n=[];t.slides.forEach(s=>{const i=t.getSlideClasses(s);n.push({slideEl:s,classNames:i}),t.emit("_slideClass",s,i)}),t.emit("_slideClasses",n)}slidesPerViewDynamic(t,n){t===void 0&&(t="current"),n===void 0&&(n=!1);const s=this,{params:i,slides:a,slidesGrid:o,slidesSizesGrid:l,size:c,activeIndex:d}=s;let h=1;if(typeof i.slidesPerView=="number")return i.slidesPerView;if(i.centeredSlides){let m=a[d]?Math.ceil(a[d].swiperSlideSize):0,f;for(let g=d+1;g<a.length;g+=1)a[g]&&!f&&(m+=Math.ceil(a[g].swiperSlideSize),h+=1,m>c&&(f=!0));for(let g=d-1;g>=0;g-=1)a[g]&&!f&&(m+=a[g].swiperSlideSize,h+=1,m>c&&(f=!0))}else if(t==="current")for(let m=d+1;m<a.length;m+=1)(n?o[m]+l[m]-o[d]<c:o[m]-o[d]<c)&&(h+=1);else for(let m=d-1;m>=0;m-=1)o[d]-o[m]<c&&(h+=1);return h}update(){const t=this;if(!t||t.destroyed)return;const{snapGrid:n,params:s}=t;s.breakpoints&&t.setBreakpoint(),[...t.el.querySelectorAll('[loading="lazy"]')].forEach(o=>{o.complete&&Ty(t,o)}),t.updateSize(),t.updateSlides(),t.updateProgress(),t.updateSlidesClasses();function i(){const o=t.rtlTranslate?t.translate*-1:t.translate,l=Math.min(Math.max(o,t.maxTranslate()),t.minTranslate());t.setTranslate(l),t.updateActiveIndex(),t.updateSlidesClasses()}let a;if(s.freeMode&&s.freeMode.enabled&&!s.cssMode)i(),s.autoHeight&&t.updateAutoHeight();else{if((s.slidesPerView==="auto"||s.slidesPerView>1)&&t.isEnd&&!s.centeredSlides){const o=t.virtual&&s.virtual.enabled?t.virtual.slides:t.slides;a=t.slideTo(o.length-1,0,!1,!0)}else a=t.slideTo(t.activeIndex,0,!1,!0);a||i()}s.watchOverflow&&n!==t.snapGrid&&t.checkOverflow(),t.emit("update")}changeDirection(t,n){n===void 0&&(n=!0);const s=this,i=s.params.direction;return t||(t=i==="horizontal"?"vertical":"horizontal"),t===i||t!=="horizontal"&&t!=="vertical"||(s.el.classList.remove(`${s.params.containerModifierClass}${i}`),s.el.classList.add(`${s.params.containerModifierClass}${t}`),s.emitContainerClasses(),s.params.direction=t,s.slides.forEach(a=>{t==="vertical"?a.style.width="":a.style.height=""}),s.emit("changeDirection"),n&&s.update()),s}changeLanguageDirection(t){const n=this;n.rtl&&t==="rtl"||!n.rtl&&t==="ltr"||(n.rtl=t==="rtl",n.rtlTranslate=n.params.direction==="horizontal"&&n.rtl,n.rtl?(n.el.classList.add(`${n.params.containerModifierClass}rtl`),n.el.dir="rtl"):(n.el.classList.remove(`${n.params.containerModifierClass}rtl`),n.el.dir="ltr"),n.update())}mount(t){const n=this;if(n.mounted)return!0;let s=t||n.params.el;if(typeof s=="string"&&(s=document.querySelector(s)),!s)return!1;s.swiper=n,s.parentNode&&s.parentNode.host&&s.parentNode.host.nodeName===n.params.swiperElementNodeName.toUpperCase()&&(n.isElement=!0);const i=()=>`.${(n.params.wrapperClass||"").trim().split(" ").join(".")}`;let o=s&&s.shadowRoot&&s.shadowRoot.querySelector?s.shadowRoot.querySelector(i()):Aa(s,i())[0];return!o&&n.params.createElements&&(o=C0("div",n.params.wrapperClass),s.append(o),Aa(s,`.${n.params.slideClass}`).forEach(l=>{o.append(l)})),Object.assign(n,{el:s,wrapperEl:o,slidesEl:n.isElement&&!s.parentNode.host.slideSlots?s.parentNode.host:o,hostEl:n.isElement?s.parentNode.host:s,mounted:!0,rtl:s.dir.toLowerCase()==="rtl"||Ll(s,"direction")==="rtl",rtlTranslate:n.params.direction==="horizontal"&&(s.dir.toLowerCase()==="rtl"||Ll(s,"direction")==="rtl"),wrongRTL:Ll(o,"display")==="-webkit-box"}),!0}init(t){const n=this;if(n.initialized||n.mount(t)===!1)return n;n.emit("beforeInit"),n.params.breakpoints&&n.setBreakpoint(),n.addClasses(),n.updateSize(),n.updateSlides(),n.params.watchOverflow&&n.checkOverflow(),n.params.grabCursor&&n.enabled&&n.setGrabCursor(),n.params.loop&&n.virtual&&n.params.virtual.enabled?n.slideTo(n.params.initialSlide+n.virtual.slidesBefore,0,n.params.runCallbacksOnInit,!1,!0):n.slideTo(n.params.initialSlide,0,n.params.runCallbacksOnInit,!1,!0),n.params.loop&&n.loopCreate(void 0,!0),n.attachEvents();const i=[...n.el.querySelectorAll('[loading="lazy"]')];return n.isElement&&i.push(...n.hostEl.querySelectorAll('[loading="lazy"]')),i.forEach(a=>{a.complete?Ty(n,a):a.addEventListener("load",o=>{Ty(n,o.target)})}),a2(n),n.initialized=!0,a2(n),n.emit("init"),n.emit("afterInit"),n}destroy(t,n){t===void 0&&(t=!0),n===void 0&&(n=!0);const s=this,{params:i,el:a,wrapperEl:o,slides:l}=s;return typeof s.params>"u"||s.destroyed||(s.emit("beforeDestroy"),s.initialized=!1,s.detachEvents(),i.loop&&s.loopDestroy(),n&&(s.removeClasses(),a&&typeof a!="string"&&a.removeAttribute("style"),o&&o.removeAttribute("style"),l&&l.length&&l.forEach(c=>{c.classList.remove(i.slideVisibleClass,i.slideFullyVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass),c.removeAttribute("style"),c.removeAttribute("data-swiper-slide-index")})),s.emit("destroy"),Object.keys(s.eventsListeners).forEach(c=>{s.off(c)}),t!==!1&&(s.el&&typeof s.el!="string"&&(s.el.swiper=null),Iue(s)),s.destroyed=!0),null}static extendDefaults(t){Bs(M1,t)}static get extendedDefaults(){return M1}static get defaults(){return o2}static installModule(t){mo.prototype.__modules__||(mo.prototype.__modules__=[]);const n=mo.prototype.__modules__;typeof t=="function"&&n.indexOf(t)<0&&n.push(t)}static use(t){return Array.isArray(t)?(t.forEach(n=>mo.installModule(n)),mo):(mo.installModule(t),mo)}};Object.keys(O1).forEach(e=>{Object.keys(O1[e]).forEach(t=>{_T.prototype[t]=O1[e][t]})});_T.use([que,Kue]);const QV=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function Vd(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"&&!e.__swiper__}function uh(e,t){const n=["__proto__","constructor","prototype"];Object.keys(t).filter(s=>n.indexOf(s)<0).forEach(s=>{typeof e[s]>"u"?e[s]=t[s]:Vd(t[s])&&Vd(e[s])&&Object.keys(t[s]).length>0?t[s].__swiper__?e[s]=t[s]:uh(e[s],t[s]):e[s]=t[s]})}function JV(e){return e===void 0&&(e={}),e.navigation&&typeof e.navigation.nextEl>"u"&&typeof e.navigation.prevEl>"u"}function eU(e){return e===void 0&&(e={}),e.pagination&&typeof e.pagination.el>"u"}function tU(e){return e===void 0&&(e={}),e.scrollbar&&typeof e.scrollbar.el>"u"}function rU(e){e===void 0&&(e="");const t=e.split(" ").map(s=>s.trim()).filter(s=>!!s),n=[];return t.forEach(s=>{n.indexOf(s)<0&&n.push(s)}),n.join(" ")}function Qhe(e){return e===void 0&&(e=""),e?e.includes("swiper-wrapper")?e:`swiper-wrapper ${e}`:"swiper-wrapper"}function Jhe(e){let{swiper:t,slides:n,passedParams:s,changedParams:i,nextEl:a,prevEl:o,scrollbarEl:l,paginationEl:c}=e;const d=i.filter(I=>I!=="children"&&I!=="direction"&&I!=="wrapperClass"),{params:h,pagination:m,navigation:f,scrollbar:g,virtual:x,thumbs:p}=t;let y,b,w,N,S,P,C,k;i.includes("thumbs")&&s.thumbs&&s.thumbs.swiper&&!s.thumbs.swiper.destroyed&&h.thumbs&&(!h.thumbs.swiper||h.thumbs.swiper.destroyed)&&(y=!0),i.includes("controller")&&s.controller&&s.controller.control&&h.controller&&!h.controller.control&&(b=!0),i.includes("pagination")&&s.pagination&&(s.pagination.el||c)&&(h.pagination||h.pagination===!1)&&m&&!m.el&&(w=!0),i.includes("scrollbar")&&s.scrollbar&&(s.scrollbar.el||l)&&(h.scrollbar||h.scrollbar===!1)&&g&&!g.el&&(N=!0),i.includes("navigation")&&s.navigation&&(s.navigation.prevEl||o)&&(s.navigation.nextEl||a)&&(h.navigation||h.navigation===!1)&&f&&!f.prevEl&&!f.nextEl&&(S=!0);const O=I=>{t[I]&&(t[I].destroy(),I==="navigation"?(t.isElement&&(t[I].prevEl.remove(),t[I].nextEl.remove()),h[I].prevEl=void 0,h[I].nextEl=void 0,t[I].prevEl=void 0,t[I].nextEl=void 0):(t.isElement&&t[I].el.remove(),h[I].el=void 0,t[I].el=void 0))};i.includes("loop")&&t.isElement&&(h.loop&&!s.loop?P=!0:!h.loop&&s.loop?C=!0:k=!0),d.forEach(I=>{if(Vd(h[I])&&Vd(s[I]))Object.assign(h[I],s[I]),(I==="navigation"||I==="pagination"||I==="scrollbar")&&"enabled"in s[I]&&!s[I].enabled&&O(I);else{const T=s[I];(T===!0||T===!1)&&(I==="navigation"||I==="pagination"||I==="scrollbar")?T===!1&&O(I):h[I]=s[I]}}),d.includes("controller")&&!b&&t.controller&&t.controller.control&&h.controller&&h.controller.control&&(t.controller.control=h.controller.control),i.includes("children")&&n&&x&&h.virtual.enabled?(x.slides=n,x.update(!0)):i.includes("virtual")&&x&&h.virtual.enabled&&(n&&(x.slides=n),x.update(!0)),i.includes("children")&&n&&h.loop&&(k=!0),y&&p.init()&&p.update(!0),b&&(t.controller.control=h.controller.control),w&&(t.isElement&&(!c||typeof c=="string")&&(c=document.createElement("div"),c.classList.add("swiper-pagination"),c.part.add("pagination"),t.el.appendChild(c)),c&&(h.pagination.el=c),m.init(),m.render(),m.update()),N&&(t.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-scrollbar"),l.part.add("scrollbar"),t.el.appendChild(l)),l&&(h.scrollbar.el=l),g.init(),g.updateSize(),g.setTranslate()),S&&(t.isElement&&((!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-button-next"),T0(a,t.hostEl.constructor.nextButtonSvg),a.part.add("button-next"),t.el.appendChild(a)),(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-button-prev"),T0(o,t.hostEl.constructor.prevButtonSvg),o.part.add("button-prev"),t.el.appendChild(o))),a&&(h.navigation.nextEl=a),o&&(h.navigation.prevEl=o),f.init(),f.update()),i.includes("allowSlideNext")&&(t.allowSlideNext=s.allowSlideNext),i.includes("allowSlidePrev")&&(t.allowSlidePrev=s.allowSlidePrev),i.includes("direction")&&t.changeDirection(s.direction,!1),(P||k)&&t.loopDestroy(),(C||k)&&t.loopCreate(),t.update()}function eme(e,t){e===void 0&&(e={}),t===void 0&&(t=!0);const n={on:{}},s={},i={};uh(n,o2),n._emitClasses=!0,n.init=!1;const a={},o=QV.map(c=>c.replace(/_/,"")),l=Object.assign({},e);return Object.keys(l).forEach(c=>{typeof e[c]>"u"||(o.indexOf(c)>=0?Vd(e[c])?(n[c]={},i[c]={},uh(n[c],e[c]),uh(i[c],e[c])):(n[c]=e[c],i[c]=e[c]):c.search(/on[A-Z]/)===0&&typeof e[c]=="function"?t?s[`${c[2].toLowerCase()}${c.substr(3)}`]=e[c]:n.on[`${c[2].toLowerCase()}${c.substr(3)}`]=e[c]:a[c]=e[c])}),["navigation","pagination","scrollbar"].forEach(c=>{n[c]===!0&&(n[c]={}),n[c]===!1&&delete n[c]}),{params:n,passedParams:i,rest:a,events:s}}function tme(e,t){let{el:n,nextEl:s,prevEl:i,paginationEl:a,scrollbarEl:o,swiper:l}=e;JV(t)&&s&&i&&(l.params.navigation.nextEl=s,l.originalParams.navigation.nextEl=s,l.params.navigation.prevEl=i,l.originalParams.navigation.prevEl=i),eU(t)&&a&&(l.params.pagination.el=a,l.originalParams.pagination.el=a),tU(t)&&o&&(l.params.scrollbar.el=o,l.originalParams.scrollbar.el=o),l.init(n)}function rme(e,t,n,s,i){const a=[];if(!t)return a;const o=c=>{a.indexOf(c)<0&&a.push(c)};if(n&&s){const c=s.map(i),d=n.map(i);c.join("")!==d.join("")&&o("children"),s.length!==n.length&&o("children")}return QV.filter(c=>c[0]==="_").map(c=>c.replace(/_/,"")).forEach(c=>{if(c in e&&c in t)if(Vd(e[c])&&Vd(t[c])){const d=Object.keys(e[c]),h=Object.keys(t[c]);d.length!==h.length?o(c):(d.forEach(m=>{e[c][m]!==t[c][m]&&o(c)}),h.forEach(m=>{e[c][m]!==t[c][m]&&o(c)}))}else e[c]!==t[c]&&o(c)}),a}const nme=e=>{!e||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.emit("_virtualUpdated"),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())};function A0(){return A0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},A0.apply(this,arguments)}function nU(e){return e.type&&e.type.displayName&&e.type.displayName.includes("SwiperSlide")}function sU(e){const t=[];return re.Children.toArray(e).forEach(n=>{nU(n)?t.push(n):n.props&&n.props.children&&sU(n.props.children).forEach(s=>t.push(s))}),t}function sme(e){const t=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return re.Children.toArray(e).forEach(s=>{if(nU(s))t.push(s);else if(s.props&&s.props.slot&&n[s.props.slot])n[s.props.slot].push(s);else if(s.props&&s.props.children){const i=sU(s.props.children);i.length>0?i.forEach(a=>t.push(a)):n["container-end"].push(s)}else n["container-end"].push(s)}),{slides:t,slots:n}}function ime(e,t,n){if(!n)return null;const s=h=>{let m=h;return h<0?m=t.length+h:m>=t.length&&(m=m-t.length),m},i=e.isHorizontal()?{[e.rtlTranslate?"right":"left"]:`${n.offset}px`}:{top:`${n.offset}px`},{from:a,to:o}=n,l=e.params.loop?-t.length:0,c=e.params.loop?t.length*2:t.length,d=[];for(let h=l;h<c;h+=1)h>=a&&h<=o&&d.push(t[s(h)]);return d.map((h,m)=>re.cloneElement(h,{swiper:e,style:i,key:h.props.virtualIndex||h.key||`slide-${m}`}))}function up(e,t){return typeof window>"u"?j.useEffect(e,t):j.useLayoutEffect(e,t)}const PD=j.createContext(null),ame=j.createContext(null),E0=j.forwardRef(function(e,t){let{className:n,tag:s="div",wrapperTag:i="div",children:a,onSwiper:o,...l}=e===void 0?{}:e,c=!1;const[d,h]=j.useState("swiper"),[m,f]=j.useState(null),[g,x]=j.useState(!1),p=j.useRef(!1),y=j.useRef(null),b=j.useRef(null),w=j.useRef(null),N=j.useRef(null),S=j.useRef(null),P=j.useRef(null),C=j.useRef(null),k=j.useRef(null),{params:O,passedParams:I,rest:T,events:E}=eme(l),{slides:D,slots:B}=sme(a),M=()=>{x(!g)};Object.assign(O.on,{_containerClasses(V,z){h(z)}});const U=()=>{Object.assign(O.on,E),c=!0;const V={...O};if(delete V.wrapperClass,b.current=new _T(V),b.current.virtual&&b.current.params.virtual.enabled){b.current.virtual.slides=D;const z={cache:!1,slides:D,renderExternal:f,renderExternalUpdate:!1};uh(b.current.params.virtual,z),uh(b.current.originalParams.virtual,z)}};y.current||U(),b.current&&b.current.on("_beforeBreakpoint",M);const H=()=>{c||!E||!b.current||Object.keys(E).forEach(V=>{b.current.on(V,E[V])})},K=()=>{!E||!b.current||Object.keys(E).forEach(V=>{b.current.off(V,E[V])})};j.useEffect(()=>()=>{b.current&&b.current.off("_beforeBreakpoint",M)}),j.useEffect(()=>{!p.current&&b.current&&(b.current.emitSlidesClasses(),p.current=!0)}),up(()=>{if(t&&(t.current=y.current),!!y.current)return b.current.destroyed&&U(),tme({el:y.current,nextEl:S.current,prevEl:P.current,paginationEl:C.current,scrollbarEl:k.current,swiper:b.current},O),o&&!b.current.destroyed&&o(b.current),()=>{b.current&&!b.current.destroyed&&b.current.destroy(!0,!1)}},[]),up(()=>{H();const V=rme(I,w.current,D,N.current,z=>z.key);return w.current=I,N.current=D,V.length&&b.current&&!b.current.destroyed&&Jhe({swiper:b.current,slides:D,passedParams:I,changedParams:V,nextEl:S.current,prevEl:P.current,scrollbarEl:k.current,paginationEl:C.current}),()=>{K()}}),up(()=>{nme(b.current)},[m]);function W(){return O.virtual?ime(b.current,D,m):D.map((V,z)=>re.cloneElement(V,{swiper:b.current,swiperSlideIndex:z}))}return re.createElement(s,A0({ref:y,className:rU(`${d}${n?` ${n}`:""}`)},T),re.createElement(ame.Provider,{value:b.current},B["container-start"],re.createElement(i,{className:Qhe(O.wrapperClass)},B["wrapper-start"],W(),B["wrapper-end"]),JV(O)&&re.createElement(re.Fragment,null,re.createElement("div",{ref:P,className:"swiper-button-prev"}),re.createElement("div",{ref:S,className:"swiper-button-next"})),tU(O)&&re.createElement("div",{ref:k,className:"swiper-scrollbar"}),eU(O)&&re.createElement("div",{ref:C,className:"swiper-pagination"}),B["container-end"]))});E0.displayName="Swiper";const hp=j.forwardRef(function(e,t){let{tag:n="div",children:s,className:i="",swiper:a,zoom:o,lazy:l,virtualIndex:c,swiperSlideIndex:d,...h}=e===void 0?{}:e;const m=j.useRef(null),[f,g]=j.useState("swiper-slide"),[x,p]=j.useState(!1);function y(S,P,C){P===m.current&&g(C)}up(()=>{if(typeof d<"u"&&(m.current.swiperSlideIndex=d),t&&(t.current=m.current),!(!m.current||!a)){if(a.destroyed){f!=="swiper-slide"&&g("swiper-slide");return}return a.on("_slideClass",y),()=>{a&&a.off("_slideClass",y)}}}),up(()=>{a&&m.current&&!a.destroyed&&g(a.getSlideClasses(m.current))},[a]);const b={isActive:f.indexOf("swiper-slide-active")>=0,isVisible:f.indexOf("swiper-slide-visible")>=0,isPrev:f.indexOf("swiper-slide-prev")>=0,isNext:f.indexOf("swiper-slide-next")>=0},w=()=>typeof s=="function"?s(b):s,N=()=>{p(!0)};return re.createElement(n,A0({ref:m,className:rU(`${f}${i?` ${i}`:""}`),"data-swiper-slide-index":c,onLoad:N},h),o&&re.createElement(PD.Provider,{value:b},re.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof o=="number"?o:void 0},w(),l&&!x&&re.createElement("div",{className:"swiper-lazy-preloader"}))),!o&&re.createElement(PD.Provider,{value:b},w(),l&&!x&&re.createElement("div",{className:"swiper-lazy-preloader"})))});hp.displayName="SwiperSlide";function iU(e,t,n,s){return e.params.createElements&&Object.keys(s).forEach(i=>{if(!n[i]&&n.auto===!0){let a=Aa(e.el,`.${s[i]}`)[0];a||(a=C0("div",s[i]),a.className=s[i],e.el.append(a)),n[i]=a,t[i]=a}}),n}function aU(e){let{swiper:t,extendParams:n,on:s,emit:i}=e;n({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),t.navigation={nextEl:null,prevEl:null};function a(x){let p;return x&&typeof x=="string"&&t.isElement&&(p=t.el.querySelector(x)||t.hostEl.querySelector(x),p)?p:(x&&(typeof x=="string"&&(p=[...document.querySelectorAll(x)]),t.params.uniqueNavElements&&typeof x=="string"&&p&&p.length>1&&t.el.querySelectorAll(x).length===1?p=t.el.querySelector(x):p&&p.length===1&&(p=p[0])),x&&!p?x:p)}function o(x,p){const y=t.params.navigation;x=kn(x),x.forEach(b=>{b&&(b.classList[p?"add":"remove"](...y.disabledClass.split(" ")),b.tagName==="BUTTON"&&(b.disabled=p),t.params.watchOverflow&&t.enabled&&b.classList[t.isLocked?"add":"remove"](y.lockClass))})}function l(){const{nextEl:x,prevEl:p}=t.navigation;if(t.params.loop){o(p,!1),o(x,!1);return}o(p,t.isBeginning&&!t.params.rewind),o(x,t.isEnd&&!t.params.rewind)}function c(x){x.preventDefault(),!(t.isBeginning&&!t.params.loop&&!t.params.rewind)&&(t.slidePrev(),i("navigationPrev"))}function d(x){x.preventDefault(),!(t.isEnd&&!t.params.loop&&!t.params.rewind)&&(t.slideNext(),i("navigationNext"))}function h(){const x=t.params.navigation;if(t.params.navigation=iU(t,t.originalParams.navigation,t.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(x.nextEl||x.prevEl))return;let p=a(x.nextEl),y=a(x.prevEl);Object.assign(t.navigation,{nextEl:p,prevEl:y}),p=kn(p),y=kn(y);const b=(w,N)=>{w&&w.addEventListener("click",N==="next"?d:c),!t.enabled&&w&&w.classList.add(...x.lockClass.split(" "))};p.forEach(w=>b(w,"next")),y.forEach(w=>b(w,"prev"))}function m(){let{nextEl:x,prevEl:p}=t.navigation;x=kn(x),p=kn(p);const y=(b,w)=>{b.removeEventListener("click",w==="next"?d:c),b.classList.remove(...t.params.navigation.disabledClass.split(" "))};x.forEach(b=>y(b,"next")),p.forEach(b=>y(b,"prev"))}s("init",()=>{t.params.navigation.enabled===!1?g():(h(),l())}),s("toEdge fromEdge lock unlock",()=>{l()}),s("destroy",()=>{m()}),s("enable disable",()=>{let{nextEl:x,prevEl:p}=t.navigation;if(x=kn(x),p=kn(p),t.enabled){l();return}[...x,...p].filter(y=>!!y).forEach(y=>y.classList.add(t.params.navigation.lockClass))}),s("click",(x,p)=>{let{nextEl:y,prevEl:b}=t.navigation;y=kn(y),b=kn(b);const w=p.target;let N=b.includes(w)||y.includes(w);if(t.isElement&&!N){const S=p.path||p.composedPath&&p.composedPath();S&&(N=S.find(P=>y.includes(P)||b.includes(P)))}if(t.params.navigation.hideOnClick&&!N){if(t.pagination&&t.params.pagination&&t.params.pagination.clickable&&(t.pagination.el===w||t.pagination.el.contains(w)))return;let S;y.length?S=y[0].classList.contains(t.params.navigation.hiddenClass):b.length&&(S=b[0].classList.contains(t.params.navigation.hiddenClass)),i(S===!0?"navigationShow":"navigationHide"),[...y,...b].filter(P=>!!P).forEach(P=>P.classList.toggle(t.params.navigation.hiddenClass))}});const f=()=>{t.el.classList.remove(...t.params.navigation.navigationDisabledClass.split(" ")),h(),l()},g=()=>{t.el.classList.add(...t.params.navigation.navigationDisabledClass.split(" ")),m()};Object.assign(t.navigation,{enable:f,disable:g,update:l,init:h,destroy:m})}function Pf(e){return e===void 0&&(e=""),`.${e.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function l2(e){let{swiper:t,extendParams:n,on:s,emit:i}=e;const a="swiper-pagination";n({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:w=>w,formatFractionTotal:w=>w,bulletClass:`${a}-bullet`,bulletActiveClass:`${a}-bullet-active`,modifierClass:`${a}-`,currentClass:`${a}-current`,totalClass:`${a}-total`,hiddenClass:`${a}-hidden`,progressbarFillClass:`${a}-progressbar-fill`,progressbarOppositeClass:`${a}-progressbar-opposite`,clickableClass:`${a}-clickable`,lockClass:`${a}-lock`,horizontalClass:`${a}-horizontal`,verticalClass:`${a}-vertical`,paginationDisabledClass:`${a}-disabled`}}),t.pagination={el:null,bullets:[]};let o,l=0;function c(){return!t.params.pagination.el||!t.pagination.el||Array.isArray(t.pagination.el)&&t.pagination.el.length===0}function d(w,N){const{bulletActiveClass:S}=t.params.pagination;w&&(w=w[`${N==="prev"?"previous":"next"}ElementSibling`],w&&(w.classList.add(`${S}-${N}`),w=w[`${N==="prev"?"previous":"next"}ElementSibling`],w&&w.classList.add(`${S}-${N}-${N}`)))}function h(w,N,S){if(w=w%S,N=N%S,N===w+1)return"next";if(N===w-1)return"previous"}function m(w){const N=w.target.closest(Pf(t.params.pagination.bulletClass));if(!N)return;w.preventDefault();const S=k0(N)*t.params.slidesPerGroup;if(t.params.loop){if(t.realIndex===S)return;const P=h(t.realIndex,S,t.slides.length);P==="next"?t.slideNext():P==="previous"?t.slidePrev():t.slideToLoop(S)}else t.slideTo(S)}function f(){const w=t.rtl,N=t.params.pagination;if(c())return;let S=t.pagination.el;S=kn(S);let P,C;const k=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,O=t.params.loop?Math.ceil(k/t.params.slidesPerGroup):t.snapGrid.length;if(t.params.loop?(C=t.previousRealIndex||0,P=t.params.slidesPerGroup>1?Math.floor(t.realIndex/t.params.slidesPerGroup):t.realIndex):typeof t.snapIndex<"u"?(P=t.snapIndex,C=t.previousSnapIndex):(C=t.previousIndex||0,P=t.activeIndex||0),N.type==="bullets"&&t.pagination.bullets&&t.pagination.bullets.length>0){const I=t.pagination.bullets;let T,E,D;if(N.dynamicBullets&&(o=i2(I[0],t.isHorizontal()?"width":"height"),S.forEach(B=>{B.style[t.isHorizontal()?"width":"height"]=`${o*(N.dynamicMainBullets+4)}px`}),N.dynamicMainBullets>1&&C!==void 0&&(l+=P-(C||0),l>N.dynamicMainBullets-1?l=N.dynamicMainBullets-1:l<0&&(l=0)),T=Math.max(P-l,0),E=T+(Math.min(I.length,N.dynamicMainBullets)-1),D=(E+T)/2),I.forEach(B=>{const M=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(U=>`${N.bulletActiveClass}${U}`)].map(U=>typeof U=="string"&&U.includes(" ")?U.split(" "):U).flat();B.classList.remove(...M)}),S.length>1)I.forEach(B=>{const M=k0(B);M===P?B.classList.add(...N.bulletActiveClass.split(" ")):t.isElement&&B.setAttribute("part","bullet"),N.dynamicBullets&&(M>=T&&M<=E&&B.classList.add(...`${N.bulletActiveClass}-main`.split(" ")),M===T&&d(B,"prev"),M===E&&d(B,"next"))});else{const B=I[P];if(B&&B.classList.add(...N.bulletActiveClass.split(" ")),t.isElement&&I.forEach((M,U)=>{M.setAttribute("part",U===P?"bullet-active":"bullet")}),N.dynamicBullets){const M=I[T],U=I[E];for(let H=T;H<=E;H+=1)I[H]&&I[H].classList.add(...`${N.bulletActiveClass}-main`.split(" "));d(M,"prev"),d(U,"next")}}if(N.dynamicBullets){const B=Math.min(I.length,N.dynamicMainBullets+4),M=(o*B-o)/2-D*o,U=w?"right":"left";I.forEach(H=>{H.style[t.isHorizontal()?U:"top"]=`${M}px`})}}S.forEach((I,T)=>{if(N.type==="fraction"&&(I.querySelectorAll(Pf(N.currentClass)).forEach(E=>{E.textContent=N.formatFractionCurrent(P+1)}),I.querySelectorAll(Pf(N.totalClass)).forEach(E=>{E.textContent=N.formatFractionTotal(O)})),N.type==="progressbar"){let E;N.progressbarOpposite?E=t.isHorizontal()?"vertical":"horizontal":E=t.isHorizontal()?"horizontal":"vertical";const D=(P+1)/O;let B=1,M=1;E==="horizontal"?B=D:M=D,I.querySelectorAll(Pf(N.progressbarFillClass)).forEach(U=>{U.style.transform=`translate3d(0,0,0) scaleX(${B}) scaleY(${M})`,U.style.transitionDuration=`${t.params.speed}ms`})}N.type==="custom"&&N.renderCustom?(T0(I,N.renderCustom(t,P+1,O)),T===0&&i("paginationRender",I)):(T===0&&i("paginationRender",I),i("paginationUpdate",I)),t.params.watchOverflow&&t.enabled&&I.classList[t.isLocked?"add":"remove"](N.lockClass)})}function g(){const w=t.params.pagination;if(c())return;const N=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.grid&&t.params.grid.rows>1?t.slides.length/Math.ceil(t.params.grid.rows):t.slides.length;let S=t.pagination.el;S=kn(S);let P="";if(w.type==="bullets"){let C=t.params.loop?Math.ceil(N/t.params.slidesPerGroup):t.snapGrid.length;t.params.freeMode&&t.params.freeMode.enabled&&C>N&&(C=N);for(let k=0;k<C;k+=1)w.renderBullet?P+=w.renderBullet.call(t,k,w.bulletClass):P+=`<${w.bulletElement} ${t.isElement?'part="bullet"':""} class="${w.bulletClass}"></${w.bulletElement}>`}w.type==="fraction"&&(w.renderFraction?P=w.renderFraction.call(t,w.currentClass,w.totalClass):P=`<span class="${w.currentClass}"></span> / <span class="${w.totalClass}"></span>`),w.type==="progressbar"&&(w.renderProgressbar?P=w.renderProgressbar.call(t,w.progressbarFillClass):P=`<span class="${w.progressbarFillClass}"></span>`),t.pagination.bullets=[],S.forEach(C=>{w.type!=="custom"&&T0(C,P||""),w.type==="bullets"&&t.pagination.bullets.push(...C.querySelectorAll(Pf(w.bulletClass)))}),w.type!=="custom"&&i("paginationRender",S[0])}function x(){t.params.pagination=iU(t,t.originalParams.pagination,t.params.pagination,{el:"swiper-pagination"});const w=t.params.pagination;if(!w.el)return;let N;typeof w.el=="string"&&t.isElement&&(N=t.el.querySelector(w.el)),!N&&typeof w.el=="string"&&(N=[...document.querySelectorAll(w.el)]),N||(N=w.el),!(!N||N.length===0)&&(t.params.uniqueNavElements&&typeof w.el=="string"&&Array.isArray(N)&&N.length>1&&(N=[...t.el.querySelectorAll(w.el)],N.length>1&&(N=N.find(S=>qV(S,".swiper")[0]===t.el))),Array.isArray(N)&&N.length===1&&(N=N[0]),Object.assign(t.pagination,{el:N}),N=kn(N),N.forEach(S=>{w.type==="bullets"&&w.clickable&&S.classList.add(...(w.clickableClass||"").split(" ")),S.classList.add(w.modifierClass+w.type),S.classList.add(t.isHorizontal()?w.horizontalClass:w.verticalClass),w.type==="bullets"&&w.dynamicBullets&&(S.classList.add(`${w.modifierClass}${w.type}-dynamic`),l=0,w.dynamicMainBullets<1&&(w.dynamicMainBullets=1)),w.type==="progressbar"&&w.progressbarOpposite&&S.classList.add(w.progressbarOppositeClass),w.clickable&&S.addEventListener("click",m),t.enabled||S.classList.add(w.lockClass)}))}function p(){const w=t.params.pagination;if(c())return;let N=t.pagination.el;N&&(N=kn(N),N.forEach(S=>{S.classList.remove(w.hiddenClass),S.classList.remove(w.modifierClass+w.type),S.classList.remove(t.isHorizontal()?w.horizontalClass:w.verticalClass),w.clickable&&(S.classList.remove(...(w.clickableClass||"").split(" ")),S.removeEventListener("click",m))})),t.pagination.bullets&&t.pagination.bullets.forEach(S=>S.classList.remove(...w.bulletActiveClass.split(" ")))}s("changeDirection",()=>{if(!t.pagination||!t.pagination.el)return;const w=t.params.pagination;let{el:N}=t.pagination;N=kn(N),N.forEach(S=>{S.classList.remove(w.horizontalClass,w.verticalClass),S.classList.add(t.isHorizontal()?w.horizontalClass:w.verticalClass)})}),s("init",()=>{t.params.pagination.enabled===!1?b():(x(),g(),f())}),s("activeIndexChange",()=>{typeof t.snapIndex>"u"&&f()}),s("snapIndexChange",()=>{f()}),s("snapGridLengthChange",()=>{g(),f()}),s("destroy",()=>{p()}),s("enable disable",()=>{let{el:w}=t.pagination;w&&(w=kn(w),w.forEach(N=>N.classList[t.enabled?"remove":"add"](t.params.pagination.lockClass)))}),s("lock unlock",()=>{f()}),s("click",(w,N)=>{const S=N.target,P=kn(t.pagination.el);if(t.params.pagination.el&&t.params.pagination.hideOnClick&&P&&P.length>0&&!S.classList.contains(t.params.pagination.bulletClass)){if(t.navigation&&(t.navigation.nextEl&&S===t.navigation.nextEl||t.navigation.prevEl&&S===t.navigation.prevEl))return;const C=P[0].classList.contains(t.params.pagination.hiddenClass);i(C===!0?"paginationShow":"paginationHide"),P.forEach(k=>k.classList.toggle(t.params.pagination.hiddenClass))}});const y=()=>{t.el.classList.remove(t.params.pagination.paginationDisabledClass);let{el:w}=t.pagination;w&&(w=kn(w),w.forEach(N=>N.classList.remove(t.params.pagination.paginationDisabledClass))),x(),g(),f()},b=()=>{t.el.classList.add(t.params.pagination.paginationDisabledClass);let{el:w}=t.pagination;w&&(w=kn(w),w.forEach(N=>N.classList.add(t.params.pagination.paginationDisabledClass))),p()};Object.assign(t.pagination,{enable:y,disable:b,render:g,update:f,init:x,destroy:p})}function oU(e){let{swiper:t,extendParams:n,on:s,emit:i,params:a}=e;t.autoplay={running:!1,paused:!1,timeLeft:0},n({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let o,l,c=a&&a.autoplay?a.autoplay.delay:3e3,d=a&&a.autoplay?a.autoplay.delay:3e3,h,m=new Date().getTime(),f,g,x,p,y,b,w;function N(W){!t||t.destroyed||!t.wrapperEl||W.target===t.wrapperEl&&(t.wrapperEl.removeEventListener("transitionend",N),!(w||W.detail&&W.detail.bySwiperTouchMove)&&T())}const S=()=>{if(t.destroyed||!t.autoplay.running)return;t.autoplay.paused?f=!0:f&&(d=h,f=!1);const W=t.autoplay.paused?h:m+d-new Date().getTime();t.autoplay.timeLeft=W,i("autoplayTimeLeft",W,W/c),l=requestAnimationFrame(()=>{S()})},P=()=>{let W;return t.virtual&&t.params.virtual.enabled?W=t.slides.find(z=>z.classList.contains("swiper-slide-active")):W=t.slides[t.activeIndex],W?parseInt(W.getAttribute("data-swiper-autoplay"),10):void 0},C=W=>{if(t.destroyed||!t.autoplay.running)return;cancelAnimationFrame(l),S();let V=typeof W>"u"?t.params.autoplay.delay:W;c=t.params.autoplay.delay,d=t.params.autoplay.delay;const z=P();!Number.isNaN(z)&&z>0&&typeof W>"u"&&(V=z,c=z,d=z),h=V;const q=t.params.speed,J=()=>{!t||t.destroyed||(t.params.autoplay.reverseDirection?!t.isBeginning||t.params.loop||t.params.rewind?(t.slidePrev(q,!0,!0),i("autoplay")):t.params.autoplay.stopOnLastSlide||(t.slideTo(t.slides.length-1,q,!0,!0),i("autoplay")):!t.isEnd||t.params.loop||t.params.rewind?(t.slideNext(q,!0,!0),i("autoplay")):t.params.autoplay.stopOnLastSlide||(t.slideTo(0,q,!0,!0),i("autoplay")),t.params.cssMode&&(m=new Date().getTime(),requestAnimationFrame(()=>{C()})))};return V>0?(clearTimeout(o),o=setTimeout(()=>{J()},V)):requestAnimationFrame(()=>{J()}),V},k=()=>{m=new Date().getTime(),t.autoplay.running=!0,C(),i("autoplayStart")},O=()=>{t.autoplay.running=!1,clearTimeout(o),cancelAnimationFrame(l),i("autoplayStop")},I=(W,V)=>{if(t.destroyed||!t.autoplay.running)return;clearTimeout(o),W||(b=!0);const z=()=>{i("autoplayPause"),t.params.autoplay.waitForTransition?t.wrapperEl.addEventListener("transitionend",N):T()};if(t.autoplay.paused=!0,V){y&&(h=t.params.autoplay.delay),y=!1,z();return}h=(h||t.params.autoplay.delay)-(new Date().getTime()-m),!(t.isEnd&&h<0&&!t.params.loop)&&(h<0&&(h=0),z())},T=()=>{t.isEnd&&h<0&&!t.params.loop||t.destroyed||!t.autoplay.running||(m=new Date().getTime(),b?(b=!1,C(h)):C(),t.autoplay.paused=!1,i("autoplayResume"))},E=()=>{if(t.destroyed||!t.autoplay.running)return;const W=$a();W.visibilityState==="hidden"&&(b=!0,I(!0)),W.visibilityState==="visible"&&T()},D=W=>{W.pointerType==="mouse"&&(b=!0,w=!0,!(t.animating||t.autoplay.paused)&&I(!0))},B=W=>{W.pointerType==="mouse"&&(w=!1,t.autoplay.paused&&T())},M=()=>{t.params.autoplay.pauseOnMouseEnter&&(t.el.addEventListener("pointerenter",D),t.el.addEventListener("pointerleave",B))},U=()=>{t.el&&typeof t.el!="string"&&(t.el.removeEventListener("pointerenter",D),t.el.removeEventListener("pointerleave",B))},H=()=>{$a().addEventListener("visibilitychange",E)},K=()=>{$a().removeEventListener("visibilitychange",E)};s("init",()=>{t.params.autoplay.enabled&&(M(),H(),k())}),s("destroy",()=>{U(),K(),t.autoplay.running&&O()}),s("_freeModeStaticRelease",()=>{(x||b)&&T()}),s("_freeModeNoMomentumRelease",()=>{t.params.autoplay.disableOnInteraction?O():I(!0,!0)}),s("beforeTransitionStart",(W,V,z)=>{t.destroyed||!t.autoplay.running||(z||!t.params.autoplay.disableOnInteraction?I(!0,!0):O())}),s("sliderFirstMove",()=>{if(!(t.destroyed||!t.autoplay.running)){if(t.params.autoplay.disableOnInteraction){O();return}g=!0,x=!1,b=!1,p=setTimeout(()=>{b=!0,x=!0,I(!0)},200)}}),s("touchEnd",()=>{if(!(t.destroyed||!t.autoplay.running||!g)){if(clearTimeout(p),clearTimeout(o),t.params.autoplay.disableOnInteraction){x=!1,g=!1;return}x&&t.params.cssMode&&T(),x=!1,g=!1}}),s("slideChange",()=>{t.destroyed||!t.autoplay.running||(y=!0)}),Object.assign(t.autoplay,{start:k,stop:O,pause:I,resume:T})}function ome(e){let{swiper:t,extendParams:n,emit:s,once:i}=e;n({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}});function a(){if(t.params.cssMode)return;const c=t.getTranslate();t.setTranslate(c),t.setTransition(0),t.touchEventsData.velocities.length=0,t.freeMode.onTouchEnd({currentPos:t.rtl?t.translate:-t.translate})}function o(){if(t.params.cssMode)return;const{touchEventsData:c,touches:d}=t;c.velocities.length===0&&c.velocities.push({position:d[t.isHorizontal()?"startX":"startY"],time:c.touchStartTime}),c.velocities.push({position:d[t.isHorizontal()?"currentX":"currentY"],time:yd()})}function l(c){let{currentPos:d}=c;if(t.params.cssMode)return;const{params:h,wrapperEl:m,rtlTranslate:f,snapGrid:g,touchEventsData:x}=t,y=yd()-x.touchStartTime;if(d<-t.minTranslate()){t.slideTo(t.activeIndex);return}if(d>-t.maxTranslate()){t.slides.length<g.length?t.slideTo(g.length-1):t.slideTo(t.slides.length-1);return}if(h.freeMode.momentum){if(x.velocities.length>1){const O=x.velocities.pop(),I=x.velocities.pop(),T=O.position-I.position,E=O.time-I.time;t.velocity=T/E,t.velocity/=2,Math.abs(t.velocity)<h.freeMode.minimumVelocity&&(t.velocity=0),(E>150||yd()-O.time>300)&&(t.velocity=0)}else t.velocity=0;t.velocity*=h.freeMode.momentumVelocityRatio,x.velocities.length=0;let b=1e3*h.freeMode.momentumRatio;const w=t.velocity*b;let N=t.translate+w;f&&(N=-N);let S=!1,P;const C=Math.abs(t.velocity)*20*h.freeMode.momentumBounceRatio;let k;if(N<t.maxTranslate())h.freeMode.momentumBounce?(N+t.maxTranslate()<-C&&(N=t.maxTranslate()-C),P=t.maxTranslate(),S=!0,x.allowMomentumBounce=!0):N=t.maxTranslate(),h.loop&&h.centeredSlides&&(k=!0);else if(N>t.minTranslate())h.freeMode.momentumBounce?(N-t.minTranslate()>C&&(N=t.minTranslate()+C),P=t.minTranslate(),S=!0,x.allowMomentumBounce=!0):N=t.minTranslate(),h.loop&&h.centeredSlides&&(k=!0);else if(h.freeMode.sticky){let O;for(let I=0;I<g.length;I+=1)if(g[I]>-N){O=I;break}Math.abs(g[O]-N)<Math.abs(g[O-1]-N)||t.swipeDirection==="next"?N=g[O]:N=g[O-1],N=-N}if(k&&i("transitionEnd",()=>{t.loopFix()}),t.velocity!==0){if(f?b=Math.abs((-N-t.translate)/t.velocity):b=Math.abs((N-t.translate)/t.velocity),h.freeMode.sticky){const O=Math.abs((f?-N:N)-t.translate),I=t.slidesSizesGrid[t.activeIndex];O<I?b=h.speed:O<2*I?b=h.speed*1.5:b=h.speed*2.5}}else if(h.freeMode.sticky){t.slideToClosest();return}h.freeMode.momentumBounce&&S?(t.updateProgress(P),t.setTransition(b),t.setTranslate(N),t.transitionStart(!0,t.swipeDirection),t.animating=!0,P1(m,()=>{!t||t.destroyed||!x.allowMomentumBounce||(s("momentumBounce"),t.setTransition(h.speed),setTimeout(()=>{t.setTranslate(P),P1(m,()=>{!t||t.destroyed||t.transitionEnd()})},0))})):t.velocity?(s("_freeModeNoMomentumRelease"),t.updateProgress(N),t.setTransition(b),t.setTranslate(N),t.transitionStart(!0,t.swipeDirection),t.animating||(t.animating=!0,P1(m,()=>{!t||t.destroyed||t.transitionEnd()}))):t.updateProgress(N),t.updateActiveIndex(),t.updateSlidesClasses()}else if(h.freeMode.sticky){t.slideToClosest();return}else h.freeMode&&s("_freeModeNoMomentumRelease");(!h.freeMode.momentum||y>=h.longSwipesMs)&&(s("_freeModeStaticRelease"),t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses())}Object.assign(t,{freeMode:{onTouchStart:a,onTouchMove:o,onTouchEnd:l}})}const lme=()=>{const[e,t]=j.useState({days:2,hours:23,minutes:59,seconds:59});return j.useEffect(()=>{const n=()=>{const i=new Date,l=2-Math.floor(i.getTime()/(1e3*60*60*24))%3,c=new Date(i);if(c.setHours(23,59,59,999),l===0){const d=c.getTime()-i.getTime(),h=Math.floor(d%(1e3*60*60*24)/(1e3*60*60)),m=Math.floor(d%(1e3*60*60)/(1e3*60)),f=Math.floor(d%(1e3*60)/1e3);t({days:0,hours:h,minutes:m,seconds:f})}else t({days:l,hours:23-i.getHours(),minutes:59-i.getMinutes(),seconds:59-i.getSeconds()})},s=setInterval(n,1e3);return n(),()=>clearInterval(s)},[]),r.jsxs("div",{className:"flex items-center justify-center gap-2 sm:gap-4 mt-6",children:[r.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-3 sm:p-4 text-center min-w-[60px] sm:min-w-[80px]",children:[r.jsx("div",{className:"text-2xl sm:text-4xl font-bold text-white",children:e.days.toString().padStart(2,"0")}),r.jsx("div",{className:"text-xs sm:text-sm opacity-80",children:"Days"})]}),r.jsx("div",{className:"text-2xl sm:text-4xl font-bold text-white",children:":"}),r.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-3 sm:p-4 text-center min-w-[60px] sm:min-w-[80px]",children:[r.jsx("div",{className:"text-2xl sm:text-4xl font-bold text-white",children:e.hours.toString().padStart(2,"0")}),r.jsx("div",{className:"text-xs sm:text-sm opacity-80",children:"Hours"})]}),r.jsx("div",{className:"text-2xl sm:text-4xl font-bold text-white",children:":"}),r.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-3 sm:p-4 text-center min-w-[60px] sm:min-w-[80px]",children:[r.jsx("div",{className:"text-2xl sm:text-4xl font-bold text-white",children:e.minutes.toString().padStart(2,"0")}),r.jsx("div",{className:"text-xs sm:text-sm opacity-80",children:"Minutes"})]}),r.jsx("div",{className:"text-2xl sm:text-4xl font-bold text-white",children:":"}),r.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-3 sm:p-4 text-center min-w-[60px] sm:min-w-[80px]",children:[r.jsx("div",{className:"text-2xl sm:text-4xl font-bold text-white",children:e.seconds.toString().padStart(2,"0")}),r.jsx("div",{className:"text-xs sm:text-sm opacity-80",children:"Seconds"})]})]})},cme=`
.categories-pagination .swiper-pagination-bullet {
  background: #e2e8f0 !important;
  opacity: 0.5 !important;
  width: 8px !important;
  height: 8px !important;
  margin: 0 4px !important;
  transition: all 0.3s ease !important;
}

.categories-pagination .swiper-pagination-bullet-active {
  background: #3b82f6 !important;
  opacity: 1 !important;
  transform: scale(1.2) !important;
}
`;if(typeof document<"u"){const e=document.createElement("style");e.textContent=cme,document.head.appendChild(e)}const dme="/assets/slider2.jpg",ume="/assets/slider1.jpg",hme="/assets/slide3.jpg";function CD(){var W,V;const[,e]=Jr(),{user:t,isLoading:n}=Gt(),{mode:s}=Ja();j.useEffect(()=>{!n&&(t==null?void 0:t.role)==="shopkeeper"&&e("/seller/dashboard")},[t,n,e]);const o=s==="shopping"?[{name:"Electronics",icon:"",href:"/products?category=1",gradient:"from-blue-500 to-cyan-500",images:["https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=300&h=200&fit=crop&auto=format","https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=300&h=200&fit=crop&auto=format","https://images.unsplash.com/photo-1496181133206-80ce9b88a853?w=300&h=200&fit=crop&auto=format"]},{name:"Fashion",icon:"",href:"/products?category=2",gradient:"from-pink-500 to-rose-500",images:["https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=300&h=200&fit=crop&auto=format","https://images.unsplash.com/photo-1445205170230-053b83016050?w=300&h=200&fit=crop&auto=format","https://images.unsplash.com/photo-1441984904996-e0b6ba687e04?w=300&h=200&fit=crop&auto=format"]},{name:"Home & Garden",icon:"",href:"/products?category=3",gradient:"from-green-500 to-emerald-500",images:["https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=300&h=200&fit=crop&auto=format","https://images.unsplash.com/photo-1584622650111-993a426fbf0a?w=300&h=200&fit=crop&auto=format","https://images.unsplash.com/photo-1555041469-a586c61ea9bc?w=300&h=200&fit=crop&auto=format"]},{name:"Books",icon:"",href:"/products?category=4",gradient:"from-amber-500 to-orange-500",images:["https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=300&h=200&fit=crop&auto=format","https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=300&h=200&fit=crop&auto=format","https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?w=300&h=200&fit=crop&auto=format"]},{name:"Beauty",icon:"",href:"/products?category=5",gradient:"from-purple-500 to-pink-500",images:["https://images.unsplash.com/photo-1596462502278-27bfdc403348?w=300&h=300&fit=crop&auto=format","https://images.unsplash.com/photo-1522335789203-aabd1fc54bc9?w=300&h=300&fit=crop&auto=format","https://images.unsplash.com/photo-1549298916-f52d724204b4?w=300&h=300&fit=crop&auto=format"]},{name:"Sports",icon:"",href:"/products?category=6",gradient:"from-orange-500 to-red-500",images:["https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=300&h=300&fit=crop&auto=format","https://images.unsplash.com/photo-1544966503-7cc5ac882d5e?w=300&h=300&fit=crop&auto=format","https://images.unsplash.com/photo-1461896836934-ffe607ba8211?w=300&h=300&fit=crop&auto=format"]},{name:"Toys",icon:"",href:"/products?category=7",gradient:"from-yellow-400 to-orange-400",images:["https://images.unsplash.com/photo-1558060370-d644479cb6f7?w=300&h=300&fit=crop&auto=format","https://images.unsplash.com/photo-1587654780291-39c9404d746b?w=300&h=300&fit=crop&auto=format","https://images.unsplash.com/photo-1520887480574-5c2279f2c7e7?w=300&h=300&fit=crop&auto=format"]},{name:"Health",icon:"",href:"/products?category=8",gradient:"from-teal-500 to-green-500",images:["https://images.unsplash.com/photo-1559757175-0eb30cd8c063?w=300&h=300&fit=crop&auto=format","https://images.unsplash.com/photo-1505751172876-fa1923c5c528?w=300&h=300&fit=crop&auto=format","https://images.unsplash.com/photo-1576091160399-112ba8d25d1f?w=300&h=300&fit=crop&auto=format"]},{name:"Automotive",icon:"",href:"/products?category=9",gradient:"from-gray-600 to-gray-800",images:["https://images.unsplash.com/photo-1492144534655-ae79c964c9d7?w=300&h=300&fit=crop&auto=format","https://images.unsplash.com/photo-1603584173870-7f23fdae1b7a?w=300&h=300&fit=crop&auto=format","https://images.unsplash.com/photo-1517524206127-cd5d58c4f5d8?w=300&h=300&fit=crop&auto=format"]},{name:"Music",icon:"",href:"/products?category=10",gradient:"from-indigo-500 to-purple-500",images:["https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300&h=300&fit=crop&auto=format","https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=300&h=300&fit=crop&auto=format","https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?w=300&h=300&fit=crop&auto=format"]},{name:"Baby & Kids",icon:"",href:"/products?category=11",gradient:"from-rose-400 to-pink-500",images:["https://images.unsplash.com/photo-1522771739844-6a9f6d5f14af?w=300&h=200&fit=crop&auto=format"]},{name:"Kitchen",icon:"",href:"/products?category=12",gradient:"from-red-500 to-orange-500",images:["https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=300&h=200&fit=crop&auto=format"]},{name:"Gaming",icon:"",href:"/products?category=13",gradient:"from-indigo-600 to-purple-600",images:["https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=300&h=200&fit=crop&auto=format"]},{name:"Furniture",icon:"",href:"/products?category=14",gradient:"from-amber-600 to-yellow-500",images:["https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=300&h=200&fit=crop&auto=format"]},{name:"Tools",icon:"",href:"/products?category=15",gradient:"from-gray-600 to-slate-700",images:["https://images.unsplash.com/photo-1581833971358-2c8b550f87b3?w=300&h=200&fit=crop&auto=format"]},{name:"Jewelry",icon:"",href:"/products?category=16",gradient:"from-violet-500 to-purple-500",images:["https://images.unsplash.com/photo-1515562141207-7a88fb7ce338?w=300&h=200&fit=crop&auto=format"]},{name:"Pet Supplies",icon:"",href:"/products?category=17",gradient:"from-emerald-500 to-teal-500",images:["https://images.unsplash.com/photo-1601758228041-f3b2795255f1?w=300&h=200&fit=crop&auto=format"]},{name:"Office",icon:"",href:"/products?category=18",gradient:"from-slate-500 to-gray-600",images:["https://images.unsplash.com/photo-1497032628192-86f99bcd76bc?w=300&h=200&fit=crop&auto=format"]}]:[{name:"Indian Cuisine",icon:"",href:"/products?category=food&cuisine=indian",gradient:"from-red-600 to-orange-600",images:["https://images.unsplash.com/photo-1585937421612-70a008356fbe?w=300&h=200&fit=crop&auto=format","https://images.unsplash.com/photo-1567188040759-fb8a883dc6d8?w=300&h=200&fit=crop&auto=format","https://images.unsplash.com/photo-1574653853027-5d6f2d96c22d?w=300&h=200&fit=crop&auto=format"]},{name:"Fast Food",icon:"",href:"/products?category=food&cuisine=fast-food",gradient:"from-yellow-500 to-red-500",images:["https://images.unsplash.com/photo-1571091718767-18b5b1457add?w=300&h=200&fit=crop&auto=format","https://images.unsplash.com/photo-1550547660-d9450f859349?w=300&h=200&fit=crop&auto=format","https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=300&h=200&fit=crop&auto=format"]},{name:"Pizza",icon:"",href:"/products?category=food&type=pizza",gradient:"from-red-500 to-yellow-500",images:["https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=300&h=200&fit=crop&auto=format","https://images.unsplash.com/photo-1574071318508-1cdbab80d002?w=300&h=200&fit=crop&auto=format","https://images.unsplash.com/photo-1590534450747-36e3ae8a9daf?w=300&h=200&fit=crop&auto=format"]},{name:"Desserts",icon:"",href:"/products?category=food&cuisine=desserts",gradient:"from-pink-500 to-purple-500",images:["https://images.unsplash.com/photo-1551024506-0bccd828d307?w=300&h=200&fit=crop&auto=format","https://images.unsplash.com/photo-1563729784474-d77dbb933a9e?w=300&h=200&fit=crop&auto=format","https://images.unsplash.com/photo-1578985545062-69928b1d9587?w=300&h=200&fit=crop&auto=format"]},{name:"Chinese",icon:"",href:"/products?category=food&cuisine=chinese",gradient:"from-red-700 to-yellow-600"},{name:"Italian",icon:"",href:"/products?category=food&cuisine=italian",gradient:"from-green-600 to-red-600"},{name:"Mexican",icon:"",href:"/products?category=food&cuisine=mexican",gradient:"from-green-500 to-red-500"},{name:"Beverages",icon:"",href:"/products?category=food&type=beverages",gradient:"from-blue-500 to-cyan-400"},{name:"Biryani",icon:"",href:"/products?category=food&type=biryani",gradient:"from-orange-600 to-yellow-500"},{name:"Healthy",icon:"",href:"/products?category=food&type=healthy",gradient:"from-green-400 to-lime-500"},{name:"Seafood",icon:"",href:"/products?category=food&type=seafood",gradient:"from-cyan-500 to-blue-500"},{name:"BBQ & Grill",icon:"",href:"/products?category=food&type=bbq",gradient:"from-red-600 to-orange-600"},{name:"Sweets",icon:"",href:"/products?category=food&type=sweets",gradient:"from-pink-400 to-purple-400"},{name:"Coffee",icon:"",href:"/products?category=food&type=coffee",gradient:"from-amber-700 to-yellow-600"},{name:"Ice Cream",icon:"",href:"/products?category=food&type=ice-cream",gradient:"from-blue-300 to-cyan-300"},{name:"Bakery",icon:"",href:"/products?category=food&type=bakery",gradient:"from-yellow-600 to-orange-500"},{name:"Sandwiches",icon:"",href:"/products?category=food&type=sandwiches",gradient:"from-green-500 to-yellow-500"},{name:"Noodles",icon:"",href:"/products?category=food&type=noodles",gradient:"from-red-500 to-orange-500"}];j.useEffect(()=>{(async()=>{try{await Bt("/api/recommendations/track",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:(t==null?void 0:t.id)||null,page:"/",action:"homepage_visit"})})}catch(q){console.log("Visit tracking failed (non-critical):",q)}})()},[t]);const{data:l,isLoading:c,error:d,refetch:h}=Re({queryKey:["/api/recommendations/homepage",s,t==null?void 0:t.id],queryFn:async()=>{const z=new URLSearchParams({mode:s,...(t==null?void 0:t.id)&&{userId:t.id.toString()}}),q=await fetch(`/api/recommendations/homepage?${z}`,{credentials:"include"});if(!q.ok)throw new Error(`Failed to fetch recommendations: ${q.statusText}`);return q.json()},retry:3,staleTime:5*60*1e3}),{data:m,isLoading:f,error:g,refetch:x}=Re({queryKey:["/api/products"],retry:3,staleTime:5*60*1e3,enabled:!((W=l==null?void 0:l.products)!=null&&W.length)}),{data:p,isLoading:y,error:b,refetch:w}=Re({queryKey:["/api/stores"],retry:3,staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0,enabled:!((V=l==null?void 0:l.stores)!=null&&V.length)}),{data:N}=Re({queryKey:["/api/flash-sales/active"],staleTime:2*60*1e3}),S=[{id:1,title:"From Click to Doorstep  In Just One Hour",description:"Shop fast. Get it faster.",buttonText:"Shop Now",url:"/products",image:dme,overlay:"rgba(0, 0, 0, 0.4)"},{id:2,title:"Hot & Fresh  Tasty Food at Your Doorstep",description:"Delicious meals delivered fast",buttonText:"Order Now",url:"/restaurants",image:ume,overlay:"rgba(0, 0, 0, 0.4)"},{id:3,title:"Flash Sale! Limited Time Offer",description:"Hurry! These deals end in",buttonText:"Shop Now",url:"/flash-sales",image:hme,overlay:"rgba(0, 0, 0, 0.5)",showTimer:!0}];g&&console.error("Products loading failed:",{error:g,message:g instanceof Error?g.message:"Unknown error",timestamp:new Date().toISOString()}),b&&console.error("Stores loading failed:",{error:b,message:b instanceof Error?b.message:"Unknown error",timestamp:new Date().toISOString()}),m&&console.log("Products loaded:",m.length),p&&console.log("Stores loaded:",p.length);const P=(l==null?void 0:l.products)||[],C=(l==null?void 0:l.stores)||[],k=(l==null?void 0:l.isPersonalized)||!1,O=P.length>0?P.slice(0,20):(m==null?void 0:m.filter(z=>s==="shopping"?z.productType!=="food":z.productType==="food").slice(0,20))||[],I=C.length>0?C.slice(0,10):(p==null?void 0:p.filter(z=>s==="shopping"?z.storeType!=="restaurant":z.storeType==="restaurant").slice(0,10))||[],T=c||f&&!P.length,E=c||y&&!C.length,D=d&&g,B=d&&b,M=()=>r.jsxs("div",{className:"text-center py-12",children:[r.jsxs(ri,{className:"max-w-md mx-auto",children:[r.jsx(wr,{className:"h-4 w-4"}),r.jsx(ni,{children:"Failed to load products. Please try again."})]}),r.jsxs(F,{onClick:()=>x(),variant:"outline",className:"mt-4",disabled:f,children:[r.jsx(Ms,{className:`mr-2 h-4 w-4 ${f?"animate-spin":""}`}),"Retry"]})]}),U=()=>r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3 sm:gap-4",children:Array.from({length:6}).map((z,q)=>r.jsx(G,{className:"animate-pulse",children:r.jsxs(Z,{className:"p-4",children:[r.jsx("div",{className:"bg-gray-200 h-32 rounded-md mb-3"}),r.jsx("div",{className:"bg-gray-200 h-4 rounded mb-2"}),r.jsx("div",{className:"bg-gray-200 h-3 rounded w-3/4"})]})},q))}),H=()=>r.jsxs("div",{className:"text-center py-12",children:[r.jsxs(ri,{className:"max-w-md mx-auto",children:[r.jsx(wr,{className:"h-4 w-4"}),r.jsx(ni,{children:"Failed to load stores. Please try again."})]}),r.jsxs(F,{onClick:()=>w(),variant:"outline",className:"mt-4",disabled:y,children:[r.jsx(Ms,{className:`mr-2 h-4 w-4 ${y?"animate-spin":""}`}),"Retry"]})]}),K=()=>r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 lg:gap-8",children:Array.from({length:4}).map((z,q)=>r.jsx(G,{className:"animate-pulse",children:r.jsxs(Z,{className:"p-6",children:[r.jsx("div",{className:"bg-gray-200 h-24 rounded-md mb-4"}),r.jsx("div",{className:"bg-gray-200 h-5 rounded mb-2"}),r.jsx("div",{className:"bg-gray-200 h-4 rounded w-2/3 mb-2"}),r.jsx("div",{className:"bg-gray-200 h-3 rounded w-1/2"})]})},q))});return r.jsxs("div",{className:"min-h-screen",children:[r.jsx("section",{className:"relative w-full h-[50vh] min-h-[300px]",children:r.jsxs(E0,{modules:[aU,l2,oU],spaceBetween:0,slidesPerView:1,navigation:!0,pagination:{clickable:!0,el:".swiper-pagination",type:"bullets"},autoplay:{delay:4e3,disableOnInteraction:!1},className:"h-full w-full m-0 p-0",style:{"--swiper-navigation-color":"#ffffff","--swiper-pagination-color":"#ffffff","--swiper-pagination-bullet-inactive-color":"rgba(255, 255, 255, 0.5)","--swiper-pagination-bullet-inactive-opacity":"1","--swiper-pagination-bullet-size":"10px","--swiper-pagination-bullet-horizontal-gap":"6px"},children:[S.map(z=>r.jsx(hp,{children:r.jsxs("div",{className:"relative w-full h-full flex items-center justify-center p-0 m-0",style:{background:`url(${z.image}) center/cover no-repeat`,position:"relative",height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:[r.jsx("div",{className:"absolute inset-0 bg-black/40"}),r.jsxs("div",{className:"relative z-10 max-w-4xl px-4 sm:px-6 lg:px-8 text-center text-white",children:[r.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold mb-4 leading-tight drop-shadow-lg",children:z.title}),r.jsx("p",{className:"text-lg sm:text-xl mb-6 opacity-90 max-w-2xl mx-auto drop-shadow",children:z.description}),z.showTimer&&r.jsx(lme,{}),r.jsx(Ae,{href:z.url,className:"mt-6 inline-block",children:r.jsxs(F,{size:"lg",className:"bg-white text-gray-900 hover:bg-gray-100 text-base sm:text-lg px-8 py-6 rounded-full font-semibold shadow-lg hover:shadow-xl transition-all duration-200 transform hover:-translate-y-0.5",children:[z.buttonText,r.jsx(Jc,{className:"ml-2 h-5 w-5"})]})})]})]})},z.id)),r.jsx("div",{className:"swiper-pagination !bottom-6"}),r.jsx("div",{className:"swiper-button-next after:hidden",children:r.jsx("div",{className:"h-12 w-12 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center",children:r.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})}),r.jsx("div",{className:"swiper-button-prev after:hidden",children:r.jsx("div",{className:"h-12 w-12 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center",children:r.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})})})]})}),r.jsx("section",{className:"py-1 bg-background relative",style:{minHeight:"11.5vh",maxHeight:"11.5vh"},children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-full",children:[r.jsx("div",{className:"mb-1 sm:mb-2",children:r.jsx("h2",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-foreground",children:s==="shopping"?"Categories":"Menu"})}),r.jsxs("div",{className:"block sm:hidden categories-section mb-0 pb-0",style:{marginBottom:0,paddingBottom:0},children:[r.jsxs(E0,{modules:[ome,l2],spaceBetween:15,slidesPerView:5,freeMode:{enabled:!0,sticky:!0,momentumBounce:!1,momentumRatio:.8,momentumVelocityRatio:.8},grabCursor:!0,touchRatio:1,touchAngle:45,threshold:5,longSwipesRatio:.5,longSwipesMs:300,shortSwipes:!0,followFinger:!0,autoplay:!1,loop:!1,effect:"slide",resistance:!0,resistanceRatio:.85,preventInteractionOnTransition:!1,allowTouchMove:!0,simulateTouch:!0,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchMoveStopPropagation:!0,pagination:{clickable:!0,el:".mobile-categories-pagination",type:"bullets",dynamicBullets:!0,dynamicMainBullets:3,renderBullet:function(z,q){return'<span class="'+q+' mobile-category-bullet" data-index="'+z+'"></span>'}},className:"mobile-categories-swiper !overflow-visible !pb-2",style:{paddingLeft:"16px",paddingRight:"16px",overflow:"visible",touchAction:"pan-x",userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},breakpoints:{280:{slidesPerView:4,spaceBetween:12},320:{slidesPerView:4.5,spaceBetween:12},360:{slidesPerView:5,spaceBetween:15},375:{slidesPerView:5,spaceBetween:15},414:{slidesPerView:5.5,spaceBetween:15},480:{slidesPerView:6,spaceBetween:18}},children:[o.map((z,q)=>r.jsx(hp,{className:"!w-auto",children:r.jsx(Ae,{href:z.href,children:r.jsxs("div",{className:"mobile-category-item",children:[r.jsx("div",{className:"mobile-category-icon",children:z.images&&z.images[0]?r.jsx("img",{src:z.images[0],alt:z.name,className:"w-full h-full object-cover",loading:"lazy"}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`absolute inset-0 rounded-full bg-gradient-to-br ${z.gradient} opacity-90`}),r.jsx("div",{className:"absolute inset-0 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-lg",children:z.icon})})]})}),r.jsx("span",{className:"mobile-category-name",children:z.name})]})})},z.name)),r.jsx(hp,{className:"!w-auto",children:r.jsx(Ae,{href:s==="shopping"?"/categories":"/food-categories",children:r.jsxs("div",{className:"mobile-category-item mobile-view-all-category",children:[r.jsx("div",{className:"mobile-category-icon mobile-view-all-icon",children:r.jsx("div",{className:"absolute inset-0 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),r.jsx("span",{className:"mobile-category-name mobile-view-all-name",children:"View All"})]})})})]}),r.jsx("div",{className:"mobile-categories-pagination",style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"12px",marginBottom:"16px",minHeight:"20px",padding:"8px 0"},children:Array.from({length:Math.ceil(o.length/5)}).map((z,q)=>r.jsx("span",{className:"fallback-pagination-dot",style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:q===0?"#000000":"rgba(0,0,0,0.3)",margin:"0 4px",display:"inline-block",transition:"all 0.3s ease"}},q))})]}),r.jsx("div",{className:"hidden sm:block overflow-x-auto",children:r.jsxs("div",{className:"flex gap-4 lg:gap-6 min-w-fit px-2",children:[o.map((z,q)=>r.jsx(Ae,{href:z.href,children:r.jsxs("div",{className:"group flex flex-col items-center p-2 lg:p-3 rounded-xl hover:bg-secondary/50 transition-colors flex-shrink-0",children:[r.jsx("div",{className:"relative w-16 h-16 lg:w-20 lg:h-20 mb-2 overflow-hidden rounded-full shadow-lg",children:z.images&&z.images[0]?r.jsx("img",{src:z.images[0],alt:z.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300",loading:"lazy"}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`absolute inset-0 rounded-full bg-gradient-to-br ${z.gradient} opacity-90 group-hover:opacity-100 transition-opacity`}),r.jsx("div",{className:"absolute inset-0 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-2xl lg:text-3xl drop-shadow-sm group-hover:scale-110 transition-transform",children:z.icon})})]})}),r.jsx("span",{className:"text-xs lg:text-sm font-medium text-foreground text-center leading-tight group-hover:text-primary transition-colors w-20 lg:w-24",children:z.name})]})},z.name)),r.jsx(Ae,{href:s==="shopping"?"/categories":"/food-categories",children:r.jsxs("div",{className:"group flex flex-col items-center p-2 lg:p-3 rounded-xl hover:bg-secondary/50 transition-colors flex-shrink-0",children:[r.jsx("div",{className:"relative w-16 h-16 lg:w-20 lg:h-20 mb-2 overflow-hidden rounded-full shadow-lg bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-800",children:r.jsx("div",{className:"absolute inset-0 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-6 h-6 lg:w-8 lg:h-8 text-primary group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),r.jsx("span",{className:"text-xs lg:text-sm font-medium text-foreground text-center leading-tight group-hover:text-primary transition-colors w-20 lg:w-24",children:"View All"})]})})]})})]})}),r.jsx("section",{className:"py-8 sm:py-12 lg:py-16 bg-secondary/30",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"flex justify-between items-start mb-6 sm:mb-10 pr-2.5",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[r.jsx("h2",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-foreground",children:k?"Recommended for You":"Featured Products"}),k&&r.jsxs(le,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:[r.jsx(wn,{className:"h-3 w-3 mr-1"}),"Smart Pick"]})]}),r.jsx(Ae,{href:"/products",className:"flex-shrink-0 mt-1",children:r.jsx(F,{variant:"outline",className:"border-primary text-primary hover:bg-primary hover:text-white w-8 h-8 p-0",children:r.jsx(Jc,{className:"h-4 w-4"})})})]}),D?r.jsx(M,{}):T?r.jsx(U,{}):O.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-muted-foreground text-lg",children:"No featured products available at the moment"}),r.jsx("p",{className:"text-muted-foreground text-sm mt-2",children:"Check back later for new arrivals"})]}):r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3 sm:gap-4",children:O.map(z=>r.jsx(Wh,{product:z},z.id))})]})}),r.jsx("section",{className:"py-8 sm:py-12 lg:py-16 bg-background",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"flex justify-between items-start mb-6 sm:mb-10 pr-2.5",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[r.jsx("h2",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-foreground",children:k?"Stores You Might Like":`Popular ${s==="shopping"?"Stores":"Restaurants"}`}),k&&r.jsxs(le,{variant:"secondary",className:"bg-green-100 text-green-800",children:[r.jsx($8,{className:"h-3 w-3 mr-1"}),"Curated"]})]}),r.jsx(Ae,{href:s==="shopping"?"/stores":"/restaurants",className:"flex-shrink-0 mt-1",children:r.jsx(F,{variant:"outline",className:"border-primary text-primary hover:bg-primary hover:text-white w-8 h-8 p-0",children:r.jsx(Jc,{className:"h-4 w-4"})})})]}),B?r.jsx(H,{}):E?r.jsx(K,{}):I.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-muted-foreground text-lg",children:"No stores available at the moment"}),r.jsx("p",{className:"text-muted-foreground text-sm mt-2",children:"Check back later for new stores"})]}):r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3 sm:gap-4 md:gap-6",children:I.map(z=>r.jsx(UV,{store:z},z.id))})]})}),N&&N.length>0&&r.jsx("section",{className:"py-8 bg-accent",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 text-center",children:r.jsxs("div",{className:"text-white",children:[r.jsxs("h2",{className:"text-2xl font-bold mb-2",children:[" Flash Sale - ",N[0].discountPercentage,"% Off!"]}),r.jsx("p",{className:"text-lg mb-2",children:N[0].title}),N[0].description&&r.jsx("p",{className:"text-base mb-4 opacity-90",children:N[0].description}),r.jsxs("p",{className:"text-sm mb-4 opacity-75",children:["Ends: ",new Date(N[0].endsAt).toLocaleString()]}),r.jsx(Ae,{href:"/flash-sales",children:r.jsx(F,{variant:"outline",className:"bg-white text-accent hover:bg-gray-100",children:"View Flash Sales"})})]})})})]})}function c2({food:e}){const{addToCart:t}=Nc(),{addToWishlist:n,removeFromWishlist:s,isInWishlist:i}=vg(),{user:a}=Gt(),o=Vk(),l=a?i(e.id):!1,c=e.isOnOffer&&e.offerPercentage?(parseFloat(e.price)*(1-e.offerPercentage/100)).toFixed(2):e.price,d=m=>{m.preventDefault(),m.stopPropagation(),a&&(t(e.id,1),o.onCartAdd())},h=m=>{m.preventDefault(),m.stopPropagation(),a&&(l?(s(e.id),o.onCartRemove()):(n(e.id),o.onProductLike()))};return r.jsx(Ae,{href:`/food/${e.id}`,children:r.jsxs(G,{className:"overflow-hidden hover:shadow-lg transition-all duration-300 cursor-pointer group",children:[r.jsxs("div",{className:"relative h-48",children:[r.jsx("img",{src:e.imageUrl||e.images&&e.images[0]||"https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=300",alt:e.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:m=>{m.currentTarget.src="https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=300"}}),e.isOnOffer&&e.offerPercentage&&r.jsxs(le,{className:"absolute top-2 left-2 bg-red-500 hover:bg-red-600",children:[e.offerPercentage,"% OFF"]}),r.jsxs("div",{className:"absolute top-2 right-2 flex space-x-1",children:[e.isVegetarian&&r.jsx(le,{className:"bg-green-500 hover:bg-green-600",children:r.jsx(I8,{className:"h-3 w-3"})}),e.isVegan&&r.jsx(le,{className:"bg-green-600 hover:bg-green-700",children:"Vegan"})]}),a&&r.jsx(F,{variant:"ghost",size:"sm",className:"absolute bottom-2 right-2 bg-white/90 hover:bg-white",onClick:h,children:r.jsx(La,{className:`h-4 w-4 ${l?"text-red-500 fill-current":"text-gray-600"}`})})]}),r.jsxs(Z,{className:"p-3 sm:p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsx("h3",{className:"font-semibold text-sm sm:text-base md:text-lg group-hover:text-red-600 transition-colors line-clamp-1",children:e.name}),r.jsxs("div",{className:"flex flex-col items-end",children:[r.jsxs("span",{className:"font-bold text-sm sm:text-base md:text-lg text-red-600",children:["",c]}),e.isOnOffer&&e.offerPercentage&&r.jsxs("span",{className:"text-xs sm:text-sm text-gray-500 line-through",children:["",e.price]})]})]}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs sm:text-sm mb-2 sm:mb-3 line-clamp-2",children:e.description}),r.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:[e.preparationTime&&r.jsxs("div",{className:"flex items-center space-x-1 text-xs sm:text-sm text-gray-600",children:[r.jsx(gt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),r.jsx("span",{children:e.preparationTime})]}),e.spiceLevel&&r.jsxs(le,{variant:"outline",className:"text-xs",children:[" ",e.spiceLevel]})]}),e.rating&&parseFloat(e.rating)>0&&r.jsxs("div",{className:"flex items-center space-x-1 mb-2 sm:mb-3",children:[r.jsx("div",{className:"flex",children:[...Array(5)].map((m,f)=>r.jsx("span",{className:`text-xs sm:text-sm ${f<Math.floor(parseFloat(e.rating??"0"))?"text-yellow-400":"text-gray-300"}`,children:""},f))}),r.jsxs("span",{className:"text-xs sm:text-sm text-gray-600",children:["(",e.totalReviews," reviews)"]})]}),a&&r.jsxs(F,{onClick:d,className:"w-full bg-red-500 hover:bg-red-600 text-white",size:"sm",children:[r.jsx(Wt,{className:"h-4 w-4 mr-1"}),"Add to Cart"]})]})]})})}function mme({restaurant:e,showDistance:t=!0}){const[n,s]=j.useState(null),[i,a]=j.useState(!1),o=e.deliveryFee?`${e.deliveryFee}`:"Free",l=e.minimumOrder?`${e.minimumOrder}`:"";return j.useEffect(()=>{t&&e.latitude&&e.longitude&&(a(!0),Go().then(c=>{const d=Hh(c,{latitude:parseFloat(e.latitude),longitude:parseFloat(e.longitude)});s(d),a(!1)}).catch(()=>{a(!1)}))},[e.latitude,e.longitude,t]),r.jsx(Ae,{href:`/restaurant/${e.id}`,children:r.jsxs(G,{className:"overflow-hidden hover:shadow-lg transition-all duration-300 cursor-pointer group",children:[r.jsxs("div",{className:"relative h-48",children:[r.jsx("img",{src:e.coverImage||"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=300",alt:e.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:c=>{c.currentTarget.src="https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=300"}}),e.featured&&r.jsx(le,{className:"absolute top-2 left-2 bg-red-500 hover:bg-red-600",children:"Featured"}),e.isDeliveryAvailable&&r.jsxs(le,{className:"absolute top-2 right-2 bg-green-500 hover:bg-green-600",children:[r.jsx(c0,{className:"h-3 w-3 mr-1"}),"Delivery"]})]}),r.jsxs(Z,{className:"p-3 sm:p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsx("h3",{className:"font-semibold text-sm sm:text-base md:text-lg group-hover:text-red-600 transition-colors line-clamp-1",children:e.name}),r.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[r.jsx($t,{className:"h-3 w-3 sm:h-4 sm:w-4 text-yellow-400 fill-current"}),r.jsx("span",{className:"text-xs sm:text-sm font-medium",children:e.rating})]})]}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs sm:text-sm mb-2 sm:mb-3 line-clamp-2",children:e.description||`Delicious ${e.cuisineType||"multi-cuisine"} food delivered to your doorstep`}),e.cuisineType&&r.jsx(le,{variant:"outline",className:"mb-3",children:e.cuisineType}),r.jsxs("div",{className:"flex items-center justify-between text-xs sm:text-sm text-gray-600 dark:text-gray-400 mb-2",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(gt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),r.jsx("span",{children:e.deliveryTime||"25-35 mins"})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(c0,{className:"h-3 w-3 sm:h-4 sm:w-4"}),r.jsx("span",{children:o})]})]}),r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500 flex-1 min-w-0",children:[r.jsx(Le,{className:"h-3 w-3 flex-shrink-0"}),r.jsx("span",{className:"truncate",children:e.address})]}),t&&r.jsx("div",{className:"flex-shrink-0",children:i?r.jsxs(le,{variant:"outline",className:"text-xs animate-pulse",children:[r.jsx(Le,{className:"h-3 w-3 mr-1"}),"..."]}):n!==null?r.jsx(le,{variant:n<=1?"default":n<=5?"secondary":"outline",className:"text-xs font-medium bg-blue-50 text-blue-700 border-blue-200",children:Ql(n)}):null})]}),l&&r.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Min order: ",l]})]})]})})}function kD(){var f,g;const{user:e}=Gt();Ja(),j.useEffect(()=>{(async()=>{try{await fetch("/api/recommendations/track",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({userId:(e==null?void 0:e.id)||null,page:"/",action:"homepage_visit"})})}catch(p){console.log("Visit tracking failed (non-critical):",p)}})()},[e]);const{data:t,isLoading:n,error:s}=Re({queryKey:["/api/recommendations/homepage","food",e==null?void 0:e.id],queryFn:async()=>{const x=new URLSearchParams({mode:"food",...(e==null?void 0:e.id)&&{userId:e.id.toString()}}),p=await fetch(`/api/recommendations/homepage?${x}`,{credentials:"include"});if(!p.ok)throw new Error(`Failed to fetch recommendations: ${p.statusText}`);return p.json()},retry:3,staleTime:5*60*1e3}),{data:i}=Re({queryKey:["/api/products"],select:x=>(x==null?void 0:x.filter(p=>p.productType==="food"))||[],enabled:!((f=t==null?void 0:t.products)!=null&&f.length)}),{data:a}=Re({queryKey:["/api/stores"],select:x=>(x==null?void 0:x.filter(p=>p.storeType==="restaurant"))||[],enabled:!((g=t==null?void 0:t.stores)!=null&&g.length)}),o=(t==null?void 0:t.products)||[],l=(t==null?void 0:t.stores)||[],c=(t==null?void 0:t.isPersonalized)||!1,d=o.length>0?o.slice(0,8):(i==null?void 0:i.filter(x=>x.isOnOffer||x.isFastSell).slice(0,8))||[],h=l.length>0?l.slice(0,6):(a==null?void 0:a.slice(0,6))||[],m=o.length>0?o.filter(x=>x.preparationTime&&parseInt(x.preparationTime??"0")<=20).slice(0,6):(i==null?void 0:i.filter(x=>x.preparationTime&&parseInt(x.preparationTime??"0")<=20).slice(0,6))||[];return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-orange-50 dark:from-gray-900 dark:to-gray-800",children:[r.jsxs("section",{className:"relative overflow-hidden bg-gradient-to-r from-red-600 via-orange-500 to-yellow-500 text-white",children:[r.jsx("div",{className:"absolute inset-0 bg-black/20"}),r.jsx("div",{className:"relative container mx-auto px-4 py-12 sm:py-16 lg:py-24",children:r.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[r.jsxs("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-6xl font-bold mb-4 sm:mb-6 animate-fade-in",children:["Delicious Food ",r.jsx("span",{className:"text-yellow-300",children:"Delivered Fast"})]}),r.jsx("p",{className:"text-sm sm:text-base md:text-lg lg:text-2xl mb-6 sm:mb-8 text-red-100",children:"Discover amazing restaurants and get your favorite food delivered in minutes"}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center",children:[r.jsx(Ae,{href:"/restaurants",children:r.jsxs(F,{size:"sm",className:"bg-white text-red-600 hover:bg-red-50 font-semibold px-6 sm:px-8 text-sm sm:text-base",children:[r.jsx(Ta,{className:"mr-2 h-4 w-4 sm:h-5 sm:w-5"}),"Browse Restaurants"]})}),r.jsx(Ae,{href:"/food-categories",children:r.jsxs(F,{size:"sm",variant:"outline",className:"border-white text-white hover:bg-white hover:text-red-600 font-semibold px-6 sm:px-8 text-sm sm:text-base",children:["Explore Categories",r.jsx(Jc,{className:"ml-2 h-4 w-4 sm:h-5 sm:w-5"})]})})]})]})}),r.jsx("div",{className:"absolute top-10 left-10 text-6xl opacity-20 animate-bounce",children:""}),r.jsx("div",{className:"absolute top-20 right-20 text-5xl opacity-20 animate-bounce delay-100",children:""}),r.jsx("div",{className:"absolute bottom-20 left-20 text-4xl opacity-20 animate-bounce delay-200",children:""}),r.jsx("div",{className:"absolute bottom-10 right-10 text-5xl opacity-20 animate-bounce delay-300",children:""})]}),r.jsx("section",{className:"py-8 bg-white dark:bg-gray-800 shadow-sm",children:r.jsx("div",{className:"container mx-auto px-4",children:r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 sm:gap-6 text-center",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-red-600",children:[(a==null?void 0:a.length)||0,"+"]}),r.jsx("div",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Restaurants"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-orange-600",children:[(i==null?void 0:i.length)||0,"+"]}),r.jsx("div",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Food Items"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-yellow-600",children:"25 min"}),r.jsx("div",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Avg Delivery"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-green-600",children:"4.8"}),r.jsx("div",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Customer Rating"})]})]})})}),r.jsxs("div",{className:"container mx-auto px-4 py-8 sm:py-12 space-y-12 sm:space-y-16",children:[d.length>0&&r.jsxs("section",{children:[r.jsxs("div",{className:"flex justify-between items-start mb-8 pr-2.5",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsxs("h2",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-gray-900 dark:text-white flex items-center",children:[r.jsx(wn,{className:"mr-2 sm:mr-3 h-5 w-5 sm:h-6 sm:w-6 md:h-8 md:w-8 text-red-500"}),c?"Recommended for You":"Special Offers"]}),c&&r.jsxs(le,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:[r.jsx(wn,{className:"h-3 w-3 mr-1"}),"Smart Pick"]})]}),r.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400",children:c?"Personalized food recommendations based on your preferences":"Limited time deals you don't want to miss"})]}),r.jsx(Ae,{href:"/food-offers",className:"flex-shrink-0 mt-1",children:r.jsx(F,{variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-50 w-8 h-8 p-0",children:r.jsx(Jc,{className:"h-4 w-4"})})})]}),r.jsx(E0,{modules:[aU,l2,oU],spaceBetween:20,slidesPerView:1,navigation:!0,pagination:{clickable:!0},autoplay:{delay:4e3},breakpoints:{480:{slidesPerView:2},768:{slidesPerView:3},1024:{slidesPerView:4}},className:"pb-12",children:d.map(x=>r.jsx(hp,{children:r.jsx(c2,{food:x})},x.id))})]}),h.length>0&&r.jsxs("section",{children:[r.jsxs("div",{className:"flex justify-between items-start mb-8 pr-2.5",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsxs("h2",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-gray-900 dark:text-white flex items-center",children:[r.jsx($t,{className:"mr-2 sm:mr-3 h-5 w-5 sm:h-6 sm:w-6 md:h-8 md:w-8 text-yellow-500"}),c?"Restaurants You Might Like":"Top Restaurants"]}),c&&r.jsxs(le,{variant:"secondary",className:"bg-green-100 text-green-800",children:[r.jsx($8,{className:"h-3 w-3 mr-1"}),"Curated"]})]}),r.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400",children:c?"Personalized restaurant recommendations based on your taste":"Highly rated restaurants in your area"})]}),r.jsx(Ae,{href:"/restaurants",className:"flex-shrink-0 mt-1",children:r.jsx(F,{variant:"outline",className:"border-orange-500 text-orange-500 hover:bg-orange-50 w-8 h-8 p-0",children:r.jsx(Jc,{className:"h-4 w-4"})})})]}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 sm:gap-4",children:h.map(x=>r.jsx(mme,{restaurant:x},x.id))})]}),m.length>0&&r.jsxs("section",{children:[r.jsxs("div",{className:"flex justify-between items-start mb-8 pr-2.5",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("h2",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-gray-900 dark:text-white flex items-center",children:[r.jsx(gt,{className:"mr-2 sm:mr-3 h-5 w-5 sm:h-6 sm:w-6 md:h-8 md:w-8 text-green-500"}),"Quick Bites"]}),r.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400 mt-2",children:"Ready in 20 minutes or less"})]}),r.jsx(Ae,{href:"/quick-bites",className:"flex-shrink-0 mt-1",children:r.jsx(F,{variant:"outline",className:"border-green-500 text-green-500 hover:bg-green-50 w-8 h-8 p-0",children:r.jsx(Jc,{className:"h-4 w-4"})})})]}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-2 sm:gap-3",children:m.map(x=>r.jsx(c2,{food:x},x.id))})]}),r.jsxs("section",{className:"bg-gradient-to-r from-red-500 to-orange-500 rounded-2xl p-6 sm:p-8 lg:p-12 text-white text-center",children:[r.jsx("h2",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl font-bold mb-3 sm:mb-4",children:"Hungry? We've Got You Covered!"}),r.jsx("p",{className:"text-sm sm:text-base md:text-lg lg:text-xl mb-6 sm:mb-8 text-red-100",children:"Join thousands of satisfied customers who trust us for their food delivery needs"}),!e&&r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center",children:[r.jsx(Ae,{href:"/register",children:r.jsx(F,{size:"sm",className:"bg-white text-red-600 hover:bg-red-50 font-semibold px-6 sm:px-8 text-sm sm:text-base",children:"Sign Up Now"})}),r.jsx(Ae,{href:"/login",children:r.jsx(F,{size:"sm",variant:"outline",className:"border-white text-white hover:bg-white hover:text-red-600 font-semibold px-6 sm:px-8 text-sm sm:text-base",children:"Login"})})]})]})]})]})}var fme="Label",lU=j.forwardRef((e,t)=>r.jsx(Qe.label,{...e,ref:t,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=e.onMouseDown)==null||i.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));lU.displayName=fme;var cU=lU;const pme=Am("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),be=j.forwardRef(({className:e,...t},n)=>r.jsx(cU,{ref:n,className:Ve(pme(),e),...t}));be.displayName=cU.displayName;var PT="Dialog",[dU,uU]=xn(PT),[xme,pa]=dU(PT),hU=e=>{const{__scopeDialog:t,children:n,open:s,defaultOpen:i,onOpenChange:a,modal:o=!0}=e,l=j.useRef(null),c=j.useRef(null),[d=!1,h]=Li({prop:s,defaultProp:i,onChange:a});return r.jsx(xme,{scope:t,triggerRef:l,contentRef:c,contentId:ca(),titleId:ca(),descriptionId:ca(),open:d,onOpenChange:h,onOpenToggle:j.useCallback(()=>h(m=>!m),[h]),modal:o,children:n})};hU.displayName=PT;var mU="DialogTrigger",fU=j.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,i=pa(mU,n),a=St(t,i.triggerRef);return r.jsx(Qe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":TT(i.open),...s,ref:a,onClick:Fe(e.onClick,i.onOpenToggle)})});fU.displayName=mU;var CT="DialogPortal",[gme,pU]=dU(CT,{forceMount:void 0}),xU=e=>{const{__scopeDialog:t,forceMount:n,children:s,container:i}=e,a=pa(CT,t);return r.jsx(gme,{scope:t,forceMount:n,children:j.Children.map(s,o=>r.jsx(On,{present:n||a.open,children:r.jsx(fg,{asChild:!0,container:i,children:o})}))})};xU.displayName=CT;var O0="DialogOverlay",gU=j.forwardRef((e,t)=>{const n=pU(O0,e.__scopeDialog),{forceMount:s=n.forceMount,...i}=e,a=pa(O0,e.__scopeDialog);return a.modal?r.jsx(On,{present:s||a.open,children:r.jsx(yme,{...i,ref:t})}):null});gU.displayName=O0;var vme=Od("DialogOverlay.RemoveScroll"),yme=j.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,i=pa(O0,n);return r.jsx(Db,{as:vme,allowPinchZoom:!0,shards:[i.contentRef],children:r.jsx(Qe.div,{"data-state":TT(i.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),Ud="DialogContent",vU=j.forwardRef((e,t)=>{const n=pU(Ud,e.__scopeDialog),{forceMount:s=n.forceMount,...i}=e,a=pa(Ud,e.__scopeDialog);return r.jsx(On,{present:s||a.open,children:a.modal?r.jsx(jme,{...i,ref:t}):r.jsx(bme,{...i,ref:t})})});vU.displayName=Ud;var jme=j.forwardRef((e,t)=>{const n=pa(Ud,e.__scopeDialog),s=j.useRef(null),i=St(t,n.contentRef,s);return j.useEffect(()=>{const a=s.current;if(a)return Qk(a)},[]),r.jsx(yU,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Fe(e.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Fe(e.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:Fe(e.onFocusOutside,a=>a.preventDefault())})}),bme=j.forwardRef((e,t)=>{const n=pa(Ud,e.__scopeDialog),s=j.useRef(!1),i=j.useRef(!1);return r.jsx(yU,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,a),a.defaultPrevented||(s.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),s.current=!1,i.current=!1},onInteractOutside:a=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(s.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),yU=j.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=e,l=pa(Ud,n),c=j.useRef(null),d=St(t,c);return Zk(),r.jsxs(r.Fragment,{children:[r.jsx(Eb,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:i,onUnmountAutoFocus:a,children:r.jsx(Tm,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":TT(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),r.jsxs(r.Fragment,{children:[r.jsx(Nme,{titleId:l.titleId}),r.jsx(_me,{contentRef:c,descriptionId:l.descriptionId})]})]})}),kT="DialogTitle",jU=j.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,i=pa(kT,n);return r.jsx(Qe.h2,{id:i.titleId,...s,ref:t})});jU.displayName=kT;var bU="DialogDescription",wU=j.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,i=pa(bU,n);return r.jsx(Qe.p,{id:i.descriptionId,...s,ref:t})});wU.displayName=bU;var NU="DialogClose",SU=j.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,i=pa(NU,n);return r.jsx(Qe.button,{type:"button",...s,ref:t,onClick:Fe(e.onClick,()=>i.onOpenChange(!1))})});SU.displayName=NU;function TT(e){return e?"open":"closed"}var _U="DialogTitleWarning",[wme,PU]=Xee(_U,{contentName:Ud,titleName:kT,docsSlug:"dialog"}),Nme=({titleId:e})=>{const t=PU(_U),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return j.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},Sme="DialogDescriptionWarning",_me=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${PU(Sme).contentName}}.`;return j.useEffect(()=>{var a;const i=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},AT=hU,ET=fU,OT=xU,Ng=gU,Sg=vU,_g=jU,Pg=wU,Wb=SU;const CU=AT,kU=ET,Pme=OT,TU=j.forwardRef(({className:e,...t},n)=>r.jsx(Ng,{className:Ve("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));TU.displayName=Ng.displayName;const Cme=Am("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),MT=j.forwardRef(({side:e="right",className:t,children:n,...s},i)=>r.jsxs(Pme,{children:[r.jsx(TU,{}),r.jsxs(Sg,{ref:i,className:Ve(Cme({side:e}),t),...s,children:[n,r.jsxs(Wb,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[r.jsx(Fr,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));MT.displayName=Sg.displayName;const DT=({className:e,...t})=>r.jsx("div",{className:Ve("flex flex-col space-y-2 text-center sm:text-left",e),...t});DT.displayName="SheetHeader";const IT=j.forwardRef(({className:e,...t},n)=>r.jsx(_g,{ref:n,className:Ve("text-lg font-semibold text-foreground",e),...t}));IT.displayName=_g.displayName;const AU=j.forwardRef(({className:e,...t},n)=>r.jsx(Pg,{ref:n,className:Ve("text-sm text-muted-foreground",e),...t}));AU.displayName=Pg.displayName;function Cg(e){const t=j.useRef({value:e,previous:e});return j.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var kme=[" ","Enter","ArrowUp","ArrowDown"],Tme=[" ","Enter"],kg="Select",[Hb,qb,Ame]=mg(kg),[Rm,$Ue]=xn(kg,[Ame,Dm]),Kb=Dm(),[Eme,Sc]=Rm(kg),[Ome,Mme]=Rm(kg),EU=e=>{const{__scopeSelect:t,children:n,open:s,defaultOpen:i,onOpenChange:a,value:o,defaultValue:l,onValueChange:c,dir:d,name:h,autoComplete:m,disabled:f,required:g,form:x}=e,p=Kb(t),[y,b]=j.useState(null),[w,N]=j.useState(null),[S,P]=j.useState(!1),C=ru(d),[k=!1,O]=Li({prop:s,defaultProp:i,onChange:a}),[I,T]=Li({prop:o,defaultProp:l,onChange:c}),E=j.useRef(null),D=y?x||!!y.closest("form"):!0,[B,M]=j.useState(new Set),U=Array.from(B).map(H=>H.props.value).join(";");return r.jsx(xz,{...p,children:r.jsxs(Eme,{required:g,scope:t,trigger:y,onTriggerChange:b,valueNode:w,onValueNodeChange:N,valueNodeHasChildren:S,onValueNodeHasChildrenChange:P,contentId:ca(),value:I,onValueChange:T,open:k,onOpenChange:O,dir:C,triggerPointerDownPosRef:E,disabled:f,children:[r.jsx(Hb.Provider,{scope:t,children:r.jsx(Ome,{scope:e.__scopeSelect,onNativeOptionAdd:j.useCallback(H=>{M(K=>new Set(K).add(H))},[]),onNativeOptionRemove:j.useCallback(H=>{M(K=>{const W=new Set(K);return W.delete(H),W})},[]),children:n})}),D?r.jsxs(r9,{"aria-hidden":!0,required:g,tabIndex:-1,name:h,autoComplete:m,value:I,onChange:H=>T(H.target.value),disabled:f,form:x,children:[I===void 0?r.jsx("option",{value:""}):null,Array.from(B)]},U):null]})})};EU.displayName=kg;var OU="SelectTrigger",MU=j.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:s=!1,...i}=e,a=Kb(n),o=Sc(OU,n),l=o.disabled||s,c=St(t,o.onTriggerChange),d=qb(n),h=j.useRef("touch"),[m,f,g]=n9(p=>{const y=d().filter(N=>!N.disabled),b=y.find(N=>N.value===o.value),w=s9(y,p,b);w!==void 0&&o.onValueChange(w.value)}),x=p=>{l||(o.onOpenChange(!0),g()),p&&(o.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return r.jsx($k,{asChild:!0,...a,children:r.jsx(Qe.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":t9(o.value)?"":void 0,...i,ref:c,onClick:Fe(i.onClick,p=>{p.currentTarget.focus(),h.current!=="mouse"&&x(p)}),onPointerDown:Fe(i.onPointerDown,p=>{h.current=p.pointerType;const y=p.target;y.hasPointerCapture(p.pointerId)&&y.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(x(p),p.preventDefault())}),onKeyDown:Fe(i.onKeyDown,p=>{const y=m.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&f(p.key),!(y&&p.key===" ")&&kme.includes(p.key)&&(x(),p.preventDefault())})})})});MU.displayName=OU;var DU="SelectValue",IU=j.forwardRef((e,t)=>{const{__scopeSelect:n,className:s,style:i,children:a,placeholder:o="",...l}=e,c=Sc(DU,n),{onValueNodeHasChildrenChange:d}=c,h=a!==void 0,m=St(t,c.onValueNodeChange);return ln(()=>{d(h)},[d,h]),r.jsx(Qe.span,{...l,ref:m,style:{pointerEvents:"none"},children:t9(c.value)?r.jsx(r.Fragment,{children:o}):a})});IU.displayName=DU;var Dme="SelectIcon",LU=j.forwardRef((e,t)=>{const{__scopeSelect:n,children:s,...i}=e;return r.jsx(Qe.span,{"aria-hidden":!0,...i,ref:t,children:s||""})});LU.displayName=Dme;var Ime="SelectPortal",RU=e=>r.jsx(fg,{asChild:!0,...e});RU.displayName=Ime;var Wd="SelectContent",$U=j.forwardRef((e,t)=>{const n=Sc(Wd,e.__scopeSelect),[s,i]=j.useState();if(ln(()=>{i(new DocumentFragment)},[]),!n.open){const a=s;return a?wc.createPortal(r.jsx(FU,{scope:e.__scopeSelect,children:r.jsx(Hb.Slot,{scope:e.__scopeSelect,children:r.jsx("div",{children:e.children})})}),a):null}return r.jsx(zU,{...e,ref:t})});$U.displayName=Wd;var Hi=10,[FU,_c]=Rm(Wd),Lme="SelectContentImpl",Rme=Od("SelectContent.RemoveScroll"),zU=j.forwardRef((e,t)=>{const{__scopeSelect:n,position:s="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:m,collisionBoundary:f,collisionPadding:g,sticky:x,hideWhenDetached:p,avoidCollisions:y,...b}=e,w=Sc(Wd,n),[N,S]=j.useState(null),[P,C]=j.useState(null),k=St(t,Ee=>S(Ee)),[O,I]=j.useState(null),[T,E]=j.useState(null),D=qb(n),[B,M]=j.useState(!1),U=j.useRef(!1);j.useEffect(()=>{if(N)return Qk(N)},[N]),Zk();const H=j.useCallback(Ee=>{const[We,...Se]=D().map($=>$.ref.current),[Me]=Se.slice(-1),Ie=document.activeElement;for(const $ of Ee)if($===Ie||($==null||$.scrollIntoView({block:"nearest"}),$===We&&P&&(P.scrollTop=0),$===Me&&P&&(P.scrollTop=P.scrollHeight),$==null||$.focus(),document.activeElement!==Ie))return},[D,P]),K=j.useCallback(()=>H([O,N]),[H,O,N]);j.useEffect(()=>{B&&K()},[B,K]);const{onOpenChange:W,triggerPointerDownPosRef:V}=w;j.useEffect(()=>{if(N){let Ee={x:0,y:0};const We=Me=>{var Ie,$;Ee={x:Math.abs(Math.round(Me.pageX)-(((Ie=V.current)==null?void 0:Ie.x)??0)),y:Math.abs(Math.round(Me.pageY)-((($=V.current)==null?void 0:$.y)??0))}},Se=Me=>{Ee.x<=10&&Ee.y<=10?Me.preventDefault():N.contains(Me.target)||W(!1),document.removeEventListener("pointermove",We),V.current=null};return V.current!==null&&(document.addEventListener("pointermove",We),document.addEventListener("pointerup",Se,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",We),document.removeEventListener("pointerup",Se,{capture:!0})}}},[N,W,V]),j.useEffect(()=>{const Ee=()=>W(!1);return window.addEventListener("blur",Ee),window.addEventListener("resize",Ee),()=>{window.removeEventListener("blur",Ee),window.removeEventListener("resize",Ee)}},[W]);const[z,q]=n9(Ee=>{const We=D().filter(Ie=>!Ie.disabled),Se=We.find(Ie=>Ie.ref.current===document.activeElement),Me=s9(We,Ee,Se);Me&&setTimeout(()=>Me.ref.current.focus())}),J=j.useCallback((Ee,We,Se)=>{const Me=!U.current&&!Se;(w.value!==void 0&&w.value===We||Me)&&(I(Ee),Me&&(U.current=!0))},[w.value]),pe=j.useCallback(()=>N==null?void 0:N.focus(),[N]),ye=j.useCallback((Ee,We,Se)=>{const Me=!U.current&&!Se;(w.value!==void 0&&w.value===We||Me)&&E(Ee)},[w.value]),Ne=s==="popper"?d2:BU,ke=Ne===d2?{side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:m,collisionBoundary:f,collisionPadding:g,sticky:x,hideWhenDetached:p,avoidCollisions:y}:{};return r.jsx(FU,{scope:n,content:N,viewport:P,onViewportChange:C,itemRefCallback:J,selectedItem:O,onItemLeave:pe,itemTextRefCallback:ye,focusSelectedItem:K,selectedItemText:T,position:s,isPositioned:B,searchRef:z,children:r.jsx(Db,{as:Rme,allowPinchZoom:!0,children:r.jsx(Eb,{asChild:!0,trapped:w.open,onMountAutoFocus:Ee=>{Ee.preventDefault()},onUnmountAutoFocus:Fe(i,Ee=>{var We;(We=w.trigger)==null||We.focus({preventScroll:!0}),Ee.preventDefault()}),children:r.jsx(Tm,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:Ee=>Ee.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:r.jsx(Ne,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:Ee=>Ee.preventDefault(),...b,...ke,onPlaced:()=>M(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:Fe(b.onKeyDown,Ee=>{const We=Ee.ctrlKey||Ee.altKey||Ee.metaKey;if(Ee.key==="Tab"&&Ee.preventDefault(),!We&&Ee.key.length===1&&q(Ee.key),["ArrowUp","ArrowDown","Home","End"].includes(Ee.key)){let Me=D().filter(Ie=>!Ie.disabled).map(Ie=>Ie.ref.current);if(["ArrowUp","End"].includes(Ee.key)&&(Me=Me.slice().reverse()),["ArrowUp","ArrowDown"].includes(Ee.key)){const Ie=Ee.target,$=Me.indexOf(Ie);Me=Me.slice($+1)}setTimeout(()=>H(Me)),Ee.preventDefault()}})})})})})})});zU.displayName=Lme;var $me="SelectItemAlignedPosition",BU=j.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:s,...i}=e,a=Sc(Wd,n),o=_c(Wd,n),[l,c]=j.useState(null),[d,h]=j.useState(null),m=St(t,k=>h(k)),f=qb(n),g=j.useRef(!1),x=j.useRef(!0),{viewport:p,selectedItem:y,selectedItemText:b,focusSelectedItem:w}=o,N=j.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&d&&p&&y&&b){const k=a.trigger.getBoundingClientRect(),O=d.getBoundingClientRect(),I=a.valueNode.getBoundingClientRect(),T=b.getBoundingClientRect();if(a.dir!=="rtl"){const Ie=T.left-O.left,$=I.left-Ie,ee=k.left-$,X=k.width+ee,Ce=Math.max(X,O.width),$e=window.innerWidth-Hi,He=Xp($,[Hi,Math.max(Hi,$e-Ce)]);l.style.minWidth=X+"px",l.style.left=He+"px"}else{const Ie=O.right-T.right,$=window.innerWidth-I.right-Ie,ee=window.innerWidth-k.right-$,X=k.width+ee,Ce=Math.max(X,O.width),$e=window.innerWidth-Hi,He=Xp($,[Hi,Math.max(Hi,$e-Ce)]);l.style.minWidth=X+"px",l.style.right=He+"px"}const E=f(),D=window.innerHeight-Hi*2,B=p.scrollHeight,M=window.getComputedStyle(d),U=parseInt(M.borderTopWidth,10),H=parseInt(M.paddingTop,10),K=parseInt(M.borderBottomWidth,10),W=parseInt(M.paddingBottom,10),V=U+H+B+W+K,z=Math.min(y.offsetHeight*5,V),q=window.getComputedStyle(p),J=parseInt(q.paddingTop,10),pe=parseInt(q.paddingBottom,10),ye=k.top+k.height/2-Hi,Ne=D-ye,ke=y.offsetHeight/2,Ee=y.offsetTop+ke,We=U+H+Ee,Se=V-We;if(We<=ye){const Ie=E.length>0&&y===E[E.length-1].ref.current;l.style.bottom="0px";const $=d.clientHeight-p.offsetTop-p.offsetHeight,ee=Math.max(Ne,ke+(Ie?pe:0)+$+K),X=We+ee;l.style.height=X+"px"}else{const Ie=E.length>0&&y===E[0].ref.current;l.style.top="0px";const ee=Math.max(ye,U+p.offsetTop+(Ie?J:0)+ke)+Se;l.style.height=ee+"px",p.scrollTop=We-ye+p.offsetTop}l.style.margin=`${Hi}px 0`,l.style.minHeight=z+"px",l.style.maxHeight=D+"px",s==null||s(),requestAnimationFrame(()=>g.current=!0)}},[f,a.trigger,a.valueNode,l,d,p,y,b,a.dir,s]);ln(()=>N(),[N]);const[S,P]=j.useState();ln(()=>{d&&P(window.getComputedStyle(d).zIndex)},[d]);const C=j.useCallback(k=>{k&&x.current===!0&&(N(),w==null||w(),x.current=!1)},[N,w]);return r.jsx(zme,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:C,children:r.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:r.jsx(Qe.div,{...i,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});BU.displayName=$me;var Fme="SelectPopperPosition",d2=j.forwardRef((e,t)=>{const{__scopeSelect:n,align:s="start",collisionPadding:i=Hi,...a}=e,o=Kb(n);return r.jsx(Fk,{...o,...a,ref:t,align:s,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});d2.displayName=Fme;var[zme,LT]=Rm(Wd,{}),u2="SelectViewport",VU=j.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:s,...i}=e,a=_c(u2,n),o=LT(u2,n),l=St(t,a.onViewportChange),c=j.useRef(0);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),r.jsx(Hb.Slot,{scope:n,children:r.jsx(Qe.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Fe(i.onScroll,d=>{const h=d.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&m){const g=Math.abs(c.current-h.scrollTop);if(g>0){const x=window.innerHeight-Hi*2,p=parseFloat(m.style.minHeight),y=parseFloat(m.style.height),b=Math.max(p,y);if(b<x){const w=b+g,N=Math.min(x,w),S=w-N;m.style.height=N+"px",m.style.bottom==="0px"&&(h.scrollTop=S>0?S:0,m.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});VU.displayName=u2;var UU="SelectGroup",[Bme,Vme]=Rm(UU),Ume=j.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,i=ca();return r.jsx(Bme,{scope:n,id:i,children:r.jsx(Qe.div,{role:"group","aria-labelledby":i,...s,ref:t})})});Ume.displayName=UU;var WU="SelectLabel",HU=j.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,i=Vme(WU,n);return r.jsx(Qe.div,{id:i.id,...s,ref:t})});HU.displayName=WU;var M0="SelectItem",[Wme,qU]=Rm(M0),KU=j.forwardRef((e,t)=>{const{__scopeSelect:n,value:s,disabled:i=!1,textValue:a,...o}=e,l=Sc(M0,n),c=_c(M0,n),d=l.value===s,[h,m]=j.useState(a??""),[f,g]=j.useState(!1),x=St(t,w=>{var N;return(N=c.itemRefCallback)==null?void 0:N.call(c,w,s,i)}),p=ca(),y=j.useRef("touch"),b=()=>{i||(l.onValueChange(s),l.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return r.jsx(Wme,{scope:n,value:s,disabled:i,textId:p,isSelected:d,onItemTextChange:j.useCallback(w=>{m(N=>N||((w==null?void 0:w.textContent)??"").trim())},[]),children:r.jsx(Hb.ItemSlot,{scope:n,value:s,disabled:i,textValue:h,children:r.jsx(Qe.div,{role:"option","aria-labelledby":p,"data-highlighted":f?"":void 0,"aria-selected":d&&f,"data-state":d?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:x,onFocus:Fe(o.onFocus,()=>g(!0)),onBlur:Fe(o.onBlur,()=>g(!1)),onClick:Fe(o.onClick,()=>{y.current!=="mouse"&&b()}),onPointerUp:Fe(o.onPointerUp,()=>{y.current==="mouse"&&b()}),onPointerDown:Fe(o.onPointerDown,w=>{y.current=w.pointerType}),onPointerMove:Fe(o.onPointerMove,w=>{var N;y.current=w.pointerType,i?(N=c.onItemLeave)==null||N.call(c):y.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Fe(o.onPointerLeave,w=>{var N;w.currentTarget===document.activeElement&&((N=c.onItemLeave)==null||N.call(c))}),onKeyDown:Fe(o.onKeyDown,w=>{var S;((S=c.searchRef)==null?void 0:S.current)!==""&&w.key===" "||(Tme.includes(w.key)&&b(),w.key===" "&&w.preventDefault())})})})})});KU.displayName=M0;var Zf="SelectItemText",GU=j.forwardRef((e,t)=>{const{__scopeSelect:n,className:s,style:i,...a}=e,o=Sc(Zf,n),l=_c(Zf,n),c=qU(Zf,n),d=Mme(Zf,n),[h,m]=j.useState(null),f=St(t,b=>m(b),c.onItemTextChange,b=>{var w;return(w=l.itemTextRefCallback)==null?void 0:w.call(l,b,c.value,c.disabled)}),g=h==null?void 0:h.textContent,x=j.useMemo(()=>r.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:p,onNativeOptionRemove:y}=d;return ln(()=>(p(x),()=>y(x)),[p,y,x]),r.jsxs(r.Fragment,{children:[r.jsx(Qe.span,{id:c.textId,...a,ref:f}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?wc.createPortal(a.children,o.valueNode):null]})});GU.displayName=Zf;var ZU="SelectItemIndicator",YU=j.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e;return qU(ZU,n).isSelected?r.jsx(Qe.span,{"aria-hidden":!0,...s,ref:t}):null});YU.displayName=ZU;var h2="SelectScrollUpButton",XU=j.forwardRef((e,t)=>{const n=_c(h2,e.__scopeSelect),s=LT(h2,e.__scopeSelect),[i,a]=j.useState(!1),o=St(t,s.onScrollButtonChange);return ln(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollTop>0;a(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?r.jsx(JU,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});XU.displayName=h2;var m2="SelectScrollDownButton",QU=j.forwardRef((e,t)=>{const n=_c(m2,e.__scopeSelect),s=LT(m2,e.__scopeSelect),[i,a]=j.useState(!1),o=St(t,s.onScrollButtonChange);return ln(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<d;a(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?r.jsx(JU,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});QU.displayName=m2;var JU=j.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:s,...i}=e,a=_c("SelectScrollButton",n),o=j.useRef(null),l=qb(n),c=j.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return j.useEffect(()=>()=>c(),[c]),ln(()=>{var h;const d=l().find(m=>m.ref.current===document.activeElement);(h=d==null?void 0:d.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),r.jsx(Qe.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:Fe(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(s,50))}),onPointerMove:Fe(i.onPointerMove,()=>{var d;(d=a.onItemLeave)==null||d.call(a),o.current===null&&(o.current=window.setInterval(s,50))}),onPointerLeave:Fe(i.onPointerLeave,()=>{c()})})}),Hme="SelectSeparator",e9=j.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e;return r.jsx(Qe.div,{"aria-hidden":!0,...s,ref:t})});e9.displayName=Hme;var f2="SelectArrow",qme=j.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,i=Kb(n),a=Sc(f2,n),o=_c(f2,n);return a.open&&o.position==="popper"?r.jsx(zk,{...i,...s,ref:t}):null});qme.displayName=f2;function t9(e){return e===""||e===void 0}var r9=j.forwardRef((e,t)=>{const{value:n,...s}=e,i=j.useRef(null),a=St(t,i),o=Cg(n);return j.useEffect(()=>{const l=i.current,c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==n&&h){const m=new Event("change",{bubbles:!0});h.call(l,n),l.dispatchEvent(m)}},[o,n]),r.jsx(pg,{asChild:!0,children:r.jsx("select",{...s,ref:a,defaultValue:n})})});r9.displayName="BubbleSelect";function n9(e){const t=Rr(e),n=j.useRef(""),s=j.useRef(0),i=j.useCallback(o=>{const l=n.current+o;t(l),function c(d){n.current=d,window.clearTimeout(s.current),d!==""&&(s.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),a=j.useCallback(()=>{n.current="",window.clearTimeout(s.current)},[]);return j.useEffect(()=>()=>window.clearTimeout(s.current),[]),[n,i,a]}function s9(e,t,n){const i=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let o=Kme(e,Math.max(a,0));i.length===1&&(o=o.filter(d=>d!==n));const c=o.find(d=>d.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function Kme(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var Gme=EU,i9=MU,Zme=IU,Yme=LU,Xme=RU,a9=$U,Qme=VU,o9=HU,l9=KU,Jme=GU,efe=YU,c9=XU,d9=QU,u9=e9;const ct=Gme,dt=Zme,it=j.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(i9,{ref:s,className:Ve("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,r.jsx(Yme,{asChild:!0,children:r.jsx(wb,{className:"h-4 w-4 opacity-50"})})]}));it.displayName=i9.displayName;const h9=j.forwardRef(({className:e,...t},n)=>r.jsx(c9,{ref:n,className:Ve("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(Pk,{className:"h-4 w-4"})}));h9.displayName=c9.displayName;const m9=j.forwardRef(({className:e,...t},n)=>r.jsx(d9,{ref:n,className:Ve("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(wb,{className:"h-4 w-4"})}));m9.displayName=d9.displayName;const at=j.forwardRef(({className:e,children:t,position:n="popper",...s},i)=>r.jsx(Xme,{children:r.jsxs(a9,{ref:i,className:Ve("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...s,children:[r.jsx(h9,{}),r.jsx(Qme,{className:Ve("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),r.jsx(m9,{})]})}));at.displayName=a9.displayName;const tfe=j.forwardRef(({className:e,...t},n)=>r.jsx(o9,{ref:n,className:Ve("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));tfe.displayName=o9.displayName;const ne=j.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(l9,{ref:s,className:Ve("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(efe,{children:r.jsx(Md,{className:"h-4 w-4"})})}),r.jsx(Jme,{children:t})]}));ne.displayName=l9.displayName;const rfe=j.forwardRef(({className:e,...t},n)=>r.jsx(u9,{ref:n,className:Ve("-mx-1 my-1 h-px bg-muted",e),...t}));rfe.displayName=u9.displayName;function nfe({searchQuery:e="",category:t="",className:n="",isRestaurantMode:s=!1}){const{mode:i}=Ja(),[a,o]=j.useState(null),[l,c]=j.useState("distance"),[d,h]=j.useState(50),[m,f]=j.useState(!1),[g,x]=j.useState("all"),[p,y]=j.useState("all"),[b,w]=j.useState("all"),[N,S]=j.useState("all"),[P,C]=j.useState("all"),k=i==="food"||s,O=e&&e.trim().length>0,I=async()=>{f(!0);try{const z=await Go();o(z)}catch(z){console.error("Failed to get user location:",z)}finally{f(!1)}};j.useEffect(()=>{I()},[]);const{data:T=[],isLoading:E,error:D}=Re({queryKey:k&&a?["/api/food/items",a.latitude,a.longitude,{search:e,spiceLevel:g,isVegetarian:p==="vegetarian",radius:10}]:["/api/products",{search:e,category:t}],queryFn:async()=>{try{if(k&&a){const pe=new URLSearchParams({lat:a.latitude.toString(),lon:a.longitude.toString(),radius:"10"});e&&pe.append("search",e),g!=="all"&&pe.append("spiceLevel",g),p==="vegetarian"&&pe.append("isVegetarian","true");const ye=await fetch(`/api/food/items?${pe}`);if(!ye.ok)throw new Error("Failed to fetch food items");const Ne=await ye.json();return console.log(`[FOOD] Found ${Ne.count} food items within ${Ne.searchRadius}km`),Ne.items}const z=new URLSearchParams;if(e!=null&&e.trim()&&z.append("search",e.trim()),t!=null&&t.trim()){const pe=(isNaN(Number(t)),t.trim());z.append("category",pe),console.log(`[CATEGORY FILTER] Searching for category: ${pe}`)}const q=await fetch(`/api/products?${z}`);if(!q.ok){const pe=await q.text();throw new Error(`Failed to fetch products: ${q.status} ${pe}`)}const J=await q.json();return console.log(`[PRODUCTS] Found ${J.length} products for category: ${t}`),J}catch(z){throw console.error("Error fetching products:",z),z}},retry:1,retryDelay:1e3}),{data:B=[],error:M}=Re({queryKey:["/api/stores"],queryFn:async()=>{try{const z=await fetch("/api/stores");if(!z.ok){const q=await z.text();throw new Error(`Failed to fetch stores: ${z.status} ${q}`)}return z.json()}catch(z){throw console.error("Error fetching stores:",z),z}},retry:1,retryDelay:1e3});j.useEffect(()=>{console.log("DistanceBasedProductSearch received props:",{searchQuery:e,category:t,searchQueryLength:e.length,searchQueryTrimmed:e.trim(),isEmpty:!e||e.trim()==="",isFoodMode:k,mode:i})},[e,t,k,i]),j.useEffect(()=>{console.log("Products and stores data:",{totalProducts:T.length,totalStores:B.length,productsWithStores:T.map(z=>({id:z.id,name:z.name,storeId:z.storeId,store:B.find(q=>q.id===z.storeId)}))})},[T,B]);const U=T.map(z=>{const q=B.find(pe=>pe.id===z.storeId);let J;if(a&&(q!=null&&q.latitude)&&(q!=null&&q.longitude)){const pe=parseFloat(q.latitude),ye=parseFloat(q.longitude);if(!isNaN(pe)&&!isNaN(ye)){const ke=(pe-a.latitude)*Math.PI/180,Ee=(ye-a.longitude)*Math.PI/180,We=Math.sin(ke/2)*Math.sin(ke/2)+Math.cos(a.latitude*Math.PI/180)*Math.cos(pe*Math.PI/180)*Math.sin(Ee/2)*Math.sin(Ee/2);J=6371*(2*Math.atan2(Math.sqrt(We),Math.sqrt(1-We)))}}return{...z,storeDistance:J,storeName:(q==null?void 0:q.name)||"Unknown Store",deliveryTime:(q==null?void 0:q.deliveryTime)||"30-45 min"}}),H=U.filter(z=>{var J,pe;if(O||t&&t.trim())return console.log(`Category/Search mode: Including all products for category "${t}" or search "${e}"`),!0;const q=B.find(ye=>ye.id===z.storeId);if(console.log(`Mode filtering for product "${z.name}":`,{isFoodMode:k,storeType:q==null?void 0:q.storeType,storeName:q==null?void 0:q.name,productId:z.id,storeId:z.storeId}),k){const ye=(q==null?void 0:q.storeType)==="restaurant",Ne=((J=z.category)==null?void 0:J.toLowerCase().includes("food"))||((pe=z.name)==null?void 0:pe.toLowerCase().includes("food"))||z.preparationTime,ke=ye||!(q!=null&&q.storeType)&&Ne;return console.log(`Food mode: Product "${z.name}" ${ke?"INCLUDED":"EXCLUDED"} (store type: ${q==null?void 0:q.storeType}, isFoodItem: ${Ne})`),ke}else return console.log(`Shopping mode: Product "${z.name}" INCLUDED`),!0}),K=H.filter(z=>{var q,J,pe,ye;if(e&&e.trim()){const Ne=e.toLowerCase().trim(),ke=z.name.toLowerCase().includes(Ne),Ee=(q=z.description)==null?void 0:q.toLowerCase().includes(Ne),We=(J=z.category)==null?void 0:J.toLowerCase().includes(Ne),Se=(pe=z.storeName)==null?void 0:pe.toLowerCase().includes(Ne);if(console.log(`Filtering product "${z.name}" with search "${e}":`,{nameMatch:ke,descriptionMatch:Ee,categoryMatch:We,storeNameMatch:Se,name:z.name,description:z.description,category:z.category,storeName:z.storeName}),!(ke||Ee||We||Se))return console.log(` Product "${z.name}" filtered out - no match`),!1;console.log(` Product "${z.name}" included - matches search`)}if(t&&t.trim()){const Ne=t.trim(),ke=parseInt(Ne);if(isNaN(ke)){const Ee=Ne.toLowerCase();if(!((ye=z.category)!=null&&ye.toLowerCase().includes(Ee)))return console.log(` Product "${z.name}" filtered out - category "${z.category}" doesn't include "${Ee}"`),!1;console.log(` Product "${z.name}" matches category name "${Ee}"`)}else{if(z.categoryId!==ke)return console.log(` Product "${z.name}" filtered out - categoryId ${z.categoryId} !== ${ke}`),!1;console.log(` Product "${z.name}" matches categoryId ${ke}`)}}if(k&&!O){if(g!=="all"&&z.spiceLevel!==g||p==="vegetarian"&&!z.isVegetarian||p==="vegan"&&!z.isVegan)return!1;if(b!=="all"){const Ne=parseFloat(z.price.replace(/[^\d.]/g,""));switch(b){case"under-100":if(Ne>=100)return!1;break;case"100-300":if(Ne<100||Ne>300)return!1;break;case"300-500":if(Ne<300||Ne>500)return!1;break;case"over-500":if(Ne<=500)return!1;break}}if(N!=="all"){const Ne=parseInt(z.preparationTime||"0");switch(N){case"quick":if(Ne>20)return!1;break;case"medium":if(Ne<=20||Ne>45)return!1;break;case"slow":if(Ne<=45)return!1;break}}if(P!=="all"&&z.storeId.toString()!==P)return!1}return a&&z.storeDistance!==void 0&&!O&&!e?(console.log(`Distance filter: ${z.name} at ${z.storeDistance}km vs max ${d}km`),z.storeDistance<=d):(console.log(` Product "${z.name}" passed all filters`),!0)}).sort((z,q)=>{switch(l){case"distance":if(!a)return 0;const J=z.storeDistance??1/0,pe=q.storeDistance??1/0;return J-pe;case"price-low":return Number(z.price)-Number(q.price);case"price-high":return Number(q.price)-Number(z.price);case"rating":return Number(q.rating)-Number(z.rating);default:return 0}});j.useEffect(()=>{e&&console.log(`Search "${e}": ${U.length} total  ${H.length} mode filtered  ${K.length} final results`)},[U,H,K,e]);const W=H.reduce((z,q)=>(q.storeName!=="Unknown Store"&&!z.find(J=>J.id===q.storeId)&&z.push({id:q.storeId,name:q.storeName||"Unknown Store"}),z),[]),V=()=>r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[k?r.jsx(Ti,{className:"h-4 w-4 text-orange-600"}):r.jsx(Wo,{className:"h-4 w-4 text-blue-600"}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:k?"Food Mode: Restaurant Items Only":"Shopping Mode: Retail Items Only"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(be,{children:"Location"}),a?r.jsx("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Le,{className:"h-4 w-4 text-green-600"}),r.jsx("span",{className:"text-sm text-green-700 font-medium",children:"Location Found"})]})}):r.jsxs(F,{onClick:I,disabled:m,variant:"outline",className:"w-full",children:[r.jsx(Le,{className:"h-4 w-4 mr-2"}),m?"Getting Location...":"Get My Location"]})]}),a&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(be,{children:"Maximum Distance (km)"}),r.jsxs(ct,{value:d.toString(),onValueChange:z=>h(Number(z)),children:[r.jsx(it,{children:r.jsx(dt,{})}),r.jsxs(at,{children:[r.jsx(ne,{value:"1",children:"Within 1 km"}),r.jsx(ne,{value:"3",children:"Within 3 km"}),r.jsx(ne,{value:"5",children:"Within 5 km"}),r.jsx(ne,{value:"10",children:"Within 10 km"}),r.jsx(ne,{value:"20",children:"Within 20 km"}),r.jsx(ne,{value:"50",children:"Within 50 km"})]})]})]}),k&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(be,{children:"Restaurant"}),r.jsxs(ct,{value:P,onValueChange:C,children:[r.jsx(it,{children:r.jsx(dt,{placeholder:"All Restaurants"})}),r.jsxs(at,{children:[r.jsx(ne,{value:"all",children:"All Restaurants"}),W.map(z=>r.jsx(ne,{value:z.id.toString(),children:z.name},z.id))]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(be,{children:"Spice Level"}),r.jsxs(ct,{value:g,onValueChange:x,children:[r.jsx(it,{children:r.jsx(dt,{placeholder:"All Spice Levels"})}),r.jsxs(at,{children:[r.jsx(ne,{value:"all",children:"All Spice Levels"}),r.jsx(ne,{value:"mild",children:"Mild"}),r.jsx(ne,{value:"medium",children:"Medium"}),r.jsx(ne,{value:"hot",children:"Hot"}),r.jsx(ne,{value:"extra_hot",children:"Extra Hot"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(be,{children:"Dietary Options"}),r.jsxs(ct,{value:p,onValueChange:y,children:[r.jsx(it,{children:r.jsx(dt,{placeholder:"All Dietary Options"})}),r.jsxs(at,{children:[r.jsx(ne,{value:"all",children:"All Options"}),r.jsx(ne,{value:"vegetarian",children:"Vegetarian"}),r.jsx(ne,{value:"vegan",children:"Vegan"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(be,{children:"Price Range"}),r.jsxs(ct,{value:b,onValueChange:w,children:[r.jsx(it,{children:r.jsx(dt,{placeholder:"All Prices"})}),r.jsxs(at,{children:[r.jsx(ne,{value:"all",children:"All Prices"}),r.jsx(ne,{value:"under-100",children:"Under 100"}),r.jsx(ne,{value:"100-300",children:"100 - 300"}),r.jsx(ne,{value:"300-500",children:"300 - 500"}),r.jsx(ne,{value:"over-500",children:"Over 500"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(be,{children:"Preparation Time"}),r.jsxs(ct,{value:N,onValueChange:S,children:[r.jsx(it,{children:r.jsx(dt,{placeholder:"All Times"})}),r.jsxs(at,{children:[r.jsx(ne,{value:"all",children:"All Times"}),r.jsx(ne,{value:"quick",children:"Quick (20 min)"}),r.jsx(ne,{value:"medium",children:"Medium (21-45 min)"}),r.jsx(ne,{value:"slow",children:"Slow (45+ min)"})]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(be,{children:"Sort By"}),r.jsxs(ct,{value:l,onValueChange:c,children:[r.jsx(it,{children:r.jsx(dt,{})}),r.jsxs(at,{children:[a&&r.jsx(ne,{value:"distance",children:"Nearest First"}),r.jsx(ne,{value:"price-low",children:"Price: Low to High"}),r.jsx(ne,{value:"price-high",children:"Price: High to Low"}),r.jsx(ne,{value:"rating",children:"Highest Rated"})]})]})]})]});return D||M?r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"text-center py-12",children:[r.jsxs("div",{className:"text-red-500 mb-4",children:[r.jsx(wr,{className:"h-12 w-12 mx-auto mb-2"}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:"Error Loading Data"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:(D==null?void 0:D.message)||(M==null?void 0:M.message)||"Failed to load products or stores"})]}),r.jsx(F,{onClick:()=>window.location.reload(),variant:"outline",className:"mt-4",children:"Try Again"})]})}):r.jsxs("div",{className:n,children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[k?r.jsx(Ti,{className:"h-5 w-5 text-orange-600"}):r.jsx(Wo,{className:"h-5 w-5 text-blue-600"}),e?`Search results for "${e}"`:k?"Food Items":"Products"]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[a?`Showing ${K.length} ${k?"food items":"products"} sorted by distance`:`Showing ${K.length} ${k?"food items":"products"}`,e&&`  Searching for: "${e}"`]}),k&&r.jsx("div",{className:"mt-1",children:r.jsx(le,{variant:"outline",className:"text-orange-600 border-orange-200",children:"Restaurant Items Only"})})]}),r.jsxs(CU,{children:[r.jsx(kU,{asChild:!0,children:r.jsxs(F,{variant:"outline",size:"sm",children:[r.jsx(ire,{className:"h-4 w-4 mr-2"}),"Filter & Sort"]})}),r.jsxs(MT,{children:[r.jsx(DT,{children:r.jsx(IT,{children:"Filter & Sort Products"})}),r.jsx("div",{className:"mt-6",children:r.jsx(V,{})})]})]})]}),r.jsxs("div",{className:"hidden lg:grid lg:grid-cols-4 gap-6",children:[r.jsx("div",{className:"lg:col-span-1",children:r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{className:"text-lg",children:"Filters"})}),r.jsx(Z,{children:r.jsx(V,{})})]})}),r.jsx("div",{className:"lg:col-span-3",children:E?r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:Array.from({length:6}).map((z,q)=>r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"bg-gray-200 h-48 rounded-lg mb-2"}),r.jsx("div",{className:"bg-gray-200 h-4 rounded mb-1"}),r.jsx("div",{className:"bg-gray-200 h-3 rounded w-3/4"})]},q))}):K.length>0?r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:K.map(z=>r.jsx(Wh,{product:z},z.id))}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("h3",{className:"text-lg font-medium mb-2",children:"No products found"}),r.jsx("p",{className:"text-muted-foreground",children:a?"Try increasing the distance range or adjusting your search.":"Try different search terms or enable location access for distance-based results."})]})})]}),r.jsx("div",{className:"lg:hidden",children:E?r.jsx("div",{className:"grid grid-cols-2 gap-4",children:Array.from({length:6}).map((z,q)=>r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"bg-gray-200 h-32 rounded-lg mb-2"}),r.jsx("div",{className:"bg-gray-200 h-4 rounded mb-1"}),r.jsx("div",{className:"bg-gray-200 h-3 rounded w-3/4"})]},q))}):K.length>0?r.jsx("div",{className:"grid grid-cols-2 gap-4",children:K.map(z=>r.jsx(Wh,{product:z},z.id))}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("h3",{className:"text-lg font-medium mb-2",children:"No products found"}),r.jsx("p",{className:"text-muted-foreground text-sm",children:a?"Try increasing the distance range or adjusting your search.":"Try different search terms or enable location access for distance-based results."})]})})]})}function sfe(){var m,f;const[e,t]=Jr(),{mode:n}=Ja(),[s,i]=j.useState(new URLSearchParams(window.location.search)),[a,o]=j.useState("all"),l=s.get("search")||"",c=s.get("category"),d=[{id:"all",label:"All Categories"},{id:"1",label:"Electronics"},{id:"2",label:"Fashion & Clothing"},{id:"3",label:"Food & Beverages"},{id:"4",label:"Health & Pharmacy"},{id:"5",label:"Sports & Fitness"},{id:"6",label:"Books & Education"},{id:"7",label:"Beauty & Personal Care"},{id:"8",label:"Toys & Games"},{id:"9",label:"Home & Garden"},{id:"10",label:"Automotive"},{id:"11",label:"Music & Entertainment"}];j.useEffect(()=>{const g=new URLSearchParams(window.location.search);i(g);const x=g.get("category")||"all";o(x),console.log("Products page location changed:",{location:e,searchQuery:g.get("search"),categoryQuery:g.get("category"),fullURL:window.location.href,windowSearch:window.location.search,hasSearchParam:window.location.search.includes("search=")})},[e]),j.useEffect(()=>{const g=()=>{const p=new URLSearchParams(window.location.search);i(p),console.log("Window location changed (forced refresh):",{search:p.get("search"),windowSearch:window.location.search})};window.addEventListener("popstate",g);const x=setInterval(()=>{const p=window.location.search;(new URLSearchParams(p).get("search")||"")!==l&&(console.log("Location change detected via polling"),g())},100);return()=>{window.removeEventListener("popstate",g),clearInterval(x)}},[l]);const h=g=>{o(g);const x=new URLSearchParams(window.location.search);g&&g!=="all"?x.set("category",g):x.delete("category");const p=`/products?${x.toString()}`;t(p)};return console.log("Products page rendering with:",{searchQuery:l,categoryQuery:c,selectedCategory:a}),r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Ae,{href:"/",children:r.jsxs(F,{variant:"ghost",size:"sm",className:"mr-2 sm:mr-4",children:[r.jsx(Xa,{className:"h-4 w-4 mr-1 sm:mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Back to Home"}),r.jsx("span",{className:"sm:hidden",children:"Back"})]})}),r.jsx("h1",{className:"text-xl sm:text-3xl font-bold text-foreground",children:n==="food"?"Food Items":"Products"})]}),r.jsx("div",{className:"hidden md:flex items-center gap-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ji,{className:"h-4 w-4 text-muted-foreground"}),r.jsxs(ct,{value:a,onValueChange:h,children:[r.jsx(it,{className:"w-48",children:r.jsx(dt,{placeholder:"Filter by category"})}),r.jsx(at,{children:d.map(g=>r.jsx(ne,{value:g.id,children:g.label},g.id))})]})]})}),r.jsx("div",{className:"md:hidden",children:r.jsxs(CU,{children:[r.jsx(kU,{asChild:!0,children:r.jsxs(F,{variant:a!=="all"?"default":"outline",size:"sm",className:"p-2 relative",children:[r.jsx(ji,{className:"h-4 w-4"}),a!=="all"&&r.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-blue-500 rounded-full"})]})}),r.jsxs(MT,{side:"right",className:"w-80",children:[r.jsxs(DT,{children:[r.jsx(IT,{children:"Filter Products"}),r.jsx(AU,{children:"Choose a category to filter products"})]}),r.jsxs("div",{className:"mt-6 space-y-4",children:[r.jsxs(ct,{value:a,onValueChange:h,children:[r.jsx(it,{className:"w-full",children:r.jsx(dt,{placeholder:"Filter by category"})}),r.jsx(at,{children:d.map(g=>r.jsx(ne,{value:g.id,children:g.label},g.id))})]}),a!=="all"&&r.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-950 rounded-lg",children:r.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["Filtering by: ",r.jsx("span",{className:"font-medium",children:(m=d.find(g=>g.id===a))==null?void 0:m.label})]})})]})]})]})})]}),a!=="all"&&r.jsx("div",{className:"md:hidden mb-4 px-3 py-2 bg-blue-50 dark:bg-blue-950 rounded-lg",children:r.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["Showing: ",r.jsx("span",{className:"font-medium",children:(f=d.find(g=>g.id===a))==null?void 0:f.label}),r.jsx(F,{variant:"ghost",size:"sm",className:"ml-2 h-auto p-1 text-blue-600 hover:text-blue-800",onClick:()=>h("all"),children:"Clear"})]})}),r.jsx(nfe,{searchQuery:l,category:c&&c!=="all"?c:a!=="all"?a:"",isRestaurantMode:n==="food"})]})})}function ife(){const[e,t]=j.useState(""),[n,s]=j.useState("all"),[i,a]=j.useState("all"),[o,l]=j.useState("all"),[c,d]=j.useState("all"),[h,m]=j.useState("all"),[f,g]=j.useState("name"),[x,p]=j.useState(null),[y,b]=j.useState(!1),[w,N]=j.useState(!1),{toast:S}=ft(),{data:P=[],isLoading:C,error:k,refetch:O}=Re({queryKey:["/api/products"]}),{data:I=[],isLoading:T,error:E}=Re({queryKey:["/api/stores"]}),B=P.filter(V=>{const z=I.find(q=>q.id===V.storeId);return(z==null?void 0:z.storeType)==="restaurant"}).map(V=>{const z=I.find(J=>J.id===V.storeId);let q;if(x&&(z!=null&&z.latitude)&&(z!=null&&z.longitude)){const J=parseFloat(z.latitude),pe=parseFloat(z.longitude);if(!isNaN(J)&&!isNaN(pe)){const Ne=(J-x.latitude)*Math.PI/180,ke=(pe-x.longitude)*Math.PI/180,Ee=Math.sin(Ne/2)*Math.sin(Ne/2)+Math.cos(x.latitude*Math.PI/180)*Math.cos(J*Math.PI/180)*Math.sin(ke/2)*Math.sin(ke/2);q=6371*(2*Math.atan2(Math.sqrt(Ee),Math.sqrt(1-Ee)))}}return{...V,storeName:(z==null?void 0:z.name)||"Unknown Restaurant",storeDistance:q,deliveryTime:(z==null?void 0:z.deliveryTime)||"30-45 min"}}),M=[...new Set(B.map(V=>V.category).filter(Boolean))],U=[...new Set(B.map(V=>({id:V.storeId,name:V.storeName})).filter(V=>V.name!=="Unknown Restaurant"))],K=[...B.filter(V=>{var z,q;if(e&&!V.name.toLowerCase().includes(e.toLowerCase())&&!((z=V.description)!=null&&z.toLowerCase().includes(e.toLowerCase()))&&!((q=V.storeName)!=null&&q.toLowerCase().includes(e.toLowerCase()))||n!=="all"&&V.category!==n||i!=="all"&&V.storeId.toString()!==i||o!=="all"&&V.spiceLevel!==o||c==="vegetarian"&&!V.isVegetarian||c==="vegan"&&!V.isVegan)return!1;if(h!=="all"){const J=parseFloat(V.price.replace(/[^\d.]/g,""));switch(h){case"under-100":if(J>=100)return!1;break;case"100-300":if(J<100||J>300)return!1;break;case"300-500":if(J<300||J>500)return!1;break;case"over-500":if(J<=500)return!1;break}}return!0})].sort((V,z)=>{switch(f){case"name":return V.name.localeCompare(z.name);case"price-low":return parseFloat(V.price.replace(/[^\d.]/g,""))-parseFloat(z.price.replace(/[^\d.]/g,""));case"price-high":return parseFloat(z.price.replace(/[^\d.]/g,""))-parseFloat(V.price.replace(/[^\d.]/g,""));case"rating":return parseFloat(z.rating||"0")-parseFloat(V.rating||"0");case"distance":return!V.storeDistance&&!z.storeDistance?0:V.storeDistance?z.storeDistance?V.storeDistance-z.storeDistance:-1:1;default:return 0}}),W=async()=>{try{const V=await Go();p(V),b(!0),S({title:"Location enabled",description:"Now showing distances to restaurants"})}catch{S({title:"Location access denied",description:"Enable location to see distances to restaurants",variant:"destructive"})}};return r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(Ta,{className:"h-8 w-8 text-orange-500"}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Quick Bites"})]}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Discover delicious food items from all restaurants in one place"})]}),r.jsxs(G,{className:"mb-8",children:[r.jsx(se,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(ji,{className:"h-5 w-5"}),"Find Your Perfect Meal"]}),r.jsxs(F,{variant:"outline",size:"sm",onClick:()=>N(!w),className:"flex items-center gap-2",children:[r.jsx(ji,{className:"h-4 w-4"}),w?"Hide Filters":"Show Filters",w?r.jsx(Pk,{className:"h-4 w-4"}):r.jsx(wb,{className:"h-4 w-4"})]})]})}),r.jsxs(Z,{className:"space-y-6",children:[r.jsxs("div",{className:"relative",children:[r.jsx(zn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),r.jsx(he,{placeholder:"Search for dishes, restaurants, or ingredients...",value:e,onChange:V=>t(V.target.value),className:"pl-10"})]}),w&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs(ct,{value:n,onValueChange:s,children:[r.jsxs(it,{children:[r.jsx(Ti,{className:"h-4 w-4 mr-2"}),r.jsx(dt,{placeholder:"All Categories"})]}),r.jsxs(at,{children:[r.jsx(ne,{value:"all",children:"All Categories"}),M.map(V=>r.jsx(ne,{value:V,children:V},V))]})]}),r.jsxs(ct,{value:i,onValueChange:a,children:[r.jsxs(it,{children:[r.jsx(Ta,{className:"h-4 w-4 mr-2"}),r.jsx(dt,{placeholder:"All Restaurants"})]}),r.jsxs(at,{children:[r.jsx(ne,{value:"all",children:"All Restaurants"}),U.map(V=>r.jsx(ne,{value:V.id.toString(),children:V.name},V.id))]})]}),r.jsxs(ct,{value:o,onValueChange:l,children:[r.jsxs(it,{children:[r.jsx(ji,{className:"h-4 w-4 mr-2"}),r.jsx(dt,{placeholder:"Spice Level"})]}),r.jsxs(at,{children:[r.jsx(ne,{value:"all",children:"All Spice Levels"}),r.jsx(ne,{value:"Mild",children:"Mild"}),r.jsx(ne,{value:"Medium",children:"Medium"}),r.jsx(ne,{value:"Hot",children:"Hot"}),r.jsx(ne,{value:"Extra Hot",children:"Extra Hot"})]})]}),!y&&r.jsxs(F,{variant:"outline",onClick:W,children:[r.jsx(Le,{className:"h-4 w-4 mr-2"}),"Enable Location"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(ct,{value:c,onValueChange:d,children:[r.jsxs(it,{children:[r.jsx(ji,{className:"h-4 w-4 mr-2"}),r.jsx(dt,{placeholder:"Dietary Preferences"})]}),r.jsxs(at,{children:[r.jsx(ne,{value:"all",children:"All Options"}),r.jsx(ne,{value:"vegetarian",children:"Vegetarian"}),r.jsx(ne,{value:"vegan",children:"Vegan"})]})]}),r.jsxs(ct,{value:h,onValueChange:m,children:[r.jsxs(it,{children:[r.jsx(ji,{className:"h-4 w-4 mr-2"}),r.jsx(dt,{placeholder:"Price Range"})]}),r.jsxs(at,{children:[r.jsx(ne,{value:"all",children:"All Prices"}),r.jsx(ne,{value:"under-100",children:"Under 100"}),r.jsx(ne,{value:"100-300",children:"100 - 300"}),r.jsx(ne,{value:"300-500",children:"300 - 500"}),r.jsx(ne,{value:"over-500",children:"Over 500"})]})]}),r.jsxs(ct,{value:f,onValueChange:g,children:[r.jsxs(it,{children:[r.jsx(ji,{className:"h-4 w-4 mr-2"}),r.jsx(dt,{placeholder:"Sort By"})]}),r.jsxs(at,{children:[r.jsx(ne,{value:"name",children:"Name A-Z"}),r.jsx(ne,{value:"price-low",children:"Price: Low to High"}),r.jsx(ne,{value:"price-high",children:"Price: High to Low"}),r.jsx(ne,{value:"rating",children:"Highest Rated"}),y&&r.jsx(ne,{value:"distance",children:"Nearest First"})]})]})]}),r.jsx("div",{className:"flex items-center justify-between",children:y?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Le,{className:"h-4 w-4 text-green-500"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"Location enabled - showing distances to restaurants"})]}):r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Enable location to see distances to restaurants"}),r.jsxs(F,{onClick:W,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[r.jsx(Le,{className:"h-4 w-4"}),"Enable Location"]})]})})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[r.jsxs(G,{children:[r.jsx(se,{className:"pb-3",children:r.jsx(ie,{className:"text-sm font-medium text-muted-foreground",children:"Total Food Items"})}),r.jsx(Z,{children:r.jsx("div",{className:"text-2xl font-bold",children:B.length})})]}),r.jsxs(G,{children:[r.jsx(se,{className:"pb-3",children:r.jsx(ie,{className:"text-sm font-medium text-muted-foreground",children:"Restaurants"})}),r.jsx(Z,{children:r.jsx("div",{className:"text-2xl font-bold",children:U.length})})]}),r.jsxs(G,{children:[r.jsx(se,{className:"pb-3",children:r.jsx(ie,{className:"text-sm font-medium text-muted-foreground",children:"Categories"})}),r.jsx(Z,{children:r.jsx("div",{className:"text-2xl font-bold",children:M.length})})]})]}),r.jsx("div",{className:"flex justify-between items-center mb-6",children:r.jsx("h2",{className:"text-xl font-semibold",children:K.length>0?r.jsxs(r.Fragment,{children:[K.length," food item",K.length!==1?"s":""," found",B.length!==K.length&&r.jsxs("span",{className:"text-muted-foreground ml-2",children:["(filtered from ",B.length," total)"]})]}):"No food items found"})}),k||E?r.jsx(G,{children:r.jsxs(Z,{className:"pt-6 text-center",children:[r.jsxs(ri,{className:"max-w-md mx-auto mb-6",children:[r.jsx(wr,{className:"h-4 w-4"}),r.jsx(ni,{children:"Failed to load food items. Please try again."})]}),r.jsxs(F,{onClick:()=>{O()},variant:"outline",disabled:C||T,children:[r.jsx(Ms,{className:`mr-2 h-4 w-4 ${C||T?"animate-spin":""}`}),"Retry Loading"]})]})}):C||T?r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 sm:gap-4",children:Array.from({length:8}).map((V,z)=>r.jsx(G,{className:"animate-pulse",children:r.jsxs(Z,{className:"p-3",children:[r.jsx("div",{className:"bg-gray-200 h-32 rounded-md mb-3"}),r.jsx("div",{className:"bg-gray-200 h-4 rounded mb-2"}),r.jsx("div",{className:"bg-gray-200 h-3 rounded w-2/3 mb-2"}),r.jsx("div",{className:"bg-gray-200 h-3 rounded w-1/2"})]})},z))}):K.length>0?r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 sm:gap-4",children:K.map(V=>r.jsxs("div",{className:"relative",children:[r.jsx(Wh,{product:V}),r.jsx("div",{className:"absolute top-2 left-2",children:r.jsx(le,{variant:"secondary",className:"text-xs bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",children:V.storeName})}),y&&V.storeDistance&&r.jsx("div",{className:"absolute top-2 right-2",children:r.jsxs(le,{variant:"outline",className:"text-xs bg-white/90 dark:bg-black/90",children:[V.storeDistance.toFixed(1)," km"]})})]},V.id))}):r.jsx(G,{children:r.jsxs(Z,{className:"pt-6 text-center",children:[r.jsxs("div",{className:"text-muted-foreground mb-4",children:[r.jsx(zn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No food items found"}),r.jsx("p",{children:"Try adjusting your search criteria or filters to find delicious meals"})]}),r.jsx(F,{variant:"outline",onClick:()=>{t(""),s("all"),a("all"),l("all"),d("all"),m("all"),g("name")},children:"Clear All Filters"})]})})]})})}function afe({searchQuery:e="",className:t=""}){const[n,s]=j.useState(null),[i,a]=j.useState(!1),[o,l]=j.useState(10),[c,d]=j.useState("all"),[h,m]=j.useState(!1),[f,g]=j.useState("distance"),x=async()=>{a(!0);try{const S=await Go();s(S)}catch(S){console.error("Failed to get user location:",S)}finally{a(!1)}};j.useEffect(()=>{x()},[]);const{data:p,isLoading:y,error:b}=Re({queryKey:["/api/food/items",n==null?void 0:n.latitude,n==null?void 0:n.longitude,o,e,c,h],queryFn:async()=>{if(!n)return{items:[],count:0,searchRadius:0};const S=new URLSearchParams({lat:n.latitude.toString(),lon:n.longitude.toString(),radius:o.toString()});e&&S.append("search",e),c!=="all"&&S.append("spiceLevel",c),h&&S.append("isVegetarian","true");const P=await fetch(`/api/food/items?${S}`);if(!P.ok)throw new Error("Failed to fetch food items");return await P.json()},enabled:!!n}),N=[...(p==null?void 0:p.items)||[]].sort((S,P)=>{switch(f){case"distance":return S.distance-P.distance;case"rating":return parseFloat(P.rating)-parseFloat(S.rating);case"price_low":return parseFloat(S.price)-parseFloat(P.price);case"price_high":return parseFloat(P.price)-parseFloat(S.price);case"delivery_time":const C=k=>{if(!k)return 999;const O=k.match(/(\d+)/);return O?parseInt(O[1]):999};return C(S.deliveryTime)-C(P.deliveryTime);default:return 0}});return!n&&!i?r.jsx(G,{className:t,children:r.jsxs(Z,{className:"text-center py-8",children:[r.jsx(Le,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Location Required for Food Delivery"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"We need your location to show nearby restaurants and food items within delivery range."}),r.jsx(F,{onClick:x,disabled:i,children:i?"Getting Location...":"Enable Location"})]})}):r.jsxs("div",{className:t,children:[r.jsxs(G,{className:"mb-6",children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(ji,{className:"h-5 w-5 text-orange-600"}),"Food Delivery Filters",n&&p&&r.jsxs(le,{variant:"secondary",className:"ml-2",children:[p.count," items within ",p.searchRadius,"km"]})]})}),r.jsx(Z,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Delivery Radius"}),r.jsxs(ct,{value:o.toString(),onValueChange:S=>l(parseInt(S)),children:[r.jsx(it,{children:r.jsx(dt,{})}),r.jsxs(at,{children:[r.jsx(ne,{value:"5",children:"5 km"}),r.jsx(ne,{value:"10",children:"10 km (Recommended)"}),r.jsx(ne,{value:"15",children:"15 km"}),r.jsx(ne,{value:"20",children:"20 km"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Spice Level"}),r.jsxs(ct,{value:c,onValueChange:d,children:[r.jsx(it,{children:r.jsx(dt,{})}),r.jsxs(at,{children:[r.jsx(ne,{value:"all",children:"All Levels"}),r.jsx(ne,{value:"mild",children:"Mild"}),r.jsx(ne,{value:"medium",children:"Medium"}),r.jsx(ne,{value:"hot",children:"Hot"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Diet"}),r.jsxs(ct,{value:h?"vegetarian":"all",onValueChange:S=>m(S==="vegetarian"),children:[r.jsx(it,{children:r.jsx(dt,{})}),r.jsxs(at,{children:[r.jsx(ne,{value:"all",children:"All Foods"}),r.jsx(ne,{value:"vegetarian",children:"Vegetarian Only"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Sort By"}),r.jsxs(ct,{value:f,onValueChange:g,children:[r.jsx(it,{children:r.jsx(dt,{})}),r.jsxs(at,{children:[r.jsx(ne,{value:"distance",children:"Distance"}),r.jsx(ne,{value:"rating",children:"Rating"}),r.jsx(ne,{value:"price_low",children:"Price: Low to High"}),r.jsx(ne,{value:"price_high",children:"Price: High to Low"}),r.jsx(ne,{value:"delivery_time",children:"Delivery Time"})]})]})]})]})})]}),y&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Finding delicious food near you..."})]}),b&&r.jsx(G,{children:r.jsxs(Z,{className:"text-center py-8",children:[r.jsx("div",{className:"text-red-600 mb-2",children:"Failed to load food items"}),r.jsx(F,{onClick:()=>window.location.reload(),variant:"outline",children:"Try Again"})]})}),!y&&!b&&N.length>0&&r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:N.map(S=>r.jsxs("div",{className:"relative",children:[r.jsx(Wh,{product:S}),r.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1",children:[r.jsxs(le,{variant:"secondary",className:"text-xs bg-white/90 text-gray-700",children:[r.jsx(Le,{className:"h-3 w-3 mr-1"}),S.distance.toFixed(1),"km"]}),S.deliveryTime&&r.jsxs(le,{variant:"secondary",className:"text-xs bg-white/90 text-gray-700",children:[r.jsx(gt,{className:"h-3 w-3 mr-1"}),S.deliveryTime]})]}),r.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"text-sm font-medium text-gray-800",children:S.storeName}),r.jsx("p",{className:"text-xs text-gray-600",children:S.storeAddress}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx($t,{className:"h-3 w-3 text-yellow-500"}),r.jsxs("span",{className:"text-xs text-gray-600",children:[S.rating,"  ",S.totalReviews," reviews"]})]})]})]},S.id))}),!y&&!b&&N.length===0&&n&&r.jsx(G,{children:r.jsxs(Z,{className:"text-center py-8",children:[r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No food items found"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Try increasing the delivery radius or adjusting your filters."}),r.jsx(F,{onClick:()=>l(20),variant:"outline",children:"Expand to 20km radius"})]})})]})}function ofe(){const[e,t]=j.useState("");return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("h1",{className:"text-4xl font-bold mb-2 flex items-center gap-3",children:[r.jsx(Ti,{className:"h-10 w-10 text-orange-600"}),"Food Delivery"]}),r.jsx("p",{className:"text-gray-600 text-lg",children:"Modern food delivery with 10km radius filtering - just like the apps you love"})]}),r.jsxs(G,{className:"mb-8 bg-gradient-to-r from-orange-50 to-red-50",children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center gap-2 text-orange-700",children:[r.jsx(Gp,{className:"h-5 w-5"}),"Modern Food Delivery Features"]})}),r.jsx(Z,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Le,{className:"h-8 w-8 text-orange-600 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",children:"10km Radius"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Only show restaurants and food within delivery range"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(gt,{className:"h-8 w-8 text-orange-600 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",children:"Real-time Distance"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Sort by delivery time and distance automatically"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx($t,{className:"h-8 w-8 text-orange-600 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",children:"Smart Filtering"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Filter by cuisine, spice level, and dietary preferences"})]})]})]})})]}),r.jsx(G,{className:"mb-6",children:r.jsxs(Z,{className:"pt-6",children:[r.jsxs("div",{className:"relative",children:[r.jsx(he,{type:"text",placeholder:"Search for food, restaurants, or cuisine...",value:e,onChange:n=>t(n.target.value),className:"pl-10 pr-4 py-3 text-lg"}),r.jsx(Ti,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"})]}),r.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[r.jsx(le,{variant:"secondary",className:"cursor-pointer hover:bg-orange-100",children:r.jsx(F,{variant:"ghost",size:"sm",className:"p-0 h-auto font-normal",onClick:()=>t("Pizza"),children:" Pizza"})}),r.jsx(le,{variant:"secondary",className:"cursor-pointer hover:bg-orange-100",children:r.jsx(F,{variant:"ghost",size:"sm",className:"p-0 h-auto font-normal",onClick:()=>t("Burger"),children:" Burgers"})}),r.jsx(le,{variant:"secondary",className:"cursor-pointer hover:bg-orange-100",children:r.jsx(F,{variant:"ghost",size:"sm",className:"p-0 h-auto font-normal",onClick:()=>t("Indian"),children:" Indian"})}),r.jsx(le,{variant:"secondary",className:"cursor-pointer hover:bg-orange-100",children:r.jsx(F,{variant:"ghost",size:"sm",className:"p-0 h-auto font-normal",onClick:()=>t("Chinese"),children:" Chinese"})}),r.jsx(le,{variant:"secondary",className:"cursor-pointer hover:bg-orange-100",children:r.jsx(F,{variant:"ghost",size:"sm",className:"p-0 h-auto font-normal",onClick:()=>t("Vegetarian"),children:" Vegetarian"})})]})]})}),r.jsx(afe,{searchQuery:e,className:"w-full"})]})}var Tg=e=>e.type==="checkbox",td=e=>e instanceof Date,ds=e=>e==null;const f9=e=>typeof e=="object";var sn=e=>!ds(e)&&!Array.isArray(e)&&f9(e)&&!td(e),p9=e=>sn(e)&&e.target?Tg(e.target)?e.target.checked:e.target.value:e,lfe=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,x9=(e,t)=>e.has(lfe(t)),cfe=e=>{const t=e.constructor&&e.constructor.prototype;return sn(t)&&t.hasOwnProperty("isPrototypeOf")},RT=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function In(e){let t;const n=Array.isArray(e),s=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(RT&&(e instanceof Blob||s))&&(n||sn(e)))if(t=n?[]:{},!n&&!cfe(e))t=e;else for(const i in e)e.hasOwnProperty(i)&&(t[i]=In(e[i]));else return e;return t}var Gb=e=>Array.isArray(e)?e.filter(Boolean):[],rn=e=>e===void 0,Ke=(e,t,n)=>{if(!t||!sn(e))return n;const s=Gb(t.split(/[,[\].]+?/)).reduce((i,a)=>ds(i)?i:i[a],e);return rn(s)||s===e?rn(e[t])?n:e[t]:s},Vs=e=>typeof e=="boolean",$T=e=>/^\w*$/.test(e),g9=e=>Gb(e.replace(/["|']|\]/g,"").split(/\.|\[/)),or=(e,t,n)=>{let s=-1;const i=$T(t)?[t]:g9(t),a=i.length,o=a-1;for(;++s<a;){const l=i[s];let c=n;if(s!==o){const d=e[l];c=sn(d)||Array.isArray(d)?d:isNaN(+i[s+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const D0={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ta={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},lo={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},v9=re.createContext(null),Zb=()=>re.useContext(v9),dfe=e=>{const{children:t,...n}=e;return re.createElement(v9.Provider,{value:n},t)};var y9=(e,t,n,s=!0)=>{const i={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(i,a,{get:()=>{const o=a;return t._proxyFormState[o]!==ta.all&&(t._proxyFormState[o]=!s||ta.all),n&&(n[o]=!0),e[o]}});return i};function ufe(e){const t=Zb(),{control:n=t.control,disabled:s,name:i,exact:a}=e||{},[o,l]=re.useState(n._formState),c=re.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=re.useRef(i);return d.current=i,re.useEffect(()=>n._subscribe({name:d.current,formState:c.current,exact:a,callback:h=>{!s&&l({...n._formState,...h})}}),[n,s,a]),re.useEffect(()=>{c.current.isValid&&n._setValid(!0)},[n]),re.useMemo(()=>y9(o,n,c.current,!1),[o,n])}var Ea=e=>typeof e=="string",j9=(e,t,n,s,i)=>Ea(e)?(s&&t.watch.add(e),Ke(n,e,i)):Array.isArray(e)?e.map(a=>(s&&t.watch.add(a),Ke(n,a))):(s&&(t.watchAll=!0),n);function hfe(e){const t=Zb(),{control:n=t.control,name:s,defaultValue:i,disabled:a,exact:o}=e||{},l=re.useRef(s),c=re.useRef(i);l.current=s,re.useEffect(()=>n._subscribe({name:l.current,formState:{values:!0},exact:o,callback:m=>!a&&h(j9(l.current,n._names,m.values||n._formValues,!1,c.current))}),[n,a,o]);const[d,h]=re.useState(n._getWatch(s,i));return re.useEffect(()=>n._removeUnmounted()),d}function mfe(e){const t=Zb(),{name:n,disabled:s,control:i=t.control,shouldUnregister:a}=e,o=x9(i._names.array,n),l=hfe({control:i,name:n,defaultValue:Ke(i._formValues,n,Ke(i._defaultValues,n,e.defaultValue)),exact:!0}),c=ufe({control:i,name:n,exact:!0}),d=re.useRef(e),h=re.useRef(i.register(n,{...e.rules,value:l,...Vs(e.disabled)?{disabled:e.disabled}:{}})),m=re.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ke(c.errors,n)},isDirty:{enumerable:!0,get:()=>!!Ke(c.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Ke(c.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Ke(c.validatingFields,n)},error:{enumerable:!0,get:()=>Ke(c.errors,n)}}),[c,n]),f=re.useCallback(y=>h.current.onChange({target:{value:p9(y),name:n},type:D0.CHANGE}),[n]),g=re.useCallback(()=>h.current.onBlur({target:{value:Ke(i._formValues,n),name:n},type:D0.BLUR}),[n,i._formValues]),x=re.useCallback(y=>{const b=Ke(i._fields,n);b&&y&&(b._f.ref={focus:()=>y.focus(),select:()=>y.select(),setCustomValidity:w=>y.setCustomValidity(w),reportValidity:()=>y.reportValidity()})},[i._fields,n]),p=re.useMemo(()=>({name:n,value:l,...Vs(s)||c.disabled?{disabled:c.disabled||s}:{},onChange:f,onBlur:g,ref:x}),[n,s,c.disabled,f,g,x,l]);return re.useEffect(()=>{const y=i._options.shouldUnregister||a;i.register(n,{...d.current.rules,...Vs(d.current.disabled)?{disabled:d.current.disabled}:{}});const b=(w,N)=>{const S=Ke(i._fields,w);S&&S._f&&(S._f.mount=N)};if(b(n,!0),y){const w=In(Ke(i._options.defaultValues,n));or(i._defaultValues,n,w),rn(Ke(i._formValues,n))&&or(i._formValues,n,w)}return!o&&i.register(n),()=>{(o?y&&!i._state.action:y)?i.unregister(n):b(n,!1)}},[n,i,o,a]),re.useEffect(()=>{i._setDisabledField({disabled:s,name:n})},[s,n,i]),re.useMemo(()=>({field:p,formState:c,fieldState:m}),[p,c,m])}const ffe=e=>e.render(mfe(e));var b9=(e,t,n,s,i)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[s]:i||!0}}:{},mp=e=>Array.isArray(e)?e:[e],TD=()=>{let e=[];return{get observers(){return e},next:i=>{for(const a of e)a.next&&a.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(a=>a!==i)}}),unsubscribe:()=>{e=[]}}},p2=e=>ds(e)||!f9(e);function wl(e,t){if(p2(e)||p2(t))return e===t;if(td(e)&&td(t))return e.getTime()===t.getTime();const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(const i of n){const a=e[i];if(!s.includes(i))return!1;if(i!=="ref"){const o=t[i];if(td(a)&&td(o)||sn(a)&&sn(o)||Array.isArray(a)&&Array.isArray(o)?!wl(a,o):a!==o)return!1}}return!0}var ls=e=>sn(e)&&!Object.keys(e).length,FT=e=>e.type==="file",ra=e=>typeof e=="function",I0=e=>{if(!RT)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},w9=e=>e.type==="select-multiple",zT=e=>e.type==="radio",pfe=e=>zT(e)||Tg(e),D1=e=>I0(e)&&e.isConnected;function xfe(e,t){const n=t.slice(0,-1).length;let s=0;for(;s<n;)e=rn(e)?s++:e[t[s++]];return e}function gfe(e){for(const t in e)if(e.hasOwnProperty(t)&&!rn(e[t]))return!1;return!0}function yn(e,t){const n=Array.isArray(t)?t:$T(t)?[t]:g9(t),s=n.length===1?e:xfe(e,n),i=n.length-1,a=n[i];return s&&delete s[a],i!==0&&(sn(s)&&ls(s)||Array.isArray(s)&&gfe(s))&&yn(e,n.slice(0,-1)),e}var N9=e=>{for(const t in e)if(ra(e[t]))return!0;return!1};function L0(e,t={}){const n=Array.isArray(e);if(sn(e)||n)for(const s in e)Array.isArray(e[s])||sn(e[s])&&!N9(e[s])?(t[s]=Array.isArray(e[s])?[]:{},L0(e[s],t[s])):ds(e[s])||(t[s]=!0);return t}function S9(e,t,n){const s=Array.isArray(e);if(sn(e)||s)for(const i in e)Array.isArray(e[i])||sn(e[i])&&!N9(e[i])?rn(t)||p2(n[i])?n[i]=Array.isArray(e[i])?L0(e[i],[]):{...L0(e[i])}:S9(e[i],ds(t)?{}:t[i],n[i]):n[i]=!wl(e[i],t[i]);return n}var Cf=(e,t)=>S9(e,t,L0(t));const AD={value:!1,isValid:!1},ED={value:!0,isValid:!0};var _9=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!rn(e[0].attributes.value)?rn(e[0].value)||e[0].value===""?ED:{value:e[0].value,isValid:!0}:ED:AD}return AD},P9=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:s})=>rn(e)?e:t?e===""?NaN:e&&+e:n&&Ea(e)?new Date(e):s?s(e):e;const OD={isValid:!1,value:null};var C9=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,OD):OD;function MD(e){const t=e.ref;return FT(t)?t.files:zT(t)?C9(e.refs).value:w9(t)?[...t.selectedOptions].map(({value:n})=>n):Tg(t)?_9(e.refs).value:P9(rn(t.value)?e.ref.value:t.value,e)}var vfe=(e,t,n,s)=>{const i={};for(const a of e){const o=Ke(t,a);o&&or(i,a,o._f)}return{criteriaMode:n,names:[...e],fields:i,shouldUseNativeValidation:s}},R0=e=>e instanceof RegExp,kf=e=>rn(e)?e:R0(e)?e.source:sn(e)?R0(e.value)?e.value.source:e.value:e,DD=e=>({isOnSubmit:!e||e===ta.onSubmit,isOnBlur:e===ta.onBlur,isOnChange:e===ta.onChange,isOnAll:e===ta.all,isOnTouch:e===ta.onTouched});const ID="AsyncFunction";var yfe=e=>!!e&&!!e.validate&&!!(ra(e.validate)&&e.validate.constructor.name===ID||sn(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===ID)),jfe=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),LD=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const fp=(e,t,n,s)=>{for(const i of n||Object.keys(e)){const a=Ke(e,i);if(a){const{_f:o,...l}=a;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],i)&&!s)return!0;if(o.ref&&t(o.ref,o.name)&&!s)return!0;if(fp(l,t))break}else if(sn(l)&&fp(l,t))break}}};function RD(e,t,n){const s=Ke(e,n);if(s||$T(n))return{error:s,name:n};const i=n.split(".");for(;i.length;){const a=i.join("."),o=Ke(t,a),l=Ke(e,a);if(o&&!Array.isArray(o)&&n!==a)return{name:n};if(l&&l.type)return{name:a,error:l};i.pop()}return{name:n}}var bfe=(e,t,n,s)=>{n(e);const{name:i,...a}=e;return ls(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(o=>t[o]===(!s||ta.all))},wfe=(e,t,n)=>!e||!t||e===t||mp(e).some(s=>s&&(n?s===t:s.startsWith(t)||t.startsWith(s))),Nfe=(e,t,n,s,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(t||e):(n?s.isOnBlur:i.isOnBlur)?!e:(n?s.isOnChange:i.isOnChange)?e:!0,Sfe=(e,t)=>!Gb(Ke(e,t)).length&&yn(e,t),_fe=(e,t,n)=>{const s=mp(Ke(e,n));return or(s,"root",t[n]),or(e,n,s),e},Ay=e=>Ea(e);function $D(e,t,n="validate"){if(Ay(e)||Array.isArray(e)&&e.every(Ay)||Vs(e)&&!e)return{type:n,message:Ay(e)?e:"",ref:t}}var Pu=e=>sn(e)&&!R0(e)?e:{value:e,message:""},FD=async(e,t,n,s,i,a)=>{const{ref:o,refs:l,required:c,maxLength:d,minLength:h,min:m,max:f,pattern:g,validate:x,name:p,valueAsNumber:y,mount:b}=e._f,w=Ke(n,p);if(!b||t.has(p))return{};const N=l?l[0]:o,S=D=>{i&&N.reportValidity&&(N.setCustomValidity(Vs(D)?"":D||""),N.reportValidity())},P={},C=zT(o),k=Tg(o),O=C||k,I=(y||FT(o))&&rn(o.value)&&rn(w)||I0(o)&&o.value===""||w===""||Array.isArray(w)&&!w.length,T=b9.bind(null,p,s,P),E=(D,B,M,U=lo.maxLength,H=lo.minLength)=>{const K=D?B:M;P[p]={type:D?U:H,message:K,ref:o,...T(D?U:H,K)}};if(a?!Array.isArray(w)||!w.length:c&&(!O&&(I||ds(w))||Vs(w)&&!w||k&&!_9(l).isValid||C&&!C9(l).isValid)){const{value:D,message:B}=Ay(c)?{value:!!c,message:c}:Pu(c);if(D&&(P[p]={type:lo.required,message:B,ref:N,...T(lo.required,B)},!s))return S(B),P}if(!I&&(!ds(m)||!ds(f))){let D,B;const M=Pu(f),U=Pu(m);if(!ds(w)&&!isNaN(w)){const H=o.valueAsNumber||w&&+w;ds(M.value)||(D=H>M.value),ds(U.value)||(B=H<U.value)}else{const H=o.valueAsDate||new Date(w),K=z=>new Date(new Date().toDateString()+" "+z),W=o.type=="time",V=o.type=="week";Ea(M.value)&&w&&(D=W?K(w)>K(M.value):V?w>M.value:H>new Date(M.value)),Ea(U.value)&&w&&(B=W?K(w)<K(U.value):V?w<U.value:H<new Date(U.value))}if((D||B)&&(E(!!D,M.message,U.message,lo.max,lo.min),!s))return S(P[p].message),P}if((d||h)&&!I&&(Ea(w)||a&&Array.isArray(w))){const D=Pu(d),B=Pu(h),M=!ds(D.value)&&w.length>+D.value,U=!ds(B.value)&&w.length<+B.value;if((M||U)&&(E(M,D.message,B.message),!s))return S(P[p].message),P}if(g&&!I&&Ea(w)){const{value:D,message:B}=Pu(g);if(R0(D)&&!w.match(D)&&(P[p]={type:lo.pattern,message:B,ref:o,...T(lo.pattern,B)},!s))return S(B),P}if(x){if(ra(x)){const D=await x(w,n),B=$D(D,N);if(B&&(P[p]={...B,...T(lo.validate,B.message)},!s))return S(B.message),P}else if(sn(x)){let D={};for(const B in x){if(!ls(D)&&!s)break;const M=$D(await x[B](w,n),N,B);M&&(D={...M,...T(B,M.message)},S(M.message),s&&(P[p]=D))}if(!ls(D)&&(P[p]={ref:N,...D},!s))return P}}return S(!0),P};const Pfe={mode:ta.onSubmit,reValidateMode:ta.onChange,shouldFocusError:!0};function Cfe(e={}){let t={...Pfe,...e},n={submitCount:0,isDirty:!1,isLoading:ra(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1};const s={};let i=sn(t.defaultValues)||sn(t.values)?In(t.values||t.defaultValues)||{}:{},a=t.shouldUnregister?{}:In(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let m={...h};const f={array:TD(),state:TD()},g=DD(t.mode),x=DD(t.reValidateMode),p=t.criteriaMode===ta.all,y=ce=>je=>{clearTimeout(d),d=setTimeout(ce,je)},b=async ce=>{if(!t.disabled&&(h.isValid||m.isValid||ce)){const je=t.resolver?ls((await I()).errors):await E(s,!0);je!==n.isValid&&f.state.next({isValid:je})}},w=(ce,je)=>{!t.disabled&&(h.isValidating||h.validatingFields||m.isValidating||m.validatingFields)&&((ce||Array.from(l.mount)).forEach(_e=>{_e&&(je?or(n.validatingFields,_e,je):yn(n.validatingFields,_e))}),f.state.next({validatingFields:n.validatingFields,isValidating:!ls(n.validatingFields)}))},N=(ce,je=[],_e,Q,ve=!0,Te=!0)=>{if(Q&&_e&&!t.disabled){if(o.action=!0,Te&&Array.isArray(Ke(s,ce))){const qe=_e(Ke(s,ce),Q.argA,Q.argB);ve&&or(s,ce,qe)}if(Te&&Array.isArray(Ke(n.errors,ce))){const qe=_e(Ke(n.errors,ce),Q.argA,Q.argB);ve&&or(n.errors,ce,qe),Sfe(n.errors,ce)}if((h.touchedFields||m.touchedFields)&&Te&&Array.isArray(Ke(n.touchedFields,ce))){const qe=_e(Ke(n.touchedFields,ce),Q.argA,Q.argB);ve&&or(n.touchedFields,ce,qe)}(h.dirtyFields||m.dirtyFields)&&(n.dirtyFields=Cf(i,a)),f.state.next({name:ce,isDirty:B(ce,je),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else or(a,ce,je)},S=(ce,je)=>{or(n.errors,ce,je),f.state.next({errors:n.errors})},P=ce=>{n.errors=ce,f.state.next({errors:n.errors,isValid:!1})},C=(ce,je,_e,Q)=>{const ve=Ke(s,ce);if(ve){const Te=Ke(a,ce,rn(_e)?Ke(i,ce):_e);rn(Te)||Q&&Q.defaultChecked||je?or(a,ce,je?Te:MD(ve._f)):H(ce,Te),o.mount&&b()}},k=(ce,je,_e,Q,ve)=>{let Te=!1,qe=!1;const Pt={name:ce};if(!t.disabled){if(!_e||Q){(h.isDirty||m.isDirty)&&(qe=n.isDirty,n.isDirty=Pt.isDirty=B(),Te=qe!==Pt.isDirty);const fr=wl(Ke(i,ce),je);qe=!!Ke(n.dirtyFields,ce),fr?yn(n.dirtyFields,ce):or(n.dirtyFields,ce,!0),Pt.dirtyFields=n.dirtyFields,Te=Te||(h.dirtyFields||m.dirtyFields)&&qe!==!fr}if(_e){const fr=Ke(n.touchedFields,ce);fr||(or(n.touchedFields,ce,_e),Pt.touchedFields=n.touchedFields,Te=Te||(h.touchedFields||m.touchedFields)&&fr!==_e)}Te&&ve&&f.state.next(Pt)}return Te?Pt:{}},O=(ce,je,_e,Q)=>{const ve=Ke(n.errors,ce),Te=(h.isValid||m.isValid)&&Vs(je)&&n.isValid!==je;if(t.delayError&&_e?(c=y(()=>S(ce,_e)),c(t.delayError)):(clearTimeout(d),c=null,_e?or(n.errors,ce,_e):yn(n.errors,ce)),(_e?!wl(ve,_e):ve)||!ls(Q)||Te){const qe={...Q,...Te&&Vs(je)?{isValid:je}:{},errors:n.errors,name:ce};n={...n,...qe},f.state.next(qe)}},I=async ce=>{w(ce,!0);const je=await t.resolver(a,t.context,vfe(ce||l.mount,s,t.criteriaMode,t.shouldUseNativeValidation));return w(ce),je},T=async ce=>{const{errors:je}=await I(ce);if(ce)for(const _e of ce){const Q=Ke(je,_e);Q?or(n.errors,_e,Q):yn(n.errors,_e)}else n.errors=je;return je},E=async(ce,je,_e={valid:!0})=>{for(const Q in ce){const ve=ce[Q];if(ve){const{_f:Te,...qe}=ve;if(Te){const Pt=l.array.has(Te.name),fr=ve._f&&yfe(ve._f);fr&&h.validatingFields&&w([Q],!0);const gn=await FD(ve,l.disabled,a,p,t.shouldUseNativeValidation&&!je,Pt);if(fr&&h.validatingFields&&w([Q]),gn[Te.name]&&(_e.valid=!1,je))break;!je&&(Ke(gn,Te.name)?Pt?_fe(n.errors,gn,Te.name):or(n.errors,Te.name,gn[Te.name]):yn(n.errors,Te.name))}!ls(qe)&&await E(qe,je,_e)}}return _e.valid},D=()=>{for(const ce of l.unMount){const je=Ke(s,ce);je&&(je._f.refs?je._f.refs.every(_e=>!D1(_e)):!D1(je._f.ref))&&Se(ce)}l.unMount=new Set},B=(ce,je)=>!t.disabled&&(ce&&je&&or(a,ce,je),!wl(J(),i)),M=(ce,je,_e)=>j9(ce,l,{...o.mount?a:rn(je)?i:Ea(ce)?{[ce]:je}:je},_e,je),U=ce=>Gb(Ke(o.mount?a:i,ce,t.shouldUnregister?Ke(i,ce,[]):[])),H=(ce,je,_e={})=>{const Q=Ke(s,ce);let ve=je;if(Q){const Te=Q._f;Te&&(!Te.disabled&&or(a,ce,P9(je,Te)),ve=I0(Te.ref)&&ds(je)?"":je,w9(Te.ref)?[...Te.ref.options].forEach(qe=>qe.selected=ve.includes(qe.value)):Te.refs?Tg(Te.ref)?Te.refs.length>1?Te.refs.forEach(qe=>(!qe.defaultChecked||!qe.disabled)&&(qe.checked=Array.isArray(ve)?!!ve.find(Pt=>Pt===qe.value):ve===qe.value)):Te.refs[0]&&(Te.refs[0].checked=!!ve):Te.refs.forEach(qe=>qe.checked=qe.value===ve):FT(Te.ref)?Te.ref.value="":(Te.ref.value=ve,Te.ref.type||f.state.next({name:ce,values:In(a)})))}(_e.shouldDirty||_e.shouldTouch)&&k(ce,ve,_e.shouldTouch,_e.shouldDirty,!0),_e.shouldValidate&&q(ce)},K=(ce,je,_e)=>{for(const Q in je){const ve=je[Q],Te=`${ce}.${Q}`,qe=Ke(s,Te);(l.array.has(ce)||sn(ve)||qe&&!qe._f)&&!td(ve)?K(Te,ve,_e):H(Te,ve,_e)}},W=(ce,je,_e={})=>{const Q=Ke(s,ce),ve=l.array.has(ce),Te=In(je);or(a,ce,Te),ve?(f.array.next({name:ce,values:In(a)}),(h.isDirty||h.dirtyFields||m.isDirty||m.dirtyFields)&&_e.shouldDirty&&f.state.next({name:ce,dirtyFields:Cf(i,a),isDirty:B(ce,Te)})):Q&&!Q._f&&!ds(Te)?K(ce,Te,_e):H(ce,Te,_e),LD(ce,l)&&f.state.next({...n}),f.state.next({name:o.mount?ce:void 0,values:In(a)})},V=async ce=>{o.mount=!0;const je=ce.target;let _e=je.name,Q=!0;const ve=Ke(s,_e),Te=qe=>{Q=Number.isNaN(qe)||td(qe)&&isNaN(qe.getTime())||wl(qe,Ke(a,_e,qe))};if(ve){let qe,Pt;const fr=je.type?MD(ve._f):p9(ce),gn=ce.type===D0.BLUR||ce.type===D0.FOCUS_OUT,Zw=!jfe(ve._f)&&!t.resolver&&!Ke(n.errors,_e)&&!ve._f.deps||Nfe(gn,Ke(n.touchedFields,_e),n.isSubmitted,x,g),du=LD(_e,l,gn);or(a,_e,fr),gn?(ve._f.onBlur&&ve._f.onBlur(ce),c&&c(0)):ve._f.onChange&&ve._f.onChange(ce);const Oc=k(_e,fr,gn),Kg=!ls(Oc)||du;if(!gn&&f.state.next({name:_e,type:ce.type,values:In(a)}),Zw)return(h.isValid||m.isValid)&&(t.mode==="onBlur"?gn&&b():gn||b()),Kg&&f.state.next({name:_e,...du?{}:Oc});if(!gn&&du&&f.state.next({...n}),t.resolver){const{errors:Gg}=await I([_e]);if(Te(fr),Q){const Mc=RD(n.errors,s,_e),Zg=RD(Gg,s,Mc.name||_e);qe=Zg.error,_e=Zg.name,Pt=ls(Gg)}}else w([_e],!0),qe=(await FD(ve,l.disabled,a,p,t.shouldUseNativeValidation))[_e],w([_e]),Te(fr),Q&&(qe?Pt=!1:(h.isValid||m.isValid)&&(Pt=await E(s,!0)));Q&&(ve._f.deps&&q(ve._f.deps),O(_e,Pt,qe,Oc))}},z=(ce,je)=>{if(Ke(n.errors,je)&&ce.focus)return ce.focus(),1},q=async(ce,je={})=>{let _e,Q;const ve=mp(ce);if(t.resolver){const Te=await T(rn(ce)?ce:ve);_e=ls(Te),Q=ce?!ve.some(qe=>Ke(Te,qe)):_e}else ce?(Q=(await Promise.all(ve.map(async Te=>{const qe=Ke(s,Te);return await E(qe&&qe._f?{[Te]:qe}:qe)}))).every(Boolean),!(!Q&&!n.isValid)&&b()):Q=_e=await E(s);return f.state.next({...!Ea(ce)||(h.isValid||m.isValid)&&_e!==n.isValid?{}:{name:ce},...t.resolver||!ce?{isValid:_e}:{},errors:n.errors}),je.shouldFocus&&!Q&&fp(s,z,ce?ve:l.mount),Q},J=ce=>{const je={...o.mount?a:i};return rn(ce)?je:Ea(ce)?Ke(je,ce):ce.map(_e=>Ke(je,_e))},pe=(ce,je)=>({invalid:!!Ke((je||n).errors,ce),isDirty:!!Ke((je||n).dirtyFields,ce),error:Ke((je||n).errors,ce),isValidating:!!Ke(n.validatingFields,ce),isTouched:!!Ke((je||n).touchedFields,ce)}),ye=ce=>{ce&&mp(ce).forEach(je=>yn(n.errors,je)),f.state.next({errors:ce?n.errors:{}})},Ne=(ce,je,_e)=>{const Q=(Ke(s,ce,{_f:{}})._f||{}).ref,ve=Ke(n.errors,ce)||{},{ref:Te,message:qe,type:Pt,...fr}=ve;or(n.errors,ce,{...fr,...je,ref:Q}),f.state.next({name:ce,errors:n.errors,isValid:!1}),_e&&_e.shouldFocus&&Q&&Q.focus&&Q.focus()},ke=(ce,je)=>ra(ce)?f.state.subscribe({next:_e=>ce(M(void 0,je),_e)}):M(ce,je,!0),Ee=ce=>f.state.subscribe({next:je=>{wfe(ce.name,je.name,ce.exact)&&bfe(je,ce.formState||h,Tt,ce.reRenderRoot)&&ce.callback({values:{...a},...n,...je})}}).unsubscribe,We=ce=>(o.mount=!0,m={...m,...ce.formState},Ee({...ce,formState:m})),Se=(ce,je={})=>{for(const _e of ce?mp(ce):l.mount)l.mount.delete(_e),l.array.delete(_e),je.keepValue||(yn(s,_e),yn(a,_e)),!je.keepError&&yn(n.errors,_e),!je.keepDirty&&yn(n.dirtyFields,_e),!je.keepTouched&&yn(n.touchedFields,_e),!je.keepIsValidating&&yn(n.validatingFields,_e),!t.shouldUnregister&&!je.keepDefaultValue&&yn(i,_e);f.state.next({values:In(a)}),f.state.next({...n,...je.keepDirty?{isDirty:B()}:{}}),!je.keepIsValid&&b()},Me=({disabled:ce,name:je})=>{(Vs(ce)&&o.mount||ce||l.disabled.has(je))&&(ce?l.disabled.add(je):l.disabled.delete(je))},Ie=(ce,je={})=>{let _e=Ke(s,ce);const Q=Vs(je.disabled)||Vs(t.disabled);return or(s,ce,{..._e||{},_f:{..._e&&_e._f?_e._f:{ref:{name:ce}},name:ce,mount:!0,...je}}),l.mount.add(ce),_e?Me({disabled:Vs(je.disabled)?je.disabled:t.disabled,name:ce}):C(ce,!0,je.value),{...Q?{disabled:je.disabled||t.disabled}:{},...t.progressive?{required:!!je.required,min:kf(je.min),max:kf(je.max),minLength:kf(je.minLength),maxLength:kf(je.maxLength),pattern:kf(je.pattern)}:{},name:ce,onChange:V,onBlur:V,ref:ve=>{if(ve){Ie(ce,je),_e=Ke(s,ce);const Te=rn(ve.value)&&ve.querySelectorAll&&ve.querySelectorAll("input,select,textarea")[0]||ve,qe=pfe(Te),Pt=_e._f.refs||[];if(qe?Pt.find(fr=>fr===Te):Te===_e._f.ref)return;or(s,ce,{_f:{..._e._f,...qe?{refs:[...Pt.filter(D1),Te,...Array.isArray(Ke(i,ce))?[{}]:[]],ref:{type:Te.type,name:ce}}:{ref:Te}}}),C(ce,!1,void 0,Te)}else _e=Ke(s,ce,{}),_e._f&&(_e._f.mount=!1),(t.shouldUnregister||je.shouldUnregister)&&!(x9(l.array,ce)&&o.action)&&l.unMount.add(ce)}}},$=()=>t.shouldFocusError&&fp(s,z,l.mount),ee=ce=>{Vs(ce)&&(f.state.next({disabled:ce}),fp(s,(je,_e)=>{const Q=Ke(s,_e);Q&&(je.disabled=Q._f.disabled||ce,Array.isArray(Q._f.refs)&&Q._f.refs.forEach(ve=>{ve.disabled=Q._f.disabled||ce}))},0,!1))},X=(ce,je)=>async _e=>{let Q;_e&&(_e.preventDefault&&_e.preventDefault(),_e.persist&&_e.persist());let ve=In(a);if(f.state.next({isSubmitting:!0}),t.resolver){const{errors:Te,values:qe}=await I();n.errors=Te,ve=qe}else await E(s);if(l.disabled.size)for(const Te of l.disabled)or(ve,Te,void 0);if(yn(n.errors,"root"),ls(n.errors)){f.state.next({errors:{}});try{await ce(ve,_e)}catch(Te){Q=Te}}else je&&await je({...n.errors},_e),$(),setTimeout($);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ls(n.errors)&&!Q,submitCount:n.submitCount+1,errors:n.errors}),Q)throw Q},Ce=(ce,je={})=>{Ke(s,ce)&&(rn(je.defaultValue)?W(ce,In(Ke(i,ce))):(W(ce,je.defaultValue),or(i,ce,In(je.defaultValue))),je.keepTouched||yn(n.touchedFields,ce),je.keepDirty||(yn(n.dirtyFields,ce),n.isDirty=je.defaultValue?B(ce,In(Ke(i,ce))):B()),je.keepError||(yn(n.errors,ce),h.isValid&&b()),f.state.next({...n}))},$e=(ce,je={})=>{const _e=ce?In(ce):i,Q=In(_e),ve=ls(ce),Te=ve?i:Q;if(je.keepDefaultValues||(i=_e),!je.keepValues){if(je.keepDirtyValues){const qe=new Set([...l.mount,...Object.keys(Cf(i,a))]);for(const Pt of Array.from(qe))Ke(n.dirtyFields,Pt)?or(Te,Pt,Ke(a,Pt)):W(Pt,Ke(Te,Pt))}else{if(RT&&rn(ce))for(const qe of l.mount){const Pt=Ke(s,qe);if(Pt&&Pt._f){const fr=Array.isArray(Pt._f.refs)?Pt._f.refs[0]:Pt._f.ref;if(I0(fr)){const gn=fr.closest("form");if(gn){gn.reset();break}}}}for(const qe of l.mount)W(qe,Ke(Te,qe))}a=In(Te),f.array.next({values:{...Te}}),f.state.next({values:{...Te}})}l={mount:je.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!je.keepIsValid||!!je.keepDirtyValues,o.watch=!!t.shouldUnregister,f.state.next({submitCount:je.keepSubmitCount?n.submitCount:0,isDirty:ve?!1:je.keepDirty?n.isDirty:!!(je.keepDefaultValues&&!wl(ce,i)),isSubmitted:je.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:ve?{}:je.keepDirtyValues?je.keepDefaultValues&&a?Cf(i,a):n.dirtyFields:je.keepDefaultValues&&ce?Cf(i,ce):je.keepDirty?n.dirtyFields:{},touchedFields:je.keepTouched?n.touchedFields:{},errors:je.keepErrors?n.errors:{},isSubmitSuccessful:je.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},He=(ce,je)=>$e(ra(ce)?ce(a):ce,je),lt=(ce,je={})=>{const _e=Ke(s,ce),Q=_e&&_e._f;if(Q){const ve=Q.refs?Q.refs[0]:Q.ref;ve.focus&&(ve.focus(),je.shouldSelect&&ra(ve.select)&&ve.select())}},Tt=ce=>{n={...n,...ce}},Ut={control:{register:Ie,unregister:Se,getFieldState:pe,handleSubmit:X,setError:Ne,_subscribe:Ee,_runSchema:I,_getWatch:M,_getDirty:B,_setValid:b,_setFieldArray:N,_setDisabledField:Me,_setErrors:P,_getFieldArray:U,_reset:$e,_resetDefaultValues:()=>ra(t.defaultValues)&&t.defaultValues().then(ce=>{He(ce,t.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:D,_disableForm:ee,_subjects:f,_proxyFormState:h,get _fields(){return s},get _formValues(){return a},get _state(){return o},set _state(ce){o=ce},get _defaultValues(){return i},get _names(){return l},set _names(ce){l=ce},get _formState(){return n},get _options(){return t},set _options(ce){t={...t,...ce}}},subscribe:We,trigger:q,register:Ie,handleSubmit:X,watch:ke,setValue:W,getValues:J,reset:He,resetField:Ce,clearErrors:ye,unregister:Se,setError:Ne,setFocus:lt,getFieldState:pe};return{...Ut,formControl:Ut}}function an(e={}){const t=re.useRef(void 0),n=re.useRef(void 0),[s,i]=re.useState({isDirty:!1,isValidating:!1,isLoading:ra(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:ra(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...e.formControl?e.formControl:Cfe(e),formState:s},e.formControl&&e.defaultValues&&!ra(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));const a=t.current.control;return a._options=e,re.useLayoutEffect(()=>a._subscribe({formState:a._proxyFormState,callback:()=>i({...a._formState}),reRenderRoot:!0}),[a]),re.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),re.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==s.isDirty&&a._subjects.state.next({isDirty:o})}},[a,s.isDirty]),re.useEffect(()=>{e.values&&!wl(e.values,n.current)?(a._reset(e.values,a._options.resetOptions),n.current=e.values,i(o=>({...o}))):a._resetDefaultValues()},[e.values,a]),re.useEffect(()=>{e.errors&&!ls(e.errors)&&a._setErrors(e.errors)},[e.errors,a]),re.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),re.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[e.shouldUnregister,a]),t.current.formState=y9(s,a),t.current}const Or=dfe,k9=j.createContext({}),oe=({...e})=>r.jsx(k9.Provider,{value:{name:e.name},children:r.jsx(ffe,{...e})}),Yb=()=>{const e=j.useContext(k9),t=j.useContext(T9),{getFieldState:n,formState:s}=Zb(),i=n(e.name,s);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:a}=t;return{id:a,name:e.name,formItemId:`${a}-form-item`,formDescriptionId:`${a}-form-item-description`,formMessageId:`${a}-form-item-message`,...i}},T9=j.createContext({}),ae=j.forwardRef(({className:e,...t},n)=>{const s=j.useId();return r.jsx(T9.Provider,{value:{id:s},children:r.jsx("div",{ref:n,className:Ve("space-y-2",e),...t})})});ae.displayName="FormItem";const de=j.forwardRef(({className:e,...t},n)=>{const{error:s,formItemId:i}=Yb();return r.jsx(be,{ref:n,className:Ve(s&&"text-destructive",e),htmlFor:i,...t})});de.displayName="FormLabel";const me=j.forwardRef(({...e},t)=>{const{error:n,formItemId:s,formDescriptionId:i,formMessageId:a}=Yb();return r.jsx(o8,{ref:t,id:s,"aria-describedby":n?`${i} ${a}`:`${i}`,"aria-invalid":!!n,...e})});me.displayName="FormControl";const kfe=j.forwardRef(({className:e,...t},n)=>{const{formDescriptionId:s}=Yb();return r.jsx("p",{ref:n,id:s,className:Ve("text-sm text-muted-foreground",e),...t})});kfe.displayName="FormDescription";const fe=j.forwardRef(({className:e,children:t,...n},s)=>{const{error:i,formMessageId:a}=Yb(),o=i?String((i==null?void 0:i.message)??""):t;return o?r.jsx("p",{ref:s,id:a,className:Ve("text-sm font-medium text-destructive",e),...n,children:o}):null});fe.displayName="FormMessage";const Yt=j.forwardRef(({className:e,...t},n)=>r.jsx("textarea",{className:Ve("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...t}));Yt.displayName="Textarea";const Ir=AT,Ns=ET,Tfe=OT,A9=j.forwardRef(({className:e,...t},n)=>r.jsx(Ng,{ref:n,className:Ve("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));A9.displayName=Ng.displayName;const Tr=j.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(Tfe,{children:[r.jsx(A9,{}),r.jsxs(Sg,{ref:s,className:Ve("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,r.jsxs(Wb,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(Fr,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Tr.displayName=Sg.displayName;const Ar=({className:e,...t})=>r.jsx("div",{className:Ve("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Ar.displayName="DialogHeader";const go=({className:e,...t})=>r.jsx("div",{className:Ve("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});go.displayName="DialogFooter";const Er=j.forwardRef(({className:e,...t},n)=>r.jsx(_g,{ref:n,className:Ve("text-lg font-semibold leading-none tracking-tight",e),...t}));Er.displayName=_g.displayName;const Ss=j.forwardRef(({className:e,...t},n)=>r.jsx(Pg,{ref:n,className:Ve("text-sm text-muted-foreground",e),...t}));Ss.displayName=Pg.displayName;var BT="Avatar",[Afe,FUe]=xn(BT),[Efe,E9]=Afe(BT),O9=j.forwardRef((e,t)=>{const{__scopeAvatar:n,...s}=e,[i,a]=j.useState("idle");return r.jsx(Efe,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:r.jsx(Qe.span,{...s,ref:t})})});O9.displayName=BT;var M9="AvatarImage",D9=j.forwardRef((e,t)=>{const{__scopeAvatar:n,src:s,onLoadingStatusChange:i=()=>{},...a}=e,o=E9(M9,n),l=Ofe(s,a),c=Rr(d=>{i(d),o.onImageLoadingStatusChange(d)});return ln(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?r.jsx(Qe.img,{...a,ref:t,src:s}):null});D9.displayName=M9;var I9="AvatarFallback",L9=j.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:s,...i}=e,a=E9(I9,n),[o,l]=j.useState(s===void 0);return j.useEffect(()=>{if(s!==void 0){const c=window.setTimeout(()=>l(!0),s);return()=>window.clearTimeout(c)}},[s]),o&&a.imageLoadingStatus!=="loaded"?r.jsx(Qe.span,{...i,ref:t}):null});L9.displayName=I9;function zD(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Ofe(e,{referrerPolicy:t,crossOrigin:n}){const s=Dfe(),i=j.useRef(null),a=s?(i.current||(i.current=new window.Image),i.current):null,[o,l]=j.useState(()=>zD(a,e));return ln(()=>{l(zD(a,e))},[a,e]),ln(()=>{const c=m=>()=>{l(m)};if(!a)return;const d=c("loaded"),h=c("error");return a.addEventListener("load",d),a.addEventListener("error",h),t&&(a.referrerPolicy=t),typeof n=="string"&&(a.crossOrigin=n),()=>{a.removeEventListener("load",d),a.removeEventListener("error",h)}},[a,n,t]),o}function Mfe(){return()=>{}}function Dfe(){return j.useSyncExternalStore(Mfe,()=>!0,()=>!1)}var R9=O9,$9=D9,F9=L9;const yo=j.forwardRef(({className:e,...t},n)=>r.jsx(R9,{ref:n,className:Ve("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));yo.displayName=R9.displayName;const Ife=j.forwardRef(({className:e,...t},n)=>r.jsx($9,{ref:n,className:Ve("aspect-square h-full w-full",e),...t}));Ife.displayName=$9.displayName;const jo=j.forwardRef(({className:e,...t},n)=>r.jsx(F9,{ref:n,className:Ve("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));jo.displayName=F9.displayName;const BD=(e,t,n)=>{if(e&&"reportValidity"in e){const s=Ke(n,t);e.setCustomValidity(s&&s.message||""),e.reportValidity()}},z9=(e,t)=>{for(const n in t.fields){const s=t.fields[n];s&&s.ref&&"reportValidity"in s.ref?BD(s.ref,n,e):s.refs&&s.refs.forEach(i=>BD(i,n,e))}},Lfe=(e,t)=>{t.shouldUseNativeValidation&&z9(e,t);const n={};for(const s in e){const i=Ke(t.fields,s),a=Object.assign(e[s]||{},{ref:i&&i.ref});if(Rfe(t.names||Object.keys(e),s)){const o=Object.assign({},Ke(n,s));or(o,"root",a),or(n,s,o)}else or(n,s,a)}return n},Rfe=(e,t)=>e.some(n=>n.startsWith(t+"."));var $fe=function(e,t){for(var n={};e.length;){var s=e[0],i=s.code,a=s.message,o=s.path.join(".");if(!n[o])if("unionErrors"in s){var l=s.unionErrors[0].errors[0];n[o]={message:l.message,type:l.code}}else n[o]={message:a,type:i};if("unionErrors"in s&&s.unionErrors.forEach(function(h){return h.errors.forEach(function(m){return e.push(m)})}),t){var c=n[o].types,d=c&&c[s.code];n[o]=b9(o,t,n,i,d?[].concat(d,s.message):s.message)}e.shift()}return n},on=function(e,t,n){return n===void 0&&(n={}),function(s,i,a){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(e[n.mode==="sync"?"parse":"parseAsync"](s,t)).then(function(d){return a.shouldUseNativeValidation&&z9({},a),{errors:{},values:n.raw?s:d}})}catch(d){return l(d)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:Lfe($fe(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}},Jt;(function(e){e.assertEqual=i=>i;function t(i){}e.assertIs=t;function n(i){throw new Error}e.assertNever=n,e.arrayToEnum=i=>{const a={};for(const o of i)a[o]=o;return a},e.getValidEnumValues=i=>{const a=e.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),o={};for(const l of a)o[l]=i[l];return e.objectValues(o)},e.objectValues=i=>e.objectKeys(i).map(function(a){return i[a]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&a.push(o);return a},e.find=(i,a)=>{for(const o of i)if(a(o))return o},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function s(i,a=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}e.joinValues=s,e.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(Jt||(Jt={}));var x2;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(x2||(x2={}));const et=Jt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),bo=e=>{switch(typeof e){case"undefined":return et.undefined;case"string":return et.string;case"number":return isNaN(e)?et.nan:et.number;case"boolean":return et.boolean;case"function":return et.function;case"bigint":return et.bigint;case"symbol":return et.symbol;case"object":return Array.isArray(e)?et.array:e===null?et.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?et.promise:typeof Map<"u"&&e instanceof Map?et.map:typeof Set<"u"&&e instanceof Set?et.set:typeof Date<"u"&&e instanceof Date?et.date:et.object;default:return et.unknown}},ze=Jt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Ffe=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class Js extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(a){return a.message},s={_errors:[]},i=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)s._errors.push(n(o));else{let l=s,c=0;for(;c<o.path.length;){const d=o.path[c];c===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(n(o))):l[d]=l[d]||{_errors:[]},l=l[d],c++}}};return i(this),s}static assert(t){if(!(t instanceof Js))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Jt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},s=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(t(i))):s.push(t(i));return{formErrors:s,fieldErrors:n}}get formErrors(){return this.flatten()}}Js.create=e=>new Js(e);const qh=(e,t)=>{let n;switch(e.code){case ze.invalid_type:e.received===et.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case ze.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Jt.jsonStringifyReplacer)}`;break;case ze.unrecognized_keys:n=`Unrecognized key(s) in object: ${Jt.joinValues(e.keys,", ")}`;break;case ze.invalid_union:n="Invalid input";break;case ze.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Jt.joinValues(e.options)}`;break;case ze.invalid_enum_value:n=`Invalid enum value. Expected ${Jt.joinValues(e.options)}, received '${e.received}'`;break;case ze.invalid_arguments:n="Invalid function arguments";break;case ze.invalid_return_type:n="Invalid function return type";break;case ze.invalid_date:n="Invalid date";break;case ze.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Jt.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case ze.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case ze.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case ze.custom:n="Invalid input";break;case ze.invalid_intersection_types:n="Intersection results could not be merged";break;case ze.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case ze.not_finite:n="Number must be finite";break;default:n=t.defaultError,Jt.assertNever(e)}return{message:n}};let B9=qh;function zfe(e){B9=e}function $0(){return B9}const F0=e=>{const{data:t,path:n,errorMaps:s,issueData:i}=e,a=[...n,...i.path||[]],o={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let l="";const c=s.filter(d=>!!d).slice().reverse();for(const d of c)l=d(o,{data:t,defaultError:l}).message;return{...i,path:a,message:l}},Bfe=[];function Ge(e,t){const n=$0(),s=F0({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===qh?void 0:qh].filter(i=>!!i)});e.common.issues.push(s)}class ns{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const s=[];for(const i of n){if(i.status==="aborted")return _t;i.status==="dirty"&&t.dirty(),s.push(i.value)}return{status:t.value,value:s}}static async mergeObjectAsync(t,n){const s=[];for(const i of n){const a=await i.key,o=await i.value;s.push({key:a,value:o})}return ns.mergeObjectSync(t,s)}static mergeObjectSync(t,n){const s={};for(const i of n){const{key:a,value:o}=i;if(a.status==="aborted"||o.status==="aborted")return _t;a.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(s[a.value]=o.value)}return{status:t.value,value:s}}}const _t=Object.freeze({status:"aborted"}),Wu=e=>({status:"dirty",value:e}),fs=e=>({status:"valid",value:e}),g2=e=>e.status==="aborted",v2=e=>e.status==="dirty",Hd=e=>e.status==="valid",ix=e=>typeof Promise<"u"&&e instanceof Promise;function z0(e,t,n,s){if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function V9(e,t,n,s,i){if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var ut;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(ut||(ut={}));var Yf,Xf;class Ka{constructor(t,n,s,i){this._cachedPath=[],this.parent=t,this.data=n,this._path=s,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const VD=(e,t)=>{if(Hd(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Js(e.common.issues);return this._error=n,this._error}}};function Mt(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:s,description:i}=e;if(t&&(n||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(o,l)=>{var c,d;const{message:h}=e;return o.code==="invalid_enum_value"?{message:h??l.defaultError}:typeof l.data>"u"?{message:(c=h??s)!==null&&c!==void 0?c:l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:(d=h??n)!==null&&d!==void 0?d:l.defaultError}},description:i}}class Ft{get description(){return this._def.description}_getType(t){return bo(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:bo(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new ns,ctx:{common:t.parent.common,data:t.data,parsedType:bo(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(ix(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const s=this.safeParse(t,n);if(s.success)return s.data;throw s.error}safeParse(t,n){var s;const i={common:{issues:[],async:(s=n==null?void 0:n.async)!==null&&s!==void 0?s:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:bo(t)},a=this._parseSync({data:t,path:i.path,parent:i});return VD(i,a)}"~validate"(t){var n,s;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:bo(t)};if(!this["~standard"].async)try{const a=this._parseSync({data:t,path:[],parent:i});return Hd(a)?{value:a.value}:{issues:i.common.issues}}catch(a){!((s=(n=a==null?void 0:a.message)===null||n===void 0?void 0:n.toLowerCase())===null||s===void 0)&&s.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:i}).then(a=>Hd(a)?{value:a.value}:{issues:i.common.issues})}async parseAsync(t,n){const s=await this.safeParseAsync(t,n);if(s.success)return s.data;throw s.error}async safeParseAsync(t,n){const s={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:bo(t)},i=this._parse({data:t,path:s.path,parent:s}),a=await(ix(i)?i:Promise.resolve(i));return VD(s,a)}refine(t,n){const s=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,a)=>{const o=t(i),l=()=>a.addIssue({code:ze.custom,...s(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(t,n){return this._refinement((s,i)=>t(s)?!0:(i.addIssue(typeof n=="function"?n(s,i):n),!1))}_refinement(t){return new fa({schema:this,typeName:Nt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Fa.create(this,this._def)}nullable(){return pc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return da.create(this)}promise(){return Gh.create(this,this._def)}or(t){return cx.create([this,t],this._def)}and(t){return dx.create(this,t,this._def)}transform(t){return new fa({...Mt(this._def),schema:this,typeName:Nt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new px({...Mt(this._def),innerType:this,defaultValue:n,typeName:Nt.ZodDefault})}brand(){return new VT({typeName:Nt.ZodBranded,type:this,...Mt(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new xx({...Mt(this._def),innerType:this,catchValue:n,typeName:Nt.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return Ag.create(this,t)}readonly(){return gx.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Vfe=/^c[^\s-]{8,}$/i,Ufe=/^[0-9a-z]+$/,Wfe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Hfe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,qfe=/^[a-z0-9_-]{21}$/i,Kfe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Gfe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Zfe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Yfe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let I1;const Xfe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Qfe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Jfe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,epe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,tpe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,rpe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,U9="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",npe=new RegExp(`^${U9}$`);function W9(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function spe(e){return new RegExp(`^${W9(e)}$`)}function H9(e){let t=`${U9}T${W9(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function ipe(e,t){return!!((t==="v4"||!t)&&Xfe.test(e)||(t==="v6"||!t)&&Jfe.test(e))}function ape(e,t){if(!Kfe.test(e))return!1;try{const[n]=e.split("."),s=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(s));return!(typeof i!="object"||i===null||!i.typ||!i.alg||t&&i.alg!==t)}catch{return!1}}function ope(e,t){return!!((t==="v4"||!t)&&Qfe.test(e)||(t==="v6"||!t)&&epe.test(e))}class sa extends Ft{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==et.string){const a=this._getOrReturnCtx(t);return Ge(a,{code:ze.invalid_type,expected:et.string,received:a.parsedType}),_t}const s=new ns;let i;for(const a of this._def.checks)if(a.kind==="min")t.data.length<a.value&&(i=this._getOrReturnCtx(t,i),Ge(i,{code:ze.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),s.dirty());else if(a.kind==="max")t.data.length>a.value&&(i=this._getOrReturnCtx(t,i),Ge(i,{code:ze.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),s.dirty());else if(a.kind==="length"){const o=t.data.length>a.value,l=t.data.length<a.value;(o||l)&&(i=this._getOrReturnCtx(t,i),o?Ge(i,{code:ze.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):l&&Ge(i,{code:ze.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),s.dirty())}else if(a.kind==="email")Zfe.test(t.data)||(i=this._getOrReturnCtx(t,i),Ge(i,{validation:"email",code:ze.invalid_string,message:a.message}),s.dirty());else if(a.kind==="emoji")I1||(I1=new RegExp(Yfe,"u")),I1.test(t.data)||(i=this._getOrReturnCtx(t,i),Ge(i,{validation:"emoji",code:ze.invalid_string,message:a.message}),s.dirty());else if(a.kind==="uuid")Hfe.test(t.data)||(i=this._getOrReturnCtx(t,i),Ge(i,{validation:"uuid",code:ze.invalid_string,message:a.message}),s.dirty());else if(a.kind==="nanoid")qfe.test(t.data)||(i=this._getOrReturnCtx(t,i),Ge(i,{validation:"nanoid",code:ze.invalid_string,message:a.message}),s.dirty());else if(a.kind==="cuid")Vfe.test(t.data)||(i=this._getOrReturnCtx(t,i),Ge(i,{validation:"cuid",code:ze.invalid_string,message:a.message}),s.dirty());else if(a.kind==="cuid2")Ufe.test(t.data)||(i=this._getOrReturnCtx(t,i),Ge(i,{validation:"cuid2",code:ze.invalid_string,message:a.message}),s.dirty());else if(a.kind==="ulid")Wfe.test(t.data)||(i=this._getOrReturnCtx(t,i),Ge(i,{validation:"ulid",code:ze.invalid_string,message:a.message}),s.dirty());else if(a.kind==="url")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),Ge(i,{validation:"url",code:ze.invalid_string,message:a.message}),s.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),Ge(i,{validation:"regex",code:ze.invalid_string,message:a.message}),s.dirty())):a.kind==="trim"?t.data=t.data.trim():a.kind==="includes"?t.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(t,i),Ge(i,{code:ze.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),s.dirty()):a.kind==="toLowerCase"?t.data=t.data.toLowerCase():a.kind==="toUpperCase"?t.data=t.data.toUpperCase():a.kind==="startsWith"?t.data.startsWith(a.value)||(i=this._getOrReturnCtx(t,i),Ge(i,{code:ze.invalid_string,validation:{startsWith:a.value},message:a.message}),s.dirty()):a.kind==="endsWith"?t.data.endsWith(a.value)||(i=this._getOrReturnCtx(t,i),Ge(i,{code:ze.invalid_string,validation:{endsWith:a.value},message:a.message}),s.dirty()):a.kind==="datetime"?H9(a).test(t.data)||(i=this._getOrReturnCtx(t,i),Ge(i,{code:ze.invalid_string,validation:"datetime",message:a.message}),s.dirty()):a.kind==="date"?npe.test(t.data)||(i=this._getOrReturnCtx(t,i),Ge(i,{code:ze.invalid_string,validation:"date",message:a.message}),s.dirty()):a.kind==="time"?spe(a).test(t.data)||(i=this._getOrReturnCtx(t,i),Ge(i,{code:ze.invalid_string,validation:"time",message:a.message}),s.dirty()):a.kind==="duration"?Gfe.test(t.data)||(i=this._getOrReturnCtx(t,i),Ge(i,{validation:"duration",code:ze.invalid_string,message:a.message}),s.dirty()):a.kind==="ip"?ipe(t.data,a.version)||(i=this._getOrReturnCtx(t,i),Ge(i,{validation:"ip",code:ze.invalid_string,message:a.message}),s.dirty()):a.kind==="jwt"?ape(t.data,a.alg)||(i=this._getOrReturnCtx(t,i),Ge(i,{validation:"jwt",code:ze.invalid_string,message:a.message}),s.dirty()):a.kind==="cidr"?ope(t.data,a.version)||(i=this._getOrReturnCtx(t,i),Ge(i,{validation:"cidr",code:ze.invalid_string,message:a.message}),s.dirty()):a.kind==="base64"?tpe.test(t.data)||(i=this._getOrReturnCtx(t,i),Ge(i,{validation:"base64",code:ze.invalid_string,message:a.message}),s.dirty()):a.kind==="base64url"?rpe.test(t.data)||(i=this._getOrReturnCtx(t,i),Ge(i,{validation:"base64url",code:ze.invalid_string,message:a.message}),s.dirty()):Jt.assertNever(a);return{status:s.value,value:t.data}}_regex(t,n,s){return this.refinement(i=>t.test(i),{validation:n,code:ze.invalid_string,...ut.errToObj(s)})}_addCheck(t){return new sa({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...ut.errToObj(t)})}url(t){return this._addCheck({kind:"url",...ut.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...ut.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...ut.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...ut.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...ut.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...ut.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...ut.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...ut.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...ut.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...ut.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...ut.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...ut.errToObj(t)})}datetime(t){var n,s;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(s=t==null?void 0:t.local)!==null&&s!==void 0?s:!1,...ut.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...ut.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...ut.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...ut.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...ut.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...ut.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...ut.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...ut.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...ut.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...ut.errToObj(n)})}nonempty(t){return this.min(1,ut.errToObj(t))}trim(){return new sa({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new sa({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new sa({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}sa.create=e=>{var t;return new sa({checks:[],typeName:Nt.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Mt(e)})};function lpe(e,t){const n=(e.toString().split(".")[1]||"").length,s=(t.toString().split(".")[1]||"").length,i=n>s?n:s,a=parseInt(e.toFixed(i).replace(".","")),o=parseInt(t.toFixed(i).replace(".",""));return a%o/Math.pow(10,i)}class hc extends Ft{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==et.number){const a=this._getOrReturnCtx(t);return Ge(a,{code:ze.invalid_type,expected:et.number,received:a.parsedType}),_t}let s;const i=new ns;for(const a of this._def.checks)a.kind==="int"?Jt.isInteger(t.data)||(s=this._getOrReturnCtx(t,s),Ge(s,{code:ze.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(s=this._getOrReturnCtx(t,s),Ge(s,{code:ze.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(s=this._getOrReturnCtx(t,s),Ge(s,{code:ze.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?lpe(t.data,a.value)!==0&&(s=this._getOrReturnCtx(t,s),Ge(s,{code:ze.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(t.data)||(s=this._getOrReturnCtx(t,s),Ge(s,{code:ze.not_finite,message:a.message}),i.dirty()):Jt.assertNever(a);return{status:i.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,ut.toString(n))}gt(t,n){return this.setLimit("min",t,!1,ut.toString(n))}lte(t,n){return this.setLimit("max",t,!0,ut.toString(n))}lt(t,n){return this.setLimit("max",t,!1,ut.toString(n))}setLimit(t,n,s,i){return new hc({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:s,message:ut.toString(i)}]})}_addCheck(t){return new hc({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:ut.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ut.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ut.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ut.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ut.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:ut.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:ut.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ut.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ut.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Jt.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(n===null||s.value>n)&&(n=s.value):s.kind==="max"&&(t===null||s.value<t)&&(t=s.value)}return Number.isFinite(n)&&Number.isFinite(t)}}hc.create=e=>new hc({checks:[],typeName:Nt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Mt(e)});class mc extends Ft{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==et.bigint)return this._getInvalidInput(t);let s;const i=new ns;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(s=this._getOrReturnCtx(t,s),Ge(s,{code:ze.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(s=this._getOrReturnCtx(t,s),Ge(s,{code:ze.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?t.data%a.value!==BigInt(0)&&(s=this._getOrReturnCtx(t,s),Ge(s,{code:ze.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):Jt.assertNever(a);return{status:i.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return Ge(n,{code:ze.invalid_type,expected:et.bigint,received:n.parsedType}),_t}gte(t,n){return this.setLimit("min",t,!0,ut.toString(n))}gt(t,n){return this.setLimit("min",t,!1,ut.toString(n))}lte(t,n){return this.setLimit("max",t,!0,ut.toString(n))}lt(t,n){return this.setLimit("max",t,!1,ut.toString(n))}setLimit(t,n,s,i){return new mc({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:s,message:ut.toString(i)}]})}_addCheck(t){return new mc({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ut.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ut.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ut.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ut.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:ut.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}mc.create=e=>{var t;return new mc({checks:[],typeName:Nt.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Mt(e)})};class ax extends Ft{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==et.boolean){const s=this._getOrReturnCtx(t);return Ge(s,{code:ze.invalid_type,expected:et.boolean,received:s.parsedType}),_t}return fs(t.data)}}ax.create=e=>new ax({typeName:Nt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Mt(e)});class qd extends Ft{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==et.date){const a=this._getOrReturnCtx(t);return Ge(a,{code:ze.invalid_type,expected:et.date,received:a.parsedType}),_t}if(isNaN(t.data.getTime())){const a=this._getOrReturnCtx(t);return Ge(a,{code:ze.invalid_date}),_t}const s=new ns;let i;for(const a of this._def.checks)a.kind==="min"?t.data.getTime()<a.value&&(i=this._getOrReturnCtx(t,i),Ge(i,{code:ze.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),s.dirty()):a.kind==="max"?t.data.getTime()>a.value&&(i=this._getOrReturnCtx(t,i),Ge(i,{code:ze.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),s.dirty()):Jt.assertNever(a);return{status:s.value,value:new Date(t.data.getTime())}}_addCheck(t){return new qd({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:ut.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:ut.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}qd.create=e=>new qd({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:Nt.ZodDate,...Mt(e)});class B0 extends Ft{_parse(t){if(this._getType(t)!==et.symbol){const s=this._getOrReturnCtx(t);return Ge(s,{code:ze.invalid_type,expected:et.symbol,received:s.parsedType}),_t}return fs(t.data)}}B0.create=e=>new B0({typeName:Nt.ZodSymbol,...Mt(e)});class ox extends Ft{_parse(t){if(this._getType(t)!==et.undefined){const s=this._getOrReturnCtx(t);return Ge(s,{code:ze.invalid_type,expected:et.undefined,received:s.parsedType}),_t}return fs(t.data)}}ox.create=e=>new ox({typeName:Nt.ZodUndefined,...Mt(e)});class lx extends Ft{_parse(t){if(this._getType(t)!==et.null){const s=this._getOrReturnCtx(t);return Ge(s,{code:ze.invalid_type,expected:et.null,received:s.parsedType}),_t}return fs(t.data)}}lx.create=e=>new lx({typeName:Nt.ZodNull,...Mt(e)});class Kh extends Ft{constructor(){super(...arguments),this._any=!0}_parse(t){return fs(t.data)}}Kh.create=e=>new Kh({typeName:Nt.ZodAny,...Mt(e)});class jd extends Ft{constructor(){super(...arguments),this._unknown=!0}_parse(t){return fs(t.data)}}jd.create=e=>new jd({typeName:Nt.ZodUnknown,...Mt(e)});class Zo extends Ft{_parse(t){const n=this._getOrReturnCtx(t);return Ge(n,{code:ze.invalid_type,expected:et.never,received:n.parsedType}),_t}}Zo.create=e=>new Zo({typeName:Nt.ZodNever,...Mt(e)});class V0 extends Ft{_parse(t){if(this._getType(t)!==et.undefined){const s=this._getOrReturnCtx(t);return Ge(s,{code:ze.invalid_type,expected:et.void,received:s.parsedType}),_t}return fs(t.data)}}V0.create=e=>new V0({typeName:Nt.ZodVoid,...Mt(e)});class da extends Ft{_parse(t){const{ctx:n,status:s}=this._processInputParams(t),i=this._def;if(n.parsedType!==et.array)return Ge(n,{code:ze.invalid_type,expected:et.array,received:n.parsedType}),_t;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,l=n.data.length<i.exactLength.value;(o||l)&&(Ge(n,{code:o?ze.too_big:ze.too_small,minimum:l?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),s.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(Ge(n,{code:ze.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),s.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(Ge(n,{code:ze.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),s.dirty()),n.common.async)return Promise.all([...n.data].map((o,l)=>i.type._parseAsync(new Ka(n,o,n.path,l)))).then(o=>ns.mergeArray(s,o));const a=[...n.data].map((o,l)=>i.type._parseSync(new Ka(n,o,n.path,l)));return ns.mergeArray(s,a)}get element(){return this._def.type}min(t,n){return new da({...this._def,minLength:{value:t,message:ut.toString(n)}})}max(t,n){return new da({...this._def,maxLength:{value:t,message:ut.toString(n)}})}length(t,n){return new da({...this._def,exactLength:{value:t,message:ut.toString(n)}})}nonempty(t){return this.min(1,t)}}da.create=(e,t)=>new da({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Nt.ZodArray,...Mt(t)});function Eu(e){if(e instanceof Br){const t={};for(const n in e.shape){const s=e.shape[n];t[n]=Fa.create(Eu(s))}return new Br({...e._def,shape:()=>t})}else return e instanceof da?new da({...e._def,type:Eu(e.element)}):e instanceof Fa?Fa.create(Eu(e.unwrap())):e instanceof pc?pc.create(Eu(e.unwrap())):e instanceof Ga?Ga.create(e.items.map(t=>Eu(t))):e}class Br extends Ft{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=Jt.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==et.object){const d=this._getOrReturnCtx(t);return Ge(d,{code:ze.invalid_type,expected:et.object,received:d.parsedType}),_t}const{status:s,ctx:i}=this._processInputParams(t),{shape:a,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Zo&&this._def.unknownKeys==="strip"))for(const d in i.data)o.includes(d)||l.push(d);const c=[];for(const d of o){const h=a[d],m=i.data[d];c.push({key:{status:"valid",value:d},value:h._parse(new Ka(i,m,i.path,d)),alwaysSet:d in i.data})}if(this._def.catchall instanceof Zo){const d=this._def.unknownKeys;if(d==="passthrough")for(const h of l)c.push({key:{status:"valid",value:h},value:{status:"valid",value:i.data[h]}});else if(d==="strict")l.length>0&&(Ge(i,{code:ze.unrecognized_keys,keys:l}),s.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const h of l){const m=i.data[h];c.push({key:{status:"valid",value:h},value:d._parse(new Ka(i,m,i.path,h)),alwaysSet:h in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const d=[];for(const h of c){const m=await h.key,f=await h.value;d.push({key:m,value:f,alwaysSet:h.alwaysSet})}return d}).then(d=>ns.mergeObjectSync(s,d)):ns.mergeObjectSync(s,c)}get shape(){return this._def.shape()}strict(t){return ut.errToObj,new Br({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,s)=>{var i,a,o,l;const c=(o=(a=(i=this._def).errorMap)===null||a===void 0?void 0:a.call(i,n,s).message)!==null&&o!==void 0?o:s.defaultError;return n.code==="unrecognized_keys"?{message:(l=ut.errToObj(t).message)!==null&&l!==void 0?l:c}:{message:c}}}:{}})}strip(){return new Br({...this._def,unknownKeys:"strip"})}passthrough(){return new Br({...this._def,unknownKeys:"passthrough"})}extend(t){return new Br({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Br({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Nt.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new Br({...this._def,catchall:t})}pick(t){const n={};return Jt.objectKeys(t).forEach(s=>{t[s]&&this.shape[s]&&(n[s]=this.shape[s])}),new Br({...this._def,shape:()=>n})}omit(t){const n={};return Jt.objectKeys(this.shape).forEach(s=>{t[s]||(n[s]=this.shape[s])}),new Br({...this._def,shape:()=>n})}deepPartial(){return Eu(this)}partial(t){const n={};return Jt.objectKeys(this.shape).forEach(s=>{const i=this.shape[s];t&&!t[s]?n[s]=i:n[s]=i.optional()}),new Br({...this._def,shape:()=>n})}required(t){const n={};return Jt.objectKeys(this.shape).forEach(s=>{if(t&&!t[s])n[s]=this.shape[s];else{let a=this.shape[s];for(;a instanceof Fa;)a=a._def.innerType;n[s]=a}}),new Br({...this._def,shape:()=>n})}keyof(){return q9(Jt.objectKeys(this.shape))}}Br.create=(e,t)=>new Br({shape:()=>e,unknownKeys:"strip",catchall:Zo.create(),typeName:Nt.ZodObject,...Mt(t)});Br.strictCreate=(e,t)=>new Br({shape:()=>e,unknownKeys:"strict",catchall:Zo.create(),typeName:Nt.ZodObject,...Mt(t)});Br.lazycreate=(e,t)=>new Br({shape:e,unknownKeys:"strip",catchall:Zo.create(),typeName:Nt.ZodObject,...Mt(t)});class cx extends Ft{_parse(t){const{ctx:n}=this._processInputParams(t),s=this._def.options;function i(a){for(const l of a)if(l.result.status==="valid")return l.result;for(const l of a)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const o=a.map(l=>new Js(l.ctx.common.issues));return Ge(n,{code:ze.invalid_union,unionErrors:o}),_t}if(n.common.async)return Promise.all(s.map(async a=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let a;const o=[];for(const c of s){const d={...n,common:{...n.common,issues:[]},parent:null},h=c._parseSync({data:n.data,path:n.path,parent:d});if(h.status==="valid")return h;h.status==="dirty"&&!a&&(a={result:h,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const l=o.map(c=>new Js(c));return Ge(n,{code:ze.invalid_union,unionErrors:l}),_t}}get options(){return this._def.options}}cx.create=(e,t)=>new cx({options:e,typeName:Nt.ZodUnion,...Mt(t)});const fo=e=>e instanceof hx?fo(e.schema):e instanceof fa?fo(e.innerType()):e instanceof mx?[e.value]:e instanceof fc?e.options:e instanceof fx?Jt.objectValues(e.enum):e instanceof px?fo(e._def.innerType):e instanceof ox?[void 0]:e instanceof lx?[null]:e instanceof Fa?[void 0,...fo(e.unwrap())]:e instanceof pc?[null,...fo(e.unwrap())]:e instanceof VT||e instanceof gx?fo(e.unwrap()):e instanceof xx?fo(e._def.innerType):[];class Xb extends Ft{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==et.object)return Ge(n,{code:ze.invalid_type,expected:et.object,received:n.parsedType}),_t;const s=this.discriminator,i=n.data[s],a=this.optionsMap.get(i);return a?n.common.async?a._parseAsync({data:n.data,path:n.path,parent:n}):a._parseSync({data:n.data,path:n.path,parent:n}):(Ge(n,{code:ze.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),_t)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,s){const i=new Map;for(const a of n){const o=fo(a.shape[t]);if(!o.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const l of o){if(i.has(l))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(l)}`);i.set(l,a)}}return new Xb({typeName:Nt.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:i,...Mt(s)})}}function y2(e,t){const n=bo(e),s=bo(t);if(e===t)return{valid:!0,data:e};if(n===et.object&&s===et.object){const i=Jt.objectKeys(t),a=Jt.objectKeys(e).filter(l=>i.indexOf(l)!==-1),o={...e,...t};for(const l of a){const c=y2(e[l],t[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(n===et.array&&s===et.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let a=0;a<e.length;a++){const o=e[a],l=t[a],c=y2(o,l);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return n===et.date&&s===et.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class dx extends Ft{_parse(t){const{status:n,ctx:s}=this._processInputParams(t),i=(a,o)=>{if(g2(a)||g2(o))return _t;const l=y2(a.value,o.value);return l.valid?((v2(a)||v2(o))&&n.dirty(),{status:n.value,value:l.data}):(Ge(s,{code:ze.invalid_intersection_types}),_t)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([a,o])=>i(a,o)):i(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}dx.create=(e,t,n)=>new dx({left:e,right:t,typeName:Nt.ZodIntersection,...Mt(n)});class Ga extends Ft{_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==et.array)return Ge(s,{code:ze.invalid_type,expected:et.array,received:s.parsedType}),_t;if(s.data.length<this._def.items.length)return Ge(s,{code:ze.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),_t;!this._def.rest&&s.data.length>this._def.items.length&&(Ge(s,{code:ze.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...s.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new Ka(s,o,s.path,l)):null}).filter(o=>!!o);return s.common.async?Promise.all(a).then(o=>ns.mergeArray(n,o)):ns.mergeArray(n,a)}get items(){return this._def.items}rest(t){return new Ga({...this._def,rest:t})}}Ga.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ga({items:e,typeName:Nt.ZodTuple,rest:null,...Mt(t)})};class ux extends Ft{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==et.object)return Ge(s,{code:ze.invalid_type,expected:et.object,received:s.parsedType}),_t;const i=[],a=this._def.keyType,o=this._def.valueType;for(const l in s.data)i.push({key:a._parse(new Ka(s,l,s.path,l)),value:o._parse(new Ka(s,s.data[l],s.path,l)),alwaysSet:l in s.data});return s.common.async?ns.mergeObjectAsync(n,i):ns.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(t,n,s){return n instanceof Ft?new ux({keyType:t,valueType:n,typeName:Nt.ZodRecord,...Mt(s)}):new ux({keyType:sa.create(),valueType:t,typeName:Nt.ZodRecord,...Mt(n)})}}class U0 extends Ft{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==et.map)return Ge(s,{code:ze.invalid_type,expected:et.map,received:s.parsedType}),_t;const i=this._def.keyType,a=this._def.valueType,o=[...s.data.entries()].map(([l,c],d)=>({key:i._parse(new Ka(s,l,s.path,[d,"key"])),value:a._parse(new Ka(s,c,s.path,[d,"value"]))}));if(s.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const d=await c.key,h=await c.value;if(d.status==="aborted"||h.status==="aborted")return _t;(d.status==="dirty"||h.status==="dirty")&&n.dirty(),l.set(d.value,h.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const c of o){const d=c.key,h=c.value;if(d.status==="aborted"||h.status==="aborted")return _t;(d.status==="dirty"||h.status==="dirty")&&n.dirty(),l.set(d.value,h.value)}return{status:n.value,value:l}}}}U0.create=(e,t,n)=>new U0({valueType:t,keyType:e,typeName:Nt.ZodMap,...Mt(n)});class Kd extends Ft{_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==et.set)return Ge(s,{code:ze.invalid_type,expected:et.set,received:s.parsedType}),_t;const i=this._def;i.minSize!==null&&s.data.size<i.minSize.value&&(Ge(s,{code:ze.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&s.data.size>i.maxSize.value&&(Ge(s,{code:ze.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const a=this._def.valueType;function o(c){const d=new Set;for(const h of c){if(h.status==="aborted")return _t;h.status==="dirty"&&n.dirty(),d.add(h.value)}return{status:n.value,value:d}}const l=[...s.data.values()].map((c,d)=>a._parse(new Ka(s,c,s.path,d)));return s.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(t,n){return new Kd({...this._def,minSize:{value:t,message:ut.toString(n)}})}max(t,n){return new Kd({...this._def,maxSize:{value:t,message:ut.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}Kd.create=(e,t)=>new Kd({valueType:e,minSize:null,maxSize:null,typeName:Nt.ZodSet,...Mt(t)});class hh extends Ft{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==et.function)return Ge(n,{code:ze.invalid_type,expected:et.function,received:n.parsedType}),_t;function s(l,c){return F0({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,$0(),qh].filter(d=>!!d),issueData:{code:ze.invalid_arguments,argumentsError:c}})}function i(l,c){return F0({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,$0(),qh].filter(d=>!!d),issueData:{code:ze.invalid_return_type,returnTypeError:c}})}const a={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Gh){const l=this;return fs(async function(...c){const d=new Js([]),h=await l._def.args.parseAsync(c,a).catch(g=>{throw d.addIssue(s(c,g)),d}),m=await Reflect.apply(o,this,h);return await l._def.returns._def.type.parseAsync(m,a).catch(g=>{throw d.addIssue(i(m,g)),d})})}else{const l=this;return fs(function(...c){const d=l._def.args.safeParse(c,a);if(!d.success)throw new Js([s(c,d.error)]);const h=Reflect.apply(o,this,d.data),m=l._def.returns.safeParse(h,a);if(!m.success)throw new Js([i(h,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new hh({...this._def,args:Ga.create(t).rest(jd.create())})}returns(t){return new hh({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,s){return new hh({args:t||Ga.create([]).rest(jd.create()),returns:n||jd.create(),typeName:Nt.ZodFunction,...Mt(s)})}}class hx extends Ft{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}hx.create=(e,t)=>new hx({getter:e,typeName:Nt.ZodLazy,...Mt(t)});class mx extends Ft{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return Ge(n,{received:n.data,code:ze.invalid_literal,expected:this._def.value}),_t}return{status:"valid",value:t.data}}get value(){return this._def.value}}mx.create=(e,t)=>new mx({value:e,typeName:Nt.ZodLiteral,...Mt(t)});function q9(e,t){return new fc({values:e,typeName:Nt.ZodEnum,...Mt(t)})}class fc extends Ft{constructor(){super(...arguments),Yf.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),s=this._def.values;return Ge(n,{expected:Jt.joinValues(s),received:n.parsedType,code:ze.invalid_type}),_t}if(z0(this,Yf)||V9(this,Yf,new Set(this._def.values)),!z0(this,Yf).has(t.data)){const n=this._getOrReturnCtx(t),s=this._def.values;return Ge(n,{received:n.data,code:ze.invalid_enum_value,options:s}),_t}return fs(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return fc.create(t,{...this._def,...n})}exclude(t,n=this._def){return fc.create(this.options.filter(s=>!t.includes(s)),{...this._def,...n})}}Yf=new WeakMap;fc.create=q9;class fx extends Ft{constructor(){super(...arguments),Xf.set(this,void 0)}_parse(t){const n=Jt.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(t);if(s.parsedType!==et.string&&s.parsedType!==et.number){const i=Jt.objectValues(n);return Ge(s,{expected:Jt.joinValues(i),received:s.parsedType,code:ze.invalid_type}),_t}if(z0(this,Xf)||V9(this,Xf,new Set(Jt.getValidEnumValues(this._def.values))),!z0(this,Xf).has(t.data)){const i=Jt.objectValues(n);return Ge(s,{received:s.data,code:ze.invalid_enum_value,options:i}),_t}return fs(t.data)}get enum(){return this._def.values}}Xf=new WeakMap;fx.create=(e,t)=>new fx({values:e,typeName:Nt.ZodNativeEnum,...Mt(t)});class Gh extends Ft{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==et.promise&&n.common.async===!1)return Ge(n,{code:ze.invalid_type,expected:et.promise,received:n.parsedType}),_t;const s=n.parsedType===et.promise?n.data:Promise.resolve(n.data);return fs(s.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Gh.create=(e,t)=>new Gh({type:e,typeName:Nt.ZodPromise,...Mt(t)});class fa extends Ft{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Nt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:s}=this._processInputParams(t),i=this._def.effect||null,a={addIssue:o=>{Ge(s,o),o.fatal?n.abort():n.dirty()},get path(){return s.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const o=i.transform(s.data,a);if(s.common.async)return Promise.resolve(o).then(async l=>{if(n.value==="aborted")return _t;const c=await this._def.schema._parseAsync({data:l,path:s.path,parent:s});return c.status==="aborted"?_t:c.status==="dirty"||n.value==="dirty"?Wu(c.value):c});{if(n.value==="aborted")return _t;const l=this._def.schema._parseSync({data:o,path:s.path,parent:s});return l.status==="aborted"?_t:l.status==="dirty"||n.value==="dirty"?Wu(l.value):l}}if(i.type==="refinement"){const o=l=>{const c=i.refinement(l,a);if(s.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(s.common.async===!1){const l=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return l.status==="aborted"?_t:(l.status==="dirty"&&n.dirty(),o(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(l=>l.status==="aborted"?_t:(l.status==="dirty"&&n.dirty(),o(l.value).then(()=>({status:n.value,value:l.value}))))}if(i.type==="transform")if(s.common.async===!1){const o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!Hd(o))return o;const l=i.transform(o.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>Hd(o)?Promise.resolve(i.transform(o.value,a)).then(l=>({status:n.value,value:l})):o);Jt.assertNever(i)}}fa.create=(e,t,n)=>new fa({schema:e,typeName:Nt.ZodEffects,effect:t,...Mt(n)});fa.createWithPreprocess=(e,t,n)=>new fa({schema:t,effect:{type:"preprocess",transform:e},typeName:Nt.ZodEffects,...Mt(n)});class Fa extends Ft{_parse(t){return this._getType(t)===et.undefined?fs(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Fa.create=(e,t)=>new Fa({innerType:e,typeName:Nt.ZodOptional,...Mt(t)});class pc extends Ft{_parse(t){return this._getType(t)===et.null?fs(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}pc.create=(e,t)=>new pc({innerType:e,typeName:Nt.ZodNullable,...Mt(t)});class px extends Ft{_parse(t){const{ctx:n}=this._processInputParams(t);let s=n.data;return n.parsedType===et.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}px.create=(e,t)=>new px({innerType:e,typeName:Nt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Mt(t)});class xx extends Ft{_parse(t){const{ctx:n}=this._processInputParams(t),s={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return ix(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Js(s.common.issues)},input:s.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Js(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}xx.create=(e,t)=>new xx({innerType:e,typeName:Nt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Mt(t)});class W0 extends Ft{_parse(t){if(this._getType(t)!==et.nan){const s=this._getOrReturnCtx(t);return Ge(s,{code:ze.invalid_type,expected:et.nan,received:s.parsedType}),_t}return{status:"valid",value:t.data}}}W0.create=e=>new W0({typeName:Nt.ZodNaN,...Mt(e)});const cpe=Symbol("zod_brand");class VT extends Ft{_parse(t){const{ctx:n}=this._processInputParams(t),s=n.data;return this._def.type._parse({data:s,path:n.path,parent:n})}unwrap(){return this._def.type}}class Ag extends Ft{_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return a.status==="aborted"?_t:a.status==="dirty"?(n.dirty(),Wu(a.value)):this._def.out._parseAsync({data:a.value,path:s.path,parent:s})})();{const i=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?_t:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:s.path,parent:s})}}static create(t,n){return new Ag({in:t,out:n,typeName:Nt.ZodPipeline})}}class gx extends Ft{_parse(t){const n=this._def.innerType._parse(t),s=i=>(Hd(i)&&(i.value=Object.freeze(i.value)),i);return ix(n)?n.then(i=>s(i)):s(n)}unwrap(){return this._def.innerType}}gx.create=(e,t)=>new gx({innerType:e,typeName:Nt.ZodReadonly,...Mt(t)});function UD(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function K9(e,t={},n){return e?Kh.create().superRefine((s,i)=>{var a,o;const l=e(s);if(l instanceof Promise)return l.then(c=>{var d,h;if(!c){const m=UD(t,s),f=(h=(d=m.fatal)!==null&&d!==void 0?d:n)!==null&&h!==void 0?h:!0;i.addIssue({code:"custom",...m,fatal:f})}});if(!l){const c=UD(t,s),d=(o=(a=c.fatal)!==null&&a!==void 0?a:n)!==null&&o!==void 0?o:!0;i.addIssue({code:"custom",...c,fatal:d})}}):Kh.create()}const dpe={object:Br.lazycreate};var Nt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Nt||(Nt={}));const upe=(e,t={message:`Input not instance of ${e.name}`})=>K9(n=>n instanceof e,t),G9=sa.create,Z9=hc.create,hpe=W0.create,mpe=mc.create,Y9=ax.create,fpe=qd.create,ppe=B0.create,xpe=ox.create,gpe=lx.create,vpe=Kh.create,ype=jd.create,jpe=Zo.create,bpe=V0.create,wpe=da.create,Npe=Br.create,Spe=Br.strictCreate,_pe=cx.create,Ppe=Xb.create,Cpe=dx.create,kpe=Ga.create,Tpe=ux.create,Ape=U0.create,Epe=Kd.create,Ope=hh.create,Mpe=hx.create,Dpe=mx.create,Ipe=fc.create,Lpe=fx.create,Rpe=Gh.create,WD=fa.create,$pe=Fa.create,Fpe=pc.create,zpe=fa.createWithPreprocess,Bpe=Ag.create,Vpe=()=>G9().optional(),Upe=()=>Z9().optional(),Wpe=()=>Y9().optional(),Hpe={string:e=>sa.create({...e,coerce:!0}),number:e=>hc.create({...e,coerce:!0}),boolean:e=>ax.create({...e,coerce:!0}),bigint:e=>mc.create({...e,coerce:!0}),date:e=>qd.create({...e,coerce:!0})},qpe=_t;var te=Object.freeze({__proto__:null,defaultErrorMap:qh,setErrorMap:zfe,getErrorMap:$0,makeIssue:F0,EMPTY_PATH:Bfe,addIssueToContext:Ge,ParseStatus:ns,INVALID:_t,DIRTY:Wu,OK:fs,isAborted:g2,isDirty:v2,isValid:Hd,isAsync:ix,get util(){return Jt},get objectUtil(){return x2},ZodParsedType:et,getParsedType:bo,ZodType:Ft,datetimeRegex:H9,ZodString:sa,ZodNumber:hc,ZodBigInt:mc,ZodBoolean:ax,ZodDate:qd,ZodSymbol:B0,ZodUndefined:ox,ZodNull:lx,ZodAny:Kh,ZodUnknown:jd,ZodNever:Zo,ZodVoid:V0,ZodArray:da,ZodObject:Br,ZodUnion:cx,ZodDiscriminatedUnion:Xb,ZodIntersection:dx,ZodTuple:Ga,ZodRecord:ux,ZodMap:U0,ZodSet:Kd,ZodFunction:hh,ZodLazy:hx,ZodLiteral:mx,ZodEnum:fc,ZodNativeEnum:fx,ZodPromise:Gh,ZodEffects:fa,ZodTransformer:fa,ZodOptional:Fa,ZodNullable:pc,ZodDefault:px,ZodCatch:xx,ZodNaN:W0,BRAND:cpe,ZodBranded:VT,ZodPipeline:Ag,ZodReadonly:gx,custom:K9,Schema:Ft,ZodSchema:Ft,late:dpe,get ZodFirstPartyTypeKind(){return Nt},coerce:Hpe,any:vpe,array:wpe,bigint:mpe,boolean:Y9,date:fpe,discriminatedUnion:Ppe,effect:WD,enum:Ipe,function:Ope,instanceof:upe,intersection:Cpe,lazy:Mpe,literal:Dpe,map:Ape,nan:hpe,nativeEnum:Lpe,never:jpe,null:gpe,nullable:Fpe,number:Z9,object:Npe,oboolean:Wpe,onumber:Upe,optional:$pe,ostring:Vpe,pipeline:Bpe,preprocess:zpe,promise:Rpe,record:Tpe,set:Epe,strictObject:Spe,string:G9,symbol:ppe,transformer:WD,tuple:kpe,undefined:xpe,union:_pe,unknown:ype,void:bpe,NEVER:qpe,ZodIssueCode:ze,quotelessJson:Ffe,ZodError:Js});const Kpe=te.object({rating:te.number().min(1).max(5),title:te.string().optional(),comment:te.string().optional()});function Gpe({storeId:e,currentUserId:t}){const[n,s]=j.useState(!1),[i,a]=j.useState(0),[o,l]=j.useState(!1),{toast:c}=ft(),d=pn(),h=an({resolver:on(Kpe),defaultValues:{rating:0,title:"",comment:""}}),{data:m,isLoading:f}=Re({queryKey:["/api/stores",e,"reviews"],queryFn:async()=>await(await Bt(`/api/stores/${e}/reviews`)).json()}),g=Array.isArray(m)?m:[],x=g.sort((k,O)=>new Date(O.createdAt).getTime()-new Date(k.createdAt).getTime()),p=o?x:x.slice(0,2),y=pt({mutationFn:k=>Bt("/api/store-reviews",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)}),onSuccess:()=>{c({title:"Review submitted successfully",description:"Thank you for your feedback!"}),s(!1),h.reset(),a(0),d.invalidateQueries({queryKey:["/api/stores",e,"reviews"]}),d.invalidateQueries({queryKey:["/api/stores"]}),d.invalidateQueries({queryKey:[`/api/stores/${e}`]}),d.removeQueries({queryKey:["/api/stores"]}),d.removeQueries({queryKey:[`/api/stores/${e}`]}),setTimeout(()=>{d.refetchQueries({queryKey:["/api/stores"]}),d.refetchQueries({queryKey:[`/api/stores/${e}`]}),d.refetchQueries({queryKey:["/api/stores",e,"reviews"]})},1e3)},onError:k=>{var I;const O=(I=k.message)==null?void 0:I.includes("already reviewed");c({title:O?"Review Already Submitted":"Error submitting review",description:O?"You have already reviewed this store. You can only submit one review per store.":k.message||"Failed to submit your review. Please try again.",variant:O?"default":"destructive"})}}),b=pt({mutationFn:k=>Bt(`/api/store-reviews/${k}/helpful`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t||9})}),onSuccess:()=>{c({title:"Thank you for your feedback",description:"Review marked as helpful!"}),d.invalidateQueries({queryKey:["/api/stores",e,"reviews"]})},onError:k=>{c({title:"Error",description:k.message||"Failed to mark review as helpful.",variant:"destructive"})}}),w=k=>{console.log("Form data being submitted:",k);const O={...k,rating:i||k.rating,storeId:e,customerId:t||9};console.log("Review data with store info:",O),y.mutate(O)},N=k=>{a(k),h.setValue("rating",k)},S=k=>{b.mutate(k)},P=g&&g.length>0?g.reduce((k,O)=>k+(O.rating||0),0)/g.length:0,C=[5,4,3,2,1].map(k=>{const I=(g?g.filter(E=>E.rating===k):[]).length,T=g&&g.length>0?I/g.length*100:0;return{rating:k,count:I,percentage:T}});return f?r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-48 mb-4"}),r.jsx("div",{className:"space-y-3",children:[1,2,3].map(k=>r.jsx("div",{className:"h-32 bg-gray-200 rounded"},k))})]})}):r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[r.jsxs("div",{className:"border-b border-gray-200 p-3 flex items-center justify-between",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Ratings & Reviews"}),r.jsxs(Ir,{open:n,onOpenChange:s,children:[r.jsx(Ns,{asChild:!0,children:r.jsx(F,{size:"sm",className:"bg-orange-500 hover:bg-orange-600 text-white px-4","data-rate-store":!0,children:"Write Review"})}),r.jsxs(Tr,{className:"sm:max-w-[500px]",children:[r.jsx(Ar,{children:r.jsx(Er,{className:"text-xl",children:"Rate This Store"})}),r.jsx(Or,{...h,children:r.jsxs("form",{onSubmit:h.handleSubmit(w),className:"space-y-6",children:[r.jsx(oe,{control:h.control,name:"rating",render:({field:k})=>r.jsxs(ae,{children:[r.jsx(de,{className:"text-base font-medium",children:"How would you rate this store?"}),r.jsx(me,{children:r.jsxs("div",{className:"flex items-center space-x-2 py-2",children:[[1,2,3,4,5].map(O=>r.jsx("button",{type:"button",onClick:()=>N(O),className:"focus:outline-none transition-transform hover:scale-110",children:r.jsx($t,{className:`w-10 h-10 ${O<=i?"fill-orange-400 text-orange-400":"text-gray-300 hover:text-orange-300"}`})},O)),i>0&&r.jsx("span",{className:"ml-3 text-sm text-gray-600 font-medium",children:i===5?"Excellent!":i===4?"Very Good":i===3?"Good":i===2?"Fair":"Poor"})]})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:h.control,name:"title",render:({field:k})=>r.jsxs(ae,{children:[r.jsx(de,{className:"text-base font-medium",children:"Review Title"}),r.jsx(me,{children:r.jsx(he,{placeholder:"Summarize your experience in one line",className:"h-12",...k})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:h.control,name:"comment",render:({field:k})=>r.jsxs(ae,{children:[r.jsx(de,{className:"text-base font-medium",children:"Your Review"}),r.jsx(me,{children:r.jsx(Yt,{placeholder:"Tell others about your experience with this store...",className:"min-h-[120px] resize-none",...k})}),r.jsx(fe,{})]})}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx(F,{type:"button",variant:"outline",className:"px-6",onClick:()=>s(!1),children:"Cancel"}),r.jsx(F,{type:"submit",className:"bg-orange-500 hover:bg-orange-600 px-6",disabled:y.isPending||i===0,children:y.isPending?"Publishing...":"Publish Review"})]})]})})]})]})]}),r.jsx("div",{className:"p-4",children:r.jsxs("div",{className:"flex items-center space-x-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-green-600 mb-1",children:P.toFixed(1)}),r.jsx("div",{className:"flex items-center justify-center mb-1",children:[1,2,3,4,5].map(k=>r.jsx($t,{className:`w-4 h-4 ${k<=Math.round(P)?"fill-green-500 text-green-500":"text-gray-300"}`},k))}),r.jsxs("p",{className:"text-sm text-gray-600 font-medium",children:[g.length," Reviews"]})]}),r.jsx("div",{className:"flex-1",children:r.jsx("div",{className:"space-y-2",children:C.map(({rating:k,count:O,percentage:I})=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("span",{className:"text-xs font-medium text-gray-700 w-6",children:[k," "]}),r.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${I}%`}})}),r.jsx("span",{className:"text-xs text-gray-600 w-6 text-right",children:O}),r.jsxs("span",{className:"text-xs text-gray-500 w-10 text-right",children:["(",I.toFixed(0),"%)"]})]},k))})})]})})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[r.jsx("div",{className:"border-b border-gray-200 p-3",children:r.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Customer Reviews"})}),r.jsx("div",{className:"divide-y divide-gray-200",children:!g||g.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[r.jsx(L8,{className:"w-12 h-12 text-gray-300 mb-3"}),r.jsx("h3",{className:"text-base font-medium text-gray-500 mb-1",children:"No reviews yet"}),r.jsx("p",{className:"text-sm text-gray-400 text-center max-w-sm",children:"Be the first to share your experience"})]}):r.jsxs(r.Fragment,{children:[p.map(k=>{var O,I,T,E,D,B,M,U;return r.jsxs("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(yo,{className:"w-8 h-8",children:r.jsx(jo,{className:"bg-orange-100 text-orange-600 font-medium text-sm",children:((T=(I=(O=k.customer)==null?void 0:O.fullName)==null?void 0:I.charAt(0))==null?void 0:T.toUpperCase())||((B=(D=(E=k.customer)==null?void 0:E.username)==null?void 0:D.charAt(0))==null?void 0:B.toUpperCase())||"U"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:((M=k.customer)==null?void 0:M.fullName)||((U=k.customer)==null?void 0:U.username)||"Anonymous"}),r.jsxs("div",{className:"flex items-center space-x-2 mt-0.5",children:[r.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(H=>r.jsx($t,{className:`w-3 h-3 ${H<=k.rating?"fill-orange-400 text-orange-400":"text-gray-300"}`},H))}),r.jsx("span",{className:"text-xs text-gray-500",children:new Date(k.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})]})]})]}),k.isVerifiedPurchase&&r.jsxs(le,{variant:"secondary",className:"bg-green-50 text-green-700 border-green-200 text-xs",children:[r.jsx(qp,{className:"w-3 h-3 mr-1"}),"Verified"]})]}),r.jsxs("div",{className:"space-y-2",children:[k.title&&r.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:k.title}),k.comment&&r.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:k.comment})]}),r.jsxs("div",{className:"flex items-center justify-between mt-3 pt-2 border-t border-gray-100",children:[r.jsxs("button",{onClick:()=>S(k.id),disabled:b.isPending,className:"flex items-center space-x-1 text-xs text-gray-600 hover:text-orange-600 transition-colors disabled:opacity-50",children:[r.jsx(F8,{className:"w-3 h-3"}),r.jsx("span",{children:"Helpful"}),k.helpfulCount>0&&r.jsx("span",{className:"bg-gray-100 text-gray-700 px-1.5 py-0.5 rounded-full text-xs",children:k.helpfulCount})]}),r.jsx("div",{className:"text-xs text-gray-400",children:r.jsx("span",{children:"Was this helpful?"})})]})]},k.id)}),g.length>2&&r.jsx("div",{className:"p-3 bg-gray-50 border-t border-gray-200",children:r.jsx("div",{className:"text-center",children:r.jsx(F,{variant:"outline",size:"sm",onClick:()=>l(!o),className:"px-4 py-1 border-orange-200 text-orange-600 hover:bg-orange-50 hover:border-orange-300 text-sm",children:o?r.jsx(r.Fragment,{children:"Show Less"}):r.jsxs(r.Fragment,{children:["View All ",g.length," Reviews"]})})})})]})})]})]})}function HD(){const{id:e}=Cm(),{data:t,isLoading:n}=Re({queryKey:[`/api/stores/${e}`],enabled:!!e}),{data:s=[],isLoading:i}=Re({queryKey:[`/api/products/store/${e}`],enabled:!!e});return n?r.jsx("div",{className:"min-h-screen bg-muted flex items-center justify-center",children:r.jsx("div",{children:"Loading store..."})}):t?r.jsx("div",{className:"min-h-screen bg-muted",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[r.jsx("div",{className:"w-full h-48 md:h-64 bg-gray-200 rounded-lg mb-6 overflow-hidden",children:r.jsx("img",{src:t.coverImage||(t.storeType==="restaurant"?"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800&h=400&fit=crop&crop=center":"https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=800&h=400&fit=crop&crop=center"),alt:`${t.name} cover`,className:"w-full h-full object-cover",onError:a=>{a.currentTarget.src=t.storeType==="restaurant"?"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800&h=400&fit=crop&crop=center":"https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=800&h=400&fit=crop&crop=center"}})}),r.jsx(G,{className:"mb-8",children:r.jsx(Z,{className:"p-6",children:r.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center space-y-4 md:space-y-0 md:space-x-6",children:[r.jsx("div",{className:"w-32 h-32 bg-gray-200 rounded-lg flex items-center justify-center overflow-hidden flex-shrink-0",children:r.jsx("img",{src:t.logo||"https://images.unsplash.com/photo-1560472355-536de3962603?w=400&h=400&fit=crop&crop=center",alt:t.name,className:"w-full h-full object-cover",onError:a=>{a.currentTarget.src="https://images.unsplash.com/photo-1560472355-536de3962603?w=400&h=400&fit=crop&crop=center"}})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:t.name}),r.jsxs("div",{className:"flex items-center mb-3",children:[r.jsx("div",{className:"flex text-yellow-400 mr-2",children:Array.from({length:5}).map((a,o)=>r.jsx($t,{className:`h-4 w-4 ${o<Math.floor(Number(t.rating))?"fill-current":""}`},o))}),r.jsxs("span",{className:"text-muted-foreground",children:[t.rating," (",t.totalReviews," reviews)"]}),r.jsx(le,{variant:"secondary",className:"ml-3",children:t.isActive?"Open":"Closed"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm text-muted-foreground mb-4",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Le,{className:"h-4 w-4 mr-2"}),r.jsx("span",{children:t.address})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(gt,{className:"h-4 w-4 mr-2"}),r.jsx("span",{children:"Open: 7:00 AM - 10:00 PM"})]}),t.phone&&r.jsxs("div",{className:"flex items-center",children:[r.jsx(Ot,{className:"h-4 w-4 mr-2"}),r.jsx("span",{children:t.phone})]}),t.latitude&&t.longitude&&r.jsxs("div",{className:"flex items-center",children:[r.jsx(Le,{className:"h-4 w-4 mr-2 text-blue-500"}),r.jsx("span",{children:"Location available"})]})]}),t.description&&r.jsx("p",{className:"text-muted-foreground mb-4",children:t.description})]}),r.jsxs("div",{className:"flex flex-col space-y-3 w-full md:w-auto",children:[t.phone&&r.jsxs(F,{className:"btn-primary",onClick:()=>window.open(`tel:${t.phone}`,"_self"),children:[r.jsx(Ot,{className:"h-4 w-4 mr-2"}),"Call Store"]}),r.jsxs(F,{variant:"outline",onClick:()=>{const a=document.getElementById("store-reviews");if(a){a.scrollIntoView({behavior:"smooth"});const o=a.querySelector("button[data-rate-store]");o&&setTimeout(()=>o.click(),500)}},children:[r.jsx($t,{className:"h-4 w-4 mr-2"}),"Rate Store"]}),t.latitude&&t.longitude&&r.jsxs(F,{variant:"outline",onClick:()=>{const a=`https://www.google.com/maps/dir/?api=1&destination=${t.latitude},${t.longitude}`;window.open(a,"_blank")},children:[r.jsx(Le,{className:"h-4 w-4 mr-2"}),"Get Directions"]})]})]})})}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center justify-between",children:[r.jsxs("span",{children:["Products from ",t.name]}),r.jsxs(le,{variant:"outline",children:[s.length," products"]})]})}),r.jsx(Z,{children:i?r.jsx("div",{className:"text-center py-8",children:"Loading products..."}):s.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-muted-foreground text-lg",children:"No products available at the moment"}),r.jsx("p",{className:"text-muted-foreground text-sm mt-2",children:"Check back later for new arrivals"})]}):r.jsx("div",{className:"grid grid-cols-3 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:s.map(a=>r.jsx(Wh,{product:a},a.id))})})]}),r.jsx("div",{id:"store-reviews",className:"mt-8",children:r.jsx(Gpe,{storeId:parseInt(e),currentUserId:9})}),r.jsxs(G,{className:"mt-8",children:[r.jsx(se,{children:r.jsxs(ie,{children:["Why Shop with ",t.name,"?"]})}),r.jsx(Z,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"text-center p-4",children:[r.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:r.jsx(gt,{className:"h-6 w-6 text-green-600"})}),r.jsx("h3",{className:"font-semibold mb-2",children:"Fast Delivery"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Quick delivery within Siraha area"})]}),r.jsxs("div",{className:"text-center p-4",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:r.jsx($t,{className:"h-6 w-6 text-blue-600"})}),r.jsx("h3",{className:"font-semibold mb-2",children:"Quality Products"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Fresh and authentic local products"})]}),r.jsxs("div",{className:"text-center p-4",children:[r.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3",children:r.jsx(Ot,{className:"h-6 w-6 text-purple-600"})}),r.jsx("h3",{className:"font-semibold mb-2",children:"Local Support"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Direct communication with store owner"})]})]})})]})]})}):r.jsx("div",{className:"min-h-screen bg-muted flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Store not found"}),r.jsx(Ae,{href:"/",children:r.jsx(F,{children:"Back to Home"})})]})})}function qD(){const{id:e}=Cm(),{data:t,isLoading:n,error:s}=Re({queryKey:[`/api/stores/${e}`],enabled:!!e,retry:1,staleTime:5*60*1e3}),{data:i=[],isLoading:a,error:o}=Re({queryKey:[`/api/products/store/${e}`],enabled:!!e&&!!t,retry:1,staleTime:5*60*1e3});if(n)return r.jsx("div",{className:"min-h-screen bg-muted flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{className:"text-lg font-medium",children:"Loading restaurant details..."})]})});if(s)return r.jsx("div",{className:"min-h-screen bg-muted flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4 text-red-600",children:"Error Loading Restaurant"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"There was an error loading the restaurant details."}),r.jsxs("div",{className:"flex gap-3 justify-center",children:[r.jsx(Ae,{href:"/restaurants",children:r.jsx(F,{variant:"outline",children:"Back to Restaurants"})}),r.jsx(Ae,{href:"/",children:r.jsx(F,{children:"Go to Home"})})]})]})});if(!t)return r.jsx("div",{className:"min-h-screen bg-muted flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Restaurant not found"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"The restaurant you're looking for doesn't exist or has been removed."}),r.jsxs("div",{className:"flex gap-3 justify-center",children:[r.jsx(Ae,{href:"/restaurants",children:r.jsx(F,{variant:"outline",children:"Browse Restaurants"})}),r.jsx(Ae,{href:"/",children:r.jsx(F,{children:"Back to Home"})})]})]})});const l=t.deliveryFee?`${t.deliveryFee}`:"Free",c=t.minimumOrder?`${t.minimumOrder}`:"";return r.jsx("div",{className:"min-h-screen bg-muted",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[r.jsx("div",{className:"mb-6",children:r.jsx(Ae,{href:"/",children:r.jsxs(F,{variant:"outline",className:"flex items-center gap-2",children:[r.jsx(Xa,{className:"h-4 w-4"}),"Back to Restaurants"]})})}),r.jsx("div",{className:"w-full h-48 md:h-64 bg-gray-200 rounded-lg mb-6 overflow-hidden",children:r.jsx("img",{src:t.coverImage||"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800&h=400&fit=crop&crop=center",alt:`${t.name} cover`,className:"w-full h-full object-cover",onError:d=>{d.currentTarget.src="https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800&h=400&fit=crop&crop=center"}})}),r.jsx(G,{className:"mb-8",children:r.jsx(Z,{className:"p-6",children:r.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center space-y-4 md:space-y-0 md:space-x-6",children:[r.jsx("div",{className:"w-32 h-32 bg-gray-200 rounded-lg flex items-center justify-center overflow-hidden flex-shrink-0",children:r.jsx("img",{src:t.logo||"https://images.unsplash.com/photo-1560472355-536de3962603?w=400&h=400&fit=crop&crop=center",alt:t.name,className:"w-full h-full object-cover",onError:d=>{d.currentTarget.src="https://images.unsplash.com/photo-1560472355-536de3962603?w=400&h=400&fit=crop&crop=center"}})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:t.name}),r.jsxs("div",{className:"flex items-center mb-3",children:[r.jsx("div",{className:"flex text-yellow-400 mr-2",children:Array.from({length:5}).map((d,h)=>r.jsx($t,{className:`h-4 w-4 ${h<Math.floor(Number(t.rating))?"fill-current":""}`},h))}),r.jsxs("span",{className:"text-muted-foreground",children:[t.rating," (",t.totalReviews," reviews)"]}),r.jsx(le,{variant:"secondary",className:"ml-3",children:t.isActive?"Open":"Closed"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm text-muted-foreground mb-4",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Le,{className:"h-4 w-4 mr-2"}),r.jsx("span",{children:t.address})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(gt,{className:"h-4 w-4 mr-2"}),r.jsx("span",{children:t.deliveryTime||"25-35 mins"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(c0,{className:"h-4 w-4 mr-2"}),r.jsxs("span",{children:["Delivery: ",l]})]}),c&&r.jsx("div",{className:"flex items-center",children:r.jsxs("span",{children:["Min order: ",c]})}),t.phone&&r.jsxs("div",{className:"flex items-center",children:[r.jsx(Ot,{className:"h-4 w-4 mr-2"}),r.jsx("span",{children:t.phone})]})]}),t.description&&r.jsx("p",{className:"text-muted-foreground mb-4",children:t.description}),t.cuisineType&&r.jsx(le,{variant:"outline",className:"mr-2",children:t.cuisineType}),t.isDeliveryAvailable&&r.jsxs(le,{className:"bg-green-500 hover:bg-green-600",children:[r.jsx(c0,{className:"h-3 w-3 mr-1"}),"Delivery Available"]})]}),r.jsxs("div",{className:"flex flex-col space-y-3 w-full md:w-auto",children:[t.phone&&r.jsxs(F,{className:"btn-primary",onClick:()=>window.open(`tel:${t.phone}`,"_self"),children:[r.jsx(Ot,{className:"h-4 w-4 mr-2"}),"Call Restaurant"]}),t.latitude&&t.longitude&&r.jsxs(F,{variant:"outline",onClick:()=>{const d=`https://www.google.com/maps/dir/?api=1&destination=${t.latitude},${t.longitude}`;window.open(d,"_blank")},children:[r.jsx(Le,{className:"h-4 w-4 mr-2"}),"Get Directions"]})]})]})})}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Menu"}),r.jsxs(le,{variant:"outline",children:[i.length," items"]})]})}),r.jsx(Z,{children:a?r.jsx("div",{className:"text-center py-8",children:"Loading menu..."}):i.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-muted-foreground text-lg",children:"No menu items available at the moment"}),r.jsx("p",{className:"text-muted-foreground text-sm mt-2",children:"Check back later for delicious options"})]}):r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:i.map(d=>r.jsx(c2,{food:d},d.id))})})]})]})})}var Zpe="Separator",KD="horizontal",Ype=["horizontal","vertical"],X9=j.forwardRef((e,t)=>{const{decorative:n,orientation:s=KD,...i}=e,a=Xpe(s)?s:KD,l=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return r.jsx(Qe.div,{"data-orientation":a,...l,...i,ref:t})});X9.displayName=Zpe;function Xpe(e){return Ype.includes(e)}var Q9=X9;const mn=j.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...s},i)=>r.jsx(Q9,{ref:i,decorative:n,orientation:t,className:Ve("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...s}));mn.displayName=Q9.displayName;var UT="Checkbox",[Qpe,zUe]=xn(UT),[Jpe,exe]=Qpe(UT),J9=j.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:s,checked:i,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:d,form:h,...m}=e,[f,g]=j.useState(null),x=St(t,S=>g(S)),p=j.useRef(!1),y=f?h||!!f.closest("form"):!0,[b=!1,w]=Li({prop:i,defaultProp:a,onChange:d}),N=j.useRef(b);return j.useEffect(()=>{const S=f==null?void 0:f.form;if(S){const P=()=>w(N.current);return S.addEventListener("reset",P),()=>S.removeEventListener("reset",P)}},[f,w]),r.jsxs(Jpe,{scope:n,state:b,disabled:l,children:[r.jsx(Qe.button,{type:"button",role:"checkbox","aria-checked":Jl(b)?"mixed":b,"aria-required":o,"data-state":r7(b),"data-disabled":l?"":void 0,disabled:l,value:c,...m,ref:x,onKeyDown:Fe(e.onKeyDown,S=>{S.key==="Enter"&&S.preventDefault()}),onClick:Fe(e.onClick,S=>{w(P=>Jl(P)?!0:!P),y&&(p.current=S.isPropagationStopped(),p.current||S.stopPropagation())})}),y&&r.jsx(txe,{control:f,bubbles:!p.current,name:s,value:c,checked:b,required:o,disabled:l,form:h,style:{transform:"translateX(-100%)"},defaultChecked:Jl(a)?!1:a})]})});J9.displayName=UT;var e7="CheckboxIndicator",t7=j.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:s,...i}=e,a=exe(e7,n);return r.jsx(On,{present:s||Jl(a.state)||a.state===!0,children:r.jsx(Qe.span,{"data-state":r7(a.state),"data-disabled":a.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});t7.displayName=e7;var txe=e=>{const{control:t,checked:n,bubbles:s=!0,defaultChecked:i,...a}=e,o=j.useRef(null),l=Cg(n),c=gg(t);j.useEffect(()=>{const h=o.current,m=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(m,"checked").set;if(l!==n&&g){const x=new Event("click",{bubbles:s});h.indeterminate=Jl(n),g.call(h,Jl(n)?!1:n),h.dispatchEvent(x)}},[l,n,s]);const d=j.useRef(Jl(n)?!1:n);return r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??d.current,...a,tabIndex:-1,ref:o,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Jl(e){return e==="indeterminate"}function r7(e){return Jl(e)?"indeterminate":e?"checked":"unchecked"}var n7=J9,rxe=t7;const xc=j.forwardRef(({className:e,...t},n)=>r.jsx(n7,{ref:n,className:Ve("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:r.jsx(rxe,{className:Ve("flex items-center justify-center text-current"),children:r.jsx(Md,{className:"h-4 w-4"})})}));xc.displayName=n7.displayName;function nxe(){const{cartItems:e,updateCartItem:t,removeFromCart:n,totalAmount:s,totalItems:i,isLoading:a,selectedItems:o,setSelectedItems:l,getSelectedCartItems:c,getSelectedTotals:d,resetSelectionState:h}=Nc(),{user:m}=Gt(),{toast:f}=ft(),[g,x]=j.useState(""),[p,y]=j.useState(!1),[b,w]=j.useState(null),[N,S]=j.useState(0),[P,C]=j.useState(0),[k,O]=j.useState(!1),[I,T]=j.useState(!1),[E,D]=j.useState(null),[B,M]=j.useState([]),[U,H]=j.useState(!1),[K,W]=j.useState(-1),V=j.useRef(null);Re({queryKey:["/api/delivery-zones"]});const z=ee=>{const X=new Set(o);X.has(ee)?X.delete(ee):X.add(ee),localStorage.setItem("cartHasSelections","true"),l(X)},q=()=>{o.size===e.length?l(new Set):l(new Set(e.map(ee=>ee.id))),localStorage.setItem("cartHasSelections","true")},{amount:J,items:pe}=d();j.useEffect(()=>{const ee=setTimeout(()=>{g&&!b&&Ne(g)},300);return()=>clearTimeout(ee)},[g,b]);const ye=async(ee,X)=>{try{throw new Error("HERE Maps API key not configured")}catch(Ce){return console.error("Reverse geocoding error:",Ce),`${ee.toFixed(6)}, ${X.toFixed(6)}`}},Ne=async ee=>{if(!ee.trim()||ee.length<3){M([]),H(!1);return}try{console.warn("HERE Maps API key not configured");return}catch(X){console.error("Error fetching address suggestions:",X),M([]),H(!1)}},ke=ee=>{var Ce;const X=ee.title||((Ce=ee.address)==null?void 0:Ce.label)||"";x(X),H(!1),W(-1),ee.position&&w({latitude:ee.position.lat,longitude:ee.position.lng})},Ee=ee=>{if(!(!U||B.length===0))switch(ee.key){case"ArrowDown":ee.preventDefault(),W(X=>X<B.length-1?X+1:0);break;case"ArrowUp":ee.preventDefault(),W(X=>X>0?X-1:B.length-1);break;case"Enter":ee.preventDefault(),K>=0&&ke(B[K]);break;case"Escape":H(!1),W(-1);break}},We=async(ee,X)=>{try{await t(ee,X)}catch{f({title:"Error",description:"Failed to update quantity",variant:"destructive"})}},Se=async ee=>{try{await n(ee),f({title:"Item removed",description:"Item has been removed from your cart"})}catch{f({title:"Error",description:"Failed to remove item",variant:"destructive"})}},Me=async()=>{T(!0);try{const ee=await Go();w(ee);const X=await ye(ee.latitude,ee.longitude);x(X),y(!0),f({title:"Location Found",description:`Your location has been set to: ${X}`}),await Ie(ee)}catch(ee){console.error("Error getting location:",ee),f({title:"Location Error",description:ee instanceof Error?ee.message:"Failed to get your location. Please ensure location permission is granted.",variant:"destructive"})}finally{T(!1)}},Ie=async ee=>{if(e.length!==0){O(!0);try{const X=e[0];if(!(X!=null&&X.product))throw new Error("Product information not available");const Ce=await fetch(`/api/stores/${X.product.storeId}`);if(!Ce.ok)throw new Error("Failed to fetch store information");const $e=await Ce.json();if(!$e.latitude||!$e.longitude)throw new Error("Store location not available");const He={latitude:parseFloat($e.latitude),longitude:parseFloat($e.longitude)},lt=Hh(He,ee);C(lt);const Tt=await fetch("/api/calculate-delivery-fee",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({distance:lt})});if(!Tt.ok)throw new Error("Failed to calculate delivery fee");const ir=await Tt.json();S(ir.fee),D({zone:ir.zone,estimatedTime:Math.round(30+lt*10)}),f({title:"Delivery Fee Calculated",description:`${ir.fee} for ${Ql(lt)} delivery`})}catch(X){console.error("Error calculating delivery fee:",X),f({title:"Error",description:X instanceof Error?X.message:"Failed to calculate delivery fee",variant:"destructive"})}finally{O(!1)}}},$=async()=>{if(b){await Ie(b);return}if(!(!g.trim()||e.length===0)){O(!0);try{const ee=e[0];if(!(ee!=null&&ee.product))throw new Error("Product information not available");const X=await fetch(`/api/stores/${ee.product.storeId}`);if(!X.ok)throw new Error("Failed to fetch store information");const Ce=await X.json();if(!Ce.latitude||!Ce.longitude)throw new Error("Store location not available");const $e={latitude:parseFloat(Ce.latitude),longitude:parseFloat(Ce.longitude)},He=await VV(g);if(!(He!=null&&He.coordinates)){f({title:"Address Not Found",description:"Could not locate the address. Please verify on Google Maps and try again.",variant:"destructive",action:r.jsx(F,{variant:"outline",size:"sm",onClick:()=>window.open(He==null?void 0:He.googleMapsLink,"_blank"),children:"View on Google Maps"})});return}const lt=He.coordinates;He.confidence==="low"&&f({title:"Address Match Found",description:`Found: ${He.formattedAddress||g}. Please verify this is correct.`,action:r.jsx(F,{variant:"outline",size:"sm",onClick:()=>window.open(He.googleMapsLink,"_blank"),children:"Verify on Maps"})});const Tt=Hh($e,lt);C(Tt);const ir=await fetch("/api/calculate-delivery-fee",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({distance:Tt})});if(!ir.ok)throw new Error("Failed to calculate delivery fee");const Ut=await ir.json();S(Ut.fee),D({zone:Ut.zone,estimatedTime:Math.round(30+Tt*10)}),f({title:"Delivery Fee Calculated",description:`${Ut.fee} for ${Ql(Tt)} delivery to ${He.formattedAddress||g}`})}catch(ee){console.error("Error calculating delivery fee:",ee),f({title:"Error",description:ee instanceof Error?ee.message:"Failed to calculate delivery fee",variant:"destructive"})}finally{O(!1)}}};return m?a?r.jsx("div",{className:"min-h-screen bg-muted flex items-center justify-center",children:r.jsx("div",{children:"Loading cart..."})}):e.length===0?r.jsx("div",{className:"min-h-screen bg-muted",children:r.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:r.jsx(G,{children:r.jsxs(Z,{className:"pt-6 text-center",children:[r.jsx(Wo,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Your cart is empty"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"Looks like you haven't added anything to your cart yet"}),r.jsx(Ae,{href:"/products",children:r.jsx(F,{children:"Continue Shopping"})})]})})})}):r.jsx("div",{className:"min-h-screen bg-muted",children:r.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-foreground mb-8",children:"Shopping Cart"}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-8",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(ie,{children:["Cart Items (",i,")"]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(F,{variant:"ghost",size:"sm",onClick:()=>{h(),f({title:"Selection Reset",description:"Cart selection state has been reset. Try selecting items now."})},className:"text-xs",children:"Reset Selection"}),r.jsx(xc,{id:"select-all",checked:o.size===e.length&&e.length>0,onCheckedChange:q}),r.jsx(be,{htmlFor:"select-all",className:"text-sm font-medium",children:"Select All"})]})]})}),r.jsx(Z,{className:"space-y-4",children:e.map(ee=>{var X,Ce,$e,He,lt;return r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-3 sm:space-y-0 sm:space-x-4 p-3 sm:p-4 border rounded-lg",children:[r.jsxs("div",{className:"flex items-center space-x-3 w-full sm:w-auto",children:[r.jsx(xc,{id:`item-${ee.id}`,checked:o.has(ee.id),onCheckedChange:()=>z(ee.id),className:"flex-shrink-0"}),r.jsx("img",{src:((Ce=(X=ee.product)==null?void 0:X.images)==null?void 0:Ce[0])||"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&h=100",alt:(($e=ee.product)==null?void 0:$e.name)||"Product",className:"w-16 h-16 sm:w-20 sm:h-20 object-cover rounded-lg flex-shrink-0"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-medium text-foreground text-sm sm:text-base line-clamp-2",children:((He=ee.product)==null?void 0:He.name)||"Unknown Product"}),r.jsxs("p",{className:"text-primary font-semibold text-sm sm:text-base",children:["",ee.product?Number(ee.product.price).toLocaleString():0]})]}),r.jsx(F,{variant:"ghost",size:"sm",onClick:()=>Se(ee.id),className:"text-destructive hover:text-destructive sm:hidden",children:r.jsx(Fr,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"flex items-center justify-between w-full sm:w-auto sm:justify-end sm:space-x-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(F,{variant:"outline",size:"sm",onClick:()=>We(ee.id,ee.quantity-1),disabled:ee.quantity<=1,className:"h-8 w-8 p-0",children:r.jsx(R8,{className:"h-3 w-3"})}),r.jsx("span",{className:"w-8 text-center text-sm font-medium",children:ee.quantity}),r.jsx(F,{variant:"outline",size:"sm",onClick:()=>We(ee.id,ee.quantity+1),disabled:ee.quantity>=(((lt=ee.product)==null?void 0:lt.stock)||0),className:"h-8 w-8 p-0",children:r.jsx(Wt,{className:"h-3 w-3"})})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("p",{className:"font-semibold text-sm sm:text-base",children:["",ee.product?(Number(ee.product.price)*ee.quantity).toLocaleString():0]}),r.jsx(F,{variant:"ghost",size:"sm",onClick:()=>Se(ee.id),className:"text-destructive hover:text-destructive hidden sm:flex",children:r.jsx(Fr,{className:"h-4 w-4"})})]})]})]},ee.id)})})]})}),r.jsx("div",{children:r.jsxs(G,{className:"sticky top-24",children:[r.jsx(se,{children:r.jsx(ie,{children:"Order Summary"})}),r.jsxs(Z,{children:[r.jsx("div",{className:"space-y-3 mb-4",children:r.jsxs("div",{children:[r.jsx(be,{htmlFor:"delivery-address",className:"text-sm font-medium",children:"Delivery Address"}),r.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[r.jsxs(F,{onClick:Me,disabled:I,size:"sm",variant:"outline",className:"flex items-center gap-2",children:[I?r.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"}):r.jsx(jt,{className:"h-4 w-4"}),I?"Getting Location...":"Get My Location"]}),r.jsxs(F,{onClick:()=>y(!p),size:"sm",variant:"outline",className:"flex items-center gap-2",children:[r.jsx(Le,{className:"h-4 w-4"}),"Manual Address"]}),(p||b||g.trim())&&r.jsxs(F,{onClick:$,disabled:k||!g.trim()&&!b,size:"sm",variant:"outline",className:"flex items-center gap-2",children:[r.jsx(D8,{className:"h-4 w-4"}),k?"Calculating...":"Calculate Fee"]})]}),b&&r.jsxs("p",{className:"text-xs text-green-600 mt-1",children:[r.jsx(Le,{className:"h-3 w-3 inline mr-1"}),"Using your current location"]}),P>0&&r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Distance: ",Ql(P),E&&`  Est. ${E.estimatedTime} mins`]}),p&&r.jsxs("div",{className:"relative mt-2",children:[r.jsx(he,{id:"delivery-address",placeholder:"Enter your complete delivery address",value:g,onChange:ee=>{x(ee.target.value),ee.target.value!==g&&w(null)},onKeyDown:Ee,onFocus:()=>{B.length>0&&H(!0)},onBlur:()=>{setTimeout(()=>H(!1),200)}}),U&&B.length>0&&r.jsx("div",{ref:V,className:"absolute z-50 w-full mt-1 bg-background border border-border rounded-md shadow-lg max-h-60 overflow-y-auto",children:B.map((ee,X)=>{var Ce;return r.jsxs("div",{className:`px-3 py-2 cursor-pointer text-sm hover:bg-muted transition-colors ${X===K?"bg-muted":""}`,onClick:()=>ke(ee),onMouseEnter:()=>W(X),children:[r.jsx("div",{className:"font-medium",children:ee.title}),((Ce=ee.address)==null?void 0:Ce.label)&&ee.address.label!==ee.title&&r.jsx("div",{className:"text-xs text-muted-foreground",children:ee.address.label}),ee.resultType&&r.jsx("div",{className:"text-xs text-primary mt-1",children:ee.resultType==="place"?" Place":" Address"})]},X)})})]})]})}),r.jsx(mn,{className:"my-4"}),r.jsxs("div",{className:"space-y-3 mb-4",children:[o.size<e.length&&r.jsxs("div",{className:"text-xs text-muted-foreground p-2 bg-muted rounded",children:["Selected ",o.size," of ",e.length," items"]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{children:["Subtotal (",pe," items)"]}),r.jsxs("span",{children:["",J.toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Delivery Fee"}),r.jsx("span",{className:N>0?"text-foreground":"text-muted-foreground",children:N>0?`${N.toLocaleString()}`:"Enter address to calculate"})]}),(E==null?void 0:E.zone)&&r.jsxs("div",{className:"text-xs text-muted-foreground",children:["Zone: ",E.zone.name]}),r.jsx(mn,{}),r.jsxs("div",{className:"flex justify-between font-semibold text-lg",children:[r.jsx("span",{children:"Total"}),r.jsx("span",{children:N>0||b||g.trim()?`${(J+N).toLocaleString()}`:"Enter address for total"})]})]}),r.jsx(Ae,{href:"/checkout",children:r.jsxs(F,{className:"w-full btn-primary",disabled:o.size===0,children:["Proceed to Checkout (",o.size," items)"]})}),o.size===0&&r.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Select at least one item to proceed"}),r.jsx(Ae,{href:"/products",children:r.jsx(F,{variant:"outline",className:"w-full mt-3",children:"Continue Shopping"})})]})]})})]})]})}):r.jsx("div",{className:"min-h-screen bg-muted flex items-center justify-center",children:r.jsx(G,{className:"w-full max-w-md mx-4",children:r.jsxs(Z,{className:"pt-6 text-center",children:[r.jsx(Wo,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Please Login"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"You need to login to view your cart"}),r.jsx(Ae,{href:"/login",children:r.jsx(F,{className:"w-full",children:"Login"})})]})})})}var WT="Radio",[sxe,s7]=xn(WT),[ixe,axe]=sxe(WT),i7=j.forwardRef((e,t)=>{const{__scopeRadio:n,name:s,checked:i=!1,required:a,disabled:o,value:l="on",onCheck:c,form:d,...h}=e,[m,f]=j.useState(null),g=St(t,y=>f(y)),x=j.useRef(!1),p=m?d||!!m.closest("form"):!0;return r.jsxs(ixe,{scope:n,checked:i,disabled:o,children:[r.jsx(Qe.button,{type:"button",role:"radio","aria-checked":i,"data-state":l7(i),"data-disabled":o?"":void 0,disabled:o,value:l,...h,ref:g,onClick:Fe(e.onClick,y=>{i||c==null||c(),p&&(x.current=y.isPropagationStopped(),x.current||y.stopPropagation())})}),p&&r.jsx(oxe,{control:m,bubbles:!x.current,name:s,value:l,checked:i,required:a,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});i7.displayName=WT;var a7="RadioIndicator",o7=j.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:s,...i}=e,a=axe(a7,n);return r.jsx(On,{present:s||a.checked,children:r.jsx(Qe.span,{"data-state":l7(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:t})})});o7.displayName=a7;var oxe=e=>{const{control:t,checked:n,bubbles:s=!0,...i}=e,a=j.useRef(null),o=Cg(n),l=gg(t);return j.useEffect(()=>{const c=a.current,d=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(d,"checked").set;if(o!==n&&m){const f=new Event("click",{bubbles:s});m.call(c,n),c.dispatchEvent(f)}},[o,n,s]),r.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:a,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function l7(e){return e?"checked":"unchecked"}var lxe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],HT="RadioGroup",[cxe,BUe]=xn(HT,[Im,s7]),c7=Im(),d7=s7(),[dxe,uxe]=cxe(HT),u7=j.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:s,defaultValue:i,value:a,required:o=!1,disabled:l=!1,orientation:c,dir:d,loop:h=!0,onValueChange:m,...f}=e,g=c7(n),x=ru(d),[p,y]=Li({prop:a,defaultProp:i,onChange:m});return r.jsx(dxe,{scope:n,name:s,required:o,disabled:l,value:p,onValueChange:y,children:r.jsx(Yk,{asChild:!0,...g,orientation:c,dir:x,loop:h,children:r.jsx(Qe.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":l?"":void 0,dir:x,...f,ref:t})})})});u7.displayName=HT;var h7="RadioGroupItem",m7=j.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:s,...i}=e,a=uxe(h7,n),o=a.disabled||s,l=c7(n),c=d7(n),d=j.useRef(null),h=St(t,d),m=a.value===i.value,f=j.useRef(!1);return j.useEffect(()=>{const g=p=>{lxe.includes(p.key)&&(f.current=!0)},x=()=>f.current=!1;return document.addEventListener("keydown",g),document.addEventListener("keyup",x),()=>{document.removeEventListener("keydown",g),document.removeEventListener("keyup",x)}},[]),r.jsx(Xk,{asChild:!0,...l,focusable:!o,active:m,children:r.jsx(i7,{disabled:o,required:a.required,checked:m,...c,...i,name:a.name,ref:h,onCheck:()=>a.onValueChange(i.value),onKeyDown:Fe(g=>{g.key==="Enter"&&g.preventDefault()}),onFocus:Fe(i.onFocus,()=>{var g;f.current&&((g=d.current)==null||g.click())})})})});m7.displayName=h7;var hxe="RadioGroupIndicator",f7=j.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...s}=e,i=d7(n);return r.jsx(o7,{...i,...s,ref:t})});f7.displayName=hxe;var p7=u7,x7=m7,mxe=f7;const g7=j.forwardRef(({className:e,...t},n)=>r.jsx(p7,{className:Ve("grid gap-2",e),...t,ref:n}));g7.displayName=p7.displayName;const Ey=j.forwardRef(({className:e,...t},n)=>r.jsx(x7,{ref:n,className:Ve("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:r.jsx(mxe,{className:"flex items-center justify-center",children:r.jsx(Ck,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Ey.displayName=x7.displayName;const fxe=te.object({customerName:te.string().min(1,"Name is required"),phone:te.string().min(10,"Valid phone number is required"),shippingAddress:te.string().min(10,"Address is required"),paymentMethod:te.enum(["cod","card","upi"]),latitude:te.number().optional(),longitude:te.number().optional()});function pxe(){var Me,Ie,$;const[e,t]=j.useState(!1),[n,s]=j.useState(!1),[i,a]=j.useState(!1),[o,l]=j.useState(!0),[c,d]=j.useState(0),[h,m]=j.useState(0);j.useState(0);const[f,g]=j.useState(null),[x,p]=j.useState(null),[y,b]=j.useState([]),[w,N]=j.useState(!1),[S,P]=j.useState(-1),C=j.useRef(null),[,k]=Jr(),{cartItems:O,totalAmount:I,clearCart:T,clearSelectedItems:E,getSelectedCartItems:D,getSelectedTotals:B}=Nc(),{user:M}=Gt(),{toast:U}=ft(),H=Vk(),K=D(),{amount:W,items:V}=B();Re({queryKey:["/api/delivery-zones"]});const z=an({resolver:on(fxe),defaultValues:{customerName:(M==null?void 0:M.fullName)||"",phone:(M==null?void 0:M.phone)||"",shippingAddress:"",paymentMethod:"cod",latitude:void 0,longitude:void 0}}),q=z.watch("shippingAddress");j.useEffect(()=>{const ee=setTimeout(()=>{q&&!f&&pe(q)},300);return()=>clearTimeout(ee)},[q,f]);const J=async(ee,X)=>{try{throw new Error("HERE Maps API key not configured")}catch(Ce){return console.error("Reverse geocoding error:",Ce),`${ee.toFixed(6)}, ${X.toFixed(6)}`}},pe=async ee=>{if(!ee.trim()||ee.length<3){b([]),N(!1);return}try{console.warn("HERE Maps API key not configured");return}catch(X){console.error("Error fetching address suggestions:",X),b([]),N(!1)}},ye=ee=>{var Ce;const X=ee.title||((Ce=ee.address)==null?void 0:Ce.label)||"";z.setValue("shippingAddress",X),N(!1),P(-1),ee.position&&(g({latitude:ee.position.lat,longitude:ee.position.lng}),z.setValue("latitude",ee.position.lat),z.setValue("longitude",ee.position.lng))},Ne=ee=>{if(!(!w||y.length===0))switch(ee.key){case"ArrowDown":ee.preventDefault(),P(X=>X<y.length-1?X+1:0);break;case"ArrowUp":ee.preventDefault(),P(X=>X>0?X-1:y.length-1);break;case"Enter":ee.preventDefault(),S>=0&&ye(y[S]);break;case"Escape":N(!1),P(-1);break}},ke=async()=>{s(!0);try{const ee=await Go();g(ee),z.setValue("latitude",ee.latitude),z.setValue("longitude",ee.longitude);const X=await J(ee.latitude,ee.longitude);z.setValue("shippingAddress",X),l(!0),U({title:"Location Found",description:`Your location has been set to: ${X}`}),await Ee(ee)}catch(ee){console.error("Error getting location:",ee),U({title:"Location Error",description:ee instanceof Error?ee.message:"Failed to get your location. Please ensure location permission is granted.",variant:"destructive"})}finally{s(!1)}},Ee=async ee=>{if(K.length!==0){a(!0);try{const X=K[0];if(!(X!=null&&X.product))throw new Error("Product information not available");const Ce=await fetch(`/api/stores/${X.product.storeId}`);if(!Ce.ok)throw new Error("Failed to fetch store information");const $e=await Ce.json();if(!$e.latitude||!$e.longitude)throw new Error("Store location not available");const He={latitude:parseFloat($e.latitude),longitude:parseFloat($e.longitude)},lt=Hh(He,ee);m(lt);const Tt=await fetch("/api/calculate-delivery-fee",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({distance:lt})});if(!Tt.ok)throw new Error("Failed to calculate delivery fee");const ir=await Tt.json();d(ir.fee),p({zone:ir.zone,estimatedTime:Math.round(30+lt*10)}),U({title:"Delivery Fee Calculated",description:`${ir.fee} for ${Ql(lt)} delivery`})}catch(X){console.error("Error calculating delivery fee:",X),U({title:"Error",description:X instanceof Error?X.message:"Failed to calculate delivery fee",variant:"destructive"})}finally{a(!1)}}},We=async()=>{const ee=z.getValues("shippingAddress");if(f){await Ee(f);return}if(!(!ee.trim()||K.length===0)){a(!0);try{const X=K[0];if(!(X!=null&&X.product))throw new Error("Product information not available");const Ce=await fetch(`/api/stores/${X.product.storeId}`);if(!Ce.ok)throw new Error("Failed to fetch store information");const $e=await Ce.json();if(!$e.latitude||!$e.longitude)throw new Error("Store location not available");const He={latitude:parseFloat($e.latitude),longitude:parseFloat($e.longitude)},lt=await VV(ee);if(!(lt!=null&&lt.coordinates)){U({title:"Address Not Found",description:"Could not locate the address. Please verify on Google Maps and try again.",variant:"destructive",action:r.jsx(F,{variant:"outline",size:"sm",onClick:()=>window.open(lt==null?void 0:lt.googleMapsLink,"_blank"),children:"View on Google Maps"})});return}const Tt=lt.coordinates;lt.formattedAddress&&lt.formattedAddress!==ee&&(z.setValue("shippingAddress",lt.formattedAddress),U({title:"Address Formatted",description:`Updated to: ${lt.formattedAddress}`,action:r.jsx(F,{variant:"outline",size:"sm",onClick:()=>window.open(lt.googleMapsLink,"_blank"),children:"Verify on Maps"})})),lt.confidence==="low"&&U({title:"Address Match Found",description:"Please verify this location is correct before proceeding.",action:r.jsx(F,{variant:"outline",size:"sm",onClick:()=>window.open(lt.googleMapsLink,"_blank"),children:"Verify on Maps"})});const ir=Hh(He,Tt);m(ir);const Ut=await fetch("/api/calculate-delivery-fee",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({distance:ir})});if(!Ut.ok)throw new Error("Failed to calculate delivery fee");const ce=await Ut.json();d(ce.fee),p({zone:ce.zone,estimatedTime:Math.round(30+ir*10)}),U({title:"Delivery Fee Calculated",description:`${ce.fee} for ${Ql(ir)} delivery to ${lt.formattedAddress||ee}`})}catch(X){console.error("Error calculating delivery fee:",X),U({title:"Error",description:X instanceof Error?X.message:"Failed to calculate delivery fee",variant:"destructive"})}finally{a(!1)}}},Se=async ee=>{var X,Ce;if(K.length!==0){t(!0);try{const $e=W+c,He={customerId:(M==null?void 0:M.id)||null,totalAmount:$e.toString(),deliveryFee:c.toString(),status:"pending",...ee},lt=K.map(Ut=>{var ce,je;return{productId:Ut.productId,quantity:Ut.quantity,price:((ce=Ut.product)==null?void 0:ce.price)||"0",storeId:((je=Ut.product)==null?void 0:je.storeId)||0}}),Tt=await Pi("/api/orders",{order:He,items:lt});(X=Tt.order)!=null&&X.id&&localStorage.setItem("lastOrderId",Tt.order.id.toString()),await E(),H.onPaymentSuccess(),U({title:"Order placed successfully!",description:"You will receive a confirmation email shortly."});const ir=(Ce=Tt.order)!=null&&Ce.id?`?orderId=${Tt.order.id}`:"";k(`/order-confirmation${ir}`)}catch{H.onError(),U({title:"Error",description:"Failed to place order. Please try again.",variant:"destructive"})}finally{t(!1)}}};return!M&&O.length===0?(k("/login"),null):K.length===0?(k("/cart"),null):r.jsx("div",{className:"min-h-screen bg-muted",children:r.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-foreground mb-8",children:"Checkout"}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-8",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsx(Or,{...z,children:r.jsxs("form",{onSubmit:z.handleSubmit(Se),className:"space-y-6",children:[r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center",children:[r.jsx(Le,{className:"h-5 w-5 mr-2"}),"Delivery Address"]})}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(oe,{control:z.control,name:"customerName",render:({field:ee})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Full Name"}),r.jsx(me,{children:r.jsx(he,{placeholder:"Enter your full name",...ee})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:z.control,name:"phone",render:({field:ee})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Phone Number"}),r.jsx(me,{children:r.jsx(he,{placeholder:"Enter your phone number",...ee})}),r.jsx(fe,{})]})})]}),r.jsx(oe,{control:z.control,name:"shippingAddress",render:({field:ee})=>{var X,Ce;return r.jsxs(ae,{children:[r.jsx(de,{children:"Complete Address"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs(F,{type:"button",variant:"outline",onClick:ke,disabled:n,className:"flex items-center gap-2",children:[n?r.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"}):r.jsx(jt,{className:"h-4 w-4"}),n?"Getting Location...":"Get My Location"]}),r.jsxs(F,{type:"button",variant:"outline",onClick:()=>l(!o),className:"flex items-center gap-2",children:[r.jsx(Le,{className:"h-4 w-4"}),"Manual Address"]}),(o||f||((X=ee.value)==null?void 0:X.trim()))&&r.jsxs(F,{type:"button",variant:"outline",onClick:We,disabled:i||!((Ce=ee.value)!=null&&Ce.trim())&&!f,className:"flex items-center gap-2",children:[r.jsx(D8,{className:"h-4 w-4"}),i?"Calculating...":"Calculate Fee"]})]}),f&&r.jsxs("p",{className:"text-xs text-green-600",children:[r.jsx(Le,{className:"h-3 w-3 inline mr-1"}),"Using your current location"]}),h>0&&r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Distance: ",Ql(h),x&&`  Est. ${x.estimatedTime} mins`]}),(o||!f)&&r.jsxs("div",{className:"relative",children:[r.jsx(me,{children:r.jsx(Yt,{placeholder:"Enter your complete delivery address",className:"min-h-20",...ee,onChange:$e=>{ee.onChange($e),$e.target.value!==ee.value&&g(null)},onKeyDown:Ne,onFocus:()=>{y.length>0&&N(!0)},onBlur:()=>{setTimeout(()=>N(!1),200)}})}),w&&y.length>0&&r.jsx("div",{ref:C,className:"absolute z-50 w-full mt-1 bg-background border border-border rounded-md shadow-lg max-h-60 overflow-y-auto",children:y.map(($e,He)=>{var lt;return r.jsxs("div",{className:`px-3 py-2 cursor-pointer text-sm hover:bg-muted transition-colors ${He===S?"bg-muted":""}`,onClick:()=>ye($e),onMouseEnter:()=>P(He),children:[r.jsx("div",{className:"font-medium",children:$e.title}),((lt=$e.address)==null?void 0:lt.label)&&$e.address.label!==$e.title&&r.jsx("div",{className:"text-xs text-muted-foreground",children:$e.address.label}),$e.resultType&&r.jsx("div",{className:"text-xs text-primary mt-1",children:$e.resultType==="place"?" Place":" Address"})]},He)})})]})]}),r.jsx(fe,{})]})}})]})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center",children:[r.jsx(Vp,{className:"h-5 w-5 mr-2"}),"Payment Method"]})}),r.jsx(Z,{children:r.jsx(oe,{control:z.control,name:"paymentMethod",render:({field:ee})=>r.jsxs(ae,{children:[r.jsx(me,{children:r.jsxs(g7,{onValueChange:ee.onChange,value:ee.value,className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-3 p-3 border rounded-lg cursor-pointer hover:bg-muted",children:[r.jsx(Ey,{value:"cod",id:"cod"}),r.jsx(be,{htmlFor:"cod",className:"flex-1 cursor-pointer",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(kt,{className:"h-5 w-5 mr-3 text-green-600"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"Cash on Delivery"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Pay when you receive your order"})]})]})})]}),r.jsxs("div",{className:"flex items-center space-x-3 p-3 border rounded-lg cursor-pointer hover:bg-muted",children:[r.jsx(Ey,{value:"card",id:"card"}),r.jsx(be,{htmlFor:"card",className:"flex-1 cursor-pointer",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Vp,{className:"h-5 w-5 mr-3 text-blue-600"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"Credit/Debit Card"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Pay with your card securely"})]})]})})]}),r.jsxs("div",{className:"flex items-center space-x-3 p-3 border rounded-lg cursor-pointer hover:bg-muted",children:[r.jsx(Ey,{value:"upi",id:"upi"}),r.jsx(be,{htmlFor:"upi",className:"flex-1 cursor-pointer",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"h-5 w-5 mr-3 bg-purple-600 rounded flex items-center justify-center text-white text-xs font-bold",children:"U"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"UPI Payment"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Pay using UPI apps like eSewa, Khalti"})]})]})})]})]})}),r.jsx(fe,{})]})})})]}),r.jsx(F,{type:"submit",className:"w-full btn-primary",disabled:e||!f&&!((Me=z.getValues("shippingAddress"))!=null&&Me.trim())||c===0&&h===0,children:e?"Placing Order...":!f&&!((Ie=z.getValues("shippingAddress"))!=null&&Ie.trim())?"Enter Delivery Address":c===0&&h===0?"Calculate Delivery Fee":"Place Order"})]})})}),r.jsx("div",{children:r.jsxs(G,{className:"sticky top-24",children:[r.jsx(se,{children:r.jsx(ie,{children:"Order Summary"})}),r.jsxs(Z,{children:[r.jsxs("div",{className:"space-y-3 mb-4",children:[K.map(ee=>{var X;return r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("span",{children:((X=ee.product)==null?void 0:X.name)||"Unknown Product"}),r.jsxs("span",{className:"text-muted-foreground",children:[" x",ee.quantity]})]}),r.jsxs("span",{children:["",ee.product?(Number(ee.product.price)*ee.quantity).toLocaleString():0]})]},ee.id)}),r.jsx(mn,{}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",W.toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Delivery Fee"}),r.jsx("span",{className:c>0?"text-foreground":"text-muted-foreground",children:c>0?`${c.toLocaleString()}`:"Enter address to calculate"})]}),(x==null?void 0:x.zone)&&r.jsxs("div",{className:"text-xs text-muted-foreground",children:["Zone: ",x.zone.name]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Tax"}),r.jsx("span",{children:"0"})]}),r.jsx(mn,{}),r.jsxs("div",{className:"flex justify-between font-semibold text-lg",children:[r.jsx("span",{children:"Total"}),r.jsx("span",{children:c>0||f||($=z.getValues("shippingAddress"))!=null&&$.trim()?`${(W+c).toLocaleString()}`:"Enter address for total"})]})]}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"By placing this order, you agree to our Terms of Service and Privacy Policy."})]})]})})]})]})})}function xxe(){const{user:e}=Gt(),[t]=Jr(),[n,s]=j.useState(null);j.useEffect(()=>{window.scrollTo(0,0);const c=new URLSearchParams(t.split("?")[1]||"").get("orderId"),d=localStorage.getItem("lastOrderId");s(c||d),setTimeout(()=>{cr.orderPlaced()},500)},[t]);const i=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),a=new Date;a.setDate(a.getDate()+3);const o=a.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return r.jsx("div",{className:"min-h-screen bg-muted",children:r.jsx("div",{className:"max-w-2xl mx-auto px-4 py-16",children:r.jsx(G,{children:r.jsxs(Z,{className:"pt-6",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(wt,{className:"h-12 w-12 text-green-600"})}),r.jsx("h1",{className:"text-3xl font-bold text-foreground mb-4",children:"Order Confirmed!"}),r.jsx("p",{className:"text-lg text-muted-foreground",children:"Thank you for your order. We'll send you a confirmation email shortly."})]}),r.jsx(mn,{className:"my-6"}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Order Details"}),r.jsxs("div",{className:"bg-muted rounded-lg p-4 space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-medium",children:"Order ID:"}),r.jsxs("span",{className:"font-mono text-sm",children:["#",n||"SB"+Date.now().toString().slice(-8)]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-medium",children:"Order Date:"}),r.jsx("span",{children:i})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-medium",children:"Customer:"}),r.jsx("span",{children:(e==null?void 0:e.fullName)||"Customer"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-medium",children:"Payment Method:"}),r.jsx("span",{children:"Cash on Delivery"})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Delivery Information"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-blue-50 dark:bg-blue-950 rounded-lg",children:[r.jsx(Zl,{className:"h-5 w-5 text-blue-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Estimated Delivery"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:o})]})]}),r.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 dark:bg-green-950 rounded-lg",children:[r.jsx(kt,{className:"h-5 w-5 text-green-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Free Delivery"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"No delivery charges for orders within Siraha"})]})]}),r.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-orange-50 dark:bg-orange-950 rounded-lg",children:[r.jsx(rt,{className:"h-5 w-5 text-orange-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Track Your Order"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"You'll receive tracking updates via SMS and email"})]})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[n&&r.jsx(Ae,{href:`/orders/${n}/tracking`,children:r.jsxs(F,{className:"w-full btn-primary",children:[r.jsx(ks,{className:"h-4 w-4 mr-2"}),"Track Your Order"]})}),r.jsx(Ae,{href:"/customer-dashboard",children:r.jsx(F,{variant:"outline",className:"w-full",children:"View Order Details"})}),r.jsx(Ae,{href:"/products",children:r.jsx(F,{variant:"outline",className:"w-full",children:"Continue Shopping"})})]}),r.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:[r.jsx("p",{children:"Need help with your order?"}),r.jsxs("p",{children:["Contact us at ",r.jsx("a",{href:"mailto:sirahabazzar@gmail.com",className:"text-primary hover:underline",children:"sirahabazzar@gmail.com"})]}),r.jsxs("p",{children:["or call ",r.jsx("a",{href:"tel:+9779805916598",className:"text-primary hover:underline",children:"+9779805916598"})]})]})]})]})})})})}const gxe=te.object({email:te.string().email("Please enter a valid email address"),password:te.string().min(6,"Password must be at least 6 characters")});function vxe(){const[e,t]=j.useState(!1),[n,s]=j.useState(!1),[,i]=Jr(),{login:a}=Gt(),{toast:o}=ft(),l=an({resolver:on(gxe),defaultValues:{email:"",password:""}}),c=async d=>{s(!0);try{await a(d.email,d.password),cr.success(),o({title:"Welcome back!",description:"You have been successfully logged in."}),i("/")}catch(h){cr.error(),o({title:"Login failed",description:h instanceof Error?h.message:"Invalid credentials",variant:"destructive"})}finally{s(!1)}};return r.jsx("div",{className:"min-h-screen bg-muted flex items-center justify-center py-12",children:r.jsx("div",{className:"w-full max-w-md",children:r.jsxs(G,{children:[r.jsxs(se,{className:"text-center",children:[r.jsxs("div",{className:"flex items-center justify-center mb-4",children:[r.jsx(nr,{className:"h-8 w-8 text-primary mr-2"}),r.jsx("span",{className:"text-2xl font-bold text-foreground",children:"Siraha Bazaar"})]}),r.jsx(ie,{className:"text-2xl",children:"Welcome Back"}),r.jsx("p",{className:"text-muted-foreground",children:"Sign in to your account to continue shopping"})]}),r.jsxs(Z,{children:[r.jsx(Or,{...l,children:r.jsxs("form",{onSubmit:l.handleSubmit(c),className:"space-y-4",children:[r.jsx(oe,{control:l.control,name:"email",render:({field:d})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Email Address"}),r.jsx(me,{children:r.jsx(he,{type:"email",placeholder:"Enter your email",...d})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:l.control,name:"password",render:({field:d})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Password"}),r.jsx(me,{children:r.jsxs("div",{className:"relative",children:[r.jsx(he,{type:e?"text":"password",placeholder:"Enter your password",...d}),r.jsx(F,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>t(!e),children:e?r.jsx(R_,{className:"h-4 w-4"}):r.jsx(ks,{className:"h-4 w-4"})})]})}),r.jsx(fe,{})]})}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:"remember",className:"rounded border-gray-300"}),r.jsx("label",{htmlFor:"remember",className:"text-sm text-muted-foreground",children:"Remember me"})]}),r.jsx(Ae,{href:"/forgot-password",children:r.jsx(F,{type:"button",variant:"link",className:"text-sm text-primary hover:underline p-0 h-auto",children:"Forgot password?"})})]}),r.jsx(F,{type:"submit",className:"w-full btn-primary",disabled:n,children:n?"Signing in...":"Sign In"})]})}),r.jsx("div",{className:"mt-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx("span",{className:"text-muted-foreground",children:"Don't have an account? "}),r.jsx(Ae,{href:"/register",className:"text-primary hover:underline font-medium",children:"Create Account"})]})}),r.jsx("div",{className:"mt-6 border-t pt-6",children:r.jsxs("div",{className:"text-center mb-4",children:[r.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-950 rounded-lg border border-blue-200 dark:border-blue-800 mb-4",children:[r.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mb-2",children:r.jsx("strong",{children:"Password Reset:"})}),r.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:'Enter your email address and click "Forgot password?" to receive reset instructions. Note: Firebase domain authorization may be required for email delivery.'})]}),r.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Demo Accounts:"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex items-center justify-center space-x-2 p-2 bg-muted rounded",children:[r.jsx(Wr,{className:"h-4 w-4"}),r.jsx("span",{children:"Customer: customer@example.com"})]}),r.jsxs("div",{className:"flex items-center justify-center space-x-2 p-2 bg-muted rounded",children:[r.jsx(nr,{className:"h-4 w-4"}),r.jsx("span",{children:"Shopkeeper: shopkeeper@example.com"})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Password: password123"})]})]})})]})]})})})}const yxe=te.object({fullName:te.string().min(2,"Full name must be at least 2 characters"),email:te.string().email("Please enter a valid email address"),phone:te.string().min(10,"Phone number must be at least 10 digits"),password:te.string().min(6,"Password must be at least 6 characters"),confirmPassword:te.string(),role:te.enum(["customer","shopkeeper","delivery_partner"]),address:te.string().optional(),vehicleType:te.string().optional(),vehicleNumber:te.string().optional(),vehicleBrand:te.string().optional(),vehicleModel:te.string().optional(),vehicleYear:te.string().optional(),vehicleColor:te.string().optional(),drivingLicense:te.string().optional(),licenseExpiryDate:te.string().optional(),idProofType:te.string().optional(),idProofNumber:te.string().optional(),bankAccountNumber:te.string().optional(),ifscCode:te.string().optional(),bankName:te.string().optional(),accountHolderName:te.string().optional(),emergencyContactName:te.string().optional(),emergencyContactPhone:te.string().optional(),emergencyContactRelation:te.string().optional(),deliveryAreas:te.array(te.string()).optional(),workingHours:te.string().optional(),experience:te.string().optional(),previousEmployment:te.string().optional(),references:te.string().optional(),medicalCertificate:te.string().optional(),policeClearance:te.string().optional(),idProofUrl:te.string().optional(),drivingLicenseUrl:te.string().optional(),vehicleRegistrationUrl:te.string().optional(),insuranceUrl:te.string().optional(),photoUrl:te.string().optional(),termsAccepted:te.boolean().optional()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}).refine(e=>e.role==="delivery_partner"?e.vehicleType&&e.vehicleType.length>0:!0,{message:"Vehicle type is required for delivery partners",path:["vehicleType"]}).refine(e=>e.role==="delivery_partner"?e.vehicleNumber&&e.vehicleNumber.length>0:!0,{message:"Vehicle number is required for delivery partners",path:["vehicleNumber"]}).refine(e=>e.role==="delivery_partner"&&e.vehicleType!=="bicycle"?e.drivingLicense&&e.drivingLicense.length>0:!0,{message:"Driving license number is required for motorized vehicles",path:["drivingLicense"]}).refine(e=>e.role==="delivery_partner"?e.idProofType&&e.idProofType.length>0:!0,{message:"ID proof type is required for delivery partners",path:["idProofType"]}).refine(e=>e.role==="delivery_partner"?e.idProofNumber&&e.idProofNumber.length>0:!0,{message:"ID proof number is required for delivery partners",path:["idProofNumber"]}).refine(e=>e.role==="delivery_partner"?e.bankAccountNumber&&e.bankAccountNumber.length>0:!0,{message:"Bank account number is required for delivery partners",path:["bankAccountNumber"]}).refine(e=>e.role==="delivery_partner"?e.ifscCode&&e.ifscCode.length>0:!0,{message:"IFSC code is required for delivery partners",path:["ifscCode"]}).refine(e=>e.role==="delivery_partner"?e.emergencyContactName&&e.emergencyContactName.length>0:!0,{message:"Emergency contact name is required for delivery partners",path:["emergencyContactName"]}).refine(e=>e.role==="delivery_partner"?e.emergencyContactPhone&&e.emergencyContactPhone.length>0:!0,{message:"Emergency contact phone is required for delivery partners",path:["emergencyContactPhone"]}).refine(e=>e.role==="delivery_partner"?e.termsAccepted===!0:!0,{message:"You must accept the terms and conditions",path:["termsAccepted"]});function jxe(){var x;const[e,t]=j.useState(!1),[n,s]=j.useState(!1),[i,a]=j.useState(!1),[,o]=Jr(),{register:l,user:c}=Gt(),{toast:d}=ft();(c==null?void 0:c.role)==="admin"||(x=c==null?void 0:c.email)!=null&&x.includes("admin")||localStorage.getItem("isAdmin");const h=an({resolver:on(yxe),defaultValues:{fullName:"",email:"",phone:"",password:"",confirmPassword:"",role:"customer",address:"",vehicleType:"",vehicleNumber:"",vehicleBrand:"",vehicleModel:"",vehicleYear:"",vehicleColor:"",drivingLicense:"",licenseExpiryDate:"",idProofType:"",idProofNumber:"",bankAccountNumber:"",ifscCode:"",bankName:"",accountHolderName:"",emergencyContactName:"",emergencyContactPhone:"",emergencyContactRelation:"",deliveryAreas:[],workingHours:"",experience:"",previousEmployment:"",references:"",medicalCertificate:"",policeClearance:"",idProofUrl:"",drivingLicenseUrl:"",vehicleRegistrationUrl:"",insuranceUrl:"",photoUrl:"",termsAccepted:!1}}),m=h.watch("role"),f=h.watch("vehicleType"),g=async p=>{a(!0);try{const{confirmPassword:y,termsAccepted:b,...w}=p,N={...w,status:w.role==="shopkeeper"||w.role==="delivery_partner"?"pending":"active"};let S;if(w.role==="customer")await l(N);else{const P=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)});if(!P.ok){let O=(await P.json()).error||"Registration failed";throw(O.includes("duplicate key")||O.includes("already exists"))&&(O.includes("email")?O="An account with this email already exists.":O.includes("phone")?O="An account with this phone number already exists.":O="An account with these credentials already exists."),new Error(O)}const C=await P.json();S=C.user||C}if(w.role==="delivery_partner"&&S){const P={userId:S.id,vehicleType:p.vehicleType,vehicleNumber:p.vehicleNumber,vehicleBrand:p.vehicleBrand,vehicleModel:p.vehicleModel,vehicleYear:p.vehicleYear,vehicleColor:p.vehicleColor,drivingLicense:p.drivingLicense,licenseExpiryDate:p.licenseExpiryDate,idProofType:p.idProofType,idProofNumber:p.idProofNumber,bankAccountNumber:p.bankAccountNumber,ifscCode:p.ifscCode,bankName:p.bankName,accountHolderName:p.accountHolderName,emergencyContactName:p.emergencyContactName,emergencyContactPhone:p.emergencyContactPhone,emergencyContactRelation:p.emergencyContactRelation,deliveryAreas:p.deliveryAreas||[],workingHours:p.workingHours,experience:p.experience,previousEmployment:p.previousEmployment,references:p.references,idProofUrl:p.idProofUrl,drivingLicenseUrl:p.drivingLicenseUrl||"",vehicleRegistrationUrl:p.vehicleRegistrationUrl,insuranceUrl:p.insuranceUrl,photoUrl:p.photoUrl};await fetch("/api/delivery-partners",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)}),d({title:"Application submitted!",description:"Your delivery partner application is pending admin approval. You'll be notified once approved."}),o("/login")}else w.role==="shopkeeper"?(d({title:"Application submitted!",description:"Your shopkeeper account is pending admin approval. You'll be notified once approved."}),o("/login")):(d({title:"Account created successfully!",description:"Welcome to Siraha Bazaar. You are now logged in."}),o("/"))}catch(y){d({title:"Registration failed",description:y instanceof Error?y.message:"Failed to create account",variant:"destructive"})}finally{a(!1)}};return r.jsx("div",{className:"min-h-screen bg-muted flex items-center justify-center py-12",children:r.jsx("div",{className:"w-full max-w-md",children:r.jsxs(G,{children:[r.jsxs(se,{className:"text-center",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx(nr,{className:"h-8 w-8 text-primary mr-2"}),r.jsx("span",{className:"text-2xl font-bold text-foreground",children:"Siraha Bazaar"})]}),r.jsx(ie,{className:"text-2xl",children:"Create Account"}),r.jsx("p",{className:"text-muted-foreground",children:"Join our local marketplace community"})]}),r.jsxs(Z,{children:[r.jsx(Or,{...h,children:r.jsxs("form",{onSubmit:h.handleSubmit(g),className:"space-y-4",children:[r.jsx(oe,{control:h.control,name:"fullName",render:({field:p})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Full Name"}),r.jsx(me,{children:r.jsx(he,{placeholder:"Enter your full name",...p})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:h.control,name:"email",render:({field:p})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Email Address"}),r.jsx(me,{children:r.jsx(he,{type:"email",placeholder:"Enter your email",...p})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:h.control,name:"phone",render:({field:p})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Phone Number"}),r.jsx(me,{children:r.jsx(he,{type:"tel",placeholder:"Enter your phone number",...p})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:h.control,name:"role",render:({field:p})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Account Type"}),r.jsxs(ct,{onValueChange:p.onChange,defaultValue:p.value,children:[r.jsx(me,{children:r.jsx(it,{children:r.jsx(dt,{placeholder:"Select account type"})})}),r.jsxs(at,{children:[r.jsx(ne,{value:"customer",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Wr,{className:"h-4 w-4 mr-2"}),"Customer - Shop from local stores"]})}),r.jsx(ne,{value:"shopkeeper",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(nr,{className:"h-4 w-4 mr-2"}),"Shopkeeper - Sell your products"]})}),r.jsx(ne,{value:"delivery_partner",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(kt,{className:"h-4 w-4 mr-2"}),"Delivery Partner - Deliver orders"]})})]})]}),r.jsx(fe,{})]})}),r.jsx(oe,{control:h.control,name:"password",render:({field:p})=>{const y=p.value||"";let b=0,w="Very Weak",N="bg-red-500";return y.length>=8&&(b+=20),y.match(/[a-z]/)&&(b+=20),y.match(/[A-Z]/)&&(b+=20),y.match(/[0-9]/)&&(b+=20),y.match(/[^a-zA-Z0-9]/)&&(b+=20),b>=80?(w="Very Strong",N="bg-green-500"):b>=60?(w="Strong",N="bg-blue-500"):b>=40?(w="Medium",N="bg-yellow-500"):b>=20&&(w="Weak",N="bg-orange-500"),r.jsxs(ae,{children:[r.jsx(de,{children:"Password"}),r.jsx(me,{children:r.jsxs("div",{className:"relative",children:[r.jsx(he,{type:e?"text":"password",placeholder:"Create a password",...p}),r.jsx(F,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>t(!e),children:e?r.jsx(R_,{className:"h-4 w-4"}):r.jsx(ks,{className:"h-4 w-4"})})]})}),y&&r.jsxs("div",{className:"mt-2 space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Password Strength:"}),r.jsx("span",{className:`font-medium ${b>=80?"text-green-600":b>=60?"text-blue-600":b>=40?"text-yellow-600":b>=20?"text-orange-600":"text-red-600"}`,children:w})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:r.jsx("div",{className:`h-full ${N} transition-all duration-500 ease-out rounded-full`,style:{width:`${b}%`}})}),r.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${y.length>=8?"bg-green-500":"bg-gray-300"} transition-colors duration-300`}),r.jsx("span",{children:"At least 8 characters"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${y.match(/[a-z]/)?"bg-green-500":"bg-gray-300"} transition-colors duration-300`}),r.jsx("span",{children:"Lowercase letter"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${y.match(/[A-Z]/)?"bg-green-500":"bg-gray-300"} transition-colors duration-300`}),r.jsx("span",{children:"Uppercase letter"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${y.match(/[0-9]/)?"bg-green-500":"bg-gray-300"} transition-colors duration-300`}),r.jsx("span",{children:"Number"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${y.match(/[^a-zA-Z0-9]/)?"bg-green-500":"bg-gray-300"} transition-colors duration-300`}),r.jsx("span",{children:"Special character"})]})]})]}),r.jsx(fe,{})]})}}),r.jsx(oe,{control:h.control,name:"confirmPassword",render:({field:p})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Confirm Password"}),r.jsx(me,{children:r.jsxs("div",{className:"relative",children:[r.jsx(he,{type:n?"text":"password",placeholder:"Confirm your password",...p}),r.jsx(F,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>s(!n),children:n?r.jsx(R_,{className:"h-4 w-4"}):r.jsx(ks,{className:"h-4 w-4"})})]})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:h.control,name:"address",render:({field:p})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Address"}),r.jsx(me,{children:r.jsx(Yt,{placeholder:"Enter your address",...p})}),r.jsx(fe,{})]})}),m==="delivery_partner"&&r.jsxs("div",{className:"space-y-6 border rounded-lg p-6 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("div",{className:"flex items-center justify-center mb-4",children:r.jsx("div",{className:"p-3 bg-blue-600 rounded-full",children:r.jsx(kt,{className:"h-8 w-8 text-white"})})}),r.jsx("h2",{className:"text-2xl font-bold text-blue-800 dark:text-blue-200",children:"Delivery Partner Verification"}),r.jsx("p",{className:"text-blue-600 dark:text-blue-300 mt-2",children:"Complete all sections to join our delivery network"})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4 flex items-center",children:[r.jsx(Wr,{className:"h-5 w-5 mr-2"}),"Personal Information"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(oe,{control:h.control,name:"emergencyContactName",render:({field:p})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Emergency Contact Name *"}),r.jsx(me,{children:r.jsx(he,{placeholder:"Full name of emergency contact",...p})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:h.control,name:"emergencyContactPhone",render:({field:p})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Emergency Contact Phone *"}),r.jsx(me,{children:r.jsx(he,{placeholder:"Emergency contact phone number",...p})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:h.control,name:"emergencyContactRelation",render:({field:p})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Relationship"}),r.jsxs(ct,{onValueChange:p.onChange,defaultValue:p.value,children:[r.jsx(me,{children:r.jsx(it,{children:r.jsx(dt,{placeholder:"Select relationship"})})}),r.jsxs(at,{children:[r.jsx(ne,{value:"parent",children:"Parent"}),r.jsx(ne,{value:"spouse",children:"Spouse"}),r.jsx(ne,{value:"sibling",children:"Sibling"}),r.jsx(ne,{value:"friend",children:"Friend"}),r.jsx(ne,{value:"other",children:"Other"})]})]}),r.jsx(fe,{})]})}),r.jsx(oe,{control:h.control,name:"experience",render:({field:p})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Delivery Experience"}),r.jsxs(ct,{onValueChange:p.onChange,defaultValue:p.value,children:[r.jsx(me,{children:r.jsx(it,{children:r.jsx(dt,{placeholder:"Select experience level"})})}),r.jsxs(at,{children:[r.jsx(ne,{value:"0-6months",children:"0-6 months"}),r.jsx(ne,{value:"6months-1year",children:"6 months - 1 year"}),r.jsx(ne,{value:"1-2years",children:"1-2 years"}),r.jsx(ne,{value:"2-5years",children:"2-5 years"}),r.jsx(ne,{value:"5years+",children:"5+ years"})]})]}),r.jsx(fe,{})]})})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4 flex items-center",children:[r.jsx(kt,{className:"h-5 w-5 mr-2"}),"Vehicle Information"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(oe,{control:h.control,name:"vehicleType",render:({field:p})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Vehicle Type *"}),r.jsxs(ct,{onValueChange:p.onChange,defaultValue:p.value,children:[r.jsx(me,{children:r.jsx(it,{children:r.jsx(dt,{placeholder:"Select vehicle type"})})}),r.jsxs(at,{children:[r.jsx(ne,{value:"motorcycle",children:"Motorcycle"}),r.jsx(ne,{value:"bicycle",children:"Bicycle"}),r.jsx(ne,{value:"scooter",children:"Scooter"}),r.jsx(ne,{value:"car",children:"Car"}),r.jsx(ne,{value:"van",children:"Van"})]})]}),r.jsx(fe,{})]})}),r.jsx(oe,{control:h.control,name:"vehicleNumber",render:({field:p})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Vehicle Number *"}),r.jsx(me,{children:r.jsx(he,{placeholder:"e.g., BA 12 PA 1234",...p})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:h.control,name:"vehicleBrand",render:({field:p})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Vehicle Brand"}),r.jsx(me,{children:r.jsx(he,{placeholder:"e.g., Honda, Yamaha, Hero",...p})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:h.control,name:"vehicleModel",render:({field:p})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Vehicle Model"}),r.jsx(me,{children:r.jsx(he,{placeholder:"e.g., Splendor, FZ, Activa",...p})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:h.control,name:"vehicleYear",render:({field:p})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Vehicle Year"}),r.jsx(me,{children:r.jsx(he,{placeholder:"e.g., 2020, 2021, 2022",...p})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:h.control,name:"vehicleColor",render:({field:p})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Vehicle Color"}),r.jsx(me,{children:r.jsx(he,{placeholder:"e.g., Red, Blue, Black",...p})}),r.jsx(fe,{})]})})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4 flex items-center",children:[r.jsx(Us,{className:"h-5 w-5 mr-2"}),"License & Documents"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f!=="bicycle"&&r.jsxs(r.Fragment,{children:[r.jsx(oe,{control:h.control,name:"drivingLicense",render:({field:p})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Driving License Number *"}),r.jsx(me,{children:r.jsx(he,{placeholder:"Enter license number",...p})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:h.control,name:"licenseExpiryDate",render:({field:p})=>r.jsxs(ae,{children:[r.jsx(de,{children:"License Expiry Date"}),r.jsx(me,{children:r.jsx(he,{type:"date",...p})}),r.jsx(fe,{})]})})]}),f==="bicycle"&&r.jsx("div",{className:"col-span-2 p-3 bg-green-50 dark:bg-green-950 rounded-lg border border-green-200 dark:border-green-800",children:r.jsxs("p",{className:"text-sm text-green-800 dark:text-green-200",children:[r.jsx("strong",{children:"Note:"})," Driving license is not required for bicycle delivery partners."]})}),r.jsx(oe,{control:h.control,name:"idProofType",render:({field:p})=>r.jsxs(ae,{children:[r.jsx(de,{children:"ID Proof Type *"}),r.jsxs(ct,{onValueChange:p.onChange,defaultValue:p.value,children:[r.jsx(me,{children:r.jsx(it,{children:r.jsx(dt,{placeholder:"Select ID type"})})}),r.jsxs(at,{children:[r.jsx(ne,{value:"citizenship",children:"Citizenship Certificate"}),r.jsx(ne,{value:"passport",children:"Passport"}),r.jsx(ne,{value:"voter_id",children:"Voter ID"}),r.jsx(ne,{value:"national_id",children:"National ID"})]})]}),r.jsx(fe,{})]})}),r.jsx(oe,{control:h.control,name:"idProofNumber",render:({field:p})=>r.jsxs(ae,{children:[r.jsx(de,{children:"ID Proof Number *"}),r.jsx(me,{children:r.jsx(he,{placeholder:"Enter ID number",...p})}),r.jsx(fe,{})]})})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4 flex items-center",children:[r.jsx(Hr,{className:"h-5 w-5 mr-2"}),"Banking Information"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(oe,{control:h.control,name:"bankAccountNumber",render:({field:p})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Bank Account Number *"}),r.jsx(me,{children:r.jsx(he,{placeholder:"Enter account number",...p})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:h.control,name:"ifscCode",render:({field:p})=>r.jsxs(ae,{children:[r.jsx(de,{children:"IFSC Code *"}),r.jsx(me,{children:r.jsx(he,{placeholder:"Enter IFSC code",...p})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:h.control,name:"bankName",render:({field:p})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Bank Name"}),r.jsx(me,{children:r.jsx(he,{placeholder:"Enter bank name",...p})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:h.control,name:"accountHolderName",render:({field:p})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Account Holder Name"}),r.jsx(me,{children:r.jsx(he,{placeholder:"Name as per bank account",...p})}),r.jsx(fe,{})]})})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4 flex items-center",children:[r.jsx(gt,{className:"h-5 w-5 mr-2"}),"Working Preferences"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(oe,{control:h.control,name:"workingHours",render:({field:p})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Preferred Working Hours"}),r.jsxs(ct,{onValueChange:p.onChange,defaultValue:p.value,children:[r.jsx(me,{children:r.jsx(it,{children:r.jsx(dt,{placeholder:"Select working hours"})})}),r.jsxs(at,{children:[r.jsx(ne,{value:"morning",children:"Morning (6AM - 12PM)"}),r.jsx(ne,{value:"afternoon",children:"Afternoon (12PM - 6PM)"}),r.jsx(ne,{value:"evening",children:"Evening (6PM - 12AM)"}),r.jsx(ne,{value:"full-time",children:"Full Time (6AM - 12AM)"}),r.jsx(ne,{value:"flexible",children:"Flexible Hours"})]})]}),r.jsx(fe,{})]})}),r.jsx(oe,{control:h.control,name:"previousEmployment",render:({field:p})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Previous Employment"}),r.jsx(me,{children:r.jsx(Yt,{placeholder:"Describe your previous work experience (optional)",...p})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:h.control,name:"references",render:({field:p})=>r.jsxs(ae,{children:[r.jsx(de,{children:"References"}),r.jsx(me,{children:r.jsx(Yt,{placeholder:"Provide references if any (name, phone, relationship)",...p})}),r.jsx(fe,{})]})})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4 flex items-center",children:[r.jsx(Ws,{className:"h-5 w-5 mr-2"}),"Document Uploads"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(oe,{control:h.control,name:"idProofUrl",render:({field:p})=>r.jsxs(ae,{children:[r.jsx(de,{children:"ID Proof Document *"}),r.jsx(me,{children:r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx(Ws,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsxs("div",{className:"mt-4",children:[r.jsx(he,{type:"file",accept:"image/*,.pdf",onChange:y=>{var w;const b=(w=y.target.files)==null?void 0:w[0];b&&p.onChange(`/uploads/id_${Date.now()}.${b.name.split(".").pop()}`)},className:"hidden",id:"idProof"}),r.jsx("label",{htmlFor:"idProof",className:"cursor-pointer text-sm font-medium text-primary hover:text-primary/80",children:"Upload Citizenship or National ID"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"PNG, JPG, PDF up to 10MB"})]})]}),p.value&&r.jsxs("div",{className:"mt-2 flex items-center text-sm text-green-600",children:[r.jsx(wt,{className:"h-4 w-4 mr-1"}),"Document uploaded"]})]})}),r.jsx(fe,{})]})}),f!=="bicycle"&&r.jsx(oe,{control:h.control,name:"drivingLicenseUrl",render:({field:p})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Driving License Document"}),r.jsx(me,{children:r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx(Ws,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsxs("div",{className:"mt-4",children:[r.jsx(he,{type:"file",accept:"image/*,.pdf",onChange:y=>{var w;const b=(w=y.target.files)==null?void 0:w[0];b&&p.onChange(`/uploads/license_${Date.now()}.${b.name.split(".").pop()}`)},className:"hidden",id:"drivingLicense"}),r.jsx("label",{htmlFor:"drivingLicense",className:"cursor-pointer text-sm font-medium text-primary hover:text-primary/80",children:"Upload Driving License"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"PNG, JPG, PDF up to 10MB"})]})]}),p.value&&r.jsxs("div",{className:"mt-2 flex items-center text-sm text-green-600",children:[r.jsx(wt,{className:"h-4 w-4 mr-1"}),"Document uploaded"]})]})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:h.control,name:"vehicleRegistrationUrl",render:({field:p})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Vehicle Registration"}),r.jsx(me,{children:r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx(Ws,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsxs("div",{className:"mt-4",children:[r.jsx(he,{type:"file",accept:"image/*,.pdf",onChange:y=>{var w;const b=(w=y.target.files)==null?void 0:w[0];b&&p.onChange(`/uploads/registration_${Date.now()}.${b.name.split(".").pop()}`)},className:"hidden",id:"vehicleRegistration"}),r.jsx("label",{htmlFor:"vehicleRegistration",className:"cursor-pointer text-sm font-medium text-primary hover:text-primary/80",children:"Upload Vehicle Registration"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"PNG, JPG, PDF up to 10MB"})]})]}),p.value&&r.jsxs("div",{className:"mt-2 flex items-center text-sm text-green-600",children:[r.jsx(wt,{className:"h-4 w-4 mr-1"}),"Document uploaded"]})]})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:h.control,name:"insuranceUrl",render:({field:p})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Vehicle Insurance"}),r.jsx(me,{children:r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx(Ws,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsxs("div",{className:"mt-4",children:[r.jsx(he,{type:"file",accept:"image/*,.pdf",onChange:y=>{var w;const b=(w=y.target.files)==null?void 0:w[0];b&&p.onChange(`/uploads/insurance_${Date.now()}.${b.name.split(".").pop()}`)},className:"hidden",id:"insurance"}),r.jsx("label",{htmlFor:"insurance",className:"cursor-pointer text-sm font-medium text-primary hover:text-primary/80",children:"Upload Insurance Document"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"PNG, JPG, PDF up to 10MB"})]})]}),p.value&&r.jsxs("div",{className:"mt-2 flex items-center text-sm text-green-600",children:[r.jsx(wt,{className:"h-4 w-4 mr-1"}),"Document uploaded"]})]})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:h.control,name:"photoUrl",render:({field:p})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Profile Photo"}),r.jsx(me,{children:r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx(Ws,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsxs("div",{className:"mt-4",children:[r.jsx(he,{type:"file",accept:"image/*",onChange:y=>{var w;const b=(w=y.target.files)==null?void 0:w[0];b&&p.onChange(`/uploads/photo_${Date.now()}.${b.name.split(".").pop()}`)},className:"hidden",id:"photo"}),r.jsx("label",{htmlFor:"photo",className:"cursor-pointer text-sm font-medium text-primary hover:text-primary/80",children:"Upload Profile Photo"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"PNG, JPG up to 5MB"})]})]}),p.value&&r.jsxs("div",{className:"mt-2 flex items-center text-sm text-green-600",children:[r.jsx(wt,{className:"h-4 w-4 mr-1"}),"Photo uploaded"]})]})}),r.jsx(fe,{})]})})]})]}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:r.jsx(oe,{control:h.control,name:"termsAccepted",render:({field:p})=>r.jsxs(ae,{className:"flex flex-row items-start space-x-3 space-y-0",children:[r.jsx(me,{children:r.jsx(xc,{checked:p.value,onCheckedChange:p.onChange})}),r.jsxs("div",{className:"space-y-1 leading-none",children:[r.jsx(de,{children:"I accept the terms and conditions *"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"I agree to provide delivery services according to platform guidelines, maintain vehicle in good condition, and follow all safety protocols. I understand that my application will be reviewed and I may be contacted for additional verification."})]}),r.jsx(fe,{})]})})}),r.jsx("div",{className:"bg-green-50 dark:bg-green-950 p-4 rounded-lg border border-green-200 dark:border-green-800",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(wt,{className:"h-5 w-5 text-green-600 mt-0.5"}),r.jsxs("div",{className:"text-sm text-green-800 dark:text-green-200",children:[r.jsx("p",{className:"font-medium mb-2",children:"What happens next?"}),r.jsxs("ul",{className:"space-y-1 text-xs",children:[r.jsx("li",{children:" Your application will be reviewed within 24-48 hours"}),r.jsx("li",{children:" You'll receive an email notification about your application status"}),r.jsx("li",{children:" Upon approval, you can start accepting delivery orders immediately"}),r.jsx("li",{children:" You'll have access to our delivery partner dashboard and training materials"})]})]})]})})]}),r.jsx(F,{type:"submit",className:"w-full btn-primary",disabled:i,children:i?"Creating account...":"Create Account"})]})}),r.jsx("div",{className:"mt-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx("span",{className:"text-muted-foreground",children:"Already have an account? "}),r.jsx(Ae,{href:"/login",className:"text-primary hover:underline font-medium",children:"Sign in"})]})}),m==="shopkeeper"&&r.jsx("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-950 rounded-lg",children:r.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[r.jsx("strong",{children:"Shopkeeper Benefits:"}),r.jsx("br",{})," Create and manage your online store",r.jsx("br",{})," Reach customers in your local area",r.jsx("br",{})," Track orders and inventory",r.jsx("br",{})," No setup fees - start selling immediately"]})}),m==="delivery_partner"&&r.jsx("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-950 rounded-lg",children:r.jsxs("p",{className:"text-sm text-green-800 dark:text-green-200",children:[r.jsx("strong",{children:"Delivery Partner Benefits:"}),r.jsx("br",{})," Flexible working hours - work when you want",r.jsx("br",{})," Competitive delivery fees and bonuses",r.jsx("br",{})," Weekly payments directly to your account",r.jsx("br",{})," Support team available 24/7 for assistance",r.jsx("br",{})," Get started immediately after approval"]})})]})]})})})}const bxe=te.object({email:te.string().email("Please enter a valid email address")});function wxe(){const[e,t]=j.useState(!1),[n,s]=j.useState(!1),[,i]=Jr(),{toast:a}=ft(),o=an({resolver:on(bxe),defaultValues:{email:""}}),l=async c=>{t(!0);try{console.log("Attempting to send password reset email to:",c.email);const d=await fetch("/api/auth/request-password-reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});console.log("Response status:",d.status),console.log("Response ok:",d.ok);const h=await d.json();console.log("Response data:",h),d.ok?(s(!0),a({title:"Password reset email sent",description:"Check your email for reset instructions."})):a({title:"Error",description:h.error||h.message||"Failed to send reset email. Please try again.",variant:"destructive"})}catch(d){console.error("Password reset error:",d),a({title:"Error",description:`Something went wrong: ${d instanceof Error?d.message:"Unknown error"}. Please try again.`,variant:"destructive"})}finally{t(!1)}};return n?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:r.jsxs(G,{className:"w-full max-w-md",children:[r.jsxs(se,{className:"text-center",children:[r.jsx("div",{className:"mx-auto mb-4 w-12 h-12 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center",children:r.jsx(wt,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),r.jsx(ie,{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Email Sent!"})]}),r.jsxs(Z,{className:"space-y-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"We've sent password reset instructions to your email address."}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Check your inbox and spam folder. The link will expire in 1 hour."})]}),r.jsxs(ri,{children:[r.jsx(Id,{className:"h-4 w-4"}),r.jsx(ni,{children:"Didn't receive the email? Check your spam folder or try again in a few minutes."})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(F,{onClick:()=>s(!1),variant:"outline",className:"w-full",children:"Send Another Email"}),r.jsx(F,{onClick:()=>i("/login"),className:"w-full",children:"Back to Login"})]})]})]})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:r.jsxs(G,{className:"w-full max-w-md",children:[r.jsxs(se,{className:"text-center",children:[r.jsx("div",{className:"mx-auto mb-4 w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:r.jsx(Id,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),r.jsx(ie,{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Forgot Password?"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Enter your email address and we'll send you a link to reset your password."})]}),r.jsxs(Z,{children:[r.jsx(Or,{...o,children:r.jsxs("form",{onSubmit:o.handleSubmit(l),className:"space-y-6",children:[r.jsx(oe,{control:o.control,name:"email",render:({field:c})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Email Address"}),r.jsx(me,{children:r.jsx(he,{type:"email",placeholder:"Enter your email address",...c})}),r.jsx(fe,{})]})}),r.jsx(F,{type:"submit",className:"w-full",disabled:e,children:e?"Sending...":"Send Reset Email"})]})}),r.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:r.jsx("div",{className:"text-center",children:r.jsx(Ae,{href:"/login",children:r.jsxs(F,{variant:"ghost",className:"text-sm",children:[r.jsx(Xa,{className:"w-4 h-4 mr-2"}),"Back to Login"]})})})}),r.jsxs(ri,{className:"mt-4",children:[r.jsx(wr,{className:"h-4 w-4"}),r.jsx(ni,{className:"text-xs",children:"For security reasons, we'll send reset instructions even if the email isn't registered with us."})]})]})]})})}var qT="Collapsible",[Nxe,VUe]=xn(qT),[Sxe,KT]=Nxe(qT),v7=j.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:s,defaultOpen:i,disabled:a,onOpenChange:o,...l}=e,[c=!1,d]=Li({prop:s,defaultProp:i,onChange:o});return r.jsx(Sxe,{scope:n,disabled:a,contentId:ca(),open:c,onOpenToggle:j.useCallback(()=>d(h=>!h),[d]),children:r.jsx(Qe.div,{"data-state":ZT(c),"data-disabled":a?"":void 0,...l,ref:t})})});v7.displayName=qT;var y7="CollapsibleTrigger",j7=j.forwardRef((e,t)=>{const{__scopeCollapsible:n,...s}=e,i=KT(y7,n);return r.jsx(Qe.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":ZT(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...s,ref:t,onClick:Fe(e.onClick,i.onOpenToggle)})});j7.displayName=y7;var GT="CollapsibleContent",b7=j.forwardRef((e,t)=>{const{forceMount:n,...s}=e,i=KT(GT,e.__scopeCollapsible);return r.jsx(On,{present:n||i.open,children:({present:a})=>r.jsx(_xe,{...s,ref:t,present:a})})});b7.displayName=GT;var _xe=j.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:s,children:i,...a}=e,o=KT(GT,n),[l,c]=j.useState(s),d=j.useRef(null),h=St(t,d),m=j.useRef(0),f=m.current,g=j.useRef(0),x=g.current,p=o.open||l,y=j.useRef(p),b=j.useRef(void 0);return j.useEffect(()=>{const w=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(w)},[]),ln(()=>{const w=d.current;if(w){b.current=b.current||{transitionDuration:w.style.transitionDuration,animationName:w.style.animationName},w.style.transitionDuration="0s",w.style.animationName="none";const N=w.getBoundingClientRect();m.current=N.height,g.current=N.width,y.current||(w.style.transitionDuration=b.current.transitionDuration,w.style.animationName=b.current.animationName),c(s)}},[o.open,s]),r.jsx(Qe.div,{"data-state":ZT(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!p,...a,ref:h,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":x?`${x}px`:void 0,...e.style},children:p&&i})});function ZT(e){return e?"open":"closed"}var Pxe=v7;const Cxe=Pxe,kxe=j7,Txe=b7;function GD(){const[e]=Jr(),t=e.includes("/restaurants"),[n,s]=j.useState(""),[i,a]=j.useState(t?"restaurant":"all"),[o,l]=j.useState("all"),[c,d]=j.useState("all"),[h,m]=j.useState("all"),[f,g]=j.useState(null),[x,p]=j.useState(!1);j.useState([]);const[y,b]=j.useState(!1),[w,N]=j.useState(!1),{toast:S}=ft(),{data:P=[],isLoading:C,error:k,refetch:O}=Re({queryKey:["/api/stores"],retry:3,staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0});k&&console.error("Stores loading failed:",{error:k,message:k instanceof Error?k.message:"Unknown error",timestamp:new Date().toISOString()}),j.useEffect(()=>{Go().then(M=>{g(M),p(!0)}).catch(()=>{})},[]);const I=Array.from(new Set(P.filter(M=>M.storeType==="restaurant"&&M.cuisineType).map(M=>M.cuisineType))).filter(Boolean),T=P.filter(M=>{var z,q;if(t){if(M.storeType!=="restaurant")return!1}else if(M.storeType==="restaurant")return!1;const U=M.name.toLowerCase().includes(n.toLowerCase())||((z=M.description)==null?void 0:z.toLowerCase().includes(n.toLowerCase()))||M.address.toLowerCase().includes(n.toLowerCase())||((q=M.cuisineType)==null?void 0:q.toLowerCase().includes(n.toLowerCase())),H=i==="all"||M.storeType===i,K=o==="all"||M.cuisineType===o,W=c==="all"||c==="delivery"&&M.isDeliveryAvailable||c==="pickup"&&!M.isDeliveryAvailable,V=h==="all"||h==="4+"&&parseFloat(M.rating)>=4||h==="3+"&&parseFloat(M.rating)>=3;return U&&H&&K&&W&&V}),E=(M,U,H,K)=>{const V=(H-M)*Math.PI/180,z=(K-U)*Math.PI/180,q=Math.sin(V/2)*Math.sin(V/2)+Math.cos(M*Math.PI/180)*Math.cos(H*Math.PI/180)*Math.sin(z/2)*Math.sin(z/2);return 6371*(2*Math.atan2(Math.sqrt(q),Math.sqrt(1-q)))},D=T.map(M=>{const U=f&&M.latitude&&M.longitude?E(f.latitude,f.longitude,parseFloat(M.latitude),parseFloat(M.longitude)):0;return{...M,distance:U}}).sort((M,U)=>M.distance-U.distance),B=async()=>{try{const M=await Go();g(M),p(!0),b(!0),S({title:"Location enabled",description:"Stores will now show distance from your location"})}catch{S({title:"Location access denied",description:"Please allow location access to see distances",variant:"destructive"})}};return C?r.jsx("div",{className:"min-h-screen bg-muted flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Loading stores..."})]})}):r.jsx("div",{className:"min-h-screen bg-muted",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[r.jsx(G,{className:"mb-8",children:r.jsx(Z,{className:"pt-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(zn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),r.jsx(he,{placeholder:t?"Search restaurants...":"Search stores...",value:n,onChange:M=>s(M.target.value),className:"pl-10"})]}),r.jsxs(Cxe,{open:w,onOpenChange:N,children:[r.jsx(kxe,{asChild:!0,children:r.jsxs(F,{variant:"outline",className:"w-full md:w-auto",children:[r.jsx(ji,{className:"h-4 w-4 mr-2"}),"Filters",w?r.jsx(Fr,{className:"h-4 w-4 ml-2"}):null]})}),r.jsx(Txe,{className:"mt-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[!t&&r.jsxs(ct,{value:i,onValueChange:a,children:[r.jsxs(it,{children:[r.jsx(nr,{className:"h-4 w-4 mr-2"}),r.jsx(dt,{placeholder:"All Stores"})]}),r.jsxs(at,{children:[r.jsx(ne,{value:"all",children:"All Stores"}),r.jsx(ne,{value:"retail",children:"Retail Stores"})]})]}),(t||i==="restaurant")&&I.length>0&&r.jsxs(ct,{value:o,onValueChange:l,children:[r.jsxs(it,{children:[r.jsx(Ti,{className:"h-4 w-4 mr-2"}),r.jsx(dt,{placeholder:"All Cuisines"})]}),r.jsxs(at,{children:[r.jsx(ne,{value:"all",children:"All Cuisines"}),I.map(M=>r.jsx(ne,{value:M,children:M},M))]})]}),r.jsxs(ct,{value:c,onValueChange:d,children:[r.jsxs(it,{children:[r.jsx(Le,{className:"h-4 w-4 mr-2"}),r.jsx(dt,{placeholder:"Delivery Options"})]}),r.jsxs(at,{children:[r.jsx(ne,{value:"all",children:"All Options"}),r.jsx(ne,{value:"delivery",children:"Delivery Available"}),r.jsx(ne,{value:"pickup",children:"Pickup Only"})]})]}),r.jsxs(ct,{value:h,onValueChange:m,children:[r.jsxs(it,{children:[r.jsx(ji,{className:"h-4 w-4 mr-2"}),r.jsx(dt,{placeholder:"Minimum Rating"})]}),r.jsxs(at,{children:[r.jsx(ne,{value:"all",children:"All Ratings"}),r.jsx(ne,{value:"4+",children:"4.0+ Stars"}),r.jsx(ne,{value:"3+",children:"3.0+ Stars"})]})]})]})})]}),!x&&r.jsxs(F,{variant:"outline",onClick:B,children:[r.jsx(Le,{className:"h-4 w-4 mr-2"}),"Enable Location"]})]}),x&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Le,{className:"h-4 w-4 text-green-500"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"Location enabled - stores sorted by distance"})]})]})})}),r.jsx("div",{className:"mb-6",children:r.jsx("h2",{className:"text-xl font-semibold",children:t?"Restaurants":"Stores"})}),k?r.jsx(G,{children:r.jsxs(Z,{className:"pt-6 text-center",children:[r.jsxs(ri,{className:"max-w-md mx-auto mb-6",children:[r.jsx(wr,{className:"h-4 w-4"}),r.jsx(ni,{children:"Failed to load stores. Please try again."})]}),r.jsxs(F,{onClick:()=>O(),variant:"outline",disabled:C,children:[r.jsx(Ms,{className:`mr-2 h-4 w-4 ${C?"animate-spin":""}`}),"Retry Loading Stores"]})]})}):C?r.jsx("div",{className:`grid gap-2 sm:gap-4 ${t||i==="restaurant"?"grid-cols-2 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2":"grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4"}`,children:Array.from({length:6}).map((M,U)=>r.jsx(G,{className:"animate-pulse",children:r.jsxs(Z,{className:"p-3",children:[r.jsx("div",{className:"bg-gray-200 h-20 rounded-md mb-2"}),r.jsx("div",{className:"bg-gray-200 h-3 rounded mb-1"}),r.jsx("div",{className:"bg-gray-200 h-2 rounded w-2/3 mb-1"}),r.jsx("div",{className:"bg-gray-200 h-2 rounded w-1/2"})]})},U))}):D.length>0?r.jsx("div",{className:`grid gap-2 sm:gap-4 ${t||i==="restaurant"?"grid-cols-2 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2":"grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4"}`,children:D.map(M=>r.jsx(UV,{store:M,showDistance:x},M.id))}):r.jsx(G,{children:r.jsxs(Z,{className:"pt-6 text-center",children:[r.jsxs("div",{className:"text-muted-foreground mb-4",children:[r.jsx(zn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:t?"No restaurants found":"No stores found"}),r.jsx("p",{children:"Try adjusting your search criteria or filters to find what you're looking for"})]}),r.jsx(F,{variant:"outline",onClick:()=>{s(""),a(t?"restaurant":"all"),l("all"),d("all"),m("all")},children:"Clear All Filters"})]})})]})})}var YT="Switch",[Axe,UUe]=xn(YT),[Exe,Oxe]=Axe(YT),w7=j.forwardRef((e,t)=>{const{__scopeSwitch:n,name:s,checked:i,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:d,form:h,...m}=e,[f,g]=j.useState(null),x=St(t,N=>g(N)),p=j.useRef(!1),y=f?h||!!f.closest("form"):!0,[b=!1,w]=Li({prop:i,defaultProp:a,onChange:d});return r.jsxs(Exe,{scope:n,checked:b,disabled:l,children:[r.jsx(Qe.button,{type:"button",role:"switch","aria-checked":b,"aria-required":o,"data-state":_7(b),"data-disabled":l?"":void 0,disabled:l,value:c,...m,ref:x,onClick:Fe(e.onClick,N=>{w(S=>!S),y&&(p.current=N.isPropagationStopped(),p.current||N.stopPropagation())})}),y&&r.jsx(Mxe,{control:f,bubbles:!p.current,name:s,value:c,checked:b,required:o,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});w7.displayName=YT;var N7="SwitchThumb",S7=j.forwardRef((e,t)=>{const{__scopeSwitch:n,...s}=e,i=Oxe(N7,n);return r.jsx(Qe.span,{"data-state":_7(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:t})});S7.displayName=N7;var Mxe=e=>{const{control:t,checked:n,bubbles:s=!0,...i}=e,a=j.useRef(null),o=Cg(n),l=gg(t);return j.useEffect(()=>{const c=a.current,d=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(d,"checked").set;if(o!==n&&m){const f=new Event("click",{bubbles:s});m.call(c,n),c.dispatchEvent(f)}},[o,n,s]),r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:a,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function _7(e){return e?"checked":"unchecked"}var P7=w7,Dxe=S7;const jn=j.forwardRef(({className:e,...t},n)=>r.jsx(P7,{className:Ve("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:r.jsx(Dxe,{className:Ve("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));jn.displayName=P7.displayName;function Ixe(){const[e,t]=j.useState(null),[n,s]=j.useState(!1),[i,a]=j.useState(!0),[o,l]=j.useState(null);j.useEffect(()=>{c()},[]);const c=async()=>{try{const m=NT();s(m),m||l("Notifications are not supported in this browser")}catch(m){console.error("Error checking notification support:",m),l("Failed to check notification support")}finally{a(!1)}};return{token:e,isSupported:n,isLoading:i,error:o,requestPermission:async()=>{try{if(!n)return!1;if(Notification.permission==="granted")return!0;const m=await Notification.requestPermission();return console.log("Notification permission:",m),m==="granted"?(new Notification("Notifications Enabled!",{body:"You will now receive push notifications from Siraha Bazaar",icon:"/favicon.ico",tag:"permission-granted"}),!0):m==="denied"?(l("Notification permission denied. Please enable notifications in your browser settings."),!1):(l("Notification permission not granted"),!1)}catch(m){return console.error("Error requesting permission:",m),l("Failed to request notification permission"),!1}},saveTokenToServer:async m=>{try{return await wT(m),!0}catch(f){return console.error("Error setting up notifications:",f),l("Failed to setup notifications"),!1}}}}function Lxe(e){const t=Ixe(),[n,s]=j.useState(!1);j.useEffect(()=>{e&&t.token&&!n&&i()},[e,t.token,n]);const i=async()=>{if(!(!e||!t.isSupported))try{await t.requestPermission()&&await t.saveTokenToServer(e)&&(s(!0),console.log("Push notifications setup completed"))}catch(a){console.error("Error setting up push notifications:",a)}};return{...t,isSetup:n,setupPushNotifications:i}}function Rxe(){const{user:e}=rl(),{isSupported:t,isLoading:n,error:s,token:i,isSetup:a,requestPermission:o,setupPushNotifications:l}=Lxe(e==null?void 0:e.id),[c,d]=j.useState({orderUpdates:!0,deliveryAlerts:!0,promotions:!1,newProducts:!1}),h=f=>{d(g=>({...g,[f]:!g[f]}))},m=async()=>{if(e!=null&&e.id)try{await o()&&await l()}catch(f){console.error("Error enabling push notifications:",f)}};return n?r.jsx(G,{children:r.jsx(Z,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-900"}),r.jsx("span",{children:"Loading notification settings..."})]})})}):r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Xt,{className:"h-5 w-5"}),r.jsx(ie,{children:"Push Notifications"})]}),r.jsx(Ct,{children:"Manage your notification preferences for order updates, promotions, and more."})]}),r.jsxs(Z,{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg",children:[r.jsx(tu,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Browser Support:"}),t?r.jsxs(le,{variant:"secondary",className:"bg-green-100 text-green-800",children:[r.jsx(wt,{className:"h-3 w-3 mr-1"}),"Supported"]}):r.jsxs(le,{variant:"destructive",children:[r.jsx(bM,{className:"h-3 w-3 mr-1"}),"Not Supported"]})]}),s&&r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[r.jsx(wr,{className:"h-4 w-4 text-red-600"}),r.jsx("span",{className:"text-sm text-red-700",children:s})]}),t&&!s&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium",children:"Push Notifications"}),r.jsx("p",{className:"text-sm text-gray-600",children:a?"You will receive push notifications for selected events":"Enable push notifications to stay updated"})]}),r.jsx("div",{className:"flex items-center gap-2",children:a?r.jsxs(le,{variant:"secondary",className:"bg-green-100 text-green-800",children:[r.jsx(wt,{className:"h-3 w-3 mr-1"}),"Enabled"]}):r.jsx(F,{onClick:m,size:"sm",children:"Enable Notifications"})})]}),a&&r.jsxs("div",{className:"space-y-4 border-t pt-4",children:[r.jsx("h4",{className:"font-medium",children:"Notification Types"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(be,{htmlFor:"orderUpdates",className:"font-medium",children:"Order Updates"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Get notified about order status changes"})]}),r.jsx(jn,{id:"orderUpdates",checked:c.orderUpdates,onCheckedChange:()=>h("orderUpdates")})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(be,{htmlFor:"deliveryAlerts",className:"font-medium",children:"Delivery Alerts"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Real-time updates on delivery progress"})]}),r.jsx(jn,{id:"deliveryAlerts",checked:c.deliveryAlerts,onCheckedChange:()=>h("deliveryAlerts")})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(be,{htmlFor:"promotions",className:"font-medium",children:"Promotions & Offers"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Special deals and discount notifications"})]}),r.jsx(jn,{id:"promotions",checked:c.promotions,onCheckedChange:()=>h("promotions")})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(be,{htmlFor:"newProducts",className:"font-medium",children:"New Products"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Updates about new products from your favorite stores"})]}),r.jsx(jn,{id:"newProducts",checked:c.newProducts,onCheckedChange:()=>h("newProducts")})]})]})]}),!1]}),!t&&r.jsxs("div",{className:"text-center py-6",children:[r.jsx(bM,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),r.jsx("h4",{className:"font-medium mb-2",children:"Push Notifications Not Available"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Your browser doesn't support push notifications. Try using a modern browser like Chrome, Firefox, or Safari."})]})]})]})}var C7=["PageUp","PageDown"],k7=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],T7={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},$m="Slider",[j2,$xe,Fxe]=mg($m),[A7,WUe]=xn($m,[Fxe]),[zxe,Qb]=A7($m),E7=j.forwardRef((e,t)=>{const{name:n,min:s=0,max:i=100,step:a=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:d=[s],value:h,onValueChange:m=()=>{},onValueCommit:f=()=>{},inverted:g=!1,form:x,...p}=e,y=j.useRef(new Set),b=j.useRef(0),N=o==="horizontal"?Bxe:Vxe,[S=[],P]=Li({prop:h,defaultProp:d,onChange:E=>{var B;(B=[...y.current][b.current])==null||B.focus(),m(E)}}),C=j.useRef(S);function k(E){const D=Kxe(S,E);T(E,D)}function O(E){T(E,b.current)}function I(){const E=C.current[b.current];S[b.current]!==E&&f(S)}function T(E,D,{commit:B}={commit:!1}){const M=Xxe(a),U=Qxe(Math.round((E-s)/a)*a+s,M),H=Xp(U,[s,i]);P((K=[])=>{const W=Hxe(K,H,D);if(Yxe(W,c*a)){b.current=W.indexOf(H);const V=String(W)!==String(K);return V&&B&&f(W),V?W:K}else return K})}return r.jsx(zxe,{scope:e.__scopeSlider,name:n,disabled:l,min:s,max:i,valueIndexToChangeRef:b,thumbs:y.current,values:S,orientation:o,form:x,children:r.jsx(j2.Provider,{scope:e.__scopeSlider,children:r.jsx(j2.Slot,{scope:e.__scopeSlider,children:r.jsx(N,{"aria-disabled":l,"data-disabled":l?"":void 0,...p,ref:t,onPointerDown:Fe(p.onPointerDown,()=>{l||(C.current=S)}),min:s,max:i,inverted:g,onSlideStart:l?void 0:k,onSlideMove:l?void 0:O,onSlideEnd:l?void 0:I,onHomeKeyDown:()=>!l&&T(s,0,{commit:!0}),onEndKeyDown:()=>!l&&T(i,S.length-1,{commit:!0}),onStepKeyDown:({event:E,direction:D})=>{if(!l){const U=C7.includes(E.key)||E.shiftKey&&k7.includes(E.key)?10:1,H=b.current,K=S[H],W=a*U*D;T(K+W,H,{commit:!0})}}})})})})});E7.displayName=$m;var[O7,M7]=A7($m,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Bxe=j.forwardRef((e,t)=>{const{min:n,max:s,dir:i,inverted:a,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d,...h}=e,[m,f]=j.useState(null),g=St(t,N=>f(N)),x=j.useRef(void 0),p=ru(i),y=p==="ltr",b=y&&!a||!y&&a;function w(N){const S=x.current||m.getBoundingClientRect(),P=[0,S.width],k=XT(P,b?[n,s]:[s,n]);return x.current=S,k(N-S.left)}return r.jsx(O7,{scope:e.__scopeSlider,startEdge:b?"left":"right",endEdge:b?"right":"left",direction:b?1:-1,size:"width",children:r.jsx(D7,{dir:p,"data-orientation":"horizontal",...h,ref:g,style:{...h.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:N=>{const S=w(N.clientX);o==null||o(S)},onSlideMove:N=>{const S=w(N.clientX);l==null||l(S)},onSlideEnd:()=>{x.current=void 0,c==null||c()},onStepKeyDown:N=>{const P=T7[b?"from-left":"from-right"].includes(N.key);d==null||d({event:N,direction:P?-1:1})}})})}),Vxe=j.forwardRef((e,t)=>{const{min:n,max:s,inverted:i,onSlideStart:a,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...d}=e,h=j.useRef(null),m=St(t,h),f=j.useRef(void 0),g=!i;function x(p){const y=f.current||h.current.getBoundingClientRect(),b=[0,y.height],N=XT(b,g?[s,n]:[n,s]);return f.current=y,N(p-y.top)}return r.jsx(O7,{scope:e.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:r.jsx(D7,{"data-orientation":"vertical",...d,ref:m,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:p=>{const y=x(p.clientY);a==null||a(y)},onSlideMove:p=>{const y=x(p.clientY);o==null||o(y)},onSlideEnd:()=>{f.current=void 0,l==null||l()},onStepKeyDown:p=>{const b=T7[g?"from-bottom":"from-top"].includes(p.key);c==null||c({event:p,direction:b?-1:1})}})})}),D7=j.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:s,onSlideMove:i,onSlideEnd:a,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...d}=e,h=Qb($m,n);return r.jsx(Qe.span,{...d,ref:t,onKeyDown:Fe(e.onKeyDown,m=>{m.key==="Home"?(o(m),m.preventDefault()):m.key==="End"?(l(m),m.preventDefault()):C7.concat(k7).includes(m.key)&&(c(m),m.preventDefault())}),onPointerDown:Fe(e.onPointerDown,m=>{const f=m.target;f.setPointerCapture(m.pointerId),m.preventDefault(),h.thumbs.has(f)?f.focus():s(m)}),onPointerMove:Fe(e.onPointerMove,m=>{m.target.hasPointerCapture(m.pointerId)&&i(m)}),onPointerUp:Fe(e.onPointerUp,m=>{const f=m.target;f.hasPointerCapture(m.pointerId)&&(f.releasePointerCapture(m.pointerId),a(m))})})}),I7="SliderTrack",L7=j.forwardRef((e,t)=>{const{__scopeSlider:n,...s}=e,i=Qb(I7,n);return r.jsx(Qe.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...s,ref:t})});L7.displayName=I7;var b2="SliderRange",R7=j.forwardRef((e,t)=>{const{__scopeSlider:n,...s}=e,i=Qb(b2,n),a=M7(b2,n),o=j.useRef(null),l=St(t,o),c=i.values.length,d=i.values.map(f=>F7(f,i.min,i.max)),h=c>1?Math.min(...d):0,m=100-Math.max(...d);return r.jsx(Qe.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...s,ref:l,style:{...e.style,[a.startEdge]:h+"%",[a.endEdge]:m+"%"}})});R7.displayName=b2;var w2="SliderThumb",$7=j.forwardRef((e,t)=>{const n=$xe(e.__scopeSlider),[s,i]=j.useState(null),a=St(t,l=>i(l)),o=j.useMemo(()=>s?n().findIndex(l=>l.ref.current===s):-1,[n,s]);return r.jsx(Uxe,{...e,ref:a,index:o})}),Uxe=j.forwardRef((e,t)=>{const{__scopeSlider:n,index:s,name:i,...a}=e,o=Qb(w2,n),l=M7(w2,n),[c,d]=j.useState(null),h=St(t,w=>d(w)),m=c?o.form||!!c.closest("form"):!0,f=gg(c),g=o.values[s],x=g===void 0?0:F7(g,o.min,o.max),p=qxe(s,o.values.length),y=f==null?void 0:f[l.size],b=y?Gxe(y,x,l.direction):0;return j.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),r.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${x}% + ${b}px)`},children:[r.jsx(j2.ItemSlot,{scope:e.__scopeSlider,children:r.jsx(Qe.span,{role:"slider","aria-label":e["aria-label"]||p,"aria-valuemin":o.min,"aria-valuenow":g,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...a,ref:h,style:g===void 0?{display:"none"}:e.style,onFocus:Fe(e.onFocus,()=>{o.valueIndexToChangeRef.current=s})})}),m&&r.jsx(Wxe,{name:i??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:g},s)]})});$7.displayName=w2;var Wxe=e=>{const{value:t,...n}=e,s=j.useRef(null),i=Cg(t);return j.useEffect(()=>{const a=s.current,o=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(o,"value").set;if(i!==t&&c){const d=new Event("input",{bubbles:!0});c.call(a,t),a.dispatchEvent(d)}},[i,t]),r.jsx("input",{style:{display:"none"},...n,ref:s,defaultValue:t})};function Hxe(e=[],t,n){const s=[...e];return s[n]=t,s.sort((i,a)=>i-a)}function F7(e,t,n){const a=100/(n-t)*(e-t);return Xp(a,[0,100])}function qxe(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function Kxe(e,t){if(e.length===1)return 0;const n=e.map(i=>Math.abs(i-t)),s=Math.min(...n);return n.indexOf(s)}function Gxe(e,t,n){const s=e/2,a=XT([0,50],[0,s]);return(s-a(t)*n)*n}function Zxe(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function Yxe(e,t){if(t>0){const n=Zxe(e);return Math.min(...n)>=t}return!0}function XT(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(n-e[0])}}function Xxe(e){return(String(e).split(".")[1]||"").length}function Qxe(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var z7=E7,Jxe=L7,ege=R7,tge=$7;const B7=j.forwardRef(({className:e,...t},n)=>r.jsxs(z7,{ref:n,className:Ve("relative flex w-full touch-none select-none items-center",e),...t,children:[r.jsx(Jxe,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:r.jsx(ege,{className:"absolute h-full bg-primary"})}),r.jsx(tge,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));B7.displayName=z7.displayName;function rge(){return j.useState(!1),j.useState(rr.isEnabled()),j.useState(rr.getVolume()*100),ft(),null}function nge(){const{user:e,logout:t}=Gt(),{data:n,isLoading:s}=Re({queryKey:["/api/orders/customer",e==null?void 0:e.id],enabled:!!(e!=null&&e.id)}),{data:i,isLoading:a}=Re({queryKey:["/api/stores/owner",e==null?void 0:e.id],queryFn:async()=>{if(!(e!=null&&e.id))return[];const c=await fetch(`/api/stores/owner/${e.id}`);if(!c.ok)throw new Error("Failed to fetch stores");return c.json()},enabled:!!(e!=null&&e.id)&&(e==null?void 0:e.role)==="shopkeeper"});if(!e)return r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Please log in to view your account"}),r.jsx(Ae,{href:"/login",children:r.jsx(F,{children:"Login"})})]})});const o=c=>c.split(" ").map(d=>d[0]).join("").toUpperCase().slice(0,2),l=c=>{switch(c){case"delivered":return"bg-green-100 text-green-800";case"shipped":return"bg-blue-100 text-blue-800";case"processing":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return r.jsx("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-1",children:r.jsxs(G,{children:[r.jsxs(se,{className:"text-center",children:[r.jsx(yo,{className:"w-20 h-20 mx-auto mb-4",children:r.jsx(jo,{className:"text-lg",children:o(e.fullName)})}),r.jsx(ie,{className:"text-xl",children:e.fullName}),r.jsx(Ct,{children:r.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[r.jsx(le,{variant:"secondary",className:"capitalize",children:e.role}),e.role==="shopkeeper"&&e.status&&r.jsx("div",{className:"flex items-center space-x-2",children:e.status==="active"?r.jsxs(le,{variant:"default",className:"bg-green-100 text-green-800",children:[r.jsx(Md,{className:"h-3 w-3 mr-1"}),"Approved"]}):e.status==="pending"?r.jsxs(le,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:[r.jsx(gt,{className:"h-3 w-3 mr-1"}),"Pending Approval"]}):e.status==="suspended"?r.jsxs(le,{variant:"destructive",className:"bg-red-100 text-red-800",children:[r.jsx(wr,{className:"h-3 w-3 mr-1"}),"Suspended"]}):e.status==="rejected"?r.jsxs(le,{variant:"destructive",className:"bg-red-100 text-red-800",children:[r.jsx(wr,{className:"h-3 w-3 mr-1"}),"Rejected"]}):r.jsxs(le,{variant:"secondary",className:"bg-gray-100 text-gray-800",children:[r.jsx(gt,{className:"h-3 w-3 mr-1"}),"Under Review"]})})]})})]}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Id,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-sm",children:e.email})]}),e.phone&&r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Ot,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-sm",children:e.phone})]}),e.address&&r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Le,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-sm",children:e.address})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Zl,{className:"h-4 w-4 text-muted-foreground"}),r.jsxs("span",{className:"text-sm",children:["Joined ",new Date(e.createdAt).toLocaleDateString()]})]}),r.jsx(mn,{}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ae,{href:"/customer-dashboard",children:r.jsxs(F,{variant:"outline",className:"w-full justify-start",children:[r.jsx(Rd,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})}),e.role==="shopkeeper"&&r.jsx(Ae,{href:"/shopkeeper-dashboard",children:r.jsxs(F,{variant:"outline",className:"w-full justify-start",children:[r.jsx(nr,{className:"h-4 w-4 mr-2"}),"Seller Dashboard"]})}),r.jsx(Ae,{href:"/delete-account",children:r.jsxs(F,{variant:"outline",className:"w-full justify-start text-red-600 hover:text-red-700",children:[r.jsx(Xs,{className:"h-4 w-4 mr-2"}),"Delete Account"]})}),r.jsx(F,{variant:"outline",className:"w-full justify-start text-red-600 hover:text-red-700",onClick:t,children:"Logout"})]})]})]})}),r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.role==="shopkeeper"&&e.status!=="active"&&r.jsxs(G,{className:"border-orange-200 bg-orange-50",children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center space-x-2 text-orange-800",children:[r.jsx(wr,{className:"h-5 w-5"}),r.jsx("span",{children:"Account Approval Status"})]})}),r.jsxs(Z,{children:[e.status==="pending"&&r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(gt,{className:"h-5 w-5 text-orange-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-orange-800",children:"Your seller account is under review"}),r.jsx("p",{className:"text-sm text-orange-700",children:"Our admin team is reviewing your application. This process typically takes 1-2 business days."})]})]}),r.jsx("div",{className:"mt-4 p-3 bg-orange-100 rounded-lg",children:r.jsxs("p",{className:"text-sm text-orange-800",children:[r.jsx("strong",{children:"What's next?"})," You'll receive an email notification once your account is approved. Until then, you can browse the marketplace but cannot create stores or add products."]})})]}),e.status==="suspended"&&r.jsx("div",{className:"space-y-3",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(wr,{className:"h-5 w-5 text-red-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-red-800",children:"Your seller account has been suspended"}),r.jsx("p",{className:"text-sm text-red-700",children:"Please contact our support team for more information about your account status."})]})]})}),e.status==="rejected"&&r.jsx("div",{className:"space-y-3",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(wr,{className:"h-5 w-5 text-red-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-red-800",children:"Your seller application was not approved"}),r.jsx("p",{className:"text-sm text-red-700",children:"You can reapply by contacting our support team or updating your business information."})]})]})})]})]}),r.jsx(Rxe,{}),r.jsx(rge,{}),r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsxs(ie,{className:"flex items-center space-x-2",children:[r.jsx(Wo,{className:"h-5 w-5"}),r.jsx("span",{children:"Recent Orders"})]}),r.jsx(Ct,{children:"Your order history and status"})]}),r.jsx(Z,{children:s?r.jsx("div",{className:"space-y-3",children:[...Array(3)].map((c,d)=>r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),r.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]},d))}):n&&Array.isArray(n)&&n.length>0?r.jsxs("div",{className:"space-y-4",children:[n.slice(0,5).map(c=>r.jsxs("div",{className:"border rounded-lg p-4",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsxs("h4",{className:"font-medium",children:["Order #",c.id]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(c.createdAt).toLocaleDateString()})]}),r.jsx(le,{className:l(c.status),children:c.status})]}),r.jsxs("div",{className:"mt-2",children:[r.jsxs("p",{className:"text-sm",children:["Total: $",c.totalAmount]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:c.shippingAddress})]})]},c.id)),n.length>5&&r.jsx("div",{className:"text-center",children:r.jsx(Ae,{href:"/customer-dashboard",children:r.jsx(F,{variant:"outline",children:"View All Orders"})})})]}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Wo,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"No orders yet"}),r.jsx(Ae,{href:"/products",children:r.jsx(F,{className:"mt-2",children:"Start Shopping"})})]})})]}),e.role==="shopkeeper"&&r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsxs(ie,{className:"flex items-center space-x-2",children:[r.jsx(nr,{className:"h-5 w-5"}),r.jsx("span",{children:"Your Stores"})]}),r.jsx(Ct,{children:"Manage your store information"})]}),r.jsx(Z,{children:a?r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),r.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}):i&&Array.isArray(i)&&i.length>0?r.jsx("div",{className:"space-y-4",children:i.map(c=>r.jsx("div",{className:"border rounded-lg p-4",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium",children:c.name}),r.jsx("p",{className:"text-sm text-muted-foreground",children:c.description}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:c.address})]}),r.jsx(Ae,{href:`/stores/${c.id}`,children:r.jsxs(F,{variant:"outline",size:"sm",children:[r.jsx(us,{className:"h-4 w-4 mr-1"}),"View"]})})]})},c.id))}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(nr,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"No stores created yet"}),r.jsx(Ae,{href:"/shopkeeper-dashboard",children:r.jsx(F,{className:"mt-2",children:"Create Store"})})]})})]})]})]})})}function sge(){const{user:e,logout:t}=Gt(),[,n]=Jr(),{toast:s}=ft(),[i,a]=j.useState(""),[o,l]=j.useState(!1),[c,d]=j.useState(""),h=pt({mutationFn:async g=>Bt(`/api/auth/delete-account?userId=${e==null?void 0:e.id}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)}),onSuccess:g=>{s({title:"Account deleted successfully",description:(g==null?void 0:g.details)||"Your account and all associated data have been permanently deleted from our systems."}),t(),n("/")},onError:g=>{s({title:"Failed to delete account",description:g.message||"Please try again later.",variant:"destructive"})}});if(!e)return r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Please log in to access this page"}),r.jsx(Ae,{href:"/login",children:r.jsx(F,{children:"Login"})})]})});const m=i==="DELETE MY ACCOUNT"&&o,f=()=>{m&&h.mutate({reason:c.trim()||void 0,confirmText:i})};return r.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-2xl",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx(Ae,{href:"/account",children:r.jsxs(F,{variant:"ghost",className:"mb-4",children:[r.jsx(Xa,{className:"h-4 w-4 mr-2"}),"Back to Account"]})}),r.jsx("h1",{className:"text-3xl font-bold text-red-600",children:"Delete Account"}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"Permanently delete your account and all associated data"})]}),r.jsxs(G,{className:"border-red-200",children:[r.jsxs(se,{children:[r.jsxs(ie,{className:"text-red-600 flex items-center space-x-2",children:[r.jsx(ac,{className:"h-5 w-5"}),r.jsx("span",{children:"Warning: This action cannot be undone"})]}),r.jsx(Ct,{children:"This will permanently and completely remove all your data from our systems including:"})]}),r.jsxs(Z,{className:"space-y-6",children:[r.jsxs(ri,{className:"border-red-200 bg-red-50",children:[r.jsx(ac,{className:"h-4 w-4"}),r.jsx(ni,{className:"text-red-800",children:r.jsxs("ul",{className:"list-disc list-inside space-y-1 mt-2",children:[r.jsx("li",{children:"Your profile information and account details"}),r.jsx("li",{children:"Wishlist items and shopping cart"}),r.jsx("li",{children:"All notifications and push notification tokens"}),r.jsx("li",{children:"Password reset tokens and security data"}),r.jsx("li",{children:"Website visits and tracking data"}),r.jsx("li",{children:"Support tickets and communications"}),e.role==="shopkeeper"&&r.jsxs(r.Fragment,{children:[r.jsx("li",{children:r.jsx("strong",{children:"All your stores and their complete data"})}),r.jsx("li",{children:r.jsx("strong",{children:"All products, descriptions, and images"})}),r.jsx("li",{children:r.jsx("strong",{children:"Store reviews, ratings, and customer feedback"})}),r.jsx("li",{children:r.jsx("strong",{children:"Store analytics, sales data, and performance metrics"})}),r.jsx("li",{children:r.jsx("strong",{children:"Inventory logs and product history"})}),r.jsx("li",{children:r.jsx("strong",{children:"Promotions, advertisements, and marketing content"})}),r.jsx("li",{children:r.jsx("strong",{children:"Coupons, banners, and flash sales"})}),r.jsx("li",{children:r.jsx("strong",{children:"Settlement records and financial data"})}),r.jsx("li",{children:r.jsx("strong",{children:"Product reviews and customer ratings on your items"})})]}),e.role==="delivery_partner"&&r.jsxs(r.Fragment,{children:[r.jsx("li",{children:r.jsx("strong",{children:"Delivery partner profile and verification data"})}),r.jsx("li",{children:r.jsx("strong",{children:"Location tracking history and delivery routes"})}),r.jsx("li",{children:r.jsx("strong",{children:"Performance ratings and delivery statistics"})}),r.jsx("li",{children:r.jsx("strong",{children:"Earnings data and commission records"})})]}),r.jsx("li",{children:r.jsx("strong",{children:"Order history will be anonymized (kept for business records)"})}),r.jsx("li",{children:"Fraud alerts and vendor verification records"})]})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(be,{htmlFor:"reason",children:"Reason for deletion (optional)"}),r.jsx(he,{id:"reason",placeholder:"Help us improve by sharing why you're leaving...",value:c,onChange:g=>d(g.target.value),className:"mt-1"})]}),r.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-gray-50",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(xc,{id:"confirm-checkbox",checked:o,onCheckedChange:g=>l(g)}),r.jsx(be,{htmlFor:"confirm-checkbox",className:"text-sm",children:"I understand that this action is permanent and cannot be reversed"})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"confirm-text",className:"text-sm",children:'Type "DELETE MY ACCOUNT" to confirm account deletion'}),r.jsx(he,{id:"confirm-text",placeholder:"Type DELETE MY ACCOUNT here",value:i,onChange:g=>a(g.target.value),className:"mt-1"})]})]}),r.jsxs("div",{className:"flex space-x-3 pt-4",children:[r.jsx(Ae,{href:"/account",children:r.jsx(F,{variant:"outline",className:"flex-1",children:"Cancel"})}),r.jsx(F,{variant:"destructive",onClick:f,disabled:!m||h.isPending,className:"flex-1",children:h.isPending?"Deleting...":r.jsxs(r.Fragment,{children:[r.jsx(Xs,{className:"h-4 w-4 mr-2"}),"Delete Account"]})})]})]})]})]}),r.jsx("div",{className:"mt-6 text-center text-sm text-muted-foreground",children:r.jsxs("p",{children:["Need help? Contact our support team at"," ",r.jsx("a",{href:"mailto:sirahabazzar@gmail.com",className:"text-blue-600 hover:underline",children:"sirahabazzar@gmail.com"})]})})]})}var QT="Tabs",[ige,HUe]=xn(QT,[Im]),V7=Im(),[age,JT]=ige(QT),U7=j.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,onValueChange:i,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,h=ru(l),[m,f]=Li({prop:s,onChange:i,defaultProp:a});return r.jsx(age,{scope:n,baseId:ca(),value:m,onValueChange:f,orientation:o,dir:h,activationMode:c,children:r.jsx(Qe.div,{dir:h,"data-orientation":o,...d,ref:t})})});U7.displayName=QT;var W7="TabsList",H7=j.forwardRef((e,t)=>{const{__scopeTabs:n,loop:s=!0,...i}=e,a=JT(W7,n),o=V7(n);return r.jsx(Yk,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:s,children:r.jsx(Qe.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:t})})});H7.displayName=W7;var q7="TabsTrigger",K7=j.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,disabled:i=!1,...a}=e,o=JT(q7,n),l=V7(n),c=Y7(o.baseId,s),d=X7(o.baseId,s),h=s===o.value;return r.jsx(Xk,{asChild:!0,...l,focusable:!i,active:h,children:r.jsx(Qe.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":d,"data-state":h?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...a,ref:t,onMouseDown:Fe(e.onMouseDown,m=>{!i&&m.button===0&&m.ctrlKey===!1?o.onValueChange(s):m.preventDefault()}),onKeyDown:Fe(e.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&o.onValueChange(s)}),onFocus:Fe(e.onFocus,()=>{const m=o.activationMode!=="manual";!h&&!i&&m&&o.onValueChange(s)})})})});K7.displayName=q7;var G7="TabsContent",Z7=j.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,forceMount:i,children:a,...o}=e,l=JT(G7,n),c=Y7(l.baseId,s),d=X7(l.baseId,s),h=s===l.value,m=j.useRef(h);return j.useEffect(()=>{const f=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(f)},[]),r.jsx(On,{present:i||h,children:({present:f})=>r.jsx(Qe.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:m.current?"0s":void 0},children:f&&a})})});Z7.displayName=G7;function Y7(e,t){return`${e}-trigger-${t}`}function X7(e,t){return`${e}-content-${t}`}var oge=U7,Q7=H7,J7=K7,eW=Z7;const oi=oge,Ds=j.forwardRef(({className:e,...t},n)=>r.jsx(Q7,{ref:n,className:Ve("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Ds.displayName=Q7.displayName;const ht=j.forwardRef(({className:e,...t},n)=>r.jsx(J7,{ref:n,className:Ve("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));ht.displayName=J7.displayName;const tt=j.forwardRef(({className:e,...t},n)=>r.jsx(eW,{ref:n,className:Ve("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));tt.displayName=eW.displayName;const lge=e=>new Promise((t,n)=>{const s=document.createElement("canvas"),i=s.getContext("2d"),a=new Image,o=setTimeout(()=>{n(new Error("Image compression timeout"))},15e3);a.onload=()=>{try{clearTimeout(o);let{width:l,height:c}=a;const h=1024*1024,m=1.37;let f=2048;if(e.size>h*10?f=1600:e.size>h*5&&(f=1920),(l>f||c>f)&&(l>c?(c=c*f/l,l=f):(l=l*f/c,c=f)),s.width=l,s.height=c,!i){n(new Error("Canvas context not available"));return}i.imageSmoothingEnabled=!0,i.imageSmoothingQuality="high",i.drawImage(a,0,0,l,c);let g=.92,x=s.toDataURL("image/jpeg",g);if(x.length<=h*m){console.log(`Image ${e.name} compressed to ${(x.length/1024).toFixed(1)}KB with quality ${g}`),t(x);return}for(;x.length>h*m&&g>.3;)g-=.05,x=s.toDataURL("image/jpeg",g);console.log(`Compressed ${e.name} from ${(e.size/1024).toFixed(1)}KB to ${(x.length/1024).toFixed(1)}KB with quality ${g.toFixed(2)}`),t(x)}catch(l){clearTimeout(o),n(l)}},a.onerror=()=>{clearTimeout(o),n(new Error("Failed to load image"))},a.src=URL.createObjectURL(e)});function qs({maxImages:e=6,minImages:t=1,onImagesChange:n,initialImages:s=[],label:i="Upload Images",className:a="",single:o=!1}){const[l,c]=j.useState(s),[d,h]=j.useState(""),[m,f]=j.useState(!1),g=j.useRef(null),x=j.useRef(null),{toast:p}=ft(),y=o?1:e,b=async C=>{if(!C)return;if(l.length+C.length>y){p({title:"Too many images",description:`Maximum ${y} image${y>1?"s":""} allowed`,variant:"destructive"});return}f(!0);const k=[];try{for(let O=0;O<C.length;O++){const I=C[O];if(!I.type.startsWith("image/")){p({title:"Invalid file type",description:"Please select only image files",variant:"destructive"});continue}if(I.size>20*1024*1024){p({title:"File too large",description:"Please select images smaller than 20MB",variant:"destructive"});continue}try{const T=await lge(I);k.push(T)}catch(T){if(console.error("Compression failed for file:",I.name,T),I.size<1024*1024)try{const E=new FileReader,D=await new Promise((B,M)=>{E.onload=()=>B(E.result),E.onerror=M,E.readAsDataURL(I)});k.push(D),p({title:"Image added",description:`${I.name} added without compression`,variant:"default"})}catch(E){console.error("FileReader failed:",E),p({title:"Upload failed",description:`Failed to process ${I.name}. Try a different image.`,variant:"destructive"})}else p({title:"File too large",description:`${I.name} is too large and compression failed. Try a smaller image.`,variant:"destructive"});continue}}if(k.length>0){const O=o?k:[...l,...k];c(O),n(O),p({title:"Images uploaded successfully",description:`${k.length} image${k.length>1?"s":""} added`})}}catch(O){console.error("Upload error:",O),p({title:"Upload failed",description:"Failed to upload images. Please try again.",variant:"destructive"})}finally{f(!1)}},w=()=>{if(!d.trim())return;if(l.length>=y){p({title:"Maximum images reached",description:`You can only add ${y} image${y>1?"s":""}`,variant:"destructive"});return}try{new URL(d)}catch{p({title:"Invalid URL",description:"Please enter a valid image URL",variant:"destructive"});return}const C=o?[d]:[...l,d];c(C),n(C),h(""),p({title:"Image URL added",description:"Image URL has been added successfully"})},N=C=>{const k=l.filter((O,I)=>I!==C);c(k),n(k)},S=()=>{var C;return(C=g.current)==null?void 0:C.click()},P=()=>{var C;return(C=x.current)==null?void 0:C.click()};return r.jsxs("div",{className:a,children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[i,!o&&r.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",t,"-",e," images)"]})]}),r.jsxs(oi,{defaultValue:"upload",className:"w-full",children:[r.jsxs(Ds,{className:"grid w-full grid-cols-3",children:[r.jsxs(ht,{value:"upload",className:"flex items-center space-x-1",children:[r.jsx(Ws,{className:"h-4 w-4"}),r.jsx("span",{children:"Upload"})]}),r.jsxs(ht,{value:"camera",className:"flex items-center space-x-1",children:[r.jsx(Eo,{className:"h-4 w-4"}),r.jsx("span",{children:"Camera"})]}),r.jsxs(ht,{value:"url",className:"flex items-center space-x-1",children:[r.jsx(Dd,{className:"h-4 w-4"}),r.jsx("span",{children:"URL"})]})]}),r.jsx(tt,{value:"upload",className:"mt-4",children:r.jsx(G,{children:r.jsxs(Z,{className:"p-4",children:[r.jsxs("div",{onClick:S,className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-primary cursor-pointer transition-colors",children:[r.jsx(Ws,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Click to select images from your device"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Auto-compressed to 1MB max with HD quality preserved"})]}),r.jsx("input",{ref:g,type:"file",accept:"image/*",multiple:!o,onChange:C=>b(C.target.files),className:"hidden"})]})})}),r.jsx(tt,{value:"camera",className:"mt-4",children:r.jsx(G,{children:r.jsxs(Z,{className:"p-4",children:[r.jsxs("div",{onClick:P,className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-primary cursor-pointer transition-colors",children:[r.jsx(Eo,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Take a photo with your camera"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Camera access required"})]}),r.jsx("input",{ref:x,type:"file",accept:"image/*",capture:"environment",multiple:!o,onChange:C=>b(C.target.files),className:"hidden"})]})})}),r.jsx(tt,{value:"url",className:"mt-4",children:r.jsx(G,{children:r.jsx(Z,{className:"p-4",children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(he,{type:"url",placeholder:"Enter image URL...",value:d,onChange:C=>h(C.target.value),className:"flex-1"}),r.jsx(F,{onClick:w,disabled:!d.trim(),children:"Add URL"})]})})})})]}),l.length>0&&r.jsxs("div",{className:"mt-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:o?"Selected Image":`Selected Images (${l.length}/${y})`}),r.jsx("div",{className:`grid gap-3 ${o?"grid-cols-1":"grid-cols-2 md:grid-cols-3"}`,children:l.map((C,k)=>r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"aspect-square rounded-lg overflow-hidden border-2 border-gray-200",children:r.jsx("img",{src:C,alt:`Selected ${k+1}`,className:"w-full h-full object-cover",onError:O=>{O.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Im0xNSAxMi0zIDMtMy0zIiBzdHJva2U9IiM5Q0EzQUYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMiA5djYiIHN0cm9rZT0iIzlDQTNBRiIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiLz4KPC9zdmc+"}})}),r.jsx(F,{variant:"destructive",size:"sm",onClick:()=>N(k),className:"absolute -top-2 -right-2 h-6 w-6 rounded-full p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:r.jsx(Fr,{className:"h-3 w-3"})})]},k))})]}),m&&r.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-blue-600 border-t-transparent"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Processing images..."}),r.jsx("p",{className:"text-xs text-blue-700",children:"Compressing and optimizing for better performance"})]})]})})]})}function tW(e,t){const n=j.useRef(t);j.useEffect(function(){t!==n.current&&e.attributionControl!=null&&(n.current!=null&&e.attributionControl.removeAttribution(n.current),t!=null&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}const cge=1;function dge(e){return Object.freeze({__version:cge,map:e})}function rW(e,t){return Object.freeze({...e,...t})}const nW=j.createContext(null),sW=nW.Provider;function Jb(){const e=j.useContext(nW);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function iW(e){function t(n,s){const{instance:i,context:a}=e(n).current;return j.useImperativeHandle(s,()=>i),n.children==null?null:re.createElement(sW,{value:a},n.children)}return j.forwardRef(t)}function uge(e){function t(n,s){const[i,a]=j.useState(!1),{instance:o}=e(n,a).current;j.useImperativeHandle(s,()=>o),j.useEffect(function(){i&&o.update()},[o,i,n.children]);const l=o._contentNode;return l?wc.createPortal(n.children,l):null}return j.forwardRef(t)}function hge(e){function t(n,s){const{instance:i}=e(n).current;return j.useImperativeHandle(s,()=>i),null}return j.forwardRef(t)}function eA(e,t){const n=j.useRef();j.useEffect(function(){return t!=null&&e.instance.on(t),n.current=t,function(){n.current!=null&&e.instance.off(n.current),n.current=null}},[e,t])}function ew(e,t){const n=e.pane??t.pane;return n?{...e,pane:n}:e}function mge(e,t){return function(s,i){const a=Jb(),o=e(ew(s,a),a);return tW(a.map,s.attribution),eA(o.current,s.eventHandlers),t(o.current,a,s,i),o}}var N2={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,s){s(t)})(zf,function(n){var s="1.9.4";function i(u){var v,_,A,R;for(_=1,A=arguments.length;_<A;_++){R=arguments[_];for(v in R)u[v]=R[v]}return u}var a=Object.create||function(){function u(){}return function(v){return u.prototype=v,new u}}();function o(u,v){var _=Array.prototype.slice;if(u.bind)return u.bind.apply(u,_.call(arguments,1));var A=_.call(arguments,2);return function(){return u.apply(v,A.length?A.concat(_.call(arguments)):arguments)}}var l=0;function c(u){return"_leaflet_id"in u||(u._leaflet_id=++l),u._leaflet_id}function d(u,v,_){var A,R,Y,ue;return ue=function(){A=!1,R&&(Y.apply(_,R),R=!1)},Y=function(){A?R=arguments:(u.apply(_,arguments),setTimeout(ue,v),A=!0)},Y}function h(u,v,_){var A=v[1],R=v[0],Y=A-R;return u===A&&_?u:((u-R)%Y+Y)%Y+R}function m(){return!1}function f(u,v){if(v===!1)return u;var _=Math.pow(10,v===void 0?6:v);return Math.round(u*_)/_}function g(u){return u.trim?u.trim():u.replace(/^\s+|\s+$/g,"")}function x(u){return g(u).split(/\s+/)}function p(u,v){Object.prototype.hasOwnProperty.call(u,"options")||(u.options=u.options?a(u.options):{});for(var _ in v)u.options[_]=v[_];return u.options}function y(u,v,_){var A=[];for(var R in u)A.push(encodeURIComponent(_?R.toUpperCase():R)+"="+encodeURIComponent(u[R]));return(!v||v.indexOf("?")===-1?"?":"&")+A.join("&")}var b=/\{ *([\w_ -]+) *\}/g;function w(u,v){return u.replace(b,function(_,A){var R=v[A];if(R===void 0)throw new Error("No value provided for variable "+_);return typeof R=="function"&&(R=R(v)),R})}var N=Array.isArray||function(u){return Object.prototype.toString.call(u)==="[object Array]"};function S(u,v){for(var _=0;_<u.length;_++)if(u[_]===v)return _;return-1}var P="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function C(u){return window["webkit"+u]||window["moz"+u]||window["ms"+u]}var k=0;function O(u){var v=+new Date,_=Math.max(0,16-(v-k));return k=v+_,window.setTimeout(u,_)}var I=window.requestAnimationFrame||C("RequestAnimationFrame")||O,T=window.cancelAnimationFrame||C("CancelAnimationFrame")||C("CancelRequestAnimationFrame")||function(u){window.clearTimeout(u)};function E(u,v,_){if(_&&I===O)u.call(v);else return I.call(window,o(u,v))}function D(u){u&&T.call(window,u)}var B={__proto__:null,extend:i,create:a,bind:o,get lastId(){return l},stamp:c,throttle:d,wrapNum:h,falseFn:m,formatNum:f,trim:g,splitWords:x,setOptions:p,getParamString:y,template:w,isArray:N,indexOf:S,emptyImageUrl:P,requestFn:I,cancelFn:T,requestAnimFrame:E,cancelAnimFrame:D};function M(){}M.extend=function(u){var v=function(){p(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},_=v.__super__=this.prototype,A=a(_);A.constructor=v,v.prototype=A;for(var R in this)Object.prototype.hasOwnProperty.call(this,R)&&R!=="prototype"&&R!=="__super__"&&(v[R]=this[R]);return u.statics&&i(v,u.statics),u.includes&&(U(u.includes),i.apply(null,[A].concat(u.includes))),i(A,u),delete A.statics,delete A.includes,A.options&&(A.options=_.options?a(_.options):{},i(A.options,u.options)),A._initHooks=[],A.callInitHooks=function(){if(!this._initHooksCalled){_.callInitHooks&&_.callInitHooks.call(this),this._initHooksCalled=!0;for(var Y=0,ue=A._initHooks.length;Y<ue;Y++)A._initHooks[Y].call(this)}},v},M.include=function(u){var v=this.prototype.options;return i(this.prototype,u),u.options&&(this.prototype.options=v,this.mergeOptions(u.options)),this},M.mergeOptions=function(u){return i(this.prototype.options,u),this},M.addInitHook=function(u){var v=Array.prototype.slice.call(arguments,1),_=typeof u=="function"?u:function(){this[u].apply(this,v)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(_),this};function U(u){if(!(typeof L>"u"||!L||!L.Mixin)){u=N(u)?u:[u];for(var v=0;v<u.length;v++)u[v]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var H={on:function(u,v,_){if(typeof u=="object")for(var A in u)this._on(A,u[A],v);else{u=x(u);for(var R=0,Y=u.length;R<Y;R++)this._on(u[R],v,_)}return this},off:function(u,v,_){if(!arguments.length)delete this._events;else if(typeof u=="object")for(var A in u)this._off(A,u[A],v);else{u=x(u);for(var R=arguments.length===1,Y=0,ue=u.length;Y<ue;Y++)R?this._off(u[Y]):this._off(u[Y],v,_)}return this},_on:function(u,v,_,A){if(typeof v!="function"){console.warn("wrong listener type: "+typeof v);return}if(this._listens(u,v,_)===!1){_===this&&(_=void 0);var R={fn:v,ctx:_};A&&(R.once=!0),this._events=this._events||{},this._events[u]=this._events[u]||[],this._events[u].push(R)}},_off:function(u,v,_){var A,R,Y;if(this._events&&(A=this._events[u],!!A)){if(arguments.length===1){if(this._firingCount)for(R=0,Y=A.length;R<Y;R++)A[R].fn=m;delete this._events[u];return}if(typeof v!="function"){console.warn("wrong listener type: "+typeof v);return}var ue=this._listens(u,v,_);if(ue!==!1){var ge=A[ue];this._firingCount&&(ge.fn=m,this._events[u]=A=A.slice()),A.splice(ue,1)}}},fire:function(u,v,_){if(!this.listens(u,_))return this;var A=i({},v,{type:u,target:this,sourceTarget:v&&v.sourceTarget||this});if(this._events){var R=this._events[u];if(R){this._firingCount=this._firingCount+1||1;for(var Y=0,ue=R.length;Y<ue;Y++){var ge=R[Y],we=ge.fn;ge.once&&this.off(u,we,ge.ctx),we.call(ge.ctx||this,A)}this._firingCount--}}return _&&this._propagateEvent(A),this},listens:function(u,v,_,A){typeof u!="string"&&console.warn('"string" type argument expected');var R=v;typeof v!="function"&&(A=!!v,R=void 0,_=void 0);var Y=this._events&&this._events[u];if(Y&&Y.length&&this._listens(u,R,_)!==!1)return!0;if(A){for(var ue in this._eventParents)if(this._eventParents[ue].listens(u,v,_,A))return!0}return!1},_listens:function(u,v,_){if(!this._events)return!1;var A=this._events[u]||[];if(!v)return!!A.length;_===this&&(_=void 0);for(var R=0,Y=A.length;R<Y;R++)if(A[R].fn===v&&A[R].ctx===_)return R;return!1},once:function(u,v,_){if(typeof u=="object")for(var A in u)this._on(A,u[A],v,!0);else{u=x(u);for(var R=0,Y=u.length;R<Y;R++)this._on(u[R],v,_,!0)}return this},addEventParent:function(u){return this._eventParents=this._eventParents||{},this._eventParents[c(u)]=u,this},removeEventParent:function(u){return this._eventParents&&delete this._eventParents[c(u)],this},_propagateEvent:function(u){for(var v in this._eventParents)this._eventParents[v].fire(u.type,i({layer:u.target,propagatedFrom:u.target},u),!0)}};H.addEventListener=H.on,H.removeEventListener=H.clearAllEventListeners=H.off,H.addOneTimeEventListener=H.once,H.fireEvent=H.fire,H.hasEventListeners=H.listens;var K=M.extend(H);function W(u,v,_){this.x=_?Math.round(u):u,this.y=_?Math.round(v):v}var V=Math.trunc||function(u){return u>0?Math.floor(u):Math.ceil(u)};W.prototype={clone:function(){return new W(this.x,this.y)},add:function(u){return this.clone()._add(z(u))},_add:function(u){return this.x+=u.x,this.y+=u.y,this},subtract:function(u){return this.clone()._subtract(z(u))},_subtract:function(u){return this.x-=u.x,this.y-=u.y,this},divideBy:function(u){return this.clone()._divideBy(u)},_divideBy:function(u){return this.x/=u,this.y/=u,this},multiplyBy:function(u){return this.clone()._multiplyBy(u)},_multiplyBy:function(u){return this.x*=u,this.y*=u,this},scaleBy:function(u){return new W(this.x*u.x,this.y*u.y)},unscaleBy:function(u){return new W(this.x/u.x,this.y/u.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=V(this.x),this.y=V(this.y),this},distanceTo:function(u){u=z(u);var v=u.x-this.x,_=u.y-this.y;return Math.sqrt(v*v+_*_)},equals:function(u){return u=z(u),u.x===this.x&&u.y===this.y},contains:function(u){return u=z(u),Math.abs(u.x)<=Math.abs(this.x)&&Math.abs(u.y)<=Math.abs(this.y)},toString:function(){return"Point("+f(this.x)+", "+f(this.y)+")"}};function z(u,v,_){return u instanceof W?u:N(u)?new W(u[0],u[1]):u==null?u:typeof u=="object"&&"x"in u&&"y"in u?new W(u.x,u.y):new W(u,v,_)}function q(u,v){if(u)for(var _=v?[u,v]:u,A=0,R=_.length;A<R;A++)this.extend(_[A])}q.prototype={extend:function(u){var v,_;if(!u)return this;if(u instanceof W||typeof u[0]=="number"||"x"in u)v=_=z(u);else if(u=J(u),v=u.min,_=u.max,!v||!_)return this;return!this.min&&!this.max?(this.min=v.clone(),this.max=_.clone()):(this.min.x=Math.min(v.x,this.min.x),this.max.x=Math.max(_.x,this.max.x),this.min.y=Math.min(v.y,this.min.y),this.max.y=Math.max(_.y,this.max.y)),this},getCenter:function(u){return z((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,u)},getBottomLeft:function(){return z(this.min.x,this.max.y)},getTopRight:function(){return z(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(u){var v,_;return typeof u[0]=="number"||u instanceof W?u=z(u):u=J(u),u instanceof q?(v=u.min,_=u.max):v=_=u,v.x>=this.min.x&&_.x<=this.max.x&&v.y>=this.min.y&&_.y<=this.max.y},intersects:function(u){u=J(u);var v=this.min,_=this.max,A=u.min,R=u.max,Y=R.x>=v.x&&A.x<=_.x,ue=R.y>=v.y&&A.y<=_.y;return Y&&ue},overlaps:function(u){u=J(u);var v=this.min,_=this.max,A=u.min,R=u.max,Y=R.x>v.x&&A.x<_.x,ue=R.y>v.y&&A.y<_.y;return Y&&ue},isValid:function(){return!!(this.min&&this.max)},pad:function(u){var v=this.min,_=this.max,A=Math.abs(v.x-_.x)*u,R=Math.abs(v.y-_.y)*u;return J(z(v.x-A,v.y-R),z(_.x+A,_.y+R))},equals:function(u){return u?(u=J(u),this.min.equals(u.getTopLeft())&&this.max.equals(u.getBottomRight())):!1}};function J(u,v){return!u||u instanceof q?u:new q(u,v)}function pe(u,v){if(u)for(var _=v?[u,v]:u,A=0,R=_.length;A<R;A++)this.extend(_[A])}pe.prototype={extend:function(u){var v=this._southWest,_=this._northEast,A,R;if(u instanceof Ne)A=u,R=u;else if(u instanceof pe){if(A=u._southWest,R=u._northEast,!A||!R)return this}else return u?this.extend(ke(u)||ye(u)):this;return!v&&!_?(this._southWest=new Ne(A.lat,A.lng),this._northEast=new Ne(R.lat,R.lng)):(v.lat=Math.min(A.lat,v.lat),v.lng=Math.min(A.lng,v.lng),_.lat=Math.max(R.lat,_.lat),_.lng=Math.max(R.lng,_.lng)),this},pad:function(u){var v=this._southWest,_=this._northEast,A=Math.abs(v.lat-_.lat)*u,R=Math.abs(v.lng-_.lng)*u;return new pe(new Ne(v.lat-A,v.lng-R),new Ne(_.lat+A,_.lng+R))},getCenter:function(){return new Ne((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ne(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ne(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(u){typeof u[0]=="number"||u instanceof Ne||"lat"in u?u=ke(u):u=ye(u);var v=this._southWest,_=this._northEast,A,R;return u instanceof pe?(A=u.getSouthWest(),R=u.getNorthEast()):A=R=u,A.lat>=v.lat&&R.lat<=_.lat&&A.lng>=v.lng&&R.lng<=_.lng},intersects:function(u){u=ye(u);var v=this._southWest,_=this._northEast,A=u.getSouthWest(),R=u.getNorthEast(),Y=R.lat>=v.lat&&A.lat<=_.lat,ue=R.lng>=v.lng&&A.lng<=_.lng;return Y&&ue},overlaps:function(u){u=ye(u);var v=this._southWest,_=this._northEast,A=u.getSouthWest(),R=u.getNorthEast(),Y=R.lat>v.lat&&A.lat<_.lat,ue=R.lng>v.lng&&A.lng<_.lng;return Y&&ue},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(u,v){return u?(u=ye(u),this._southWest.equals(u.getSouthWest(),v)&&this._northEast.equals(u.getNorthEast(),v)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ye(u,v){return u instanceof pe?u:new pe(u,v)}function Ne(u,v,_){if(isNaN(u)||isNaN(v))throw new Error("Invalid LatLng object: ("+u+", "+v+")");this.lat=+u,this.lng=+v,_!==void 0&&(this.alt=+_)}Ne.prototype={equals:function(u,v){if(!u)return!1;u=ke(u);var _=Math.max(Math.abs(this.lat-u.lat),Math.abs(this.lng-u.lng));return _<=(v===void 0?1e-9:v)},toString:function(u){return"LatLng("+f(this.lat,u)+", "+f(this.lng,u)+")"},distanceTo:function(u){return We.distance(this,ke(u))},wrap:function(){return We.wrapLatLng(this)},toBounds:function(u){var v=180*u/40075017,_=v/Math.cos(Math.PI/180*this.lat);return ye([this.lat-v,this.lng-_],[this.lat+v,this.lng+_])},clone:function(){return new Ne(this.lat,this.lng,this.alt)}};function ke(u,v,_){return u instanceof Ne?u:N(u)&&typeof u[0]!="object"?u.length===3?new Ne(u[0],u[1],u[2]):u.length===2?new Ne(u[0],u[1]):null:u==null?u:typeof u=="object"&&"lat"in u?new Ne(u.lat,"lng"in u?u.lng:u.lon,u.alt):v===void 0?null:new Ne(u,v,_)}var Ee={latLngToPoint:function(u,v){var _=this.projection.project(u),A=this.scale(v);return this.transformation._transform(_,A)},pointToLatLng:function(u,v){var _=this.scale(v),A=this.transformation.untransform(u,_);return this.projection.unproject(A)},project:function(u){return this.projection.project(u)},unproject:function(u){return this.projection.unproject(u)},scale:function(u){return 256*Math.pow(2,u)},zoom:function(u){return Math.log(u/256)/Math.LN2},getProjectedBounds:function(u){if(this.infinite)return null;var v=this.projection.bounds,_=this.scale(u),A=this.transformation.transform(v.min,_),R=this.transformation.transform(v.max,_);return new q(A,R)},infinite:!1,wrapLatLng:function(u){var v=this.wrapLng?h(u.lng,this.wrapLng,!0):u.lng,_=this.wrapLat?h(u.lat,this.wrapLat,!0):u.lat,A=u.alt;return new Ne(_,v,A)},wrapLatLngBounds:function(u){var v=u.getCenter(),_=this.wrapLatLng(v),A=v.lat-_.lat,R=v.lng-_.lng;if(A===0&&R===0)return u;var Y=u.getSouthWest(),ue=u.getNorthEast(),ge=new Ne(Y.lat-A,Y.lng-R),we=new Ne(ue.lat-A,ue.lng-R);return new pe(ge,we)}},We=i({},Ee,{wrapLng:[-180,180],R:6371e3,distance:function(u,v){var _=Math.PI/180,A=u.lat*_,R=v.lat*_,Y=Math.sin((v.lat-u.lat)*_/2),ue=Math.sin((v.lng-u.lng)*_/2),ge=Y*Y+Math.cos(A)*Math.cos(R)*ue*ue,we=2*Math.atan2(Math.sqrt(ge),Math.sqrt(1-ge));return this.R*we}}),Se=6378137,Me={R:Se,MAX_LATITUDE:85.0511287798,project:function(u){var v=Math.PI/180,_=this.MAX_LATITUDE,A=Math.max(Math.min(_,u.lat),-_),R=Math.sin(A*v);return new W(this.R*u.lng*v,this.R*Math.log((1+R)/(1-R))/2)},unproject:function(u){var v=180/Math.PI;return new Ne((2*Math.atan(Math.exp(u.y/this.R))-Math.PI/2)*v,u.x*v/this.R)},bounds:function(){var u=Se*Math.PI;return new q([-u,-u],[u,u])}()};function Ie(u,v,_,A){if(N(u)){this._a=u[0],this._b=u[1],this._c=u[2],this._d=u[3];return}this._a=u,this._b=v,this._c=_,this._d=A}Ie.prototype={transform:function(u,v){return this._transform(u.clone(),v)},_transform:function(u,v){return v=v||1,u.x=v*(this._a*u.x+this._b),u.y=v*(this._c*u.y+this._d),u},untransform:function(u,v){return v=v||1,new W((u.x/v-this._b)/this._a,(u.y/v-this._d)/this._c)}};function $(u,v,_,A){return new Ie(u,v,_,A)}var ee=i({},We,{code:"EPSG:3857",projection:Me,transformation:function(){var u=.5/(Math.PI*Me.R);return $(u,.5,-u,.5)}()}),X=i({},ee,{code:"EPSG:900913"});function Ce(u){return document.createElementNS("http://www.w3.org/2000/svg",u)}function $e(u,v){var _="",A,R,Y,ue,ge,we;for(A=0,Y=u.length;A<Y;A++){for(ge=u[A],R=0,ue=ge.length;R<ue;R++)we=ge[R],_+=(R?"L":"M")+we.x+" "+we.y;_+=v?mt.svg?"z":"x":""}return _||"M0 0"}var He=document.documentElement.style,lt="ActiveXObject"in window,Tt=lt&&!document.addEventListener,ir="msLaunchUri"in navigator&&!("documentMode"in document),Ut=ga("webkit"),ce=ga("android"),je=ga("android 2")||ga("android 3"),_e=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Q=ce&&ga("Google")&&_e<537&&!("AudioNode"in window),ve=!!window.opera,Te=!ir&&ga("chrome"),qe=ga("gecko")&&!Ut&&!ve&&!lt,Pt=!Te&&ga("safari"),fr=ga("phantom"),gn="OTransition"in He,Zw=navigator.platform.indexOf("Win")===0,du=lt&&"transition"in He,Oc="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!je,Kg="MozPerspective"in He,Gg=!window.L_DISABLE_3D&&(du||Oc||Kg)&&!gn&&!fr,Mc=typeof orientation<"u"||ga("mobile"),Zg=Mc&&Ut,GZ=Mc&&Oc,WE=!window.PointerEvent&&window.MSPointerEvent,HE=!!(window.PointerEvent||WE),qE="ontouchstart"in window||!!window.TouchEvent,ZZ=!window.L_NO_TOUCH&&(qE||HE),YZ=Mc&&ve,XZ=Mc&&qe,QZ=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,JZ=function(){var u=!1;try{var v=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("testPassiveEventSupport",m,v),window.removeEventListener("testPassiveEventSupport",m,v)}catch{}return u}(),eY=function(){return!!document.createElement("canvas").getContext}(),Yw=!!(document.createElementNS&&Ce("svg").createSVGRect),tY=!!Yw&&function(){var u=document.createElement("div");return u.innerHTML="<svg/>",(u.firstChild&&u.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),rY=!Yw&&function(){try{var u=document.createElement("div");u.innerHTML='<v:shape adj="1"/>';var v=u.firstChild;return v.style.behavior="url(#default#VML)",v&&typeof v.adj=="object"}catch{return!1}}(),nY=navigator.platform.indexOf("Mac")===0,sY=navigator.platform.indexOf("Linux")===0;function ga(u){return navigator.userAgent.toLowerCase().indexOf(u)>=0}var mt={ie:lt,ielt9:Tt,edge:ir,webkit:Ut,android:ce,android23:je,androidStock:Q,opera:ve,chrome:Te,gecko:qe,safari:Pt,phantom:fr,opera12:gn,win:Zw,ie3d:du,webkit3d:Oc,gecko3d:Kg,any3d:Gg,mobile:Mc,mobileWebkit:Zg,mobileWebkit3d:GZ,msPointer:WE,pointer:HE,touch:ZZ,touchNative:qE,mobileOpera:YZ,mobileGecko:XZ,retina:QZ,passiveEvents:JZ,canvas:eY,svg:Yw,vml:rY,inlineSvg:tY,mac:nY,linux:sY},KE=mt.msPointer?"MSPointerDown":"pointerdown",GE=mt.msPointer?"MSPointerMove":"pointermove",ZE=mt.msPointer?"MSPointerUp":"pointerup",YE=mt.msPointer?"MSPointerCancel":"pointercancel",Xw={touchstart:KE,touchmove:GE,touchend:ZE,touchcancel:YE},XE={touchstart:dY,touchmove:Yg,touchend:Yg,touchcancel:Yg},uu={},QE=!1;function iY(u,v,_){return v==="touchstart"&&cY(),XE[v]?(_=XE[v].bind(this,_),u.addEventListener(Xw[v],_,!1),_):(console.warn("wrong event specified:",v),m)}function aY(u,v,_){if(!Xw[v]){console.warn("wrong event specified:",v);return}u.removeEventListener(Xw[v],_,!1)}function oY(u){uu[u.pointerId]=u}function lY(u){uu[u.pointerId]&&(uu[u.pointerId]=u)}function JE(u){delete uu[u.pointerId]}function cY(){QE||(document.addEventListener(KE,oY,!0),document.addEventListener(GE,lY,!0),document.addEventListener(ZE,JE,!0),document.addEventListener(YE,JE,!0),QE=!0)}function Yg(u,v){if(v.pointerType!==(v.MSPOINTER_TYPE_MOUSE||"mouse")){v.touches=[];for(var _ in uu)v.touches.push(uu[_]);v.changedTouches=[v],u(v)}}function dY(u,v){v.MSPOINTER_TYPE_TOUCH&&v.pointerType===v.MSPOINTER_TYPE_TOUCH&&Dn(v),Yg(u,v)}function uY(u){var v={},_,A;for(A in u)_=u[A],v[A]=_&&_.bind?_.bind(u):_;return u=v,v.type="dblclick",v.detail=2,v.isTrusted=!1,v._simulated=!0,v}var hY=200;function mY(u,v){u.addEventListener("dblclick",v);var _=0,A;function R(Y){if(Y.detail!==1){A=Y.detail;return}if(!(Y.pointerType==="mouse"||Y.sourceCapabilities&&!Y.sourceCapabilities.firesTouchEvents)){var ue=s4(Y);if(!(ue.some(function(we){return we instanceof HTMLLabelElement&&we.attributes.for})&&!ue.some(function(we){return we instanceof HTMLInputElement||we instanceof HTMLSelectElement}))){var ge=Date.now();ge-_<=hY?(A++,A===2&&v(uY(Y))):A=1,_=ge}}}return u.addEventListener("click",R),{dblclick:v,simDblclick:R}}function fY(u,v){u.removeEventListener("dblclick",v.dblclick),u.removeEventListener("click",v.simDblclick)}var Qw=Jg(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),tf=Jg(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),e4=tf==="webkitTransition"||tf==="OTransition"?tf+"End":"transitionend";function t4(u){return typeof u=="string"?document.getElementById(u):u}function rf(u,v){var _=u.style[v]||u.currentStyle&&u.currentStyle[v];if((!_||_==="auto")&&document.defaultView){var A=document.defaultView.getComputedStyle(u,null);_=A?A[v]:null}return _==="auto"?null:_}function tr(u,v,_){var A=document.createElement(u);return A.className=v||"",_&&_.appendChild(A),A}function zr(u){var v=u.parentNode;v&&v.removeChild(u)}function Xg(u){for(;u.firstChild;)u.removeChild(u.firstChild)}function hu(u){var v=u.parentNode;v&&v.lastChild!==u&&v.appendChild(u)}function mu(u){var v=u.parentNode;v&&v.firstChild!==u&&v.insertBefore(u,v.firstChild)}function Jw(u,v){if(u.classList!==void 0)return u.classList.contains(v);var _=Qg(u);return _.length>0&&new RegExp("(^|\\s)"+v+"(\\s|$)").test(_)}function Lt(u,v){if(u.classList!==void 0)for(var _=x(v),A=0,R=_.length;A<R;A++)u.classList.add(_[A]);else if(!Jw(u,v)){var Y=Qg(u);eN(u,(Y?Y+" ":"")+v)}}function en(u,v){u.classList!==void 0?u.classList.remove(v):eN(u,g((" "+Qg(u)+" ").replace(" "+v+" "," ")))}function eN(u,v){u.className.baseVal===void 0?u.className=v:u.className.baseVal=v}function Qg(u){return u.correspondingElement&&(u=u.correspondingElement),u.className.baseVal===void 0?u.className:u.className.baseVal}function li(u,v){"opacity"in u.style?u.style.opacity=v:"filter"in u.style&&pY(u,v)}function pY(u,v){var _=!1,A="DXImageTransform.Microsoft.Alpha";try{_=u.filters.item(A)}catch{if(v===1)return}v=Math.round(v*100),_?(_.Enabled=v!==100,_.Opacity=v):u.style.filter+=" progid:"+A+"(opacity="+v+")"}function Jg(u){for(var v=document.documentElement.style,_=0;_<u.length;_++)if(u[_]in v)return u[_];return!1}function Dc(u,v,_){var A=v||new W(0,0);u.style[Qw]=(mt.ie3d?"translate("+A.x+"px,"+A.y+"px)":"translate3d("+A.x+"px,"+A.y+"px,0)")+(_?" scale("+_+")":"")}function cn(u,v){u._leaflet_pos=v,mt.any3d?Dc(u,v):(u.style.left=v.x+"px",u.style.top=v.y+"px")}function Ic(u){return u._leaflet_pos||new W(0,0)}var nf,sf,tN;if("onselectstart"in document)nf=function(){At(window,"selectstart",Dn)},sf=function(){yr(window,"selectstart",Dn)};else{var af=Jg(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);nf=function(){if(af){var u=document.documentElement.style;tN=u[af],u[af]="none"}},sf=function(){af&&(document.documentElement.style[af]=tN,tN=void 0)}}function rN(){At(window,"dragstart",Dn)}function nN(){yr(window,"dragstart",Dn)}var ev,sN;function iN(u){for(;u.tabIndex===-1;)u=u.parentNode;u.style&&(tv(),ev=u,sN=u.style.outlineStyle,u.style.outlineStyle="none",At(window,"keydown",tv))}function tv(){ev&&(ev.style.outlineStyle=sN,ev=void 0,sN=void 0,yr(window,"keydown",tv))}function r4(u){do u=u.parentNode;while((!u.offsetWidth||!u.offsetHeight)&&u!==document.body);return u}function aN(u){var v=u.getBoundingClientRect();return{x:v.width/u.offsetWidth||1,y:v.height/u.offsetHeight||1,boundingClientRect:v}}var xY={__proto__:null,TRANSFORM:Qw,TRANSITION:tf,TRANSITION_END:e4,get:t4,getStyle:rf,create:tr,remove:zr,empty:Xg,toFront:hu,toBack:mu,hasClass:Jw,addClass:Lt,removeClass:en,setClass:eN,getClass:Qg,setOpacity:li,testProp:Jg,setTransform:Dc,setPosition:cn,getPosition:Ic,get disableTextSelection(){return nf},get enableTextSelection(){return sf},disableImageDrag:rN,enableImageDrag:nN,preventOutline:iN,restoreOutline:tv,getSizedParentNode:r4,getScale:aN};function At(u,v,_,A){if(v&&typeof v=="object")for(var R in v)lN(u,R,v[R],_);else{v=x(v);for(var Y=0,ue=v.length;Y<ue;Y++)lN(u,v[Y],_,A)}return this}var va="_leaflet_events";function yr(u,v,_,A){if(arguments.length===1)n4(u),delete u[va];else if(v&&typeof v=="object")for(var R in v)cN(u,R,v[R],_);else if(v=x(v),arguments.length===2)n4(u,function(ge){return S(v,ge)!==-1});else for(var Y=0,ue=v.length;Y<ue;Y++)cN(u,v[Y],_,A);return this}function n4(u,v){for(var _ in u[va]){var A=_.split(/\d/)[0];(!v||v(A))&&cN(u,A,null,null,_)}}var oN={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function lN(u,v,_,A){var R=v+c(_)+(A?"_"+c(A):"");if(u[va]&&u[va][R])return this;var Y=function(ge){return _.call(A||u,ge||window.event)},ue=Y;!mt.touchNative&&mt.pointer&&v.indexOf("touch")===0?Y=iY(u,v,Y):mt.touch&&v==="dblclick"?Y=mY(u,Y):"addEventListener"in u?v==="touchstart"||v==="touchmove"||v==="wheel"||v==="mousewheel"?u.addEventListener(oN[v]||v,Y,mt.passiveEvents?{passive:!1}:!1):v==="mouseenter"||v==="mouseleave"?(Y=function(ge){ge=ge||window.event,uN(u,ge)&&ue(ge)},u.addEventListener(oN[v],Y,!1)):u.addEventListener(v,ue,!1):u.attachEvent("on"+v,Y),u[va]=u[va]||{},u[va][R]=Y}function cN(u,v,_,A,R){R=R||v+c(_)+(A?"_"+c(A):"");var Y=u[va]&&u[va][R];if(!Y)return this;!mt.touchNative&&mt.pointer&&v.indexOf("touch")===0?aY(u,v,Y):mt.touch&&v==="dblclick"?fY(u,Y):"removeEventListener"in u?u.removeEventListener(oN[v]||v,Y,!1):u.detachEvent("on"+v,Y),u[va][R]=null}function Lc(u){return u.stopPropagation?u.stopPropagation():u.originalEvent?u.originalEvent._stopped=!0:u.cancelBubble=!0,this}function dN(u){return lN(u,"wheel",Lc),this}function of(u){return At(u,"mousedown touchstart dblclick contextmenu",Lc),u._leaflet_disable_click=!0,this}function Dn(u){return u.preventDefault?u.preventDefault():u.returnValue=!1,this}function Rc(u){return Dn(u),Lc(u),this}function s4(u){if(u.composedPath)return u.composedPath();for(var v=[],_=u.target;_;)v.push(_),_=_.parentNode;return v}function i4(u,v){if(!v)return new W(u.clientX,u.clientY);var _=aN(v),A=_.boundingClientRect;return new W((u.clientX-A.left)/_.x-v.clientLeft,(u.clientY-A.top)/_.y-v.clientTop)}var gY=mt.linux&&mt.chrome?window.devicePixelRatio:mt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function a4(u){return mt.edge?u.wheelDeltaY/2:u.deltaY&&u.deltaMode===0?-u.deltaY/gY:u.deltaY&&u.deltaMode===1?-u.deltaY*20:u.deltaY&&u.deltaMode===2?-u.deltaY*60:u.deltaX||u.deltaZ?0:u.wheelDelta?(u.wheelDeltaY||u.wheelDelta)/2:u.detail&&Math.abs(u.detail)<32765?-u.detail*20:u.detail?u.detail/-32765*60:0}function uN(u,v){var _=v.relatedTarget;if(!_)return!0;try{for(;_&&_!==u;)_=_.parentNode}catch{return!1}return _!==u}var vY={__proto__:null,on:At,off:yr,stopPropagation:Lc,disableScrollPropagation:dN,disableClickPropagation:of,preventDefault:Dn,stop:Rc,getPropagationPath:s4,getMousePosition:i4,getWheelDelta:a4,isExternalTarget:uN,addListener:At,removeListener:yr},o4=K.extend({run:function(u,v,_,A){this.stop(),this._el=u,this._inProgress=!0,this._duration=_||.25,this._easeOutPower=1/Math.max(A||.5,.2),this._startPos=Ic(u),this._offset=v.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=E(this._animate,this),this._step()},_step:function(u){var v=+new Date-this._startTime,_=this._duration*1e3;v<_?this._runFrame(this._easeOut(v/_),u):(this._runFrame(1),this._complete())},_runFrame:function(u,v){var _=this._startPos.add(this._offset.multiplyBy(u));v&&_._round(),cn(this._el,_),this.fire("step")},_complete:function(){D(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(u){return 1-Math.pow(1-u,this._easeOutPower)}}),Qt=K.extend({options:{crs:ee,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(u,v){v=p(this,v),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(u),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),v.maxBounds&&this.setMaxBounds(v.maxBounds),v.zoom!==void 0&&(this._zoom=this._limitZoom(v.zoom)),v.center&&v.zoom!==void 0&&this.setView(ke(v.center),v.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=tf&&mt.any3d&&!mt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),At(this._proxy,e4,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(u,v,_){if(v=v===void 0?this._zoom:this._limitZoom(v),u=this._limitCenter(ke(u),v,this.options.maxBounds),_=_||{},this._stop(),this._loaded&&!_.reset&&_!==!0){_.animate!==void 0&&(_.zoom=i({animate:_.animate},_.zoom),_.pan=i({animate:_.animate,duration:_.duration},_.pan));var A=this._zoom!==v?this._tryAnimatedZoom&&this._tryAnimatedZoom(u,v,_.zoom):this._tryAnimatedPan(u,_.pan);if(A)return clearTimeout(this._sizeTimer),this}return this._resetView(u,v,_.pan&&_.pan.noMoveStart),this},setZoom:function(u,v){return this._loaded?this.setView(this.getCenter(),u,{zoom:v}):(this._zoom=u,this)},zoomIn:function(u,v){return u=u||(mt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+u,v)},zoomOut:function(u,v){return u=u||(mt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-u,v)},setZoomAround:function(u,v,_){var A=this.getZoomScale(v),R=this.getSize().divideBy(2),Y=u instanceof W?u:this.latLngToContainerPoint(u),ue=Y.subtract(R).multiplyBy(1-1/A),ge=this.containerPointToLatLng(R.add(ue));return this.setView(ge,v,{zoom:_})},_getBoundsCenterZoom:function(u,v){v=v||{},u=u.getBounds?u.getBounds():ye(u);var _=z(v.paddingTopLeft||v.padding||[0,0]),A=z(v.paddingBottomRight||v.padding||[0,0]),R=this.getBoundsZoom(u,!1,_.add(A));if(R=typeof v.maxZoom=="number"?Math.min(v.maxZoom,R):R,R===1/0)return{center:u.getCenter(),zoom:R};var Y=A.subtract(_).divideBy(2),ue=this.project(u.getSouthWest(),R),ge=this.project(u.getNorthEast(),R),we=this.unproject(ue.add(ge).divideBy(2).add(Y),R);return{center:we,zoom:R}},fitBounds:function(u,v){if(u=ye(u),!u.isValid())throw new Error("Bounds are not valid.");var _=this._getBoundsCenterZoom(u,v);return this.setView(_.center,_.zoom,v)},fitWorld:function(u){return this.fitBounds([[-90,-180],[90,180]],u)},panTo:function(u,v){return this.setView(u,this._zoom,{pan:v})},panBy:function(u,v){if(u=z(u).round(),v=v||{},!u.x&&!u.y)return this.fire("moveend");if(v.animate!==!0&&!this.getSize().contains(u))return this._resetView(this.unproject(this.project(this.getCenter()).add(u)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new o4,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),v.noMoveStart||this.fire("movestart"),v.animate!==!1){Lt(this._mapPane,"leaflet-pan-anim");var _=this._getMapPanePos().subtract(u).round();this._panAnim.run(this._mapPane,_,v.duration||.25,v.easeLinearity)}else this._rawPanBy(u),this.fire("move").fire("moveend");return this},flyTo:function(u,v,_){if(_=_||{},_.animate===!1||!mt.any3d)return this.setView(u,v,_);this._stop();var A=this.project(this.getCenter()),R=this.project(u),Y=this.getSize(),ue=this._zoom;u=ke(u),v=v===void 0?ue:v;var ge=Math.max(Y.x,Y.y),we=ge*this.getZoomScale(ue,v),De=R.distanceTo(A)||1,Xe=1.42,bt=Xe*Xe;function zt(dn){var mv=dn?-1:1,aX=dn?we:ge,oX=we*we-ge*ge+mv*bt*bt*De*De,lX=2*aX*bt*De,wN=oX/lX,B4=Math.sqrt(wN*wN+1)-wN,cX=B4<1e-9?-18:Math.log(B4);return cX}function ss(dn){return(Math.exp(dn)-Math.exp(-dn))/2}function Cn(dn){return(Math.exp(dn)+Math.exp(-dn))/2}function di(dn){return ss(dn)/Cn(dn)}var js=zt(0);function yu(dn){return ge*(Cn(js)/Cn(js+Xe*dn))}function rX(dn){return ge*(Cn(js)*di(js+Xe*dn)-ss(js))/bt}function nX(dn){return 1-Math.pow(1-dn,1.5)}var sX=Date.now(),F4=(zt(1)-js)/Xe,iX=_.duration?1e3*_.duration:1e3*F4*.8;function z4(){var dn=(Date.now()-sX)/iX,mv=nX(dn)*F4;dn<=1?(this._flyToFrame=E(z4,this),this._move(this.unproject(A.add(R.subtract(A).multiplyBy(rX(mv)/De)),ue),this.getScaleZoom(ge/yu(mv),ue),{flyTo:!0})):this._move(u,v)._moveEnd(!0)}return this._moveStart(!0,_.noMoveStart),z4.call(this),this},flyToBounds:function(u,v){var _=this._getBoundsCenterZoom(u,v);return this.flyTo(_.center,_.zoom,v)},setMaxBounds:function(u){return u=ye(u),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),u.isValid()?(this.options.maxBounds=u,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(u){var v=this.options.minZoom;return this.options.minZoom=u,this._loaded&&v!==u&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(u):this},setMaxZoom:function(u){var v=this.options.maxZoom;return this.options.maxZoom=u,this._loaded&&v!==u&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(u):this},panInsideBounds:function(u,v){this._enforcingBounds=!0;var _=this.getCenter(),A=this._limitCenter(_,this._zoom,ye(u));return _.equals(A)||this.panTo(A,v),this._enforcingBounds=!1,this},panInside:function(u,v){v=v||{};var _=z(v.paddingTopLeft||v.padding||[0,0]),A=z(v.paddingBottomRight||v.padding||[0,0]),R=this.project(this.getCenter()),Y=this.project(u),ue=this.getPixelBounds(),ge=J([ue.min.add(_),ue.max.subtract(A)]),we=ge.getSize();if(!ge.contains(Y)){this._enforcingBounds=!0;var De=Y.subtract(ge.getCenter()),Xe=ge.extend(Y).getSize().subtract(we);R.x+=De.x<0?-Xe.x:Xe.x,R.y+=De.y<0?-Xe.y:Xe.y,this.panTo(this.unproject(R),v),this._enforcingBounds=!1}return this},invalidateSize:function(u){if(!this._loaded)return this;u=i({animate:!1,pan:!0},u===!0?{animate:!0}:u);var v=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var _=this.getSize(),A=v.divideBy(2).round(),R=_.divideBy(2).round(),Y=A.subtract(R);return!Y.x&&!Y.y?this:(u.animate&&u.pan?this.panBy(Y):(u.pan&&this._rawPanBy(Y),this.fire("move"),u.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:v,newSize:_}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(u){if(u=this._locateOptions=i({timeout:1e4,watch:!1},u),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var v=o(this._handleGeolocationResponse,this),_=o(this._handleGeolocationError,this);return u.watch?this._locationWatchId=navigator.geolocation.watchPosition(v,_,u):navigator.geolocation.getCurrentPosition(v,_,u),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(u){if(this._container._leaflet_id){var v=u.code,_=u.message||(v===1?"permission denied":v===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:v,message:"Geolocation error: "+_+"."})}},_handleGeolocationResponse:function(u){if(this._container._leaflet_id){var v=u.coords.latitude,_=u.coords.longitude,A=new Ne(v,_),R=A.toBounds(u.coords.accuracy*2),Y=this._locateOptions;if(Y.setView){var ue=this.getBoundsZoom(R);this.setView(A,Y.maxZoom?Math.min(ue,Y.maxZoom):ue)}var ge={latlng:A,bounds:R,timestamp:u.timestamp};for(var we in u.coords)typeof u.coords[we]=="number"&&(ge[we]=u.coords[we]);this.fire("locationfound",ge)}},addHandler:function(u,v){if(!v)return this;var _=this[u]=new v(this);return this._handlers.push(_),this.options[u]&&_.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),zr(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(D(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var u;for(u in this._layers)this._layers[u].remove();for(u in this._panes)zr(this._panes[u]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(u,v){var _="leaflet-pane"+(u?" leaflet-"+u.replace("Pane","")+"-pane":""),A=tr("div",_,v||this._mapPane);return u&&(this._panes[u]=A),A},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var u=this.getPixelBounds(),v=this.unproject(u.getBottomLeft()),_=this.unproject(u.getTopRight());return new pe(v,_)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(u,v,_){u=ye(u),_=z(_||[0,0]);var A=this.getZoom()||0,R=this.getMinZoom(),Y=this.getMaxZoom(),ue=u.getNorthWest(),ge=u.getSouthEast(),we=this.getSize().subtract(_),De=J(this.project(ge,A),this.project(ue,A)).getSize(),Xe=mt.any3d?this.options.zoomSnap:1,bt=we.x/De.x,zt=we.y/De.y,ss=v?Math.max(bt,zt):Math.min(bt,zt);return A=this.getScaleZoom(ss,A),Xe&&(A=Math.round(A/(Xe/100))*(Xe/100),A=v?Math.ceil(A/Xe)*Xe:Math.floor(A/Xe)*Xe),Math.max(R,Math.min(Y,A))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new W(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(u,v){var _=this._getTopLeftPoint(u,v);return new q(_,_.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(u){return this.options.crs.getProjectedBounds(u===void 0?this.getZoom():u)},getPane:function(u){return typeof u=="string"?this._panes[u]:u},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(u,v){var _=this.options.crs;return v=v===void 0?this._zoom:v,_.scale(u)/_.scale(v)},getScaleZoom:function(u,v){var _=this.options.crs;v=v===void 0?this._zoom:v;var A=_.zoom(u*_.scale(v));return isNaN(A)?1/0:A},project:function(u,v){return v=v===void 0?this._zoom:v,this.options.crs.latLngToPoint(ke(u),v)},unproject:function(u,v){return v=v===void 0?this._zoom:v,this.options.crs.pointToLatLng(z(u),v)},layerPointToLatLng:function(u){var v=z(u).add(this.getPixelOrigin());return this.unproject(v)},latLngToLayerPoint:function(u){var v=this.project(ke(u))._round();return v._subtract(this.getPixelOrigin())},wrapLatLng:function(u){return this.options.crs.wrapLatLng(ke(u))},wrapLatLngBounds:function(u){return this.options.crs.wrapLatLngBounds(ye(u))},distance:function(u,v){return this.options.crs.distance(ke(u),ke(v))},containerPointToLayerPoint:function(u){return z(u).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(u){return z(u).add(this._getMapPanePos())},containerPointToLatLng:function(u){var v=this.containerPointToLayerPoint(z(u));return this.layerPointToLatLng(v)},latLngToContainerPoint:function(u){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ke(u)))},mouseEventToContainerPoint:function(u){return i4(u,this._container)},mouseEventToLayerPoint:function(u){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(u))},mouseEventToLatLng:function(u){return this.layerPointToLatLng(this.mouseEventToLayerPoint(u))},_initContainer:function(u){var v=this._container=t4(u);if(v){if(v._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");At(v,"scroll",this._onScroll,this),this._containerId=c(v)},_initLayout:function(){var u=this._container;this._fadeAnimated=this.options.fadeAnimation&&mt.any3d,Lt(u,"leaflet-container"+(mt.touch?" leaflet-touch":"")+(mt.retina?" leaflet-retina":"")+(mt.ielt9?" leaflet-oldie":"")+(mt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var v=rf(u,"position");v!=="absolute"&&v!=="relative"&&v!=="fixed"&&v!=="sticky"&&(u.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var u=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),cn(this._mapPane,new W(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Lt(u.markerPane,"leaflet-zoom-hide"),Lt(u.shadowPane,"leaflet-zoom-hide"))},_resetView:function(u,v,_){cn(this._mapPane,new W(0,0));var A=!this._loaded;this._loaded=!0,v=this._limitZoom(v),this.fire("viewprereset");var R=this._zoom!==v;this._moveStart(R,_)._move(u,v)._moveEnd(R),this.fire("viewreset"),A&&this.fire("load")},_moveStart:function(u,v){return u&&this.fire("zoomstart"),v||this.fire("movestart"),this},_move:function(u,v,_,A){v===void 0&&(v=this._zoom);var R=this._zoom!==v;return this._zoom=v,this._lastCenter=u,this._pixelOrigin=this._getNewPixelOrigin(u),A?_&&_.pinch&&this.fire("zoom",_):((R||_&&_.pinch)&&this.fire("zoom",_),this.fire("move",_)),this},_moveEnd:function(u){return u&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return D(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(u){cn(this._mapPane,this._getMapPanePos().subtract(u))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(u){this._targets={},this._targets[c(this._container)]=this;var v=u?yr:At;v(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&v(window,"resize",this._onResize,this),mt.any3d&&this.options.transform3DLimit&&(u?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){D(this._resizeRequest),this._resizeRequest=E(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var u=this._getMapPanePos();Math.max(Math.abs(u.x),Math.abs(u.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(u,v){for(var _=[],A,R=v==="mouseout"||v==="mouseover",Y=u.target||u.srcElement,ue=!1;Y;){if(A=this._targets[c(Y)],A&&(v==="click"||v==="preclick")&&this._draggableMoved(A)){ue=!0;break}if(A&&A.listens(v,!0)&&(R&&!uN(Y,u)||(_.push(A),R))||Y===this._container)break;Y=Y.parentNode}return!_.length&&!ue&&!R&&this.listens(v,!0)&&(_=[this]),_},_isClickDisabled:function(u){for(;u&&u!==this._container;){if(u._leaflet_disable_click)return!0;u=u.parentNode}},_handleDOMEvent:function(u){var v=u.target||u.srcElement;if(!(!this._loaded||v._leaflet_disable_events||u.type==="click"&&this._isClickDisabled(v))){var _=u.type;_==="mousedown"&&iN(v),this._fireDOMEvent(u,_)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(u,v,_){if(u.type==="click"){var A=i({},u);A.type="preclick",this._fireDOMEvent(A,A.type,_)}var R=this._findEventTargets(u,v);if(_){for(var Y=[],ue=0;ue<_.length;ue++)_[ue].listens(v,!0)&&Y.push(_[ue]);R=Y.concat(R)}if(R.length){v==="contextmenu"&&Dn(u);var ge=R[0],we={originalEvent:u};if(u.type!=="keypress"&&u.type!=="keydown"&&u.type!=="keyup"){var De=ge.getLatLng&&(!ge._radius||ge._radius<=10);we.containerPoint=De?this.latLngToContainerPoint(ge.getLatLng()):this.mouseEventToContainerPoint(u),we.layerPoint=this.containerPointToLayerPoint(we.containerPoint),we.latlng=De?ge.getLatLng():this.layerPointToLatLng(we.layerPoint)}for(ue=0;ue<R.length;ue++)if(R[ue].fire(v,we,!0),we.originalEvent._stopped||R[ue].options.bubblingMouseEvents===!1&&S(this._mouseEvents,v)!==-1)return}},_draggableMoved:function(u){return u=u.dragging&&u.dragging.enabled()?u:this,u.dragging&&u.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var u=0,v=this._handlers.length;u<v;u++)this._handlers[u].disable()},whenReady:function(u,v){return this._loaded?u.call(v||this,{target:this}):this.on("load",u,v),this},_getMapPanePos:function(){return Ic(this._mapPane)||new W(0,0)},_moved:function(){var u=this._getMapPanePos();return u&&!u.equals([0,0])},_getTopLeftPoint:function(u,v){var _=u&&v!==void 0?this._getNewPixelOrigin(u,v):this.getPixelOrigin();return _.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(u,v){var _=this.getSize()._divideBy(2);return this.project(u,v)._subtract(_)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(u,v,_){var A=this._getNewPixelOrigin(_,v);return this.project(u,v)._subtract(A)},_latLngBoundsToNewLayerBounds:function(u,v,_){var A=this._getNewPixelOrigin(_,v);return J([this.project(u.getSouthWest(),v)._subtract(A),this.project(u.getNorthWest(),v)._subtract(A),this.project(u.getSouthEast(),v)._subtract(A),this.project(u.getNorthEast(),v)._subtract(A)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(u){return this.latLngToLayerPoint(u).subtract(this._getCenterLayerPoint())},_limitCenter:function(u,v,_){if(!_)return u;var A=this.project(u,v),R=this.getSize().divideBy(2),Y=new q(A.subtract(R),A.add(R)),ue=this._getBoundsOffset(Y,_,v);return Math.abs(ue.x)<=1&&Math.abs(ue.y)<=1?u:this.unproject(A.add(ue),v)},_limitOffset:function(u,v){if(!v)return u;var _=this.getPixelBounds(),A=new q(_.min.add(u),_.max.add(u));return u.add(this._getBoundsOffset(A,v))},_getBoundsOffset:function(u,v,_){var A=J(this.project(v.getNorthEast(),_),this.project(v.getSouthWest(),_)),R=A.min.subtract(u.min),Y=A.max.subtract(u.max),ue=this._rebound(R.x,-Y.x),ge=this._rebound(R.y,-Y.y);return new W(ue,ge)},_rebound:function(u,v){return u+v>0?Math.round(u-v)/2:Math.max(0,Math.ceil(u))-Math.max(0,Math.floor(v))},_limitZoom:function(u){var v=this.getMinZoom(),_=this.getMaxZoom(),A=mt.any3d?this.options.zoomSnap:1;return A&&(u=Math.round(u/A)*A),Math.max(v,Math.min(_,u))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){en(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(u,v){var _=this._getCenterOffset(u)._trunc();return(v&&v.animate)!==!0&&!this.getSize().contains(_)?!1:(this.panBy(_,v),!0)},_createAnimProxy:function(){var u=this._proxy=tr("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(u),this.on("zoomanim",function(v){var _=Qw,A=this._proxy.style[_];Dc(this._proxy,this.project(v.center,v.zoom),this.getZoomScale(v.zoom,1)),A===this._proxy.style[_]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){zr(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var u=this.getCenter(),v=this.getZoom();Dc(this._proxy,this.project(u,v),this.getZoomScale(v,1))},_catchTransitionEnd:function(u){this._animatingZoom&&u.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(u,v,_){if(this._animatingZoom)return!0;if(_=_||{},!this._zoomAnimated||_.animate===!1||this._nothingToAnimate()||Math.abs(v-this._zoom)>this.options.zoomAnimationThreshold)return!1;var A=this.getZoomScale(v),R=this._getCenterOffset(u)._divideBy(1-1/A);return _.animate!==!0&&!this.getSize().contains(R)?!1:(E(function(){this._moveStart(!0,_.noMoveStart||!1)._animateZoom(u,v,!0)},this),!0)},_animateZoom:function(u,v,_,A){this._mapPane&&(_&&(this._animatingZoom=!0,this._animateToCenter=u,this._animateToZoom=v,Lt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:u,zoom:v,noUpdate:A}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&en(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function yY(u,v){return new Qt(u,v)}var Bi=M.extend({options:{position:"topright"},initialize:function(u){p(this,u)},getPosition:function(){return this.options.position},setPosition:function(u){var v=this._map;return v&&v.removeControl(this),this.options.position=u,v&&v.addControl(this),this},getContainer:function(){return this._container},addTo:function(u){this.remove(),this._map=u;var v=this._container=this.onAdd(u),_=this.getPosition(),A=u._controlCorners[_];return Lt(v,"leaflet-control"),_.indexOf("bottom")!==-1?A.insertBefore(v,A.firstChild):A.appendChild(v),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(zr(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(u){this._map&&u&&u.screenX>0&&u.screenY>0&&this._map.getContainer().focus()}}),lf=function(u){return new Bi(u)};Qt.include({addControl:function(u){return u.addTo(this),this},removeControl:function(u){return u.remove(),this},_initControlPos:function(){var u=this._controlCorners={},v="leaflet-",_=this._controlContainer=tr("div",v+"control-container",this._container);function A(R,Y){var ue=v+R+" "+v+Y;u[R+Y]=tr("div",ue,_)}A("top","left"),A("top","right"),A("bottom","left"),A("bottom","right")},_clearControlPos:function(){for(var u in this._controlCorners)zr(this._controlCorners[u]);zr(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var l4=Bi.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(u,v,_,A){return _<A?-1:A<_?1:0}},initialize:function(u,v,_){p(this,_),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var A in u)this._addLayer(u[A],A);for(A in v)this._addLayer(v[A],A,!0)},onAdd:function(u){this._initLayout(),this._update(),this._map=u,u.on("zoomend",this._checkDisabledLayers,this);for(var v=0;v<this._layers.length;v++)this._layers[v].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(u){return Bi.prototype.addTo.call(this,u),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(u,v){return this._addLayer(u,v),this._map?this._update():this},addOverlay:function(u,v){return this._addLayer(u,v,!0),this._map?this._update():this},removeLayer:function(u){u.off("add remove",this._onLayerChange,this);var v=this._getLayer(c(u));return v&&this._layers.splice(this._layers.indexOf(v),1),this._map?this._update():this},expand:function(){Lt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var u=this._map.getSize().y-(this._container.offsetTop+50);return u<this._section.clientHeight?(Lt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=u+"px"):en(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return en(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var u="leaflet-control-layers",v=this._container=tr("div",u),_=this.options.collapsed;v.setAttribute("aria-haspopup",!0),of(v),dN(v);var A=this._section=tr("section",u+"-list");_&&(this._map.on("click",this.collapse,this),At(v,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var R=this._layersLink=tr("a",u+"-toggle",v);R.href="#",R.title="Layers",R.setAttribute("role","button"),At(R,{keydown:function(Y){Y.keyCode===13&&this._expandSafely()},click:function(Y){Dn(Y),this._expandSafely()}},this),_||this.expand(),this._baseLayersList=tr("div",u+"-base",A),this._separator=tr("div",u+"-separator",A),this._overlaysList=tr("div",u+"-overlays",A),v.appendChild(A)},_getLayer:function(u){for(var v=0;v<this._layers.length;v++)if(this._layers[v]&&c(this._layers[v].layer)===u)return this._layers[v]},_addLayer:function(u,v,_){this._map&&u.on("add remove",this._onLayerChange,this),this._layers.push({layer:u,name:v,overlay:_}),this.options.sortLayers&&this._layers.sort(o(function(A,R){return this.options.sortFunction(A.layer,R.layer,A.name,R.name)},this)),this.options.autoZIndex&&u.setZIndex&&(this._lastZIndex++,u.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Xg(this._baseLayersList),Xg(this._overlaysList),this._layerControlInputs=[];var u,v,_,A,R=0;for(_=0;_<this._layers.length;_++)A=this._layers[_],this._addItem(A),v=v||A.overlay,u=u||!A.overlay,R+=A.overlay?0:1;return this.options.hideSingleBase&&(u=u&&R>1,this._baseLayersList.style.display=u?"":"none"),this._separator.style.display=v&&u?"":"none",this},_onLayerChange:function(u){this._handlingClick||this._update();var v=this._getLayer(c(u.target)),_=v.overlay?u.type==="add"?"overlayadd":"overlayremove":u.type==="add"?"baselayerchange":null;_&&this._map.fire(_,v)},_createRadioElement:function(u,v){var _='<input type="radio" class="leaflet-control-layers-selector" name="'+u+'"'+(v?' checked="checked"':"")+"/>",A=document.createElement("div");return A.innerHTML=_,A.firstChild},_addItem:function(u){var v=document.createElement("label"),_=this._map.hasLayer(u.layer),A;u.overlay?(A=document.createElement("input"),A.type="checkbox",A.className="leaflet-control-layers-selector",A.defaultChecked=_):A=this._createRadioElement("leaflet-base-layers_"+c(this),_),this._layerControlInputs.push(A),A.layerId=c(u.layer),At(A,"click",this._onInputClick,this);var R=document.createElement("span");R.innerHTML=" "+u.name;var Y=document.createElement("span");v.appendChild(Y),Y.appendChild(A),Y.appendChild(R);var ue=u.overlay?this._overlaysList:this._baseLayersList;return ue.appendChild(v),this._checkDisabledLayers(),v},_onInputClick:function(){if(!this._preventClick){var u=this._layerControlInputs,v,_,A=[],R=[];this._handlingClick=!0;for(var Y=u.length-1;Y>=0;Y--)v=u[Y],_=this._getLayer(v.layerId).layer,v.checked?A.push(_):v.checked||R.push(_);for(Y=0;Y<R.length;Y++)this._map.hasLayer(R[Y])&&this._map.removeLayer(R[Y]);for(Y=0;Y<A.length;Y++)this._map.hasLayer(A[Y])||this._map.addLayer(A[Y]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var u=this._layerControlInputs,v,_,A=this._map.getZoom(),R=u.length-1;R>=0;R--)v=u[R],_=this._getLayer(v.layerId).layer,v.disabled=_.options.minZoom!==void 0&&A<_.options.minZoom||_.options.maxZoom!==void 0&&A>_.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var u=this._section;this._preventClick=!0,At(u,"click",Dn),this.expand();var v=this;setTimeout(function(){yr(u,"click",Dn),v._preventClick=!1})}}),jY=function(u,v,_){return new l4(u,v,_)},hN=Bi.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(u){var v="leaflet-control-zoom",_=tr("div",v+" leaflet-bar"),A=this.options;return this._zoomInButton=this._createButton(A.zoomInText,A.zoomInTitle,v+"-in",_,this._zoomIn),this._zoomOutButton=this._createButton(A.zoomOutText,A.zoomOutTitle,v+"-out",_,this._zoomOut),this._updateDisabled(),u.on("zoomend zoomlevelschange",this._updateDisabled,this),_},onRemove:function(u){u.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(u){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(u.shiftKey?3:1))},_zoomOut:function(u){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(u.shiftKey?3:1))},_createButton:function(u,v,_,A,R){var Y=tr("a",_,A);return Y.innerHTML=u,Y.href="#",Y.title=v,Y.setAttribute("role","button"),Y.setAttribute("aria-label",v),of(Y),At(Y,"click",Rc),At(Y,"click",R,this),At(Y,"click",this._refocusOnMap,this),Y},_updateDisabled:function(){var u=this._map,v="leaflet-disabled";en(this._zoomInButton,v),en(this._zoomOutButton,v),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||u._zoom===u.getMinZoom())&&(Lt(this._zoomOutButton,v),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||u._zoom===u.getMaxZoom())&&(Lt(this._zoomInButton,v),this._zoomInButton.setAttribute("aria-disabled","true"))}});Qt.mergeOptions({zoomControl:!0}),Qt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new hN,this.addControl(this.zoomControl))});var bY=function(u){return new hN(u)},c4=Bi.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(u){var v="leaflet-control-scale",_=tr("div",v),A=this.options;return this._addScales(A,v+"-line",_),u.on(A.updateWhenIdle?"moveend":"move",this._update,this),u.whenReady(this._update,this),_},onRemove:function(u){u.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(u,v,_){u.metric&&(this._mScale=tr("div",v,_)),u.imperial&&(this._iScale=tr("div",v,_))},_update:function(){var u=this._map,v=u.getSize().y/2,_=u.distance(u.containerPointToLatLng([0,v]),u.containerPointToLatLng([this.options.maxWidth,v]));this._updateScales(_)},_updateScales:function(u){this.options.metric&&u&&this._updateMetric(u),this.options.imperial&&u&&this._updateImperial(u)},_updateMetric:function(u){var v=this._getRoundNum(u),_=v<1e3?v+" m":v/1e3+" km";this._updateScale(this._mScale,_,v/u)},_updateImperial:function(u){var v=u*3.2808399,_,A,R;v>5280?(_=v/5280,A=this._getRoundNum(_),this._updateScale(this._iScale,A+" mi",A/_)):(R=this._getRoundNum(v),this._updateScale(this._iScale,R+" ft",R/v))},_updateScale:function(u,v,_){u.style.width=Math.round(this.options.maxWidth*_)+"px",u.innerHTML=v},_getRoundNum:function(u){var v=Math.pow(10,(Math.floor(u)+"").length-1),_=u/v;return _=_>=10?10:_>=5?5:_>=3?3:_>=2?2:1,v*_}}),wY=function(u){return new c4(u)},NY='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',mN=Bi.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(mt.inlineSvg?NY+" ":"")+"Leaflet</a>"},initialize:function(u){p(this,u),this._attributions={}},onAdd:function(u){u.attributionControl=this,this._container=tr("div","leaflet-control-attribution"),of(this._container);for(var v in u._layers)u._layers[v].getAttribution&&this.addAttribution(u._layers[v].getAttribution());return this._update(),u.on("layeradd",this._addAttribution,this),this._container},onRemove:function(u){u.off("layeradd",this._addAttribution,this)},_addAttribution:function(u){u.layer.getAttribution&&(this.addAttribution(u.layer.getAttribution()),u.layer.once("remove",function(){this.removeAttribution(u.layer.getAttribution())},this))},setPrefix:function(u){return this.options.prefix=u,this._update(),this},addAttribution:function(u){return u?(this._attributions[u]||(this._attributions[u]=0),this._attributions[u]++,this._update(),this):this},removeAttribution:function(u){return u?(this._attributions[u]&&(this._attributions[u]--,this._update()),this):this},_update:function(){if(this._map){var u=[];for(var v in this._attributions)this._attributions[v]&&u.push(v);var _=[];this.options.prefix&&_.push(this.options.prefix),u.length&&_.push(u.join(", ")),this._container.innerHTML=_.join(' <span aria-hidden="true">|</span> ')}}});Qt.mergeOptions({attributionControl:!0}),Qt.addInitHook(function(){this.options.attributionControl&&new mN().addTo(this)});var SY=function(u){return new mN(u)};Bi.Layers=l4,Bi.Zoom=hN,Bi.Scale=c4,Bi.Attribution=mN,lf.layers=jY,lf.zoom=bY,lf.scale=wY,lf.attribution=SY;var ya=M.extend({initialize:function(u){this._map=u},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ya.addTo=function(u,v){return u.addHandler(v,this),this};var _Y={Events:H},d4=mt.touch?"touchstart mousedown":"mousedown",ol=K.extend({options:{clickTolerance:3},initialize:function(u,v,_,A){p(this,A),this._element=u,this._dragStartTarget=v||u,this._preventOutline=_},enable:function(){this._enabled||(At(this._dragStartTarget,d4,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ol._dragging===this&&this.finishDrag(!0),yr(this._dragStartTarget,d4,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(u){if(this._enabled&&(this._moved=!1,!Jw(this._element,"leaflet-zoom-anim"))){if(u.touches&&u.touches.length!==1){ol._dragging===this&&this.finishDrag();return}if(!(ol._dragging||u.shiftKey||u.which!==1&&u.button!==1&&!u.touches)&&(ol._dragging=this,this._preventOutline&&iN(this._element),rN(),nf(),!this._moving)){this.fire("down");var v=u.touches?u.touches[0]:u,_=r4(this._element);this._startPoint=new W(v.clientX,v.clientY),this._startPos=Ic(this._element),this._parentScale=aN(_);var A=u.type==="mousedown";At(document,A?"mousemove":"touchmove",this._onMove,this),At(document,A?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(u){if(this._enabled){if(u.touches&&u.touches.length>1){this._moved=!0;return}var v=u.touches&&u.touches.length===1?u.touches[0]:u,_=new W(v.clientX,v.clientY)._subtract(this._startPoint);!_.x&&!_.y||Math.abs(_.x)+Math.abs(_.y)<this.options.clickTolerance||(_.x/=this._parentScale.x,_.y/=this._parentScale.y,Dn(u),this._moved||(this.fire("dragstart"),this._moved=!0,Lt(document.body,"leaflet-dragging"),this._lastTarget=u.target||u.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Lt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(_),this._moving=!0,this._lastEvent=u,this._updatePosition())}},_updatePosition:function(){var u={originalEvent:this._lastEvent};this.fire("predrag",u),cn(this._element,this._newPos),this.fire("drag",u)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(u){en(document.body,"leaflet-dragging"),this._lastTarget&&(en(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),yr(document,"mousemove touchmove",this._onMove,this),yr(document,"mouseup touchend touchcancel",this._onUp,this),nN(),sf();var v=this._moved&&this._moving;this._moving=!1,ol._dragging=!1,v&&this.fire("dragend",{noInertia:u,distance:this._newPos.distanceTo(this._startPos)})}});function u4(u,v,_){var A,R=[1,4,2,8],Y,ue,ge,we,De,Xe,bt,zt;for(Y=0,Xe=u.length;Y<Xe;Y++)u[Y]._code=$c(u[Y],v);for(ge=0;ge<4;ge++){for(bt=R[ge],A=[],Y=0,Xe=u.length,ue=Xe-1;Y<Xe;ue=Y++)we=u[Y],De=u[ue],we._code&bt?De._code&bt||(zt=rv(De,we,bt,v,_),zt._code=$c(zt,v),A.push(zt)):(De._code&bt&&(zt=rv(De,we,bt,v,_),zt._code=$c(zt,v),A.push(zt)),A.push(we));u=A}return u}function h4(u,v){var _,A,R,Y,ue,ge,we,De,Xe;if(!u||u.length===0)throw new Error("latlngs not passed");ci(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var bt=ke([0,0]),zt=ye(u),ss=zt.getNorthWest().distanceTo(zt.getSouthWest())*zt.getNorthEast().distanceTo(zt.getNorthWest());ss<1700&&(bt=fN(u));var Cn=u.length,di=[];for(_=0;_<Cn;_++){var js=ke(u[_]);di.push(v.project(ke([js.lat-bt.lat,js.lng-bt.lng])))}for(ge=we=De=0,_=0,A=Cn-1;_<Cn;A=_++)R=di[_],Y=di[A],ue=R.y*Y.x-Y.y*R.x,we+=(R.x+Y.x)*ue,De+=(R.y+Y.y)*ue,ge+=ue*3;ge===0?Xe=di[0]:Xe=[we/ge,De/ge];var yu=v.unproject(z(Xe));return ke([yu.lat+bt.lat,yu.lng+bt.lng])}function fN(u){for(var v=0,_=0,A=0,R=0;R<u.length;R++){var Y=ke(u[R]);v+=Y.lat,_+=Y.lng,A++}return ke([v/A,_/A])}var PY={__proto__:null,clipPolygon:u4,polygonCenter:h4,centroid:fN};function m4(u,v){if(!v||!u.length)return u.slice();var _=v*v;return u=TY(u,_),u=kY(u,_),u}function f4(u,v,_){return Math.sqrt(cf(u,v,_,!0))}function CY(u,v,_){return cf(u,v,_)}function kY(u,v){var _=u.length,A=typeof Uint8Array<"u"?Uint8Array:Array,R=new A(_);R[0]=R[_-1]=1,pN(u,R,v,0,_-1);var Y,ue=[];for(Y=0;Y<_;Y++)R[Y]&&ue.push(u[Y]);return ue}function pN(u,v,_,A,R){var Y=0,ue,ge,we;for(ge=A+1;ge<=R-1;ge++)we=cf(u[ge],u[A],u[R],!0),we>Y&&(ue=ge,Y=we);Y>_&&(v[ue]=1,pN(u,v,_,A,ue),pN(u,v,_,ue,R))}function TY(u,v){for(var _=[u[0]],A=1,R=0,Y=u.length;A<Y;A++)AY(u[A],u[R])>v&&(_.push(u[A]),R=A);return R<Y-1&&_.push(u[Y-1]),_}var p4;function x4(u,v,_,A,R){var Y=A?p4:$c(u,_),ue=$c(v,_),ge,we,De;for(p4=ue;;){if(!(Y|ue))return[u,v];if(Y&ue)return!1;ge=Y||ue,we=rv(u,v,ge,_,R),De=$c(we,_),ge===Y?(u=we,Y=De):(v=we,ue=De)}}function rv(u,v,_,A,R){var Y=v.x-u.x,ue=v.y-u.y,ge=A.min,we=A.max,De,Xe;return _&8?(De=u.x+Y*(we.y-u.y)/ue,Xe=we.y):_&4?(De=u.x+Y*(ge.y-u.y)/ue,Xe=ge.y):_&2?(De=we.x,Xe=u.y+ue*(we.x-u.x)/Y):_&1&&(De=ge.x,Xe=u.y+ue*(ge.x-u.x)/Y),new W(De,Xe,R)}function $c(u,v){var _=0;return u.x<v.min.x?_|=1:u.x>v.max.x&&(_|=2),u.y<v.min.y?_|=4:u.y>v.max.y&&(_|=8),_}function AY(u,v){var _=v.x-u.x,A=v.y-u.y;return _*_+A*A}function cf(u,v,_,A){var R=v.x,Y=v.y,ue=_.x-R,ge=_.y-Y,we=ue*ue+ge*ge,De;return we>0&&(De=((u.x-R)*ue+(u.y-Y)*ge)/we,De>1?(R=_.x,Y=_.y):De>0&&(R+=ue*De,Y+=ge*De)),ue=u.x-R,ge=u.y-Y,A?ue*ue+ge*ge:new W(R,Y)}function ci(u){return!N(u[0])||typeof u[0][0]!="object"&&typeof u[0][0]<"u"}function g4(u){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ci(u)}function v4(u,v){var _,A,R,Y,ue,ge,we,De;if(!u||u.length===0)throw new Error("latlngs not passed");ci(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var Xe=ke([0,0]),bt=ye(u),zt=bt.getNorthWest().distanceTo(bt.getSouthWest())*bt.getNorthEast().distanceTo(bt.getNorthWest());zt<1700&&(Xe=fN(u));var ss=u.length,Cn=[];for(_=0;_<ss;_++){var di=ke(u[_]);Cn.push(v.project(ke([di.lat-Xe.lat,di.lng-Xe.lng])))}for(_=0,A=0;_<ss-1;_++)A+=Cn[_].distanceTo(Cn[_+1])/2;if(A===0)De=Cn[0];else for(_=0,Y=0;_<ss-1;_++)if(ue=Cn[_],ge=Cn[_+1],R=ue.distanceTo(ge),Y+=R,Y>A){we=(Y-A)/R,De=[ge.x-we*(ge.x-ue.x),ge.y-we*(ge.y-ue.y)];break}var js=v.unproject(z(De));return ke([js.lat+Xe.lat,js.lng+Xe.lng])}var EY={__proto__:null,simplify:m4,pointToSegmentDistance:f4,closestPointOnSegment:CY,clipSegment:x4,_getEdgeIntersection:rv,_getBitCode:$c,_sqClosestPointOnSegment:cf,isFlat:ci,_flat:g4,polylineCenter:v4},xN={project:function(u){return new W(u.lng,u.lat)},unproject:function(u){return new Ne(u.y,u.x)},bounds:new q([-180,-90],[180,90])},gN={R:6378137,R_MINOR:6356752314245179e-9,bounds:new q([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(u){var v=Math.PI/180,_=this.R,A=u.lat*v,R=this.R_MINOR/_,Y=Math.sqrt(1-R*R),ue=Y*Math.sin(A),ge=Math.tan(Math.PI/4-A/2)/Math.pow((1-ue)/(1+ue),Y/2);return A=-_*Math.log(Math.max(ge,1e-10)),new W(u.lng*v*_,A)},unproject:function(u){for(var v=180/Math.PI,_=this.R,A=this.R_MINOR/_,R=Math.sqrt(1-A*A),Y=Math.exp(-u.y/_),ue=Math.PI/2-2*Math.atan(Y),ge=0,we=.1,De;ge<15&&Math.abs(we)>1e-7;ge++)De=R*Math.sin(ue),De=Math.pow((1-De)/(1+De),R/2),we=Math.PI/2-2*Math.atan(Y*De)-ue,ue+=we;return new Ne(ue*v,u.x*v/_)}},OY={__proto__:null,LonLat:xN,Mercator:gN,SphericalMercator:Me},MY=i({},We,{code:"EPSG:3395",projection:gN,transformation:function(){var u=.5/(Math.PI*gN.R);return $(u,.5,-u,.5)}()}),y4=i({},We,{code:"EPSG:4326",projection:xN,transformation:$(1/180,1,-1/180,.5)}),DY=i({},Ee,{projection:xN,transformation:$(1,0,-1,0),scale:function(u){return Math.pow(2,u)},zoom:function(u){return Math.log(u)/Math.LN2},distance:function(u,v){var _=v.lng-u.lng,A=v.lat-u.lat;return Math.sqrt(_*_+A*A)},infinite:!0});Ee.Earth=We,Ee.EPSG3395=MY,Ee.EPSG3857=ee,Ee.EPSG900913=X,Ee.EPSG4326=y4,Ee.Simple=DY;var Vi=K.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(u){return u.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(u){return u&&u.removeLayer(this),this},getPane:function(u){return this._map.getPane(u?this.options[u]||u:this.options.pane)},addInteractiveTarget:function(u){return this._map._targets[c(u)]=this,this},removeInteractiveTarget:function(u){return delete this._map._targets[c(u)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(u){var v=u.target;if(v.hasLayer(this)){if(this._map=v,this._zoomAnimated=v._zoomAnimated,this.getEvents){var _=this.getEvents();v.on(_,this),this.once("remove",function(){v.off(_,this)},this)}this.onAdd(v),this.fire("add"),v.fire("layeradd",{layer:this})}}});Qt.include({addLayer:function(u){if(!u._layerAdd)throw new Error("The provided object is not a Layer.");var v=c(u);return this._layers[v]?this:(this._layers[v]=u,u._mapToAdd=this,u.beforeAdd&&u.beforeAdd(this),this.whenReady(u._layerAdd,u),this)},removeLayer:function(u){var v=c(u);return this._layers[v]?(this._loaded&&u.onRemove(this),delete this._layers[v],this._loaded&&(this.fire("layerremove",{layer:u}),u.fire("remove")),u._map=u._mapToAdd=null,this):this},hasLayer:function(u){return c(u)in this._layers},eachLayer:function(u,v){for(var _ in this._layers)u.call(v,this._layers[_]);return this},_addLayers:function(u){u=u?N(u)?u:[u]:[];for(var v=0,_=u.length;v<_;v++)this.addLayer(u[v])},_addZoomLimit:function(u){(!isNaN(u.options.maxZoom)||!isNaN(u.options.minZoom))&&(this._zoomBoundLayers[c(u)]=u,this._updateZoomLevels())},_removeZoomLimit:function(u){var v=c(u);this._zoomBoundLayers[v]&&(delete this._zoomBoundLayers[v],this._updateZoomLevels())},_updateZoomLevels:function(){var u=1/0,v=-1/0,_=this._getZoomSpan();for(var A in this._zoomBoundLayers){var R=this._zoomBoundLayers[A].options;u=R.minZoom===void 0?u:Math.min(u,R.minZoom),v=R.maxZoom===void 0?v:Math.max(v,R.maxZoom)}this._layersMaxZoom=v===-1/0?void 0:v,this._layersMinZoom=u===1/0?void 0:u,_!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var fu=Vi.extend({initialize:function(u,v){p(this,v),this._layers={};var _,A;if(u)for(_=0,A=u.length;_<A;_++)this.addLayer(u[_])},addLayer:function(u){var v=this.getLayerId(u);return this._layers[v]=u,this._map&&this._map.addLayer(u),this},removeLayer:function(u){var v=u in this._layers?u:this.getLayerId(u);return this._map&&this._layers[v]&&this._map.removeLayer(this._layers[v]),delete this._layers[v],this},hasLayer:function(u){var v=typeof u=="number"?u:this.getLayerId(u);return v in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(u){var v=Array.prototype.slice.call(arguments,1),_,A;for(_ in this._layers)A=this._layers[_],A[u]&&A[u].apply(A,v);return this},onAdd:function(u){this.eachLayer(u.addLayer,u)},onRemove:function(u){this.eachLayer(u.removeLayer,u)},eachLayer:function(u,v){for(var _ in this._layers)u.call(v,this._layers[_]);return this},getLayer:function(u){return this._layers[u]},getLayers:function(){var u=[];return this.eachLayer(u.push,u),u},setZIndex:function(u){return this.invoke("setZIndex",u)},getLayerId:function(u){return c(u)}}),IY=function(u,v){return new fu(u,v)},ro=fu.extend({addLayer:function(u){return this.hasLayer(u)?this:(u.addEventParent(this),fu.prototype.addLayer.call(this,u),this.fire("layeradd",{layer:u}))},removeLayer:function(u){return this.hasLayer(u)?(u in this._layers&&(u=this._layers[u]),u.removeEventParent(this),fu.prototype.removeLayer.call(this,u),this.fire("layerremove",{layer:u})):this},setStyle:function(u){return this.invoke("setStyle",u)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var u=new pe;for(var v in this._layers){var _=this._layers[v];u.extend(_.getBounds?_.getBounds():_.getLatLng())}return u}}),LY=function(u,v){return new ro(u,v)},pu=M.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(u){p(this,u)},createIcon:function(u){return this._createIcon("icon",u)},createShadow:function(u){return this._createIcon("shadow",u)},_createIcon:function(u,v){var _=this._getIconUrl(u);if(!_){if(u==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var A=this._createImg(_,v&&v.tagName==="IMG"?v:null);return this._setIconStyles(A,u),(this.options.crossOrigin||this.options.crossOrigin==="")&&(A.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),A},_setIconStyles:function(u,v){var _=this.options,A=_[v+"Size"];typeof A=="number"&&(A=[A,A]);var R=z(A),Y=z(v==="shadow"&&_.shadowAnchor||_.iconAnchor||R&&R.divideBy(2,!0));u.className="leaflet-marker-"+v+" "+(_.className||""),Y&&(u.style.marginLeft=-Y.x+"px",u.style.marginTop=-Y.y+"px"),R&&(u.style.width=R.x+"px",u.style.height=R.y+"px")},_createImg:function(u,v){return v=v||document.createElement("img"),v.src=u,v},_getIconUrl:function(u){return mt.retina&&this.options[u+"RetinaUrl"]||this.options[u+"Url"]}});function RY(u){return new pu(u)}var df=pu.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(u){return typeof df.imagePath!="string"&&(df.imagePath=this._detectIconPath()),(this.options.imagePath||df.imagePath)+pu.prototype._getIconUrl.call(this,u)},_stripUrl:function(u){var v=function(_,A,R){var Y=A.exec(_);return Y&&Y[R]};return u=v(u,/^url\((['"])?(.+)\1\)$/,2),u&&v(u,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var u=tr("div","leaflet-default-icon-path",document.body),v=rf(u,"background-image")||rf(u,"backgroundImage");if(document.body.removeChild(u),v=this._stripUrl(v),v)return v;var _=document.querySelector('link[href$="leaflet.css"]');return _?_.href.substring(0,_.href.length-11-1):""}}),j4=ya.extend({initialize:function(u){this._marker=u},addHooks:function(){var u=this._marker._icon;this._draggable||(this._draggable=new ol(u,u,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Lt(u,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&en(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(u){var v=this._marker,_=v._map,A=this._marker.options.autoPanSpeed,R=this._marker.options.autoPanPadding,Y=Ic(v._icon),ue=_.getPixelBounds(),ge=_.getPixelOrigin(),we=J(ue.min._subtract(ge).add(R),ue.max._subtract(ge).subtract(R));if(!we.contains(Y)){var De=z((Math.max(we.max.x,Y.x)-we.max.x)/(ue.max.x-we.max.x)-(Math.min(we.min.x,Y.x)-we.min.x)/(ue.min.x-we.min.x),(Math.max(we.max.y,Y.y)-we.max.y)/(ue.max.y-we.max.y)-(Math.min(we.min.y,Y.y)-we.min.y)/(ue.min.y-we.min.y)).multiplyBy(A);_.panBy(De,{animate:!1}),this._draggable._newPos._add(De),this._draggable._startPos._add(De),cn(v._icon,this._draggable._newPos),this._onDrag(u),this._panRequest=E(this._adjustPan.bind(this,u))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(u){this._marker.options.autoPan&&(D(this._panRequest),this._panRequest=E(this._adjustPan.bind(this,u)))},_onDrag:function(u){var v=this._marker,_=v._shadow,A=Ic(v._icon),R=v._map.layerPointToLatLng(A);_&&cn(_,A),v._latlng=R,u.latlng=R,u.oldLatLng=this._oldLatLng,v.fire("move",u).fire("drag",u)},_onDragEnd:function(u){D(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",u)}}),nv=Vi.extend({options:{icon:new df,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(u,v){p(this,v),this._latlng=ke(u)},onAdd:function(u){this._zoomAnimated=this._zoomAnimated&&u.options.markerZoomAnimation,this._zoomAnimated&&u.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(u){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&u.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(u){var v=this._latlng;return this._latlng=ke(u),this.update(),this.fire("move",{oldLatLng:v,latlng:this._latlng})},setZIndexOffset:function(u){return this.options.zIndexOffset=u,this.update()},getIcon:function(){return this.options.icon},setIcon:function(u){return this.options.icon=u,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var u=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(u)}return this},_initIcon:function(){var u=this.options,v="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),_=u.icon.createIcon(this._icon),A=!1;_!==this._icon&&(this._icon&&this._removeIcon(),A=!0,u.title&&(_.title=u.title),_.tagName==="IMG"&&(_.alt=u.alt||"")),Lt(_,v),u.keyboard&&(_.tabIndex="0",_.setAttribute("role","button")),this._icon=_,u.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&At(_,"focus",this._panOnFocus,this);var R=u.icon.createShadow(this._shadow),Y=!1;R!==this._shadow&&(this._removeShadow(),Y=!0),R&&(Lt(R,v),R.alt=""),this._shadow=R,u.opacity<1&&this._updateOpacity(),A&&this.getPane().appendChild(this._icon),this._initInteraction(),R&&Y&&this.getPane(u.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&yr(this._icon,"focus",this._panOnFocus,this),zr(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&zr(this._shadow),this._shadow=null},_setPos:function(u){this._icon&&cn(this._icon,u),this._shadow&&cn(this._shadow,u),this._zIndex=u.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(u){this._icon&&(this._icon.style.zIndex=this._zIndex+u)},_animateZoom:function(u){var v=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center).round();this._setPos(v)},_initInteraction:function(){if(this.options.interactive&&(Lt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),j4)){var u=this.options.draggable;this.dragging&&(u=this.dragging.enabled(),this.dragging.disable()),this.dragging=new j4(this),u&&this.dragging.enable()}},setOpacity:function(u){return this.options.opacity=u,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var u=this.options.opacity;this._icon&&li(this._icon,u),this._shadow&&li(this._shadow,u)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var u=this._map;if(u){var v=this.options.icon.options,_=v.iconSize?z(v.iconSize):z(0,0),A=v.iconAnchor?z(v.iconAnchor):z(0,0);u.panInside(this._latlng,{paddingTopLeft:A,paddingBottomRight:_.subtract(A)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function $Y(u,v){return new nv(u,v)}var ll=Vi.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(u){this._renderer=u.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(u){return p(this,u),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&u&&Object.prototype.hasOwnProperty.call(u,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),sv=ll.extend({options:{fill:!0,radius:10},initialize:function(u,v){p(this,v),this._latlng=ke(u),this._radius=this.options.radius},setLatLng:function(u){var v=this._latlng;return this._latlng=ke(u),this.redraw(),this.fire("move",{oldLatLng:v,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(u){return this.options.radius=this._radius=u,this.redraw()},getRadius:function(){return this._radius},setStyle:function(u){var v=u&&u.radius||this._radius;return ll.prototype.setStyle.call(this,u),this.setRadius(v),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var u=this._radius,v=this._radiusY||u,_=this._clickTolerance(),A=[u+_,v+_];this._pxBounds=new q(this._point.subtract(A),this._point.add(A))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(u){return u.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function FY(u,v){return new sv(u,v)}var vN=sv.extend({initialize:function(u,v,_){if(typeof v=="number"&&(v=i({},_,{radius:v})),p(this,v),this._latlng=ke(u),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(u){return this._mRadius=u,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var u=[this._radius,this._radiusY||this._radius];return new pe(this._map.layerPointToLatLng(this._point.subtract(u)),this._map.layerPointToLatLng(this._point.add(u)))},setStyle:ll.prototype.setStyle,_project:function(){var u=this._latlng.lng,v=this._latlng.lat,_=this._map,A=_.options.crs;if(A.distance===We.distance){var R=Math.PI/180,Y=this._mRadius/We.R/R,ue=_.project([v+Y,u]),ge=_.project([v-Y,u]),we=ue.add(ge).divideBy(2),De=_.unproject(we).lat,Xe=Math.acos((Math.cos(Y*R)-Math.sin(v*R)*Math.sin(De*R))/(Math.cos(v*R)*Math.cos(De*R)))/R;(isNaN(Xe)||Xe===0)&&(Xe=Y/Math.cos(Math.PI/180*v)),this._point=we.subtract(_.getPixelOrigin()),this._radius=isNaN(Xe)?0:we.x-_.project([De,u-Xe]).x,this._radiusY=we.y-ue.y}else{var bt=A.unproject(A.project(this._latlng).subtract([this._mRadius,0]));this._point=_.latLngToLayerPoint(this._latlng),this._radius=this._point.x-_.latLngToLayerPoint(bt).x}this._updateBounds()}});function zY(u,v,_){return new vN(u,v,_)}var no=ll.extend({options:{smoothFactor:1,noClip:!1},initialize:function(u,v){p(this,v),this._setLatLngs(u)},getLatLngs:function(){return this._latlngs},setLatLngs:function(u){return this._setLatLngs(u),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(u){for(var v=1/0,_=null,A=cf,R,Y,ue=0,ge=this._parts.length;ue<ge;ue++)for(var we=this._parts[ue],De=1,Xe=we.length;De<Xe;De++){R=we[De-1],Y=we[De];var bt=A(u,R,Y,!0);bt<v&&(v=bt,_=A(u,R,Y))}return _&&(_.distance=Math.sqrt(v)),_},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return v4(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(u,v){return v=v||this._defaultShape(),u=ke(u),v.push(u),this._bounds.extend(u),this.redraw()},_setLatLngs:function(u){this._bounds=new pe,this._latlngs=this._convertLatLngs(u)},_defaultShape:function(){return ci(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(u){for(var v=[],_=ci(u),A=0,R=u.length;A<R;A++)_?(v[A]=ke(u[A]),this._bounds.extend(v[A])):v[A]=this._convertLatLngs(u[A]);return v},_project:function(){var u=new q;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,u),this._bounds.isValid()&&u.isValid()&&(this._rawPxBounds=u,this._updateBounds())},_updateBounds:function(){var u=this._clickTolerance(),v=new W(u,u);this._rawPxBounds&&(this._pxBounds=new q([this._rawPxBounds.min.subtract(v),this._rawPxBounds.max.add(v)]))},_projectLatlngs:function(u,v,_){var A=u[0]instanceof Ne,R=u.length,Y,ue;if(A){for(ue=[],Y=0;Y<R;Y++)ue[Y]=this._map.latLngToLayerPoint(u[Y]),_.extend(ue[Y]);v.push(ue)}else for(Y=0;Y<R;Y++)this._projectLatlngs(u[Y],v,_)},_clipPoints:function(){var u=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}var v=this._parts,_,A,R,Y,ue,ge,we;for(_=0,R=0,Y=this._rings.length;_<Y;_++)for(we=this._rings[_],A=0,ue=we.length;A<ue-1;A++)ge=x4(we[A],we[A+1],u,A,!0),ge&&(v[R]=v[R]||[],v[R].push(ge[0]),(ge[1]!==we[A+1]||A===ue-2)&&(v[R].push(ge[1]),R++))}},_simplifyPoints:function(){for(var u=this._parts,v=this.options.smoothFactor,_=0,A=u.length;_<A;_++)u[_]=m4(u[_],v)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(u,v){var _,A,R,Y,ue,ge,we=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(_=0,Y=this._parts.length;_<Y;_++)for(ge=this._parts[_],A=0,ue=ge.length,R=ue-1;A<ue;R=A++)if(!(!v&&A===0)&&f4(u,ge[R],ge[A])<=we)return!0;return!1}});function BY(u,v){return new no(u,v)}no._flat=g4;var xu=no.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return h4(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(u){var v=no.prototype._convertLatLngs.call(this,u),_=v.length;return _>=2&&v[0]instanceof Ne&&v[0].equals(v[_-1])&&v.pop(),v},_setLatLngs:function(u){no.prototype._setLatLngs.call(this,u),ci(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ci(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var u=this._renderer._bounds,v=this.options.weight,_=new W(v,v);if(u=new q(u.min.subtract(_),u.max.add(_)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}for(var A=0,R=this._rings.length,Y;A<R;A++)Y=u4(this._rings[A],u,!0),Y.length&&this._parts.push(Y)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(u){var v=!1,_,A,R,Y,ue,ge,we,De;if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(Y=0,we=this._parts.length;Y<we;Y++)for(_=this._parts[Y],ue=0,De=_.length,ge=De-1;ue<De;ge=ue++)A=_[ue],R=_[ge],A.y>u.y!=R.y>u.y&&u.x<(R.x-A.x)*(u.y-A.y)/(R.y-A.y)+A.x&&(v=!v);return v||no.prototype._containsPoint.call(this,u,!0)}});function VY(u,v){return new xu(u,v)}var so=ro.extend({initialize:function(u,v){p(this,v),this._layers={},u&&this.addData(u)},addData:function(u){var v=N(u)?u:u.features,_,A,R;if(v){for(_=0,A=v.length;_<A;_++)R=v[_],(R.geometries||R.geometry||R.features||R.coordinates)&&this.addData(R);return this}var Y=this.options;if(Y.filter&&!Y.filter(u))return this;var ue=iv(u,Y);return ue?(ue.feature=lv(u),ue.defaultOptions=ue.options,this.resetStyle(ue),Y.onEachFeature&&Y.onEachFeature(u,ue),this.addLayer(ue)):this},resetStyle:function(u){return u===void 0?this.eachLayer(this.resetStyle,this):(u.options=i({},u.defaultOptions),this._setLayerStyle(u,this.options.style),this)},setStyle:function(u){return this.eachLayer(function(v){this._setLayerStyle(v,u)},this)},_setLayerStyle:function(u,v){u.setStyle&&(typeof v=="function"&&(v=v(u.feature)),u.setStyle(v))}});function iv(u,v){var _=u.type==="Feature"?u.geometry:u,A=_?_.coordinates:null,R=[],Y=v&&v.pointToLayer,ue=v&&v.coordsToLatLng||yN,ge,we,De,Xe;if(!A&&!_)return null;switch(_.type){case"Point":return ge=ue(A),b4(Y,u,ge,v);case"MultiPoint":for(De=0,Xe=A.length;De<Xe;De++)ge=ue(A[De]),R.push(b4(Y,u,ge,v));return new ro(R);case"LineString":case"MultiLineString":return we=av(A,_.type==="LineString"?0:1,ue),new no(we,v);case"Polygon":case"MultiPolygon":return we=av(A,_.type==="Polygon"?1:2,ue),new xu(we,v);case"GeometryCollection":for(De=0,Xe=_.geometries.length;De<Xe;De++){var bt=iv({geometry:_.geometries[De],type:"Feature",properties:u.properties},v);bt&&R.push(bt)}return new ro(R);case"FeatureCollection":for(De=0,Xe=_.features.length;De<Xe;De++){var zt=iv(_.features[De],v);zt&&R.push(zt)}return new ro(R);default:throw new Error("Invalid GeoJSON object.")}}function b4(u,v,_,A){return u?u(v,_):new nv(_,A&&A.markersInheritOptions&&A)}function yN(u){return new Ne(u[1],u[0],u[2])}function av(u,v,_){for(var A=[],R=0,Y=u.length,ue;R<Y;R++)ue=v?av(u[R],v-1,_):(_||yN)(u[R]),A.push(ue);return A}function jN(u,v){return u=ke(u),u.alt!==void 0?[f(u.lng,v),f(u.lat,v),f(u.alt,v)]:[f(u.lng,v),f(u.lat,v)]}function ov(u,v,_,A){for(var R=[],Y=0,ue=u.length;Y<ue;Y++)R.push(v?ov(u[Y],ci(u[Y])?0:v-1,_,A):jN(u[Y],A));return!v&&_&&R.length>0&&R.push(R[0].slice()),R}function gu(u,v){return u.feature?i({},u.feature,{geometry:v}):lv(v)}function lv(u){return u.type==="Feature"||u.type==="FeatureCollection"?u:{type:"Feature",properties:{},geometry:u}}var bN={toGeoJSON:function(u){return gu(this,{type:"Point",coordinates:jN(this.getLatLng(),u)})}};nv.include(bN),vN.include(bN),sv.include(bN),no.include({toGeoJSON:function(u){var v=!ci(this._latlngs),_=ov(this._latlngs,v?1:0,!1,u);return gu(this,{type:(v?"Multi":"")+"LineString",coordinates:_})}}),xu.include({toGeoJSON:function(u){var v=!ci(this._latlngs),_=v&&!ci(this._latlngs[0]),A=ov(this._latlngs,_?2:v?1:0,!0,u);return v||(A=[A]),gu(this,{type:(_?"Multi":"")+"Polygon",coordinates:A})}}),fu.include({toMultiPoint:function(u){var v=[];return this.eachLayer(function(_){v.push(_.toGeoJSON(u).geometry.coordinates)}),gu(this,{type:"MultiPoint",coordinates:v})},toGeoJSON:function(u){var v=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(v==="MultiPoint")return this.toMultiPoint(u);var _=v==="GeometryCollection",A=[];return this.eachLayer(function(R){if(R.toGeoJSON){var Y=R.toGeoJSON(u);if(_)A.push(Y.geometry);else{var ue=lv(Y);ue.type==="FeatureCollection"?A.push.apply(A,ue.features):A.push(ue)}}}),_?gu(this,{geometries:A,type:"GeometryCollection"}):{type:"FeatureCollection",features:A}}});function w4(u,v){return new so(u,v)}var UY=w4,cv=Vi.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(u,v,_){this._url=u,this._bounds=ye(v),p(this,_)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Lt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){zr(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(u){return this.options.opacity=u,this._image&&this._updateOpacity(),this},setStyle:function(u){return u.opacity&&this.setOpacity(u.opacity),this},bringToFront:function(){return this._map&&hu(this._image),this},bringToBack:function(){return this._map&&mu(this._image),this},setUrl:function(u){return this._url=u,this._image&&(this._image.src=u),this},setBounds:function(u){return this._bounds=ye(u),this._map&&this._reset(),this},getEvents:function(){var u={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var u=this._url.tagName==="IMG",v=this._image=u?this._url:tr("img");if(Lt(v,"leaflet-image-layer"),this._zoomAnimated&&Lt(v,"leaflet-zoom-animated"),this.options.className&&Lt(v,this.options.className),v.onselectstart=m,v.onmousemove=m,v.onload=o(this.fire,this,"load"),v.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),u){this._url=v.src;return}v.src=this._url,v.alt=this.options.alt},_animateZoom:function(u){var v=this._map.getZoomScale(u.zoom),_=this._map._latLngBoundsToNewLayerBounds(this._bounds,u.zoom,u.center).min;Dc(this._image,_,v)},_reset:function(){var u=this._image,v=new q(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),_=v.getSize();cn(u,v.min),u.style.width=_.x+"px",u.style.height=_.y+"px"},_updateOpacity:function(){li(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var u=this.options.errorOverlayUrl;u&&this._url!==u&&(this._url=u,this._image.src=u)},getCenter:function(){return this._bounds.getCenter()}}),WY=function(u,v,_){return new cv(u,v,_)},N4=cv.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var u=this._url.tagName==="VIDEO",v=this._image=u?this._url:tr("video");if(Lt(v,"leaflet-image-layer"),this._zoomAnimated&&Lt(v,"leaflet-zoom-animated"),this.options.className&&Lt(v,this.options.className),v.onselectstart=m,v.onmousemove=m,v.onloadeddata=o(this.fire,this,"load"),u){for(var _=v.getElementsByTagName("source"),A=[],R=0;R<_.length;R++)A.push(_[R].src);this._url=_.length>0?A:[v.src];return}N(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(v.style,"objectFit")&&(v.style.objectFit="fill"),v.autoplay=!!this.options.autoplay,v.loop=!!this.options.loop,v.muted=!!this.options.muted,v.playsInline=!!this.options.playsInline;for(var Y=0;Y<this._url.length;Y++){var ue=tr("source");ue.src=this._url[Y],v.appendChild(ue)}}});function HY(u,v,_){return new N4(u,v,_)}var S4=cv.extend({_initImage:function(){var u=this._image=this._url;Lt(u,"leaflet-image-layer"),this._zoomAnimated&&Lt(u,"leaflet-zoom-animated"),this.options.className&&Lt(u,this.options.className),u.onselectstart=m,u.onmousemove=m}});function qY(u,v,_){return new S4(u,v,_)}var ja=Vi.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(u,v){u&&(u instanceof Ne||N(u))?(this._latlng=ke(u),p(this,v)):(p(this,u),this._source=v),this.options.content&&(this._content=this.options.content)},openOn:function(u){return u=arguments.length?u:this._source._map,u.hasLayer(this)||u.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(u){return this._map?this.close():(arguments.length?this._source=u:u=this._source,this._prepareOpen(),this.openOn(u._map)),this},onAdd:function(u){this._zoomAnimated=u._zoomAnimated,this._container||this._initLayout(),u._fadeAnimated&&li(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),u._fadeAnimated&&li(this._container,1),this.bringToFront(),this.options.interactive&&(Lt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(u){u._fadeAnimated?(li(this._container,0),this._removeTimeout=setTimeout(o(zr,void 0,this._container),200)):zr(this._container),this.options.interactive&&(en(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(u){return this._latlng=ke(u),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(u){return this._content=u,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var u={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&hu(this._container),this},bringToBack:function(){return this._map&&mu(this._container),this},_prepareOpen:function(u){var v=this._source;if(!v._map)return!1;if(v instanceof ro){v=null;var _=this._source._layers;for(var A in _)if(_[A]._map){v=_[A];break}if(!v)return!1;this._source=v}if(!u)if(v.getCenter)u=v.getCenter();else if(v.getLatLng)u=v.getLatLng();else if(v.getBounds)u=v.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(u),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var u=this._contentNode,v=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof v=="string")u.innerHTML=v;else{for(;u.hasChildNodes();)u.removeChild(u.firstChild);u.appendChild(v)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var u=this._map.latLngToLayerPoint(this._latlng),v=z(this.options.offset),_=this._getAnchor();this._zoomAnimated?cn(this._container,u.add(_)):v=v.add(u).add(_);var A=this._containerBottom=-v.y,R=this._containerLeft=-Math.round(this._containerWidth/2)+v.x;this._container.style.bottom=A+"px",this._container.style.left=R+"px"}},_getAnchor:function(){return[0,0]}});Qt.include({_initOverlay:function(u,v,_,A){var R=v;return R instanceof u||(R=new u(A).setContent(v)),_&&R.setLatLng(_),R}}),Vi.include({_initOverlay:function(u,v,_,A){var R=_;return R instanceof u?(p(R,A),R._source=this):(R=v&&!A?v:new u(A,this),R.setContent(_)),R}});var dv=ja.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(u){return u=arguments.length?u:this._source._map,!u.hasLayer(this)&&u._popup&&u._popup.options.autoClose&&u.removeLayer(u._popup),u._popup=this,ja.prototype.openOn.call(this,u)},onAdd:function(u){ja.prototype.onAdd.call(this,u),u.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ll||this._source.on("preclick",Lc))},onRemove:function(u){ja.prototype.onRemove.call(this,u),u.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ll||this._source.off("preclick",Lc))},getEvents:function(){var u=ja.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(u.preclick=this.close),this.options.keepInView&&(u.moveend=this._adjustPan),u},_initLayout:function(){var u="leaflet-popup",v=this._container=tr("div",u+" "+(this.options.className||"")+" leaflet-zoom-animated"),_=this._wrapper=tr("div",u+"-content-wrapper",v);if(this._contentNode=tr("div",u+"-content",_),of(v),dN(this._contentNode),At(v,"contextmenu",Lc),this._tipContainer=tr("div",u+"-tip-container",v),this._tip=tr("div",u+"-tip",this._tipContainer),this.options.closeButton){var A=this._closeButton=tr("a",u+"-close-button",v);A.setAttribute("role","button"),A.setAttribute("aria-label","Close popup"),A.href="#close",A.innerHTML='<span aria-hidden="true">&#215;</span>',At(A,"click",function(R){Dn(R),this.close()},this)}},_updateLayout:function(){var u=this._contentNode,v=u.style;v.width="",v.whiteSpace="nowrap";var _=u.offsetWidth;_=Math.min(_,this.options.maxWidth),_=Math.max(_,this.options.minWidth),v.width=_+1+"px",v.whiteSpace="",v.height="";var A=u.offsetHeight,R=this.options.maxHeight,Y="leaflet-popup-scrolled";R&&A>R?(v.height=R+"px",Lt(u,Y)):en(u,Y),this._containerWidth=this._container.offsetWidth},_animateZoom:function(u){var v=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center),_=this._getAnchor();cn(this._container,v.add(_))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var u=this._map,v=parseInt(rf(this._container,"marginBottom"),10)||0,_=this._container.offsetHeight+v,A=this._containerWidth,R=new W(this._containerLeft,-_-this._containerBottom);R._add(Ic(this._container));var Y=u.layerPointToContainerPoint(R),ue=z(this.options.autoPanPadding),ge=z(this.options.autoPanPaddingTopLeft||ue),we=z(this.options.autoPanPaddingBottomRight||ue),De=u.getSize(),Xe=0,bt=0;Y.x+A+we.x>De.x&&(Xe=Y.x+A-De.x+we.x),Y.x-Xe-ge.x<0&&(Xe=Y.x-ge.x),Y.y+_+we.y>De.y&&(bt=Y.y+_-De.y+we.y),Y.y-bt-ge.y<0&&(bt=Y.y-ge.y),(Xe||bt)&&(this.options.keepInView&&(this._autopanning=!0),u.fire("autopanstart").panBy([Xe,bt]))}},_getAnchor:function(){return z(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),KY=function(u,v){return new dv(u,v)};Qt.mergeOptions({closePopupOnClick:!0}),Qt.include({openPopup:function(u,v,_){return this._initOverlay(dv,u,v,_).openOn(this),this},closePopup:function(u){return u=arguments.length?u:this._popup,u&&u.close(),this}}),Vi.include({bindPopup:function(u,v){return this._popup=this._initOverlay(dv,this._popup,u,v),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(u){return this._popup&&(this instanceof ro||(this._popup._source=this),this._popup._prepareOpen(u||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(u){return this._popup&&this._popup.setContent(u),this},getPopup:function(){return this._popup},_openPopup:function(u){if(!(!this._popup||!this._map)){Rc(u);var v=u.layer||u.target;if(this._popup._source===v&&!(v instanceof ll)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(u.latlng);return}this._popup._source=v,this.openPopup(u.latlng)}},_movePopup:function(u){this._popup.setLatLng(u.latlng)},_onKeyPress:function(u){u.originalEvent.keyCode===13&&this._openPopup(u)}});var uv=ja.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(u){ja.prototype.onAdd.call(this,u),this.setOpacity(this.options.opacity),u.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(u){ja.prototype.onRemove.call(this,u),u.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var u=ja.prototype.getEvents.call(this);return this.options.permanent||(u.preclick=this.close),u},_initLayout:function(){var u="leaflet-tooltip",v=u+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=tr("div",v),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(u){var v,_,A=this._map,R=this._container,Y=A.latLngToContainerPoint(A.getCenter()),ue=A.layerPointToContainerPoint(u),ge=this.options.direction,we=R.offsetWidth,De=R.offsetHeight,Xe=z(this.options.offset),bt=this._getAnchor();ge==="top"?(v=we/2,_=De):ge==="bottom"?(v=we/2,_=0):ge==="center"?(v=we/2,_=De/2):ge==="right"?(v=0,_=De/2):ge==="left"?(v=we,_=De/2):ue.x<Y.x?(ge="right",v=0,_=De/2):(ge="left",v=we+(Xe.x+bt.x)*2,_=De/2),u=u.subtract(z(v,_,!0)).add(Xe).add(bt),en(R,"leaflet-tooltip-right"),en(R,"leaflet-tooltip-left"),en(R,"leaflet-tooltip-top"),en(R,"leaflet-tooltip-bottom"),Lt(R,"leaflet-tooltip-"+ge),cn(R,u)},_updatePosition:function(){var u=this._map.latLngToLayerPoint(this._latlng);this._setPosition(u)},setOpacity:function(u){this.options.opacity=u,this._container&&li(this._container,u)},_animateZoom:function(u){var v=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center);this._setPosition(v)},_getAnchor:function(){return z(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),GY=function(u,v){return new uv(u,v)};Qt.include({openTooltip:function(u,v,_){return this._initOverlay(uv,u,v,_).openOn(this),this},closeTooltip:function(u){return u.close(),this}}),Vi.include({bindTooltip:function(u,v){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(uv,this._tooltip,u,v),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(u){if(!(!u&&this._tooltipHandlersAdded)){var v=u?"off":"on",_={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?_.add=this._openTooltip:(_.mouseover=this._openTooltip,_.mouseout=this.closeTooltip,_.click=this._openTooltip,this._map?this._addFocusListeners():_.add=this._addFocusListeners),this._tooltip.options.sticky&&(_.mousemove=this._moveTooltip),this[v](_),this._tooltipHandlersAdded=!u}},openTooltip:function(u){return this._tooltip&&(this instanceof ro||(this._tooltip._source=this),this._tooltip._prepareOpen(u)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(u){return this._tooltip&&this._tooltip.setContent(u),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(u){var v=typeof u.getElement=="function"&&u.getElement();v&&(At(v,"focus",function(){this._tooltip._source=u,this.openTooltip()},this),At(v,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(u){var v=typeof u.getElement=="function"&&u.getElement();v&&v.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(u){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var v=this;this._map.once("moveend",function(){v._openOnceFlag=!1,v._openTooltip(u)});return}this._tooltip._source=u.layer||u.target,this.openTooltip(this._tooltip.options.sticky?u.latlng:void 0)}},_moveTooltip:function(u){var v=u.latlng,_,A;this._tooltip.options.sticky&&u.originalEvent&&(_=this._map.mouseEventToContainerPoint(u.originalEvent),A=this._map.containerPointToLayerPoint(_),v=this._map.layerPointToLatLng(A)),this._tooltip.setLatLng(v)}});var _4=pu.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(u){var v=u&&u.tagName==="DIV"?u:document.createElement("div"),_=this.options;if(_.html instanceof Element?(Xg(v),v.appendChild(_.html)):v.innerHTML=_.html!==!1?_.html:"",_.bgPos){var A=z(_.bgPos);v.style.backgroundPosition=-A.x+"px "+-A.y+"px"}return this._setIconStyles(v,"icon"),v},createShadow:function(){return null}});function ZY(u){return new _4(u)}pu.Default=df;var uf=Vi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:mt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(u){p(this,u)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(u){u._addZoomLimit(this)},onRemove:function(u){this._removeAllTiles(),zr(this._container),u._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(hu(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(mu(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(u){return this.options.opacity=u,this._updateOpacity(),this},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var u=this._clampZoom(this._map.getZoom());u!==this._tileZoom&&(this._tileZoom=u,this._updateLevels()),this._update()}return this},getEvents:function(){var u={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),u.move=this._onMove),this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},createTile:function(){return document.createElement("div")},getTileSize:function(){var u=this.options.tileSize;return u instanceof W?u:new W(u,u)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(u){for(var v=this.getPane().children,_=-u(-1/0,1/0),A=0,R=v.length,Y;A<R;A++)Y=v[A].style.zIndex,v[A]!==this._container&&Y&&(_=u(_,+Y));isFinite(_)&&(this.options.zIndex=_+u(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!mt.ielt9){li(this._container,this.options.opacity);var u=+new Date,v=!1,_=!1;for(var A in this._tiles){var R=this._tiles[A];if(!(!R.current||!R.loaded)){var Y=Math.min(1,(u-R.loaded)/200);li(R.el,Y),Y<1?v=!0:(R.active?_=!0:this._onOpaqueTile(R),R.active=!0)}}_&&!this._noPrune&&this._pruneTiles(),v&&(D(this._fadeFrame),this._fadeFrame=E(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=tr("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var u=this._tileZoom,v=this.options.maxZoom;if(u!==void 0){for(var _ in this._levels)_=Number(_),this._levels[_].el.children.length||_===u?(this._levels[_].el.style.zIndex=v-Math.abs(u-_),this._onUpdateLevel(_)):(zr(this._levels[_].el),this._removeTilesAtZoom(_),this._onRemoveLevel(_),delete this._levels[_]);var A=this._levels[u],R=this._map;return A||(A=this._levels[u]={},A.el=tr("div","leaflet-tile-container leaflet-zoom-animated",this._container),A.el.style.zIndex=v,A.origin=R.project(R.unproject(R.getPixelOrigin()),u).round(),A.zoom=u,this._setZoomTransform(A,R.getCenter(),R.getZoom()),m(A.el.offsetWidth),this._onCreateLevel(A)),this._level=A,A}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(this._map){var u,v,_=this._map.getZoom();if(_>this.options.maxZoom||_<this.options.minZoom){this._removeAllTiles();return}for(u in this._tiles)v=this._tiles[u],v.retain=v.current;for(u in this._tiles)if(v=this._tiles[u],v.current&&!v.active){var A=v.coords;this._retainParent(A.x,A.y,A.z,A.z-5)||this._retainChildren(A.x,A.y,A.z,A.z+2)}for(u in this._tiles)this._tiles[u].retain||this._removeTile(u)}},_removeTilesAtZoom:function(u){for(var v in this._tiles)this._tiles[v].coords.z===u&&this._removeTile(v)},_removeAllTiles:function(){for(var u in this._tiles)this._removeTile(u)},_invalidateAll:function(){for(var u in this._levels)zr(this._levels[u].el),this._onRemoveLevel(Number(u)),delete this._levels[u];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(u,v,_,A){var R=Math.floor(u/2),Y=Math.floor(v/2),ue=_-1,ge=new W(+R,+Y);ge.z=+ue;var we=this._tileCoordsToKey(ge),De=this._tiles[we];return De&&De.active?(De.retain=!0,!0):(De&&De.loaded&&(De.retain=!0),ue>A?this._retainParent(R,Y,ue,A):!1)},_retainChildren:function(u,v,_,A){for(var R=2*u;R<2*u+2;R++)for(var Y=2*v;Y<2*v+2;Y++){var ue=new W(R,Y);ue.z=_+1;var ge=this._tileCoordsToKey(ue),we=this._tiles[ge];if(we&&we.active){we.retain=!0;continue}else we&&we.loaded&&(we.retain=!0);_+1<A&&this._retainChildren(R,Y,_+1,A)}},_resetView:function(u){var v=u&&(u.pinch||u.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),v,v)},_animateZoom:function(u){this._setView(u.center,u.zoom,!0,u.noUpdate)},_clampZoom:function(u){var v=this.options;return v.minNativeZoom!==void 0&&u<v.minNativeZoom?v.minNativeZoom:v.maxNativeZoom!==void 0&&v.maxNativeZoom<u?v.maxNativeZoom:u},_setView:function(u,v,_,A){var R=Math.round(v);this.options.maxZoom!==void 0&&R>this.options.maxZoom||this.options.minZoom!==void 0&&R<this.options.minZoom?R=void 0:R=this._clampZoom(R);var Y=this.options.updateWhenZooming&&R!==this._tileZoom;(!A||Y)&&(this._tileZoom=R,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),R!==void 0&&this._update(u),_||this._pruneTiles(),this._noPrune=!!_),this._setZoomTransforms(u,v)},_setZoomTransforms:function(u,v){for(var _ in this._levels)this._setZoomTransform(this._levels[_],u,v)},_setZoomTransform:function(u,v,_){var A=this._map.getZoomScale(_,u.zoom),R=u.origin.multiplyBy(A).subtract(this._map._getNewPixelOrigin(v,_)).round();mt.any3d?Dc(u.el,R,A):cn(u.el,R)},_resetGrid:function(){var u=this._map,v=u.options.crs,_=this._tileSize=this.getTileSize(),A=this._tileZoom,R=this._map.getPixelWorldBounds(this._tileZoom);R&&(this._globalTileRange=this._pxBoundsToTileRange(R)),this._wrapX=v.wrapLng&&!this.options.noWrap&&[Math.floor(u.project([0,v.wrapLng[0]],A).x/_.x),Math.ceil(u.project([0,v.wrapLng[1]],A).x/_.y)],this._wrapY=v.wrapLat&&!this.options.noWrap&&[Math.floor(u.project([v.wrapLat[0],0],A).y/_.x),Math.ceil(u.project([v.wrapLat[1],0],A).y/_.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(u){var v=this._map,_=v._animatingZoom?Math.max(v._animateToZoom,v.getZoom()):v.getZoom(),A=v.getZoomScale(_,this._tileZoom),R=v.project(u,this._tileZoom).floor(),Y=v.getSize().divideBy(A*2);return new q(R.subtract(Y),R.add(Y))},_update:function(u){var v=this._map;if(v){var _=this._clampZoom(v.getZoom());if(u===void 0&&(u=v.getCenter()),this._tileZoom!==void 0){var A=this._getTiledPixelBounds(u),R=this._pxBoundsToTileRange(A),Y=R.getCenter(),ue=[],ge=this.options.keepBuffer,we=new q(R.getBottomLeft().subtract([ge,-ge]),R.getTopRight().add([ge,-ge]));if(!(isFinite(R.min.x)&&isFinite(R.min.y)&&isFinite(R.max.x)&&isFinite(R.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var De in this._tiles){var Xe=this._tiles[De].coords;(Xe.z!==this._tileZoom||!we.contains(new W(Xe.x,Xe.y)))&&(this._tiles[De].current=!1)}if(Math.abs(_-this._tileZoom)>1){this._setView(u,_);return}for(var bt=R.min.y;bt<=R.max.y;bt++)for(var zt=R.min.x;zt<=R.max.x;zt++){var ss=new W(zt,bt);if(ss.z=this._tileZoom,!!this._isValidTile(ss)){var Cn=this._tiles[this._tileCoordsToKey(ss)];Cn?Cn.current=!0:ue.push(ss)}}if(ue.sort(function(js,yu){return js.distanceTo(Y)-yu.distanceTo(Y)}),ue.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var di=document.createDocumentFragment();for(zt=0;zt<ue.length;zt++)this._addTile(ue[zt],di);this._level.el.appendChild(di)}}}},_isValidTile:function(u){var v=this._map.options.crs;if(!v.infinite){var _=this._globalTileRange;if(!v.wrapLng&&(u.x<_.min.x||u.x>_.max.x)||!v.wrapLat&&(u.y<_.min.y||u.y>_.max.y))return!1}if(!this.options.bounds)return!0;var A=this._tileCoordsToBounds(u);return ye(this.options.bounds).overlaps(A)},_keyToBounds:function(u){return this._tileCoordsToBounds(this._keyToTileCoords(u))},_tileCoordsToNwSe:function(u){var v=this._map,_=this.getTileSize(),A=u.scaleBy(_),R=A.add(_),Y=v.unproject(A,u.z),ue=v.unproject(R,u.z);return[Y,ue]},_tileCoordsToBounds:function(u){var v=this._tileCoordsToNwSe(u),_=new pe(v[0],v[1]);return this.options.noWrap||(_=this._map.wrapLatLngBounds(_)),_},_tileCoordsToKey:function(u){return u.x+":"+u.y+":"+u.z},_keyToTileCoords:function(u){var v=u.split(":"),_=new W(+v[0],+v[1]);return _.z=+v[2],_},_removeTile:function(u){var v=this._tiles[u];v&&(zr(v.el),delete this._tiles[u],this.fire("tileunload",{tile:v.el,coords:this._keyToTileCoords(u)}))},_initTile:function(u){Lt(u,"leaflet-tile");var v=this.getTileSize();u.style.width=v.x+"px",u.style.height=v.y+"px",u.onselectstart=m,u.onmousemove=m,mt.ielt9&&this.options.opacity<1&&li(u,this.options.opacity)},_addTile:function(u,v){var _=this._getTilePos(u),A=this._tileCoordsToKey(u),R=this.createTile(this._wrapCoords(u),o(this._tileReady,this,u));this._initTile(R),this.createTile.length<2&&E(o(this._tileReady,this,u,null,R)),cn(R,_),this._tiles[A]={el:R,coords:u,current:!0},v.appendChild(R),this.fire("tileloadstart",{tile:R,coords:u})},_tileReady:function(u,v,_){v&&this.fire("tileerror",{error:v,tile:_,coords:u});var A=this._tileCoordsToKey(u);_=this._tiles[A],_&&(_.loaded=+new Date,this._map._fadeAnimated?(li(_.el,0),D(this._fadeFrame),this._fadeFrame=E(this._updateOpacity,this)):(_.active=!0,this._pruneTiles()),v||(Lt(_.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:_.el,coords:u})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),mt.ielt9||!this._map._fadeAnimated?E(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(u){return u.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(u){var v=new W(this._wrapX?h(u.x,this._wrapX):u.x,this._wrapY?h(u.y,this._wrapY):u.y);return v.z=u.z,v},_pxBoundsToTileRange:function(u){var v=this.getTileSize();return new q(u.min.unscaleBy(v).floor(),u.max.unscaleBy(v).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var u in this._tiles)if(!this._tiles[u].loaded)return!1;return!0}});function YY(u){return new uf(u)}var vu=uf.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(u,v){this._url=u,v=p(this,v),v.detectRetina&&mt.retina&&v.maxZoom>0?(v.tileSize=Math.floor(v.tileSize/2),v.zoomReverse?(v.zoomOffset--,v.minZoom=Math.min(v.maxZoom,v.minZoom+1)):(v.zoomOffset++,v.maxZoom=Math.max(v.minZoom,v.maxZoom-1)),v.minZoom=Math.max(0,v.minZoom)):v.zoomReverse?v.minZoom=Math.min(v.maxZoom,v.minZoom):v.maxZoom=Math.max(v.minZoom,v.maxZoom),typeof v.subdomains=="string"&&(v.subdomains=v.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(u,v){return this._url===u&&v===void 0&&(v=!0),this._url=u,v||this.redraw(),this},createTile:function(u,v){var _=document.createElement("img");return At(_,"load",o(this._tileOnLoad,this,v,_)),At(_,"error",o(this._tileOnError,this,v,_)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(_.referrerPolicy=this.options.referrerPolicy),_.alt="",_.src=this.getTileUrl(u),_},getTileUrl:function(u){var v={r:mt.retina?"@2x":"",s:this._getSubdomain(u),x:u.x,y:u.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var _=this._globalTileRange.max.y-u.y;this.options.tms&&(v.y=_),v["-y"]=_}return w(this._url,i(v,this.options))},_tileOnLoad:function(u,v){mt.ielt9?setTimeout(o(u,this,null,v),0):u(null,v)},_tileOnError:function(u,v,_){var A=this.options.errorTileUrl;A&&v.getAttribute("src")!==A&&(v.src=A),u(_,v)},_onTileRemove:function(u){u.tile.onload=null},_getZoomForUrl:function(){var u=this._tileZoom,v=this.options.maxZoom,_=this.options.zoomReverse,A=this.options.zoomOffset;return _&&(u=v-u),u+A},_getSubdomain:function(u){var v=Math.abs(u.x+u.y)%this.options.subdomains.length;return this.options.subdomains[v]},_abortLoading:function(){var u,v;for(u in this._tiles)if(this._tiles[u].coords.z!==this._tileZoom&&(v=this._tiles[u].el,v.onload=m,v.onerror=m,!v.complete)){v.src=P;var _=this._tiles[u].coords;zr(v),delete this._tiles[u],this.fire("tileabort",{tile:v,coords:_})}},_removeTile:function(u){var v=this._tiles[u];if(v)return v.el.setAttribute("src",P),uf.prototype._removeTile.call(this,u)},_tileReady:function(u,v,_){if(!(!this._map||_&&_.getAttribute("src")===P))return uf.prototype._tileReady.call(this,u,v,_)}});function P4(u,v){return new vu(u,v)}var C4=vu.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(u,v){this._url=u;var _=i({},this.defaultWmsParams);for(var A in v)A in this.options||(_[A]=v[A]);v=p(this,v);var R=v.detectRetina&&mt.retina?2:1,Y=this.getTileSize();_.width=Y.x*R,_.height=Y.y*R,this.wmsParams=_},onAdd:function(u){this._crs=this.options.crs||u.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var v=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[v]=this._crs.code,vu.prototype.onAdd.call(this,u)},getTileUrl:function(u){var v=this._tileCoordsToNwSe(u),_=this._crs,A=J(_.project(v[0]),_.project(v[1])),R=A.min,Y=A.max,ue=(this._wmsVersion>=1.3&&this._crs===y4?[R.y,R.x,Y.y,Y.x]:[R.x,R.y,Y.x,Y.y]).join(","),ge=vu.prototype.getTileUrl.call(this,u);return ge+y(this.wmsParams,ge,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ue},setParams:function(u,v){return i(this.wmsParams,u),v||this.redraw(),this}});function XY(u,v){return new C4(u,v)}vu.WMS=C4,P4.wms=XY;var io=Vi.extend({options:{padding:.1},initialize:function(u){p(this,u),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Lt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var u={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(u.zoomanim=this._onAnimZoom),u},_onAnimZoom:function(u){this._updateTransform(u.center,u.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(u,v){var _=this._map.getZoomScale(v,this._zoom),A=this._map.getSize().multiplyBy(.5+this.options.padding),R=this._map.project(this._center,v),Y=A.multiplyBy(-_).add(R).subtract(this._map._getNewPixelOrigin(u,v));mt.any3d?Dc(this._container,Y,_):cn(this._container,Y)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var u in this._layers)this._layers[u]._reset()},_onZoomEnd:function(){for(var u in this._layers)this._layers[u]._project()},_updatePaths:function(){for(var u in this._layers)this._layers[u]._update()},_update:function(){var u=this.options.padding,v=this._map.getSize(),_=this._map.containerPointToLayerPoint(v.multiplyBy(-u)).round();this._bounds=new q(_,_.add(v.multiplyBy(1+u*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),k4=io.extend({options:{tolerance:0},getEvents:function(){var u=io.prototype.getEvents.call(this);return u.viewprereset=this._onViewPreReset,u},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){io.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var u=this._container=document.createElement("canvas");At(u,"mousemove",this._onMouseMove,this),At(u,"click dblclick mousedown mouseup contextmenu",this._onClick,this),At(u,"mouseout",this._handleMouseOut,this),u._leaflet_disable_events=!0,this._ctx=u.getContext("2d")},_destroyContainer:function(){D(this._redrawRequest),delete this._ctx,zr(this._container),yr(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var u;this._redrawBounds=null;for(var v in this._layers)u=this._layers[v],u._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){io.prototype._update.call(this);var u=this._bounds,v=this._container,_=u.getSize(),A=mt.retina?2:1;cn(v,u.min),v.width=A*_.x,v.height=A*_.y,v.style.width=_.x+"px",v.style.height=_.y+"px",mt.retina&&this._ctx.scale(2,2),this._ctx.translate(-u.min.x,-u.min.y),this.fire("update")}},_reset:function(){io.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(u){this._updateDashArray(u),this._layers[c(u)]=u;var v=u._order={layer:u,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=v),this._drawLast=v,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(u){this._requestRedraw(u)},_removePath:function(u){var v=u._order,_=v.next,A=v.prev;_?_.prev=A:this._drawLast=A,A?A.next=_:this._drawFirst=_,delete u._order,delete this._layers[c(u)],this._requestRedraw(u)},_updatePath:function(u){this._extendRedrawBounds(u),u._project(),u._update(),this._requestRedraw(u)},_updateStyle:function(u){this._updateDashArray(u),this._requestRedraw(u)},_updateDashArray:function(u){if(typeof u.options.dashArray=="string"){var v=u.options.dashArray.split(/[, ]+/),_=[],A,R;for(R=0;R<v.length;R++){if(A=Number(v[R]),isNaN(A))return;_.push(A)}u.options._dashArray=_}else u.options._dashArray=u.options.dashArray},_requestRedraw:function(u){this._map&&(this._extendRedrawBounds(u),this._redrawRequest=this._redrawRequest||E(this._redraw,this))},_extendRedrawBounds:function(u){if(u._pxBounds){var v=(u.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new q,this._redrawBounds.extend(u._pxBounds.min.subtract([v,v])),this._redrawBounds.extend(u._pxBounds.max.add([v,v]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var u=this._redrawBounds;if(u){var v=u.getSize();this._ctx.clearRect(u.min.x,u.min.y,v.x,v.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var u,v=this._redrawBounds;if(this._ctx.save(),v){var _=v.getSize();this._ctx.beginPath(),this._ctx.rect(v.min.x,v.min.y,_.x,_.y),this._ctx.clip()}this._drawing=!0;for(var A=this._drawFirst;A;A=A.next)u=A.layer,(!v||u._pxBounds&&u._pxBounds.intersects(v))&&u._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(u,v){if(this._drawing){var _,A,R,Y,ue=u._parts,ge=ue.length,we=this._ctx;if(ge){for(we.beginPath(),_=0;_<ge;_++){for(A=0,R=ue[_].length;A<R;A++)Y=ue[_][A],we[A?"lineTo":"moveTo"](Y.x,Y.y);v&&we.closePath()}this._fillStroke(we,u)}}},_updateCircle:function(u){if(!(!this._drawing||u._empty())){var v=u._point,_=this._ctx,A=Math.max(Math.round(u._radius),1),R=(Math.max(Math.round(u._radiusY),1)||A)/A;R!==1&&(_.save(),_.scale(1,R)),_.beginPath(),_.arc(v.x,v.y/R,A,0,Math.PI*2,!1),R!==1&&_.restore(),this._fillStroke(_,u)}},_fillStroke:function(u,v){var _=v.options;_.fill&&(u.globalAlpha=_.fillOpacity,u.fillStyle=_.fillColor||_.color,u.fill(_.fillRule||"evenodd")),_.stroke&&_.weight!==0&&(u.setLineDash&&u.setLineDash(v.options&&v.options._dashArray||[]),u.globalAlpha=_.opacity,u.lineWidth=_.weight,u.strokeStyle=_.color,u.lineCap=_.lineCap,u.lineJoin=_.lineJoin,u.stroke())},_onClick:function(u){for(var v=this._map.mouseEventToLayerPoint(u),_,A,R=this._drawFirst;R;R=R.next)_=R.layer,_.options.interactive&&_._containsPoint(v)&&(!(u.type==="click"||u.type==="preclick")||!this._map._draggableMoved(_))&&(A=_);this._fireEvent(A?[A]:!1,u)},_onMouseMove:function(u){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var v=this._map.mouseEventToLayerPoint(u);this._handleMouseHover(u,v)}},_handleMouseOut:function(u){var v=this._hoveredLayer;v&&(en(this._container,"leaflet-interactive"),this._fireEvent([v],u,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(u,v){if(!this._mouseHoverThrottled){for(var _,A,R=this._drawFirst;R;R=R.next)_=R.layer,_.options.interactive&&_._containsPoint(v)&&(A=_);A!==this._hoveredLayer&&(this._handleMouseOut(u),A&&(Lt(this._container,"leaflet-interactive"),this._fireEvent([A],u,"mouseover"),this._hoveredLayer=A)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,u),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(u,v,_){this._map._fireDOMEvent(v,_||v.type,u)},_bringToFront:function(u){var v=u._order;if(v){var _=v.next,A=v.prev;if(_)_.prev=A;else return;A?A.next=_:_&&(this._drawFirst=_),v.prev=this._drawLast,this._drawLast.next=v,v.next=null,this._drawLast=v,this._requestRedraw(u)}},_bringToBack:function(u){var v=u._order;if(v){var _=v.next,A=v.prev;if(A)A.next=_;else return;_?_.prev=A:A&&(this._drawLast=A),v.prev=null,v.next=this._drawFirst,this._drawFirst.prev=v,this._drawFirst=v,this._requestRedraw(u)}}});function T4(u){return mt.canvas?new k4(u):null}var hf=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(u){return document.createElement("<lvml:"+u+' class="lvml">')}}catch{}return function(u){return document.createElement("<"+u+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),QY={_initContainer:function(){this._container=tr("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(io.prototype._update.call(this),this.fire("update"))},_initPath:function(u){var v=u._container=hf("shape");Lt(v,"leaflet-vml-shape "+(this.options.className||"")),v.coordsize="1 1",u._path=hf("path"),v.appendChild(u._path),this._updateStyle(u),this._layers[c(u)]=u},_addPath:function(u){var v=u._container;this._container.appendChild(v),u.options.interactive&&u.addInteractiveTarget(v)},_removePath:function(u){var v=u._container;zr(v),u.removeInteractiveTarget(v),delete this._layers[c(u)]},_updateStyle:function(u){var v=u._stroke,_=u._fill,A=u.options,R=u._container;R.stroked=!!A.stroke,R.filled=!!A.fill,A.stroke?(v||(v=u._stroke=hf("stroke")),R.appendChild(v),v.weight=A.weight+"px",v.color=A.color,v.opacity=A.opacity,A.dashArray?v.dashStyle=N(A.dashArray)?A.dashArray.join(" "):A.dashArray.replace(/( *, *)/g," "):v.dashStyle="",v.endcap=A.lineCap.replace("butt","flat"),v.joinstyle=A.lineJoin):v&&(R.removeChild(v),u._stroke=null),A.fill?(_||(_=u._fill=hf("fill")),R.appendChild(_),_.color=A.fillColor||A.color,_.opacity=A.fillOpacity):_&&(R.removeChild(_),u._fill=null)},_updateCircle:function(u){var v=u._point.round(),_=Math.round(u._radius),A=Math.round(u._radiusY||_);this._setPath(u,u._empty()?"M0 0":"AL "+v.x+","+v.y+" "+_+","+A+" 0,"+65535*360)},_setPath:function(u,v){u._path.v=v},_bringToFront:function(u){hu(u._container)},_bringToBack:function(u){mu(u._container)}},hv=mt.vml?hf:Ce,mf=io.extend({_initContainer:function(){this._container=hv("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=hv("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){zr(this._container),yr(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){io.prototype._update.call(this);var u=this._bounds,v=u.getSize(),_=this._container;(!this._svgSize||!this._svgSize.equals(v))&&(this._svgSize=v,_.setAttribute("width",v.x),_.setAttribute("height",v.y)),cn(_,u.min),_.setAttribute("viewBox",[u.min.x,u.min.y,v.x,v.y].join(" ")),this.fire("update")}},_initPath:function(u){var v=u._path=hv("path");u.options.className&&Lt(v,u.options.className),u.options.interactive&&Lt(v,"leaflet-interactive"),this._updateStyle(u),this._layers[c(u)]=u},_addPath:function(u){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(u._path),u.addInteractiveTarget(u._path)},_removePath:function(u){zr(u._path),u.removeInteractiveTarget(u._path),delete this._layers[c(u)]},_updatePath:function(u){u._project(),u._update()},_updateStyle:function(u){var v=u._path,_=u.options;v&&(_.stroke?(v.setAttribute("stroke",_.color),v.setAttribute("stroke-opacity",_.opacity),v.setAttribute("stroke-width",_.weight),v.setAttribute("stroke-linecap",_.lineCap),v.setAttribute("stroke-linejoin",_.lineJoin),_.dashArray?v.setAttribute("stroke-dasharray",_.dashArray):v.removeAttribute("stroke-dasharray"),_.dashOffset?v.setAttribute("stroke-dashoffset",_.dashOffset):v.removeAttribute("stroke-dashoffset")):v.setAttribute("stroke","none"),_.fill?(v.setAttribute("fill",_.fillColor||_.color),v.setAttribute("fill-opacity",_.fillOpacity),v.setAttribute("fill-rule",_.fillRule||"evenodd")):v.setAttribute("fill","none"))},_updatePoly:function(u,v){this._setPath(u,$e(u._parts,v))},_updateCircle:function(u){var v=u._point,_=Math.max(Math.round(u._radius),1),A=Math.max(Math.round(u._radiusY),1)||_,R="a"+_+","+A+" 0 1,0 ",Y=u._empty()?"M0 0":"M"+(v.x-_)+","+v.y+R+_*2+",0 "+R+-_*2+",0 ";this._setPath(u,Y)},_setPath:function(u,v){u._path.setAttribute("d",v)},_bringToFront:function(u){hu(u._path)},_bringToBack:function(u){mu(u._path)}});mt.vml&&mf.include(QY);function A4(u){return mt.svg||mt.vml?new mf(u):null}Qt.include({getRenderer:function(u){var v=u.options.renderer||this._getPaneRenderer(u.options.pane)||this.options.renderer||this._renderer;return v||(v=this._renderer=this._createRenderer()),this.hasLayer(v)||this.addLayer(v),v},_getPaneRenderer:function(u){if(u==="overlayPane"||u===void 0)return!1;var v=this._paneRenderers[u];return v===void 0&&(v=this._createRenderer({pane:u}),this._paneRenderers[u]=v),v},_createRenderer:function(u){return this.options.preferCanvas&&T4(u)||A4(u)}});var E4=xu.extend({initialize:function(u,v){xu.prototype.initialize.call(this,this._boundsToLatLngs(u),v)},setBounds:function(u){return this.setLatLngs(this._boundsToLatLngs(u))},_boundsToLatLngs:function(u){return u=ye(u),[u.getSouthWest(),u.getNorthWest(),u.getNorthEast(),u.getSouthEast()]}});function JY(u,v){return new E4(u,v)}mf.create=hv,mf.pointsToPath=$e,so.geometryToLayer=iv,so.coordsToLatLng=yN,so.coordsToLatLngs=av,so.latLngToCoords=jN,so.latLngsToCoords=ov,so.getFeature=gu,so.asFeature=lv,Qt.mergeOptions({boxZoom:!0});var O4=ya.extend({initialize:function(u){this._map=u,this._container=u._container,this._pane=u._panes.overlayPane,this._resetStateTimeout=0,u.on("unload",this._destroy,this)},addHooks:function(){At(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){yr(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){zr(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(u){if(!u.shiftKey||u.which!==1&&u.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),nf(),rN(),this._startPoint=this._map.mouseEventToContainerPoint(u),At(document,{contextmenu:Rc,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(u){this._moved||(this._moved=!0,this._box=tr("div","leaflet-zoom-box",this._container),Lt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(u);var v=new q(this._point,this._startPoint),_=v.getSize();cn(this._box,v.min),this._box.style.width=_.x+"px",this._box.style.height=_.y+"px"},_finish:function(){this._moved&&(zr(this._box),en(this._container,"leaflet-crosshair")),sf(),nN(),yr(document,{contextmenu:Rc,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(u){if(!(u.which!==1&&u.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var v=new pe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(v).fire("boxzoomend",{boxZoomBounds:v})}},_onKeyDown:function(u){u.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Qt.addInitHook("addHandler","boxZoom",O4),Qt.mergeOptions({doubleClickZoom:!0});var M4=ya.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(u){var v=this._map,_=v.getZoom(),A=v.options.zoomDelta,R=u.originalEvent.shiftKey?_-A:_+A;v.options.doubleClickZoom==="center"?v.setZoom(R):v.setZoomAround(u.containerPoint,R)}});Qt.addInitHook("addHandler","doubleClickZoom",M4),Qt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var D4=ya.extend({addHooks:function(){if(!this._draggable){var u=this._map;this._draggable=new ol(u._mapPane,u._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),u.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),u.on("zoomend",this._onZoomEnd,this),u.whenReady(this._onZoomEnd,this))}Lt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){en(this._map._container,"leaflet-grab"),en(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var u=this._map;if(u._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var v=ye(this._map.options.maxBounds);this._offsetLimit=J(this._map.latLngToContainerPoint(v.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(v.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;u.fire("movestart").fire("dragstart"),u.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(u){if(this._map.options.inertia){var v=this._lastTime=+new Date,_=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(_),this._times.push(v),this._prunePositions(v)}this._map.fire("move",u).fire("drag",u)},_prunePositions:function(u){for(;this._positions.length>1&&u-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var u=this._map.getSize().divideBy(2),v=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=v.subtract(u).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(u,v){return u-(u-v)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var u=this._draggable._newPos.subtract(this._draggable._startPos),v=this._offsetLimit;u.x<v.min.x&&(u.x=this._viscousLimit(u.x,v.min.x)),u.y<v.min.y&&(u.y=this._viscousLimit(u.y,v.min.y)),u.x>v.max.x&&(u.x=this._viscousLimit(u.x,v.max.x)),u.y>v.max.y&&(u.y=this._viscousLimit(u.y,v.max.y)),this._draggable._newPos=this._draggable._startPos.add(u)}},_onPreDragWrap:function(){var u=this._worldWidth,v=Math.round(u/2),_=this._initialWorldOffset,A=this._draggable._newPos.x,R=(A-v+_)%u+v-_,Y=(A+v+_)%u-v-_,ue=Math.abs(R+_)<Math.abs(Y+_)?R:Y;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ue},_onDragEnd:function(u){var v=this._map,_=v.options,A=!_.inertia||u.noInertia||this._times.length<2;if(v.fire("dragend",u),A)v.fire("moveend");else{this._prunePositions(+new Date);var R=this._lastPos.subtract(this._positions[0]),Y=(this._lastTime-this._times[0])/1e3,ue=_.easeLinearity,ge=R.multiplyBy(ue/Y),we=ge.distanceTo([0,0]),De=Math.min(_.inertiaMaxSpeed,we),Xe=ge.multiplyBy(De/we),bt=De/(_.inertiaDeceleration*ue),zt=Xe.multiplyBy(-bt/2).round();!zt.x&&!zt.y?v.fire("moveend"):(zt=v._limitOffset(zt,v.options.maxBounds),E(function(){v.panBy(zt,{duration:bt,easeLinearity:ue,noMoveStart:!0,animate:!0})}))}}});Qt.addInitHook("addHandler","dragging",D4),Qt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var I4=ya.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(u){this._map=u,this._setPanDelta(u.options.keyboardPanDelta),this._setZoomDelta(u.options.zoomDelta)},addHooks:function(){var u=this._map._container;u.tabIndex<=0&&(u.tabIndex="0"),At(u,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),yr(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var u=document.body,v=document.documentElement,_=u.scrollTop||v.scrollTop,A=u.scrollLeft||v.scrollLeft;this._map._container.focus(),window.scrollTo(A,_)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(u){var v=this._panKeys={},_=this.keyCodes,A,R;for(A=0,R=_.left.length;A<R;A++)v[_.left[A]]=[-1*u,0];for(A=0,R=_.right.length;A<R;A++)v[_.right[A]]=[u,0];for(A=0,R=_.down.length;A<R;A++)v[_.down[A]]=[0,u];for(A=0,R=_.up.length;A<R;A++)v[_.up[A]]=[0,-1*u]},_setZoomDelta:function(u){var v=this._zoomKeys={},_=this.keyCodes,A,R;for(A=0,R=_.zoomIn.length;A<R;A++)v[_.zoomIn[A]]=u;for(A=0,R=_.zoomOut.length;A<R;A++)v[_.zoomOut[A]]=-u},_addHooks:function(){At(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){yr(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(u){if(!(u.altKey||u.ctrlKey||u.metaKey)){var v=u.keyCode,_=this._map,A;if(v in this._panKeys){if(!_._panAnim||!_._panAnim._inProgress)if(A=this._panKeys[v],u.shiftKey&&(A=z(A).multiplyBy(3)),_.options.maxBounds&&(A=_._limitOffset(z(A),_.options.maxBounds)),_.options.worldCopyJump){var R=_.wrapLatLng(_.unproject(_.project(_.getCenter()).add(A)));_.panTo(R)}else _.panBy(A)}else if(v in this._zoomKeys)_.setZoom(_.getZoom()+(u.shiftKey?3:1)*this._zoomKeys[v]);else if(v===27&&_._popup&&_._popup.options.closeOnEscapeKey)_.closePopup();else return;Rc(u)}}});Qt.addInitHook("addHandler","keyboard",I4),Qt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var L4=ya.extend({addHooks:function(){At(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){yr(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(u){var v=a4(u),_=this._map.options.wheelDebounceTime;this._delta+=v,this._lastMousePos=this._map.mouseEventToContainerPoint(u),this._startTime||(this._startTime=+new Date);var A=Math.max(_-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),A),Rc(u)},_performZoom:function(){var u=this._map,v=u.getZoom(),_=this._map.options.zoomSnap||0;u._stop();var A=this._delta/(this._map.options.wheelPxPerZoomLevel*4),R=4*Math.log(2/(1+Math.exp(-Math.abs(A))))/Math.LN2,Y=_?Math.ceil(R/_)*_:R,ue=u._limitZoom(v+(this._delta>0?Y:-Y))-v;this._delta=0,this._startTime=null,ue&&(u.options.scrollWheelZoom==="center"?u.setZoom(v+ue):u.setZoomAround(this._lastMousePos,v+ue))}});Qt.addInitHook("addHandler","scrollWheelZoom",L4);var eX=600;Qt.mergeOptions({tapHold:mt.touchNative&&mt.safari&&mt.mobile,tapTolerance:15});var R4=ya.extend({addHooks:function(){At(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){yr(this._map._container,"touchstart",this._onDown,this)},_onDown:function(u){if(clearTimeout(this._holdTimeout),u.touches.length===1){var v=u.touches[0];this._startPos=this._newPos=new W(v.clientX,v.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(At(document,"touchend",Dn),At(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",v))},this),eX),At(document,"touchend touchcancel contextmenu",this._cancel,this),At(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function u(){yr(document,"touchend",Dn),yr(document,"touchend touchcancel",u)},_cancel:function(){clearTimeout(this._holdTimeout),yr(document,"touchend touchcancel contextmenu",this._cancel,this),yr(document,"touchmove",this._onMove,this)},_onMove:function(u){var v=u.touches[0];this._newPos=new W(v.clientX,v.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(u,v){var _=new MouseEvent(u,{bubbles:!0,cancelable:!0,view:window,screenX:v.screenX,screenY:v.screenY,clientX:v.clientX,clientY:v.clientY});_._simulated=!0,v.target.dispatchEvent(_)}});Qt.addInitHook("addHandler","tapHold",R4),Qt.mergeOptions({touchZoom:mt.touch,bounceAtZoomLimits:!0});var $4=ya.extend({addHooks:function(){Lt(this._map._container,"leaflet-touch-zoom"),At(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){en(this._map._container,"leaflet-touch-zoom"),yr(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(u){var v=this._map;if(!(!u.touches||u.touches.length!==2||v._animatingZoom||this._zooming)){var _=v.mouseEventToContainerPoint(u.touches[0]),A=v.mouseEventToContainerPoint(u.touches[1]);this._centerPoint=v.getSize()._divideBy(2),this._startLatLng=v.containerPointToLatLng(this._centerPoint),v.options.touchZoom!=="center"&&(this._pinchStartLatLng=v.containerPointToLatLng(_.add(A)._divideBy(2))),this._startDist=_.distanceTo(A),this._startZoom=v.getZoom(),this._moved=!1,this._zooming=!0,v._stop(),At(document,"touchmove",this._onTouchMove,this),At(document,"touchend touchcancel",this._onTouchEnd,this),Dn(u)}},_onTouchMove:function(u){if(!(!u.touches||u.touches.length!==2||!this._zooming)){var v=this._map,_=v.mouseEventToContainerPoint(u.touches[0]),A=v.mouseEventToContainerPoint(u.touches[1]),R=_.distanceTo(A)/this._startDist;if(this._zoom=v.getScaleZoom(R,this._startZoom),!v.options.bounceAtZoomLimits&&(this._zoom<v.getMinZoom()&&R<1||this._zoom>v.getMaxZoom()&&R>1)&&(this._zoom=v._limitZoom(this._zoom)),v.options.touchZoom==="center"){if(this._center=this._startLatLng,R===1)return}else{var Y=_._add(A)._divideBy(2)._subtract(this._centerPoint);if(R===1&&Y.x===0&&Y.y===0)return;this._center=v.unproject(v.project(this._pinchStartLatLng,this._zoom).subtract(Y),this._zoom)}this._moved||(v._moveStart(!0,!1),this._moved=!0),D(this._animRequest);var ue=o(v._move,v,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=E(ue,this,!0),Dn(u)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,D(this._animRequest),yr(document,"touchmove",this._onTouchMove,this),yr(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Qt.addInitHook("addHandler","touchZoom",$4),Qt.BoxZoom=O4,Qt.DoubleClickZoom=M4,Qt.Drag=D4,Qt.Keyboard=I4,Qt.ScrollWheelZoom=L4,Qt.TapHold=R4,Qt.TouchZoom=$4,n.Bounds=q,n.Browser=mt,n.CRS=Ee,n.Canvas=k4,n.Circle=vN,n.CircleMarker=sv,n.Class=M,n.Control=Bi,n.DivIcon=_4,n.DivOverlay=ja,n.DomEvent=vY,n.DomUtil=xY,n.Draggable=ol,n.Evented=K,n.FeatureGroup=ro,n.GeoJSON=so,n.GridLayer=uf,n.Handler=ya,n.Icon=pu,n.ImageOverlay=cv,n.LatLng=Ne,n.LatLngBounds=pe,n.Layer=Vi,n.LayerGroup=fu,n.LineUtil=EY,n.Map=Qt,n.Marker=nv,n.Mixin=_Y,n.Path=ll,n.Point=W,n.PolyUtil=PY,n.Polygon=xu,n.Polyline=no,n.Popup=dv,n.PosAnimation=o4,n.Projection=OY,n.Rectangle=E4,n.Renderer=io,n.SVG=mf,n.SVGOverlay=S4,n.TileLayer=vu,n.Tooltip=uv,n.Transformation=Ie,n.Util=B,n.VideoOverlay=N4,n.bind=o,n.bounds=J,n.canvas=T4,n.circle=zY,n.circleMarker=FY,n.control=lf,n.divIcon=ZY,n.extend=i,n.featureGroup=LY,n.geoJSON=w4,n.geoJson=UY,n.gridLayer=YY,n.icon=RY,n.imageOverlay=WY,n.latLng=ke,n.latLngBounds=ye,n.layerGroup=IY,n.map=yY,n.marker=$Y,n.point=z,n.polygon=VY,n.polyline=BY,n.popup=KY,n.rectangle=JY,n.setOptions=p,n.stamp=c,n.svg=A4,n.svgOverlay=qY,n.tileLayer=P4,n.tooltip=GY,n.transformation=$,n.version=s,n.videoOverlay=HY;var tX=window.L;n.noConflict=function(){return window.L=tX,this},window.L=n})})(N2,N2.exports);var Fm=N2.exports;const Ht=hr(Fm);function tw(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function rw(e,t){return t==null?function(s,i){const a=j.useRef();return a.current||(a.current=e(s,i)),a}:function(s,i){const a=j.useRef();a.current||(a.current=e(s,i));const o=j.useRef(s),{instance:l}=a.current;return j.useEffect(function(){o.current!==s&&(t(l,s,o.current),o.current=s)},[l,s,i]),a}}function aW(e,t){j.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var a;(a=t.layerContainer)==null||a.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function oW(e){return function(n){const s=Jb(),i=e(ew(n,s),s);return tW(s.map,n.attribution),eA(i.current,n.eventHandlers),aW(i.current,s),i}}function fge(e,t){const n=j.useRef();j.useEffect(function(){if(t.pathOptions!==n.current){const i=t.pathOptions??{};e.instance.setStyle(i),n.current=i}},[e,t])}function pge(e){return function(n){const s=Jb(),i=e(ew(n,s),s);return eA(i.current,n.eventHandlers),aW(i.current,s),fge(i.current,n),i}}function xge(e,t){const n=rw(e,t),s=oW(n);return iW(s)}function gge(e,t){const n=rw(e),s=mge(n,t);return uge(s)}function vge(e,t){const n=rw(e,t),s=pge(n);return iW(s)}function yge(e,t){const n=rw(e,t),s=oW(n);return hge(s)}function jge(e,t,n){const{opacity:s,zIndex:i}=t;s!=null&&s!==n.opacity&&e.setOpacity(s),i!=null&&i!==n.zIndex&&e.setZIndex(i)}function lW(){return Jb().map}function bge(e){const t=lW();return j.useEffect(function(){return t.on(e),function(){t.off(e)}},[t,e]),t}function S2(){return S2=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},S2.apply(this,arguments)}function wge({bounds:e,boundsOptions:t,center:n,children:s,className:i,id:a,placeholder:o,style:l,whenReady:c,zoom:d,...h},m){const[f]=j.useState({className:i,id:a,style:l}),[g,x]=j.useState(null);j.useImperativeHandle(m,()=>(g==null?void 0:g.map)??null,[g]);const p=j.useCallback(b=>{if(b!==null&&g===null){const w=new Fm.Map(b,h);n!=null&&d!=null?w.setView(n,d):e!=null&&w.fitBounds(e,t),c!=null&&w.whenReady(c),x(dge(w))}},[]);j.useEffect(()=>()=>{g==null||g.map.remove()},[g]);const y=g?re.createElement(sW,{value:g},s):o??null;return re.createElement("div",S2({},f,{ref:p}),y)}const Eg=j.forwardRef(wge),Ei=xge(function({position:t,...n},s){const i=new Fm.Marker(t,n);return tw(i,rW(s,{overlayContainer:i}))},function(t,n,s){n.position!==s.position&&t.setLatLng(n.position),n.icon!=null&&n.icon!==s.icon&&t.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==s.zIndexOffset&&t.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==s.opacity&&t.setOpacity(n.opacity),t.dragging!=null&&n.draggable!==s.draggable&&(n.draggable===!0?t.dragging.enable():t.dragging.disable())}),cW=vge(function({positions:t,...n},s){const i=new Fm.Polyline(t,n);return tw(i,rW(s,{overlayContainer:i}))},function(t,n,s){n.positions!==s.positions&&t.setLatLngs(n.positions)}),za=gge(function(t,n){const s=new Fm.Popup(t,n.overlayContainer);return tw(s,n)},function(t,n,{position:s},i){j.useEffect(function(){const{instance:o}=t;function l(d){d.popup===o&&(o.update(),i(!0))}function c(d){d.popup===o&&i(!1)}return n.map.on({popupopen:l,popupclose:c}),n.overlayContainer==null?(s!=null&&o.setLatLng(s),o.openOn(n.map)):n.overlayContainer.bindPopup(o),function(){var h;n.map.off({popupopen:l,popupclose:c}),(h=n.overlayContainer)==null||h.unbindPopup(),n.map.removeLayer(o)}},[t,n,i,s])}),Og=yge(function({url:t,...n},s){const i=new Fm.TileLayer(t,ew(n,s));return tw(i,s)},function(t,n,s){jge(t,n,s);const{url:i}=n;i!=null&&i!==s.url&&t.setUrl(i)});delete Ht.Icon.Default.prototype._getIconUrl;Ht.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const ZD=(e,t=!1)=>{const n=t?[35,55]:[25,41],s=t?[17,55]:[12,41];return Ht.divIcon({html:`
      <div style="
        width: ${n[0]}px; 
        height: ${n[1]}px; 
        background: ${e}; 
        border: 3px solid white;
        border-radius: 50% 50% 50% 0;
        box-shadow: 0 3px 10px rgba(0,0,0,0.3);
        transform: rotate(-45deg);
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
      ">
        <div style="
          color: white; 
          font-size: ${t?"16px":"12px"}; 
          font-weight: bold;
          transform: rotate(45deg);
        "></div>
        ${t?`
          <div style="
            position: absolute;
            top: -8px;
            right: -8px;
            width: 20px;
            height: 20px;
            background: #10b981;
            border: 2px solid white;
            border-radius: 50%;
            transform: rotate(45deg);
            display: flex;
            align-items: center;
            justify-content: center;
          ">
            <span style="transform: rotate(-45deg); color: white; font-size: 10px;"></span>
          </div>
        `:""}
      </div>
    `,className:"custom-marker",iconSize:n,iconAnchor:s,popupAnchor:[0,-n[1]]})},Oy={osm:{name:"Street Map",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',icon:""},satellite:{name:"Satellite",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:'&copy; <a href="https://www.esri.com/">Esri</a>',icon:""},terrain:{name:"Terrain",url:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://opentopomap.org/">OpenTopoMap</a>',icon:""}};function Nge({onLocationSelect:e}){const t=bge({click:n=>{console.log(" Map clicked:",n.latlng),e&&e(n.latlng.lat,n.latlng.lng)},keydown:n=>{const s=t.getCenter(),i=t.getZoom(),a=i>15?1e-4:i>12?5e-4:.001;let o=s.lat,l=s.lng;switch(n.originalEvent.key){case"ArrowUp":o+=a;break;case"ArrowDown":o-=a;break;case"ArrowLeft":l-=a;break;case"ArrowRight":l+=a;break;case"Enter":case" ":e&&e(s.lat,s.lng);return;default:return}n.originalEvent.preventDefault(),t.setView([o,l],i)}});return null}function Sge({lat:e,lng:t}){const n=lW();return j.useEffect(()=>{e&&t&&n.setView([e,t],16,{animate:!0,duration:1})},[e,t,n]),null}function _ge({currentLayer:e,onLayerChange:t,isMobile:n}){const[s,i]=j.useState(!1);return n?r.jsxs("div",{className:"absolute top-4 right-4 z-[1000]",children:[r.jsx("button",{onClick:()=>i(!s),className:"bg-white/95 backdrop-blur-sm rounded-lg p-3 shadow-lg border touch-manipulation",style:{minHeight:"48px",minWidth:"48px"},children:r.jsx("span",{className:"text-lg",children:Oy[e].icon})}),s&&r.jsxs("div",{className:"absolute top-full right-0 mt-2 bg-white/95 backdrop-blur-sm rounded-lg p-2 shadow-lg border",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-2 px-1",children:"Map Style"}),r.jsx("div",{className:"space-y-1",children:Object.entries(Oy).map(([a,o])=>r.jsxs("button",{onClick:()=>{t(a),i(!1)},className:`w-full flex items-center gap-2 px-3 py-3 rounded text-sm transition-all touch-manipulation ${e===a?"bg-blue-500 text-white shadow-md":"hover:bg-gray-100 text-gray-700"}`,style:{minHeight:"44px"},children:[r.jsx("span",{className:"text-base",children:o.icon}),r.jsx("span",{className:"font-medium",children:o.name})]},a))})]})]}):r.jsxs("div",{className:"absolute top-4 right-4 z-[1000] bg-white/95 backdrop-blur-sm rounded-lg p-2 shadow-lg border",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-2 px-1",children:"Map Style"}),r.jsx("div",{className:"space-y-1",children:Object.entries(Oy).map(([a,o])=>r.jsxs("button",{onClick:()=>t(a),className:`w-full flex items-center gap-2 px-3 py-2 rounded text-xs transition-all ${e===a?"bg-blue-500 text-white shadow-md":"hover:bg-gray-100 text-gray-700"}`,children:[r.jsx("span",{children:o.icon}),r.jsx("span",{className:"font-medium",children:o.name})]},a))})]})}function Pge({onLocationSelect:e,selectedLat:t,selectedLng:n}){const[s,i]=j.useState(null),[a,o]=j.useState("osm"),[l,c]=j.useState(!1),[d,h]=j.useState(!1);j.useState(0);const m=[26.6615,86.2348];j.useEffect(()=>{const y=()=>{h(window.innerWidth<=768||"ontouchstart"in window)};return y(),window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[]),j.useEffect(()=>{t&&n&&i([t,n])},[t,n]);const f=j.useCallback((y,b)=>{c(!0),i([y,b]),d&&"vibrate"in navigator&&navigator.vibrate(50),setTimeout(()=>{e&&e(y,b),c(!1)},200)},[e,d]),g=j.useCallback(y=>{const b=document.querySelector(".leaflet-container");if(b&&b._leaflet_map){const w=b._leaflet_map,N=w.getCenter(),S=w.getZoom(),P=S>18?1e-5:S>16?5e-5:S>14?1e-4:5e-4;let C=N.lat,k=N.lng;switch(y){case"up":C+=P;break;case"down":C-=P;break;case"left":k-=P;break;case"right":k+=P;break}w.setView([C,k],S),setTimeout(()=>{i([C,k]),e&&e(C,k)},100)}},[e]),x=j.useCallback(()=>{const y=document.querySelector(".leaflet-container");if(y&&y._leaflet_map){const b=y._leaflet_map.getCenter();f(b.lat,b.lng)}},[f]),p=Oy[a];return r.jsxs("div",{className:"relative w-full h-full",children:[l&&r.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm flex items-center justify-center z-[2000]",children:r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-lg border flex items-center gap-3",children:[r.jsx("div",{className:"w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),r.jsx("span",{className:"text-sm font-medium",children:"Setting location..."})]})}),d&&r.jsx("div",{className:"absolute top-4 left-4 z-[1000] max-w-xs",children:r.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-lg p-3 shadow-lg border",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"text-lg",children:""}),r.jsx("span",{className:"text-sm font-semibold text-gray-800",children:"Location Picker"})]}),r.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[r.jsx("div",{children:" Use arrows below to navigate"}),r.jsx("div",{children:" Tap center button to select"}),r.jsx("div",{children:" Pinch to zoom for precision"}),r.jsx("div",{className:"pt-2 text-center",children:r.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${s?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:s?" Location Set!":" Move to location"})})]})]})}),r.jsx("div",{className:"absolute inset-0 pointer-events-none z-[999] flex items-center justify-center",children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-8 h-8 border-2 border-red-500 rounded-full bg-white/80 backdrop-blur-sm shadow-lg flex items-center justify-center",children:r.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"})}),r.jsx("div",{className:"absolute -top-6 left-1/2 transform -translate-x-1/2 bg-black/70 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:"Press Enter to select"})]})}),r.jsx(_ge,{currentLayer:a,onLayerChange:o,isMobile:d}),!d&&r.jsxs("div",{className:"absolute bottom-4 right-4 z-[1000] bg-white/95 backdrop-blur-sm rounded-lg p-3 shadow-lg border",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Quick Zoom"}),r.jsx("div",{className:"space-y-2",children:r.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[r.jsx("button",{onClick:()=>{const y=document.querySelector(".leaflet-container");y&&y._leaflet_map&&y._leaflet_map.setZoom(13,{animate:!0})},className:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded transition-colors",children:"City (13)"}),r.jsx("button",{onClick:()=>{const y=document.querySelector(".leaflet-container");y&&y._leaflet_map&&y._leaflet_map.setZoom(15,{animate:!0})},className:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded transition-colors",children:"Area (15)"}),r.jsx("button",{onClick:()=>{const y=document.querySelector(".leaflet-container");y&&y._leaflet_map&&y._leaflet_map.setZoom(17,{animate:!0})},className:"px-2 py-1 text-xs bg-blue-100 hover:bg-blue-200 rounded transition-colors text-blue-700",children:"Street (17)"}),r.jsx("button",{onClick:()=>{const y=document.querySelector(".leaflet-container");y&&y._leaflet_map&&y._leaflet_map.setZoom(19,{animate:!0})},className:"px-2 py-1 text-xs bg-green-100 hover:bg-green-200 rounded transition-colors text-green-700",children:"Building (19)"})]})})]}),d&&r.jsxs("div",{className:"absolute bottom-20 right-4 z-[1000] bg-white/95 backdrop-blur-sm rounded-lg p-4 shadow-lg border",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-3 text-center",children:" Mobile Navigation"}),r.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[r.jsx("div",{}),r.jsx("button",{onClick:()=>g("up"),className:"w-12 h-12 bg-blue-100 hover:bg-blue-200 active:bg-blue-300 rounded-lg transition-colors flex items-center justify-center text-blue-700 font-bold touch-manipulation",title:"Move North",children:""}),r.jsx("div",{}),r.jsx("button",{onClick:()=>g("left"),className:"w-12 h-12 bg-blue-100 hover:bg-blue-200 active:bg-blue-300 rounded-lg transition-colors flex items-center justify-center text-blue-700 font-bold touch-manipulation",title:"Move West",children:""}),r.jsx("button",{onClick:x,className:"w-12 h-12 bg-green-500 hover:bg-green-600 active:bg-green-700 rounded-lg transition-colors flex items-center justify-center text-white font-bold touch-manipulation shadow-md",title:"Select This Location",children:""}),r.jsx("button",{onClick:()=>g("right"),className:"w-12 h-12 bg-blue-100 hover:bg-blue-200 active:bg-blue-300 rounded-lg transition-colors flex items-center justify-center text-blue-700 font-bold touch-manipulation",title:"Move East",children:""}),r.jsx("div",{}),r.jsx("button",{onClick:()=>g("down"),className:"w-12 h-12 bg-blue-100 hover:bg-blue-200 active:bg-blue-300 rounded-lg transition-colors flex items-center justify-center text-blue-700 font-bold touch-manipulation",title:"Move South",children:""}),r.jsx("div",{})]}),r.jsxs("div",{className:"text-xs text-gray-600 mt-3 text-center leading-tight",children:["Use arrows to move",r.jsx("br",{})," to select location",r.jsx("br",{}),r.jsx("span",{className:"text-green-600 font-medium",children:"Coordinates auto-saved"})]})]}),r.jsxs("div",{className:"absolute bottom-4 left-4 z-[1000] bg-white/95 backdrop-blur-sm rounded-lg p-3 shadow-lg border max-w-[200px]",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"text-xs font-semibold text-gray-700",children:"Live Coordinates"}),s&&r.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full",children:" Selected"})]}),r.jsx("div",{className:"text-xs font-mono text-gray-600 space-y-1",children:s?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Lat:"}),r.jsx("span",{className:"font-bold text-blue-600",children:s[0].toFixed(6)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Lng:"}),r.jsx("span",{className:"font-bold text-blue-600",children:s[1].toFixed(6)})]}),r.jsx("div",{className:"pt-1 text-center",children:r.jsx("button",{onClick:()=>{var y;(y=navigator.clipboard)==null||y.writeText(`${s[0]}, ${s[1]}`)},className:"text-xs bg-blue-50 text-blue-600 px-2 py-1 rounded hover:bg-blue-100",children:" Copy Coordinates"})})]}):r.jsx("div",{className:"text-center text-gray-500",children:"Use arrows or tap to select"})})]}),r.jsxs(Eg,{center:s||m,zoom:d?16:15,style:{height:"100%",width:"100%",cursor:d?"pointer":"crosshair",touchAction:d?"pan-x pan-y":"auto"},scrollWheelZoom:!0,doubleClickZoom:!0,dragging:!0,attributionControl:!d,zoomControl:!1,keyboard:!d,keyboardPanDelta:80,tap:d,tapTolerance:15,touchZoom:d,bounceAtZoomLimits:!1,ref:y=>{if(y&&!d){const b=y.getContainer();b.tabIndex=0,b.focus()}},children:[r.jsx(Og,{attribution:p.attribution,url:p.url,maxZoom:20}),!s&&r.jsx(Ei,{position:m,icon:ZD("#6b7280"),children:r.jsx(za,{children:r.jsxs("div",{className:"text-center p-2",children:[r.jsx("div",{className:"font-semibold text-gray-800",children:" Siraha, Nepal"}),r.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Default location - Click anywhere to select your precise location"})]})})}),s&&r.jsx(Ei,{position:s,icon:ZD("#3b82f6",!0),children:r.jsx(za,{children:r.jsxs("div",{className:"text-center p-2",children:[r.jsxs("div",{className:"flex items-center gap-1 justify-center mb-2",children:[r.jsx("span",{className:"text-green-500",children:""}),r.jsx("span",{className:"font-semibold text-green-700",children:"Selected Location"})]}),r.jsxs("div",{className:"space-y-1 text-xs",children:[r.jsxs("div",{className:"font-mono text-gray-600",children:[r.jsxs("div",{children:["Lat: ",s[0].toFixed(6)]}),r.jsxs("div",{children:["Lng: ",s[1].toFixed(6)]})]}),r.jsx("div",{className:"text-blue-600 font-medium",children:" Precise location set!"})]})]})})}),r.jsx(Nge,{onLocationSelect:f}),r.jsx(Sge,{lat:t,lng:n})]})]})}delete Ht.Icon.Default.prototype._getIconUrl;Ht.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});function H0({address:e,latitude:t,longitude:n,onLocationChange:s}){const[i,a]=j.useState(!1),[o,l]=j.useState(!1),[c,d]=j.useState(!1),[h,m]=j.useState(""),[f,g]=j.useState(!1),[x,p]=j.useState(null),[y,b]=j.useState(null),[w,N]=j.useState(!1),{toast:S}=ft();j.useEffect(()=>{const D=()=>{N(window.innerWidth<=768||"ontouchstart"in window)};return D(),window.addEventListener("resize",D),()=>window.removeEventListener("resize",D)},[]),j.useEffect(()=>{t&&n&&b(new Date)},[t,n]);const P=j.useCallback(async(D,B)=>{console.log(" Map clicked at:",D,B),d(!0);try{const M=await O(D,B),U=`https://maps.google.com/?q=${D},${B}`;s({address:M,latitude:D.toString(),longitude:B.toString(),googleMapsLink:U}),b(new Date),S({title:" Location Selected",description:`Precise location set: ${M.slice(0,50)}${M.length>50?"...":""}`})}catch(M){console.error("Error processing map click:",M),S({title:" Error",description:"Failed to get address for selected location",variant:"destructive"})}finally{d(!1)}},[s,S]),C=async()=>{if(!navigator.geolocation){S({title:" Location not supported",description:"Your browser doesn't support location services",variant:"destructive"});return}a(!0);try{const D=await new Promise((W,V)=>{navigator.geolocation.getCurrentPosition(W,V,{enableHighAccuracy:!0,timeout:15e3,maximumAge:6e4})}),{latitude:B,longitude:M,accuracy:U}=D.coords;p(U);const H=await O(B,M),K=`https://maps.google.com/?q=${B},${M}`;s({address:H,latitude:B.toString(),longitude:M.toString(),googleMapsLink:K}),b(new Date),S({title:" Location found",description:`Your location detected with ${U?`${Math.round(U)}m accuracy`:"high precision"}`})}catch(D){console.error("Error getting location:",D),S({title:" Location error",description:"Could not get your location. Please enter manually or use the map.",variant:"destructive"})}finally{a(!1)}},k=async()=>{if(!h.trim()){S({title:" Enter location",description:"Please enter a location to search",variant:"destructive"});return}g(!0);try{const D=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(h)}&limit=1&addressdetails=1`);if(!D.ok)throw new Error("Search failed");const B=await D.json();if(B.length>0){const M=B[0],U=parseFloat(M.lat),H=parseFloat(M.lon),K=M.display_name,W=`https://maps.google.com/?q=${U},${H}`;s({address:K,latitude:U.toString(),longitude:H.toString(),googleMapsLink:W}),b(new Date),l(!0),S({title:" Location found",description:`Found: ${K.slice(0,50)}${K.length>50?"...":""}`})}else S({title:" No results",description:"Location not found. Try a different search term.",variant:"destructive"})}catch(D){console.error("Search error:",D),S({title:" Search failed",description:"Could not search for location. Please try again.",variant:"destructive"})}finally{g(!1)}},O=async(D,B)=>{try{const M=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${D}&lon=${B}&addressdetails=1&zoom=18`);if(!M.ok)throw new Error("Geocoding failed");const U=await M.json();if(U.display_name)return U.display_name;throw new Error("No address found")}catch(M){return console.error("Reverse geocoding error:",M),`${D.toFixed(6)}, ${B.toFixed(6)}`}},I=D=>{s({address:D,latitude:t||"",longitude:n||"",googleMapsLink:t&&n?`https://maps.google.com/?q=${t},${n}`:""})},T=()=>{if(t&&n){const D=`https://maps.google.com/?q=${t},${n}`;window.open(D,"_blank")}else S({title:" No coordinates",description:"Please set your location first to generate Google Maps link",variant:"destructive"})},E=async()=>{if(t&&n){const D=`${t}, ${n}`;await navigator.clipboard.writeText(D),S({title:" Copied!",description:"Coordinates copied to clipboard"})}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Le,{className:"h-5 w-5 text-blue-600"}),r.jsx("h3",{className:"text-lg font-semibold",children:"Store Location"})]}),t&&n&&r.jsxs(le,{variant:"secondary",className:"flex items-center gap-1",children:[r.jsx(Ps,{className:"h-3 w-3"}),"Located ",y&&` ${y.toLocaleTimeString()}`]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(be,{htmlFor:"address",className:"text-sm font-medium",children:"Complete Store Address"}),r.jsx(Yt,{id:"address",placeholder:"Enter your complete store address...",value:e,onChange:D=>I(D.target.value),className:"min-h-[80px] resize-none"})]}),r.jsxs(G,{className:"border-2 border-dashed border-gray-200 hover:border-blue-300 transition-colors",children:[r.jsx(se,{className:"pb-3",children:r.jsxs(ie,{className:"flex items-center gap-2 text-base",children:[r.jsx(zn,{className:"h-4 w-4"}),"Quick Location Search"]})}),r.jsx(Z,{className:"space-y-3",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx(he,{placeholder:"Search for places (e.g., 'Siraha Bazaar', 'Main Street Kathmandu')",value:h,onChange:D=>m(D.target.value),onKeyPress:D=>D.key==="Enter"&&k(),className:"flex-1"}),r.jsx(F,{onClick:k,disabled:f,variant:"outline",size:"sm",children:f?r.jsx(la,{className:"h-4 w-4 animate-spin"}):r.jsx(zn,{className:"h-4 w-4"})})]})})]}),r.jsxs("div",{className:`grid gap-3 ${w?"grid-cols-1":"grid-cols-1 md:grid-cols-2"}`,children:[r.jsxs(F,{type:"button",variant:"outline",onClick:C,disabled:i,className:`flex items-center gap-2 ${w?"h-12 text-sm":"h-11"} touch-manipulation`,children:[i?r.jsx(la,{className:"h-4 w-4 animate-spin"}):r.jsx(jt,{className:"h-4 w-4"}),i?"Getting Location...":"Use My Current Location"]}),r.jsxs(F,{type:"button",variant:o?"secondary":"outline",onClick:()=>l(!o),className:`flex items-center gap-2 ${w?"h-12 text-sm":"h-11"} touch-manipulation`,children:[o?r.jsx(Gte,{className:"h-4 w-4"}):r.jsx(u0,{className:"h-4 w-4"}),o?"Hide Interactive Map":w?" Mobile Map":"Open Interactive Map"]})]}),o&&r.jsxs(G,{className:"border-2 border-blue-200 shadow-lg",children:[r.jsxs(se,{className:"pb-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(Kte,{className:"h-5 w-5 text-blue-600"}),"Interactive Location Picker"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(le,{variant:"outline",className:"text-xs",children:[r.jsx(nre,{className:"h-3 w-3 mr-1"}),"High Resolution"]}),r.jsxs(le,{variant:"outline",className:"text-xs",children:[r.jsx(Gp,{className:"h-3 w-3 mr-1"}),"Real-time"]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:" Click anywhere on the map to set your precise store location. Use mouse wheel to zoom for street-level accuracy."}),r.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-3 rounded-lg border border-blue-200",children:r.jsxs("div",{className:"text-xs space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[r.jsx(Ps,{className:"h-3 w-3"}),r.jsx("span",{className:"font-medium",children:w?"Mobile Map Tips:":"Pro Tips for Siraha & Nepal:"})]}),r.jsx("div",{className:"text-blue-600 space-y-1 ml-5",children:w?r.jsxs(r.Fragment,{children:[r.jsx("div",{children:" Use arrow buttons to navigate precisely"}),r.jsx("div",{children:" Tap  button to select location"}),r.jsx("div",{children:" Pinch to zoom for building-level accuracy"})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{children:" Zoom to level 16-18 for building-level precision"}),r.jsx("div",{children:" Use satellite view for better landmark identification"}),r.jsx("div",{children:" Double-click to zoom in quickly to an area"})]})})]})})]})]}),r.jsx(Z,{className:"p-0",children:r.jsxs("div",{className:"relative",children:[c&&r.jsx("div",{className:"absolute inset-0 bg-white/90 backdrop-blur-sm flex items-center justify-center z-50 rounded-lg",children:r.jsxs("div",{className:"flex items-center gap-3 bg-white p-4 rounded-lg shadow-lg border",children:[r.jsx(la,{className:"h-5 w-5 animate-spin text-blue-600"}),r.jsxs("div",{className:"text-sm",children:[r.jsx("div",{className:"font-medium",children:"Processing location..."}),r.jsx("div",{className:"text-muted-foreground",children:"Getting address details"})]})]})}),r.jsx("div",{className:`w-full rounded-lg overflow-hidden border ${w?"h-[500px]":"h-[700px]"}`,children:r.jsx(Pge,{onLocationSelect:P,selectedLat:t?parseFloat(t):void 0,selectedLng:n?parseFloat(n):void 0})})]})})]}),t&&n&&r.jsxs(G,{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-green-200",children:[r.jsx(se,{className:"pb-3",children:r.jsxs(ie,{className:"text-base flex items-center gap-2 text-green-700",children:[r.jsx(Nb,{className:"h-4 w-4"}),"Location Coordinates",x&&r.jsxs(le,{variant:"secondary",className:"text-xs",children:["",Math.round(x),"m accuracy"]})]})}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx(be,{className:"text-xs font-medium text-muted-foreground",children:"LATITUDE"}),r.jsx(he,{value:t,readOnly:!0,className:"bg-white/60 font-mono text-sm"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(be,{className:"text-xs font-medium text-muted-foreground",children:"LONGITUDE"}),r.jsx(he,{value:n,readOnly:!0,className:"bg-white/60 font-mono text-sm"})]})]}),r.jsx(mn,{}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs(F,{type:"button",variant:"outline",size:"sm",onClick:T,className:"flex items-center gap-2",children:[r.jsx(jt,{className:"h-4 w-4"}),"Open in Google Maps"]}),r.jsxs(F,{type:"button",variant:"outline",size:"sm",onClick:E,className:"flex items-center gap-2",children:[r.jsx(Le,{className:"h-4 w-4"}),"Copy Coordinates"]}),y&&r.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground ml-auto",children:["Last updated: ",y.toLocaleString()]})]})]})]})]})}delete Ht.Icon.Default.prototype._getIconUrl;Ht.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});function dW({deliveryId:e,userType:t,onStatusUpdate:n}){const s=j.useRef(null),i=j.useRef(null),[a,o]=j.useState(null),[l,c]=j.useState(null),[d,h]=j.useState(!0),[m,f]=j.useState(null),[g,x]=j.useState({}),[p,y]=j.useState(null),[b,w]=j.useState(!1);j.useEffect(()=>{if(!s.current||i.current)return;const V=Ht.map(s.current,{center:[26.4499,80.3319],zoom:13,zoomControl:!0});return Ht.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19}).addTo(V),i.current=V,N(),()=>{l&&l.close(),i.current&&(i.current.remove(),i.current=null)}},[]);const N=async()=>{try{if(h(!0),t==="customer"){const V=await fetch(`/api/orders/${e}/tracking`);if(!V.ok)throw new Error("Failed to fetch order data");const z=await V.json(),q=await fetch(`/api/deliveries/${e}/tracking`);let J=null;q.ok&&(J=await q.json()),o({delivery:J==null?void 0:J.delivery,currentLocation:J==null?void 0:J.currentLocation,route:J==null?void 0:J.route,statusHistory:(J==null?void 0:J.statusHistory)||[]})}else{const V=await fetch(`/api/tracking/${e}`);if(!V.ok)throw new Error("Failed to load tracking data");const z=await V.json();o(z),i.current&&z.route&&k(z)}S(),h(!1)}catch(V){console.error("Error loading tracking data:",V),f("Failed to load tracking data"),h(!1)}},S=()=>{const z=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws`,q=new WebSocket(z);q.onopen=()=>{console.log("WebSocket connected"),q.send(JSON.stringify({type:"auth",userId:1,userType:t,sessionId:`${Date.now()}_${Math.random()}`})),q.send(JSON.stringify({type:"subscribe_tracking",deliveryId:e}))},q.onmessage=J=>{const pe=JSON.parse(J.data);P(pe)},q.onclose=()=>{console.log("WebSocket disconnected"),setTimeout(()=>{(!l||l.readyState===WebSocket.CLOSED)&&S()},3e3)},q.onerror=J=>{console.error("WebSocket error:",J)},c(q)},P=V=>{switch(V.type){case"location_update":V.deliveryId===e&&O(V.latitude,V.longitude);break;case"status_update":V.deliveryId===e&&I(V.status,V.description);break;default:console.log("Unknown message type:",V.type)}},C=(V,z)=>{const q=[40,40];let J="";switch(V){case"pickup":J=`
          <div style="
            width: 40px; 
            height: 40px; 
            background: linear-gradient(135deg, #10B981, #059669);
            border: 3px solid white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
            position: relative;
          ">
            <svg width="20" height="20" fill="white" viewBox="0 0 24 24">
              <path d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2 2z"/>
              <path d="m8 7 4-4 4 4"/>
            </svg>
            <div style="
              position: absolute;
              bottom: -8px;
              left: 50%;
              transform: translateX(-50%);
              background: #10B981;
              color: white;
              padding: 2px 6px;
              border-radius: 8px;
              font-size: 8px;
              font-weight: bold;
              white-space: nowrap;
            ">PICKUP</div>
          </div>
        `;break;case"delivery":J=`
          <div style="
            width: 40px; 
            height: 40px; 
            background: linear-gradient(135deg, #EF4444, #DC2626);
            border: 3px solid white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4);
            position: relative;
          ">
            <svg width="20" height="20" fill="white" viewBox="0 0 24 24">
              <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/>
              <polyline points="9,22 9,12 15,12 15,22"/>
            </svg>
            <div style="
              position: absolute;
              bottom: -8px;
              left: 50%;
              transform: translateX(-50%);
              background: #EF4444;
              color: white;
              padding: 2px 6px;
              border-radius: 8px;
              font-size: 8px;
              font-weight: bold;
              white-space: nowrap;
            ">DELIVERY</div>
          </div>
        `;break;case"delivery_partner":J=`
          <div style="
            width: 40px; 
            height: 40px; 
            background: linear-gradient(135deg, #3B82F6, #2563EB);
            border: 3px solid white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
            position: relative;
            ${z==="en_route_pickup"||z==="en_route_delivery"?"animation: pulse 2s infinite;":""}
          ">
            <svg width="20" height="20" fill="white" viewBox="0 0 24 24">
              <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/>
              <circle cx="12" cy="10" r="3"/>
            </svg>
            <div style="
              position: absolute;
              bottom: -8px;
              left: 50%;
              transform: translateX(-50%);
              background: #3B82F6;
              color: white;
              padding: 2px 6px;
              border-radius: 8px;
              font-size: 8px;
              font-weight: bold;
              white-space: nowrap;
            ">RIDER</div>
          </div>
          <style>
            @keyframes pulse {
              0%, 100% { transform: scale(1); }
              50% { transform: scale(1.1); }
            }
          </style>
        `;break}return Ht.divIcon({html:J,iconSize:q,className:"custom-marker",iconAnchor:[20,20],popupAnchor:[0,-20]})},k=V=>{var Ee,We,Se;if(!i.current||!V.route)return;const z=i.current;Object.values(g).forEach(Me=>{Me&&z.removeLayer(Me)}),p&&z.removeLayer(p);const q={},J=Ht.marker([V.route.pickupLocation.lat,V.route.pickupLocation.lng],{icon:C("pickup")}).addTo(z);J.bindPopup(`
      <div style="padding: 10px; min-width: 200px;">
        <h3 style="margin: 0 0 8px 0; color: #10B981; font-weight: bold;">
           Pickup Location
        </h3>
        <p style="margin: 0; color: #666;">
          ${((Ee=V.delivery)==null?void 0:Ee.pickupAddress)||"Shop/Store Location"}
        </p>
        <div style="margin-top: 8px;">
          <button onclick="window.open('https://www.google.com/maps/search/?api=1&query=${V.route.pickupLocation.lat},${V.route.pickupLocation.lng}', '_blank')" 
                  style="background: #10B981; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer;">
            Open in Google Maps
          </button>
        </div>
      </div>
    `),q.pickup=J;const pe=Ht.marker([V.route.deliveryLocation.lat,V.route.deliveryLocation.lng],{icon:C("delivery")}).addTo(z);if(pe.bindPopup(`
      <div style="padding: 10px; min-width: 200px;">
        <h3 style="margin: 0 0 8px 0; color: #EF4444; font-weight: bold;">
           Delivery Location
        </h3>
        <p style="margin: 0; color: #666;">
          ${((We=V.delivery)==null?void 0:We.deliveryAddress)||"Customer Location"}
        </p>
        <div style="margin-top: 8px;">
          <button onclick="window.open('https://www.google.com/maps/search/?api=1&query=${V.route.deliveryLocation.lat},${V.route.deliveryLocation.lng}', '_blank')" 
                  style="background: #EF4444; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer;">
            Open in Google Maps
          </button>
        </div>
      </div>
    `),q.delivery=pe,V.currentLocation){const Me=Ht.marker([V.currentLocation.latitude,V.currentLocation.longitude],{icon:C("delivery_partner",(Se=V.delivery)==null?void 0:Se.status)}).addTo(z),Ie=new Date(V.currentLocation.timestamp).toLocaleTimeString();Me.bindPopup(`
        <div style="padding: 10px; min-width: 200px;">
          <h3 style="margin: 0 0 8px 0; color: #3B82F6; font-weight: bold;">
             Delivery Partner
          </h3>
          <p style="margin: 0; color: #666;">
            Last update: ${Ie}
          </p>
          <div style="margin-top: 8px;">
            <button onclick="window.open('https://www.google.com/maps/search/?api=1&query=${V.currentLocation.latitude},${V.currentLocation.longitude}', '_blank')" 
                    style="background: #3B82F6; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer;">
              Track in Google Maps
            </button>
          </div>
        </div>
      `),q.deliveryPartner=Me}const ye=[[V.route.pickupLocation.lat,V.route.pickupLocation.lng],[V.route.deliveryLocation.lat,V.route.deliveryLocation.lng]];if(V.route.polyline)try{const Me=T(V.route.polyline);ye.length=0,Me.forEach(Ie=>{ye.push([Ie.lat,Ie.lng])})}catch(Me){console.error("Error decoding polyline:",Me)}const Ne=Ht.polyline(ye,{color:"#3B82F6",weight:4,opacity:.8,dashArray:"10, 5"}).addTo(z);y(Ne),x(q);const ke=Ht.featureGroup([J,pe,...q.deliveryPartner?[q.deliveryPartner]:[]]);z.fitBounds(ke.getBounds().pad(.1))},O=(V,z)=>{var pe;if(!i.current)return;const q=i.current;g.deliveryPartner&&q.removeLayer(g.deliveryPartner);const J=Ht.marker([V,z],{icon:C("delivery_partner",(pe=a==null?void 0:a.delivery)==null?void 0:pe.status)}).addTo(q);J.bindPopup(`
      <div style="padding: 10px; min-width: 200px;">
        <h3 style="margin: 0 0 8px 0; color: #3B82F6; font-weight: bold;">
           Delivery Partner
        </h3>
        <p style="margin: 0; color: #666;">
          Current location (Live)
        </p>
        <div style="margin-top: 8px;">
          <button onclick="window.open('https://www.google.com/maps/search/?api=1&query=${V},${z}', '_blank')" 
                  style="background: #3B82F6; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer;">
            Track in Google Maps
          </button>
        </div>
      </div>
    `),x(ye=>({...ye,deliveryPartner:J})),o(ye=>ye?{...ye,currentLocation:{latitude:V,longitude:z,timestamp:new Date}}:null)},I=(V,z)=>{o(q=>q?{...q,delivery:{...q.delivery,status:V},statusHistory:[{status:V,description:z,timestamp:new Date().toISOString()},...q.statusHistory]}:null),n&&n(V)},T=V=>{const z=[];let q=0,J=0,pe=0;for(;q<V.length;){let ye=0,Ne=0,ke;do ke=V.charCodeAt(q++)-63,Ne|=(ke&31)<<ye,ye+=5;while(ke>=32);const Ee=Ne&1?~(Ne>>1):Ne>>1;J+=Ee,ye=0,Ne=0;do ke=V.charCodeAt(q++)-63,Ne|=(ke&31)<<ye,ye+=5;while(ke>=32);const We=Ne&1?~(Ne>>1):Ne>>1;pe+=We,z.push({lat:J/1e5,lng:pe/1e5})}return z},E=V=>{if(!(a!=null&&a.route))return;const{pickupLocation:z,deliveryLocation:q}=a.route,J=V==="pickup"?z:q;if(navigator.geolocation)navigator.geolocation.getCurrentPosition(pe=>{const ye=pe.coords.latitude,Ne=pe.coords.longitude,ke=`https://www.google.com/maps/dir/${ye},${Ne}/${J.lat},${J.lng}`;window.open(ke,"_blank")},()=>{const pe=`https://www.google.com/maps/search/?api=1&query=${J.lat},${J.lng}`;window.open(pe,"_blank")});else{const pe=`https://www.google.com/maps/search/?api=1&query=${J.lat},${J.lng}`;window.open(pe,"_blank")}},D=()=>{if(!(a!=null&&a.route))return;const{pickupLocation:V,deliveryLocation:z}=a.route,q=`https://www.google.com/maps/dir/${V.lat},${V.lng}/${z.lat},${z.lng}`;window.open(q,"_blank")},B=()=>{if(t!=="delivery_partner")return;w(!0);const V=()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(q=>{const J={deliveryId:e,deliveryPartnerId:1,latitude:q.coords.latitude,longitude:q.coords.longitude,heading:q.coords.heading,speed:q.coords.speed,accuracy:q.coords.accuracy};fetch("/api/tracking/location",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(J)}),O(q.coords.latitude,q.coords.longitude)})};V();const z=setInterval(V,1e4);window.locationTrackingInterval=z},M=()=>{w(!1),window.locationTrackingInterval&&(clearInterval(window.locationTrackingInterval),window.locationTrackingInterval=null)},U=V=>V<1e3?`${V}m`:`${(V/1e3).toFixed(1)}km`,H=V=>{const z=Math.round(V/60);if(z<60)return`${z} min`;const q=Math.floor(z/60),J=z%60;return`${q}h ${J}m`},K=V=>{switch(V){case"pending":return"bg-yellow-500";case"assigned":return"bg-blue-500";case"en_route_pickup":return"bg-orange-500";case"picked_up":return"bg-purple-500";case"en_route_delivery":return"bg-indigo-500";case"delivered":return"bg-green-500";case"cancelled":return"bg-red-500";default:return"bg-gray-500"}},W=V=>{switch(V){case"pending":return"Order Placed";case"assigned":return"Delivery Partner Assigned";case"en_route_pickup":return"En Route to Pickup";case"picked_up":return"Order Picked Up";case"en_route_delivery":return"En Route to Delivery";case"delivered":return"Delivered";case"cancelled":return"Cancelled";default:return V}};return d?r.jsx(G,{className:"w-full",children:r.jsx(Z,{className:"p-6",children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),r.jsx("p",{children:"Loading tracking information..."})]})})})}):m?r.jsx(G,{className:"w-full",children:r.jsx(Z,{className:"p-6",children:r.jsxs("div",{className:"text-center text-red-500",children:[r.jsx("p",{children:m}),r.jsx(F,{onClick:N,className:"mt-4",children:"Retry"})]})})}):r.jsxs("div",{className:"w-full space-y-4",children:[r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(kt,{className:"h-5 w-5"}),"Live Delivery Tracking"]}),(a==null?void 0:a.delivery)&&r.jsx(le,{className:`${K(a.delivery.status)} text-white`,children:W(a.delivery.status)})]})}),r.jsxs(Z,{children:[(a==null?void 0:a.route)&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(h0,{className:"h-4 w-4 text-gray-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Distance"}),r.jsx("p",{className:"text-sm text-gray-600",children:U(a.route.distance)})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(gt,{className:"h-4 w-4 text-gray-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Est. Time"}),r.jsx("p",{className:"text-sm text-gray-600",children:H(a.route.estimatedDuration)})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(jt,{className:"h-4 w-4 text-gray-500"}),r.jsxs("div",{className:"flex flex-col gap-1",children:[t==="delivery_partner"&&r.jsxs("div",{className:"flex gap-1",children:[r.jsxs(F,{onClick:()=>E("pickup"),variant:"outline",size:"sm",className:"text-xs",children:[r.jsx(nr,{className:"h-3 w-3 mr-1"}),"To Pickup"]}),r.jsxs(F,{onClick:()=>E("delivery"),variant:"outline",size:"sm",className:"text-xs",children:[r.jsx(ti,{className:"h-3 w-3 mr-1"}),"To Customer"]})]}),r.jsxs(F,{onClick:D,variant:"outline",size:"sm",className:"text-xs",children:[r.jsx(h0,{className:"h-3 w-3 mr-1"}),"Full Route"]})]})]})]}),t==="delivery_partner"&&r.jsxs("div",{className:"flex items-center gap-4 p-3 bg-blue-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${b?"bg-green-500 animate-pulse":"bg-gray-300"}`}),r.jsx("span",{className:"text-sm font-medium",children:"Live Tracking"})]}),b?r.jsx(F,{onClick:M,variant:"outline",size:"sm",children:"Stop Tracking"}):r.jsxs(F,{onClick:B,size:"sm",className:"bg-green-600 hover:bg-green-700",children:[r.jsx(Le,{className:"h-4 w-4 mr-2"}),"Start Tracking"]})]})]})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(Le,{className:"h-5 w-5"}),"Delivery Route Map",r.jsx(le,{variant:"secondary",className:"bg-green-100 text-green-800",children:"Live"})]})}),r.jsx(Z,{className:"p-0",children:r.jsx("div",{ref:s,className:"w-full h-96 bg-gray-100 rounded-b-lg",style:{minHeight:"500px"}})})]}),(a==null?void 0:a.statusHistory)&&a.statusHistory.length>0&&r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(gt,{className:"h-5 w-5"}),"Delivery Timeline"]})}),r.jsx(Z,{children:r.jsx("div",{className:"space-y-3",children:a.statusHistory.map((V,z)=>r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${K(V.status)} mt-1.5`}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium",children:W(V.status)}),V.description&&r.jsx("p",{className:"text-sm text-gray-600",children:V.description}),r.jsx("p",{className:"text-xs text-gray-400",children:new Date(V.timestamp).toLocaleString()})]})]},z))})})]})]})}function Mg({deliveryId:e,userType:t,onStatusUpdate:n}){return r.jsx(dW,{deliveryId:e,userType:t,onStatusUpdate:n})}const Cge=te.object({name:te.string().min(1,"Product name is required"),description:te.string().optional(),price:te.string().min(1,"Price is required"),originalPrice:te.string().optional(),categoryId:te.number().min(1,"Category is required"),stock:te.number().min(0,"Stock must be 0 or greater"),imageUrl:te.string().optional(),images:te.array(te.string()).min(1,"At least 1 image is required").max(6,"Maximum 6 images allowed"),isFastSell:te.boolean().default(!1),isOnOffer:te.boolean().default(!1),offerPercentage:te.number().min(0).max(100).default(0),offerEndDate:te.string().optional(),preparationTime:te.string().optional(),ingredients:te.array(te.string()).default([]),allergens:te.array(te.string()).default([]),spiceLevel:te.string().optional(),isVegetarian:te.boolean().default(!1),isVegan:te.boolean().default(!1),nutritionInfo:te.string().optional()}),kge=te.object({name:te.string().min(1,"Store name is required"),description:te.string().optional(),address:te.string().min(1,"Address is required"),latitude:te.string().optional(),longitude:te.string().optional(),phone:te.string().optional(),website:te.string().url().optional().or(te.literal("")),logo:te.string().optional(),coverImage:te.string().optional(),storeType:te.enum(["retail","restaurant"]).default("retail"),cuisineType:te.string().optional(),deliveryTime:te.string().optional(),minimumOrder:te.string().optional(),deliveryFee:te.string().optional(),isDeliveryAvailable:te.boolean().default(!1),openingHours:te.string().optional()});function Tge(){const[e,t]=j.useState("overview"),[n,s]=j.useState(null);j.useState(null),j.useState(!1);const[i,a]=j.useState([]);j.useState([]);const{user:o}=Gt(),{toast:l}=ft(),{data:c=[]}=Re({queryKey:["/api/stores/owner",o==null?void 0:o.id],queryFn:async()=>{if(!(o!=null&&o.id))return[];const T=await fetch(`/api/stores/owner/${o.id}`);if(!T.ok)throw new Error("Failed to fetch stores");return T.json()},enabled:!!o}),d=c[0],{data:h=[]}=Re({queryKey:[`/api/products/store/${d==null?void 0:d.id}`],queryFn:async()=>{if(!(d!=null&&d.id))return[];const T=await fetch(`/api/products/store/${d.id}`);if(!T.ok)throw new Error("Failed to fetch store products");return T.json()},enabled:!!d}),{data:m=[]}=Re({queryKey:[`/api/orders/store/${d==null?void 0:d.id}`],queryFn:async()=>{if(!(d!=null&&d.id))return[];const T=await fetch(`/api/orders/store/${d.id}`);if(!T.ok)throw new Error("Failed to fetch store orders");return T.json()},enabled:!!d,refetchInterval:3e4,refetchOnWindowFocus:!0}),{data:f=[]}=Re({queryKey:["/api/categories"]});Re({queryKey:["/api/delivery-partners"],queryFn:async()=>{const T=await fetch("/api/delivery-partners");if(!T.ok)throw new Error("Failed to fetch delivery partners");const E=await T.json(),D=await fetch("/api/users"),B=D.ok?await D.json():[];return E.map(M=>{const U=B.find(H=>H.id===M.userId);return{...M,name:(U==null?void 0:U.fullName)||`Partner ${M.id}`,email:(U==null?void 0:U.email)||"No email"}})}});const g=an({resolver:on(Cge),defaultValues:{name:"",description:"",price:"",originalPrice:"",categoryId:1,stock:0,imageUrl:"",images:[],isFastSell:!1,isOnOffer:!1,offerPercentage:0,offerEndDate:"",preparationTime:"",ingredients:[],allergens:[],spiceLevel:"",isVegetarian:!1,isVegan:!1,nutritionInfo:""}}),x=an({resolver:on(kge),defaultValues:{name:"",description:"",address:"",latitude:"",longitude:"",phone:"",website:"",logo:"",coverImage:"",storeType:"retail",cuisineType:"",deliveryTime:"",minimumOrder:"",deliveryFee:"",isDeliveryAvailable:!1,openingHours:""}}),p=m.length,y=h.length,b=m.reduce((T,E)=>T+Number(E.totalAmount),0),w=m.filter(T=>T.status==="pending").length,N=async T=>{var E;if(d)try{const D={...T,storeId:d.id,price:T.price,originalPrice:T.originalPrice||void 0,images:T.images||[],imageUrl:((E=T.images)==null?void 0:E[0])||void 0,isFastSell:T.isFastSell||!1,isOnOffer:T.isOnOffer||!1,offerPercentage:T.offerPercentage||0,offerEndDate:T.offerEndDate||void 0,productType:d.storeType==="restaurant"?"food":"retail",preparationTime:d.storeType==="restaurant"&&T.preparationTime||null,ingredients:d.storeType==="restaurant"?T.ingredients||[]:[],allergens:d.storeType==="restaurant"?T.allergens||[]:[],spiceLevel:d.storeType==="restaurant"&&T.spiceLevel||null,isVegetarian:d.storeType==="restaurant"&&T.isVegetarian||!1,isVegan:d.storeType==="restaurant"&&T.isVegan||!1,nutritionInfo:d.storeType==="restaurant"&&T.nutritionInfo||null};n?(await Gl(`/api/products/${n.id}`,D),l({title:"Product updated successfully"})):(await Pi("/api/products",D),l({title:"Product added successfully"})),g.reset(),s(null),Dr.invalidateQueries({queryKey:[`/api/products/store/${d.id}`]}),Dr.invalidateQueries({queryKey:["/api/products"]})}catch(D){l({title:"Error",description:D instanceof Error?D.message:"Failed to save product",variant:"destructive"})}},S=T=>{var E;s(T),g.reset({name:T.name,description:T.description||"",price:T.price,originalPrice:T.originalPrice||"",categoryId:T.categoryId||0,stock:T.stock||0,imageUrl:((E=T.images)==null?void 0:E[0])||"",images:T.images||[],isFastSell:T.isFastSell||!1,isOnOffer:T.isOnOffer||!1,offerPercentage:T.offerPercentage||0,offerEndDate:T.offerEndDate||""}),t("add-product")},P=async T=>{if(confirm("Are you sure you want to delete this product?"))try{await vb(`/api/products/${T}`),l({title:"Product deleted successfully"}),d&&(Dr.invalidateQueries({queryKey:[`/api/products/store/${d.id}`]}),Dr.invalidateQueries({queryKey:["/api/products"]}))}catch{l({title:"Error",description:"Failed to delete product",variant:"destructive"})}},C=async T=>{try{const E={...T,ownerId:o.id,phone:T.phone||null,description:T.description||null,website:T.website||null,logo:T.logo||null,coverImage:T.coverImage||null,latitude:T.latitude||null,longitude:T.longitude||null,storeType:T.storeType,cuisineType:T.storeType==="restaurant"&&T.cuisineType||null,deliveryTime:T.storeType==="restaurant"&&T.deliveryTime||null,minimumOrder:T.storeType==="restaurant"&&T.minimumOrder?T.minimumOrder:null,deliveryFee:T.storeType==="restaurant"&&T.deliveryFee?T.deliveryFee:null,isDeliveryAvailable:T.storeType==="restaurant"?T.isDeliveryAvailable:!1,openingHours:T.storeType==="restaurant"&&T.openingHours||null};await Pi("/api/stores",E),l({title:"Store created successfully"}),x.reset(),Dr.invalidateQueries({queryKey:["/api/stores"]}),Dr.invalidateQueries({queryKey:["/api/stores","owner",o.id]})}catch(E){l({title:"Error",description:E instanceof Error?E.message:"Failed to create store",variant:"destructive"})}},k=async(T,E)=>{try{await Gl(`/api/orders/${T}/status`,{status:E}),l({title:"Order status updated successfully"}),Dr.invalidateQueries({queryKey:[`/api/orders/store/${d==null?void 0:d.id}`]}),Dr.invalidateQueries({queryKey:["/api/orders/store"]}),Dr.invalidateQueries({queryKey:["/api/orders"]}),d!=null&&d.id&&Dr.refetchQueries({queryKey:[`/api/orders/store/${d.id}`]})}catch(D){console.error("Order status update error:",D),l({title:"Error",description:"Failed to update order status",variant:"destructive"})}},O=async(T,E,D=!1)=>{try{const B=await Pi("/api/notifications/delivery-assignment",{orderId:T,message:E,storeId:d==null?void 0:d.id,shopkeeperId:o==null?void 0:o.id,urgent:D,notificationType:"first_accept_first_serve"}),M={id:Date.now(),orderId:T,message:E,urgent:D,sentAt:new Date().toISOString(),status:"sent",acceptedBy:null};a(U=>[M,...U]),l({title:D?"Urgent delivery notification sent":"Delivery notification sent",description:"All available delivery partners have been notified"})}catch{l({title:"Error",description:"Failed to notify delivery partners",variant:"destructive"})}},I=async(T,E)=>{try{await Pi("/api/notifications/broadcast-delivery",{message:T,orderIds:E,storeId:d==null?void 0:d.id,shopkeeperId:o==null?void 0:o.id}),l({title:"Broadcast notification sent",description:`Notified delivery partners about ${E.length} orders`})}catch{l({title:"Error",description:"Failed to send broadcast notification",variant:"destructive"})}};return!o||o.role!=="shopkeeper"?r.jsx("div",{className:"min-h-screen bg-muted flex items-center justify-center",children:r.jsx(G,{className:"w-full max-w-md",children:r.jsxs(Z,{className:"pt-6 text-center",children:[r.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Access Denied"}),r.jsx("p",{className:"text-muted-foreground",children:"This page is only accessible to shopkeepers."})]})})}):r.jsx("div",{className:"min-h-screen bg-muted",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[r.jsx("div",{className:"flex justify-between items-center mb-8",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Shopkeeper Dashboard"}),r.jsx("p",{className:"text-muted-foreground",children:d?`Managing ${d.name}`:"Manage your store"})]})}),r.jsxs(oi,{value:e,onValueChange:t,children:[r.jsxs(Ds,{className:`grid w-full ${d?"grid-cols-6":"grid-cols-2"}`,children:[r.jsx(ht,{value:"overview",children:"Overview"}),!d&&r.jsx(ht,{value:"create-store",children:"Create Store"}),d&&r.jsxs(r.Fragment,{children:[r.jsx(ht,{value:"inventory",children:"Inventory"}),r.jsx(ht,{value:"products",children:"Products"}),r.jsx(ht,{value:"add-product",children:n?"Edit Product":"Add Product"}),r.jsx(ht,{value:"orders",children:"Orders"}),r.jsx(ht,{value:"notifications",children:"Notifications"})]})]}),r.jsxs(tt,{value:"overview",className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(G,{children:r.jsx(Z,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Products"}),r.jsx("p",{className:"text-2xl font-bold",children:y})]}),r.jsx(rt,{className:"h-8 w-8 text-primary"})]})})}),r.jsx(G,{children:r.jsx(Z,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Orders"}),r.jsx("p",{className:"text-2xl font-bold",children:p})]}),r.jsx(Bn,{className:"h-8 w-8 text-green-600"})]})})}),r.jsx(G,{children:r.jsx(Z,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Revenue"}),r.jsxs("p",{className:"text-2xl font-bold",children:["",b.toLocaleString()]})]}),r.jsx(Hr,{className:"h-8 w-8 text-yellow-600"})]})})}),r.jsx(G,{children:r.jsx(Z,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Pending Orders"}),r.jsx("p",{className:"text-2xl font-bold",children:w})]}),r.jsx(gt,{className:"h-8 w-8 text-orange-600"})]})})})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:"Recent Orders"})}),r.jsx(Z,{children:m.length===0?r.jsx("div",{className:"text-center py-8",children:r.jsx("p",{className:"text-muted-foreground",children:"No orders yet"})}):r.jsx("div",{className:"space-y-4",children:m.slice(0,5).map(T=>r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium",children:["Order #",T.id]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:T.customerName}),r.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(T.createdAt).toLocaleDateString()})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"font-semibold",children:["",Number(T.totalAmount).toLocaleString()]}),r.jsx(le,{variant:T.status==="delivered"?"default":T.status==="shipped"?"secondary":T.status==="processing"?"outline":"destructive",children:T.status})]})]},T.id))})})]})]}),r.jsx(tt,{value:"inventory",className:"space-y-6",children:r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(rt,{className:"h-5 w-5"}),"Add New Product"]}),r.jsx("p",{className:"text-muted-foreground",children:"Add products to your store inventory"})]}),r.jsx(Z,{children:r.jsx(Or,{...g,children:r.jsxs("form",{onSubmit:g.handleSubmit(N),className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(oe,{control:g.control,name:"name",render:({field:T})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Product Name *"}),r.jsx(me,{children:r.jsx(he,{placeholder:"Enter product name",...T})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:g.control,name:"categoryId",render:({field:T})=>{var E;return r.jsxs(ae,{children:[r.jsx(de,{children:"Category *"}),r.jsxs(ct,{onValueChange:D=>T.onChange(parseInt(D)),defaultValue:(E=T.value)==null?void 0:E.toString(),children:[r.jsx(me,{children:r.jsx(it,{children:r.jsx(dt,{placeholder:"Select category"})})}),r.jsx(at,{children:f.map(D=>r.jsx(ne,{value:D.id.toString(),children:D.name},D.id))})]}),r.jsx(fe,{})]})}})]}),r.jsx(oe,{control:g.control,name:"description",render:({field:T})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Description"}),r.jsx(me,{children:r.jsx(Yt,{placeholder:"Enter product description",className:"min-h-24",...T})}),r.jsx(fe,{})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsx(oe,{control:g.control,name:"price",render:({field:T})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Price *"}),r.jsx(me,{children:r.jsx(he,{type:"number",placeholder:"0.00",...T})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:g.control,name:"originalPrice",render:({field:T})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Original Price"}),r.jsx(me,{children:r.jsx(he,{type:"number",placeholder:"0.00",...T})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:g.control,name:"stock",render:({field:T})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Stock Quantity *"}),r.jsx(me,{children:r.jsx(he,{type:"number",placeholder:"Enter quantity",...T,onChange:E=>T.onChange(parseInt(E.target.value)||0)})}),r.jsx(fe,{})]})})]}),r.jsx(oe,{control:g.control,name:"images",render:({field:T})=>r.jsxs(ae,{children:[r.jsx(qs,{label:"Product Images",maxImages:6,minImages:1,onImagesChange:T.onChange,initialImages:T.value||[],className:"col-span-full"}),r.jsx(fe,{})]})}),r.jsxs(F,{type:"submit",className:"w-full",children:[r.jsx(Wt,{className:"h-4 w-4 mr-2"}),n?"Update Product":"Add Product"]})]})})})]})}),r.jsx(tt,{value:"create-store",className:"space-y-6",children:r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsx(ie,{children:"Create Your Store"}),r.jsx("p",{className:"text-muted-foreground",children:"Set up your store to start selling products on Siraha Bazaar"})]}),r.jsx(Z,{children:r.jsx(Or,{...x,children:r.jsxs("form",{onSubmit:x.handleSubmit(C),className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(oe,{control:x.control,name:"name",render:({field:T})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Store Name"}),r.jsx(me,{children:r.jsx(he,{placeholder:"My Awesome Store",...T})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:x.control,name:"phone",render:({field:T})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Phone Number"}),r.jsx(me,{children:r.jsx(he,{placeholder:"+1234567890",...T})}),r.jsx(fe,{})]})})]}),r.jsx(oe,{control:x.control,name:"description",render:({field:T})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Description"}),r.jsx(me,{children:r.jsx(Yt,{placeholder:"Tell customers about your store...",...T})}),r.jsx(fe,{})]})}),r.jsx(H0,{address:x.watch("address"),latitude:x.watch("latitude"),longitude:x.watch("longitude"),onLocationChange:T=>{x.setValue("address",T.address),x.setValue("latitude",T.latitude),x.setValue("longitude",T.longitude)}}),r.jsx(oe,{control:x.control,name:"website",render:({field:T})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Website (Optional)"}),r.jsx(me,{children:r.jsx(he,{placeholder:"https://mystore.com",...T})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:x.control,name:"storeType",render:({field:T})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Store Type"}),r.jsxs(ct,{onValueChange:T.onChange,defaultValue:T.value,children:[r.jsx(me,{children:r.jsx(it,{children:r.jsx(dt,{placeholder:"Select store type"})})}),r.jsxs(at,{children:[r.jsx(ne,{value:"retail",children:"Retail Store"}),r.jsx(ne,{value:"restaurant",children:"Restaurant"})]})]}),r.jsx(fe,{})]})}),x.watch("storeType")==="restaurant"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(oe,{control:x.control,name:"cuisineType",render:({field:T})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Cuisine Type"}),r.jsxs(ct,{onValueChange:T.onChange,defaultValue:T.value,children:[r.jsx(me,{children:r.jsx(it,{children:r.jsx(dt,{placeholder:"Select cuisine type"})})}),r.jsxs(at,{children:[r.jsx(ne,{value:"indian",children:"Indian"}),r.jsx(ne,{value:"chinese",children:"Chinese"}),r.jsx(ne,{value:"fast-food",children:"Fast Food"}),r.jsx(ne,{value:"italian",children:"Italian"}),r.jsx(ne,{value:"mexican",children:"Mexican"}),r.jsx(ne,{value:"continental",children:"Continental"}),r.jsx(ne,{value:"desserts",children:"Desserts & Sweets"}),r.jsx(ne,{value:"beverages",children:"Beverages"})]})]}),r.jsx(fe,{})]})}),r.jsx(oe,{control:x.control,name:"deliveryTime",render:({field:T})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Delivery Time"}),r.jsx(me,{children:r.jsx(he,{placeholder:"e.g., 25-35 mins",...T})}),r.jsx(fe,{})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(oe,{control:x.control,name:"minimumOrder",render:({field:T})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Minimum Order Amount ()"}),r.jsx(me,{children:r.jsx(he,{placeholder:"e.g., 200",...T})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:x.control,name:"deliveryFee",render:({field:T})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Delivery Fee ()"}),r.jsx(me,{children:r.jsx(he,{placeholder:"e.g., 40 (0 for free)",...T})}),r.jsx(fe,{})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(oe,{control:x.control,name:"isDeliveryAvailable",render:({field:T})=>r.jsxs(ae,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(de,{className:"text-base",children:"Delivery Available"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Enable home delivery for your restaurant"})]}),r.jsx(me,{children:r.jsx("input",{type:"checkbox",checked:T.value,onChange:T.onChange,className:"rounded"})})]})}),r.jsx(oe,{control:x.control,name:"openingHours",render:({field:T})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Opening Hours"}),r.jsx(me,{children:r.jsx(he,{placeholder:"e.g., 9:00 AM - 11:00 PM",...T})}),r.jsx(fe,{})]})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(oe,{control:x.control,name:"logo",render:({field:T})=>r.jsxs(ae,{children:[r.jsx(qs,{label:"Store Logo",single:!0,maxImages:1,minImages:0,onImagesChange:E=>T.onChange(E[0]||""),initialImages:T.value?[T.value]:[]}),r.jsx(fe,{})]})}),r.jsx(oe,{control:x.control,name:"coverImage",render:({field:T})=>r.jsxs(ae,{children:[r.jsx(qs,{label:"Store Cover Image",single:!0,maxImages:1,minImages:0,onImagesChange:E=>T.onChange(E[0]||""),initialImages:T.value?[T.value]:[]}),r.jsx(fe,{})]})})]}),r.jsx(F,{type:"submit",className:"w-full",children:"Create Store"})]})})})]})}),r.jsx(tt,{value:"products",className:"space-y-6",children:r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Manage Products"}),r.jsxs(F,{onClick:()=>t("add-product"),children:[r.jsx(Wt,{className:"h-4 w-4 mr-2"}),"Add Product"]})]})}),r.jsx(Z,{children:h.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(rt,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"No products added yet"}),r.jsx(F,{className:"mt-4",onClick:()=>t("add-product"),children:"Add Your First Product"})]}):r.jsx("div",{className:"space-y-4",children:h.map(T=>{var E;return r.jsxs("div",{className:"flex items-center space-x-4 p-4 border rounded-lg",children:[r.jsx("img",{src:((E=T.images)==null?void 0:E[0])||"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&h=100",alt:T.name,className:"w-16 h-16 object-cover rounded-lg"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-medium",children:T.name}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Price: ",Number(T.price).toLocaleString()]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Stock: ",T.stock," units"]}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[T.isFastSell&&r.jsx(le,{variant:"destructive",className:"text-xs",children:" Fast Sell"}),T.isOnOffer&&r.jsxs(le,{variant:"secondary",className:"text-xs",children:[" ",T.offerPercentage,"% OFF"]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(le,{variant:T.isActive?"default":"secondary",children:T.isActive?"Active":"Inactive"}),r.jsx(F,{variant:"outline",size:"sm",onClick:()=>S(T),children:r.jsx(us,{className:"h-4 w-4"})}),r.jsx(F,{variant:"outline",size:"sm",onClick:()=>P(T.id),children:r.jsx(Xs,{className:"h-4 w-4"})})]})]},T.id)})})})]})}),r.jsx(tt,{value:"add-product",className:"space-y-6",children:r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:n?"Edit Product":"Add New Product"})}),r.jsx(Z,{children:r.jsx(Or,{...g,children:r.jsxs("form",{onSubmit:g.handleSubmit(N),className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(oe,{control:g.control,name:"name",render:({field:T})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Product Name"}),r.jsx(me,{children:r.jsx(he,{placeholder:"Enter product name",...T})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:g.control,name:"categoryId",render:({field:T})=>{var E;return r.jsxs(ae,{children:[r.jsx(de,{children:"Category"}),r.jsxs(ct,{onValueChange:D=>T.onChange(parseInt(D)),value:(E=T.value)==null?void 0:E.toString(),children:[r.jsx(me,{children:r.jsx(it,{children:r.jsx(dt,{placeholder:"Select category"})})}),r.jsx(at,{children:f.map(D=>r.jsx(ne,{value:D.id.toString(),children:D.name},D.id))})]}),r.jsx(fe,{})]})}}),r.jsx(oe,{control:g.control,name:"price",render:({field:T})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Price ()"}),r.jsx(me,{children:r.jsx(he,{type:"number",placeholder:"Enter price",...T})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:g.control,name:"originalPrice",render:({field:T})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Original Price () - Optional"}),r.jsx(me,{children:r.jsx(he,{type:"number",placeholder:"Enter original price",...T})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:g.control,name:"stock",render:({field:T})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Stock Quantity"}),r.jsx(me,{children:r.jsx(he,{type:"number",placeholder:"Enter quantity",...T,onChange:E=>T.onChange(parseInt(E.target.value)||0)})}),r.jsx(fe,{})]})})]}),r.jsx(oe,{control:g.control,name:"images",render:({field:T})=>r.jsxs(ae,{children:[r.jsx(qs,{label:"Product Images",maxImages:6,minImages:1,onImagesChange:T.onChange,initialImages:T.value||[],className:"col-span-full"}),r.jsx(fe,{})]})}),r.jsx(oe,{control:g.control,name:"description",render:({field:T})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Description"}),r.jsx(me,{children:r.jsx(Yt,{placeholder:"Enter product description",className:"min-h-20",...T})}),r.jsx(fe,{})]})}),r.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-gray-50",children:[r.jsxs("h3",{className:"font-medium text-lg flex items-center gap-2",children:[r.jsx(wn,{className:"h-5 w-5"}),"Special Features"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(oe,{control:g.control,name:"isFastSell",render:({field:T})=>r.jsxs(ae,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(de,{className:"text-base font-medium",children:"Fast Sell Product"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Mark as fast-selling/trending item"})]}),r.jsx(me,{children:r.jsx("input",{type:"checkbox",checked:T.value,onChange:T.onChange,className:"w-4 h-4"})})]})}),r.jsx(oe,{control:g.control,name:"isOnOffer",render:({field:T})=>r.jsxs(ae,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(de,{className:"text-base font-medium",children:"Special Offer"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Apply discount offer"})]}),r.jsx(me,{children:r.jsx("input",{type:"checkbox",checked:T.value,onChange:T.onChange,className:"w-4 h-4"})})]})})]}),g.watch("isOnOffer")&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[r.jsx(oe,{control:g.control,name:"offerPercentage",render:({field:T})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Discount Percentage (%)"}),r.jsx(me,{children:r.jsx(he,{type:"number",placeholder:"Enter discount percentage",min:"0",max:"100",...T,onChange:E=>T.onChange(parseInt(E.target.value)||0)})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:g.control,name:"offerEndDate",render:({field:T})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Offer End Date"}),r.jsx(me,{children:r.jsx(he,{type:"date",...T})}),r.jsx(fe,{})]})})]})]}),(d==null?void 0:d.storeType)==="restaurant"&&r.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-orange-50",children:[r.jsxs("h3",{className:"font-medium text-lg flex items-center gap-2",children:[r.jsx(Fh,{className:"h-5 w-5"}),"Food Item Details"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(oe,{control:g.control,name:"preparationTime",render:({field:T})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Preparation Time"}),r.jsx(me,{children:r.jsx(he,{placeholder:"e.g., 15-20 mins",...T})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:g.control,name:"spiceLevel",render:({field:T})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Spice Level"}),r.jsxs(ct,{onValueChange:T.onChange,defaultValue:T.value,children:[r.jsx(me,{children:r.jsx(it,{children:r.jsx(dt,{placeholder:"Select spice level"})})}),r.jsxs(at,{children:[r.jsx(ne,{value:"",children:"Not Applicable"}),r.jsx(ne,{value:"mild",children:"Mild"}),r.jsx(ne,{value:"medium",children:"Medium"}),r.jsx(ne,{value:"hot",children:"Hot"}),r.jsx(ne,{value:"extra-hot",children:"Extra Hot"})]})]}),r.jsx(fe,{})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(oe,{control:g.control,name:"isVegetarian",render:({field:T})=>r.jsxs(ae,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(de,{className:"text-base font-medium",children:"Vegetarian"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Contains no meat or fish"})]}),r.jsx(me,{children:r.jsx("input",{type:"checkbox",checked:T.value,onChange:T.onChange,className:"w-4 h-4"})})]})}),r.jsx(oe,{control:g.control,name:"isVegan",render:({field:T})=>r.jsxs(ae,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(de,{className:"text-base font-medium",children:"Vegan"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Contains no animal products"})]}),r.jsx(me,{children:r.jsx("input",{type:"checkbox",checked:T.value,onChange:T.onChange,className:"w-4 h-4"})})]})})]}),r.jsx(oe,{control:g.control,name:"nutritionInfo",render:({field:T})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Nutrition Information (Optional)"}),r.jsx(me,{children:r.jsx(Yt,{placeholder:"e.g., Calories: 350, Protein: 15g, Carbs: 45g, Fat: 12g",className:"min-h-20",...T})}),r.jsx(fe,{})]})})]}),r.jsxs("div",{className:"flex space-x-4",children:[r.jsx(F,{type:"submit",className:"btn-primary",children:n?"Update Product":"Add Product"}),n&&r.jsx(F,{type:"button",variant:"outline",onClick:()=>{s(null),g.reset()},children:"Cancel"})]})]})})})]})}),r.jsx(tt,{value:"orders",className:"space-y-6",children:r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:"Order Management"})}),r.jsx(Z,{children:m.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Bn,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"No orders yet"})]}):r.jsx("div",{className:"space-y-4",children:m.map(T=>r.jsxs("div",{className:"border rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-semibold",children:["Order #",T.id]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[T.customerName,"  ",T.phone]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(T.createdAt).toLocaleDateString()})]}),r.jsxs("div",{className:"text-right space-y-2",children:[r.jsxs("p",{className:"font-semibold text-lg",children:["",Number(T.totalAmount).toLocaleString()]}),r.jsx("div",{className:"flex gap-2",children:r.jsxs(ct,{value:T.status,onValueChange:E=>k(T.id,E),children:[r.jsx(it,{className:"w-32",children:r.jsx(dt,{})}),r.jsxs(at,{children:[r.jsx(ne,{value:"pending",children:"Pending"}),r.jsx(ne,{value:"processing",children:"Processing"}),r.jsx(ne,{value:"ready_for_pickup",children:"Ready for Pickup"}),r.jsx(ne,{value:"assigned_for_delivery",children:"Assigned for Delivery"}),r.jsx(ne,{value:"shipped",children:"Shipped"}),r.jsx(ne,{value:"delivered",children:"Delivered"}),r.jsx(ne,{value:"cancelled",children:"Cancelled"})]})]})}),r.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[T.status!=="assigned_for_delivery"&&T.status!=="delivered"&&T.status!=="cancelled"&&r.jsx("div",{className:"flex gap-2",children:r.jsxs(F,{onClick:()=>{O(T.id,` New Order Available: Order #${T.id} from ${d==null?void 0:d.name}. Customer: ${T.customerName}. Total: ${T.totalAmount}. First to accept gets delivery!`,!1)},className:"bg-orange-600 hover:bg-orange-700 text-white",children:[r.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Send to All Partners (First Accept)"]})}),T.status==="assigned_for_delivery"&&r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 w-full",children:[r.jsx("p",{className:"text-sm text-green-700 font-medium",children:" Delivery partner assigned and notified"}),r.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Order is being processed for delivery"})]})]})]})]}),r.jsx(mn,{className:"my-3"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium mb-2",children:"Delivery Address:"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:T.shippingAddress})]})]},T.id))})})]})}),r.jsxs(tt,{value:"notifications",className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx(G,{children:r.jsx(Z,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Ready for Pickup"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:m.filter(T=>T.status==="ready_for_pickup").length})]}),r.jsx(wt,{className:"h-8 w-8 text-green-600"})]})})}),r.jsx(G,{children:r.jsx(Z,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Processing"}),r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:m.filter(T=>T.status==="processing").length})]}),r.jsx(gd,{className:"h-8 w-8 text-blue-600"})]})})}),r.jsx(G,{children:r.jsx(Z,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Notifications Sent"}),r.jsx("p",{className:"text-2xl font-bold text-purple-600",children:i.length})]}),r.jsx(Xt,{className:"h-8 w-8 text-purple-600"})]})})})]}),r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(kt,{className:"h-5 w-5"}),"First Accept First Serve - Delivery Notifications"]}),r.jsx("p",{className:"text-muted-foreground",children:"Send notifications to all available delivery partners. The first one to accept gets the delivery."})]}),r.jsxs(Z,{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-wrap gap-3 p-4 bg-gray-50 rounded-lg",children:[r.jsxs(F,{onClick:()=>{const T=m.filter(E=>E.status==="ready_for_pickup");T.length>0&&I(` URGENT: ${T.length} orders ready for immediate pickup from ${d==null?void 0:d.name}`,T.map(E=>E.id))},disabled:m.filter(T=>T.status==="ready_for_pickup").length===0,className:"bg-red-600 hover:bg-red-700",children:[r.jsx(wr,{className:"h-4 w-4 mr-2"}),"Broadcast All Ready Orders (Urgent)"]}),r.jsxs(F,{variant:"outline",onClick:()=>{const T=m.filter(E=>E.status==="processing");T.length>0&&I(` ${T.length} orders being prepared at ${d==null?void 0:d.name}`,T.map(E=>E.id))},disabled:m.filter(T=>T.status==="processing").length===0,children:[r.jsx(Ld,{className:"h-4 w-4 mr-2"}),"Notify About Processing Orders"]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-semibold text-lg",children:"Individual Order Notifications"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:m.filter(T=>T.status==="processing"||T.status==="ready_for_pickup").map(T=>r.jsxs("div",{className:"border rounded-lg p-4 space-y-3 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsxs("h4",{className:"font-medium",children:["Order #",T.id]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:T.customerName}),r.jsx("p",{className:"text-xs text-muted-foreground",children:T.phone}),r.jsx(le,{variant:T.status==="ready_for_pickup"?"default":"secondary",className:T.status==="ready_for_pickup"?"bg-green-100 text-green-800":"",children:T.status.replace("_"," ").toUpperCase()})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"font-semibold",children:["",Number(T.totalAmount).toLocaleString()]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(T.createdAt).toLocaleDateString()})]})]}),r.jsx("div",{className:"text-sm text-muted-foreground",children:r.jsxs("p",{className:"truncate",children:[" ",T.shippingAddress]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(F,{size:"sm",className:"w-full bg-red-600 hover:bg-red-700",onClick:()=>O(T.id,` URGENT PICKUP: Order #${T.id} ready NOW from ${d==null?void 0:d.name}! Customer: ${T.customerName}, Amount: ${T.totalAmount}. First to accept gets this delivery!`,!0),children:[r.jsx(wr,{className:"h-4 w-4 mr-2"}),"Send Urgent Alert (First Accept First Serve)"]}),r.jsxs(F,{size:"sm",variant:"outline",className:"w-full",onClick:()=>O(T.id,` Pickup Available: Order #${T.id} at ${d==null?void 0:d.name}. Customer: ${T.customerName}, Amount: ${T.totalAmount}. Accept to claim this delivery!`,!1),children:[r.jsx(Ld,{className:"h-4 w-4 mr-2"}),"Send Standard Notification"]})]}),T.deliveryPartner&&r.jsxs("div",{className:"mt-4 border-t pt-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("h5",{className:"font-semibold flex items-center gap-2",children:[r.jsx(Le,{className:"h-4 w-4"}),"Live Delivery Tracking"]}),r.jsx(le,{variant:"secondary",className:"bg-green-100 text-green-800",children:"Live"})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-3",children:[r.jsxs("p",{className:"text-sm",children:[r.jsx("strong",{children:"Contact Delivery Partner:"}),r.jsxs("a",{href:`tel:${T.deliveryPartner.phone}`,className:"text-blue-600 hover:underline ml-2",children:[r.jsx(Ot,{className:"inline h-4 w-4 mr-1"}),T.deliveryPartner.phone]})]}),r.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Partner: ",T.deliveryPartner.name||"Assigned Partner"]})]}),r.jsx("div",{className:"h-64 rounded-lg overflow-hidden border",children:r.jsx(Mg,{deliveryId:T.id,userType:"shopkeeper"})})]})]},T.id))}),m.filter(T=>T.status==="processing"||T.status==="ready_for_pickup").length===0&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx(kt,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"No orders ready for delivery notifications"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:'Orders with "Processing" or "Ready for Pickup" status will appear here'})]})]}),i.length>0&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-semibold text-lg",children:"Recent Notifications"}),r.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:i.slice(0,10).map(T=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[T.urgent?r.jsx(wr,{className:"h-4 w-4 text-red-500"}):r.jsx(Xt,{className:"h-4 w-4 text-blue-500"}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm font-medium",children:["Order #",T.orderId]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(T.sentAt).toLocaleString()})]})]}),r.jsx(le,{variant:T.urgent?"destructive":"secondary",children:T.urgent?"Urgent":"Standard"})]},T.id))})]})]})]})]})]})]})})}function Age({storeId:e,customerId:t,orderItems:n}){const[s,i]=j.useState({orderId:"",orderItemId:"",reason:"",description:""}),{toast:a}=ft(),o=pn(),{data:l}=Re({queryKey:["/api/stores",e,"return-policy"],queryFn:async()=>{const g=await fetch(`/api/stores/${e}/return-policy`);if(!g.ok)throw new Error("Failed to fetch return policy");return g.json()},enabled:!!e}),{data:c}=Re({queryKey:["/api/returns/customer",t],queryFn:async()=>{const g=await fetch(`/api/returns/customer/${t}`);if(!g.ok)throw new Error("Failed to fetch returns");return g.json()},enabled:!!t}),d=pt({mutationFn:async g=>{const x=await fetch("/api/returns",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...g,customerId:t})});if(!x.ok)throw new Error("Failed to create return request");return x.json()},onSuccess:()=>{o.invalidateQueries({queryKey:["/api/returns/customer",t]}),i({orderId:"",orderItemId:"",reason:"",description:""}),a({title:"Success",description:"Return request submitted successfully"})},onError:g=>{a({title:"Error",description:g.message,variant:"destructive"})}}),h=g=>{g.preventDefault(),d.mutate(s)},m=g=>{switch(g){case"requested":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";case"completed":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},f=g=>{switch(g){case"requested":return r.jsx(gt,{className:"h-4 w-4"});case"approved":return r.jsx(wt,{className:"h-4 w-4"});case"rejected":return r.jsx(Ms,{className:"h-4 w-4"});case"completed":return r.jsx(rt,{className:"h-4 w-4"});default:return r.jsx(gt,{className:"h-4 w-4"})}};return r.jsxs("div",{className:"space-y-6",children:[e&&r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(Ms,{className:"h-5 w-5"}),"Return Policy"]}),r.jsx(Ct,{children:"Our return policy and guidelines"})]}),r.jsx(Z,{children:l?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[r.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Return Period"}),r.jsxs("p",{className:"text-blue-700",children:[l.returnDays," days from delivery"]})]}),r.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[r.jsx("h3",{className:"font-semibold text-green-900 mb-2",children:"Status"}),r.jsx("p",{className:"text-green-700",children:l.isActive?"Active":"Inactive"})]})]}),l.returnConditions&&r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-2",children:"Return Conditions"}),r.jsx("p",{className:"text-gray-600 text-sm whitespace-pre-wrap",children:l.returnConditions})]})]}):r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(Ms,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),r.jsx("p",{children:"No return policy available for this store"})]})})]}),t&&r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsx(ie,{children:"Request Return"}),r.jsx(Ct,{children:"Submit a return request for your order"})]}),r.jsx(Z,{children:r.jsxs("form",{onSubmit:h,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(be,{htmlFor:"orderId",children:"Order ID"}),r.jsx(he,{id:"orderId",value:s.orderId,onChange:g=>i({...s,orderId:g.target.value}),placeholder:"Enter order ID",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(be,{htmlFor:"orderItemId",children:"Order Item ID"}),r.jsx(he,{id:"orderItemId",value:s.orderItemId,onChange:g=>i({...s,orderItemId:g.target.value}),placeholder:"Enter item ID",required:!0})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(be,{htmlFor:"reason",children:"Reason for Return"}),r.jsx(he,{id:"reason",value:s.reason,onChange:g=>i({...s,reason:g.target.value}),placeholder:"e.g., Damaged item, Wrong size, etc.",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(be,{htmlFor:"description",children:"Description (Optional)"}),r.jsx(Yt,{id:"description",value:s.description,onChange:g=>i({...s,description:g.target.value}),placeholder:"Provide additional details about the return...",rows:3})]}),r.jsx(F,{type:"submit",className:"w-full",disabled:d.isPending,children:d.isPending?"Submitting...":"Submit Return Request"})]})})]}),t&&c&&r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsx(ie,{children:"Your Returns"}),r.jsx(Ct,{children:"Track your return requests"})]}),r.jsx(Z,{children:c.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(rt,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),r.jsx("p",{children:"No return requests found"}),r.jsx("p",{className:"text-sm",children:"Your return requests will appear here"})]}):r.jsx("div",{className:"space-y-4",children:c.map(g=>r.jsxs("div",{className:"p-4 border rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("h3",{className:"font-semibold",children:["Return #",g.id]}),r.jsx(le,{className:m(g.status),children:r.jsxs("div",{className:"flex items-center gap-1",children:[f(g.status),r.jsx("span",{className:"capitalize",children:g.status})]})})]}),r.jsx("span",{className:"text-sm text-gray-500",children:new Date(g.createdAt).toLocaleDateString()})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Order ID:"})," #",g.orderId]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Reason:"})," ",g.reason]})]}),g.description&&r.jsxs("div",{className:"mt-3 text-sm",children:[r.jsx("span",{className:"font-medium",children:"Description:"}),r.jsx("p",{className:"text-gray-600 mt-1",children:g.description})]}),g.refundAmount&&r.jsxs("div",{className:"mt-3 text-sm",children:[r.jsx("span",{className:"font-medium",children:"Refund Amount:"}),r.jsxs("span",{className:"text-green-600 font-semibold ml-1",children:["",g.refundAmount]})]})]},g.id))})})]})]})}const Ege=te.object({fullName:te.string().min(2,"Full name must be at least 2 characters"),email:te.string().email("Please enter a valid email address"),phone:te.string().min(10,"Phone number must be at least 10 digits")}),Oge=te.object({title:te.string().min(1,"Address title is required"),address:te.string().min(10,"Full address is required"),city:te.string().min(1,"City is required"),postalCode:te.string().min(1,"Postal code is required")});function Mge(){const[e,t]=j.useState("orders"),{user:n,logout:s}=Gt(),{wishlistItems:i}=vg(),{toast:a}=ft(),{data:o=[]}=Re({queryKey:[`/api/orders/customer/${n==null?void 0:n.id}`],enabled:!!n}),l=an({resolver:on(Ege),defaultValues:{fullName:(n==null?void 0:n.fullName)||"",email:(n==null?void 0:n.email)||"",phone:(n==null?void 0:n.phone)||""}});an({resolver:on(Oge),defaultValues:{title:"",address:"",city:"Siraha",postalCode:""}});const c=async m=>{if(n)try{await Gl(`/api/users/${n.id}`,m),a({title:"Profile updated",description:"Your profile has been updated successfully."})}catch{a({title:"Error",description:"Failed to update profile. Please try again.",variant:"destructive"})}},d=m=>{switch(m){case"delivered":return r.jsx(wt,{className:"h-4 w-4 text-green-600"});case"shipped":return r.jsx(kt,{className:"h-4 w-4 text-blue-600"});case"processing":return r.jsx(gt,{className:"h-4 w-4 text-yellow-600"});case"cancelled":return r.jsx(Ys,{className:"h-4 w-4 text-red-600"});default:return r.jsx(rt,{className:"h-4 w-4 text-gray-600"})}},h=m=>{switch(m){case"delivered":return"default";case"shipped":return"secondary";case"processing":return"outline";case"cancelled":return"destructive";default:return"outline"}};return!n||n.role!=="customer"?r.jsx("div",{className:"min-h-screen bg-muted flex items-center justify-center",children:r.jsx(G,{className:"w-full max-w-md",children:r.jsxs(Z,{className:"pt-6 text-center",children:[r.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Access Denied"}),r.jsx("p",{className:"text-muted-foreground",children:"This page is only accessible to customers."})]})})}):r.jsx("div",{className:"min-h-screen bg-muted",children:r.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[r.jsxs("div",{className:"flex justify-between items-center mb-8",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"My Account"}),r.jsxs("p",{className:"text-muted-foreground",children:["Welcome back, ",n.fullName]})]}),r.jsx(F,{variant:"outline",onClick:s,children:"Logout"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[r.jsx("div",{className:"lg:col-span-1",children:r.jsx(G,{children:r.jsxs(Z,{className:"p-6",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("div",{className:"w-20 h-20 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Wr,{className:"h-10 w-10 text-primary"})}),r.jsx("h3",{className:"font-semibold text-foreground",children:n.fullName}),r.jsx("p",{className:"text-sm text-muted-foreground",children:n.email})]}),r.jsxs("nav",{className:"space-y-2",children:[r.jsxs("button",{onClick:()=>t("orders"),className:`w-full text-left px-3 py-2 rounded-lg transition-colors flex items-center space-x-3 ${e==="orders"?"bg-primary text-primary-foreground":"hover:bg-muted"}`,children:[r.jsx(Wo,{className:"h-4 w-4"}),r.jsx("span",{children:"Order History"})]}),r.jsxs("button",{onClick:()=>t("tracking"),className:`w-full text-left px-3 py-2 rounded-lg transition-colors flex items-center space-x-3 ${e==="tracking"?"bg-primary text-primary-foreground":"hover:bg-muted"}`,children:[r.jsx(kt,{className:"h-4 w-4"}),r.jsx("span",{children:"Live Tracking"})]}),r.jsxs("button",{onClick:()=>t("addresses"),className:`w-full text-left px-3 py-2 rounded-lg transition-colors flex items-center space-x-3 ${e==="addresses"?"bg-primary text-primary-foreground":"hover:bg-muted"}`,children:[r.jsx(Le,{className:"h-4 w-4"}),r.jsx("span",{children:"Addresses"})]}),r.jsxs("button",{onClick:()=>t("wishlist"),className:`w-full text-left px-3 py-2 rounded-lg transition-colors flex items-center space-x-3 ${e==="wishlist"?"bg-primary text-primary-foreground":"hover:bg-muted"}`,children:[r.jsx(La,{className:"h-4 w-4"}),r.jsx("span",{children:"Wishlist"})]}),r.jsxs("button",{onClick:()=>t("notifications"),className:`w-full text-left px-3 py-2 rounded-lg transition-colors flex items-center space-x-3 ${e==="notifications"?"bg-primary text-primary-foreground":"hover:bg-muted"}`,children:[r.jsx(Xt,{className:"h-4 w-4"}),r.jsx("span",{children:"Notifications"})]}),r.jsxs("button",{onClick:()=>t("returns"),className:`w-full text-left px-3 py-2 rounded-lg transition-colors flex items-center space-x-3 ${e==="returns"?"bg-primary text-primary-foreground":"hover:bg-muted"}`,children:[r.jsx(Ms,{className:"h-4 w-4"}),r.jsx("span",{children:"Returns"})]}),r.jsxs("button",{onClick:()=>t("profile"),className:`w-full text-left px-3 py-2 rounded-lg transition-colors flex items-center space-x-3 ${e==="profile"?"bg-primary text-primary-foreground":"hover:bg-muted"}`,children:[r.jsx(Rd,{className:"h-4 w-4"}),r.jsx("span",{children:"Profile Settings"})]})]})]})})}),r.jsxs("div",{className:"lg:col-span-3",children:[e==="orders"&&r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:"Order History"})}),r.jsx(Z,{children:o.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Wo,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No orders yet"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"You haven't placed any orders yet. Start shopping to see your orders here."}),r.jsx(F,{children:"Start Shopping"})]}):r.jsx("div",{className:"space-y-6",children:o.map(m=>r.jsxs("div",{className:"border rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-semibold text-lg",children:["Order #",m.id]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Placed on ",new Date(m.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[d(m.status),r.jsx(le,{variant:h(m.status),children:m.status.charAt(0).toUpperCase()+m.status.slice(1)})]}),r.jsxs("p",{className:"font-semibold text-lg",children:["",Number(m.totalAmount).toLocaleString()]})]})]}),r.jsx(mn,{className:"my-4"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-2",children:"Order Items"}),r.jsx("div",{className:"space-y-2",children:m.items&&m.items.length>0?m.items.map((f,g)=>{var x;return r.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted rounded-md",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium text-sm",children:((x=f.product)==null?void 0:x.name)||`Product ID: ${f.productId}`}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Quantity: ",f.quantity,"  ",parseFloat(f.price).toFixed(2)]})]}),r.jsxs("p",{className:"font-medium text-sm",children:["",(parseFloat(f.price)*f.quantity).toFixed(2)]})]},g)}):r.jsx("p",{className:"text-sm text-muted-foreground",children:"No items found"})})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-2",children:"Delivery Address"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:m.shippingAddress})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-2",children:"Payment Method"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:m.paymentMethod==="cod"?"Cash on Delivery":m.paymentMethod.toUpperCase()})]})]}),r.jsxs("div",{className:"flex justify-between items-center mt-6",children:[r.jsx(F,{variant:"outline",size:"sm",children:"View Details"}),m.status==="delivered"&&r.jsx(F,{variant:"outline",size:"sm",children:"Reorder"}),m.status!=="delivered"&&m.status!=="cancelled"&&r.jsx(Ae,{href:`/orders/${m.id}/tracking`,children:r.jsx(F,{variant:"outline",size:"sm",children:"Track Order"})})]})]},m.id))})})]}),e==="addresses"&&r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Saved Addresses"}),r.jsx(F,{size:"sm",children:"Add New Address"})]})}),r.jsx(Z,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"border rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx("h3",{className:"font-medium",children:"Home"}),r.jsx(le,{variant:"secondary",children:"Default"})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:n.fullName}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Mahendra Chowk, Siraha-56600",r.jsx("br",{}),"Nepal",r.jsx("br",{}),"Phone: ",n.phone||"+977-9841234567"]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(F,{variant:"outline",size:"sm",children:"Edit"}),r.jsx(F,{variant:"outline",size:"sm",children:"Delete"})]})]})}),r.jsx("div",{className:"border rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium mb-2",children:"Office"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:n.fullName}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["District Office, Siraha-56600",r.jsx("br",{}),"Nepal",r.jsx("br",{}),"Phone: ",n.phone||"+977-9841234567"]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(F,{variant:"outline",size:"sm",children:"Edit"}),r.jsx(F,{variant:"outline",size:"sm",children:"Delete"})]})]})})]})})]}),e==="wishlist"&&r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center justify-between",children:[r.jsx("span",{children:"My Wishlist"}),r.jsxs(le,{variant:"secondary",children:[i.length," items"]})]})}),r.jsxs(Z,{children:[i.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(La,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Your wishlist is empty"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"Save items you love to your wishlist and shop them later."}),r.jsx(F,{children:"Start Shopping"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.slice(0,6).map(m=>{var f,g,x,p,y;return r.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[r.jsx("img",{src:((g=(f=m.product)==null?void 0:f.images)==null?void 0:g[0])||"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",alt:((x=m.product)==null?void 0:x.name)||"Product",className:"w-full h-32 object-cover rounded mb-3"}),r.jsx("h4",{className:"font-medium text-sm mb-2 line-clamp-2",children:((p=m.product)==null?void 0:p.name)||"Product Name"}),r.jsxs("p",{className:"text-lg font-bold text-primary mb-3",children:["",((y=m.product)==null?void 0:y.price)||"0"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(F,{size:"sm",className:"flex-1",children:"Add to Cart"}),r.jsx(F,{variant:"outline",size:"sm",children:r.jsx(La,{className:"h-4 w-4"})})]})]},m.id)})}),i.length>6&&r.jsx("div",{className:"mt-6 text-center",children:r.jsx(F,{variant:"outline",children:"View All Wishlist Items"})})]})]}),e==="tracking"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(rt,{className:"h-5 w-5"}),r.jsx("span",{children:"Order Tracking System"})]}),r.jsxs(le,{variant:"secondary",children:[o.length," orders"]})]})}),r.jsx(Z,{children:o.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(rt,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No orders found"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"You haven't placed any orders yet. Start shopping to see your order tracking here."}),r.jsx(Ae,{href:"/",children:r.jsx(F,{children:"Start Shopping"})})]}):r.jsxs("div",{className:"space-y-4",children:[o.slice(0,5).map(m=>r.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsxs("h4",{className:"font-semibold text-lg",children:["Order #",m.id]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Placed on ",new Date(m.createdAt).toLocaleDateString()]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx(le,{className:`
                                  ${m.status==="delivered"?"bg-green-500":m.status==="pending"?"bg-yellow-500":"bg-blue-500"} text-white
                                `,children:m.status.charAt(0).toUpperCase()+m.status.slice(1)}),r.jsxs("p",{className:"text-sm font-semibold mt-1",children:["",Number(m.totalAmount).toLocaleString()]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[r.jsx(wt,{className:`h-4 w-4 ${m.status!=="pending"?"text-green-500":"text-gray-300"}`}),r.jsx("span",{className:"text-sm",children:"Order Placed"}),r.jsx("div",{className:"h-px bg-gray-300 flex-1"}),r.jsx(wt,{className:`h-4 w-4 ${m.status==="delivered"?"text-green-500":"text-gray-300"}`}),r.jsx("span",{className:"text-sm",children:"Delivered"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Ae,{href:`/orders/${m.id}/tracking`,children:r.jsxs(F,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[r.jsx(Le,{className:"h-4 w-4"}),"Track Order"]})}),m.status!=="delivered"&&r.jsxs(F,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[r.jsx(kt,{className:"h-4 w-4"}),"Contact Support"]})]})]},m.id)),o.length>5&&r.jsx("div",{className:"text-center pt-4",children:r.jsx(F,{variant:"outline",children:"View All Orders"})})]})})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center space-x-2",children:[r.jsx(kt,{className:"h-5 w-5"}),r.jsx("span",{children:"Live Delivery Tracking"})]})}),r.jsx(Z,{children:(()=>{const m=o.filter(f=>f.status==="shipped"||f.status==="processing"||f.status==="out for delivery"||f.status==="picked_up"||f.status==="en_route_delivery");return m.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(kt,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No active deliveries"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"You don't have any orders currently being delivered."}),r.jsx(Ae,{href:"/",children:r.jsx(F,{children:"Start Shopping"})})]}):r.jsx("div",{className:"space-y-6",children:m.map(f=>r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-blue-50",children:[r.jsxs("div",{children:[r.jsxs("h4",{className:"font-medium",children:["Order #",f.id]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Status: ",r.jsx(le,{variant:"secondary",children:f.status})]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Total: ",Number(f.totalAmount).toLocaleString()]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),r.jsx("span",{className:"text-sm font-medium text-green-600",children:"Live Tracking"})]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Ordered on ",new Date(f.createdAt).toLocaleDateString()]})]})]}),r.jsx("div",{className:"h-96 border rounded-lg",children:r.jsx(Mg,{deliveryId:f.id,userType:"customer",onStatusUpdate:g=>{console.log(`Order ${f.id} status updated to: ${g}`)}})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Ae,{href:`/orders/${f.id}/tracking`,children:r.jsx(F,{variant:"outline",size:"sm",children:"View Full Timeline"})}),r.jsx(F,{variant:"outline",size:"sm",children:"Contact Delivery Partner"}),r.jsxs(F,{variant:"outline",size:"sm",children:[r.jsx(Ms,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]},f.id))})})()})]})]}),e==="profile"&&r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:"Profile Settings"})}),r.jsx(Z,{children:r.jsx(Or,{...l,children:r.jsxs("form",{onSubmit:l.handleSubmit(c),className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(oe,{control:l.control,name:"fullName",render:({field:m})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Full Name"}),r.jsx(me,{children:r.jsx(he,{placeholder:"Enter your full name",...m})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:l.control,name:"email",render:({field:m})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Email Address"}),r.jsx(me,{children:r.jsx(he,{type:"email",placeholder:"Enter your email",...m})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:l.control,name:"phone",render:({field:m})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Phone Number"}),r.jsx(me,{children:r.jsx(he,{type:"tel",placeholder:"Enter your phone number",...m})}),r.jsx(fe,{})]})})]}),r.jsx(mn,{}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Account Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"Account Type:"}),r.jsx("p",{className:"font-medium capitalize",children:n.role})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"Member Since:"}),r.jsx("p",{className:"font-medium",children:new Date(n.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]})]}),r.jsx(F,{type:"submit",className:"btn-primary",children:"Update Profile"})]})})})]}),e==="notifications"&&r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center space-x-2",children:[r.jsx(Xt,{className:"h-5 w-5"}),r.jsx("span",{children:"Notifications"})]})}),r.jsx(Z,{children:r.jsx($b,{})})]}),e==="returns"&&r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center space-x-2",children:[r.jsx(Ms,{className:"h-5 w-5"}),r.jsx("span",{children:"Returns & Refunds"})]})}),r.jsx(Z,{children:r.jsx(Age,{customerId:n.id,orderItems:o.flatMap(m=>m.items)})})]})]})]})]})})}const wi=j.forwardRef(({className:e,...t},n)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:n,className:Ve("w-full caption-bottom text-sm",e),...t})}));wi.displayName="Table";const Ni=j.forwardRef(({className:e,...t},n)=>r.jsx("thead",{ref:n,className:Ve("[&_tr]:border-b",e),...t}));Ni.displayName="TableHeader";const Si=j.forwardRef(({className:e,...t},n)=>r.jsx("tbody",{ref:n,className:Ve("[&_tr:last-child]:border-0",e),...t}));Si.displayName="TableBody";const Dge=j.forwardRef(({className:e,...t},n)=>r.jsx("tfoot",{ref:n,className:Ve("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));Dge.displayName="TableFooter";const Vr=j.forwardRef(({className:e,...t},n)=>r.jsx("tr",{ref:n,className:Ve("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Vr.displayName="TableRow";const Ze=j.forwardRef(({className:e,...t},n)=>r.jsx("th",{ref:n,className:Ve("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Ze.displayName="TableHead";const Ye=j.forwardRef(({className:e,...t},n)=>r.jsx("td",{ref:n,className:Ve("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Ye.displayName="TableCell";const Ige=j.forwardRef(({className:e,...t},n)=>r.jsx("caption",{ref:n,className:Ve("mt-4 text-sm text-muted-foreground",e),...t}));Ige.displayName="TableCaption";function Lge(){const[,e]=Jr(),{toast:t}=ft(),n=pn(),[s,i]=j.useState(null),[a,o]=j.useState(""),[l,c]=j.useState(null),[d,h]=j.useState(null),[m,f]=j.useState(!1),[g,x]=j.useState({name:"",minDistance:"",maxDistance:"",baseFee:"",perKmRate:"",isActive:!0}),[p,y]=j.useState("pending"),[b,w]=j.useState(!1),[N,S]=j.useState(!1),[P,C]=j.useState({fullName:"",email:"",currentPassword:"",newPassword:"",confirmPassword:""}),[k,O]=j.useState([]);j.useEffect(()=>{const X=localStorage.getItem("adminUser");if(!X){e("/admin/login");return}c(JSON.parse(X))},[e]);const{data:I=[],isLoading:T}=Re({queryKey:["/api/admin/users"],enabled:!!l}),{data:E=[],isLoading:D}=Re({queryKey:["/api/admin/users/pending"],enabled:!!l}),{data:B=[],isLoading:M}=Re({queryKey:["/api/delivery-zones"],enabled:!!l}),{data:U=[],isLoading:H}=Re({queryKey:["/api/delivery-partners"],enabled:!!l}),{data:K=[],isLoading:W}=Re({queryKey:["/api/products"],enabled:!!l}),{data:V}=Re({queryKey:["/api/admin/profile",l==null?void 0:l.id],enabled:!!(l!=null&&l.id)}),z=pt({mutationFn:async X=>await Bt(`/api/admin/users/${X}/approve`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:l.id})}),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/admin/users"]}),n.invalidateQueries({queryKey:["/api/admin/users/pending"]}),t({title:"User approved",description:"The shopkeeper account has been approved successfully."})},onError:()=>{t({title:"Approval failed",description:"Failed to approve user. Please try again.",variant:"destructive"})}}),q=pt({mutationFn:async({userId:X,reason:Ce})=>await Bt(`/api/admin/users/${X}/reject`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:l.id,reason:Ce})}),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/admin/users"]}),n.invalidateQueries({queryKey:["/api/admin/users/pending"]}),i(null),o(""),t({title:"User rejected",description:"The shopkeeper application has been rejected."})},onError:()=>{t({title:"Rejection failed",description:"Failed to reject user. Please try again.",variant:"destructive"})}}),J=pt({mutationFn:async X=>await Bt("/api/admin/delivery-zones",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...X,adminId:l.id})}),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/delivery-zones"]}),f(!1),x({name:"",minDistance:"",maxDistance:"",baseFee:"",perKmRate:"",isActive:!0}),t({title:"Zone created",description:"Delivery zone has been created successfully."})},onError:()=>{t({title:"Creation failed",description:"Failed to create delivery zone.",variant:"destructive"})}}),pe=pt({mutationFn:async({id:X,data:Ce})=>await Bt(`/api/admin/delivery-zones/${X}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...Ce,adminId:l.id})}),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/delivery-zones"]}),h(null),t({title:"Zone updated",description:"Delivery zone has been updated successfully."})},onError:()=>{t({title:"Update failed",description:"Failed to update delivery zone.",variant:"destructive"})}}),ye=pt({mutationFn:async X=>await Bt(`/api/admin/delivery-zones/${X}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:l.id})}),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/delivery-zones"]}),t({title:"Zone deleted",description:"Delivery zone has been deleted successfully."})},onError:()=>{t({title:"Deletion failed",description:"Failed to delete delivery zone.",variant:"destructive"})}}),Ne=pt({mutationFn:async X=>await Bt(`/api/delivery-partners/${X}/approve`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:l.id})}),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/delivery-partners"]}),t({title:"Partner approved",description:"Delivery partner has been approved successfully."})},onError:()=>{t({title:"Approval failed",description:"Failed to approve delivery partner. Please try again.",variant:"destructive"})}}),ke=pt({mutationFn:async({partnerId:X,reason:Ce})=>await Bt(`/api/delivery-partners/${X}/reject`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:l.id,reason:Ce})}),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/delivery-partners"]}),t({title:"Partner rejected",description:"Delivery partner application has been rejected."})},onError:()=>{t({title:"Rejection failed",description:"Failed to reject delivery partner. Please try again.",variant:"destructive"})}}),Ee=pt({mutationFn:async X=>await Bt(`/api/admin/profile/${l.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(X)}),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/admin/profile",l.id]}),w(!1),C({fullName:"",email:"",currentPassword:"",newPassword:"",confirmPassword:""}),t({title:"Profile updated",description:"Admin profile has been updated successfully."})},onError:()=>{t({title:"Update failed",description:"Failed to update profile. Please try again.",variant:"destructive"})}}),We=pt({mutationFn:async X=>await Bt("/api/admin/change-password",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:l.id,...X})}),onSuccess:()=>{S(!1),C({fullName:"",email:"",currentPassword:"",newPassword:"",confirmPassword:""}),t({title:"Password changed",description:"Admin password has been changed successfully."})},onError:()=>{t({title:"Password change failed",description:"Failed to change password. Please check your current password.",variant:"destructive"})}}),Se=pt({mutationFn:async X=>await Bt(`/api/admin/products/${X}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:l.id})}),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/products"]}),t({title:"Product deleted",description:"Product has been deleted successfully."})},onError:()=>{t({title:"Deletion failed",description:"Failed to delete product. Please try again.",variant:"destructive"})}}),Me=pt({mutationFn:async X=>await Bt("/api/admin/products/bulk-delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productIds:X,adminId:l.id})}),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/products"]}),O([]),t({title:"Products deleted",description:"Selected products have been deleted successfully."})},onError:()=>{t({title:"Bulk deletion failed",description:"Failed to delete selected products. Please try again.",variant:"destructive"})}}),Ie=()=>{localStorage.removeItem("adminUser"),e("/admin/login"),t({title:"Logged out",description:"You have been logged out successfully."})},$=X=>{switch(X){case"active":return r.jsxs(le,{variant:"default",className:"bg-green-100 text-green-800",children:[r.jsx(wt,{className:"h-3 w-3 mr-1"}),"Active"]});case"pending":return r.jsxs(le,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:[r.jsx(gt,{className:"h-3 w-3 mr-1"}),"Pending"]});case"rejected":return r.jsxs(le,{variant:"destructive",children:[r.jsx(Ys,{className:"h-3 w-3 mr-1"}),"Rejected"]});default:return r.jsx(le,{variant:"outline",children:X})}},ee=X=>new Date(X).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return l?r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white shadow-sm border-b",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex justify-between items-center py-4",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(qp,{className:"h-8 w-8 text-blue-600 mr-3"}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Panel"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Siraha Bazaar Administration"})]})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("span",{className:"text-sm text-gray-600",children:["Welcome, ",l.fullName]}),r.jsxs(Ir,{open:b,onOpenChange:w,children:[r.jsx(Ns,{asChild:!0,children:r.jsxs(F,{variant:"outline",size:"sm",children:[r.jsx(Rd,{className:"h-4 w-4 mr-2"}),"Settings"]})}),r.jsxs(Tr,{children:[r.jsxs(Ar,{children:[r.jsx(Er,{children:"Admin Profile Settings"}),r.jsx(Ss,{children:"Update your admin profile information"})]}),r.jsxs("div",{className:"grid gap-4 py-4",children:[r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(be,{htmlFor:"admin-name",className:"text-right",children:"Full Name"}),r.jsx(he,{id:"admin-name",value:P.fullName||(V==null?void 0:V.fullName)||"",onChange:X=>C({...P,fullName:X.target.value}),className:"col-span-3"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(be,{htmlFor:"admin-email",className:"text-right",children:"Email"}),r.jsx(he,{id:"admin-email",type:"email",value:P.email||(V==null?void 0:V.email)||"",onChange:X=>C({...P,email:X.target.value}),className:"col-span-3"})]})]}),r.jsxs(go,{children:[r.jsx(F,{variant:"outline",onClick:()=>w(!1),children:"Cancel"}),r.jsxs(F,{onClick:()=>Ee.mutate(P),disabled:Ee.isPending,children:[r.jsx(t1,{className:"h-4 w-4 mr-2"}),"Update Profile"]})]})]})]}),r.jsxs(Ir,{open:N,onOpenChange:S,children:[r.jsx(Ns,{asChild:!0,children:r.jsxs(F,{variant:"outline",size:"sm",children:[r.jsx($_,{className:"h-4 w-4 mr-2"}),"Change Password"]})}),r.jsxs(Tr,{children:[r.jsxs(Ar,{children:[r.jsx(Er,{children:"Change Admin Password"}),r.jsx(Ss,{children:"Enter your current password and choose a new one"})]}),r.jsxs("div",{className:"grid gap-4 py-4",children:[r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(be,{htmlFor:"current-password",className:"text-right",children:"Current Password"}),r.jsx(he,{id:"current-password",type:"password",value:P.currentPassword,onChange:X=>C({...P,currentPassword:X.target.value}),className:"col-span-3"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(be,{htmlFor:"new-password",className:"text-right",children:"New Password"}),r.jsx(he,{id:"new-password",type:"password",value:P.newPassword,onChange:X=>C({...P,newPassword:X.target.value}),className:"col-span-3"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(be,{htmlFor:"confirm-password",className:"text-right",children:"Confirm Password"}),r.jsx(he,{id:"confirm-password",type:"password",value:P.confirmPassword,onChange:X=>C({...P,confirmPassword:X.target.value}),className:"col-span-3"})]})]}),r.jsxs(go,{children:[r.jsx(F,{variant:"outline",onClick:()=>S(!1),children:"Cancel"}),r.jsxs(F,{onClick:()=>{if(P.newPassword!==P.confirmPassword){t({title:"Password mismatch",description:"New password and confirm password don't match.",variant:"destructive"});return}We.mutate({currentPassword:P.currentPassword,newPassword:P.newPassword})},disabled:We.isPending||!P.currentPassword||!P.newPassword,children:[r.jsx($_,{className:"h-4 w-4 mr-2"}),"Change Password"]})]})]})]}),r.jsx(F,{variant:"outline",onClick:Ie,children:"Logout"})]})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[r.jsx(G,{children:r.jsx(Z,{className:"p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(vd,{className:"h-8 w-8 text-blue-600"}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:I.length})]})]})})}),r.jsx(G,{children:r.jsx(Z,{className:"p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(gt,{className:"h-8 w-8 text-yellow-600"}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Approval"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:E.length})]})]})})}),r.jsx(G,{children:r.jsx(Z,{className:"p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(z_,{className:"h-8 w-8 text-green-600"}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Shopkeepers"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:I.filter(X=>X.role==="shopkeeper"&&X.status==="active").length})]})]})})}),r.jsx(G,{children:r.jsx(Z,{className:"p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(nr,{className:"h-8 w-8 text-purple-600"}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Customers"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:I.filter(X=>X.role==="customer").length})]})]})})})]}),E.length>0&&r.jsxs(ri,{className:"mb-6",children:[r.jsx(wr,{className:"h-4 w-4"}),r.jsxs(ni,{children:["You have ",E.length," pending shopkeeper application",E.length>1?"s":""," waiting for approval."]})]}),r.jsxs("div",{className:"flex gap-6",children:[r.jsx("div",{className:"w-64 bg-white shadow-sm rounded-lg p-4 h-fit",children:r.jsxs("nav",{className:"space-y-2",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Admin Navigation"}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("button",{onClick:()=>y("pending"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors ${p==="pending"?"bg-blue-100 text-blue-700 border-l-4 border-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:[r.jsx(gt,{className:"h-4 w-4"}),"Pending Approvals",E.length>0&&r.jsx(le,{variant:"secondary",className:"ml-auto",children:E.length})]}),r.jsxs("button",{onClick:()=>y("delivery-partners"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors ${p==="delivery-partners"?"bg-green-100 text-green-700 border-l-4 border-green-700":"text-gray-600 hover:bg-gray-100"}`,children:[r.jsx(kt,{className:"h-4 w-4"}),"Delivery Partners",U.filter(X=>X.status==="pending").length>0&&r.jsx(le,{variant:"secondary",className:"ml-auto bg-orange-100 text-orange-800",children:U.filter(X=>X.status==="pending").length})]}),r.jsxs("button",{onClick:()=>y("all"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors ${p==="all"?"bg-purple-100 text-purple-700 border-l-4 border-purple-700":"text-gray-600 hover:bg-gray-100"}`,children:[r.jsx(vd,{className:"h-4 w-4"}),"All Users",r.jsx(le,{variant:"outline",className:"ml-auto",children:I.length})]}),r.jsxs("button",{onClick:()=>y("products"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors ${p==="products"?"bg-orange-100 text-orange-700 border-l-4 border-orange-700":"text-gray-600 hover:bg-gray-100"}`,children:[r.jsx(rt,{className:"h-4 w-4"}),"Products",r.jsx(le,{variant:"outline",className:"ml-auto",children:K.length})]}),r.jsxs("button",{onClick:()=>y("delivery-zones"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors ${p==="delivery-zones"?"bg-indigo-100 text-indigo-700 border-l-4 border-indigo-700":"text-gray-600 hover:bg-gray-100"}`,children:[r.jsx(Le,{className:"h-4 w-4"}),"Delivery Zones",r.jsx(le,{variant:"outline",className:"ml-auto",children:B.length})]})]})]})}),r.jsx("div",{className:"flex-1",children:r.jsxs(oi,{value:p,className:"space-y-6",children:[r.jsx("div",{className:"hidden",children:r.jsxs(Ds,{children:[r.jsx(ht,{value:"pending",children:"Pending Approvals"}),r.jsx(ht,{value:"all",children:"All Users"}),r.jsx(ht,{value:"delivery-partners",children:"Delivery Partners"}),r.jsx(ht,{value:"products",children:"Products"}),r.jsx(ht,{value:"delivery-zones",children:"Delivery Zones"})]})}),r.jsx(tt,{value:"pending",children:r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:"Pending Shopkeeper Applications"})}),r.jsx(Z,{children:D?r.jsx("div",{className:"text-center py-8",children:"Loading..."}):E.length===0?r.jsx("div",{className:"text-center py-8 text-gray-500",children:"No pending applications"}):r.jsxs(wi,{children:[r.jsx(Ni,{children:r.jsxs(Vr,{children:[r.jsx(Ze,{children:"Name"}),r.jsx(Ze,{children:"Email"}),r.jsx(Ze,{children:"Phone"}),r.jsx(Ze,{children:"Applied Date"}),r.jsx(Ze,{children:"Actions"})]})}),r.jsx(Si,{children:E.map(X=>r.jsxs(Vr,{children:[r.jsx(Ye,{className:"font-medium",children:X.fullName}),r.jsx(Ye,{children:X.email}),r.jsx(Ye,{children:X.phone}),r.jsx(Ye,{children:ee(X.createdAt)}),r.jsx(Ye,{children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(F,{size:"sm",onClick:()=>z.mutate(X.id),disabled:z.isPending,children:[r.jsx(z_,{className:"h-4 w-4 mr-1"}),"Approve"]}),r.jsxs(Ir,{children:[r.jsx(Ns,{asChild:!0,children:r.jsxs(F,{size:"sm",variant:"destructive",onClick:()=>i(X),children:[r.jsx(cre,{className:"h-4 w-4 mr-1"}),"Reject"]})}),r.jsxs(Tr,{children:[r.jsxs(Ar,{children:[r.jsx(Er,{children:"Reject Application"}),r.jsxs(Ss,{children:["Are you sure you want to reject ",X.fullName,"'s shopkeeper application?"]})]}),r.jsx("div",{children:r.jsx(Yt,{placeholder:"Enter reason for rejection (optional)",value:a,onChange:Ce=>o(Ce.target.value)})}),r.jsxs(go,{children:[r.jsx(F,{variant:"outline",onClick:()=>{i(null),o("")},children:"Cancel"}),r.jsx(F,{variant:"destructive",onClick:()=>q.mutate({userId:X.id,reason:a}),disabled:q.isPending,children:"Reject Application"})]})]})]})]})})]},X.id))})]})})]})}),r.jsx(tt,{value:"delivery-partners",children:r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3a2 2 0 012-2h4a2 2 0 012 2v4m-6 0V6a2 2 0 012-2h2a2 2 0 012 2v1m-6 0h6m0 0v.5a2 2 0 01-2 2H10a2 2 0 01-2-2V7m8 4l3 3-3 3m-3-3h12"})}),"Delivery Partner Management"]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Review and manage delivery partner applications"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(le,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:[U.filter(X=>X.status==="pending").length," Pending"]}),r.jsxs(le,{variant:"default",className:"bg-green-100 text-green-800",children:[U.filter(X=>X.status==="approved").length," Approved"]})]})]})}),r.jsxs(Z,{children:[H?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{children:"Loading delivery partners..."})]}):r.jsxs(wi,{children:[r.jsx(Ni,{children:r.jsxs(Vr,{children:[r.jsx(Ze,{children:"Partner ID"}),r.jsx(Ze,{children:"User ID"}),r.jsx(Ze,{children:"Vehicle"}),r.jsx(Ze,{children:"License"}),r.jsx(Ze,{children:"Areas"}),r.jsx(Ze,{children:"Status"}),r.jsx(Ze,{children:"Rating"}),r.jsx(Ze,{children:"Total Deliveries"}),r.jsx(Ze,{children:"Earnings"}),r.jsx(Ze,{children:"Actions"})]})}),r.jsx(Si,{children:U.map(X=>r.jsxs(Vr,{children:[r.jsxs(Ye,{className:"font-medium",children:["#",X.id]}),r.jsx(Ye,{children:X.userId}),r.jsx(Ye,{children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:X.vehicleType}),r.jsx("p",{className:"text-sm text-gray-500",children:X.vehicleNumber})]})}),r.jsx(Ye,{children:X.drivingLicense}),r.jsx(Ye,{children:X.deliveryAreas&&X.deliveryAreas.length>0?X.deliveryAreas.join(", "):"Not specified"}),r.jsx(Ye,{children:X.status==="approved"?r.jsxs(le,{variant:"default",className:"bg-green-100 text-green-800",children:[r.jsx(wt,{className:"h-3 w-3 mr-1"}),"Approved"]}):X.status==="pending"?r.jsxs(le,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:[r.jsx(gt,{className:"h-3 w-3 mr-1"}),"Pending"]}):r.jsxs(le,{variant:"destructive",children:[r.jsx(Ys,{className:"h-3 w-3 mr-1"}),X.status]})}),r.jsx(Ye,{children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"font-medium",children:X.rating||"0.00"}),r.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"/5.00"})]})}),r.jsx(Ye,{children:X.totalDeliveries||0}),r.jsxs(Ye,{children:["Rs. ",X.totalEarnings||"0.00"]}),r.jsx(Ye,{children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(F,{size:"sm",variant:"outline",children:[r.jsx(ks,{className:"h-4 w-4 mr-1"}),"View"]}),X.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsxs(F,{size:"sm",onClick:()=>Ne.mutate(X.id),disabled:Ne.isPending,className:"bg-green-600 hover:bg-green-700",children:[r.jsx(wt,{className:"h-4 w-4 mr-1"}),"Approve"]}),r.jsxs(Ir,{children:[r.jsx(Ns,{asChild:!0,children:r.jsxs(F,{size:"sm",variant:"destructive",children:[r.jsx(Ys,{className:"h-4 w-4 mr-1"}),"Reject"]})}),r.jsxs(Tr,{children:[r.jsxs(Ar,{children:[r.jsx(Er,{children:"Reject Delivery Partner"}),r.jsx(Ss,{children:"Are you sure you want to reject this delivery partner application?"})]}),r.jsx("div",{children:r.jsx(Yt,{placeholder:"Enter reason for rejection (optional)",value:a,onChange:Ce=>o(Ce.target.value)})}),r.jsxs(go,{children:[r.jsx(F,{variant:"outline",onClick:()=>o(""),children:"Cancel"}),r.jsx(F,{variant:"destructive",onClick:()=>ke.mutate({partnerId:X.id,reason:a}),disabled:ke.isPending,children:"Reject Application"})]})]})]})]})]})})]},X.id))})]}),U.length===0&&!H&&r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(vd,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsx("p",{children:"No delivery partners found"})]})]})]})}),r.jsx(tt,{value:"all",children:r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:"All Users"})}),r.jsx(Z,{children:T?r.jsx("div",{className:"text-center py-8",children:"Loading..."}):r.jsxs(wi,{children:[r.jsx(Ni,{children:r.jsxs(Vr,{children:[r.jsx(Ze,{children:"Name"}),r.jsx(Ze,{children:"Email"}),r.jsx(Ze,{children:"Role"}),r.jsx(Ze,{children:"Status"}),r.jsx(Ze,{children:"Joined Date"}),r.jsx(Ze,{children:"Actions"})]})}),r.jsx(Si,{children:I.map(X=>r.jsxs(Vr,{children:[r.jsx(Ye,{className:"font-medium",children:X.fullName}),r.jsx(Ye,{children:X.email}),r.jsx(Ye,{children:r.jsx(le,{variant:X.role==="shopkeeper"?"default":"secondary",children:X.role})}),r.jsx(Ye,{children:$(X.status)}),r.jsx(Ye,{children:ee(X.createdAt)}),r.jsx(Ye,{children:r.jsxs(F,{size:"sm",variant:"outline",children:[r.jsx(ks,{className:"h-4 w-4 mr-1"}),"View"]})})]},X.id))})]})})]})}),r.jsx(tt,{value:"products",children:r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(rt,{className:"h-6 w-6 text-orange-600"}),"Product Management"]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage all products across the platform"})]}),r.jsxs("div",{className:"flex gap-2",children:[k.length>0&&r.jsxs(F,{variant:"destructive",onClick:()=>Me.mutate(k),disabled:Me.isPending,children:[r.jsx(Xs,{className:"h-4 w-4 mr-2"}),"Delete Selected (",k.length,")"]}),r.jsxs(le,{variant:"outline",children:[K.length," Total Products"]})]})]})}),r.jsxs(Z,{children:[W?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{children:"Loading products..."})]}):r.jsxs(wi,{children:[r.jsx(Ni,{children:r.jsxs(Vr,{children:[r.jsx(Ze,{className:"w-12",children:r.jsx("input",{type:"checkbox",checked:k.length===K.length&&K.length>0,onChange:X=>{X.target.checked?O(K.map(Ce=>Ce.id)):O([])},className:"rounded"})}),r.jsx(Ze,{children:"Product"}),r.jsx(Ze,{children:"Store"}),r.jsx(Ze,{children:"Category"}),r.jsx(Ze,{children:"Price"}),r.jsx(Ze,{children:"Stock"}),r.jsx(Ze,{children:"Status"}),r.jsx(Ze,{children:"Actions"})]})}),r.jsx(Si,{children:K.map(X=>r.jsxs(Vr,{children:[r.jsx(Ye,{children:r.jsx("input",{type:"checkbox",checked:k.includes(X.id),onChange:Ce=>{Ce.target.checked?O([...k,X.id]):O(k.filter($e=>$e!==X.id))},className:"rounded"})}),r.jsx(Ye,{children:r.jsxs("div",{className:"flex items-center space-x-3",children:[X.imageUrl&&r.jsx("img",{src:X.imageUrl,alt:X.name,className:"w-10 h-10 rounded object-cover"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:X.name}),r.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",X.id]})]})]})}),r.jsx(Ye,{children:X.storeName||"Unknown Store"}),r.jsx(Ye,{children:X.category||"Uncategorized"}),r.jsxs(Ye,{children:["Rs. ",X.price]}),r.jsx(Ye,{children:r.jsx("span",{className:`font-medium ${X.stock<10?"text-red-600":"text-green-600"}`,children:X.stock})}),r.jsx(Ye,{children:X.isActive?r.jsx(le,{variant:"default",className:"bg-green-100 text-green-800",children:"Active"}):r.jsx(le,{variant:"secondary",children:"Inactive"})}),r.jsx(Ye,{children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(F,{size:"sm",variant:"outline",children:[r.jsx(ks,{className:"h-4 w-4 mr-1"}),"View"]}),r.jsxs(Ir,{children:[r.jsx(Ns,{asChild:!0,children:r.jsxs(F,{size:"sm",variant:"destructive",children:[r.jsx(Xs,{className:"h-4 w-4 mr-1"}),"Delete"]})}),r.jsxs(Tr,{children:[r.jsxs(Ar,{children:[r.jsx(Er,{children:"Delete Product"}),r.jsxs(Ss,{children:['Are you sure you want to delete "',X.name,'"? This action cannot be undone.']})]}),r.jsxs(go,{children:[r.jsx(F,{variant:"outline",children:"Cancel"}),r.jsx(F,{variant:"destructive",onClick:()=>Se.mutate(X.id),disabled:Se.isPending,children:"Delete Product"})]})]})]})]})})]},X.id))})]}),K.length===0&&!W&&r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(rt,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsx("p",{children:"No products found"})]})]})]})}),r.jsx(tt,{value:"delivery-zones",children:r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(Le,{className:"h-5 w-5"}),"Delivery Zone Management"]}),r.jsxs(Ir,{open:m,onOpenChange:f,children:[r.jsx(Ns,{asChild:!0,children:r.jsxs(F,{children:[r.jsx(Wt,{className:"h-4 w-4 mr-2"}),"Add Zone"]})}),r.jsxs(Tr,{children:[r.jsxs(Ar,{children:[r.jsx(Er,{children:"Create New Delivery Zone"}),r.jsx(Ss,{children:"Add a new delivery zone with custom pricing."})]}),r.jsxs("div",{className:"grid gap-4 py-4",children:[r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(be,{htmlFor:"name",className:"text-right",children:"Name"}),r.jsx(he,{id:"name",value:g.name,onChange:X=>x({...g,name:X.target.value}),className:"col-span-3",placeholder:"e.g., Inner City"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(be,{htmlFor:"minDistance",className:"text-right",children:"Min Distance (km)"}),r.jsx(he,{id:"minDistance",type:"number",step:"0.01",value:g.minDistance,onChange:X=>x({...g,minDistance:X.target.value}),className:"col-span-3",placeholder:"0"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(be,{htmlFor:"maxDistance",className:"text-right",children:"Max Distance (km)"}),r.jsx(he,{id:"maxDistance",type:"number",step:"0.01",value:g.maxDistance,onChange:X=>x({...g,maxDistance:X.target.value}),className:"col-span-3",placeholder:"5"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(be,{htmlFor:"baseFee",className:"text-right",children:"Base Fee (Rs.)"}),r.jsx(he,{id:"baseFee",type:"number",step:"0.01",value:g.baseFee,onChange:X=>x({...g,baseFee:X.target.value}),className:"col-span-3",placeholder:"30.00"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(be,{htmlFor:"perKmRate",className:"text-right",children:"Per km Rate (Rs.)"}),r.jsx(he,{id:"perKmRate",type:"number",step:"0.01",value:g.perKmRate,onChange:X=>x({...g,perKmRate:X.target.value}),className:"col-span-3",placeholder:"5.00"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(jn,{id:"isActive",checked:g.isActive,onCheckedChange:X=>x({...g,isActive:X})}),r.jsx(be,{htmlFor:"isActive",children:"Active Zone"})]})]}),r.jsxs(go,{children:[r.jsx(F,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),r.jsxs(F,{onClick:()=>J.mutate(g),disabled:J.isPending,children:[r.jsx(t1,{className:"h-4 w-4 mr-2"}),"Create Zone"]})]})]})]})]})}),r.jsxs(Z,{children:[M?r.jsx("div",{className:"text-center py-8",children:"Loading delivery zones..."}):r.jsxs(wi,{children:[r.jsx(Ni,{children:r.jsxs(Vr,{children:[r.jsx(Ze,{children:"Zone Name"}),r.jsx(Ze,{children:"Distance Range"}),r.jsx(Ze,{children:"Base Fee"}),r.jsx(Ze,{children:"Per Km Rate"}),r.jsx(Ze,{children:"Status"}),r.jsx(Ze,{children:"Sample Fee (10km)"}),r.jsx(Ze,{children:"Actions"})]})}),r.jsx(Si,{children:B.map(X=>r.jsxs(Vr,{children:[r.jsx(Ye,{className:"font-medium",children:X.name}),r.jsxs(Ye,{children:[X.minDistance," - ",X.maxDistance," km"]}),r.jsxs(Ye,{children:["Rs. ",X.baseFee]}),r.jsxs(Ye,{children:["Rs. ",X.perKmRate,"/km"]}),r.jsx(Ye,{children:X.isActive?r.jsxs(le,{variant:"default",className:"bg-green-100 text-green-800",children:[r.jsx(wt,{className:"h-3 w-3 mr-1"}),"Active"]}):r.jsx(le,{variant:"secondary",children:"Inactive"})}),r.jsxs(Ye,{children:["Rs. ",(parseFloat(X.baseFee)+10*parseFloat(X.perKmRate)).toFixed(2)]}),r.jsx(Ye,{children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(Ir,{children:[r.jsx(Ns,{asChild:!0,children:r.jsxs(F,{size:"sm",variant:"outline",onClick:()=>h({...X}),children:[r.jsx(us,{className:"h-4 w-4 mr-1"}),"Edit"]})}),r.jsxs(Tr,{children:[r.jsxs(Ar,{children:[r.jsx(Er,{children:"Edit Delivery Zone"}),r.jsx(Ss,{children:"Modify the delivery zone pricing and settings."})]}),d&&r.jsxs("div",{className:"grid gap-4 py-4",children:[r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(be,{htmlFor:"edit-name",className:"text-right",children:"Name"}),r.jsx(he,{id:"edit-name",value:d.name,onChange:Ce=>h({...d,name:Ce.target.value}),className:"col-span-3"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(be,{htmlFor:"edit-minDistance",className:"text-right",children:"Min Distance (km)"}),r.jsx(he,{id:"edit-minDistance",type:"number",step:"0.01",value:d.minDistance,onChange:Ce=>h({...d,minDistance:Ce.target.value}),className:"col-span-3"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(be,{htmlFor:"edit-maxDistance",className:"text-right",children:"Max Distance (km)"}),r.jsx(he,{id:"edit-maxDistance",type:"number",step:"0.01",value:d.maxDistance,onChange:Ce=>h({...d,maxDistance:Ce.target.value}),className:"col-span-3"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(be,{htmlFor:"edit-baseFee",className:"text-right",children:"Base Fee (Rs.)"}),r.jsx(he,{id:"edit-baseFee",type:"number",step:"0.01",value:d.baseFee,onChange:Ce=>h({...d,baseFee:Ce.target.value}),className:"col-span-3"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(be,{htmlFor:"edit-perKmRate",className:"text-right",children:"Per km Rate (Rs.)"}),r.jsx(he,{id:"edit-perKmRate",type:"number",step:"0.01",value:d.perKmRate,onChange:Ce=>h({...d,perKmRate:Ce.target.value}),className:"col-span-3"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(jn,{id:"edit-isActive",checked:d.isActive,onCheckedChange:Ce=>h({...d,isActive:Ce})}),r.jsx(be,{htmlFor:"edit-isActive",children:"Active Zone"})]})]}),r.jsxs(go,{children:[r.jsx(F,{variant:"outline",onClick:()=>h(null),children:"Cancel"}),r.jsxs(F,{onClick:()=>pe.mutate({id:d.id,data:d}),disabled:pe.isPending,children:[r.jsx(t1,{className:"h-4 w-4 mr-2"}),"Update Zone"]})]})]})]}),r.jsxs(F,{size:"sm",variant:"destructive",onClick:()=>ye.mutate(X.id),disabled:ye.isPending,children:[r.jsx(Xs,{className:"h-4 w-4 mr-1"}),"Delete"]})]})})]},X.id))})]}),r.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Delivery Fee Calculator Preview"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:B.filter(X=>X.isActive).map(X=>r.jsxs("div",{className:"bg-white p-3 rounded border",children:[r.jsx("h4",{className:"font-medium text-sm",children:X.name}),r.jsxs("p",{className:"text-xs text-gray-600",children:[X.minDistance,"-",X.maxDistance,"km"]}),r.jsxs("div",{className:"mt-2 space-y-1 text-xs",children:[r.jsxs("div",{children:["5km: Rs. ",(parseFloat(X.baseFee)+5*parseFloat(X.perKmRate)).toFixed(2)]}),r.jsxs("div",{children:["10km: Rs. ",(parseFloat(X.baseFee)+10*parseFloat(X.perKmRate)).toFixed(2)]}),r.jsxs("div",{children:["15km: Rs. ",(parseFloat(X.baseFee)+15*parseFloat(X.perKmRate)).toFixed(2)]})]})]},X.id))})]})]})]})})]})})]})]})]}):null}const Rge=te.object({email:te.string().email("Please enter a valid email address"),password:te.string().min(1,"Password is required")});function $ge(){const[,e]=Jr(),{toast:t}=ft(),[n,s]=j.useState(""),i=an({resolver:on(Rge),defaultValues:{email:"",password:""}}),a=pt({mutationFn:async l=>await(await Bt("/api/admin/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})).json(),onSuccess:l=>{localStorage.setItem("adminUser",JSON.stringify(l.admin)),t({title:"Login successful",description:"Welcome to the admin panel"}),e("/admin/dashboard")},onError:l=>{s(l.message||"Login failed"),t({title:"Login failed",description:"Please check your credentials and try again",variant:"destructive"})}}),o=l=>{s(""),a.mutate(l)};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center px-4",children:r.jsxs(G,{className:"w-full max-w-md",children:[r.jsxs(se,{className:"text-center",children:[r.jsx("div",{className:"mx-auto mb-4 w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center",children:r.jsx(qp,{className:"h-6 w-6 text-white"})}),r.jsx(ie,{className:"text-2xl font-bold",children:"Admin Login"}),r.jsx(Ct,{children:"Access the Siraha Bazaar administration panel"})]}),r.jsxs(Z,{children:[r.jsx(Or,{...i,children:r.jsxs("form",{onSubmit:i.handleSubmit(o),className:"space-y-4",children:[n&&r.jsx(ri,{variant:"destructive",children:r.jsx(ni,{children:n})}),r.jsx(oe,{control:i.control,name:"email",render:({field:l})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Email Address"}),r.jsx(me,{children:r.jsxs("div",{className:"relative",children:[r.jsx(Wr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),r.jsx(he,{...l,type:"email",placeholder:"sirahabazzar@gmail.com",className:"pl-10",disabled:a.isPending})]})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:i.control,name:"password",render:({field:l})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Password"}),r.jsx(me,{children:r.jsxs("div",{className:"relative",children:[r.jsx(Yte,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),r.jsx(he,{...l,type:"password",placeholder:"Enter your password",className:"pl-10",disabled:a.isPending})]})}),r.jsx(fe,{})]})}),r.jsx(F,{type:"submit",className:"w-full",disabled:a.isPending,children:a.isPending?"Signing in...":"Sign In"})]})}),r.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-sm mb-2",children:"Default Admin Credentials:"}),r.jsx("p",{className:"text-xs text-gray-600",children:"Email: sirahabazzar@gmail.com"}),r.jsx("p",{className:"text-xs text-gray-600",children:"Password: admin123"})]})]})]})})}var tA="Progress",rA=100,[Fge,qUe]=xn(tA),[zge,Bge]=Fge(tA),uW=j.forwardRef((e,t)=>{const{__scopeProgress:n,value:s=null,max:i,getValueLabel:a=Vge,...o}=e;(i||i===0)&&!YD(i)&&console.error(Uge(`${i}`,"Progress"));const l=YD(i)?i:rA;s!==null&&!XD(s,l)&&console.error(Wge(`${s}`,"Progress"));const c=XD(s,l)?s:null,d=q0(c)?a(c,l):void 0;return r.jsx(zge,{scope:n,value:c,max:l,children:r.jsx(Qe.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":q0(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":fW(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});uW.displayName=tA;var hW="ProgressIndicator",mW=j.forwardRef((e,t)=>{const{__scopeProgress:n,...s}=e,i=Bge(hW,n);return r.jsx(Qe.div,{"data-state":fW(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...s,ref:t})});mW.displayName=hW;function Vge(e,t){return`${Math.round(e/t*100)}%`}function fW(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function q0(e){return typeof e=="number"}function YD(e){return q0(e)&&!isNaN(e)&&e>0}function XD(e,t){return q0(e)&&!isNaN(e)&&e<=t&&e>=0}function Uge(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${rA}\`.`}function Wge(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${rA} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var pW=uW,Hge=mW;const bd=j.forwardRef(({className:e,value:t,...n},s)=>r.jsx(pW,{ref:s,className:Ve("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:r.jsx(Hge,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));bd.displayName=pW.displayName;var xW="AlertDialog",[qge,KUe]=xn(xW,[uU]),nl=uU(),gW=e=>{const{__scopeAlertDialog:t,...n}=e,s=nl(t);return r.jsx(AT,{...s,...n,modal:!0})};gW.displayName=xW;var Kge="AlertDialogTrigger",vW=j.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,i=nl(n);return r.jsx(ET,{...i,...s,ref:t})});vW.displayName=Kge;var Gge="AlertDialogPortal",yW=e=>{const{__scopeAlertDialog:t,...n}=e,s=nl(t);return r.jsx(OT,{...s,...n})};yW.displayName=Gge;var Zge="AlertDialogOverlay",jW=j.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,i=nl(n);return r.jsx(Ng,{...i,...s,ref:t})});jW.displayName=Zge;var mh="AlertDialogContent",[Yge,Xge]=qge(mh),Qge=c8("AlertDialogContent"),bW=j.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:s,...i}=e,a=nl(n),o=j.useRef(null),l=St(t,o),c=j.useRef(null);return r.jsx(wme,{contentName:mh,titleName:wW,docsSlug:"alert-dialog",children:r.jsx(Yge,{scope:n,cancelRef:c,children:r.jsxs(Sg,{role:"alertdialog",...a,...i,ref:l,onOpenAutoFocus:Fe(i.onOpenAutoFocus,d=>{var h;d.preventDefault(),(h=c.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[r.jsx(Qge,{children:s}),r.jsx(eve,{contentRef:o})]})})})});bW.displayName=mh;var wW="AlertDialogTitle",NW=j.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,i=nl(n);return r.jsx(_g,{...i,...s,ref:t})});NW.displayName=wW;var SW="AlertDialogDescription",_W=j.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,i=nl(n);return r.jsx(Pg,{...i,...s,ref:t})});_W.displayName=SW;var Jge="AlertDialogAction",PW=j.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,i=nl(n);return r.jsx(Wb,{...i,...s,ref:t})});PW.displayName=Jge;var CW="AlertDialogCancel",kW=j.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,{cancelRef:i}=Xge(CW,n),a=nl(n),o=St(t,i);return r.jsx(Wb,{...a,...s,ref:o})});kW.displayName=CW;var eve=({contentRef:e})=>{const t=`\`${mh}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${mh}\` by passing a \`${SW}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${mh}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return j.useEffect(()=>{var s;document.getElementById((s=e.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},tve=gW,rve=vW,nve=yW,TW=jW,AW=bW,EW=PW,OW=kW,MW=NW,DW=_W;const QD=tve,JD=rve,sve=nve,IW=j.forwardRef(({className:e,...t},n)=>r.jsx(TW,{className:Ve("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));IW.displayName=TW.displayName;const _2=j.forwardRef(({className:e,...t},n)=>r.jsxs(sve,{children:[r.jsx(IW,{}),r.jsx(AW,{ref:n,className:Ve("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));_2.displayName=AW.displayName;const P2=({className:e,...t})=>r.jsx("div",{className:Ve("flex flex-col space-y-2 text-center sm:text-left",e),...t});P2.displayName="AlertDialogHeader";const C2=({className:e,...t})=>r.jsx("div",{className:Ve("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});C2.displayName="AlertDialogFooter";const k2=j.forwardRef(({className:e,...t},n)=>r.jsx(MW,{ref:n,className:Ve("text-lg font-semibold",e),...t}));k2.displayName=MW.displayName;const T2=j.forwardRef(({className:e,...t},n)=>r.jsx(DW,{ref:n,className:Ve("text-sm text-muted-foreground",e),...t}));T2.displayName=DW.displayName;const A2=j.forwardRef(({className:e,...t},n)=>r.jsx(EW,{ref:n,className:Ve(Uk(),e),...t}));A2.displayName=EW.displayName;const E2=j.forwardRef(({className:e,...t},n)=>r.jsx(OW,{ref:n,className:Ve(Uk({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));E2.displayName=OW.displayName;function ive(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...s)=>e(...s);return new Proxy(n,{get:(s,i)=>i==="create"?e:(t.has(i)||t.set(i,e(i)),t.get(i))})}function nw(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const O2=e=>Array.isArray(e);function LW(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let s=0;s<n;s++)if(t[s]!==e[s])return!1;return!0}function vx(e){return typeof e=="string"||Array.isArray(e)}function eI(e){const t=[{},{}];return e==null||e.values.forEach((n,s)=>{t[0][s]=n.get(),t[1][s]=n.getVelocity()}),t}function nA(e,t,n,s){if(typeof t=="function"){const[i,a]=eI(s);t=t(n!==void 0?n:e.custom,i,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,a]=eI(s);t=t(n!==void 0?n:e.custom,i,a)}return t}function sw(e,t,n){const s=e.getProps();return nA(s,t,n!==void 0?n:s.custom,e)}const sA=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],iA=["initial",...sA],Dg=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],iu=new Set(Dg),Mo=e=>e*1e3,Do=e=>e/1e3,ave={type:"spring",stiffness:500,damping:25,restSpeed:10},ove=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),lve={type:"keyframes",duration:.8},cve={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},dve=(e,{keyframes:t})=>t.length>2?lve:iu.has(e)?e.startsWith("scale")?ove(t[1]):ave:cve;function aA(e,t){return e?e[t]||e.default||e:void 0}const uve={skipAnimations:!1,useManualTiming:!1},hve=e=>e!==null;function iw(e,{repeat:t,repeatType:n="loop"},s){const i=e.filter(hve),a=t&&n!=="loop"&&t%2===1?0:i.length-1;return!a||s===void 0?i[a]:s}const ts=e=>e;let M2=ts;function mve(e){let t=new Set,n=new Set,s=!1,i=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(d){a.has(d)&&(c.schedule(d),e()),d(o)}const c={schedule:(d,h=!1,m=!1)=>{const g=m&&s?t:n;return h&&a.add(d),g.has(d)||g.add(d),d},cancel:d=>{n.delete(d),a.delete(d)},process:d=>{if(o=d,s){i=!0;return}s=!0,[t,n]=[n,t],n.clear(),t.forEach(l),s=!1,i&&(i=!1,c.process(d))}};return c}const Wv=["read","resolveKeyframes","update","preRender","render","postRender"],fve=40;function RW(e,t){let n=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,o=Wv.reduce((b,w)=>(b[w]=mve(a),b),{}),{read:l,resolveKeyframes:c,update:d,preRender:h,render:m,postRender:f}=o,g=()=>{const b=performance.now();n=!1,i.delta=s?1e3/60:Math.max(Math.min(b-i.timestamp,fve),1),i.timestamp=b,i.isProcessing=!0,l.process(i),c.process(i),d.process(i),h.process(i),m.process(i),f.process(i),i.isProcessing=!1,n&&t&&(s=!1,e(g))},x=()=>{n=!0,s=!0,i.isProcessing||e(g)};return{schedule:Wv.reduce((b,w)=>{const N=o[w];return b[w]=(S,P=!1,C=!1)=>(n||x(),N.schedule(S,P,C)),b},{}),cancel:b=>{for(let w=0;w<Wv.length;w++)o[Wv[w]].cancel(b)},state:i,steps:o}}const{schedule:xr,cancel:gc,state:$n,steps:L1}=RW(typeof requestAnimationFrame<"u"?requestAnimationFrame:ts,!0),$W=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,pve=1e-7,xve=12;function gve(e,t,n,s,i){let a,o,l=0;do o=t+(n-t)/2,a=$W(o,s,i)-e,a>0?n=o:t=o;while(Math.abs(a)>pve&&++l<xve);return o}function Ig(e,t,n,s){if(e===t&&n===s)return ts;const i=a=>gve(a,0,1,e,n);return a=>a===0||a===1?a:$W(i(a),t,s)}const FW=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,zW=e=>t=>1-e(1-t),BW=Ig(.33,1.53,.69,.99),oA=zW(BW),VW=FW(oA),UW=e=>(e*=2)<1?.5*oA(e):.5*(2-Math.pow(2,-10*(e-1))),lA=e=>1-Math.sin(Math.acos(e)),WW=zW(lA),HW=FW(lA),qW=e=>/^0[^.\s]+$/u.test(e);function vve(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||qW(e):!0}const KW=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),GW=e=>t=>typeof t=="string"&&t.startsWith(e),ZW=GW("--"),yve=GW("var(--"),cA=e=>yve(e)?jve.test(e.split("/*")[0].trim()):!1,jve=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,bve=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function wve(e){const t=bve.exec(e);if(!t)return[,];const[,n,s,i]=t;return[`--${n??s}`,i]}function YW(e,t,n=1){const[s,i]=wve(e);if(!s)return;const a=window.getComputedStyle(t).getPropertyValue(s);if(a){const o=a.trim();return KW(o)?parseFloat(o):o}return cA(i)?YW(i,t,n+1):i}const Yo=(e,t,n)=>n>t?t:n<e?e:n,zm={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},yx={...zm,transform:e=>Yo(0,1,e)},Hv={...zm,default:1},Lg=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),pl=Lg("deg"),Ba=Lg("%"),yt=Lg("px"),Nve=Lg("vh"),Sve=Lg("vw"),tI={...Ba,parse:e=>Ba.parse(e)/100,transform:e=>Ba.transform(e*100)},_ve=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),rI=e=>e===zm||e===yt,nI=(e,t)=>parseFloat(e.split(", ")[t]),sI=(e,t)=>(n,{transform:s})=>{if(s==="none"||!s)return 0;const i=s.match(/^matrix3d\((.+)\)$/u);if(i)return nI(i[1],t);{const a=s.match(/^matrix\((.+)\)$/u);return a?nI(a[1],e):0}},Pve=new Set(["x","y","z"]),Cve=Dg.filter(e=>!Pve.has(e));function kve(e){const t=[];return Cve.forEach(n=>{const s=e.getValue(n);s!==void 0&&(t.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),t}const Zh={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:sI(4,13),y:sI(5,14)};Zh.translateX=Zh.x;Zh.translateY=Zh.y;const XW=e=>t=>t.test(e),Tve={test:e=>e==="auto",parse:e=>e},QW=[zm,yt,Ba,pl,Sve,Nve,Tve],iI=e=>QW.find(XW(e)),wd=new Set;let D2=!1,I2=!1;function JW(){if(I2){const e=Array.from(wd).filter(s=>s.needsMeasurement),t=new Set(e.map(s=>s.element)),n=new Map;t.forEach(s=>{const i=kve(s);i.length&&(n.set(s,i),s.render())}),e.forEach(s=>s.measureInitialState()),t.forEach(s=>{s.render();const i=n.get(s);i&&i.forEach(([a,o])=>{var l;(l=s.getValue(a))===null||l===void 0||l.set(o)})}),e.forEach(s=>s.measureEndState()),e.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}I2=!1,D2=!1,wd.forEach(e=>e.complete()),wd.clear()}function eH(){wd.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(I2=!0)})}function Ave(){eH(),JW()}class dA{constructor(t,n,s,i,a,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=s,this.motionValue=i,this.element=a,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(wd.add(this),D2||(D2=!0,xr.read(eH),xr.resolveKeyframes(JW))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:s,motionValue:i}=this;for(let a=0;a<t.length;a++)if(t[a]===null)if(a===0){const o=i==null?void 0:i.get(),l=t[t.length-1];if(o!==void 0)t[0]=o;else if(s&&n){const c=s.readValue(n,l);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=l),i&&o===void 0&&i.set(t[0])}else t[a]=t[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),wd.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,wd.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const pp=e=>Math.round(e*1e5)/1e5,uA=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Eve(e){return e==null}const Ove=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,hA=(e,t)=>n=>!!(typeof n=="string"&&Ove.test(n)&&n.startsWith(e)||t&&!Eve(n)&&Object.prototype.hasOwnProperty.call(n,t)),tH=(e,t,n)=>s=>{if(typeof s!="string")return s;const[i,a,o,l]=s.match(uA);return{[e]:parseFloat(i),[t]:parseFloat(a),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},Mve=e=>Yo(0,255,e),R1={...zm,transform:e=>Math.round(Mve(e))},rd={test:hA("rgb","red"),parse:tH("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:s=1})=>"rgba("+R1.transform(e)+", "+R1.transform(t)+", "+R1.transform(n)+", "+pp(yx.transform(s))+")"};function Dve(e){let t="",n="",s="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),s=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),s=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,s+=s,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}}const L2={test:hA("#"),parse:Dve,transform:rd.transform},Hu={test:hA("hsl","hue"),parse:tH("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:s=1})=>"hsla("+Math.round(e)+", "+Ba.transform(pp(t))+", "+Ba.transform(pp(n))+", "+pp(yx.transform(s))+")"},Gn={test:e=>rd.test(e)||L2.test(e)||Hu.test(e),parse:e=>rd.test(e)?rd.parse(e):Hu.test(e)?Hu.parse(e):L2.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?rd.transform(e):Hu.transform(e)},Ive=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Lve(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(uA))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(Ive))===null||n===void 0?void 0:n.length)||0)>0}const rH="number",nH="color",Rve="var",$ve="var(",aI="${}",Fve=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function jx(e){const t=e.toString(),n=[],s={color:[],number:[],var:[]},i=[];let a=0;const l=t.replace(Fve,c=>(Gn.test(c)?(s.color.push(a),i.push(nH),n.push(Gn.parse(c))):c.startsWith($ve)?(s.var.push(a),i.push(Rve),n.push(c)):(s.number.push(a),i.push(rH),n.push(parseFloat(c))),++a,aI)).split(aI);return{values:n,split:l,indexes:s,types:i}}function sH(e){return jx(e).values}function iH(e){const{split:t,types:n}=jx(e),s=t.length;return i=>{let a="";for(let o=0;o<s;o++)if(a+=t[o],i[o]!==void 0){const l=n[o];l===rH?a+=pp(i[o]):l===nH?a+=Gn.transform(i[o]):a+=i[o]}return a}}const zve=e=>typeof e=="number"?0:e;function Bve(e){const t=sH(e);return iH(e)(t.map(zve))}const vc={test:Lve,parse:sH,createTransformer:iH,getAnimatableNone:Bve},Vve=new Set(["brightness","contrast","saturate","opacity"]);function Uve(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[s]=n.match(uA)||[];if(!s)return e;const i=n.replace(s,"");let a=Vve.has(t)?1:0;return s!==n&&(a*=100),t+"("+a+i+")"}const Wve=/\b([a-z-]*)\(.*?\)/gu,R2={...vc,getAnimatableNone:e=>{const t=e.match(Wve);return t?t.map(Uve).join(" "):e}},Hve={borderWidth:yt,borderTopWidth:yt,borderRightWidth:yt,borderBottomWidth:yt,borderLeftWidth:yt,borderRadius:yt,radius:yt,borderTopLeftRadius:yt,borderTopRightRadius:yt,borderBottomRightRadius:yt,borderBottomLeftRadius:yt,width:yt,maxWidth:yt,height:yt,maxHeight:yt,top:yt,right:yt,bottom:yt,left:yt,padding:yt,paddingTop:yt,paddingRight:yt,paddingBottom:yt,paddingLeft:yt,margin:yt,marginTop:yt,marginRight:yt,marginBottom:yt,marginLeft:yt,backgroundPositionX:yt,backgroundPositionY:yt},qve={rotate:pl,rotateX:pl,rotateY:pl,rotateZ:pl,scale:Hv,scaleX:Hv,scaleY:Hv,scaleZ:Hv,skew:pl,skewX:pl,skewY:pl,distance:yt,translateX:yt,translateY:yt,translateZ:yt,x:yt,y:yt,z:yt,perspective:yt,transformPerspective:yt,opacity:yx,originX:tI,originY:tI,originZ:yt},oI={...zm,transform:Math.round},mA={...Hve,...qve,zIndex:oI,size:yt,fillOpacity:yx,strokeOpacity:yx,numOctaves:oI},Kve={...mA,color:Gn,backgroundColor:Gn,outlineColor:Gn,fill:Gn,stroke:Gn,borderColor:Gn,borderTopColor:Gn,borderRightColor:Gn,borderBottomColor:Gn,borderLeftColor:Gn,filter:R2,WebkitFilter:R2},fA=e=>Kve[e];function aH(e,t){let n=fA(e);return n!==R2&&(n=vc),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Gve=new Set(["auto","none","0"]);function Zve(e,t,n){let s=0,i;for(;s<e.length&&!i;){const a=e[s];typeof a=="string"&&!Gve.has(a)&&jx(a).values.length&&(i=e[s]),s++}if(i&&n)for(const a of t)e[a]=aH(n,i)}class oH extends dA{constructor(t,n,s,i,a){super(t,n,s,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let d=t[c];if(typeof d=="string"&&(d=d.trim(),cA(d))){const h=YW(d,n.current);h!==void 0&&(t[c]=h),c===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!_ve.has(s)||t.length!==2)return;const[i,a]=t,o=iI(i),l=iI(a);if(o!==l)if(rI(o)&&rI(l))for(let c=0;c<t.length;c++){const d=t[c];typeof d=="string"&&(t[c]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,s=[];for(let i=0;i<t.length;i++)vve(t[i])&&s.push(i);s.length&&Zve(t,s,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:s}=this;if(!t||!t.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Zh[s](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(s,i).jump(i,!1)}measureEndState(){var t;const{element:n,name:s,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const a=n.getValue(s);a&&a.jump(this.measuredOrigin,!1);const o=i.length-1,l=i[o];i[o]=Zh[s](n.measureViewportBox(),window.getComputedStyle(n.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([c,d])=>{n.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function pA(e){return typeof e=="function"}let My;function Yve(){My=void 0}const Va={now:()=>(My===void 0&&Va.set($n.isProcessing||uve.useManualTiming?$n.timestamp:performance.now()),My),set:e=>{My=e,queueMicrotask(Yve)}},lI=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(vc.test(e)||e==="0")&&!e.startsWith("url("));function Xve(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function Qve(e,t,n,s){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],o=lI(i,t),l=lI(a,t);return!o||!l?!1:Xve(e)||(n==="spring"||pA(n))&&s}const Jve=40;class lH{constructor({autoplay:t=!0,delay:n=0,type:s="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:o="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Va.now(),this.options={autoplay:t,delay:n,type:s,repeat:i,repeatDelay:a,repeatType:o,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Jve?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Ave(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=Va.now(),this.hasAttemptedResolve=!0;const{name:s,type:i,velocity:a,delay:o,onComplete:l,onUpdate:c,isGenerator:d}=this.options;if(!d&&!Qve(t,s,i,a))if(o)this.options.duration=0;else{c==null||c(iw(t,this.options,n)),l==null||l(),this.resolveFinishedPromise();return}const h=this.initPlayback(t,n);h!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...h},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const Yh=(e,t,n)=>{const s=t-e;return s===0?1:(n-e)/s},cH=(e,t,n=10)=>{let s="";const i=Math.max(Math.round(t/n),2);for(let a=0;a<i;a++)s+=e(Yh(0,i-1,a))+", ";return`linear(${s.substring(0,s.length-2)})`};function dH(e,t){return t?e*(1e3/t):0}const eye=5;function uH(e,t,n){const s=Math.max(t-eye,0);return dH(n-e(s),t-s)}const Yr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},$1=.001;function tye({duration:e=Yr.duration,bounce:t=Yr.bounce,velocity:n=Yr.velocity,mass:s=Yr.mass}){let i,a,o=1-t;o=Yo(Yr.minDamping,Yr.maxDamping,o),e=Yo(Yr.minDuration,Yr.maxDuration,Do(e)),o<1?(i=d=>{const h=d*o,m=h*e,f=h-n,g=$2(d,o),x=Math.exp(-m);return $1-f/g*x},a=d=>{const m=d*o*e,f=m*n+n,g=Math.pow(o,2)*Math.pow(d,2)*e,x=Math.exp(-m),p=$2(Math.pow(d,2),o);return(-i(d)+$1>0?-1:1)*((f-g)*x)/p}):(i=d=>{const h=Math.exp(-d*e),m=(d-n)*e+1;return-$1+h*m},a=d=>{const h=Math.exp(-d*e),m=(n-d)*(e*e);return h*m});const l=5/e,c=nye(i,a,l);if(e=Mo(e),isNaN(c))return{stiffness:Yr.stiffness,damping:Yr.damping,duration:e};{const d=Math.pow(c,2)*s;return{stiffness:d,damping:o*2*Math.sqrt(s*d),duration:e}}}const rye=12;function nye(e,t,n){let s=n;for(let i=1;i<rye;i++)s=s-e(s)/t(s);return s}function $2(e,t){return e*Math.sqrt(1-t*t)}const F2=2e4;function hH(e){let t=0;const n=50;let s=e.next(t);for(;!s.done&&t<F2;)t+=n,s=e.next(t);return t>=F2?1/0:t}const sye=["duration","bounce"],iye=["stiffness","damping","mass"];function cI(e,t){return t.some(n=>e[n]!==void 0)}function aye(e){let t={velocity:Yr.velocity,stiffness:Yr.stiffness,damping:Yr.damping,mass:Yr.mass,isResolvedFromDuration:!1,...e};if(!cI(e,iye)&&cI(e,sye))if(e.visualDuration){const n=e.visualDuration,s=2*Math.PI/(n*1.2),i=s*s,a=2*Yo(.05,1,1-e.bounce)*Math.sqrt(i);t={...t,mass:Yr.mass,stiffness:i,damping:a}}else{const n=tye(e);t={...t,...n,mass:Yr.mass},t.isResolvedFromDuration=!0}return t}function mH(e=Yr.visualDuration,t=Yr.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:s,restDelta:i}=n;const a=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:a},{stiffness:c,damping:d,mass:h,duration:m,velocity:f,isResolvedFromDuration:g}=aye({...n,velocity:-Do(n.velocity||0)}),x=f||0,p=d/(2*Math.sqrt(c*h)),y=o-a,b=Do(Math.sqrt(c/h)),w=Math.abs(y)<5;s||(s=w?Yr.restSpeed.granular:Yr.restSpeed.default),i||(i=w?Yr.restDelta.granular:Yr.restDelta.default);let N;if(p<1){const P=$2(b,p);N=C=>{const k=Math.exp(-p*b*C);return o-k*((x+p*b*y)/P*Math.sin(P*C)+y*Math.cos(P*C))}}else if(p===1)N=P=>o-Math.exp(-b*P)*(y+(x+b*y)*P);else{const P=b*Math.sqrt(p*p-1);N=C=>{const k=Math.exp(-p*b*C),O=Math.min(P*C,300);return o-k*((x+p*b*y)*Math.sinh(O)+P*y*Math.cosh(O))/P}}const S={calculatedDuration:g&&m||null,next:P=>{const C=N(P);if(g)l.done=P>=m;else{let k=0;p<1&&(k=P===0?Mo(x):uH(N,P,C));const O=Math.abs(k)<=s,I=Math.abs(o-C)<=i;l.done=O&&I}return l.value=l.done?o:C,l},toString:()=>{const P=Math.min(hH(S),F2),C=cH(k=>S.next(P*k).value,P,30);return P+"ms "+C}};return S}function dI({keyframes:e,velocity:t=0,power:n=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:h}){const m=e[0],f={done:!1,value:m},g=O=>l!==void 0&&O<l||c!==void 0&&O>c,x=O=>l===void 0?c:c===void 0||Math.abs(l-O)<Math.abs(c-O)?l:c;let p=n*t;const y=m+p,b=o===void 0?y:o(y);b!==y&&(p=b-m);const w=O=>-p*Math.exp(-O/s),N=O=>b+w(O),S=O=>{const I=w(O),T=N(O);f.done=Math.abs(I)<=d,f.value=f.done?b:T};let P,C;const k=O=>{g(f.value)&&(P=O,C=mH({keyframes:[f.value,x(f.value)],velocity:uH(N,O,f.value),damping:i,stiffness:a,restDelta:d,restSpeed:h}))};return k(0),{calculatedDuration:null,next:O=>{let I=!1;return!C&&P===void 0&&(I=!0,S(O),k(O)),P!==void 0&&O>=P?C.next(O-P):(!I&&S(O),f)}}}const oye=Ig(.42,0,1,1),lye=Ig(0,0,.58,1),fH=Ig(.42,0,.58,1),cye=e=>Array.isArray(e)&&typeof e[0]!="number",xA=e=>Array.isArray(e)&&typeof e[0]=="number",uI={linear:ts,easeIn:oye,easeInOut:fH,easeOut:lye,circIn:lA,circInOut:HW,circOut:WW,backIn:oA,backInOut:VW,backOut:BW,anticipate:UW},hI=e=>{if(xA(e)){M2(e.length===4);const[t,n,s,i]=e;return Ig(t,n,s,i)}else if(typeof e=="string")return M2(uI[e]!==void 0),uI[e];return e},dye=(e,t)=>n=>t(e(n)),ec=(...e)=>e.reduce(dye),qr=(e,t,n)=>e+(t-e)*n;function F1(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function uye({hue:e,saturation:t,lightness:n,alpha:s}){e/=360,t/=100,n/=100;let i=0,a=0,o=0;if(!t)i=a=o=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;i=F1(c,l,e+1/3),a=F1(c,l,e),o=F1(c,l,e-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:s}}function K0(e,t){return n=>n>0?t:e}const z1=(e,t,n)=>{const s=e*e,i=n*(t*t-s)+s;return i<0?0:Math.sqrt(i)},hye=[L2,rd,Hu],mye=e=>hye.find(t=>t.test(e));function mI(e){const t=mye(e);if(!t)return!1;let n=t.parse(e);return t===Hu&&(n=uye(n)),n}const fI=(e,t)=>{const n=mI(e),s=mI(t);if(!n||!s)return K0(e,t);const i={...n};return a=>(i.red=z1(n.red,s.red,a),i.green=z1(n.green,s.green,a),i.blue=z1(n.blue,s.blue,a),i.alpha=qr(n.alpha,s.alpha,a),rd.transform(i))},z2=new Set(["none","hidden"]);function fye(e,t){return z2.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function pye(e,t){return n=>qr(e,t,n)}function gA(e){return typeof e=="number"?pye:typeof e=="string"?cA(e)?K0:Gn.test(e)?fI:vye:Array.isArray(e)?pH:typeof e=="object"?Gn.test(e)?fI:xye:K0}function pH(e,t){const n=[...e],s=n.length,i=e.map((a,o)=>gA(a)(a,t[o]));return a=>{for(let o=0;o<s;o++)n[o]=i[o](a);return n}}function xye(e,t){const n={...e,...t},s={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(s[i]=gA(e[i])(e[i],t[i]));return i=>{for(const a in s)n[a]=s[a](i);return n}}function gye(e,t){var n;const s=[],i={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const o=t.types[a],l=e.indexes[o][i[o]],c=(n=e.values[l])!==null&&n!==void 0?n:0;s[a]=c,i[o]++}return s}const vye=(e,t)=>{const n=vc.createTransformer(t),s=jx(e),i=jx(t);return s.indexes.var.length===i.indexes.var.length&&s.indexes.color.length===i.indexes.color.length&&s.indexes.number.length>=i.indexes.number.length?z2.has(e)&&!i.values.length||z2.has(t)&&!s.values.length?fye(e,t):ec(pH(gye(s,i),i.values),n):K0(e,t)};function xH(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?qr(e,t,n):gA(e)(e,t)}function yye(e,t,n){const s=[],i=n||xH,a=e.length-1;for(let o=0;o<a;o++){let l=i(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||ts:t;l=ec(c,l)}s.push(l)}return s}function jye(e,t,{clamp:n=!0,ease:s,mixer:i}={}){const a=e.length;if(M2(a===t.length),a===1)return()=>t[0];if(a===2&&e[0]===e[1])return()=>t[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=yye(t,s,i),l=o.length,c=d=>{let h=0;if(l>1)for(;h<e.length-2&&!(d<e[h+1]);h++);const m=Yh(e[h],e[h+1],d);return o[h](m)};return n?d=>c(Yo(e[0],e[a-1],d)):c}function bye(e,t){const n=e[e.length-1];for(let s=1;s<=t;s++){const i=Yh(0,t,s);e.push(qr(n,1,i))}}function wye(e){const t=[0];return bye(t,e.length-1),t}function Nye(e,t){return e.map(n=>n*t)}function Sye(e,t){return e.map(()=>t||fH).splice(0,e.length-1)}function G0({duration:e=300,keyframes:t,times:n,ease:s="easeInOut"}){const i=cye(s)?s.map(hI):hI(s),a={done:!1,value:t[0]},o=Nye(n&&n.length===t.length?n:wye(t),e),l=jye(o,t,{ease:Array.isArray(i)?i:Sye(t,i)});return{calculatedDuration:e,next:c=>(a.value=l(c),a.done=c>=e,a)}}const _ye=e=>{const t=({timestamp:n})=>e(n);return{start:()=>xr.update(t,!0),stop:()=>gc(t),now:()=>$n.isProcessing?$n.timestamp:Va.now()}},Pye={decay:dI,inertia:dI,tween:G0,keyframes:G0,spring:mH},Cye=e=>e/100;class vA extends lH{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:n,motionValue:s,element:i,keyframes:a}=this.options,o=(i==null?void 0:i.KeyframeResolver)||dA,l=(c,d)=>this.onKeyframesResolved(c,d);this.resolver=new o(a,l,n,s,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:n="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:a,velocity:o=0}=this.options,l=pA(n)?n:Pye[n]||G0;let c,d;l!==G0&&typeof t[0]!="number"&&(c=ec(Cye,xH(t[0],t[1])),t=[0,100]);const h=l({...this.options,keyframes:t});a==="mirror"&&(d=l({...this.options,keyframes:[...t].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=hH(h));const{calculatedDuration:m}=h,f=m+i,g=f*(s+1)-i;return{generator:h,mirroredGenerator:d,mapPercentToKeyframes:c,calculatedDuration:m,resolvedDuration:f,totalDuration:g}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:s}=this;if(!s){const{keyframes:O}=this.options;return{done:!0,value:O[O.length-1]}}const{finalKeyframe:i,generator:a,mirroredGenerator:o,mapPercentToKeyframes:l,keyframes:c,calculatedDuration:d,totalDuration:h,resolvedDuration:m}=s;if(this.startTime===null)return a.next(0);const{delay:f,repeat:g,repeatType:x,repeatDelay:p,onUpdate:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-h/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const b=this.currentTime-f*(this.speed>=0?1:-1),w=this.speed>=0?b<0:b>h;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let N=this.currentTime,S=a;if(g){const O=Math.min(this.currentTime,h)/m;let I=Math.floor(O),T=O%1;!T&&O>=1&&(T=1),T===1&&I--,I=Math.min(I,g+1),!!(I%2)&&(x==="reverse"?(T=1-T,p&&(T-=p/m)):x==="mirror"&&(S=o)),N=Yo(0,1,T)*m}const P=w?{done:!1,value:c[0]}:S.next(N);l&&(P.value=l(P.value));let{done:C}=P;!w&&d!==null&&(C=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return k&&i!==void 0&&(P.value=iw(c,this.options,i)),y&&y(P.value),k&&this.finish(),P}get duration(){const{resolved:t}=this;return t?Do(t.calculatedDuration):0}get time(){return Do(this.currentTime)}set time(t){t=Mo(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Do(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=_ye,onPlay:n,startTime:s}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=s??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const kye=new Set(["opacity","clipPath","filter","transform"]);function yA(e){let t;return()=>(t===void 0&&(t=e()),t)}const Tye={linearEasing:void 0};function Aye(e,t){const n=yA(e);return()=>{var s;return(s=Tye[t])!==null&&s!==void 0?s:n()}}const Z0=Aye(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function gH(e){return!!(typeof e=="function"&&Z0()||!e||typeof e=="string"&&(e in B2||Z0())||xA(e)||Array.isArray(e)&&e.every(gH))}const Qf=([e,t,n,s])=>`cubic-bezier(${e}, ${t}, ${n}, ${s})`,B2={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Qf([0,.65,.55,1]),circOut:Qf([.55,0,1,.45]),backIn:Qf([.31,.01,.66,-.59]),backOut:Qf([.33,1.53,.69,.99])};function vH(e,t){if(e)return typeof e=="function"&&Z0()?cH(e,t):xA(e)?Qf(e):Array.isArray(e)?e.map(n=>vH(n,t)||B2.easeOut):B2[e]}function Eye(e,t,n,{delay:s=0,duration:i=300,repeat:a=0,repeatType:o="loop",ease:l="easeInOut",times:c}={}){const d={[t]:n};c&&(d.offset=c);const h=vH(l,i);return Array.isArray(h)&&(d.easing=h),e.animate(d,{delay:s,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"})}function pI(e,t){e.timeline=t,e.onfinish=null}const Oye=yA(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Y0=10,Mye=2e4;function Dye(e){return pA(e.type)||e.type==="spring"||!gH(e.ease)}function Iye(e,t){const n=new vA({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:e[0]};const i=[];let a=0;for(;!s.done&&a<Mye;)s=n.sample(a),i.push(s.value),a+=Y0;return{times:void 0,keyframes:i,duration:a-Y0,ease:"linear"}}const yH={anticipate:UW,backInOut:VW,circInOut:HW};function Lye(e){return e in yH}class xI extends lH{constructor(t){super(t);const{name:n,motionValue:s,element:i,keyframes:a}=this.options;this.resolver=new oH(a,(o,l)=>this.onKeyframesResolved(o,l),n,s,i),this.resolver.scheduleResolve()}initPlayback(t,n){var s;let{duration:i=300,times:a,ease:o,type:l,motionValue:c,name:d,startTime:h}=this.options;if(!(!((s=c.owner)===null||s===void 0)&&s.current))return!1;if(typeof o=="string"&&Z0()&&Lye(o)&&(o=yH[o]),Dye(this.options)){const{onComplete:f,onUpdate:g,motionValue:x,element:p,...y}=this.options,b=Iye(t,y);t=b.keyframes,t.length===1&&(t[1]=t[0]),i=b.duration,a=b.times,o=b.ease,l="keyframes"}const m=Eye(c.owner.current,d,t,{...this.options,duration:i,times:a,ease:o});return m.startTime=h??this.calcStartTime(),this.pendingTimeline?(pI(m,this.pendingTimeline),this.pendingTimeline=void 0):m.onfinish=()=>{const{onComplete:f}=this.options;c.set(iw(t,this.options,n)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:m,duration:i,times:a,type:l,ease:o,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return Do(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return Do(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.currentTime=Mo(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return ts;const{animation:s}=n;pI(s,t)}return ts}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:s,duration:i,type:a,ease:o,times:l}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:h,onComplete:m,element:f,...g}=this.options,x=new vA({...g,keyframes:s,duration:i,type:a,ease:o,times:l,isGenerator:!0}),p=Mo(this.time);d.setWithVelocity(x.sample(p-Y0).value,x.sample(p).value,Y0)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:s,repeatDelay:i,repeatType:a,damping:o,type:l}=t;return Oye()&&s&&kye.has(s)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!i&&a!=="mirror"&&o!==0&&l!=="inertia"}}const Rye=yA(()=>window.ScrollTimeline!==void 0);class $ye{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}then(t,n){return Promise.all(this.animations).then(t).catch(n)}getAll(t){return this.animations[0][t]}setAll(t,n){for(let s=0;s<this.animations.length;s++)this.animations[s][t]=n}attachTimeline(t,n){const s=this.animations.map(i=>Rye()&&i.attachTimeline?i.attachTimeline(t):n(i));return()=>{s.forEach((i,a)=>{i&&i(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function Fye({when:e,delay:t,delayChildren:n,staggerChildren:s,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:l,from:c,elapsed:d,...h}){return!!Object.keys(h).length}const jA=(e,t,n,s={},i,a)=>o=>{const l=aA(s,e)||{},c=l.delay||s.delay||0;let{elapsed:d=0}=s;d=d-Mo(c);let h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-d,onUpdate:f=>{t.set(f),l.onUpdate&&l.onUpdate(f)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:a?void 0:i};Fye(l)||(h={...h,...dve(e,h)}),h.duration&&(h.duration=Mo(h.duration)),h.repeatDelay&&(h.repeatDelay=Mo(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let m=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(m=!0)),m&&!a&&t.get()!==void 0){const f=iw(h.keyframes,l);if(f!==void 0)return xr.update(()=>{h.onUpdate(f),h.onComplete()}),new $ye([])}return!a&&xI.supports(h)?new xI(h):new vA(h)},zye=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),Bye=e=>O2(e)?e[e.length-1]||0:e;function bA(e,t){e.indexOf(t)===-1&&e.push(t)}function wA(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class NA{constructor(){this.subscriptions=[]}add(t){return bA(this.subscriptions,t),()=>wA(this.subscriptions,t)}notify(t,n,s){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,s);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(t,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const gI=30,Vye=e=>!isNaN(parseFloat(e));class Uye{constructor(t,n={}){this.version="11.13.1",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,i=!0)=>{const a=Va.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Va.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Vye(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new NA);const s=this.events[t].add(n);return t==="change"?()=>{s(),xr.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-s}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Va.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>gI)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,gI);return dH(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function bx(e,t){return new Uye(e,t)}function Wye(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,bx(n))}function Hye(e,t){const n=sw(e,t);let{transitionEnd:s={},transition:i={},...a}=n||{};a={...a,...s};for(const o in a){const l=Bye(a[o]);Wye(e,o,l)}}const SA=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),qye="framerAppearId",jH="data-"+SA(qye);function bH(e){return e.props[jH]}const Jn=e=>!!(e&&e.getVelocity);function Kye(e){return!!(Jn(e)&&e.add)}function V2(e,t){const n=e.getValue("willChange");if(Kye(n))return n.add(t)}function Gye({protectedKeys:e,needsAnimating:t},n){const s=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,s}function wH(e,t,{delay:n=0,transitionOverride:s,type:i}={}){var a;let{transition:o=e.getDefaultTransition(),transitionEnd:l,...c}=t;s&&(o=s);const d=[],h=i&&e.animationState&&e.animationState.getState()[i];for(const m in c){const f=e.getValue(m,(a=e.latestValues[m])!==null&&a!==void 0?a:null),g=c[m];if(g===void 0||h&&Gye(h,m))continue;const x={delay:n,...aA(o||{},m)};let p=!1;if(window.MotionHandoffAnimation){const b=bH(e);if(b){const w=window.MotionHandoffAnimation(b,m,xr);w!==null&&(x.startTime=w,p=!0)}}V2(e,m),f.start(jA(m,f,g,e.shouldReduceMotion&&iu.has(m)?{type:!1}:x,e,p));const y=f.animation;y&&d.push(y)}return l&&Promise.all(d).then(()=>{xr.update(()=>{l&&Hye(e,l)})}),d}function U2(e,t,n={}){var s;const i=sw(e,t,n.type==="exit"?(s=e.presenceContext)===null||s===void 0?void 0:s.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(a=n.transitionOverride);const o=i?()=>Promise.all(wH(e,i,n)):()=>Promise.resolve(),l=e.variantChildren&&e.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:m,staggerDirection:f}=a;return Zye(e,t,h+d,m,f,n)}:()=>Promise.resolve(),{when:c}=a;if(c){const[d,h]=c==="beforeChildren"?[o,l]:[l,o];return d().then(()=>h())}else return Promise.all([o(),l(n.delay)])}function Zye(e,t,n=0,s=0,i=1,a){const o=[],l=(e.variantChildren.size-1)*s,c=i===1?(d=0)=>d*s:(d=0)=>l-d*s;return Array.from(e.variantChildren).sort(Yye).forEach((d,h)=>{d.notify("AnimationStart",t),o.push(U2(d,t,{...a,delay:n+c(h)}).then(()=>d.notify("AnimationComplete",t)))}),Promise.all(o)}function Yye(e,t){return e.sortNodePosition(t)}function Xye(e,t,n={}){e.notify("AnimationStart",t);let s;if(Array.isArray(t)){const i=t.map(a=>U2(e,a,n));s=Promise.all(i)}else if(typeof t=="string")s=U2(e,t,n);else{const i=typeof t=="function"?sw(e,t,n.custom):t;s=Promise.all(wH(e,i,n))}return s.then(()=>{e.notify("AnimationComplete",t)})}const Qye=iA.length;function NH(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?NH(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<Qye;n++){const s=iA[n],i=e.props[s];(vx(i)||i===!1)&&(t[s]=i)}return t}const Jye=[...sA].reverse(),e0e=sA.length;function t0e(e){return t=>Promise.all(t.map(({animation:n,options:s})=>Xye(e,n,s)))}function r0e(e){let t=t0e(e),n=vI(),s=!0;const i=c=>(d,h)=>{var m;const f=sw(e,h,c==="exit"?(m=e.presenceContext)===null||m===void 0?void 0:m.custom:void 0);if(f){const{transition:g,transitionEnd:x,...p}=f;d={...d,...p,...x}}return d};function a(c){t=c(e)}function o(c){const{props:d}=e,h=NH(e.parent)||{},m=[],f=new Set;let g={},x=1/0;for(let y=0;y<e0e;y++){const b=Jye[y],w=n[b],N=d[b]!==void 0?d[b]:h[b],S=vx(N),P=b===c?w.isActive:null;P===!1&&(x=y);let C=N===h[b]&&N!==d[b]&&S;if(C&&s&&e.manuallyAnimateOnMount&&(C=!1),w.protectedKeys={...g},!w.isActive&&P===null||!N&&!w.prevProp||nw(N)||typeof N=="boolean")continue;const k=n0e(w.prevProp,N);let O=k||b===c&&w.isActive&&!C&&S||y>x&&S,I=!1;const T=Array.isArray(N)?N:[N];let E=T.reduce(i(b),{});P===!1&&(E={});const{prevResolvedValues:D={}}=w,B={...D,...E},M=K=>{O=!0,f.has(K)&&(I=!0,f.delete(K)),w.needsAnimating[K]=!0;const W=e.getValue(K);W&&(W.liveStyle=!1)};for(const K in B){const W=E[K],V=D[K];if(g.hasOwnProperty(K))continue;let z=!1;O2(W)&&O2(V)?z=!LW(W,V):z=W!==V,z?W!=null?M(K):f.add(K):W!==void 0&&f.has(K)?M(K):w.protectedKeys[K]=!0}w.prevProp=N,w.prevResolvedValues=E,w.isActive&&(g={...g,...E}),s&&e.blockInitialAnimation&&(O=!1),O&&(!(C&&k)||I)&&m.push(...T.map(K=>({animation:K,options:{type:b}})))}if(f.size){const y={};f.forEach(b=>{const w=e.getBaseTarget(b),N=e.getValue(b);N&&(N.liveStyle=!0),y[b]=w??null}),m.push({animation:y})}let p=!!m.length;return s&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(p=!1),s=!1,p?t(m):Promise.resolve()}function l(c,d){var h;if(n[c].isActive===d)return Promise.resolve();(h=e.variantChildren)===null||h===void 0||h.forEach(f=>{var g;return(g=f.animationState)===null||g===void 0?void 0:g.setActive(c,d)}),n[c].isActive=d;const m=o(c);for(const f in n)n[f].protectedKeys={};return m}return{animateChanges:o,setActive:l,setAnimateFunction:a,getState:()=>n,reset:()=>{n=vI(),s=!0}}}function n0e(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!LW(t,e):!1}function Fc(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function vI(){return{animate:Fc(!0),whileInView:Fc(),whileHover:Fc(),whileTap:Fc(),whileDrag:Fc(),whileFocus:Fc(),exit:Fc()}}class Pc{constructor(t){this.isMounted=!1,this.node=t}update(){}}class s0e extends Pc{constructor(t){super(t),t.animationState||(t.animationState=r0e(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();nw(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let i0e=0;class a0e extends Pc{constructor(){super(...arguments),this.id=i0e++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const o0e={animation:{Feature:s0e},exit:{Feature:a0e}};function l0e(e,t,n){var s;if(e instanceof Element)return[e];if(typeof e=="string"){let i=document;const a=(s=void 0)!==null&&s!==void 0?s:i.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}const qi={x:!1,y:!1};function SH(){return qi.x||qi.y}function yI(e){return t=>{t.pointerType==="touch"||SH()||e(t)}}function c0e(e,t,n={}){const s=new AbortController,i={passive:!0,...n,signal:s.signal},a=yI(o=>{const{target:l}=o,c=t(o);if(!c||!l)return;const d=yI(h=>{c(h),l.removeEventListener("pointerleave",d)});l.addEventListener("pointerleave",d,i)});return l0e(e).forEach(o=>{o.addEventListener("pointerenter",a,i)}),()=>s.abort()}function d0e(e){return e==="x"||e==="y"?qi[e]?null:(qi[e]=!0,()=>{qi[e]=!1}):qi.x||qi.y?null:(qi.x=qi.y=!0,()=>{qi.x=qi.y=!1})}const _H=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Rg(e){return{point:{x:e.pageX,y:e.pageY}}}const u0e=e=>t=>_H(t)&&e(t,Rg(t));function _o(e,t,n,s={passive:!0}){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n)}function tc(e,t,n,s){return _o(e,t,u0e(n),s)}const jI=(e,t)=>Math.abs(e-t);function h0e(e,t){const n=jI(e.x,t.x),s=jI(e.y,t.y);return Math.sqrt(n**2+s**2)}class PH{constructor(t,n,{transformPagePoint:s,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=V1(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,g=h0e(m.offset,{x:0,y:0})>=3;if(!f&&!g)return;const{point:x}=m,{timestamp:p}=$n;this.history.push({...x,timestamp:p});const{onStart:y,onMove:b}=this.handlers;f||(y&&y(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,m)},this.handlePointerMove=(m,f)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=B1(f,this.transformPagePoint),xr.update(this.updatePoint,!0)},this.handlePointerUp=(m,f)=>{this.end();const{onEnd:g,onSessionEnd:x,resumeAnimation:p}=this.handlers;if(this.dragSnapToOrigin&&p&&p(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=V1(m.type==="pointercancel"?this.lastMoveEventInfo:B1(f,this.transformPagePoint),this.history);this.startEvent&&g&&g(m,y),x&&x(m,y)},!_H(t))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=s,this.contextWindow=i||window;const o=Rg(t),l=B1(o,this.transformPagePoint),{point:c}=l,{timestamp:d}=$n;this.history=[{...c,timestamp:d}];const{onSessionStart:h}=n;h&&h(t,V1(l,this.history)),this.removeListeners=ec(tc(this.contextWindow,"pointermove",this.handlePointerMove),tc(this.contextWindow,"pointerup",this.handlePointerUp),tc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),gc(this.updatePoint)}}function B1(e,t){return t?{point:t(e.point)}:e}function bI(e,t){return{x:e.x-t.x,y:e.y-t.y}}function V1({point:e},t){return{point:e,delta:bI(e,CH(t)),offset:bI(e,m0e(t)),velocity:f0e(t,.1)}}function m0e(e){return e[0]}function CH(e){return e[e.length-1]}function f0e(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,s=null;const i=CH(e);for(;n>=0&&(s=e[n],!(i.timestamp-s.timestamp>Mo(t)));)n--;if(!s)return{x:0,y:0};const a=Do(i.timestamp-s.timestamp);if(a===0)return{x:0,y:0};const o={x:(i.x-s.x)/a,y:(i.y-s.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function qu(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}const kH=1e-4,p0e=1-kH,x0e=1+kH,TH=.01,g0e=0-TH,v0e=0+TH;function si(e){return e.max-e.min}function y0e(e,t,n){return Math.abs(e-t)<=n}function wI(e,t,n,s=.5){e.origin=s,e.originPoint=qr(t.min,t.max,e.origin),e.scale=si(n)/si(t),e.translate=qr(n.min,n.max,e.origin)-e.originPoint,(e.scale>=p0e&&e.scale<=x0e||isNaN(e.scale))&&(e.scale=1),(e.translate>=g0e&&e.translate<=v0e||isNaN(e.translate))&&(e.translate=0)}function xp(e,t,n,s){wI(e.x,t.x,n.x,s?s.originX:void 0),wI(e.y,t.y,n.y,s?s.originY:void 0)}function NI(e,t,n){e.min=n.min+t.min,e.max=e.min+si(t)}function j0e(e,t,n){NI(e.x,t.x,n.x),NI(e.y,t.y,n.y)}function SI(e,t,n){e.min=t.min-n.min,e.max=e.min+si(t)}function gp(e,t,n){SI(e.x,t.x,n.x),SI(e.y,t.y,n.y)}function b0e(e,{min:t,max:n},s){return t!==void 0&&e<t?e=s?qr(t,e,s.min):Math.max(e,t):n!==void 0&&e>n&&(e=s?qr(n,e,s.max):Math.min(e,n)),e}function _I(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function w0e(e,{top:t,left:n,bottom:s,right:i}){return{x:_I(e.x,n,i),y:_I(e.y,t,s)}}function PI(e,t){let n=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,s]=[s,n]),{min:n,max:s}}function N0e(e,t){return{x:PI(e.x,t.x),y:PI(e.y,t.y)}}function S0e(e,t){let n=.5;const s=si(e),i=si(t);return i>s?n=Yh(t.min,t.max-s,e.min):s>i&&(n=Yh(e.min,e.max-i,t.min)),Yo(0,1,n)}function _0e(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const W2=.35;function P0e(e=W2){return e===!1?e=0:e===!0&&(e=W2),{x:CI(e,"left","right"),y:CI(e,"top","bottom")}}function CI(e,t,n){return{min:kI(e,t),max:kI(e,n)}}function kI(e,t){return typeof e=="number"?e:e[t]||0}const TI=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ku=()=>({x:TI(),y:TI()}),AI=()=>({min:0,max:0}),tn=()=>({x:AI(),y:AI()});function pi(e){return[e("x"),e("y")]}function AH({top:e,left:t,right:n,bottom:s}){return{x:{min:t,max:n},y:{min:e,max:s}}}function C0e({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function k0e(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function U1(e){return e===void 0||e===1}function H2({scale:e,scaleX:t,scaleY:n}){return!U1(e)||!U1(t)||!U1(n)}function Hc(e){return H2(e)||EH(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function EH(e){return EI(e.x)||EI(e.y)}function EI(e){return e&&e!=="0%"}function X0(e,t,n){const s=e-n,i=t*s;return n+i}function OI(e,t,n,s,i){return i!==void 0&&(e=X0(e,i,s)),X0(e,n,s)+t}function q2(e,t=0,n=1,s,i){e.min=OI(e.min,t,n,s,i),e.max=OI(e.max,t,n,s,i)}function OH(e,{x:t,y:n}){q2(e.x,t.translate,t.scale,t.originPoint),q2(e.y,n.translate,n.scale,n.originPoint)}const MI=.999999999999,DI=1.0000000000001;function T0e(e,t,n,s=!1){const i=n.length;if(!i)return;t.x=t.y=1;let a,o;for(let l=0;l<i;l++){a=n[l],o=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(s&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Zu(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,OH(e,o)),s&&Hc(a.latestValues)&&Zu(e,a.latestValues))}t.x<DI&&t.x>MI&&(t.x=1),t.y<DI&&t.y>MI&&(t.y=1)}function Gu(e,t){e.min=e.min+t,e.max=e.max+t}function II(e,t,n,s,i=.5){const a=qr(e.min,e.max,i);q2(e,t,n,a,s)}function Zu(e,t){II(e.x,t.x,t.scaleX,t.scale,t.originX),II(e.y,t.y,t.scaleY,t.scale,t.originY)}function MH(e,t){return AH(k0e(e.getBoundingClientRect(),t))}function A0e(e,t,n){const s=MH(e,n),{scroll:i}=t;return i&&(Gu(s.x,i.offset.x),Gu(s.y,i.offset.y)),s}const DH=({current:e})=>e?e.ownerDocument.defaultView:null,E0e=new WeakMap;class O0e{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=tn(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Rg(h).point)},a=(h,m)=>{const{drag:f,dragPropagation:g,onDragStart:x}=this.getProps();if(f&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=d0e(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),pi(y=>{let b=this.getAxisMotionValue(y).get()||0;if(Ba.test(b)){const{projection:w}=this.visualElement;if(w&&w.layout){const N=w.layout.layoutBox[y];N&&(b=si(N)*(parseFloat(b)/100))}}this.originPoint[y]=b}),x&&xr.postRender(()=>x(h,m)),V2(this.visualElement,"transform");const{animationState:p}=this.visualElement;p&&p.setActive("whileDrag",!0)},o=(h,m)=>{const{dragPropagation:f,dragDirectionLock:g,onDirectionLock:x,onDrag:p}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:y}=m;if(g&&this.currentDirection===null){this.currentDirection=M0e(y),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",m.point,y),this.updateAxis("y",m.point,y),this.visualElement.render(),p&&p(h,m)},l=(h,m)=>this.stop(h,m),c=()=>pi(h=>{var m;return this.getAnimationState(h)==="paused"&&((m=this.getAxisMotionValue(h).animation)===null||m===void 0?void 0:m.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new PH(t,{onSessionStart:i,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:DH(this.visualElement)})}stop(t,n){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&xr.postRender(()=>a(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,s){const{drag:i}=this.getProps();if(!s||!qv(t,i,this.currentDirection))return;const a=this.getAxisMotionValue(t);let o=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(o=b0e(o,this.constraints[t],this.elastic[t])),a.set(o)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:s}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,a=this.constraints;n&&qu(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=w0e(i.layoutBox,n):this.constraints=!1,this.elastic=P0e(s),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&pi(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=_0e(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!qu(t))return!1;const s=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=A0e(s,i.root,this.visualElement.getTransformPagePoint());let o=N0e(i.layout.layoutBox,a);if(n){const l=n(C0e(o));this.hasMutatedConstraints=!!l,l&&(o=AH(l))}return o}startAnimation(t){const{drag:n,dragMomentum:s,dragElastic:i,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=pi(h=>{if(!qv(h,n,this.currentDirection))return;let m=c&&c[h]||{};o&&(m={min:0,max:0});const f=i?200:1e6,g=i?40:1e7,x={type:"inertia",velocity:s?t[h]:0,bounceStiffness:f,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...a,...m};return this.startAxisValueAnimation(h,x)});return Promise.all(d).then(l)}startAxisValueAnimation(t,n){const s=this.getAxisMotionValue(t);return V2(this.visualElement,t),s.start(jA(t,s,0,n,this.visualElement,!1))}stopAnimation(){pi(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){pi(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,s=this.visualElement.getProps(),i=s[n];return i||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){pi(n=>{const{drag:s}=this.getProps();if(!qv(n,s,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[n];a.set(t[n]-qr(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!qu(n)||!s||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};pi(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();i[o]=S0e({min:c,max:c},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),pi(o=>{if(!qv(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set(qr(c,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;E0e.set(this.visualElement,this);const t=this.visualElement.current,n=tc(t,"pointerdown",c=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(c)}),s=()=>{const{dragConstraints:c}=this.getProps();qu(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",s);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),xr.read(s);const o=_o(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(pi(h=>{const m=this.getAxisMotionValue(h);m&&(this.originPoint[h]+=c[h].translate,m.set(m.get()+c[h].translate))}),this.visualElement.render())});return()=>{o(),n(),a(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:o=W2,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:s,dragPropagation:i,dragConstraints:a,dragElastic:o,dragMomentum:l}}}function qv(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function M0e(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class D0e extends Pc{constructor(t){super(t),this.removeGroupControls=ts,this.removeListeners=ts,this.controls=new O0e(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ts}unmount(){this.removeGroupControls(),this.removeListeners()}}const LI=e=>(t,n)=>{e&&xr.postRender(()=>e(t,n))};class I0e extends Pc{constructor(){super(...arguments),this.removePointerDownListener=ts}onPointerDown(t){this.session=new PH(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:DH(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:s,onPanEnd:i}=this.node.getProps();return{onSessionStart:LI(t),onStart:LI(n),onMove:s,onEnd:(a,o)=>{delete this.session,i&&xr.postRender(()=>i(a,o))}}}mount(){this.removePointerDownListener=tc(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const aw=j.createContext(null);function L0e(){const e=j.useContext(aw);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:s}=e,i=j.useId();j.useEffect(()=>s(i),[]);const a=j.useCallback(()=>n&&n(i),[i,n]);return!t&&n?[!1,a]:[!0]}const _A=j.createContext({}),IH=j.createContext({}),Dy={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function RI(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Tf={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(yt.test(e))e=parseFloat(e);else return e;const n=RI(e,t.target.x),s=RI(e,t.target.y);return`${n}% ${s}%`}},R0e={correct:(e,{treeScale:t,projectionDelta:n})=>{const s=e,i=vc.parse(e);if(i.length>5)return s;const a=vc.createTransformer(e),o=typeof i[0]!="number"?1:0,l=n.x.scale*t.x,c=n.y.scale*t.y;i[0+o]/=l,i[1+o]/=c;const d=qr(l,c,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),a(i)}},Q0={};function $0e(e){Object.assign(Q0,e)}const{schedule:PA,cancel:GUe}=RW(queueMicrotask,!1);class F0e extends j.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s,layoutId:i}=this.props,{projection:a}=t;$0e(z0e),a&&(n.group&&n.group.add(a),s&&s.register&&i&&s.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Dy.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:s,drag:i,isPresent:a}=this.props,o=s.projection;return o&&(o.isPresent=a,i||t.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?o.promote():o.relegate()||xr.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),PA.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),s&&s.deregister&&s.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function LH(e){const[t,n]=L0e(),s=j.useContext(_A);return r.jsx(F0e,{...e,layoutGroup:s,switchLayoutGroup:j.useContext(IH),isPresent:t,safeToRemove:n})}const z0e={borderRadius:{...Tf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Tf,borderTopRightRadius:Tf,borderBottomLeftRadius:Tf,borderBottomRightRadius:Tf,boxShadow:R0e},RH=["TopLeft","TopRight","BottomLeft","BottomRight"],B0e=RH.length,$I=e=>typeof e=="string"?parseFloat(e):e,FI=e=>typeof e=="number"||yt.test(e);function V0e(e,t,n,s,i,a){i?(e.opacity=qr(0,n.opacity!==void 0?n.opacity:1,U0e(s)),e.opacityExit=qr(t.opacity!==void 0?t.opacity:1,0,W0e(s))):a&&(e.opacity=qr(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,s));for(let o=0;o<B0e;o++){const l=`border${RH[o]}Radius`;let c=zI(t,l),d=zI(n,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||FI(c)===FI(d)?(e[l]=Math.max(qr($I(c),$I(d),s),0),(Ba.test(d)||Ba.test(c))&&(e[l]+="%")):e[l]=d}(t.rotate||n.rotate)&&(e.rotate=qr(t.rotate||0,n.rotate||0,s))}function zI(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const U0e=$H(0,.5,WW),W0e=$H(.5,.95,ts);function $H(e,t,n){return s=>s<e?0:s>t?1:n(Yh(e,t,s))}function BI(e,t){e.min=t.min,e.max=t.max}function ui(e,t){BI(e.x,t.x),BI(e.y,t.y)}function VI(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function UI(e,t,n,s,i){return e-=t,e=X0(e,1/n,s),i!==void 0&&(e=X0(e,1/i,s)),e}function H0e(e,t=0,n=1,s=.5,i,a=e,o=e){if(Ba.test(t)&&(t=parseFloat(t),t=qr(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=qr(a.min,a.max,s);e===a&&(l-=t),e.min=UI(e.min,t,n,l,i),e.max=UI(e.max,t,n,l,i)}function WI(e,t,[n,s,i],a,o){H0e(e,t[n],t[s],t[i],t.scale,a,o)}const q0e=["x","scaleX","originX"],K0e=["y","scaleY","originY"];function HI(e,t,n,s){WI(e.x,t,q0e,n?n.x:void 0,s?s.x:void 0),WI(e.y,t,K0e,n?n.y:void 0,s?s.y:void 0)}function qI(e){return e.translate===0&&e.scale===1}function FH(e){return qI(e.x)&&qI(e.y)}function KI(e,t){return e.min===t.min&&e.max===t.max}function G0e(e,t){return KI(e.x,t.x)&&KI(e.y,t.y)}function GI(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function zH(e,t){return GI(e.x,t.x)&&GI(e.y,t.y)}function ZI(e){return si(e.x)/si(e.y)}function YI(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Z0e{constructor(){this.members=[]}add(t){bA(this.members,t),t.scheduleRender()}remove(t){if(wA(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let s;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){s=a;break}}return s?(this.promote(s),!0):!1}promote(t,n){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,n&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:s}=t;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Y0e(e,t,n){let s="";const i=e.x.translate/t.x,a=e.y.translate/t.y,o=(n==null?void 0:n.z)||0;if((i||a||o)&&(s=`translate3d(${i}px, ${a}px, ${o}px) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:m,rotateY:f,skewX:g,skewY:x}=n;d&&(s=`perspective(${d}px) ${s}`),h&&(s+=`rotate(${h}deg) `),m&&(s+=`rotateX(${m}deg) `),f&&(s+=`rotateY(${f}deg) `),g&&(s+=`skewX(${g}deg) `),x&&(s+=`skewY(${x}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(s+=`scale(${l}, ${c})`),s||"none"}const X0e=(e,t)=>e.depth-t.depth;class Q0e{constructor(){this.children=[],this.isDirty=!1}add(t){bA(this.children,t),this.isDirty=!0}remove(t){wA(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(X0e),this.isDirty=!1,this.children.forEach(t)}}function Iy(e){const t=Jn(e)?e.get():e;return zye(t)?t.toValue():t}function J0e(e,t){const n=Va.now(),s=({timestamp:i})=>{const a=i-n;a>=t&&(gc(s),e(a-t))};return xr.read(s,!0),()=>gc(s)}function eje(e){return e instanceof SVGElement&&e.tagName!=="svg"}function tje(e,t,n){const s=Jn(e)?e:bx(e);return s.start(jA("",s,t,n)),s.animation}const qc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Jf=typeof window<"u"&&window.MotionDebug!==void 0,W1=["","X","Y","Z"],rje={visibility:"hidden"},XI=1e3;let nje=0;function H1(e,t,n,s){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),s&&(s[e]=0))}function BH(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=bH(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",xr,!(i||a))}const{parent:s}=e;s&&!s.hasCheckedOptimisedAppear&&BH(s)}function VH({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(o={},l=t==null?void 0:t()){this.id=nje++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Jf&&(qc.totalNodes=qc.resolvedTargetDeltas=qc.recalculatedProjection=0),this.nodes.forEach(aje),this.nodes.forEach(uje),this.nodes.forEach(hje),this.nodes.forEach(oje),Jf&&window.MotionDebug.record(qc)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Q0e)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new NA),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=eje(o),this.instance=o;const{layoutId:c,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(d||c)&&(this.isLayoutDirty=!0),e){let m;const f=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=J0e(f,250),Dy.hasAnimatedSinceResize&&(Dy.hasAnimatedSinceResize=!1,this.nodes.forEach(JI))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||d)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:f,hasRelativeTargetChanged:g,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||h.getDefaultTransition()||gje,{onLayoutAnimationStart:y,onLayoutAnimationComplete:b}=h.getProps(),w=!this.targetLayout||!zH(this.targetLayout,x)||g,N=!f&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||N||f&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(m,N);const S={...aA(p,"layout"),onPlay:y,onComplete:b};(h.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S)}else f||JI(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,gc(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(mje),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&BH(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const m=this.path[h];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(QI);return}this.isUpdating||this.nodes.forEach(cje),this.isUpdating=!1,this.nodes.forEach(dje),this.nodes.forEach(sje),this.nodes.forEach(ije),this.clearAllSnapshots();const l=Va.now();$n.delta=Yo(0,1e3/60,l-$n.timestamp),$n.timestamp=l,$n.isProcessing=!0,L1.update.process($n),L1.preRender.process($n),L1.render.process($n),$n.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,PA.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(lje),this.sharedNodes.forEach(fje)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,xr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){xr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=tn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l){const c=s(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!FH(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&(l||Hc(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),vje(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:l}=this.options;if(!l)return tn();const c=l.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(yje))){const{scroll:h}=this.root;h&&(Gu(c.x,h.offset.x),Gu(c.y,h.offset.y))}return c}removeElementScroll(o){var l;const c=tn();if(ui(c,o),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return c;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:m,options:f}=h;h!==this.root&&m&&f.layoutScroll&&(m.wasRoot&&ui(c,o),Gu(c.x,m.offset.x),Gu(c.y,m.offset.y))}return c}applyTransform(o,l=!1){const c=tn();ui(c,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Zu(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Hc(h.latestValues)&&Zu(c,h.latestValues)}return Hc(this.latestValues)&&Zu(c,this.latestValues),c}removeTransform(o){const l=tn();ui(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!Hc(d.latestValues))continue;H2(d.latestValues)&&d.updateSnapshot();const h=tn(),m=d.measurePageBox();ui(h,m),HI(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return Hc(this.latestValues)&&HI(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==$n.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:f}=this.options;if(!(!this.layout||!(m||f))){if(this.resolvedRelativeTargetAt=$n.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=tn(),this.relativeTargetOrigin=tn(),gp(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),ui(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=tn(),this.targetWithTransforms=tn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),j0e(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ui(this.target,this.layout.layoutBox),OH(this.target,this.targetDelta)):ui(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=tn(),this.relativeTargetOrigin=tn(),gp(this.relativeTargetOrigin,this.target,g.target),ui(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Jf&&qc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||H2(this.parent.latestValues)||EH(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===$n.timestamp&&(d=!1),d)return;const{layout:h,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||m))return;ui(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,g=this.treeScale.y;T0e(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=tn());const{target:x}=l;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(VI(this.prevProjectionDelta.x,this.projectionDelta.x),VI(this.prevProjectionDelta.y,this.projectionDelta.y)),xp(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==g||!YI(this.projectionDelta.x,this.prevProjectionDelta.x)||!YI(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x)),Jf&&qc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ku(),this.projectionDelta=Ku(),this.projectionDeltaWithTransform=Ku()}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},h={...this.latestValues},m=Ku();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=tn(),g=c?c.source:void 0,x=this.layout?this.layout.source:void 0,p=g!==x,y=this.getStack(),b=!y||y.members.length<=1,w=!!(p&&!b&&this.options.crossfade===!0&&!this.path.some(xje));this.animationProgress=0;let N;this.mixTargetDelta=S=>{const P=S/1e3;e3(m.x,o.x,P),e3(m.y,o.y,P),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(gp(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),pje(this.relativeTarget,this.relativeTargetOrigin,f,P),N&&G0e(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=tn()),ui(N,this.relativeTarget)),p&&(this.animationValues=h,V0e(h,d,this.latestValues,P,w,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(gc(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=xr.update(()=>{Dy.hasAnimatedSinceResize=!0,this.currentAnimation=tje(0,XI,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(XI),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:h}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&UH(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||tn();const m=si(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+m;const f=si(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}ui(l,c),Zu(l,h),xp(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Z0e),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&H1("z",o,d,this.animationValues);for(let h=0;h<W1.length;h++)H1(`rotate${W1[h]}`,o,d,this.animationValues),H1(`skew${W1[h]}`,o,d,this.animationValues);o.render();for(const h in d)o.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return rje;const d={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=Iy(o==null?void 0:o.pointerEvents)||"",d.transform=h?h(this.latestValues,""):"none",d;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const p={};return this.options.layoutId&&(p.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,p.pointerEvents=Iy(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Hc(this.latestValues)&&(p.transform=h?h({},""):"none",this.hasProjected=!1),p}const f=m.animationValues||m.latestValues;this.applyTransformsToTarget(),d.transform=Y0e(this.projectionDeltaWithTransform,this.treeScale,f),h&&(d.transform=h(f,d.transform));const{x:g,y:x}=this.projectionDelta;d.transformOrigin=`${g.origin*100}% ${x.origin*100}% 0`,m.animationValues?d.opacity=m===this?(c=(l=f.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:d.opacity=m===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const p in Q0){if(f[p]===void 0)continue;const{correct:y,applyTo:b}=Q0[p],w=d.transform==="none"?f[p]:y(f[p],m);if(b){const N=b.length;for(let S=0;S<N;S++)d[b[S]]=w}else d[p]=w}return this.options.layoutId&&(d.pointerEvents=m===this?Iy(o==null?void 0:o.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(QI),this.root.sharedNodes.clear()}}}function sje(e){e.updateLayout()}function ije(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:i}=e.layout,{animationType:a}=e.options,o=n.source!==e.layout.source;a==="size"?pi(m=>{const f=o?n.measuredBox[m]:n.layoutBox[m],g=si(f);f.min=s[m].min,f.max=f.min+g}):UH(a,n.layoutBox,s)&&pi(m=>{const f=o?n.measuredBox[m]:n.layoutBox[m],g=si(s[m]);f.max=f.min+g,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[m].max=e.relativeTarget[m].min+g)});const l=Ku();xp(l,s,n.layoutBox);const c=Ku();o?xp(c,e.applyTransform(i,!0),n.measuredBox):xp(c,s,n.layoutBox);const d=!FH(l);let h=!1;if(!e.resumeFrom){const m=e.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:f,layout:g}=m;if(f&&g){const x=tn();gp(x,n.layoutBox,f.layoutBox);const p=tn();gp(p,s,g.layoutBox),zH(x,p)||(h=!0),m.options.layoutRoot&&(e.relativeTarget=p,e.relativeTargetOrigin=x,e.relativeParent=m)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeTargetChanged:h})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function aje(e){Jf&&qc.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function oje(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function lje(e){e.clearSnapshot()}function QI(e){e.clearMeasurements()}function cje(e){e.isLayoutDirty=!1}function dje(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function JI(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function uje(e){e.resolveTargetDelta()}function hje(e){e.calcProjection()}function mje(e){e.resetSkewAndRotation()}function fje(e){e.removeLeadSnapshot()}function e3(e,t,n){e.translate=qr(t.translate,0,n),e.scale=qr(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function t3(e,t,n,s){e.min=qr(t.min,n.min,s),e.max=qr(t.max,n.max,s)}function pje(e,t,n,s){t3(e.x,t.x,n.x,s),t3(e.y,t.y,n.y,s)}function xje(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const gje={duration:.45,ease:[.4,0,.1,1]},r3=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),n3=r3("applewebkit/")&&!r3("chrome/")?Math.round:ts;function s3(e){e.min=n3(e.min),e.max=n3(e.max)}function vje(e){s3(e.x),s3(e.y)}function UH(e,t,n){return e==="position"||e==="preserve-aspect"&&!y0e(ZI(t),ZI(n),.2)}function yje(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const jje=VH({attachResizeListener:(e,t)=>_o(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),q1={current:void 0},WH=VH({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!q1.current){const e=new jje({});e.mount(window),e.setOptions({layoutScroll:!0}),q1.current=e}return q1.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),bje={pan:{Feature:I0e},drag:{Feature:D0e,ProjectionNode:WH,MeasureLayout:LH}};function i3(e,t,n){const{props:s}=e;e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",n);const i=s[n?"onHoverStart":"onHoverEnd"];i&&xr.postRender(()=>i(t,Rg(t)))}class wje extends Pc{mount(){const{current:t,props:n}=this.node;t&&(this.unmount=c0e(t,s=>(i3(this.node,s,!0),i=>i3(this.node,i,!1)),{passive:!n.onHoverStart&&!n.onHoverEnd}))}unmount(){}}class Nje extends Pc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ec(_o(this.node.current,"focus",()=>this.onFocus()),_o(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const HH=(e,t)=>t?e===t?!0:HH(e,t.parentElement):!1;function K1(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,Rg(n))}class Sje extends Pc{constructor(){super(...arguments),this.removeStartListeners=ts,this.removeEndListeners=ts,this.removeAccessibleListeners=ts,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const s=this.node.getProps(),a=tc(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:d,onTapCancel:h,globalTapTarget:m}=this.node.getProps(),f=!m&&!HH(this.node.current,l.target)?h:d;f&&xr.update(()=>f(l,c))},{passive:!(s.onTap||s.onPointerUp)}),o=tc(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(s.onTapCancel||s.onPointerCancel)});this.removeEndListeners=ec(a,o),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=a=>{if(a.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||K1("up",(c,d)=>{const{onTap:h}=this.node.getProps();h&&xr.postRender(()=>h(c,d))})};this.removeEndListeners(),this.removeEndListeners=_o(this.node.current,"keyup",o),K1("down",(l,c)=>{this.startPress(l,c)})},n=_o(this.node.current,"keydown",t),s=()=>{this.isPressing&&K1("cancel",(a,o)=>this.cancelPress(a,o))},i=_o(this.node.current,"blur",s);this.removeAccessibleListeners=ec(n,i)}}startPress(t,n){this.isPressing=!0;const{onTapStart:s,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),s&&xr.postRender(()=>s(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!SH()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:s}=this.node.getProps();s&&xr.postRender(()=>s(t,n))}mount(){const t=this.node.getProps(),n=tc(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),s=_o(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ec(n,s)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const K2=new WeakMap,G1=new WeakMap,_je=e=>{const t=K2.get(e.target);t&&t(e)},Pje=e=>{e.forEach(_je)};function Cje({root:e,...t}){const n=e||document;G1.has(n)||G1.set(n,{});const s=G1.get(n),i=JSON.stringify(t);return s[i]||(s[i]=new IntersectionObserver(Pje,{root:e,...t})),s[i]}function kje(e,t,n){const s=Cje(t);return K2.set(e,n),s.observe(e),()=>{K2.delete(e),s.unobserve(e)}}const Tje={some:0,all:1};class Aje extends Pc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:s,amount:i="some",once:a}=t,o={root:n?n.current:void 0,rootMargin:s,threshold:typeof i=="number"?i:Tje[i]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,a&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:m}=this.node.getProps(),f=d?h:m;f&&f(c)};return kje(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(Eje(t,n))&&this.startObserver()}unmount(){}}function Eje({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const Oje={inView:{Feature:Aje},tap:{Feature:Sje},focus:{Feature:Nje},hover:{Feature:wje}},Mje={layout:{ProjectionNode:WH,MeasureLayout:LH}},CA=j.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),ow=j.createContext({}),kA=typeof window<"u",qH=kA?j.useLayoutEffect:j.useEffect,KH=j.createContext({strict:!1});function Dje(e,t,n,s,i){var a,o;const{visualElement:l}=j.useContext(ow),c=j.useContext(KH),d=j.useContext(aw),h=j.useContext(CA).reducedMotion,m=j.useRef();s=s||c.renderer,!m.current&&s&&(m.current=s(e,{visualState:t,parent:l,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:h}));const f=m.current,g=j.useContext(IH);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&Ije(m.current,n,i,g);const x=j.useRef(!1);j.useInsertionEffect(()=>{f&&x.current&&f.update(n,d)});const p=n[jH],y=j.useRef(!!p&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,p))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,p)));return qH(()=>{f&&(x.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),PA.render(f.render),y.current&&f.animationState&&f.animationState.animateChanges())}),j.useEffect(()=>{f&&(!y.current&&f.animationState&&f.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var b;(b=window.MotionHandoffMarkAsComplete)===null||b===void 0||b.call(window,p)}),y.current=!1))}),f}function Ije(e,t,n,s){const{layoutId:i,layout:a,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:GH(e.parent)),e.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!o||l&&qu(l),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:s,layoutScroll:c,layoutRoot:d})}function GH(e){if(e)return e.options.allowProjection!==!1?e.projection:GH(e.parent)}function Lje(e,t,n){return j.useCallback(s=>{s&&e.mount&&e.mount(s),t&&(s?t.mount(s):t.unmount()),n&&(typeof n=="function"?n(s):qu(n)&&(n.current=s))},[t])}function lw(e){return nw(e.animate)||iA.some(t=>vx(e[t]))}function ZH(e){return!!(lw(e)||e.variants)}function Rje(e,t){if(lw(e)){const{initial:n,animate:s}=e;return{initial:n===!1||vx(n)?n:void 0,animate:vx(s)?s:void 0}}return e.inherit!==!1?t:{}}function $je(e){const{initial:t,animate:n}=Rje(e,j.useContext(ow));return j.useMemo(()=>({initial:t,animate:n}),[a3(t),a3(n)])}function a3(e){return Array.isArray(e)?e.join(" "):e}const o3={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Xh={};for(const e in o3)Xh[e]={isEnabled:t=>o3[e].some(n=>!!t[n])};function Fje(e){for(const t in e)Xh[t]={...Xh[t],...e[t]}}const zje=Symbol.for("motionComponentSymbol");function Bje({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:s,Component:i}){e&&Fje(e);function a(l,c){let d;const h={...j.useContext(CA),...l,layoutId:Vje(l)},{isStatic:m}=h,f=$je(l),g=s(l,m);if(!m&&kA){Uje();const x=Wje(h);d=x.MeasureLayout,f.visualElement=Dje(i,g,h,t,x.ProjectionNode)}return r.jsxs(ow.Provider,{value:f,children:[d&&f.visualElement?r.jsx(d,{visualElement:f.visualElement,...h}):null,n(i,l,Lje(g,f.visualElement,c),g,m,f.visualElement)]})}const o=j.forwardRef(a);return o[zje]=i,o}function Vje({layoutId:e}){const t=j.useContext(_A).id;return t&&e!==void 0?t+"-"+e:e}function Uje(e,t){j.useContext(KH).strict}function Wje(e){const{drag:t,layout:n}=Xh;if(!t&&!n)return{};const s={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const Hje=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function TA(e){return typeof e!="string"||e.includes("-")?!1:!!(Hje.indexOf(e)>-1||/[A-Z]/u.test(e))}function YH(e,{style:t,vars:n},s,i){Object.assign(e.style,t,i&&i.getProjectionStyles(s));for(const a in n)e.style.setProperty(a,n[a])}const XH=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function QH(e,t,n,s){YH(e,t,void 0,s);for(const i in t.attrs)e.setAttribute(XH.has(i)?i:SA(i),t.attrs[i])}function JH(e,{layout:t,layoutId:n}){return iu.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Q0[e]||e==="opacity")}function AA(e,t,n){var s;const{style:i}=e,a={};for(const o in i)(Jn(i[o])||t.style&&Jn(t.style[o])||JH(o,e)||((s=n==null?void 0:n.getValue(o))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(a[o]=i[o]);return a}function eq(e,t,n){const s=AA(e,t,n);for(const i in e)if(Jn(e[i])||Jn(t[i])){const a=Dg.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;s[a]=e[i]}return s}function EA(e){const t=j.useRef(null);return t.current===null&&(t.current=e()),t.current}function qje({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},s,i,a){const o={latestValues:Kje(s,i,a,e),renderState:t()};return n&&(o.mount=l=>n(s,l,o)),o}const tq=e=>(t,n)=>{const s=j.useContext(ow),i=j.useContext(aw),a=()=>qje(e,t,s,i);return n?a():EA(a)};function Kje(e,t,n,s){const i={},a=s(e,{});for(const f in a)i[f]=Iy(a[f]);let{initial:o,animate:l}=e;const c=lw(e),d=ZH(e);t&&d&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const m=h?l:o;if(m&&typeof m!="boolean"&&!nw(m)){const f=Array.isArray(m)?m:[m];for(let g=0;g<f.length;g++){const x=nA(e,f[g]);if(x){const{transitionEnd:p,transition:y,...b}=x;for(const w in b){let N=b[w];if(Array.isArray(N)){const S=h?N.length-1:0;N=N[S]}N!==null&&(i[w]=N)}for(const w in p)i[w]=p[w]}}}return i}const OA=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),rq=()=>({...OA(),attrs:{}}),nq=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Gje={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Zje=Dg.length;function Yje(e,t,n){let s="",i=!0;for(let a=0;a<Zje;a++){const o=Dg[a],l=e[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const d=nq(l,mA[o]);if(!c){i=!1;const h=Gje[o]||o;s+=`${h}(${d}) `}n&&(t[o]=d)}}return s=s.trim(),n?s=n(t,i?"":s):i&&(s="none"),s}function MA(e,t,n){const{style:s,vars:i,transformOrigin:a}=e;let o=!1,l=!1;for(const c in t){const d=t[c];if(iu.has(c)){o=!0;continue}else if(ZW(c)){i[c]=d;continue}else{const h=nq(d,mA[c]);c.startsWith("origin")?(l=!0,a[c]=h):s[c]=h}}if(t.transform||(o||n?s.transform=Yje(t,e.transform,n):s.transform&&(s.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:h=0}=a;s.transformOrigin=`${c} ${d} ${h}`}}function l3(e,t,n){return typeof e=="string"?e:yt.transform(t+n*e)}function Xje(e,t,n){const s=l3(t,e.x,e.width),i=l3(n,e.y,e.height);return`${s} ${i}`}const Qje={offset:"stroke-dashoffset",array:"stroke-dasharray"},Jje={offset:"strokeDashoffset",array:"strokeDasharray"};function ebe(e,t,n=1,s=0,i=!0){e.pathLength=1;const a=i?Qje:Jje;e[a.offset]=yt.transform(-s);const o=yt.transform(t),l=yt.transform(n);e[a.array]=`${o} ${l}`}function DA(e,{attrX:t,attrY:n,attrScale:s,originX:i,originY:a,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...d},h,m){if(MA(e,d,m),h){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:g,dimensions:x}=e;f.transform&&(x&&(g.transform=f.transform),delete f.transform),x&&(i!==void 0||a!==void 0||g.transform)&&(g.transformOrigin=Xje(x,i!==void 0?i:.5,a!==void 0?a:.5)),t!==void 0&&(f.x=t),n!==void 0&&(f.y=n),s!==void 0&&(f.scale=s),o!==void 0&&ebe(f,o,l,c,!1)}const IA=e=>typeof e=="string"&&e.toLowerCase()==="svg",tbe={useVisualState:tq({scrapeMotionValuesFromProps:eq,createRenderState:rq,onMount:(e,t,{renderState:n,latestValues:s})=>{xr.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),xr.render(()=>{DA(n,s,IA(t.tagName),e.transformTemplate),QH(t,n)})}})},rbe={useVisualState:tq({scrapeMotionValuesFromProps:AA,createRenderState:OA})};function sq(e,t,n){for(const s in t)!Jn(t[s])&&!JH(s,n)&&(e[s]=t[s])}function nbe({transformTemplate:e},t){return j.useMemo(()=>{const n=OA();return MA(n,t,e),Object.assign({},n.vars,n.style)},[t])}function sbe(e,t){const n=e.style||{},s={};return sq(s,n,e),Object.assign(s,nbe(e,t)),s}function ibe(e,t){const n={},s=sbe(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const abe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function J0(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||abe.has(e)}let iq=e=>!J0(e);function obe(e){e&&(iq=t=>t.startsWith("on")?!J0(t):e(t))}try{obe(require("@emotion/is-prop-valid").default)}catch{}function lbe(e,t,n){const s={};for(const i in e)i==="values"&&typeof e.values=="object"||(iq(i)||n===!0&&J0(i)||!t&&!J0(i)||e.draggable&&i.startsWith("onDrag"))&&(s[i]=e[i]);return s}function cbe(e,t,n,s){const i=j.useMemo(()=>{const a=rq();return DA(a,t,IA(s),e.transformTemplate),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};sq(a,e.style,e),i.style={...a,...i.style}}return i}function dbe(e=!1){return(n,s,i,{latestValues:a},o)=>{const c=(TA(n)?cbe:ibe)(s,a,o,n),d=lbe(s,typeof n=="string",e),h=n!==j.Fragment?{...d,...c,ref:i}:{},{children:m}=s,f=j.useMemo(()=>Jn(m)?m.get():m,[m]);return j.createElement(n,{...h,children:f})}}function ube(e,t){return function(s,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...TA(s)?tbe:rbe,preloadedFeatures:e,useRender:dbe(i),createVisualElement:t,Component:s};return Bje(o)}}const G2={current:null},aq={current:!1};function hbe(){if(aq.current=!0,!!kA)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>G2.current=e.matches;e.addListener(t),t()}else G2.current=!1}function mbe(e,t,n){for(const s in t){const i=t[s],a=n[s];if(Jn(i))e.addValue(s,i);else if(Jn(a))e.addValue(s,bx(i,{owner:e}));else if(a!==i)if(e.hasValue(s)){const o=e.getValue(s);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=e.getStaticValue(s);e.addValue(s,bx(o!==void 0?o:i,{owner:e}))}}for(const s in n)t[s]===void 0&&e.removeValue(s);return t}const c3=new WeakMap,fbe=[...QW,Gn,vc],pbe=e=>fbe.find(XW(e)),d3=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class xbe{scrapeMotionValuesFromProps(t,n,s){return{}}constructor({parent:t,props:n,presenceContext:s,reducedMotionConfig:i,blockInitialAnimation:a,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=dA,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Va.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,xr.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=d,this.parent=t,this.props=n,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!a,this.isControllingVariants=lw(n),this.isVariantNode=ZH(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:h,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in m){const g=m[f];c[f]!==void 0&&Jn(g)&&g.set(c[f],!1)}}mount(t){this.current=t,c3.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),aq.current||hbe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:G2.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){c3.delete(this.current),this.projection&&this.projection.unmount(),gc(this.notifyUpdate),gc(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const s=iu.has(t),i=n.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&xr.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),a(),o&&o(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Xh){const n=Xh[t];if(!n)continue;const{isEnabled:s,Feature:i}=n;if(!this.features[t]&&i&&s(this.props)&&(this.features[t]=new i(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):tn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<d3.length;s++){const i=d3[s];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,o=t[a];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=mbe(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const s=this.values.get(t);n!==s&&(s&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&n!==void 0&&(s=bx(n===null?void 0:n,{owner:this}),this.addValue(t,s)),s}readValue(t,n){var s;let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(s=this.getBaseTargetFromProps(this.props,t))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(KW(i)||qW(i))?i=parseFloat(i):!pbe(i)&&vc.test(n)&&(i=aH(t,n)),this.setBaseTarget(t,Jn(i)?i.get():i)),Jn(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:s}=this.props;let i;if(typeof s=="string"||typeof s=="object"){const o=nA(this.props,s,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[t])}if(s&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!Jn(a)?a:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new NA),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class oq extends xbe{constructor(){super(...arguments),this.KeyframeResolver=oH}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:s}){delete n[t],delete s[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Jn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function gbe(e){return window.getComputedStyle(e)}class vbe extends oq{constructor(){super(...arguments),this.type="html",this.renderInstance=YH}readValueFromInstance(t,n){if(iu.has(n)){const s=fA(n);return s&&s.default||0}else{const s=gbe(t),i=(ZW(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return MH(t,n)}build(t,n,s){MA(t,n,s.transformTemplate)}scrapeMotionValuesFromProps(t,n,s){return AA(t,n,s)}}class ybe extends oq{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=tn}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(iu.has(n)){const s=fA(n);return s&&s.default||0}return n=XH.has(n)?n:SA(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,s){return eq(t,n,s)}build(t,n,s){DA(t,n,this.isSVGTag,s.transformTemplate)}renderInstance(t,n,s,i){QH(t,n,s,i)}mount(t){this.isSVGTag=IA(t.tagName),super.mount(t)}}const jbe=(e,t)=>TA(e)?new ybe(t):new vbe(t,{allowProjection:e!==j.Fragment}),bbe=ube({...o0e,...Oje,...bje,...Mje},jbe),u3=ive(bbe);class wbe extends j.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Nbe({children:e,isPresent:t}){const n=j.useId(),s=j.useRef(null),i=j.useRef({width:0,height:0,top:0,left:0}),{nonce:a}=j.useContext(CA);return j.useInsertionEffect(()=>{const{width:o,height:l,top:c,left:d}=i.current;if(t||!s.current||!o||!l)return;s.current.dataset.motionPopId=n;const h=document.createElement("style");return a&&(h.nonce=a),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${l}px !important;
            top: ${c}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[t]),r.jsx(wbe,{isPresent:t,childRef:s,sizeRef:i,children:j.cloneElement(e,{ref:s})})}const Sbe=({children:e,initial:t,isPresent:n,onExitComplete:s,custom:i,presenceAffectsLayout:a,mode:o})=>{const l=EA(_be),c=j.useId(),d=j.useCallback(m=>{l.set(m,!0);for(const f of l.values())if(!f)return;s&&s()},[l,s]),h=j.useMemo(()=>({id:c,initial:t,isPresent:n,custom:i,onExitComplete:d,register:m=>(l.set(m,!1),()=>l.delete(m))}),a?[Math.random(),d]:[n,d]);return j.useMemo(()=>{l.forEach((m,f)=>l.set(f,!1))},[n]),j.useEffect(()=>{!n&&!l.size&&s&&s()},[n]),o==="popLayout"&&(e=r.jsx(Nbe,{isPresent:n,children:e})),r.jsx(aw.Provider,{value:h,children:e})};function _be(){return new Map}const Kv=e=>e.key||"";function h3(e){const t=[];return j.Children.forEach(e,n=>{j.isValidElement(n)&&t.push(n)}),t}const Pbe=({children:e,exitBeforeEnter:t,custom:n,initial:s=!0,onExitComplete:i,presenceAffectsLayout:a=!0,mode:o="sync"})=>{const l=j.useMemo(()=>h3(e),[e]),c=l.map(Kv),d=j.useRef(!0),h=j.useRef(l),m=EA(()=>new Map),[f,g]=j.useState(l),[x,p]=j.useState(l);qH(()=>{d.current=!1,h.current=l;for(let w=0;w<x.length;w++){const N=Kv(x[w]);c.includes(N)?m.delete(N):m.get(N)!==!0&&m.set(N,!1)}},[x,c.length,c.join("-")]);const y=[];if(l!==f){let w=[...l];for(let N=0;N<x.length;N++){const S=x[N],P=Kv(S);c.includes(P)||(w.splice(N,0,S),y.push(S))}o==="wait"&&y.length&&(w=y),p(h3(w)),g(l);return}const{forceRender:b}=j.useContext(_A);return r.jsx(r.Fragment,{children:x.map(w=>{const N=Kv(w),S=l===x||c.includes(N),P=()=>{if(m.has(N))m.set(N,!0);else return;let C=!0;m.forEach(k=>{k||(C=!1)}),C&&(b==null||b(),p(h.current),i&&i())};return r.jsx(Sbe,{isPresent:S,initial:!d.current||s?void 0:!1,custom:S?void 0:n,presenceAffectsLayout:a,mode:o,onExitComplete:S?void 0:P,children:w},N)})})};function m3(){var je,_e;const[,e]=Jr(),{toast:t}=ft(),n=pn(),[s,i]=j.useState(null),[a,o]=j.useState("overview"),[l,c]=j.useState(""),[d,h]=j.useState("all"),[m,f]=j.useState(!1),[g,x]=j.useState(!1),[p,y]=j.useState(null),[b,w]=j.useState(!1),[N,S]=j.useState(null),[P,C]=j.useState(null),[k,O]=j.useState(!1),[I,T]=j.useState(!1),[E,D]=j.useState({name:"",minDistance:"",maxDistance:"",baseFee:"",perKmRate:"",isActive:!0}),[B,M]=j.useState(!1);j.useEffect(()=>{const Q=localStorage.getItem("adminUser");if(Q&&Q!=="undefined"&&Q!=="null")try{const ve=JSON.parse(Q);i(ve)}catch(ve){console.error("Error parsing admin user data:",ve),localStorage.removeItem("adminUser"),e("/admin/login")}else e("/admin/login")},[e]),Re({queryKey:["/api/admin/dashboard/stats"],enabled:!!s});const{data:U=[]}=Re({queryKey:["/api/admin/users"],enabled:!!s}),{data:H=[]}=Re({queryKey:["/api/delivery-partners"],enabled:!!s}),{data:K=[]}=Re({queryKey:["/api/admin/stores"],enabled:!!s}),{data:W=[]}=Re({queryKey:["/api/admin/products"],enabled:!!s}),{data:V=[]}=Re({queryKey:["/api/admin/orders"],enabled:!!s}),{data:z=[]}=Re({queryKey:["/api/admin/users/pending"],enabled:!!s}),{data:q=[]}=Re({queryKey:["/api/admin/coupons"],enabled:!!s}),{data:J=[]}=Re({queryKey:["/api/delivery-zones"],enabled:!!s}),pe=pt({mutationFn:async Q=>(await Bt(`/api/admin/users/${Q}/approve`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:s.id})})).json(),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/admin/users"]}),n.invalidateQueries({queryKey:["/api/admin/users/pending"]}),t({title:"Success",description:"User approved successfully"})},onError:Q=>{t({title:"Error",description:Q.message||"Failed to approve user",variant:"destructive"})}}),ye=pt({mutationFn:async({userId:Q,reason:ve})=>(await Bt(`/api/admin/users/${Q}/reject`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:s.id,reason:ve})})).json(),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/admin/users"]}),n.invalidateQueries({queryKey:["/api/admin/users/pending"]}),t({title:"Success",description:"User rejected successfully"})},onError:Q=>{t({title:"Error",description:Q.message||"Failed to reject user",variant:"destructive"})}}),Ne=pt({mutationFn:async Q=>(await Bt(`/api/delivery-partners/${Q}/approve`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:s.id})})).json(),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/delivery-partners"]}),n.invalidateQueries({queryKey:["/api/admin/users"]}),n.invalidateQueries({queryKey:["/api/admin/users/pending"]}),t({title:"Success",description:"Delivery partner approved successfully"})},onError:Q=>{t({title:"Error",description:Q.message||"Failed to approve delivery partner",variant:"destructive"})}}),ke=pt({mutationFn:async({partnerId:Q,reason:ve})=>(await Bt(`/api/delivery-partners/${Q}/reject`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:s.id,reason:ve})})).json(),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/delivery-partners"]}),n.invalidateQueries({queryKey:["/api/admin/users"]}),n.invalidateQueries({queryKey:["/api/admin/users/pending"]}),t({title:"Success",description:"Delivery partner rejected successfully"})},onError:Q=>{t({title:"Error",description:Q.message||"Failed to reject delivery partner",variant:"destructive"})}}),Ee=pt({mutationFn:async Q=>(await Bt(`/api/admin/users/${Q}/ban`,{method:"PUT"})).json(),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/admin/users"]}),t({title:"Success",description:"User banned successfully"})}}),We=pt({mutationFn:async Q=>(await Bt(`/api/admin/users/${Q}/unban`,{method:"PUT"})).json(),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/admin/users"]}),t({title:"Success",description:"User unbanned successfully"})}}),Se=pt({mutationFn:async({id:Q,data:ve})=>(await Bt(`/api/admin/delivery-zones/${Q}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...ve,adminId:s.id})})).json(),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/delivery-zones"]}),O(!1),C(null),t({title:"Success",description:"Delivery zone updated successfully"})},onError:Q=>{t({title:"Error",description:Q.message||"Failed to update delivery zone",variant:"destructive"})}}),Me=pt({mutationFn:async Q=>(await Bt("/api/admin/delivery-zones",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...Q,adminId:s.id})})).json(),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/delivery-zones"]}),T(!1),D({name:"",minDistance:"",maxDistance:"",baseFee:"",perKmRate:"",isActive:!0}),t({title:"Success",description:"Delivery zone created successfully"})},onError:Q=>{t({title:"Error",description:Q.message||"Failed to create delivery zone",variant:"destructive"})}}),Ie=pt({mutationFn:async Q=>(await Bt("/api/admin/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...Q,adminId:s.id})})).json(),onSuccess:Q=>{const ve={...s,...Q.admin};i(ve),localStorage.setItem("adminUser",JSON.stringify(ve)),t({title:"Success",description:"Profile updated successfully"}),M(!1)},onError:Q=>{t({title:"Error",description:Q.message||"Failed to update profile",variant:"destructive"})}}),$=()=>{localStorage.removeItem("adminUser"),e("/admin/login")},ee=Array.isArray(U)?U.length:0,X=Array.isArray(K)?K.length:0,Ce=Array.isArray(W)?W.length:0,$e=Array.isArray(V)?V.length:0,He=Array.isArray(z)?z.length:0,lt=Array.isArray(U)?U.filter(Q=>Q.status==="active").length:0,Tt=Array.isArray(V)?V.reduce((Q,ve)=>Q+(ve.total||0),0):0,ir=$e>0?Tt/$e:0,Ut=({status:Q})=>{const ve={active:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",banned:"bg-red-100 text-red-800",rejected:"bg-gray-100 text-gray-800"};return r.jsx(le,{className:ve[Q]||"bg-gray-100 text-gray-800",children:Q.charAt(0).toUpperCase()+Q.slice(1)})},ce=[{id:"overview",label:"Overview",icon:ti},{id:"users",label:"Users",icon:vd},{id:"stores",label:"Stores",icon:nr},{id:"products",label:"Products",icon:rt},{id:"orders",label:"Orders",icon:Bn},{id:"pending",label:"Pending Approvals",icon:gt},{id:"coupons",label:"Coupons",icon:Kp},{id:"delivery",label:"Delivery Zones",icon:kt},{id:"analytics",label:"Analytics",icon:L_},{id:"settings",label:"Settings",icon:Rd}];return s?r.jsxs("div",{className:"flex h-screen bg-gray-50",children:[r.jsxs(u3.div,{initial:!1,animate:{width:m?80:280},className:"bg-white shadow-lg border-r border-gray-200 flex flex-col",children:[r.jsxs("div",{className:"p-6 border-b border-gray-200",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(qp,{className:"h-8 w-8 text-blue-600"}),!m&&r.jsxs("div",{className:"ml-3",children:[r.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Admin Panel"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Siraha Bazaar"})]})]}),!m&&r.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(yo,{className:"h-8 w-8",children:r.jsx(jo,{className:"bg-blue-100 text-blue-600",children:((je=s.fullName)==null?void 0:je.charAt(0))||"A"})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.fullName}),r.jsx("p",{className:"text-xs text-gray-500",children:"Administrator"})]})]})})]}),r.jsx("nav",{className:"flex-1 p-4 space-y-2",children:ce.map(Q=>{const ve=Q.icon,Te=a===Q.id;return r.jsxs("button",{onClick:()=>o(Q.id),className:`w-full flex items-center px-3 py-2 rounded-lg text-left transition-colors ${Te?"bg-blue-100 text-blue-700 border border-blue-200":"text-gray-600 hover:bg-gray-100"}`,children:[r.jsx(ve,{className:"h-5 w-5"}),!m&&r.jsx("span",{className:"ml-3",children:Q.label}),Q.id==="pending"&&He>0&&r.jsx(le,{className:"ml-auto bg-red-500 text-white",children:He})]},Q.id)})}),r.jsxs("div",{className:"p-4 border-t border-gray-200 space-y-2",children:[r.jsxs(F,{variant:"ghost",size:"sm",onClick:()=>f(!m),className:"w-full justify-start",children:[r.jsx(ji,{className:"h-4 w-4"}),!m&&r.jsx("span",{className:"ml-2",children:"Collapse"})]}),r.jsxs(F,{variant:"ghost",size:"sm",onClick:$,className:"w-full justify-start text-red-600 hover:text-red-700 hover:bg-red-50",children:[r.jsx(Wp,{className:"h-4 w-4"}),!m&&r.jsx("span",{className:"ml-2",children:"Logout"})]})]})]}),r.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[r.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 capitalize",children:a.replace("-"," ")}),r.jsx("p",{className:"text-sm text-gray-500",children:"Manage your platform efficiently"})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs(F,{variant:"outline",size:"sm",children:[r.jsx(Ms,{className:"h-4 w-4 mr-2"}),"Refresh"]}),r.jsxs(F,{variant:"outline",size:"sm",children:[r.jsx(eu,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})}),r.jsx("main",{className:"flex-1 overflow-auto p-6",children:r.jsx(Pbe,{mode:"wait",children:r.jsxs(u3.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},children:[a==="overview"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(G,{children:r.jsx(Z,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:ee}),r.jsxs("p",{className:"text-sm text-green-600 mt-1",children:[lt," active"]})]}),r.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:r.jsx(vd,{className:"h-6 w-6 text-blue-600"})})]})})}),r.jsx(G,{children:r.jsx(Z,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Stores"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:X}),r.jsxs("p",{className:"text-sm text-blue-600 mt-1",children:[K.filter(Q=>Q.status==="active").length," active"]})]}),r.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:r.jsx(nr,{className:"h-6 w-6 text-green-600"})})]})})}),r.jsx(G,{children:r.jsx(Z,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:$e}),r.jsxs("p",{className:"text-sm text-purple-600 mt-1",children:["$",ir.toFixed(2)," avg"]})]}),r.jsx("div",{className:"bg-purple-100 p-3 rounded-full",children:r.jsx(Bn,{className:"h-6 w-6 text-purple-600"})})]})})}),r.jsx(G,{children:r.jsx(Z,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),r.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["$",Tt.toFixed(2)]}),r.jsx("p",{className:"text-sm text-green-600 mt-1",children:"+12% from last month"})]}),r.jsx("div",{className:"bg-yellow-100 p-3 rounded-full",children:r.jsx(Hr,{className:"h-6 w-6 text-yellow-600"})})]})})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsxs(ie,{className:"flex items-center",children:[r.jsx(gt,{className:"h-5 w-5 mr-2"}),"Pending Approvals"]}),r.jsx(Ct,{children:"Users waiting for approval"})]}),r.jsx(Z,{children:!Array.isArray(z)||z.length===0?r.jsx("p",{className:"text-gray-500 text-center py-4",children:"No pending approvals"}):r.jsxs("div",{className:"space-y-3",children:[Array.isArray(z)&&z.slice(0,3).map(Q=>{var ve;return r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(yo,{className:"h-8 w-8",children:r.jsx(jo,{children:((ve=Q.fullName)==null?void 0:ve.charAt(0))||"U"})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"text-sm font-medium",children:Q.fullName}),r.jsx("p",{className:"text-xs text-gray-500",children:Q.email})]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(F,{size:"sm",onClick:()=>pe.mutate(Q.id),disabled:pe.isPending||ye.isPending,className:"bg-green-600 hover:bg-green-700 text-white disabled:opacity-50 transition-all duration-200",children:pe.isPending?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):r.jsx(wt,{className:"h-4 w-4"})}),r.jsx(F,{size:"sm",variant:"outline",onClick:()=>ye.mutate({userId:Q.id,reason:"Admin rejection"}),disabled:pe.isPending||ye.isPending,className:"border-red-300 text-red-600 hover:bg-red-50 disabled:opacity-50 transition-all duration-200",children:ye.isPending?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-600"}):r.jsx(Ys,{className:"h-4 w-4"})})]})]},Q.id)}),Array.isArray(z)&&z.length>3&&r.jsxs(F,{variant:"outline",size:"sm",onClick:()=>o("pending"),className:"w-full",children:["View All (",z.length,")"]})]})})]}),r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsxs(ie,{className:"flex items-center",children:[r.jsx(wn,{className:"h-5 w-5 mr-2"}),"Recent Activity"]}),r.jsx(Ct,{children:"Latest platform activities"})]}),r.jsx(Z,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm",children:"New store registered"}),r.jsx("p",{className:"text-xs text-gray-500",children:"2 hours ago"})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm",children:"Order #1234 completed"}),r.jsx("p",{className:"text-xs text-gray-500",children:"4 hours ago"})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm",children:"New product added"}),r.jsx("p",{className:"text-xs text-gray-500",children:"6 hours ago"})]})]})]})})]})]})]}),a==="users"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(zn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx(he,{placeholder:"Search users...",value:l,onChange:Q=>c(Q.target.value),className:"pl-10 w-80"})]}),r.jsxs(ct,{value:d,onValueChange:h,children:[r.jsx(it,{className:"w-40",children:r.jsx(dt,{placeholder:"Filter by status"})}),r.jsxs(at,{children:[r.jsx(ne,{value:"all",children:"All Status"}),r.jsx(ne,{value:"active",children:"Active"}),r.jsx(ne,{value:"pending",children:"Pending"}),r.jsx(ne,{value:"banned",children:"Banned"})]})]})]}),r.jsxs(F,{children:[r.jsx(Wt,{className:"h-4 w-4 mr-2"}),"Add User"]})]}),r.jsx(G,{children:r.jsx(Z,{className:"p-0",children:r.jsxs(wi,{children:[r.jsx(Ni,{children:r.jsxs(Vr,{children:[r.jsx(Ze,{children:"User"}),r.jsx(Ze,{children:"Email"}),r.jsx(Ze,{children:"Role"}),r.jsx(Ze,{children:"Status"}),r.jsx(Ze,{children:"Joined"}),r.jsx(Ze,{children:"Actions"})]})}),r.jsx(Si,{children:Array.isArray(U)&&U.filter(Q=>{var qe,Pt;const ve=((qe=Q.fullName)==null?void 0:qe.toLowerCase().includes(l.toLowerCase()))||((Pt=Q.email)==null?void 0:Pt.toLowerCase().includes(l.toLowerCase())),Te=d==="all"||Q.status===d;return ve&&Te}).map(Q=>{var ve;return r.jsxs(Vr,{children:[r.jsx(Ye,{children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(yo,{className:"h-8 w-8",children:r.jsx(jo,{children:((ve=Q.fullName)==null?void 0:ve.charAt(0))||"U"})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"font-medium",children:Q.fullName}),r.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",Q.id]})]})]})}),r.jsx(Ye,{children:Q.email}),r.jsx(Ye,{children:r.jsx(le,{variant:"outline",children:Q.role})}),r.jsx(Ye,{children:r.jsx(Ut,{status:Q.status})}),r.jsx(Ye,{children:Q.createdAt?new Date(Q.createdAt).toLocaleDateString():"N/A"}),r.jsx(Ye,{children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(F,{size:"sm",variant:"outline",onClick:()=>{y(Q),x(!0)},children:r.jsx(ks,{className:"h-4 w-4"})}),Q.status==="banned"?r.jsx(F,{size:"sm",variant:"outline",onClick:()=>We.mutate(Q.id),disabled:We.isPending,children:r.jsx(z_,{className:"h-4 w-4"})}):r.jsxs(QD,{children:[r.jsx(JD,{asChild:!0,children:r.jsx(F,{size:"sm",variant:"destructive",children:r.jsx(Bte,{className:"h-4 w-4"})})}),r.jsxs(_2,{children:[r.jsxs(P2,{children:[r.jsx(k2,{children:"Ban User"}),r.jsxs(T2,{children:["Are you sure you want to ban ",Q.fullName,"? This action can be reversed later."]})]}),r.jsxs(C2,{children:[r.jsx(E2,{children:"Cancel"}),r.jsx(A2,{onClick:()=>Ee.mutate(Q.id),className:"bg-red-600 hover:bg-red-700",children:"Ban User"})]})]})]})]})})]},Q.id)})})]})})})]}),a==="stores"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center space-x-4",children:r.jsxs("div",{className:"relative",children:[r.jsx(zn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx(he,{placeholder:"Search stores...",value:l,onChange:Q=>c(Q.target.value),className:"pl-10 w-80"})]})}),r.jsxs(F,{children:[r.jsx(Wt,{className:"h-4 w-4 mr-2"}),"Add Store"]})]}),r.jsx(G,{children:r.jsx(Z,{className:"p-0",children:r.jsxs(wi,{children:[r.jsx(Ni,{children:r.jsxs(Vr,{children:[r.jsx(Ze,{children:"Store"}),r.jsx(Ze,{children:"```python Type"}),r.jsx(Ze,{children:"Owner"}),r.jsx(Ze,{children:"Status"}),r.jsx(Ze,{children:"Products"}),r.jsx(Ze,{children:"Actions"})]})}),r.jsx(Si,{children:Array.isArray(K)&&K.filter(Q=>{var ve;return(ve=Q.name)==null?void 0:ve.toLowerCase().includes(l.toLowerCase())}).map(Q=>{var ve;return r.jsxs(Vr,{children:[r.jsx(Ye,{children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-lg flex items-center justify-center",children:r.jsx(nr,{className:"h-5 w-5 text-gray-500"})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"font-medium",children:Q.name}),r.jsxs("p",{className:"text-sm text-gray-500",children:[(ve=Q.description)==null?void 0:ve.substring(0,50),"..."]})]})]})}),r.jsx(Ye,{children:r.jsx(le,{variant:"outline",children:Q.type})}),r.jsx(Ye,{children:Q.ownerName||"N/A"}),r.jsx(Ye,{children:r.jsx(Ut,{status:Q.status||"active"})}),r.jsx(Ye,{children:Q.productCount||0}),r.jsx(Ye,{children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(F,{size:"sm",variant:"outline",onClick:()=>{S(Q),w(!0)},children:r.jsx(ks,{className:"h-4 w-4"})}),r.jsx(F,{size:"sm",variant:"outline",children:r.jsx(us,{className:"h-4 w-4"})})]})})]},Q.id)})})]})})})]}),a==="pending"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsx(ie,{children:"Pending User Approvals"}),r.jsx(Ct,{children:"Users waiting for admin approval to access the platform"})]}),r.jsx(Z,{children:z.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(wt,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"All caught up!"}),r.jsx("p",{className:"text-gray-500",children:"No pending user approvals at the moment."})]}):r.jsx("div",{className:"space-y-4",children:Array.isArray(z)&&z.map(Q=>{var ve;return r.jsx(G,{className:"border-l-4 border-l-yellow-400",children:r.jsx(Z,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(yo,{className:"h-12 w-12",children:r.jsx(jo,{className:"bg-yellow-100 text-yellow-600",children:((ve=Q.fullName)==null?void 0:ve.charAt(0))||"U"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900",children:Q.fullName}),r.jsx("p",{className:"text-sm text-gray-500",children:Q.email}),r.jsxs("div",{className:"flex items-center mt-2 space-x-4",children:[r.jsx(le,{variant:"outline",children:Q.role}),r.jsxs("span",{className:"text-xs text-gray-500",children:["Applied: ",Q.createdAt?new Date(Q.createdAt).toLocaleDateString():"N/A"]})]})]})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsxs(F,{onClick:()=>pe.mutate(Q.id),disabled:pe.isPending||ye.isPending,className:"bg-green-600 hover:bg-green-700 disabled:opacity-50 transition-all duration-200",children:[pe.isPending?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):r.jsx(wt,{className:"h-4 w-4 mr-2"}),pe.isPending?"Approving...":"Approve"]}),r.jsxs(F,{variant:"destructive",onClick:()=>ye.mutate({userId:Q.id,reason:"Admin rejection"}),disabled:pe.isPending||ye.isPending,className:"disabled:opacity-50 transition-all duration-200",children:[ye.isPending?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):r.jsx(Ys,{className:"h-4 w-4 mr-2"}),ye.isPending?"Rejecting...":"Reject"]})]})]})})},Q.id)})})})]}),r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsx(ie,{children:"Pending Delivery Partner Approvals"}),r.jsx(Ct,{children:"Delivery partners waiting for admin approval to start working"})]}),r.jsx(Z,{children:(()=>{const Q=H.filter(ve=>ve.status==="pending");return Q.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(wt,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"All caught up!"}),r.jsx("p",{className:"text-gray-500",children:"No pending delivery partner approvals at the moment."})]}):r.jsx("div",{className:"space-y-4",children:Q.map(ve=>{var qe;const Te=U.find(Pt=>Pt.id===ve.userId);return r.jsx(G,{className:"border-l-4 border-l-orange-400",children:r.jsx(Z,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(yo,{className:"h-12 w-12",children:r.jsx(jo,{className:"bg-orange-100 text-orange-600",children:r.jsx(kt,{className:"h-6 w-6"})})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900",children:(Te==null?void 0:Te.fullName)||"Unknown User"}),r.jsx("p",{className:"text-sm text-gray-500",children:Te==null?void 0:Te.email}),r.jsxs("div",{className:"flex items-center mt-2 space-x-4",children:[r.jsxs(le,{variant:"outline",className:"text-orange-600 border-orange-300",children:[ve.vehicleType,"  ",ve.vehicleNumber]}),r.jsxs("span",{className:"text-xs text-gray-500",children:["Applied: ",ve.createdAt?new Date(ve.createdAt).toLocaleDateString():"N/A"]})]}),r.jsxs("div",{className:"flex items-center mt-1 space-x-2",children:[r.jsx("span",{className:"text-xs text-gray-500",children:"Areas:"}),(qe=ve.deliveryAreas)==null?void 0:qe.map((Pt,fr)=>r.jsx(le,{variant:"secondary",className:"text-xs px-1 py-0",children:Pt},fr))]})]})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx(F,{onClick:()=>Ne.mutate(ve.id),disabled:Ne.isPending||ke.isPending,className:"bg-green-600 hover:bg-green-700 disabled:opacity-50 transition-all duration-200",children:Ne.isPending?r.jsxs(r.Fragment,{children:[r.jsx(la,{className:"h-4 w-4 mr-2 animate-spin"}),"Approving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(wt,{className:"h-4 w-4 mr-2"}),"Approve"]})}),r.jsxs(QD,{children:[r.jsx(JD,{asChild:!0,children:r.jsxs(F,{variant:"destructive",disabled:Ne.isPending||ke.isPending,children:[r.jsx(Fr,{className:"h-4 w-4 mr-2"}),"Reject"]})}),r.jsxs(_2,{children:[r.jsxs(P2,{children:[r.jsx(k2,{children:"Reject Delivery Partner"}),r.jsxs(T2,{children:["Are you sure you want to reject ",Te==null?void 0:Te.fullName,"? Please provide a reason for rejection."]})]}),r.jsx(Yt,{placeholder:"Reason for rejection...",id:`reject-reason-${ve.id}`,className:"mt-2"}),r.jsxs(C2,{children:[r.jsx(E2,{children:"Cancel"}),r.jsx(A2,{onClick:()=>{var fr;const Pt=((fr=document.getElementById(`reject-reason-${ve.id}`))==null?void 0:fr.value)||"Application does not meet requirements";ke.mutate({partnerId:ve.id,reason:Pt})},className:"bg-red-600 hover:bg-red-700",children:ke.isPending?r.jsxs(r.Fragment,{children:[r.jsx(la,{className:"h-4 w-4 mr-2 animate-spin"}),"Rejecting..."]}):"Reject Partner"})]})]})]})]})]})})},ve.id)})})})()})]})]}),a==="products"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center space-x-4",children:r.jsxs("div",{className:"relative",children:[r.jsx(zn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx(he,{placeholder:"Search products...",value:l,onChange:Q=>c(Q.target.value),className:"pl-10 w-80"})]})}),r.jsxs(F,{children:[r.jsx(Wt,{className:"h-4 w-4 mr-2"}),"Add Product"]})]}),r.jsx(G,{children:r.jsx(Z,{className:"p-0",children:r.jsxs(wi,{children:[r.jsx(Ni,{children:r.jsxs(Vr,{children:[r.jsx(Ze,{children:"Product"}),r.jsx(Ze,{children:"Store"}),r.jsx(Ze,{children:"Price"}),r.jsx(Ze,{children:"Stock"}),r.jsx(Ze,{children:"Status"}),r.jsx(Ze,{children:"Actions"})]})}),r.jsx(Si,{children:Array.isArray(W)&&W.filter(Q=>{var ve;return(ve=Q.name)==null?void 0:ve.toLowerCase().includes(l.toLowerCase())}).map(Q=>{var ve;return r.jsxs(Vr,{children:[r.jsx(Ye,{children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-lg flex items-center justify-center",children:r.jsx(rt,{className:"h-5 w-5 text-gray-500"})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"font-medium",children:Q.name}),r.jsxs("p",{className:"text-sm text-gray-500",children:[(ve=Q.description)==null?void 0:ve.substring(0,50),"..."]})]})]})}),r.jsx(Ye,{children:Q.storeName||"N/A"}),r.jsxs(Ye,{children:["$",Q.price]}),r.jsx(Ye,{children:Q.stock||0}),r.jsx(Ye,{children:r.jsx(Ut,{status:Q.isActive?"active":"inactive"})}),r.jsx(Ye,{children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(F,{size:"sm",variant:"outline",children:r.jsx(ks,{className:"h-4 w-4"})}),r.jsx(F,{size:"sm",variant:"outline",children:r.jsx(us,{className:"h-4 w-4"})})]})})]},Q.id)})})]})})})]}),a==="orders"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(zn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx(he,{placeholder:"Search orders...",value:l,onChange:Q=>c(Q.target.value),className:"pl-10 w-80"})]}),r.jsxs(ct,{value:d,onValueChange:h,children:[r.jsx(it,{className:"w-40",children:r.jsx(dt,{placeholder:"Filter by status"})}),r.jsxs(at,{children:[r.jsx(ne,{value:"all",children:"All Status"}),r.jsx(ne,{value:"pending",children:"Pending"}),r.jsx(ne,{value:"confirmed",children:"Confirmed"}),r.jsx(ne,{value:"shipped",children:"Shipped"}),r.jsx(ne,{value:"delivered",children:"Delivered"}),r.jsx(ne,{value:"cancelled",children:"Cancelled"})]})]})]})}),r.jsx(G,{children:r.jsx(Z,{className:"p-0",children:r.jsxs(wi,{children:[r.jsx(Ni,{children:r.jsxs(Vr,{children:[r.jsx(Ze,{children:"Order ID"}),r.jsx(Ze,{children:"Customer"}),r.jsx(Ze,{children:"Total"}),r.jsx(Ze,{children:"Status"}),r.jsx(Ze,{children:"Date"}),r.jsx(Ze,{children:"Actions"})]})}),r.jsx(Si,{children:Array.isArray(V)&&V.filter(Q=>d==="all"||Q.status===d).map(Q=>r.jsxs(Vr,{children:[r.jsx(Ye,{children:r.jsxs("span",{className:"font-mono text-sm",children:["#",Q.id]})}),r.jsx(Ye,{children:Q.customerName||"N/A"}),r.jsxs(Ye,{children:["$",Q.totalAmount||Q.total||0]}),r.jsx(Ye,{children:r.jsx(Ut,{status:Q.status})}),r.jsx(Ye,{children:Q.createdAt?new Date(Q.createdAt).toLocaleDateString():"N/A"}),r.jsx(Ye,{children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(F,{size:"sm",variant:"outline",children:r.jsx(ks,{className:"h-4 w-4"})}),r.jsx(F,{size:"sm",variant:"outline",children:r.jsx(us,{className:"h-4 w-4"})})]})})]},Q.id))})]})})})]}),a==="coupons"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-medium",children:"Coupon Management"}),r.jsxs(F,{children:[r.jsx(Wt,{className:"h-4 w-4 mr-2"}),"Add Coupon"]})]}),r.jsx(G,{children:r.jsx(Z,{className:"p-0",children:r.jsxs(wi,{children:[r.jsx(Ni,{children:r.jsxs(Vr,{children:[r.jsx(Ze,{children:"Code"}),r.jsx(Ze,{children:"Discount"}),r.jsx(Ze,{children:"Min Order"}),r.jsx(Ze,{children:"Usage"}),r.jsx(Ze,{children:"Status"}),r.jsx(Ze,{children:"Expires"}),r.jsx(Ze,{children:"Actions"})]})}),r.jsx(Si,{children:Array.isArray(q)&&q.map(Q=>r.jsxs(Vr,{children:[r.jsx(Ye,{children:r.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-sm",children:Q.code})}),r.jsx(Ye,{children:Q.discountType==="percentage"?`${Q.discountValue}%`:`$${Q.discountValue}`}),r.jsxs(Ye,{children:["$",Q.minimumOrderAmount||0]}),r.jsxs(Ye,{children:[Q.usedCount||0," / ",Q.usageLimit||""]}),r.jsx(Ye,{children:r.jsx(Ut,{status:Q.isActive?"active":"inactive"})}),r.jsx(Ye,{children:Q.expiresAt?new Date(Q.expiresAt).toLocaleDateString():"Never"}),r.jsx(Ye,{children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(F,{size:"sm",variant:"outline",children:r.jsx(us,{className:"h-4 w-4"})}),r.jsx(F,{size:"sm",variant:"destructive",children:r.jsx(Xs,{className:"h-4 w-4"})})]})})]},Q.id))})]})})})]}),a==="delivery"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-medium",children:"Delivery Zone Management"}),r.jsxs(F,{onClick:()=>T(!0),children:[r.jsx(Wt,{className:"h-4 w-4 mr-2"}),"Add Zone"]})]}),r.jsx(G,{children:r.jsx(Z,{className:"p-6",children:Array.isArray(J)&&J.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(kt,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No delivery zones configured"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"Set up delivery zones to manage shipping fees and coverage areas."}),r.jsxs(F,{children:[r.jsx(Wt,{className:"h-4 w-4 mr-2"}),"Create First Zone"]})]}):r.jsx("div",{className:"space-y-4",children:Array.isArray(J)&&J.map(Q=>r.jsx(G,{className:"border",children:r.jsx(Z,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium",children:Q.name}),r.jsxs("p",{className:"text-sm text-gray-500",children:[Q.minDistance,"km - ",Q.maxDistance,"km"]}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Base fee: $",Q.baseFee," + $",Q.perKmRate,"/km"]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(jn,{checked:Q.isActive,className:"data-[state=checked]:bg-green-600"}),r.jsx(F,{size:"sm",variant:"outline",onClick:()=>{C(Q),O(!0)},children:r.jsx(us,{className:"h-4 w-4"})}),r.jsx(F,{size:"sm",variant:"destructive",children:r.jsx(Xs,{className:"h-4 w-4"})})]})]})})},Q.id))})})})]}),a==="settings"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("h3",{className:"text-lg font-medium",children:"System Settings"}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsx(ie,{children:"Admin Profile"}),r.jsx(Ct,{children:"Manage your admin account details"})]}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(be,{htmlFor:"admin-name",children:"Full Name"}),r.jsx(he,{id:"admin-name",value:(s==null?void 0:s.fullName)||"",readOnly:!0,className:"mt-1 bg-gray-50"})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"admin-email",children:"Email"}),r.jsx(he,{id:"admin-email",value:(s==null?void 0:s.email)||"",readOnly:!0,className:"mt-1 bg-gray-50"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(Ir,{open:B,onOpenChange:M,children:[r.jsx(Ns,{asChild:!0,children:r.jsxs(F,{variant:"outline",size:"sm",children:[r.jsx(us,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})}),r.jsxs(Tr,{children:[r.jsxs(Ar,{children:[r.jsx(Er,{children:"Edit Admin Profile"}),r.jsx(Ss,{children:"Update your admin account information"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(be,{htmlFor:"edit-name",children:"Full Name"}),r.jsx(he,{id:"edit-name",defaultValue:(s==null?void 0:s.fullName)||"",placeholder:"Enter your full name"})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"edit-email",children:"Email"}),r.jsx(he,{id:"edit-email",type:"email",defaultValue:(s==null?void 0:s.email)||"",placeholder:"Enter your email"})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(F,{variant:"outline",onClick:()=>M(!1),children:"Cancel"}),r.jsx(F,{onClick:()=>{const Q=document.getElementById("edit-name"),ve=document.getElementById("edit-email");if(!Q.value||!ve.value){t({title:"Error",description:"Please fill in all fields.",variant:"destructive"});return}Ie.mutate({fullName:Q.value,email:ve.value})},disabled:Ie.isPending,children:"Save Changes"})]})]})]})]}),r.jsxs(Ir,{children:[r.jsx(Ns,{asChild:!0,children:r.jsxs(F,{variant:"outline",size:"sm",children:[r.jsx(qp,{className:"h-4 w-4 mr-2"}),"Change Password"]})}),r.jsxs(Tr,{children:[r.jsxs(Ar,{children:[r.jsx(Er,{children:"Change Admin Password"}),r.jsx(Ss,{children:"Enter your current password and choose a new secure password"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(be,{htmlFor:"current-password",children:"Current Password"}),r.jsx(he,{id:"current-password",type:"password",placeholder:"Enter your current password"})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"new-password",children:"New Password"}),r.jsx(he,{id:"new-password",type:"password",placeholder:"Enter new password"})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"confirm-password",children:"Confirm New Password"}),r.jsx(he,{id:"confirm-password",type:"password",placeholder:"Confirm new password"})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(Ns,{asChild:!0,children:r.jsx(F,{variant:"outline",children:"Cancel"})}),r.jsx(F,{onClick:async()=>{const Q=document.getElementById("current-password"),ve=document.getElementById("new-password"),Te=document.getElementById("confirm-password");if(!Q.value||!ve.value){t({title:"Error",description:"Please fill in all password fields.",variant:"destructive"});return}if(ve.value!==Te.value){t({title:"Error",description:"New passwords do not match.",variant:"destructive"});return}if(ve.value.length<6){t({title:"Error",description:"New password must be at least 6 characters long.",variant:"destructive"});return}try{const qe=await Bt("/api/admin/change-password",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:s.id,currentPassword:Q.value,newPassword:ve.value})}),Pt=await qe.json();qe.ok?(t({title:"Password Changed",description:"Your admin password has been changed successfully."}),Q.value="",ve.value="",Te.value=""):t({title:"Error",description:Pt.error||"Failed to change password.",variant:"destructive"})}catch{t({title:"Error",description:"Network error. Please try again.",variant:"destructive"})}},children:"Change Password"})]})]})]})]})]})]})]}),r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsx(ie,{children:"Platform Settings"}),r.jsx(Ct,{children:"Configure general platform settings"})]}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(be,{htmlFor:"maintenance",children:"Maintenance Mode"}),r.jsx(jn,{id:"maintenance"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(be,{htmlFor:"registration",children:"Allow New Registrations"}),r.jsx(jn,{id:"registration",defaultChecked:!0})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(be,{htmlFor:"notifications",children:"Email Notifications"}),r.jsx(jn,{id:"notifications",defaultChecked:!0})]})]})]}),r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsx(ie,{children:"Commission Settings"}),r.jsx(Ct,{children:"Set platform commission rates"})]}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(be,{htmlFor:"store-commission",children:"Store Commission (%)"}),r.jsx(he,{id:"store-commission",type:"number",defaultValue:"5",className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"restaurant-commission",children:"Restaurant Commission (%)"}),r.jsx(he,{id:"restaurant-commission",type:"number",defaultValue:"8",className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"delivery-commission",children:"Delivery Commission (%)"}),r.jsx(he,{id:"delivery-commission",type:"number",defaultValue:"3",className:"mt-1"})]})]})]}),r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsx(ie,{children:"Payment Settings"}),r.jsx(Ct,{children:"Configure payment options"})]}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(be,{htmlFor:"cod",children:"Cash on Delivery"}),r.jsx(jn,{id:"cod",defaultChecked:!0})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(be,{htmlFor:"stripe",children:"Stripe Payments"}),r.jsx(jn,{id:"stripe",defaultChecked:!0})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(be,{htmlFor:"paypal",children:"PayPal Payments"}),r.jsx(jn,{id:"paypal"})]})]})]}),r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsx(ie,{children:"Security Settings"}),r.jsx(Ct,{children:"Manage security configurations"})]}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(be,{htmlFor:"session-timeout",children:"Session Timeout (minutes)"}),r.jsx(he,{id:"session-timeout",type:"number",defaultValue:"60",className:"mt-1"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(be,{htmlFor:"two-factor",children:"Two-Factor Authentication"}),r.jsx(jn,{id:"two-factor"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(be,{htmlFor:"password-policy",children:"Strong Password Policy"}),r.jsx(jn,{id:"password-policy",defaultChecked:!0})]})]})]})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:"System Information"})}),r.jsx(Z,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Platform Version"}),r.jsx("p",{className:"mt-1 text-lg font-semibold",children:"v2.1.0"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Database Status"}),r.jsx("p",{className:"mt-1 text-lg font-semibold text-green-600",children:"Connected"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Last Backup"}),r.jsx("p",{className:"mt-1 text-lg font-semibold",children:new Date().toLocaleDateString()})]})]})})]})]}),a==="analytics"&&r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:"Platform Growth"})}),r.jsx(Z,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{children:"User Growth"}),r.jsx("span",{children:"85%"})]}),r.jsx(bd,{value:85,className:"mt-2"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{children:"Store Growth"}),r.jsx("span",{children:"72%"})]}),r.jsx(bd,{value:72,className:"mt-2"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{children:"Revenue Growth"}),r.jsx("span",{children:"91%"})]}),r.jsx(bd,{value:91,className:"mt-2"})]})]})})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:"Quick Stats"})}),r.jsx(Z,{children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:ee}),r.jsx("div",{className:"text-sm text-gray-500",children:"Total Users"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:X}),r.jsx("div",{className:"text-sm text-gray-500",children:"Total Stores"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600",children:$e}),r.jsx("div",{className:"text-sm text-gray-500",children:"Total Orders"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:Ce}),r.jsx("div",{className:"text-sm text-gray-500",children:"Total Products"})]})]})})]})]})})]},a)})})]}),r.jsx(Ir,{open:g,onOpenChange:x,children:r.jsxs(Tr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(Ar,{children:r.jsx(Er,{children:"Complete User Registration Details"})}),p&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(yo,{className:"h-16 w-16",children:r.jsx(jo,{className:"text-lg",children:((_e=p.fullName)==null?void 0:_e.charAt(0))||"U"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-semibold",children:p.fullName}),r.jsx("p",{className:"text-gray-500",children:p.email}),r.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[r.jsx(le,{variant:"outline",children:p.role}),r.jsx(Ut,{status:p.status})]})]})]}),r.jsx(mn,{}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-lg font-semibold mb-3 text-blue-600",children:"Basic Information"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"User ID"}),r.jsx("p",{className:"mt-1",children:p.id})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Phone"}),r.jsx("p",{className:"mt-1",children:p.phone||"Not provided"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Email"}),r.jsx("p",{className:"mt-1",children:p.email})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Firebase UID"}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:p.firebaseUid||"Not linked"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Address"}),r.jsx("p",{className:"mt-1",children:p.address||"Not provided"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Joined Date"}),r.jsx("p",{className:"mt-1",children:p.createdAt?new Date(p.createdAt).toLocaleDateString():"N/A"})]})]})]}),p.role==="shopkeeper"&&r.jsxs(r.Fragment,{children:[r.jsx(mn,{}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-lg font-semibold mb-3 text-green-600",children:"Shopkeeper Details"}),(()=>{const Q=K.find(ve=>ve.ownerId===p.id);return Q?r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Store Name"}),r.jsx("p",{className:"mt-1",children:Q.name})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Store Type"}),r.jsx("p",{className:"mt-1",children:r.jsx(le,{variant:"outline",children:Q.type})})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Store Address"}),r.jsx("p",{className:"mt-1",children:Q.address||"Not provided"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Store Description"}),r.jsx("p",{className:"mt-1",children:Q.description||"No description"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Store Phone"}),r.jsx("p",{className:"mt-1",children:Q.phone||"Not provided"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Store Approval Status"}),r.jsx("p",{className:"mt-1",children:r.jsx(Ut,{status:Q.status||"active"})})]}),Q.type==="restaurant"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Delivery Fee"}),r.jsxs("p",{className:"mt-1",children:["",Q.deliveryFee||"Not set"]})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Minimum Order"}),r.jsxs("p",{className:"mt-1",children:["",Q.minimumOrder||"Not set"]})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Cuisine Type"}),r.jsx("p",{className:"mt-1",children:Q.cuisineType||"Not specified"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Opening Hours"}),r.jsx("p",{className:"mt-1",children:Q.openingHours||"Not specified"})]})]})]}):r.jsx("p",{className:"text-gray-500 italic",children:"No store information found for this shopkeeper."})})()]})]}),p.role==="delivery_partner"&&r.jsxs(r.Fragment,{children:[r.jsx(mn,{}),r.jsxs("div",{children:[r.jsxs("h4",{className:"text-lg font-semibold mb-4 text-orange-600 flex items-center",children:[r.jsx(kt,{className:"h-5 w-5 mr-2"}),"Comprehensive Delivery Partner Information"]}),(()=>{var ve;const Q=H.find(Te=>Te.userId===p.id);return Q?r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-orange-50 p-4 rounded-lg",children:r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Partner ID"}),r.jsx("p",{className:"mt-1 font-semibold",children:Q.id})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Approval Status"}),r.jsx("p",{className:"mt-1",children:r.jsx(Ut,{status:Q.status})})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Registration Date"}),r.jsx("p",{className:"mt-1 text-sm",children:Q.createdAt?new Date(Q.createdAt).toLocaleDateString():"N/A"})]})]})}),r.jsxs("div",{children:[r.jsxs("h5",{className:"text-md font-medium text-gray-800 mb-3 flex items-center",children:[r.jsx(_k,{className:"h-4 w-4 mr-2"}),"Vehicle Details"]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 bg-gray-50 p-4 rounded-lg",children:[r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Type"}),r.jsx("p",{className:"mt-1",children:r.jsx(le,{variant:"outline",children:Q.vehicleType})})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Number"}),r.jsx("p",{className:"mt-1 font-mono",children:Q.vehicleNumber})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Brand"}),r.jsx("p",{className:"mt-1",children:Q.vehicleBrand||"Not specified"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Model"}),r.jsx("p",{className:"mt-1",children:Q.vehicleModel||"Not specified"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Year"}),r.jsx("p",{className:"mt-1",children:Q.vehicleYear||"Not specified"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Color"}),r.jsx("p",{className:"mt-1",children:Q.vehicleColor||"Not specified"})]})]})]}),r.jsxs("div",{children:[r.jsxs("h5",{className:"text-md font-medium text-gray-800 mb-3 flex items-center",children:[r.jsx(Us,{className:"h-4 w-4 mr-2"}),"License & Documents"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-gray-50 p-4 rounded-lg",children:[r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Driving License"}),r.jsx("p",{className:"mt-1 font-mono",children:Q.drivingLicense||"Not provided"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"License Expiry"}),r.jsx("p",{className:"mt-1",children:Q.licenseExpiryDate||"Not specified"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"ID Proof Type"}),r.jsx("p",{className:"mt-1",children:r.jsx(le,{variant:"secondary",children:Q.idProofType})})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"ID Proof Number"}),r.jsx("p",{className:"mt-1 font-mono",children:Q.idProofNumber})]})]})]}),r.jsxs("div",{children:[r.jsxs("h5",{className:"text-md font-medium text-gray-800 mb-3 flex items-center",children:[r.jsx(Vp,{className:"h-4 w-4 mr-2"}),"Banking Information"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-gray-50 p-4 rounded-lg",children:[r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Account Number"}),r.jsx("p",{className:"mt-1 font-mono",children:Q.bankAccountNumber})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"IFSC Code"}),r.jsx("p",{className:"mt-1 font-mono",children:Q.ifscCode})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Bank Name"}),r.jsx("p",{className:"mt-1",children:Q.bankName||"Not specified"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Account Holder"}),r.jsx("p",{className:"mt-1",children:Q.accountHolderName||"Not specified"})]})]})]}),r.jsxs("div",{children:[r.jsxs("h5",{className:"text-md font-medium text-gray-800 mb-3 flex items-center",children:[r.jsx(Ot,{className:"h-4 w-4 mr-2"}),"Emergency Contact"]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 bg-gray-50 p-4 rounded-lg",children:[r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Contact Number"}),r.jsx("p",{className:"mt-1 font-mono",children:Q.emergencyContact})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Contact Name"}),r.jsx("p",{className:"mt-1",children:Q.emergencyContactName||"Not specified"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Relationship"}),r.jsx("p",{className:"mt-1",children:Q.emergencyContactRelation||"Not specified"})]})]})]}),r.jsxs("div",{children:[r.jsxs("h5",{className:"text-md font-medium text-gray-800 mb-3 flex items-center",children:[r.jsx(gt,{className:"h-4 w-4 mr-2"}),"Working Preferences & Experience"]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-3",children:[r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Delivery Areas"}),r.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:((ve=Q.deliveryAreas)==null?void 0:ve.length)>0?Q.deliveryAreas.map((Te,qe)=>r.jsx(le,{variant:"secondary",className:"text-xs",children:Te},qe)):r.jsx("span",{className:"text-gray-500",children:"No areas specified"})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Working Hours"}),r.jsx("p",{className:"mt-1",children:Q.workingHours||"Not specified"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Experience"}),r.jsx("p",{className:"mt-1",children:Q.experience||"Not specified"})]})]}),Q.previousEmployment&&r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Previous Employment"}),r.jsx("p",{className:"mt-1 text-sm",children:Q.previousEmployment})]}),Q.references&&r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"References"}),r.jsx("p",{className:"mt-1 text-sm",children:Q.references})]})]})]}),(Q.idProofUrl||Q.drivingLicenseUrl||Q.vehicleRegistrationUrl||Q.insuranceUrl||Q.photoUrl)&&r.jsxs("div",{children:[r.jsxs("h5",{className:"text-md font-medium text-gray-800 mb-3 flex items-center",children:[r.jsx(Us,{className:"h-4 w-4 mr-2"}),"Uploaded Documents"]}),r.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:r.jsxs("div",{className:"flex flex-wrap gap-2",children:[Q.idProofUrl&&r.jsxs(F,{size:"sm",variant:"outline",onClick:()=>window.open(Q.idProofUrl,"_blank"),children:[r.jsx(Us,{className:"h-3 w-3 mr-1"}),"ID Proof"]}),Q.drivingLicenseUrl&&r.jsxs(F,{size:"sm",variant:"outline",onClick:()=>window.open(Q.drivingLicenseUrl,"_blank"),children:[r.jsx(Us,{className:"h-3 w-3 mr-1"}),"Driving License"]}),Q.vehicleRegistrationUrl&&r.jsxs(F,{size:"sm",variant:"outline",onClick:()=>window.open(Q.vehicleRegistrationUrl,"_blank"),children:[r.jsx(Us,{className:"h-3 w-3 mr-1"}),"Vehicle Registration"]}),Q.insuranceUrl&&r.jsxs(F,{size:"sm",variant:"outline",onClick:()=>window.open(Q.insuranceUrl,"_blank"),children:[r.jsx(Us,{className:"h-3 w-3 mr-1"}),"Insurance"]}),Q.photoUrl&&r.jsxs(F,{size:"sm",variant:"outline",onClick:()=>window.open(Q.photoUrl,"_blank"),children:[r.jsx(Wr,{className:"h-3 w-3 mr-1"}),"Photo"]})]})})]}),r.jsxs("div",{children:[r.jsxs("h5",{className:"text-md font-medium text-gray-800 mb-3 flex items-center",children:[r.jsx(wn,{className:"h-4 w-4 mr-2"}),"Current Status & Performance"]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 bg-blue-50 p-4 rounded-lg",children:[r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Current Availability"}),r.jsx("p",{className:"mt-1",children:r.jsx(le,{variant:Q.isAvailable?"default":"secondary",children:Q.isAvailable?"Available":"Offline"})})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Total Deliveries"}),r.jsx("p",{className:"mt-1 text-lg font-bold text-blue-700",children:Q.totalDeliveries||0})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Rating"}),r.jsx("p",{className:"mt-1 text-lg font-bold text-blue-700",children:Q.rating?`${parseFloat(Q.rating).toFixed(1)}`:"No ratings yet"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Total Earnings"}),r.jsxs("p",{className:"mt-1 text-lg font-bold text-blue-700",children:["",parseFloat(Q.totalEarnings||"0").toFixed(2)]})]}),Q.approvalDate&&r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Approved On"}),r.jsx("p",{className:"mt-1 text-sm",children:new Date(Q.approvalDate).toLocaleDateString()})]}),Q.rejectionReason&&r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-red-600",children:"Rejection Reason"}),r.jsx("p",{className:"mt-1 text-red-600 text-sm",children:Q.rejectionReason})]})]})]})]}):r.jsx("p",{className:"text-gray-500 italic",children:"No delivery partner information found for this user."})})()]})]}),p.role==="customer"&&r.jsxs(r.Fragment,{children:[r.jsx(mn,{}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-lg font-semibold mb-3 text-purple-600",children:"Customer Activity"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),r.jsx("p",{className:"mt-1",children:V.filter(Q=>Q.userId===p.id).length})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Account Status"}),r.jsx("p",{className:"mt-1",children:r.jsx(Ut,{status:p.status})})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Location"}),r.jsx("p",{className:"mt-1",children:p.address||"Not provided"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Last Active"}),r.jsx("p",{className:"mt-1",children:p.updatedAt?new Date(p.updatedAt).toLocaleDateString():"Unknown"})]})]})]})]})]})]})}),r.jsx(Ir,{open:b,onOpenChange:w,children:r.jsxs(Tr,{className:"max-w-2xl",children:[r.jsx(Ar,{children:r.jsx(Er,{children:"Store Details"})}),N&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center",children:r.jsx(nr,{className:"h-8 w-8 text-gray-500"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-semibold",children:N.name}),r.jsx("p",{className:"text-gray-500",children:N.description}),r.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[r.jsx(le,{variant:"outline",children:N.type}),r.jsx(Ut,{status:N.status||"active"})]})]})]}),r.jsx(mn,{}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Store ID"}),r.jsx("p",{className:"mt-1",children:N.id})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Owner"}),r.jsx("p",{className:"mt-1",children:N.ownerName||"N/A"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Address"}),r.jsx("p",{className:"mt-1",children:N.address||"Not provided"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Products"}),r.jsx("p",{className:"mt-1",children:N.productCount||0})]})]})]})]})}),r.jsx(Ir,{open:k,onOpenChange:O,children:r.jsxs(Tr,{className:"max-w-md",children:[r.jsx(Ar,{children:r.jsx(Er,{children:"Edit Delivery Zone"})}),P&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(be,{htmlFor:"name",children:"Name"}),r.jsx(he,{id:"name",value:P.name,onChange:Q=>C({...P,name:Q.target.value}),className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"minDistance",children:"Min Distance (km)"}),r.jsx(he,{id:"minDistance",type:"number",value:P.minDistance,onChange:Q=>C({...P,minDistance:Q.target.value}),className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"maxDistance",children:"Max Distance (km)"}),r.jsx(he,{id:"maxDistance",type:"number",value:P.maxDistance,onChange:Q=>C({...P,maxDistance:Q.target.value}),className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"baseFee",children:"Base Fee"}),r.jsx(he,{id:"baseFee",type:"number",step:"0.01",value:P.baseFee,onChange:Q=>C({...P,baseFee:Q.target.value}),className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"perKmRate",children:"Per KM Rate"}),r.jsx(he,{id:"perKmRate",type:"number",step:"0.01",value:P.perKmRate,onChange:Q=>C({...P,perKmRate:Q.target.value}),className:"mt-1"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(be,{htmlFor:"isActive",children:"Active"}),r.jsx(jn,{id:"isActive",checked:P.isActive,onCheckedChange:Q=>C({...P,isActive:Q}),className:"data-[state=checked]:bg-green-600"})]}),r.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[r.jsx(F,{variant:"outline",onClick:()=>O(!1),children:"Cancel"}),r.jsx(F,{onClick:()=>{new FormData;const Q=document.querySelectorAll("#name, #minDistance, #maxDistance, #baseFee, #perKmRate"),ve={};Q.forEach(Te=>{Te.type==="number"?ve[Te.id]=parseFloat(Te.value)||0:ve[Te.id]=Te.value}),ve.isActive=P.isActive,Se.mutate({id:P.id,data:ve})},disabled:Se.isPending,children:Se.isPending?"Saving...":"Update Zone"})]})]})]})}),r.jsx(Ir,{open:I,onOpenChange:T,children:r.jsxs(Tr,{className:"max-w-md",children:[r.jsx(Ar,{children:r.jsx(Er,{children:"Create New Delivery Zone"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(be,{htmlFor:"new-name",children:"Name"}),r.jsx(he,{id:"new-name",value:E.name,onChange:Q=>D({...E,name:Q.target.value}),className:"mt-1",placeholder:"e.g., Inner City"})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"new-minDistance",children:"Min Distance (km)"}),r.jsx(he,{id:"new-minDistance",type:"number",step:"0.01",value:E.minDistance,onChange:Q=>D({...E,minDistance:Q.target.value}),className:"mt-1",placeholder:"0"})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"new-maxDistance",children:"Max Distance (km)"}),r.jsx(he,{id:"new-maxDistance",type:"number",step:"0.01",value:E.maxDistance,onChange:Q=>D({...E,maxDistance:Q.target.value}),className:"mt-1",placeholder:"5"})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"new-baseFee",children:"Base Fee"}),r.jsx(he,{id:"new-baseFee",type:"number",step:"0.01",value:E.baseFee,onChange:Q=>D({...E,baseFee:Q.target.value}),className:"mt-1",placeholder:"30.00"})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"new-perKmRate",children:"Per KM Rate"}),r.jsx(he,{id:"new-perKmRate",type:"number",step:"0.01",value:E.perKmRate,onChange:Q=>D({...E,perKmRate:Q.target.value}),className:"mt-1",placeholder:"5.00"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(be,{htmlFor:"new-isActive",children:"Active"}),r.jsx(jn,{id:"new-isActive",checked:E.isActive,onCheckedChange:Q=>D({...E,isActive:Q}),className:"data-[state=checked]:bg-green-600"})]}),r.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[r.jsx(F,{variant:"outline",onClick:()=>T(!1),children:"Cancel"}),r.jsx(F,{onClick:()=>Me.mutate(E),disabled:Me.isPending,children:Me.isPending?"Creating...":"Create Zone"})]})]})]})})]}):r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})})}delete Ht.Icon.Default.prototype._getIconUrl;Ht.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const Cbe=e=>{const t=e.logo||"/default-store-logo.png";return new Ht.DivIcon({html:`
      <div style="
        width: 40px; 
        height: 40px; 
        background: white; 
        border: 3px solid #3b82f6; 
        border-radius: 50%; 
        display: flex; 
        align-items: center; 
        justify-content: center;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        position: relative;
      ">
        <img src="${t}" 
             style="width: 28px; height: 28px; border-radius: 50%; object-fit: cover;" 
             onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgiIGhlaWdodD0iMjgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDJMMTMuMDkgOC4yNkwyMCA5TDEzLjA5IDE1Ljc0TDEyIDIyTDEwLjkxIDE1Ljc0TDQgOUwxMC45MSA4LjI2TDEyIDJaIiBmaWxsPSIjMzk4NGZmIi8+Cjwvc3ZnPg=='" />
        <div style="
          position: absolute; 
          bottom: -2px; 
          right: -2px; 
          width: 12px; 
          height: 12px; 
          background: #10b981; 
          border: 2px solid white; 
          border-radius: 50%;
        "></div>
      </div>
    `,className:"custom-store-marker",iconSize:[40,40],iconAnchor:[20,40],popupAnchor:[0,-40]})},kbe=new Ht.DivIcon({html:`
    <div style="
      width: 32px; 
      height: 32px; 
      background: #3b82f6; 
      border: 4px solid white; 
      border-radius: 50%; 
      display: flex; 
      align-items: center; 
      justify-content: center;
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
      animation: pulse 2s infinite;
    ">
      <div style="
        width: 16px; 
        height: 16px; 
        background: white; 
        border-radius: 50%;
      "></div>
    </div>
  `,className:"custom-user-marker",iconSize:[32,32],iconAnchor:[16,16],popupAnchor:[0,-16]});function Tbe({storeType:e="retail"}){const[t,n]=j.useState(null),[s,i]=j.useState(null),[a,o]=j.useState({lat:"",lon:""}),[l,c]=j.useState(!1),[d,h]=j.useState(null),[m,f]=j.useState(!1),[g,x]=j.useState(""),[p,y]=j.useState([]),[b,w]=j.useState(!1),[N,S]=j.useState(!1),[P,C]=j.useState(null),[k,O]=j.useState(!1),I=j.useRef(null),{toast:T}=ft(),E=()=>{if(!navigator.geolocation){h("Geolocation is not supported by this browser");return}c(!0),h(null),navigator.geolocation.getCurrentPosition(J=>{n({latitude:J.coords.latitude,longitude:J.coords.longitude}),f(!0),c(!1)},J=>{let pe="Failed to get your location";switch(J.code){case J.PERMISSION_DENIED:pe="Location access denied. Please enable location services.";break;case J.POSITION_UNAVAILABLE:pe="Location information is unavailable.";break;case J.TIMEOUT:pe="Location request timed out.";break}h(pe),c(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})},D=()=>{const J=parseFloat(a.lat),pe=parseFloat(a.lon);!isNaN(J)&&!isNaN(pe)?(n({latitude:J,longitude:pe}),f(!0),h(null)):h("Please enter valid latitude and longitude values")},B=async J=>{if(!J.trim()||J.length<2){y([]),w(!1);return}try{S(!0);const pe=await fetch(`/api/geocode/search?q=${encodeURIComponent(J)}`);if(!pe.ok)throw console.error("Geocoding API error:",pe.status,pe.statusText),new Error(`HTTP ${pe.status}: ${pe.statusText}`);const ye=await pe.json();if(console.log("Geocoding search results:",ye),!Array.isArray(ye)||ye.length===0){y([]),w(!1);return}y(ye),w(ye.length>0)}catch(pe){console.error("Location search error:",pe),y([]),w(!1),T({title:"Search Error",description:"Unable to search for locations. Please try again.",variant:"destructive"})}finally{S(!1)}},M=async J=>{var pe,ye,Ne;try{if(!J.position){T({title:"Location Error",description:"Selected location doesn't have coordinates",variant:"destructive"});return}const{lat:ke,lng:Ee}=J.position;n({latitude:ke,longitude:Ee}),C(J.title||((pe=J.address)==null?void 0:pe.label)||"Selected Location"),f(!0),h(null),x(J.title||((ye=J.address)==null?void 0:ye.label)||""),w(!1),T({title:"Location Found",description:`Searching stores near ${J.title||((Ne=J.address)==null?void 0:Ne.label)}`})}catch(ke){console.error("Error setting location:",ke),T({title:"Location Error",description:"Failed to set the selected location",variant:"destructive"})}},U=()=>{x(""),y([]),w(!1),C(null)},H=()=>{t?f(!0):E()},{data:K,isLoading:W}=Re({queryKey:["/api/stores/nearby",t==null?void 0:t.latitude,t==null?void 0:t.longitude,e],queryFn:async()=>{if(!t)return[];const J=`/api/stores/nearby?lat=${t.latitude}&lon=${t.longitude}&storeType=${e}`,pe=await fetch(J);if(!pe.ok)throw new Error("Failed to fetch nearby stores");return pe.json()},enabled:!!t&&m}),V=J=>{if(!t)return"#";const pe=`${t.latitude},${t.longitude}`,ye=`${J.latitude},${J.longitude}`;return`https://www.google.com/maps/dir/${pe}/${ye}`},q=e==="restaurant"?{title:"Restaurant Locations & Directions",description:"Find nearby restaurants and get directions to them",buttonText:"Find Nearby Restaurants",subtitle:"Click to track your location and discover restaurants near you",cardTitle:"Nearby Restaurants",cardDescription:"Restaurants sorted by distance from closest to farthest"}:{title:"Store Locations & Directions",description:"Find nearby retail stores and get directions to them",buttonText:"Find Nearby Stores",subtitle:"Click to track your location and discover stores near you",cardTitle:"Nearby Stores",cardDescription:"Stores sorted by distance from closest to farthest"};return j.useEffect(()=>{E()},[]),j.useEffect(()=>{const J=setTimeout(()=>{g.trim().length>=2&&B(g)},300);return()=>clearTimeout(J)},[g]),r.jsxs("div",{className:"container mx-auto px-4 py-6 space-y-6",children:[r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsxs(ie,{className:"flex items-center gap-2 text-lg md:text-xl",children:[r.jsx(Le,{className:"h-5 w-5"}),q.title]}),r.jsx(Ct,{children:q.description})]}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx(F,{onClick:H,size:"lg",className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 text-lg font-semibold shadow-lg",disabled:l,children:l?r.jsxs(r.Fragment,{children:[r.jsx(la,{className:"h-5 w-5 mr-2 animate-spin"}),"Getting Location..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Ps,{className:"h-5 w-5 mr-2"}),q.buttonText]})}),r.jsx("p",{className:"text-sm text-gray-600 mt-2",children:q.subtitle})]}),d&&r.jsx(ri,{className:"border-red-200 bg-red-50",children:r.jsx(ni,{className:"text-red-700",children:d})}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Search for a location:"}),r.jsxs("div",{className:"relative",children:[r.jsxs("div",{className:"relative",children:[r.jsx(zn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx(he,{placeholder:"Search for a city, place, or address (e.g., Siraha, Kathmandu)",value:g,onChange:J=>x(J.target.value),className:"pl-10 pr-10"}),r.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Powered by OpenStreetMap - Free and accurate location search"}),g&&r.jsx(F,{variant:"ghost",size:"sm",onClick:U,className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",children:r.jsx(Fr,{className:"h-4 w-4"})}),N&&r.jsx(la,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 animate-spin text-gray-400"})]}),b&&p.length>0&&r.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:p.map((J,pe)=>{var ye,Ne;return r.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",onClick:()=>M(J),children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Le,{className:"h-4 w-4 text-blue-500 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium text-gray-900 truncate",children:J.title||((ye=J.address)==null?void 0:ye.label)||"Unknown Location"}),((Ne=J.address)==null?void 0:Ne.label)&&J.title!==J.address.label&&r.jsx("p",{className:"text-sm text-gray-600 truncate",children:J.address.label}),J.resultType&&r.jsx(le,{variant:"outline",className:"text-xs mt-1",children:J.resultType})]})]})},pe)})})]})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Or enter coordinates manually:"}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[r.jsx(he,{placeholder:"Latitude",value:a.lat,onChange:J=>o({...a,lat:J.target.value}),className:"flex-1 min-w-0"}),r.jsx(he,{placeholder:"Longitude",value:a.lon,onChange:J=>o({...a,lon:J.target.value}),className:"flex-1 min-w-0"}),r.jsxs(F,{onClick:D,variant:"outline",className:"w-full sm:w-auto",children:[r.jsx(u0,{className:"h-4 w-4 mr-2"}),"Set Location"]})]})]}),t&&r.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ps,{className:"h-4 w-4 text-green-600"}),r.jsx("div",{className:"flex-1",children:P?r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm text-green-700 font-medium",children:[" ",P]}),r.jsxs("p",{className:"text-xs text-green-600",children:[t.latitude.toFixed(4),", ",t.longitude.toFixed(4)]})]}):r.jsxs("p",{className:"text-sm text-green-700 font-medium",children:["Current Location: ",t.latitude.toFixed(4),", ",t.longitude.toFixed(4)]})}),P&&r.jsx(F,{variant:"ghost",size:"sm",onClick:()=>{C(null),x(""),E()},className:"h-8 w-8 p-0",children:r.jsx(Ps,{className:"h-4 w-4"})})]})})]})]}),t&&m&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(Ps,{className:"h-5 w-5 text-blue-600"}),q.cardTitle,K&&K.length>0&&r.jsxs(le,{variant:"secondary",className:"ml-2",children:[K.length," found"]})]}),r.jsx(Ct,{children:q.cardDescription})]}),r.jsx(Z,{children:W?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(la,{className:"h-8 w-8 mx-auto animate-spin text-blue-600"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Finding nearby stores..."})]}):K&&K.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:K.map((J,pe)=>r.jsxs("div",{className:`p-4 border rounded-lg cursor-pointer transition-all duration-200 ${(s==null?void 0:s.id)===J.id?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-gray-300 hover:shadow-sm"}`,onClick:()=>{i(J),O(!0)},children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsxs(le,{variant:pe<3?"default":"secondary",className:`text-xs px-2 py-1 ${pe===0?"bg-green-600":pe===1?"bg-blue-600":pe===2?"bg-orange-600":""}`,children:["#",pe+1]}),r.jsxs(le,{variant:J.distance<1?"destructive":J.distance<5?"default":"secondary",className:`${J.distance<1?"bg-green-600":J.distance<5?"bg-blue-600":""}`,children:[J.distance.toFixed(1),"km"]})]}),r.jsx("h3",{className:"font-semibold text-lg mb-1",children:J.name}),r.jsx("p",{className:"text-gray-600 text-sm mb-2 line-clamp-2",children:J.description}),r.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[r.jsx($t,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),r.jsx("span",{className:"text-sm",children:J.rating}),r.jsxs("span",{className:"text-xs text-gray-500",children:["(",J.totalReviews,")"]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(F,{size:"sm",onClick:ye=>{ye.stopPropagation(),window.open(V(J),"_blank")},className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:[r.jsx(jt,{className:"h-4 w-4 mr-1"}),"Navigate with Google Maps"]}),r.jsx(F,{size:"sm",variant:"outline",onClick:ye=>{ye.stopPropagation(),i(J),O(!0)},className:"w-full",children:"View on Map"})]})]},J.id))}):r.jsx("div",{className:"text-center py-8 text-gray-500",children:"No stores found in your area"})})]}),r.jsxs("div",{className:"relative w-full h-[600px] rounded-xl overflow-hidden shadow-lg",children:[t?r.jsxs(Eg,{center:s?[parseFloat(s.latitude),parseFloat(s.longitude)]:[t.latitude,t.longitude],zoom:s?16:14,style:{height:"100%",width:"100%"},className:"z-0",scrollWheelZoom:!0,doubleClickZoom:!0,touchZoom:!0,zoomControl:!1,ref:I,children:[r.jsx(Og,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),r.jsx(Ei,{position:[t.latitude,t.longitude],icon:kbe,children:r.jsx(za,{children:r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"font-semibold",children:"Your Location"}),r.jsx("p",{className:"text-sm text-gray-600",children:P||"Current GPS Position"})]})})}),K&&K.map(J=>J.latitude&&J.longitude&&r.jsx(Ei,{position:[parseFloat(J.latitude),parseFloat(J.longitude)],icon:Cbe(J),eventHandlers:{click:()=>{i(J),O(!0)}},children:r.jsx(za,{children:r.jsxs("div",{className:"text-center max-w-xs",children:[r.jsx("h3",{className:"font-semibold",children:J.name}),r.jsx("p",{className:"text-sm text-gray-600 mb-1",children:J.address}),r.jsxs("div",{className:"flex items-center justify-center gap-1 mb-2",children:[r.jsx($t,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),r.jsx("span",{className:"text-sm",children:J.rating})]}),r.jsxs(le,{variant:"outline",className:"text-xs",children:[J.distance.toFixed(1),"km away"]})]})})},J.id))]}):r.jsx("div",{className:"flex items-center justify-center h-full bg-gray-100 text-gray-500",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Le,{className:"h-12 w-12 mx-auto mb-3"}),r.jsx("p",{className:"text-lg font-medium",children:"Enable location to view the map"}),r.jsx("p",{className:"text-sm",children:'Click "Get Current Location" above to start'})]})}),r.jsxs("div",{className:"absolute top-4 right-4 z-[999] flex flex-col gap-2",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden",children:[r.jsx(F,{variant:"ghost",size:"sm",onClick:()=>{I.current&&I.current.zoomIn()},className:"w-10 h-10 p-0 rounded-none border-b border-gray-200 hover:bg-blue-50",title:"Zoom In",children:r.jsx("span",{className:"text-lg font-bold text-blue-600",children:"+"})}),r.jsx(F,{variant:"ghost",size:"sm",onClick:()=>{I.current&&I.current.zoomOut()},className:"w-10 h-10 p-0 rounded-none hover:bg-blue-50",title:"Zoom Out",children:r.jsx("span",{className:"text-lg font-bold text-blue-600",children:""})})]}),s&&r.jsxs(F,{onClick:()=>window.open(V(s),"_blank"),className:"bg-blue-600 hover:bg-blue-700 text-white shadow-lg whitespace-nowrap",size:"sm",title:"Navigate with Google Maps",children:[r.jsx(jt,{className:"h-4 w-4 mr-1"}),"Navigate"]}),r.jsx(F,{variant:"outline",size:"sm",onClick:()=>{t&&I.current&&I.current.setView([t.latitude,t.longitude],15)},className:"bg-white shadow-lg hover:bg-blue-50",title:"Center on My Location",children:r.jsx(Ps,{className:"h-4 w-4 text-blue-600"})}),s&&r.jsx(F,{variant:"outline",size:"sm",onClick:()=>{const J=`https://www.google.com/maps/dir/${t==null?void 0:t.latitude},${t==null?void 0:t.longitude}/${s.latitude},${s.longitude}`;window.open(J,"_blank")},className:"bg-white shadow-lg hover:bg-green-50",title:"Open Full Screen Directions",children:r.jsx(u0,{className:"h-4 w-4 text-green-600"})})]}),k&&s&&r.jsx("div",{className:"absolute top-4 left-4 z-[1000] max-w-sm",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl border border-gray-200 p-4 transform transition-all duration-300 animate-in slide-in-from-left-5",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-bold text-lg text-gray-900",children:s.name}),r.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[r.jsx($t,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),r.jsx("span",{className:"text-sm font-medium",children:s.rating}),r.jsxs("span",{className:"text-xs text-gray-500",children:["(",s.totalReviews," reviews)"]})]})]}),r.jsx(F,{variant:"ghost",size:"sm",onClick:()=>O(!1),className:"h-8 w-8 p-0 text-gray-400 hover:text-gray-600",children:r.jsx(Fr,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{children:r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[r.jsx(Le,{className:"h-4 w-4"}),r.jsx("span",{className:"line-clamp-2",children:s.address})]})}),s.phone&&r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[r.jsx(Ot,{className:"h-4 w-4"}),r.jsx("span",{children:s.phone})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(le,{variant:"outline",className:"text-xs",children:[s.distance.toFixed(1)," km away"]}),s.distance<1&&r.jsx(le,{variant:"secondary",className:"text-xs bg-green-100 text-green-700",children:"Very Close!"})]}),r.jsx("p",{className:"text-sm text-gray-600 line-clamp-3",children:s.description}),r.jsxs("div",{className:"space-y-2 pt-2",children:[r.jsxs(F,{size:"sm",onClick:()=>window.open(V(s),"_blank"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:[r.jsx(jt,{className:"h-4 w-4 mr-1"}),"Open in Google Maps"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(F,{size:"sm",variant:"outline",onClick:()=>{navigator.share?navigator.share({title:s.name,text:`Check out ${s.name} at ${s.address}`,url:V(s)}):(navigator.clipboard.writeText(V(s)),T({title:"Location Copied",description:"Google Maps link copied to clipboard"}))},className:"flex-1",children:"Share"}),r.jsx(F,{size:"sm",variant:"outline",onClick:()=>window.open(`/stores/${s.slug}`,"_blank"),className:"flex-1",children:"Visit Store"})]})]})]})]})})]})]})]})}function Abe(){const{user:e}=Gt();return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[r.jsx(Le,{className:"h-8 w-8"}),"Store Locations"]}),r.jsx("p",{className:"text-gray-600",children:"Find nearby stores and get directions to them"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsx(Tbe,{storeType:"retail"})}),r.jsxs("div",{className:"space-y-6",children:[e&&r.jsx($b,{userId:e.id}),r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsx(ie,{children:"How It Works"}),r.jsx(Ct,{children:"Getting directions to stores"})]}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"font-medium",children:"1. Share Your Location"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Allow location access or enter your coordinates manually"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"font-medium",children:"2. Find Nearby Stores"}),r.jsx("p",{className:"text-sm text-gray-600",children:"View stores sorted by distance from your location"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"font-medium",children:"3. Get Directions"}),r.jsx("p",{className:"text-sm text-gray-600",children:'Click "Get Directions" to open Google Maps navigation'})]})]})]})]})]})]})}delete Ht.Icon.Default.prototype._getIconUrl;Ht.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const Ebe=e=>{const t=e.logo||"/default-restaurant-logo.png";return new Ht.DivIcon({html:`
      <div style="
        width: 40px; 
        height: 40px; 
        background: white; 
        border: 3px solid #dc2626; 
        border-radius: 50%; 
        display: flex; 
        align-items: center; 
        justify-content: center;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        position: relative;
      ">
        <img src="${t}" 
             style="width: 28px; height: 28px; border-radius: 50%; object-fit: cover;" 
             onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgiIGhlaWdodD0iMjgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTggMTNMMTEgMTZMMTYgMTFNMjEgMTJDMjEgMTYuOTcwNiAxNi45NzA2IDIxIDEyIDIxQzcuMDI5NDQgMjEgMyAxNi45NzA2IDMgMTJDMyA3LjAyOTQ0IDcuMDI5NDQgMyAxMiAzQzE2Ljk3MDYgMyAyMSA3LjAyOTQ0IDIxIDEyWiIgc3Ryb2tlPSIjZGMyNjI2IiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8L3N2Zz4K'" />
        <div style="
          position: absolute; 
          bottom: -2px; 
          right: -2px; 
          width: 12px; 
          height: 12px; 
          background: #10b981; 
          border: 2px solid white; 
          border-radius: 50%;
        "></div>
      </div>
    `,className:"custom-restaurant-marker",iconSize:[40,40],iconAnchor:[20,40],popupAnchor:[0,-40]})},Obe=new Ht.DivIcon({html:`
    <div style="
      width: 32px; 
      height: 32px; 
      background: #2563eb; 
      border: 3px solid white; 
      border-radius: 50%; 
      display: flex; 
      align-items: center; 
      justify-content: center;
      box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
    ">
      <div style="
        width: 16px; 
        height: 16px; 
        background: white; 
        border-radius: 50%;
      "></div>
    </div>
  `,className:"custom-user-marker",iconSize:[32,32],iconAnchor:[16,16],popupAnchor:[0,-16]});function Mbe({cuisineFilter:e}){const[t,n]=j.useState(null),[s,i]=j.useState(null),[a,o]=j.useState({lat:"",lon:""}),[l,c]=j.useState(!1),[d,h]=j.useState(null),[m,f]=j.useState(!1),[g,x]=j.useState(""),[p,y]=j.useState([]),[b,w]=j.useState(!1),[N,S]=j.useState(!1),[P,C]=j.useState(null),[k,O]=j.useState(!1),I=j.useRef(null),{toast:T}=ft(),E=()=>{if(!navigator.geolocation){h("Geolocation is not supported by this browser");return}c(!0),h(null),navigator.geolocation.getCurrentPosition(q=>{n({latitude:q.coords.latitude,longitude:q.coords.longitude}),c(!1),f(!0)},q=>{h(`Error getting location: ${q.message}`),c(!1)})},D=()=>{t?f(!0):E()},{data:B,isLoading:M}=Re({queryKey:["/api/food/restaurants",t==null?void 0:t.latitude,t==null?void 0:t.longitude,e],queryFn:async()=>{if(!t)return[];const q=new URLSearchParams({lat:t.latitude.toString(),lon:t.longitude.toString(),radius:"10"}),J=await fetch(`/api/food/restaurants?${q}`);if(!J.ok)throw new Error("Failed to fetch nearby restaurants");const pe=await J.json();let ye=pe.restaurants;return e&&e!=="all"&&(ye=ye.filter(Ne=>Ne.cuisineType===e)),console.log(`[RESTAURANT MAP] Found ${ye.length} restaurants within ${pe.searchRadius}km`),ye},enabled:!!t&&m}),U=q=>{if(!t)return"#";const J=`${t.latitude},${t.longitude}`,pe=`${q.latitude},${q.longitude}`;return`https://www.google.com/maps/dir/${J}/${pe}`},H=async q=>{if(!q.trim()){y([]),w(!1);return}S(!0);try{const J=await fetch(`/api/geocode/search?q=${encodeURIComponent(q)}`);if(J.ok){const pe=await J.json();y(pe.results||[]),w(!0)}}catch(J){console.error("Search error:",J)}finally{S(!1)}},K=q=>{var J;q.position&&(n({latitude:q.position.lat,longitude:q.position.lng}),C(q.title||((J=q.address)==null?void 0:J.label)||"Selected Location"),f(!0),w(!1),h(null))},W=()=>{x(""),y([]),w(!1),C(null)},V=()=>{const q=parseFloat(a.lat),J=parseFloat(a.lon);if(isNaN(q)||isNaN(J)){h("Please enter valid coordinates");return}n({latitude:q,longitude:J}),h(null),f(!0),C(null)};j.useEffect(()=>{const q=setTimeout(()=>{g&&H(g)},300);return()=>clearTimeout(q)},[g]);const z=[26.6586,86.2003];return j.useEffect(()=>{E()},[]),r.jsxs("div",{className:"w-full space-y-6",children:[r.jsxs("div",{className:"text-center space-y-4",children:[r.jsxs("h2",{className:"text-2xl font-bold flex items-center justify-center gap-2",children:[r.jsx(Ti,{className:"h-6 w-6 text-red-600"}),"Restaurant Locations & Food Delivery"]}),r.jsx("p",{className:"text-gray-600",children:"Find nearby restaurants and get directions for pickup or delivery"}),r.jsxs("div",{className:"max-w-2xl mx-auto space-y-4",children:[r.jsxs("div",{className:"relative",children:[r.jsxs("div",{className:"relative",children:[r.jsx(zn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),r.jsx(he,{type:"text",placeholder:"Search for places like 'Siraha', 'Kathmandu', 'Pokhara'...",value:g,onChange:q=>x(q.target.value),className:"pl-10 pr-10"}),g&&r.jsx("button",{onClick:W,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r.jsx(Fr,{className:"h-4 w-4"})})]}),b&&p.length>0&&r.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-50 max-h-60 overflow-y-auto",children:p.map((q,J)=>{var pe;return r.jsx("button",{onClick:()=>K(q),className:"w-full text-left px-4 py-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Le,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-sm",children:q.title}),r.jsx("div",{className:"text-xs text-gray-500",children:(pe=q.address)==null?void 0:pe.label})]})]})},J)})}),N&&r.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-50 p-4",children:r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx(la,{className:"h-4 w-4 animate-spin mr-2"}),r.jsx("span",{className:"text-sm text-gray-600",children:"Searching..."})]})})]}),P&&r.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Le,{className:"h-4 w-4 text-green-600"}),r.jsxs("span",{className:"text-sm font-medium text-green-800",children:[" ",P]})]}),r.jsxs(F,{onClick:()=>{E(),C(null)},variant:"outline",size:"sm",className:"text-xs",children:[r.jsx(Ps,{className:"h-3 w-3 mr-1"}),"Use GPS"]})]})}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center items-center",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx(he,{placeholder:"Latitude",value:a.lat,onChange:q=>o({...a,lat:q.target.value}),className:"w-24"}),r.jsx(he,{placeholder:"Longitude",value:a.lon,onChange:q=>o({...a,lon:q.target.value}),className:"w-24"}),r.jsxs(F,{onClick:V,variant:"outline",size:"sm",children:[r.jsx(Le,{className:"h-4 w-4 mr-1"}),"Set"]})]}),r.jsxs(F,{onClick:D,disabled:l,className:"bg-red-600 hover:bg-red-700",children:[l?r.jsx(la,{className:"h-4 w-4 mr-2 animate-spin"}):r.jsx(Ps,{className:"h-4 w-4 mr-2"}),"Find Nearby Restaurants"]})]})]}),d&&r.jsx(ri,{className:"max-w-md mx-auto",children:r.jsx(ni,{children:d})}),r.jsx("p",{className:"text-sm text-gray-500",children:"Click to track your location and discover restaurants near you"})]}),t&&m&&r.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(Ps,{className:"h-5 w-5 text-red-600"}),"Nearby Restaurants",B&&B.length>0&&r.jsxs(le,{variant:"secondary",className:"ml-2",children:[B.length," found"]})]}),r.jsx(Ct,{children:"Restaurants sorted by distance from closest to farthest"})]}),r.jsx(Z,{children:M?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(la,{className:"h-8 w-8 mx-auto animate-spin text-red-600"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Finding nearby restaurants..."})]}):B&&B.length>0?r.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:B.map((q,J)=>r.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-all duration-200 ${(s==null?void 0:s.id)===q.id?"border-red-500 bg-red-50 shadow-md":"border-gray-200 hover:border-red-300 hover:shadow-sm"}`,onClick:()=>i(q),children:r.jsxs("div",{className:"flex flex-col space-y-3",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsx("h3",{className:"font-semibold text-lg text-gray-900",children:q.name}),r.jsxs("div",{className:"flex flex-col items-end gap-1",children:[r.jsxs(le,{variant:J<3?"default":"secondary",className:"text-xs",children:[q.distance.toFixed(1)," km away"]}),q.distance<1&&r.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Very Close!"})]})]}),r.jsx("p",{className:"text-gray-600 text-sm mb-2",children:q.description}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 text-sm text-gray-500 mb-3",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Le,{className:"h-4 w-4 flex-shrink-0"}),r.jsx("span",{className:"truncate",children:q.address})]}),q.phone&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Ot,{className:"h-4 w-4 flex-shrink-0"}),r.jsx("span",{children:q.phone})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[q.cuisineType&&r.jsx(le,{variant:"outline",children:q.cuisineType}),q.deliveryTime&&r.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[r.jsx(gt,{className:"h-3 w-3"}),r.jsx("span",{children:q.deliveryTime})]}),q.minimumOrder&&r.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[r.jsx(Hr,{className:"h-3 w-3"}),r.jsxs("span",{children:["Min: $",q.minimumOrder]})]}),q.isDeliveryAvailable&&r.jsx(le,{variant:"secondary",className:"text-green-600",children:"Delivery Available"})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx($t,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),r.jsxs("span",{className:"text-sm",children:[q.rating," (",q.totalReviews," reviews)"]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(F,{size:"sm",variant:"outline",onClick:pe=>{pe.stopPropagation(),window.open(U(q),"_blank")},className:"flex-1 sm:flex-none",children:[r.jsx(jt,{className:"h-4 w-4 mr-1"}),"Directions"]}),r.jsx(F,{size:"sm",onClick:pe=>{pe.stopPropagation(),i(q)},className:"flex-1 sm:flex-none bg-red-600 hover:bg-red-700",children:"View Menu"})]})]})]})},q.id))}):r.jsx("div",{className:"text-center py-8 text-gray-500",children:"No restaurants found in your area"})})]}),r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsxs(ie,{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Restaurant Map"}),r.jsx(le,{variant:"secondary",className:"text-xs",children:"Enhanced Controls"})]}),r.jsx(Ct,{children:"Interactive map with zoom controls and Google Maps navigation"})]}),r.jsx(Z,{className:"p-0 relative",children:r.jsxs("div",{className:"h-[600px] w-full relative overflow-hidden rounded-b-lg",children:[r.jsxs(Eg,{ref:I,center:s!=null&&s.latitude&&(s!=null&&s.longitude)?[parseFloat(s.latitude),parseFloat(s.longitude)]:t?[t.latitude,t.longitude]:z,zoom:s?15:t?13:12,className:"h-full w-full",scrollWheelZoom:!0,doubleClickZoom:!0,touchZoom:!0,zoomControl:!1,children:[r.jsx(Og,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),B==null?void 0:B.map(q=>q.latitude&&q.longitude&&r.jsx(Ei,{position:[parseFloat(q.latitude),parseFloat(q.longitude)],icon:Ebe(q),eventHandlers:{click:()=>{i(q),O(!0)}}},q.id)),t&&r.jsx(Ei,{position:[t.latitude,t.longitude],icon:Obe})]}),r.jsxs("div",{className:"absolute top-4 right-4 z-[1000] flex flex-col gap-2",children:[r.jsx("button",{onClick:()=>{const q=I.current;q&&q.setZoom(q.getZoom()+1)},className:"w-10 h-10 bg-white border border-gray-300 rounded-lg shadow-lg hover:bg-gray-50 flex items-center justify-center text-lg font-bold text-gray-700 hover:text-gray-900 transition-colors",title:"Zoom In",children:"+"}),r.jsx("button",{onClick:()=>{const q=I.current;q&&q.setZoom(q.getZoom()-1)},className:"w-10 h-10 bg-white border border-gray-300 rounded-lg shadow-lg hover:bg-gray-50 flex items-center justify-center text-lg font-bold text-gray-700 hover:text-gray-900 transition-colors",title:"Zoom Out",children:""}),r.jsx("button",{onClick:()=>{t&&I.current?I.current.setView([t.latitude,t.longitude],15):E()},className:"w-10 h-10 bg-white border border-gray-300 rounded-lg shadow-lg hover:bg-gray-50 flex items-center justify-center text-gray-700 hover:text-gray-900 transition-colors",title:"Center on My Location",children:r.jsx(Ps,{className:"h-4 w-4"})})]}),s&&k&&r.jsx("div",{className:"absolute bottom-4 left-4 right-4 z-[1000] bg-white rounded-lg shadow-2xl border border-gray-200 max-w-md mx-auto",children:r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-bold text-lg text-gray-900",children:s.name}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.address})]}),r.jsx("button",{onClick:()=>O(!1),className:"ml-2 p-1 hover:bg-gray-100 rounded-full",children:r.jsx(Fr,{className:"h-4 w-4 text-gray-500"})})]}),r.jsxs("div",{className:"flex items-center gap-4 mb-3 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx($t,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),r.jsx("span",{children:s.rating})]}),r.jsxs(le,{variant:"outline",className:"text-xs",children:[s.distance.toFixed(1)," km away"]}),s.cuisineType&&r.jsx(le,{variant:"secondary",className:"text-xs",children:s.cuisineType})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[r.jsxs(F,{size:"sm",onClick:()=>{const q=`https://www.google.com/maps/search/?api=1&query=${s.latitude},${s.longitude}`;window.open(q,"_blank")},variant:"outline",className:"flex items-center gap-1",children:[r.jsx(u0,{className:"h-4 w-4"}),"Open in Google Maps"]}),r.jsxs(F,{size:"sm",onClick:()=>{if(t){const q=`https://www.google.com/maps/dir/${t.latitude},${t.longitude}/${s.latitude},${s.longitude}`;window.open(q,"_blank")}},variant:"outline",className:"flex items-center gap-1",children:[r.jsx(jt,{className:"h-4 w-4"}),"Navigate"]}),r.jsxs(F,{size:"sm",onClick:()=>{const q={title:s.name,text:`Check out ${s.name} at ${s.address}`,url:`https://www.google.com/maps/search/?api=1&query=${s.latitude},${s.longitude}`};navigator.share?navigator.share(q):(navigator.clipboard.writeText(q.url),T({title:"Link copied!",description:"Restaurant location copied to clipboard"}))},className:"bg-red-600 hover:bg-red-700 flex items-center gap-1",children:[r.jsx(Ti,{className:"h-4 w-4"}),"Share"]})]})]})})]})})]}),s&&r.jsxs(G,{className:"xl:col-span-2",children:[r.jsxs(se,{children:[r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(Ti,{className:"h-5 w-5 text-red-600"}),s.name]}),r.jsx(Ct,{children:s.address})]}),r.jsxs(Z,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"font-medium",children:"Restaurant Details"}),r.jsx("p",{className:"text-sm text-gray-600",children:s.description}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx($t,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),r.jsxs("span",{children:[s.rating," (",s.totalReviews," reviews)"]})]}),s.phone&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ot,{className:"h-4 w-4"}),r.jsx("span",{children:s.phone})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"font-medium",children:"Delivery Information"}),s.cuisineType&&r.jsxs("p",{className:"text-sm",children:["Cuisine: ",s.cuisineType]}),s.deliveryTime&&r.jsxs("p",{className:"text-sm",children:["Delivery Time: ",s.deliveryTime]}),s.minimumOrder&&r.jsxs("p",{className:"text-sm",children:["Minimum Order: $",s.minimumOrder]}),s.deliveryFee&&r.jsxs("p",{className:"text-sm",children:["Delivery Fee: $",s.deliveryFee]}),r.jsx(le,{variant:s.isDeliveryAvailable?"default":"secondary",children:s.isDeliveryAvailable?"Delivery Available":"Pickup Only"})]})]}),r.jsx("div",{className:"pt-4 border-t",children:r.jsxs(F,{className:"w-full bg-red-600 hover:bg-red-700",onClick:()=>window.open(U(s),"_blank"),children:[r.jsx(jt,{className:"h-4 w-4 mr-2"}),"Get Directions in Google Maps"]})})]})]})]})]})}function Dbe(){const{user:e}=Gt(),[t,n]=j.useState("all"),s=[{value:"all",label:"All Cuisines"},{value:"indian",label:"Indian"},{value:"chinese",label:"Chinese"},{value:"fast-food",label:"Fast Food"},{value:"italian",label:"Italian"},{value:"nepali",label:"Nepali"},{value:"continental",label:"Continental"},{value:"thai",label:"Thai"},{value:"pizza",label:"Pizza"},{value:"burger",label:"Burger"},{value:"dessert",label:"Dessert"}];return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[r.jsx(Ti,{className:"h-8 w-8 text-red-600"}),"Restaurant Locations & Food Delivery"]}),r.jsx("p",{className:"text-gray-600",children:"Find nearby restaurants, check delivery options, and get directions"})]}),r.jsxs(G,{className:"mb-6",children:[r.jsxs(se,{children:[r.jsx(ie,{className:"text-lg",children:"Filter by Cuisine"}),r.jsx(Ct,{children:"Choose your preferred cuisine type"})]}),r.jsx(Z,{children:r.jsxs(ct,{value:t,onValueChange:n,children:[r.jsx(it,{className:"w-full md:w-64",children:r.jsx(dt,{placeholder:"Select cuisine type"})}),r.jsx(at,{children:s.map(i=>r.jsx(ne,{value:i.value,children:i.label},i.value))})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsx(Mbe,{cuisineFilter:t})}),r.jsxs("div",{className:"space-y-6",children:[e&&r.jsx($b,{userId:e.id}),r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsx(ie,{children:"How Food Delivery Works"}),r.jsx(Ct,{children:"Order food from local restaurants"})]}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[r.jsx(Le,{className:"h-4 w-4 text-red-600"}),"1. Find Restaurants"]}),r.jsx("p",{className:"text-sm text-gray-600",children:"Share your location to discover nearby restaurants and their menus"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[r.jsx(gt,{className:"h-4 w-4 text-red-600"}),"2. Check Delivery Time"]}),r.jsx("p",{className:"text-sm text-gray-600",children:"View estimated delivery times and minimum order requirements"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[r.jsx(Hr,{className:"h-4 w-4 text-red-600"}),"3. Place Your Order"]}),r.jsx("p",{className:"text-sm text-gray-600",children:"Browse menus, add items to cart, and complete your order"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[r.jsx(_k,{className:"h-4 w-4 text-red-600"}),"4. Track Delivery"]}),r.jsx("p",{className:"text-sm text-gray-600",children:"Get real-time updates on your order status and delivery progress"})]})]})]}),r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsx(ie,{children:"Delivery Features"}),r.jsx(Ct,{children:"What we offer"})]}),r.jsxs(Z,{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),r.jsx("span",{children:"Real-time order tracking"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),r.jsx("span",{children:"Multiple payment options"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),r.jsx("span",{children:"Live location sharing with restaurants"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),r.jsx("span",{children:"Cuisine-based filtering"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),r.jsx("span",{children:"Distance-based restaurant discovery"})]})]})]})]})]})]})}function Ibe(){const{user:e}=Gt(),{wishlistItems:t,removeFromWishlist:n,isLoading:s}=vg(),{addToCart:i}=Nc(),{toast:a}=ft(),o=async(c,d)=>{try{await i(c,1),a({title:"Added to cart",description:`${d} has been added to your cart.`})}catch{a({title:"Error",description:"Failed to add item to cart. Please try again.",variant:"destructive"})}},l=async(c,d)=>{try{await n(c),a({title:"Removed from wishlist",description:`${d} has been removed from your wishlist.`})}catch{a({title:"Error",description:"Failed to remove item from wishlist. Please try again.",variant:"destructive"})}};return e?s?r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Loading your wishlist..."})]})})}):r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"My Wishlist"}),r.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:[t.length," ",t.length===1?"item":"items"," saved for later"]})]}),t.length===0?r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{className:"text-center",children:"Your wishlist is empty"})}),r.jsx(Z,{children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx(La,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No items in your wishlist"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Save items you love to your wishlist and shop them later."}),r.jsx(Ae,{href:"/products",children:r.jsx(F,{children:"Start Shopping"})})]})})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map(c=>{var d,h,m,f,g,x;return r.jsxs(G,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:((h=(d=c.product)==null?void 0:d.images)==null?void 0:h[0])||"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",alt:((m=c.product)==null?void 0:m.name)||"Product",className:"w-full h-48 object-cover"}),r.jsx(F,{variant:"ghost",size:"sm",className:"absolute top-2 right-2 h-8 w-8 p-0 bg-white/80 hover:bg-white",onClick:()=>{var p;return l(c.id,((p=c.product)==null?void 0:p.name)||"Product")},children:r.jsx(Xs,{className:"h-4 w-4 text-red-500"})})]}),r.jsxs(Z,{className:"p-4",children:[r.jsx(Ae,{href:`/products/${c.productId}`,children:r.jsx("h3",{className:"font-semibold text-lg mb-2 hover:text-primary transition-colors line-clamp-2",children:((f=c.product)==null?void 0:f.name)||"Product Name"})}),r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsxs("div",{className:"space-y-1",children:[r.jsxs("p",{className:"text-2xl font-bold text-primary",children:["",((g=c.product)==null?void 0:g.price)||"0"]}),((x=c.product)==null?void 0:x.originalPrice)&&Number(c.product.originalPrice)>Number(c.product.price)&&r.jsxs("p",{className:"text-sm text-gray-500 line-through",children:["",c.product.originalPrice]})]})}),r.jsx("div",{className:"flex gap-2",children:r.jsxs(F,{className:"flex-1",onClick:()=>{var p;return o(c.productId,((p=c.product)==null?void 0:p.name)||"Product")},children:[r.jsx(Bn,{className:"h-4 w-4 mr-2"}),"Add to Cart"]})})]})]},c.id)})})]})}):r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:r.jsxs("div",{className:"text-center",children:[r.jsx(La,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Login Required"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Please login to view your wishlist."}),r.jsx(Ae,{href:"/login",children:r.jsx(F,{children:"Login"})})]})})})}function f3(){const{mode:e}=Ja(),s=e==="shopping"?[{name:"Electronics",icon:"",href:"/products?category=1"},{name:"Fashion & Clothing",icon:"",href:"/products?category=2"},{name:"Food & Beverages",icon:"",href:"/products?category=3"},{name:"Health & Pharmacy",icon:"",href:"/products?category=4"},{name:"Sports & Fitness",icon:"",href:"/products?category=5"},{name:"Books & Education",icon:"",href:"/products?category=6"},{name:"Beauty & Personal Care",icon:"",href:"/products?category=7"},{name:"Toys & Games",icon:"",href:"/products?category=8"},{name:"Home & Garden",icon:"",href:"/products?category=9"},{name:"Automotive",icon:"",href:"/products?category=10"},{name:"Music & Entertainment",icon:"",href:"/products?category=11"}]:[{name:"Indian Cuisine",icon:"",href:"/products?category=food&cuisine=indian"},{name:"Chinese",icon:"",href:"/products?category=food&cuisine=chinese"},{name:"Fast Food",icon:"",href:"/products?category=food&cuisine=fast-food"},{name:"Italian",icon:"",href:"/products?category=food&cuisine=italian"},{name:"Mexican",icon:"",href:"/products?category=food&cuisine=mexican"},{name:"Continental",icon:"",href:"/products?category=food&cuisine=continental"},{name:"Desserts & Sweets",icon:"",href:"/products?category=food&cuisine=desserts"},{name:"Beverages",icon:"",href:"/products?category=food&cuisine=beverages"},{name:"Pizza",icon:"",href:"/products?category=food&type=pizza"},{name:"Biryani",icon:"",href:"/products?category=food&type=biryani"},{name:"Snacks",icon:"",href:"/products?category=food&type=snacks"},{name:"Healthy Food",icon:"",href:"/products?category=food&type=healthy"}],i=e==="shopping"?"All Categories":"Food Menu";return r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[r.jsxs("div",{className:"flex items-center mb-8",children:[r.jsx(Ae,{href:"/",children:r.jsxs(F,{variant:"ghost",size:"sm",className:"mr-4",children:[r.jsx(Xa,{className:"h-4 w-4 mr-2"}),"Back to Home"]})}),r.jsx("h1",{className:"text-3xl font-bold text-foreground",children:i})]}),r.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 lg:grid-cols-10 xl:grid-cols-12 gap-2 sm:gap-4",children:s.map(a=>r.jsx(Ae,{href:a.href,children:r.jsxs("div",{className:"category-card text-center hover:shadow-lg transition-shadow p-2 sm:p-4",children:[r.jsx("div",{className:"text-2xl sm:text-3xl mb-1 sm:mb-2",children:a.icon}),r.jsx("div",{className:"text-xs sm:text-sm font-semibold text-foreground",children:a.name})]})},a.name))})]})})}function p3({onImageSelect:e,selectedImages:t,maxImages:n,buttonText:s="Add Images"}){var H;const[i,a]=j.useState(!1),[o,l]=j.useState(""),[c,d]=j.useState(""),[h,m]=j.useState("google"),[f,g]=j.useState(!1),[x,p]=j.useState(""),[y,b]=j.useState("food"),w=j.useRef(null),N=j.useRef(null),{toast:S}=ft(),P={google:{name:"Google Images",baseUrl:"https://images.google.com",searchUrl:"https://images.google.com/search?q=",icon:""},amazon:{name:"Amazon India",baseUrl:"https://amazon.in",searchUrl:"https://amazon.in/s?k=",icon:""},flipkart:{name:"Flipkart",baseUrl:"https://flipkart.com",searchUrl:"https://flipkart.com/search?q=",icon:""},bigbasket:{name:"BigBasket",baseUrl:"https://bigbasket.com",searchUrl:"https://bigbasket.com/ps/?q=",icon:""}},C=["mashal tel mustard oil","dhara mustard oil","fortune mustard oil","patanjali mustard oil","MDH masala powder","everest spices"],k={food:[{url:"https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=400",title:"Pizza",source:"Unsplash"},{url:"https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=400",title:"Burger",source:"Unsplash"},{url:"https://images.unsplash.com/photo-1546833999-b9f581a1996d?w=400",title:"Salad",source:"Unsplash"},{url:"https://images.unsplash.com/photo-1551782450-a2132b4ba21d?w=400",title:"Pasta",source:"Unsplash"},{url:"https://images.unsplash.com/photo-1565958011703-44f9829ba187?w=400",title:"Sandwich",source:"Unsplash"},{url:"https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=400",title:"Soup",source:"Unsplash"}],electronics:[{url:"https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=400",title:"Smartphone",source:"Unsplash"},{url:"https://images.unsplash.com/photo-1496181133206-80ce9b88a853?w=400",title:"Laptop",source:"Unsplash"},{url:"https://images.unsplash.com/photo-1583394838336-acd977736f90?w=400",title:"Headphones",source:"Unsplash"},{url:"https://images.unsplash.com/photo-1551808525-51a94da548ce?w=400",title:"Camera",source:"Unsplash"},{url:"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400",title:"Tablet",source:"Unsplash"},{url:"https://images.unsplash.com/photo-1527864550417-7fd91fc51a46?w=400",title:"Smartwatch",source:"Unsplash"}],clothing:[{url:"https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=400",title:"T-Shirt",source:"Unsplash"},{url:"https://images.unsplash.com/photo-1542272604-787c3835535d?w=400",title:"Jeans",source:"Unsplash"},{url:"https://images.unsplash.com/photo-1434389677669-e08b4cac3105?w=400",title:"Dress",source:"Unsplash"},{url:"https://images.unsplash.com/photo-1549298916-b41d501d3772?w=400",title:"Sneakers",source:"Unsplash"},{url:"https://images.unsplash.com/photo-1551698618-1dfe5d97d256?w=400",title:"Jacket",source:"Unsplash"},{url:"https://images.unsplash.com/photo-1503342217505-b0a15ec3261c?w=400",title:"Hat",source:"Unsplash"}]},O=K=>new Promise((W,V)=>{const z=document.createElement("canvas"),q=z.getContext("2d"),J=new Image,pe=setTimeout(()=>{V(new Error("Image compression timeout"))},15e3);J.onload=()=>{try{clearTimeout(pe);let{width:ye,height:Ne}=J;const Ee=1024*1024,We=1.37;let Se=2048;if(K.size>Ee*10?Se=1600:K.size>Ee*5&&(Se=1920),(ye>Se||Ne>Se)&&(ye>Ne?(Ne=Ne*Se/ye,ye=Se):(ye=ye*Se/Ne,Ne=Se)),z.width=ye,z.height=Ne,!q){V(new Error("Canvas context not available"));return}q.imageSmoothingEnabled=!0,q.imageSmoothingQuality="high",q.drawImage(J,0,0,ye,Ne);let Me=.92,Ie=z.toDataURL("image/jpeg",Me);if(Ie.length<=Ee*We){W(Ie);return}for(;Ie.length>Ee*We&&Me>.3;)Me-=.05,Ie=z.toDataURL("image/jpeg",Me);W(Ie)}catch(ye){clearTimeout(pe),V(ye)}},J.onerror=()=>{clearTimeout(pe),V(new Error("Failed to load image"))},J.src=URL.createObjectURL(K)}),I=async K=>{var V;const W=(V=K.target.files)==null?void 0:V[0];if(W){if(n<=0){S({title:"Image Limit Reached",description:"Maximum number of images reached",variant:"destructive"});return}if(!W.type.startsWith("image/")){S({title:"Invalid file type",description:"Please select only image files",variant:"destructive"});return}if(W.size>20*1024*1024){S({title:"File too large",description:"Please select images smaller than 20MB",variant:"destructive"});return}try{const z=await O(W);t.includes(z)?S({title:"Duplicate Image",description:"This image has already been added",variant:"destructive"}):(e(z),S({title:"Image Added",description:`File compressed to ${Math.round(z.length/1024)}KB with HD quality preserved`}))}catch(z){if(console.error("Compression failed:",z),W.size<1024*1024)try{const q=new FileReader;q.onload=J=>{var ye;const pe=(ye=J.target)==null?void 0:ye.result;pe&&!t.includes(pe)&&(e(pe),S({title:"Image Added",description:"File uploaded without compression"}))},q.readAsDataURL(W)}catch{S({title:"Upload Failed",description:"Failed to process the image. Please try again.",variant:"destructive"})}else S({title:"Upload Failed",description:"File is too large and compression failed. Try a smaller image.",variant:"destructive"})}}},T=K=>{I(K)},E=async K=>new Promise(W=>{const V=new Image;V.onload=()=>W(!0),V.onerror=()=>W(!1),V.src=K,setTimeout(()=>W(!1),5e3)}),D=async()=>{if(!o.trim()){S({title:"Invalid URL",description:"Please enter a valid image URL",variant:"destructive"});return}if(t.includes(o)){S({title:"Duplicate Image",description:"This image has already been added",variant:"destructive"});return}if(n<=0){S({title:"Image Limit Reached",description:"Maximum number of images reached",variant:"destructive"});return}g(!0);try{await E(o)?(e(o),l(""),p(""),S({title:"Image Added",description:"Image URL added successfully"})):S({title:"Invalid Image",description:"Unable to load image from this URL",variant:"destructive"})}catch{S({title:"Error",description:"Failed to validate image URL",variant:"destructive"})}finally{g(!1)}},B=()=>{if(!c.trim())return;const W=`${P[h].searchUrl}${encodeURIComponent(c)}`;window.open(W,"_blank")},M=K=>{if(t.includes(K)){S({title:"Duplicate Image",description:"This image has already been added",variant:"destructive"});return}if(n<=0){S({title:"Image Limit Reached",description:"Maximum number of images reached",variant:"destructive"});return}e(K),S({title:"Image Added",description:"Sample image added successfully"})},U=async()=>{try{const K=await navigator.clipboard.readText();K&&(l(K),p(K))}catch{S({title:"Clipboard Error",description:"Unable to read from clipboard",variant:"destructive"})}};return r.jsxs(Ir,{open:i,onOpenChange:a,children:[r.jsx(Ns,{asChild:!0,children:r.jsxs(F,{variant:"outline",className:"w-full",disabled:n<=0,children:[r.jsx(Wt,{className:"h-4 w-4 mr-2"}),s," (",t.length,"/",t.length+n,")"]})}),r.jsxs(Tr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(Ar,{children:r.jsxs(Er,{className:"flex items-center gap-2",children:[r.jsx(Up,{className:"h-5 w-5"}),"Add Product Images",r.jsxs(le,{variant:"secondary",children:[t.length,"/",t.length+n," images"]})]})}),r.jsxs(oi,{defaultValue:"upload",className:"w-full",children:[r.jsxs(Ds,{className:"grid w-full grid-cols-4",children:[r.jsx(ht,{value:"upload",children:"Upload"}),r.jsx(ht,{value:"camera",children:"Camera"}),r.jsx(ht,{value:"url",children:"Paste URL"}),r.jsx(ht,{value:"search",children:"Search"})]}),r.jsx(tt,{value:"upload",className:"space-y-4",children:r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"text-lg flex items-center gap-2",children:[r.jsx(Ws,{className:"h-5 w-5"}),"Upload from Device"]})}),r.jsx(Z,{children:r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[r.jsx(Ws,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),r.jsx("p",{className:"text-lg font-medium mb-2",children:"Upload Image Files"}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose JPG, PNG, or GIF files from your device"}),r.jsxs(F,{onClick:()=>{var K;return(K=w.current)==null?void 0:K.click()},children:[r.jsx(Ws,{className:"h-4 w-4 mr-2"}),"Choose Files"]}),r.jsx("input",{ref:w,type:"file",accept:"image/*",onChange:I,className:"hidden"})]})})]})}),r.jsx(tt,{value:"camera",className:"space-y-4",children:r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"text-lg flex items-center gap-2",children:[r.jsx(Eo,{className:"h-5 w-5"}),"Take Photo"]})}),r.jsx(Z,{children:r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[r.jsx(Eo,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),r.jsx("p",{className:"text-lg font-medium mb-2",children:"Capture with Camera"}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Take a photo directly with your device camera"}),r.jsxs(F,{onClick:()=>{var K;return(K=N.current)==null?void 0:K.click()},children:[r.jsx(Eo,{className:"h-4 w-4 mr-2"}),"Open Camera"]}),r.jsx("input",{ref:N,type:"file",accept:"image/*",capture:"environment",onChange:T,className:"hidden"})]})})]})}),r.jsx(tt,{value:"url",className:"space-y-4",children:r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"text-lg flex items-center gap-2",children:[r.jsx(Zte,{className:"h-5 w-5"}),"Add Image URL"]})}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx(he,{placeholder:"Paste image URL here...",value:o,onChange:K=>{l(K.target.value),p(K.target.value)},onKeyPress:K=>K.key==="Enter"&&D(),className:"flex-1"}),r.jsx(F,{variant:"outline",onClick:U,children:r.jsx(Hte,{className:"h-4 w-4"})}),r.jsx(F,{onClick:D,disabled:!o.trim()||f,children:f?"Validating...":"Add Image"})]}),x&&r.jsxs("div",{className:"border rounded-lg p-4",children:[r.jsx("p",{className:"text-sm font-medium mb-2",children:"Preview:"}),r.jsx("img",{src:x,alt:"Preview",className:"max-w-full h-32 object-cover rounded",onError:()=>p("")})]}),r.jsx("div",{className:"border rounded-lg p-4 bg-blue-50",children:r.jsxs("p",{className:"text-sm",children:[r.jsx("strong",{children:" Tip:"}),' Right-click any image  "Copy image address"  Paste here']})})]})]})}),r.jsx(tt,{value:"search",className:"space-y-4",children:r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"text-lg flex items-center gap-2",children:[r.jsx(zn,{className:"h-5 w-5"}),"Search for Images"]})}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx(he,{placeholder:"Search for images...",value:c,onChange:K=>d(K.target.value),onKeyPress:K=>K.key==="Enter"&&B(),className:"flex-1"}),r.jsx(F,{onClick:B,disabled:!c.trim(),children:r.jsx(zn,{className:"h-4 w-4"})})]}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(P).map(([K,W])=>r.jsxs(F,{variant:h===K?"default":"outline",size:"sm",onClick:()=>m(K),className:"text-xs justify-start",children:[r.jsx("span",{className:"mr-2",children:W.icon}),W.name]},K))}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium mb-2",children:" Popular Local Items:"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:C.map(K=>r.jsx(F,{variant:"outline",size:"sm",onClick:()=>{d(K);const V=`${P[h].searchUrl}${encodeURIComponent(K)}`;window.open(V,"_blank")},className:"text-xs text-left justify-start",children:K},K))})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex gap-2 mb-3",children:[r.jsx("p",{className:"text-sm font-medium",children:" Sample Images:"}),r.jsxs("select",{value:y,onChange:K=>b(K.target.value),className:"text-xs border rounded px-2 py-1",children:[r.jsx("option",{value:"food",children:"Food"}),r.jsx("option",{value:"electronics",children:"Electronics"}),r.jsx("option",{value:"clothing",children:"Clothing"})]})]}),r.jsx("div",{className:"grid grid-cols-3 gap-2",children:(H=k[y])==null?void 0:H.map((K,W)=>r.jsxs("div",{className:"relative group",children:[r.jsx("img",{src:K.url,alt:K.title,className:"w-full h-20 object-cover rounded cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>M(K.url)}),r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all rounded flex items-center justify-center",children:r.jsx(F,{size:"sm",className:"opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>M(K.url),children:r.jsx(Wt,{className:"h-3 w-3"})})}),t.includes(K.url)&&r.jsx("div",{className:"absolute top-1 right-1 bg-green-500 rounded-full p-1",children:r.jsx(Md,{className:"h-3 w-3 text-white"})})]},W))})]}),r.jsx("div",{className:"border rounded-lg p-4 bg-orange-50",children:r.jsxs("p",{className:"text-sm",children:[r.jsx("strong",{children:" How to find local items:"}),' Search  Find image  Right-click  "Copy image address"  Go to "Paste URL" tab  Add image']})})]})]})})]}),t.length>0&&r.jsxs("div",{className:"border-t pt-4",children:[r.jsxs("p",{className:"text-sm font-medium mb-2",children:["Selected Images (",t.length,"):"]}),r.jsx("div",{className:"grid grid-cols-4 gap-2",children:t.slice(-8).map((K,W)=>r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:K,alt:`Selected ${W+1}`,className:"w-full h-16 object-cover rounded"}),r.jsx("div",{className:"absolute top-1 right-1 bg-green-500 rounded-full p-1",children:r.jsx(Md,{className:"h-3 w-3 text-white"})})]},W))})]})]})]})}const Lbe=te.object({name:te.string().min(1,"Product name is required"),description:te.string().optional(),price:te.string().min(1,"Price is required"),originalPrice:te.string().optional(),categoryId:te.number().min(1,"Category is required"),stock:te.number().min(0,"Stock must be 0 or greater"),imageUrl:te.string().optional(),images:te.array(te.string()).min(1,"At least 1 image is required").max(6,"Maximum 6 images allowed"),isFastSell:te.boolean().default(!1),isOnOffer:te.boolean().default(!1),offerPercentage:te.number().min(0).max(100).default(0),offerEndDate:te.string().optional(),productType:te.enum(["retail","food"]).default("retail"),preparationTime:te.string().optional(),ingredients:te.array(te.string()).default([]),allergens:te.array(te.string()).default([]),spiceLevel:te.string().optional(),isVegetarian:te.boolean().default(!1),isVegan:te.boolean().default(!1),nutritionInfo:te.string().optional()}),x3=te.object({name:te.string().min(1,"Store name is required"),description:te.string().optional(),address:te.string().min(1,"Address is required"),latitude:te.string().optional(),longitude:te.string().optional(),phone:te.string().optional(),website:te.string().url().optional().or(te.literal("")),logo:te.string().optional(),coverImage:te.string().optional(),storeType:te.enum(["retail","restaurant"]).default("retail"),cuisineType:te.string().optional(),deliveryTime:te.string().optional(),minimumOrder:te.string().optional(),deliveryFee:te.string().optional(),isDeliveryAvailable:te.boolean().default(!1),openingHours:te.string().optional()});function Rbe(){const[e,t]=j.useState("overview"),[n,s]=j.useState(null),[i,a]=j.useState(null);j.useState(!1);const[o,l]=j.useState([]);j.useState([]);const[c,d]=j.useState(!1),[h,m]=j.useState([]),[f,g]=j.useState([]),[x,p]=j.useState(""),[y,b]=j.useState(""),[w,N]=j.useState(!1),{user:S}=Gt(),{toast:P}=ft(),C=()=>{if(x.trim()&&!h.includes(x.trim())){const $=[...h,x.trim()];m($),H.setValue("ingredients",$),p("")}},k=$=>{const ee=h.filter(X=>X!==$);m(ee),H.setValue("ingredients",ee)},O=()=>{if(y.trim()&&!f.includes(y.trim())){const $=[...f,y.trim()];g($),H.setValue("allergens",$),b("")}},I=$=>{const ee=f.filter(X=>X!==$);g(ee),H.setValue("allergens",ee)},{data:T=[]}=Re({queryKey:["/api/stores/owner",S==null?void 0:S.id],queryFn:async()=>{if(!(S!=null&&S.id))return[];const $=await fetch(`/api/stores/owner/${S.id}`);if(!$.ok)throw new Error("Failed to fetch stores");return $.json()},enabled:!!S}),E=T[0],D=(E==null?void 0:E.storeType)==="restaurant"||(E==null?void 0:E.name)&&E.name.toLowerCase().includes("restaurant"),{data:B=[]}=Re({queryKey:[`/api/products/store/${E==null?void 0:E.id}`],queryFn:async()=>{if(!(E!=null&&E.id))return[];const $=await fetch(`/api/products/store/${E.id}`);if(!$.ok)throw new Error("Failed to fetch store products");return $.json()},enabled:!!E}),{data:M=[]}=Re({queryKey:[`/api/orders/store/${E==null?void 0:E.id}`],queryFn:async()=>{if(!(E!=null&&E.id))return[];const $=await fetch(`/api/orders/store/${E.id}`);if(!$.ok)throw new Error("Failed to fetch store orders");return $.json()},enabled:!!E,refetchInterval:3e4,refetchOnWindowFocus:!0}),{data:U=[]}=Re({queryKey:["/api/categories"]});Re({queryKey:["/api/delivery-partners"],queryFn:async()=>{const $=await fetch("/api/delivery-partners");if(!$.ok)throw new Error("Failed to fetch delivery partners");const ee=await $.json(),X=await fetch("/api/users"),Ce=X.ok?await X.json():[];return ee.map($e=>{const He=Ce.find(lt=>lt.id===$e.userId);return{...$e,name:(He==null?void 0:He.fullName)||`Partner ${$e.id}`,email:(He==null?void 0:He.email)||"No email"}})}});const H=an({resolver:on(Lbe),defaultValues:{name:"",description:"",price:"",originalPrice:"",categoryId:1,stock:0,imageUrl:"",images:[],isFastSell:!1,isOnOffer:!1,offerPercentage:0,offerEndDate:"",preparationTime:"",ingredients:[],allergens:[],spiceLevel:"",isVegetarian:!1,isVegan:!1,nutritionInfo:""}}),K=an({resolver:on(x3),defaultValues:{name:"",description:"",address:"",latitude:"",longitude:"",phone:"",website:"",logo:"",coverImage:"",storeType:"retail",cuisineType:"",deliveryTime:"",minimumOrder:"",deliveryFee:"",isDeliveryAvailable:!1,openingHours:""}}),W=an({resolver:on(x3),defaultValues:{name:"",description:"",address:"",latitude:"",longitude:"",phone:"",website:"",logo:"",coverImage:"",storeType:"retail",cuisineType:"",deliveryTime:"",minimumOrder:"",deliveryFee:"",isDeliveryAvailable:!1,openingHours:""}}),V=M.length,z=B.length,q=M.reduce(($,ee)=>$+Number(ee.totalAmount),0),J=M.filter($=>$.status==="pending").length,pe=async $=>{var ee;if(E)try{const X={...$,storeId:E.id,price:$.price,originalPrice:$.originalPrice||void 0,images:$.images||[],imageUrl:((ee=$.images)==null?void 0:ee[0])||void 0,isFastSell:$.isFastSell||!1,isOnOffer:$.isOnOffer||!1,offerPercentage:$.offerPercentage||0,offerEndDate:$.offerEndDate||void 0,productType:(E==null?void 0:E.storeType)==="restaurant"||E!=null&&E.name&&E.name.toLowerCase().includes("restaurant")?"food":"retail",preparationTime:((E==null?void 0:E.storeType)==="restaurant"||E!=null&&E.name&&E.name.toLowerCase().includes("restaurant"))&&$.preparationTime||null,ingredients:(E==null?void 0:E.storeType)==="restaurant"||E!=null&&E.name&&E.name.toLowerCase().includes("restaurant")?h:[],allergens:(E==null?void 0:E.storeType)==="restaurant"||E!=null&&E.name&&E.name.toLowerCase().includes("restaurant")?f:[],spiceLevel:((E==null?void 0:E.storeType)==="restaurant"||E!=null&&E.name&&E.name.toLowerCase().includes("restaurant"))&&$.spiceLevel||null,isVegetarian:((E==null?void 0:E.storeType)==="restaurant"||E!=null&&E.name&&E.name.toLowerCase().includes("restaurant"))&&$.isVegetarian||!1,isVegan:((E==null?void 0:E.storeType)==="restaurant"||E!=null&&E.name&&E.name.toLowerCase().includes("restaurant"))&&$.isVegan||!1,nutritionInfo:((E==null?void 0:E.storeType)==="restaurant"||E!=null&&E.name&&E.name.toLowerCase().includes("restaurant"))&&$.nutritionInfo||null};n?(await Gl(`/api/products/${n.id}`,X),P({title:"Product updated successfully"})):(await Pi("/api/products",X),P({title:"Product added successfully"})),H.reset(),s(null),d(!1),Dr.invalidateQueries({queryKey:[`/api/products/store/${E.id}`]}),Dr.invalidateQueries({queryKey:["/api/products"]})}catch(X){P({title:"Error",description:X instanceof Error?X.message:"Failed to save product",variant:"destructive"})}},ye=$=>{var ee;s($),H.reset({name:$.name,description:$.description||"",price:$.price,originalPrice:$.originalPrice||"",categoryId:$.categoryId||0,stock:$.stock||0,imageUrl:((ee=$.images)==null?void 0:ee[0])||"",images:$.images||[],isFastSell:$.isFastSell||!1,isOnOffer:$.isOnOffer||!1,offerPercentage:$.offerPercentage||0,offerEndDate:$.offerEndDate||""}),t("add-product")},Ne=async $=>{if(confirm("Are you sure you want to delete this product?"))try{await vb(`/api/products/${$}`),P({title:"Product deleted successfully"}),E&&(Dr.invalidateQueries({queryKey:[`/api/products/store/${E.id}`]}),Dr.invalidateQueries({queryKey:["/api/products"]}))}catch{P({title:"Error",description:"Failed to delete product",variant:"destructive"})}},ke=async $=>{try{const ee={...$,ownerId:S.id,phone:$.phone||null,description:$.description||null,website:$.website||null,logo:$.logo||null,coverImage:$.coverImage||null,latitude:$.latitude||null,longitude:$.longitude||null,storeType:$.storeType,cuisineType:$.storeType==="restaurant"&&$.cuisineType||null,deliveryTime:$.storeType==="restaurant"&&$.deliveryTime||null,minimumOrder:$.storeType==="restaurant"&&$.minimumOrder?$.minimumOrder:null,deliveryFee:$.storeType==="restaurant"&&$.deliveryFee?$.deliveryFee:null,isDeliveryAvailable:$.storeType==="restaurant"?$.isDeliveryAvailable:!1,openingHours:$.storeType==="restaurant"&&$.openingHours||null};await Pi("/api/stores",ee),P({title:"Store created successfully"}),K.reset(),Dr.invalidateQueries({queryKey:["/api/stores"]}),Dr.invalidateQueries({queryKey:["/api/stores","owner",S.id]})}catch(ee){P({title:"Error",description:ee instanceof Error?ee.message:"Failed to create store",variant:"destructive"})}},Ee=async $=>{var ee,X;if(E!=null&&E.id)try{const Ce={...$,minimumOrder:$.minimumOrder||null,deliveryFee:$.deliveryFee||null,latitude:((ee=i==null?void 0:i.latitude)==null?void 0:ee.toString())||$.latitude,longitude:((X=i==null?void 0:i.longitude)==null?void 0:X.toString())||$.longitude};await Gl(`/api/stores/${E.id}`,Ce),Dr.invalidateQueries({queryKey:["/api/stores/owner",S==null?void 0:S.id]}),N(!1),P({title:"Success",description:"Store updated successfully"})}catch(Ce){console.error("Store update error:",Ce),P({title:"Error",description:"Failed to update store",variant:"destructive"})}},We=()=>{var $,ee;E&&(W.reset({name:E.name||"",description:E.description||"",address:E.address||"",latitude:E.latitude||"",longitude:E.longitude||"",phone:E.phone||"",website:E.website||"",logo:E.logo||"",coverImage:E.coverImage||"",storeType:E.storeType==="restaurant"?"restaurant":"retail",cuisineType:E.cuisineType||"",deliveryTime:E.deliveryTime||"",minimumOrder:(($=E.minimumOrder)==null?void 0:$.toString())||"",deliveryFee:((ee=E.deliveryFee)==null?void 0:ee.toString())||"",isDeliveryAvailable:!!E.isDeliveryAvailable,openingHours:E.openingHours||""}),N(!0))},Se=async($,ee)=>{try{await Gl(`/api/orders/${$}/status`,{status:ee}),P({title:"Order status updated successfully"}),Dr.invalidateQueries({queryKey:[`/api/orders/store/${E==null?void 0:E.id}`]}),Dr.invalidateQueries({queryKey:["/api/orders/store"]}),Dr.invalidateQueries({queryKey:["/api/orders"]}),E!=null&&E.id&&Dr.refetchQueries({queryKey:[`/api/orders/store/${E.id}`]})}catch(X){console.error("Order status update error:",X),P({title:"Error",description:"Failed to update order status",variant:"destructive"})}},Me=async($,ee,X=!1)=>{try{const Ce=await Pi("/api/notifications/delivery-assignment",{orderId:$,message:ee,storeId:E==null?void 0:E.id,shopkeeperId:S==null?void 0:S.id,urgent:X,notificationType:"first_accept_first_serve"}),$e={id:Date.now(),orderId:$,message:ee,urgent:X,sentAt:new Date().toISOString(),status:"sent",acceptedBy:null};l(He=>[$e,...He]),P({title:X?"Urgent delivery notification sent":"Delivery notification sent",description:"All available delivery partners have been notified"})}catch{P({title:"Error",description:"Failed to notify delivery partners",variant:"destructive"})}},Ie=async($,ee)=>{try{await Pi("/api/notifications/broadcast-delivery",{message:$,orderIds:ee,storeId:E==null?void 0:E.id,shopkeeperId:S==null?void 0:S.id}),P({title:"Broadcast notification sent",description:`Notified delivery partners about ${ee.length} orders`})}catch{P({title:"Error",description:"Failed to send broadcast notification",variant:"destructive"})}};return!S||S.role!=="shopkeeper"?r.jsx("div",{className:"min-h-screen bg-muted flex items-center justify-center",children:r.jsx(G,{className:"w-full max-w-md",children:r.jsxs(Z,{className:"pt-6 text-center",children:[r.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Access Denied"}),r.jsx("p",{className:"text-muted-foreground",children:"This page is only accessible to shopkeepers."})]})})}):r.jsx("div",{className:"min-h-screen bg-muted",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[r.jsx("div",{className:"flex justify-between items-center mb-8",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Shopkeeper Dashboard"}),r.jsx("p",{className:"text-muted-foreground",children:E?`Managing ${E.name}`:"Manage your store"})]})}),r.jsxs(oi,{value:e,onValueChange:t,children:[r.jsxs(Ds,{className:`grid w-full gap-2 h-auto p-2 bg-white dark:bg-gray-800 rounded-lg ${E?"grid-cols-2 md:grid-cols-4":"grid-cols-2"}`,children:[r.jsxs(ht,{value:"overview",className:"flex flex-col items-center gap-1 p-3 text-xs font-medium data-[state=active]:bg-orange-100 data-[state=active]:text-orange-600 dark:data-[state=active]:bg-orange-900 dark:data-[state=active]:text-orange-400",children:[r.jsx(ti,{className:"h-5 w-5"}),r.jsx("span",{className:"hidden sm:inline",children:"Overview"})]}),!E&&r.jsxs(ht,{value:"create-store",className:"flex flex-col items-center gap-1 p-3 text-xs font-medium data-[state=active]:bg-orange-100 data-[state=active]:text-orange-600 dark:data-[state=active]:bg-orange-900 dark:data-[state=active]:text-orange-400",children:[r.jsx(nr,{className:"h-5 w-5"}),r.jsx("span",{className:"hidden sm:inline",children:"Create Store"})]}),E&&r.jsxs(r.Fragment,{children:[r.jsxs(ht,{value:"analytics",className:"flex flex-col items-center gap-1 p-3 text-xs font-medium data-[state=active]:bg-orange-100 data-[state=active]:text-orange-600 dark:data-[state=active]:bg-orange-900 dark:data-[state=active]:text-orange-400",children:[r.jsx(wn,{className:"h-5 w-5"}),r.jsx("span",{className:"hidden sm:inline",children:"Analytics"})]}),r.jsxs(ht,{value:"orders",className:"flex flex-col items-center gap-1 p-3 text-xs font-medium data-[state=active]:bg-orange-100 data-[state=active]:text-orange-600 dark:data-[state=active]:bg-orange-900 dark:data-[state=active]:text-orange-400",children:[r.jsx(Bn,{className:"h-5 w-5"}),r.jsx("span",{className:"hidden sm:inline",children:"Orders"})]}),r.jsxs(ht,{value:"notifications",className:"flex flex-col items-center gap-1 p-3 text-xs font-medium data-[state=active]:bg-orange-100 data-[state=active]:text-orange-600 dark:data-[state=active]:bg-orange-900 dark:data-[state=active]:text-orange-400",children:[r.jsx(Xt,{className:"h-5 w-5"}),r.jsx("span",{className:"hidden sm:inline",children:"Notifications"})]})]})]}),r.jsxs(tt,{value:"overview",className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(G,{children:r.jsx(Z,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Products"}),r.jsx("p",{className:"text-2xl font-bold",children:z})]}),r.jsx(rt,{className:"h-8 w-8 text-primary"})]})})}),r.jsx(G,{children:r.jsx(Z,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Orders"}),r.jsx("p",{className:"text-2xl font-bold",children:V})]}),r.jsx(Bn,{className:"h-8 w-8 text-green-600"})]})})}),r.jsx(G,{children:r.jsx(Z,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Revenue"}),r.jsxs("p",{className:"text-2xl font-bold",children:["",q.toLocaleString()]})]}),r.jsx(Hr,{className:"h-8 w-8 text-yellow-600"})]})})}),r.jsx(G,{children:r.jsx(Z,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Pending Orders"}),r.jsx("p",{className:"text-2xl font-bold",children:J})]}),r.jsx(gt,{className:"h-8 w-8 text-orange-600"})]})})})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:"Recent Orders"})}),r.jsx(Z,{children:M.length===0?r.jsx("div",{className:"text-center py-8",children:r.jsx("p",{className:"text-muted-foreground",children:"No orders yet"})}):r.jsx("div",{className:"space-y-4",children:M.slice(0,5).map($=>r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium",children:["Order #",$.id]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:$.customerName}),r.jsx("p",{className:"text-sm text-muted-foreground",children:new Date($.createdAt).toLocaleDateString()})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"font-semibold",children:["",Number($.totalAmount).toLocaleString()]}),r.jsx(le,{variant:$.status==="delivered"?"default":$.status==="shipped"?"secondary":$.status==="processing"?"outline":"destructive",children:$.status})]})]},$.id))})})]})]}),r.jsxs(tt,{value:"analytics",className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Store Analytics"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(ct,{defaultValue:"30",children:[r.jsx(it,{className:"w-40",children:r.jsx(dt,{})}),r.jsxs(at,{children:[r.jsx(ne,{value:"7",children:"Last 7 days"}),r.jsx(ne,{value:"30",children:"Last 30 days"}),r.jsx(ne,{value:"90",children:"Last 90 days"}),r.jsx(ne,{value:"365",children:"Last year"})]})]}),r.jsx(F,{variant:"outline",size:"sm",children:r.jsx(wn,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(G,{children:r.jsxs(Z,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Conversion Rate"}),r.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[V>0?(V/(z*10)*100).toFixed(1):0,"%"]})]}),r.jsx(wn,{className:"h-8 w-8 text-green-600"})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"+2.5% from last month"})]})}),r.jsx(G,{children:r.jsxs(Z,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Average Order Value"}),r.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["",V>0?(q/V).toFixed(0):0]})]}),r.jsx(Hr,{className:"h-8 w-8 text-blue-600"})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"+5.2% from last month"})]})}),r.jsx(G,{children:r.jsxs(Z,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Customer Rating"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx($t,{className:"h-5 w-5 text-yellow-500 fill-current"}),r.jsx("span",{className:"text-2xl font-bold",children:(E==null?void 0:E.rating)||"0.0"})]})]}),r.jsx($t,{className:"h-8 w-8 text-yellow-500"})]}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[(E==null?void 0:E.totalReviews)||0," reviews"]})]})}),r.jsx(G,{children:r.jsxs(Z,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Growth Rate"}),r.jsx("p",{className:"text-2xl font-bold text-purple-600",children:"+12.5%"})]}),r.jsx(wn,{className:"h-8 w-8 text-purple-600"})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Monthly growth"})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsx(ie,{children:"Revenue Trend"}),r.jsx("p",{className:"text-muted-foreground",children:"Monthly revenue performance"})]}),r.jsx(Z,{children:r.jsx("div",{className:"h-64 flex items-center justify-center bg-gray-50 dark:bg-gray-800 rounded-lg",children:r.jsxs("div",{className:"text-center",children:[r.jsx(wn,{className:"h-12 w-12 text-muted-foreground mx-auto mb-2"}),r.jsx("p",{className:"text-muted-foreground",children:"Revenue chart visualization"}),r.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Current total: ",q.toLocaleString()]})]})})})]}),r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsx(ie,{children:"Order Status Distribution"}),r.jsx("p",{className:"text-muted-foreground",children:"Breakdown of order statuses"})]}),r.jsx(Z,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),r.jsx("span",{className:"text-sm",children:"Delivered"})]}),r.jsx("span",{className:"text-sm font-medium",children:M.filter($=>$.status==="delivered").length})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),r.jsx("span",{className:"text-sm",children:"Processing"})]}),r.jsx("span",{className:"text-sm font-medium",children:M.filter($=>$.status==="processing").length})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full"}),r.jsx("span",{className:"text-sm",children:"Pending"})]}),r.jsx("span",{className:"text-sm font-medium",children:M.filter($=>$.status==="pending").length})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),r.jsx("span",{className:"text-sm",children:"Shipped"})]}),r.jsx("span",{className:"text-sm font-medium",children:M.filter($=>$.status==="shipped").length})]})]})})]})]}),r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsx(ie,{children:"Top Performing Products"}),r.jsx("p",{className:"text-muted-foreground",children:"Your best-selling products this month"})]}),r.jsx(Z,{children:B.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(rt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-2"}),r.jsx("p",{className:"text-muted-foreground",children:"No products to analyze"})]}):r.jsx("div",{className:"space-y-4",children:B.slice(0,5).map(($,ee)=>{var X;return r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:["#",ee+1]}),r.jsx("img",{src:((X=$.images)==null?void 0:X[0])||"https://images.unsplash.com/photo-1560472354-b33ff0c44a43",alt:$.name,className:"w-10 h-10 object-cover rounded"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:$.name}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["",Number($.price).toLocaleString()]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"text-sm font-medium",children:["Stock: ",$.stock]}),r.jsx(le,{variant:$.isActive?"default":"secondary",children:$.isActive?"Active":"Inactive"})]})]},$.id)})})})]}),r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsx(ie,{children:"Business Insights"}),r.jsx("p",{className:"text-muted-foreground",children:"AI-powered recommendations for your store"})]}),r.jsx(Z,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-blue-50 rounded-lg",children:[r.jsx(wn,{className:"h-5 w-5 text-blue-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Revenue Opportunity"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Consider adding more products in high-demand categories to increase revenue by an estimated 15-20%."})]})]}),r.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-green-50 rounded-lg",children:[r.jsx($t,{className:"h-5 w-5 text-green-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Customer Satisfaction"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Your store rating is performing well. Maintain quality service to keep customers happy."})]})]}),r.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-orange-50 rounded-lg",children:[r.jsx(rt,{className:"h-5 w-5 text-orange-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Inventory Management"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:B.filter($=>$.stock<10).length>0?`${B.filter($=>$.stock<10).length} products are running low on stock. Consider restocking soon.`:"Your inventory levels look healthy across all products."})]})]})]})})]})]}),r.jsx(tt,{value:"inventory",className:"space-y-6",children:r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(rt,{className:"h-5 w-5"}),"Add New Product"]}),r.jsx("p",{className:"text-muted-foreground",children:"Add products to your store inventory"})]}),r.jsx(Z,{children:r.jsx(Or,{...H,children:r.jsxs("form",{onSubmit:H.handleSubmit(pe),className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(oe,{control:H.control,name:"name",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Product Name *"}),r.jsx(me,{children:r.jsx(he,{placeholder:"Enter product name",...$})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:H.control,name:"categoryId",render:({field:$})=>{var ee;return r.jsxs(ae,{children:[r.jsx(de,{children:"Category *"}),r.jsxs(ct,{onValueChange:X=>$.onChange(parseInt(X)),defaultValue:(ee=$.value)==null?void 0:ee.toString(),children:[r.jsx(me,{children:r.jsx(it,{children:r.jsx(dt,{placeholder:"Select category"})})}),r.jsx(at,{children:U.map(X=>r.jsx(ne,{value:X.id.toString(),children:X.name},X.id))})]}),r.jsx(fe,{})]})}})]}),r.jsx(oe,{control:H.control,name:"description",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Description"}),r.jsx(me,{children:r.jsx(Yt,{placeholder:"Enter product description",className:"min-h-24",...$})}),r.jsx(fe,{})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsx(oe,{control:H.control,name:"price",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Price *"}),r.jsx(me,{children:r.jsx(he,{type:"number",placeholder:"0.00",...$})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:H.control,name:"originalPrice",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Original Price"}),r.jsx(me,{children:r.jsx(he,{type:"number",placeholder:"0.00",...$})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:H.control,name:"stock",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Stock Quantity *"}),r.jsx(me,{children:r.jsx(he,{type:"number",placeholder:"Enter quantity",...$,onChange:ee=>$.onChange(parseInt(ee.target.value)||0)})}),r.jsx(fe,{})]})})]}),r.jsx(oe,{control:H.control,name:"images",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(qs,{label:"Product Images",maxImages:6,minImages:1,onImagesChange:$.onChange,initialImages:$.value||[],className:"col-span-full"}),r.jsx(fe,{})]})}),r.jsxs(F,{type:"submit",className:"w-full",children:[r.jsx(Wt,{className:"h-4 w-4 mr-2"}),n?"Update Product":"Add Product"]})]})})})]})}),r.jsx(tt,{value:"create-store",className:"space-y-6",children:r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsx(ie,{children:"Create Your Store"}),r.jsx("p",{className:"text-muted-foreground",children:"Set up your store to start selling products on Siraha Bazaar"})]}),r.jsx(Z,{children:r.jsx(Or,{...K,children:r.jsxs("form",{onSubmit:K.handleSubmit(ke),className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(oe,{control:K.control,name:"name",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Store Name"}),r.jsx(me,{children:r.jsx(he,{placeholder:"My Awesome Store",...$})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:K.control,name:"phone",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Phone Number"}),r.jsx(me,{children:r.jsx(he,{placeholder:"+1234567890",...$})}),r.jsx(fe,{})]})})]}),r.jsx(oe,{control:K.control,name:"description",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Description"}),r.jsx(me,{children:r.jsx(Yt,{placeholder:"Tell customers about your store...",...$})}),r.jsx(fe,{})]})}),r.jsx(H0,{address:K.watch("address"),latitude:K.watch("latitude"),longitude:K.watch("longitude"),onLocationChange:$=>{K.setValue("address",$.address),K.setValue("latitude",$.latitude),K.setValue("longitude",$.longitude)}}),r.jsx(oe,{control:K.control,name:"website",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Website (Optional)"}),r.jsx(me,{children:r.jsx(he,{placeholder:"https://mystore.com",...$})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:K.control,name:"storeType",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Store Type"}),r.jsxs(ct,{onValueChange:$.onChange,defaultValue:$.value,children:[r.jsx(me,{children:r.jsx(it,{children:r.jsx(dt,{placeholder:"Select store type"})})}),r.jsxs(at,{children:[r.jsx(ne,{value:"retail",children:"Retail Store"}),r.jsx(ne,{value:"restaurant",children:"Restaurant"})]})]}),r.jsx(fe,{})]})}),K.watch("storeType")==="restaurant"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(oe,{control:K.control,name:"cuisineType",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Cuisine Type"}),r.jsxs(ct,{onValueChange:$.onChange,defaultValue:$.value,children:[r.jsx(me,{children:r.jsx(it,{children:r.jsx(dt,{placeholder:"Select cuisine type"})})}),r.jsxs(at,{children:[r.jsx(ne,{value:"indian",children:"Indian"}),r.jsx(ne,{value:"chinese",children:"Chinese"}),r.jsx(ne,{value:"fast-food",children:"Fast Food"}),r.jsx(ne,{value:"italian",children:"Italian"}),r.jsx(ne,{value:"mexican",children:"Mexican"}),r.jsx(ne,{value:"continental",children:"Continental"}),r.jsx(ne,{value:"desserts",children:"Desserts & Sweets"}),r.jsx(ne,{value:"beverages",children:"Beverages"})]})]}),r.jsx(fe,{})]})}),r.jsx(oe,{control:K.control,name:"deliveryTime",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Delivery Time"}),r.jsx(me,{children:r.jsx(he,{placeholder:"e.g., 25-35 mins",...$})}),r.jsx(fe,{})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(oe,{control:K.control,name:"minimumOrder",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Minimum Order Amount ()"}),r.jsx(me,{children:r.jsx(he,{placeholder:"e.g., 200",...$})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:K.control,name:"deliveryFee",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Delivery Fee ()"}),r.jsx(me,{children:r.jsx(he,{placeholder:"e.g., 40 (0 for free)",...$})}),r.jsx(fe,{})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(oe,{control:K.control,name:"isDeliveryAvailable",render:({field:$})=>r.jsxs(ae,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(de,{className:"text-base",children:"Delivery Available"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Enable home delivery for your restaurant"})]}),r.jsx(me,{children:r.jsx("input",{type:"checkbox",checked:$.value,onChange:$.onChange,className:"rounded"})})]})}),r.jsx(oe,{control:K.control,name:"openingHours",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Opening Hours"}),r.jsx(me,{children:r.jsx(he,{placeholder:"e.g., 9:00 AM - 11:00 PM",...$})}),r.jsx(fe,{})]})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(oe,{control:K.control,name:"logo",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(qs,{label:"Store Logo",single:!0,maxImages:1,minImages:0,onImagesChange:ee=>$.onChange(ee[0]||""),initialImages:$.value?[$.value]:[]}),r.jsx(fe,{})]})}),r.jsx(oe,{control:K.control,name:"coverImage",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(qs,{label:"Store Cover Image",single:!0,maxImages:1,minImages:0,onImagesChange:ee=>$.onChange(ee[0]||""),initialImages:$.value?[$.value]:[]}),r.jsx(fe,{})]})})]}),r.jsx(F,{type:"submit",className:"w-full",children:"Create Store"})]})})})]})}),r.jsx(tt,{value:"products",className:"space-y-6",children:r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Manage Products"}),r.jsxs(F,{onClick:()=>t("add-product"),children:[r.jsx(Wt,{className:"h-4 w-4 mr-2"}),"Add Product"]})]})}),r.jsx(Z,{children:B.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(rt,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"No products added yet"}),r.jsx(F,{className:"mt-4",onClick:()=>t("add-product"),children:"Add Your First Product"})]}):r.jsx("div",{className:"space-y-4",children:B.map($=>{var ee;return r.jsxs("div",{className:"flex items-center space-x-4 p-4 border rounded-lg",children:[r.jsx("img",{src:((ee=$.images)==null?void 0:ee[0])||"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&h=100",alt:$.name,className:"w-16 h-16 object-cover rounded-lg"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-medium",children:$.name}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Price: ",Number($.price).toLocaleString()]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Stock: ",$.stock," units"]}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[$.isFastSell&&r.jsx(le,{variant:"destructive",className:"text-xs",children:" Fast Sell"}),$.isOnOffer&&r.jsxs(le,{variant:"secondary",className:"text-xs",children:[" ",$.offerPercentage,"% OFF"]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(le,{variant:$.isActive?"default":"secondary",children:$.isActive?"Active":"Inactive"}),r.jsx(F,{variant:"outline",size:"sm",onClick:()=>ye($),children:r.jsx(us,{className:"h-4 w-4"})}),r.jsx(F,{variant:"outline",size:"sm",onClick:()=>Ne($.id),children:r.jsx(Xs,{className:"h-4 w-4"})})]})]},$.id)})})})]})}),r.jsx(tt,{value:"add-product",className:"space-y-4",children:r.jsxs(G,{children:[r.jsx(se,{className:"pb-4",children:r.jsxs(ie,{className:"flex items-center gap-2 text-lg",children:[r.jsx(Wt,{className:"h-5 w-5"}),n?"Edit Product":"Add New Product"]})}),r.jsx(Z,{className:"p-4",children:r.jsx(Or,{...H,children:r.jsxs("form",{onSubmit:H.handleSubmit(pe),className:"space-y-3 max-h-[70vh] overflow-y-auto",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsx(oe,{control:H.control,name:"name",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Product Name"}),r.jsx(me,{children:r.jsx(he,{placeholder:"Enter product name",...$})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:H.control,name:"categoryId",render:({field:$})=>{var ee;return r.jsxs(ae,{children:[r.jsx(de,{children:"Category"}),r.jsxs(ct,{onValueChange:X=>$.onChange(parseInt(X)),value:(ee=$.value)==null?void 0:ee.toString(),children:[r.jsx(me,{children:r.jsx(it,{children:r.jsx(dt,{placeholder:"Select category"})})}),r.jsx(at,{children:U.map(X=>r.jsx(ne,{value:X.id.toString(),children:X.name},X.id))})]}),r.jsx(fe,{})]})}}),r.jsx(oe,{control:H.control,name:"price",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Price ()"}),r.jsx(me,{children:r.jsx(he,{type:"number",placeholder:"Enter price",...$})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:H.control,name:"originalPrice",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Original Price () - Optional"}),r.jsx(me,{children:r.jsx(he,{type:"number",placeholder:"Enter original price",...$})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:H.control,name:"stock",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Stock Quantity"}),r.jsx(me,{children:r.jsx(he,{type:"number",placeholder:"Enter quantity",...$,onChange:ee=>$.onChange(parseInt(ee.target.value)||0)})}),r.jsx(fe,{})]})})]}),r.jsx(oe,{control:H.control,name:"images",render:({field:$})=>{var ee;return r.jsxs(ae,{children:[r.jsx(de,{children:"Product Images"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(qs,{label:"",maxImages:6,minImages:1,onImagesChange:$.onChange,initialImages:$.value||[],className:"col-span-full"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"flex-1 border-t border-gray-200"}),r.jsx("span",{className:"text-sm text-gray-500 px-2",children:"or"}),r.jsx("div",{className:"flex-1 border-t border-gray-200"})]}),r.jsx(p3,{onImageSelect:X=>{const Ce=$.value||[];Ce.length<6&&$.onChange([...Ce,X])},selectedImages:$.value||[],maxImages:6-(((ee=$.value)==null?void 0:ee.length)||0),buttonText:"Add Images"})]}),r.jsx(fe,{})]})}}),r.jsx(oe,{control:H.control,name:"description",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Description"}),r.jsx(me,{children:r.jsx(Yt,{placeholder:"Enter product description",className:"min-h-20",...$})}),r.jsx(fe,{})]})}),r.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-gray-50",children:[r.jsxs("h3",{className:"font-medium text-lg flex items-center gap-2",children:[r.jsx(wn,{className:"h-5 w-5"}),"Special Features"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(oe,{control:H.control,name:"isFastSell",render:({field:$})=>r.jsxs(ae,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(de,{className:"text-base font-medium",children:"Fast Sell Product"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Mark as fast-selling/trending item"})]}),r.jsx(me,{children:r.jsx("input",{type:"checkbox",checked:$.value,onChange:$.onChange,className:"w-4 h-4"})})]})}),r.jsx(oe,{control:H.control,name:"isOnOffer",render:({field:$})=>r.jsxs(ae,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(de,{className:"text-base font-medium",children:"Special Offer"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Apply discount offer"})]}),r.jsx(me,{children:r.jsx("input",{type:"checkbox",checked:$.value,onChange:$.onChange,className:"w-4 h-4"})})]})})]}),H.watch("isOnOffer")&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[r.jsx(oe,{control:H.control,name:"offerPercentage",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Discount Percentage (%)"}),r.jsx(me,{children:r.jsx(he,{type:"number",placeholder:"Enter discount percentage",min:"0",max:"100",...$,onChange:ee=>$.onChange(parseInt(ee.target.value)||0)})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:H.control,name:"offerEndDate",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Offer End Date"}),r.jsx(me,{children:r.jsx(he,{type:"date",...$})}),r.jsx(fe,{})]})})]})]}),(E==null?void 0:E.storeType)==="restaurant"&&r.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-orange-50",children:[r.jsxs("h3",{className:"font-medium text-lg flex items-center gap-2",children:[r.jsx(Fh,{className:"h-5 w-5"}),"Food Item Details"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(oe,{control:H.control,name:"preparationTime",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Preparation Time"}),r.jsx(me,{children:r.jsx(he,{placeholder:"e.g., 15-20 mins",...$})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:H.control,name:"spiceLevel",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Spice Level"}),r.jsxs(ct,{onValueChange:$.onChange,defaultValue:$.value,children:[r.jsx(me,{children:r.jsx(it,{children:r.jsx(dt,{placeholder:"Select spice level"})})}),r.jsxs(at,{children:[r.jsx(ne,{value:"",children:"Not Applicable"}),r.jsx(ne,{value:"mild",children:"Mild"}),r.jsx(ne,{value:"medium",children:"Medium"}),r.jsx(ne,{value:"hot",children:"Hot"}),r.jsx(ne,{value:"extra-hot",children:"Extra Hot"})]})]}),r.jsx(fe,{})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(oe,{control:H.control,name:"isVegetarian",render:({field:$})=>r.jsxs(ae,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(de,{className:"text-base font-medium",children:"Vegetarian"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Contains no meat or fish"})]}),r.jsx(me,{children:r.jsx("input",{type:"checkbox",checked:$.value,onChange:$.onChange,className:"w-4 h-4"})})]})}),r.jsx(oe,{control:H.control,name:"isVegan",render:({field:$})=>r.jsxs(ae,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(de,{className:"text-base font-medium",children:"Vegan"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Contains no animal products"})]}),r.jsx(me,{children:r.jsx("input",{type:"checkbox",checked:$.value,onChange:$.onChange,className:"w-4 h-4"})})]})})]}),r.jsx(oe,{control:H.control,name:"nutritionInfo",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Nutrition Information (Optional)"}),r.jsx(me,{children:r.jsx(Yt,{placeholder:"e.g., Calories: 350, Protein: 15g, Carbs: 45g, Fat: 12g",className:"min-h-20",...$})}),r.jsx(fe,{})]})})]}),r.jsxs("div",{className:"flex gap-3 pt-2",children:[r.jsxs(F,{type:"submit",className:"flex-1 h-10",size:"sm",children:[r.jsx(Wt,{className:"h-4 w-4 mr-2"}),n?"Update Product":"Add Product"]}),n&&r.jsx(F,{type:"button",variant:"outline",size:"sm",className:"h-10",onClick:()=>{s(null),H.reset()},children:"Cancel"})]})]})})})]})}),r.jsx(tt,{value:"store",className:"space-y-6",children:E?r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(nr,{className:"h-5 w-5"}),"Store Information"]}),r.jsx("p",{className:"text-muted-foreground",children:"Manage your store details and settings"})]}),r.jsxs(Z,{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Store Name"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:E.name})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Store Type"}),r.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:E.storeType})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Address"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:E.address})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Phone"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:E.phone||"Not set"})]}),E.storeType==="restaurant"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Cuisine Type"}),r.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:E.cuisineType||"Not set"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Delivery Time"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:E.deliveryTime||"Not set"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Minimum Order"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["",E.minimumOrder||"Not set"]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Delivery Fee"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["",E.deliveryFee||"Not set"]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Rating"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx($t,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),r.jsxs("span",{className:"text-sm text-muted-foreground",children:[E.rating||"0.0"," (",E.totalReviews||0," reviews)"]}),r.jsx(F,{variant:"outline",size:"sm",onClick:()=>window.open(`/store/${E.id}#store-reviews`,"_blank"),children:"View Reviews"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Status"}),r.jsx(le,{variant:E.isApproved?"default":"secondary",children:E.isApproved?"Approved":"Pending Approval"})]})]}),r.jsx(mn,{}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs(F,{variant:"outline",className:"flex-1",onClick:We,children:[r.jsx(us,{className:"h-4 w-4 mr-2"}),"Edit Store Details"]}),r.jsxs(F,{variant:"outline",className:"flex-1",children:[r.jsx(Le,{className:"h-4 w-4 mr-2"}),"Update Location"]})]})]})]}):r.jsx(G,{children:r.jsxs(Z,{className:"text-center py-8",children:[r.jsx(nr,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Please create a store first"}),r.jsx(F,{className:"mt-4",onClick:()=>t("create-store"),children:"Create Store"})]})})}),r.jsx(tt,{value:"orders",className:"space-y-6",children:r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:"Order Management"})}),r.jsx(Z,{children:M.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Bn,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"No orders yet"})]}):r.jsx("div",{className:"space-y-4",children:M.map($=>r.jsxs("div",{className:"border rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-semibold",children:["Order #",$.id]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[$.customerName,"  ",$.phone]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:new Date($.createdAt).toLocaleDateString()})]}),r.jsxs("div",{className:"text-right space-y-2",children:[r.jsxs("p",{className:"font-semibold text-lg",children:["",Number($.totalAmount).toLocaleString()]}),r.jsx("div",{className:"flex gap-2",children:r.jsxs(ct,{value:$.status,onValueChange:ee=>Se($.id,ee),children:[r.jsx(it,{className:"w-32",children:r.jsx(dt,{})}),r.jsxs(at,{children:[r.jsx(ne,{value:"pending",children:"Pending"}),r.jsx(ne,{value:"processing",children:"Processing"}),r.jsx(ne,{value:"ready_for_pickup",children:"Ready for Pickup"}),r.jsx(ne,{value:"assigned_for_delivery",children:"Assigned for Delivery"}),r.jsx(ne,{value:"shipped",children:"Shipped"}),r.jsx(ne,{value:"delivered",children:"Delivered"}),r.jsx(ne,{value:"cancelled",children:"Cancelled"})]})]})}),r.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[$.status!=="assigned_for_delivery"&&$.status!=="delivered"&&$.status!=="cancelled"&&r.jsx("div",{className:"flex gap-2",children:r.jsxs(F,{onClick:()=>{Me($.id,` New Order Available: Order #${$.id} from ${E==null?void 0:E.name}. Customer: ${$.customerName}. Total: ${$.totalAmount}. First to accept gets delivery!`,!1)},className:"bg-orange-600 hover:bg-orange-700 text-white",children:[r.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Send to All Partners (First Accept)"]})}),$.status==="assigned_for_delivery"&&r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 w-full",children:[r.jsx("p",{className:"text-sm text-green-700 font-medium",children:" Delivery partner assigned and notified"}),r.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Order is being processed for delivery"})]})]})]})]}),r.jsx(mn,{className:"my-3"}),$.items&&$.items.length>0&&r.jsxs("div",{className:"mb-3",children:[r.jsx("p",{className:"text-sm font-medium mb-2",children:"Order Items:"}),r.jsx("div",{className:"space-y-2",children:$.items.map(ee=>{var $e,He;const Ce=(()=>{var lt,Tt;return(lt=ee.product)!=null&&lt.images&&ee.product.images.length>0?ee.product.images[0]:(Tt=ee.product)!=null&&Tt.imageUrl?ee.product.imageUrl:null})();return r.jsxs("div",{className:"flex items-center space-x-3 p-2 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[r.jsxs("div",{className:"w-12 h-12 bg-gray-200 rounded-lg overflow-hidden flex-shrink-0 relative",children:[Ce?r.jsx("img",{src:Ce,alt:(($e=ee.product)==null?void 0:$e.name)||"Product",className:"w-full h-full object-cover",onError:lt=>{var ir;lt.currentTarget.classList.add("hidden");const Tt=(ir=lt.currentTarget.parentElement)==null?void 0:ir.querySelector(".fallback-icon");Tt&&Tt.classList.remove("hidden")}}):null,r.jsx(rt,{className:`fallback-icon w-6 h-6 text-gray-400 absolute inset-0 m-auto ${Ce?"hidden":"flex"}`})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium truncate",children:((He=ee.product)==null?void 0:He.name)||`Product #${ee.productId}`}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Qty: ",ee.quantity,"  ",Number(ee.price).toLocaleString()," = ",(ee.quantity*Number(ee.price)).toLocaleString()]})]})]},ee.id)})})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium mb-2",children:"Delivery Address:"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:$.shippingAddress})]})]},$.id))})})]})}),r.jsxs(tt,{value:"notifications",className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx(G,{children:r.jsx(Z,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Ready for Pickup"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:M.filter($=>$.status==="ready_for_pickup").length})]}),r.jsx(wt,{className:"h-8 w-8 text-green-600"})]})})}),r.jsx(G,{children:r.jsx(Z,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Processing"}),r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:M.filter($=>$.status==="processing").length})]}),r.jsx(gd,{className:"h-8 w-8 text-blue-600"})]})})}),r.jsx(G,{children:r.jsx(Z,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Notifications Sent"}),r.jsx("p",{className:"text-2xl font-bold text-purple-600",children:o.length})]}),r.jsx(Xt,{className:"h-8 w-8 text-purple-600"})]})})})]}),r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(kt,{className:"h-5 w-5"}),"First Accept First Serve - Delivery Notifications"]}),r.jsx("p",{className:"text-muted-foreground",children:"Send notifications to all available delivery partners. The first one to accept gets the delivery."})]}),r.jsxs(Z,{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-wrap gap-3 p-4 bg-gray-50 rounded-lg",children:[r.jsxs(F,{onClick:()=>{const $=M.filter(ee=>ee.status==="ready_for_pickup");$.length>0&&Ie(` URGENT: ${$.length} orders ready for immediate pickup from ${E==null?void 0:E.name}`,$.map(ee=>ee.id))},disabled:M.filter($=>$.status==="ready_for_pickup").length===0,className:"bg-red-600 hover:bg-red-700",children:[r.jsx(wr,{className:"h-4 w-4 mr-2"}),"Broadcast All Ready Orders (Urgent)"]}),r.jsxs(F,{variant:"outline",onClick:()=>{const $=M.filter(ee=>ee.status==="processing");$.length>0&&Ie(` ${$.length} orders being prepared at ${E==null?void 0:E.name}`,$.map(ee=>ee.id))},disabled:M.filter($=>$.status==="processing").length===0,children:[r.jsx(Ld,{className:"h-4 w-4 mr-2"}),"Notify About Processing Orders"]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-semibold text-lg",children:"Individual Order Notifications"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:M.filter($=>$.status==="processing"||$.status==="ready_for_pickup").map($=>r.jsxs("div",{className:"border rounded-lg p-4 space-y-3 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsxs("h4",{className:"font-medium",children:["Order #",$.id]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:$.customerName}),r.jsx("p",{className:"text-xs text-muted-foreground",children:$.phone}),r.jsx(le,{variant:$.status==="ready_for_pickup"?"default":"secondary",className:$.status==="ready_for_pickup"?"bg-green-100 text-green-800":"",children:$.status.replace("_"," ").toUpperCase()})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"font-semibold",children:["",Number($.totalAmount).toLocaleString()]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:new Date($.createdAt).toLocaleDateString()})]})]}),r.jsx("div",{className:"text-sm text-muted-foreground",children:r.jsxs("p",{className:"truncate",children:[" ",$.shippingAddress]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(F,{size:"sm",className:"w-full bg-red-600 hover:bg-red-700",onClick:()=>Me($.id,` URGENT PICKUP: Order #${$.id} ready NOW from ${E==null?void 0:E.name}! Customer: ${$.customerName}, Amount: ${$.totalAmount}. First to accept gets this delivery!`,!0),children:[r.jsx(wr,{className:"h-4 w-4 mr-2"}),"Send Urgent Alert (First Accept First Serve)"]}),r.jsxs(F,{size:"sm",variant:"outline",className:"w-full",onClick:()=>Me($.id,` Pickup Available: Order #${$.id} at ${E==null?void 0:E.name}. Customer: ${$.customerName}, Amount: ${$.totalAmount}. Accept to claim this delivery!`,!1),children:[r.jsx(Ld,{className:"h-4 w-4 mr-2"}),"Send Standard Notification"]})]}),$.deliveryPartner&&r.jsxs("div",{className:"mt-4 border-t pt-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("h5",{className:"font-semibold flex items-center gap-2",children:[r.jsx(Le,{className:"h-4 w-4"}),"Live Delivery Tracking"]}),r.jsx(le,{variant:"secondary",className:"bg-green-100 text-green-800",children:"Live"})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-3",children:[r.jsxs("p",{className:"text-sm",children:[r.jsx("strong",{children:"Contact Delivery Partner:"}),r.jsxs("a",{href:`tel:${$.deliveryPartner.phone}`,className:"text-blue-600 hover:underline ml-2",children:[r.jsx(Ot,{className:"inline h-4 w-4 mr-1"}),$.deliveryPartner.phone]})]}),r.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Partner:"," ",$.deliveryPartner.name||"Assigned Partner"]})]}),r.jsx("div",{className:"h-64 rounded-lg overflow-hidden border",children:r.jsx(Mg,{deliveryId:$.id,userType:"shopkeeper"})})]})]},$.id))}),M.filter($=>$.status==="processing"||$.status==="ready_for_pickup").length===0&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx(kt,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"No orders ready for delivery notifications"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:'Orders with "Processing" or "Ready for Pickup" status will appear here'})]})]}),o.length>0&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-semibold text-lg",children:"Recent Notifications"}),r.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:o.slice(0,10).map($=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[$.urgent?r.jsx(wr,{className:"h-4 w-4 text-red-500"}):r.jsx(Xt,{className:"h-4 w-4 text-blue-500"}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm font-medium",children:["Order #",$.orderId]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:new Date($.sentAt).toLocaleString()})]})]}),r.jsx(le,{variant:$.urgent?"destructive":"secondary",children:$.urgent?"Urgent":"Standard"})]},$.id))})]})]})]})]})]}),E&&r.jsxs(Ir,{open:c,onOpenChange:d,children:[r.jsx(Ns,{asChild:!0,children:r.jsx(F,{size:"lg",className:"floating-button-mobile-optimized fixed bottom-20 right-4 sm:right-6 h-14 w-14 sm:h-16 sm:w-16 rounded-full shadow-2xl bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white z-[999] transition-all duration-300 ease-in-out hover:scale-110 active:scale-95 border-2 border-white/20",onClick:$=>{$.preventDefault(),$.stopPropagation(),console.log("Floating button clicked - opening modal"),s(null),H.reset(),d(!0)},onTouchStart:$=>{$.preventDefault(),$.stopPropagation(),console.log("Floating button touched")},style:{touchAction:"manipulation",WebkitTouchCallout:"none",WebkitUserSelect:"none",userSelect:"none",pointerEvents:"auto",cursor:"pointer"},children:r.jsx(Wt,{className:"h-6 w-6 sm:h-7 sm:w-7"})})}),r.jsxs(Tr,{className:"max-w-4xl max-h-[95vh] overflow-y-auto mx-4 sm:mx-auto rounded-lg",children:[r.jsxs(Ar,{children:[r.jsxs(Er,{className:"flex items-center gap-2",children:[r.jsx(Wt,{className:"h-5 w-5"}),n?"Edit Product":"Add New Product"]}),r.jsx(Ss,{children:n?"Update your product details and images":"Add a new product to your store with images and details"})]}),r.jsx("div",{className:"mt-4",children:r.jsx(Or,{...H,children:r.jsxs("form",{onSubmit:H.handleSubmit(pe),className:"space-y-6",children:[r.jsx(oe,{control:H.control,name:"name",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{className:"text-base font-medium",children:D?"Menu Item Name *":"Product Name *"}),r.jsx(me,{children:r.jsx(he,{placeholder:D?"Enter menu item name":"Enter product name",className:"h-11",...$})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:H.control,name:"categoryId",render:({field:$})=>{var ee;return r.jsxs(ae,{children:[r.jsx(de,{className:"text-base font-medium",children:"Category *"}),r.jsxs(ct,{onValueChange:X=>$.onChange(parseInt(X)),defaultValue:(ee=$.value)==null?void 0:ee.toString(),children:[r.jsx(me,{children:r.jsx(it,{className:"h-11",children:r.jsx(dt,{placeholder:"Select a category"})})}),r.jsx(at,{children:U.length>0?U.map(X=>r.jsx(ne,{value:X.id.toString(),children:X.name},X.id)):r.jsx(ne,{value:"1",disabled:!0,children:"Loading categories..."})})]}),r.jsx(fe,{})]})}}),r.jsx(oe,{control:H.control,name:"description",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{className:"text-base font-medium",children:"Description"}),r.jsx(me,{children:r.jsx(Yt,{placeholder:"Enter product description",rows:4,...$})}),r.jsx(fe,{})]})}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsx(oe,{control:H.control,name:"price",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{className:"text-base font-medium",children:"Price *"}),r.jsx(me,{children:r.jsx(he,{type:"number",step:"0.01",placeholder:"0.00",className:"h-11",...$})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:H.control,name:"originalPrice",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{className:"text-base font-medium",children:"Original Price"}),r.jsx(me,{children:r.jsx(he,{type:"number",step:"0.01",placeholder:"0.00",className:"h-11",...$})}),r.jsx(fe,{})]})})]}),r.jsx(oe,{control:H.control,name:"stock",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{className:"text-base font-medium",children:"Stock Quantity *"}),r.jsx(me,{children:r.jsx(he,{type:"number",placeholder:"Enter stock quantity",className:"h-11",...$,onChange:ee=>$.onChange(parseInt(ee.target.value)||0)})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:H.control,name:"images",render:({field:$})=>{var ee;return r.jsxs(ae,{children:[r.jsx(de,{children:"Product Images"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(qs,{label:"",maxImages:6,minImages:1,onImagesChange:$.onChange,initialImages:$.value||[],className:"col-span-full"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"flex-1 border-t border-gray-200"}),r.jsx("span",{className:"text-sm text-gray-500 px-2",children:"or"}),r.jsx("div",{className:"flex-1 border-t border-gray-200"})]}),r.jsx(p3,{onImageSelect:X=>{const Ce=$.value||[];Ce.length<6&&$.onChange([...Ce,X])},selectedImages:$.value||[],maxImages:6-(((ee=$.value)==null?void 0:ee.length)||0),buttonText:"Add Images"})]}),r.jsx(fe,{})]})}}),D&&r.jsxs("div",{className:"space-y-6 border-t pt-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-orange-600",children:"Food Item Details"}),r.jsx(oe,{control:H.control,name:"preparationTime",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{className:"text-base font-medium",children:"Preparation Time"}),r.jsx(me,{children:r.jsx(he,{placeholder:"e.g., 15-20 minutes",className:"h-11",...$})}),r.jsx(fe,{})]})}),r.jsxs("div",{children:[r.jsx(de,{className:"text-base font-medium",children:"Ingredients"}),r.jsxs("div",{className:"mt-2 space-y-3",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx(he,{placeholder:"Enter ingredient",value:x,onChange:$=>p($.target.value),className:"h-11",onKeyPress:$=>$.key==="Enter"&&($.preventDefault(),C())}),r.jsx(F,{type:"button",onClick:C,className:"h-11",children:r.jsx(Wt,{className:"h-4 w-4"})})]}),h.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(($,ee)=>r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-sm",children:[$,r.jsx(F,{type:"button",variant:"ghost",size:"sm",className:"h-4 w-4 p-0 hover:bg-orange-200",onClick:()=>k($),children:r.jsx(Fr,{className:"h-3 w-3"})})]},ee))})]})]}),r.jsxs("div",{children:[r.jsx(de,{className:"text-base font-medium",children:"Allergens"}),r.jsxs("div",{className:"mt-2 space-y-3",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx(he,{placeholder:"Enter allergen",value:y,onChange:$=>b($.target.value),className:"h-11",onKeyPress:$=>$.key==="Enter"&&($.preventDefault(),O())}),r.jsx(F,{type:"button",onClick:O,className:"h-11",children:r.jsx(Wt,{className:"h-4 w-4"})})]}),f.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2",children:f.map(($,ee)=>r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm",children:[$,r.jsx(F,{type:"button",variant:"ghost",size:"sm",className:"h-4 w-4 p-0 hover:bg-red-200",onClick:()=>I($),children:r.jsx(Fr,{className:"h-3 w-3"})})]},ee))})]})]}),r.jsx(oe,{control:H.control,name:"spiceLevel",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{className:"text-base font-medium",children:"Spice Level"}),r.jsxs(ct,{onValueChange:$.onChange,defaultValue:$.value,children:[r.jsx(me,{children:r.jsx(it,{className:"h-11",children:r.jsx(dt,{placeholder:"Select spice level"})})}),r.jsxs(at,{children:[r.jsx(ne,{value:"mild",children:"Mild"}),r.jsx(ne,{value:"medium",children:"Medium"}),r.jsx(ne,{value:"hot",children:"Hot"}),r.jsx(ne,{value:"extra-hot",children:"Extra Hot"})]})]}),r.jsx(fe,{})]})}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsx(oe,{control:H.control,name:"isVegetarian",render:({field:$})=>r.jsxs(ae,{className:"flex flex-row items-center space-x-3 space-y-0",children:[r.jsx(me,{children:r.jsx("input",{type:"checkbox",checked:$.value,onChange:$.onChange,className:"h-4 w-4"})}),r.jsx(de,{className:"text-base font-medium",children:"Vegetarian"})]})}),r.jsx(oe,{control:H.control,name:"isVegan",render:({field:$})=>r.jsxs(ae,{className:"flex flex-row items-center space-x-3 space-y-0",children:[r.jsx(me,{children:r.jsx("input",{type:"checkbox",checked:$.value,onChange:$.onChange,className:"h-4 w-4"})}),r.jsx(de,{className:"text-base font-medium",children:"Vegan"})]})})]}),r.jsx(oe,{control:H.control,name:"nutritionInfo",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{className:"text-base font-medium",children:"Nutrition Information"}),r.jsx(me,{children:r.jsx(Yt,{placeholder:"Enter nutrition information (optional)",rows:3,...$})}),r.jsx(fe,{})]})})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsxs(F,{type:"submit",className:"flex-1",children:[r.jsx(Wt,{className:"h-4 w-4 mr-2"}),n?"Update Product":"Add Product"]}),r.jsx(F,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"})]})]})})})]})]}),r.jsx(Ir,{open:w,onOpenChange:N,children:r.jsxs(Tr,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(Ar,{children:[r.jsx(Er,{children:"Edit Store Details"}),r.jsx(Ss,{children:"Update your store information and settings"})]}),r.jsx(Or,{...W,children:r.jsxs("form",{onSubmit:W.handleSubmit(Ee),className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(oe,{control:W.control,name:"name",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Store Name"}),r.jsx(me,{children:r.jsx(he,{placeholder:"My Awesome Store",...$})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:W.control,name:"phone",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Phone Number"}),r.jsx(me,{children:r.jsx(he,{placeholder:"+1234567890",...$})}),r.jsx(fe,{})]})})]}),r.jsx(oe,{control:W.control,name:"description",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Description"}),r.jsx(me,{children:r.jsx(Yt,{placeholder:"Tell customers about your store",...$})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:W.control,name:"address",render:({field:$})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Address"}),r.jsx(me,{children:r.jsx(he,{placeholder:"Store Address",...$})}),r.jsx(fe,{})]})}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(F,{type:"button",variant:"outline",onClick:()=>N(!1),children:"Cancel"}),r.jsx(F,{type:"submit",children:"Update Store"})]})]})})]})})]})})}const $be=te.object({name:te.string().min(1,"Product name is required"),description:te.string().optional(),price:te.string().min(1,"Price is required"),originalPrice:te.string().optional(),categoryId:te.number().min(1,"Category is required"),stock:te.number().min(0,"Stock must be 0 or greater"),imageUrl:te.string().optional(),images:te.array(te.string()).min(1,"At least 1 image is required").max(6,"Maximum 6 images allowed"),isFastSell:te.boolean().default(!1),isOnOffer:te.boolean().default(!1),offerPercentage:te.number().min(0).max(100).default(0),offerEndDate:te.string().optional(),preparationTime:te.string().optional(),ingredients:te.array(te.string()).default([]),allergens:te.array(te.string()).default([]),spiceLevel:te.string().optional(),isVegetarian:te.boolean().default(!1),isVegan:te.boolean().default(!1),nutritionInfo:te.string().optional()});function Fbe(){const{toast:e}=ft(),t=pn(),[n,s]=j.useState(""),[i,a]=j.useState("all"),[o,l]=j.useState("all"),[c,d]=j.useState(null),[h,m]=j.useState(!1),{user:f}=Gt(),g=an({resolver:on($be),defaultValues:{name:"",description:"",price:"",originalPrice:"",categoryId:1,stock:0,imageUrl:"",images:[],isFastSell:!1,isOnOffer:!1,offerPercentage:0,offerEndDate:"",preparationTime:"",ingredients:[],allergens:[],spiceLevel:"",isVegetarian:!1,isVegan:!1,nutritionInfo:""}}),{data:x=[]}=Re({queryKey:["/api/categories"]}),{data:p=[],isLoading:y,error:b}=Re({queryKey:["/api/stores/owner",f==null?void 0:f.id],queryFn:async()=>{if(!(f!=null&&f.id))return[];try{const D=await fetch(`/api/stores/owner/${f.id}`);if(!D.ok){if(D.status===404)return[];throw new Error(`Failed to fetch stores: ${D.status}`)}const B=await D.json();return console.log("Stores fetched for user:",f.id,"Count:",B.length),Array.isArray(B)?B:[]}catch(D){throw console.error("Store fetch error:",D),D}},enabled:!!f&&f.role==="shopkeeper"&&f.status==="active"}),w=p[0],{data:N=[],isLoading:S,error:P}=Re({queryKey:[`/api/products/store/${w==null?void 0:w.id}`],queryFn:async()=>{if(!(w!=null&&w.id))return[];try{const D=await fetch(`/api/products/store/${w.id}`);if(!D.ok){if(D.status===404)return[];throw new Error(`Failed to fetch store products: ${D.status}`)}const B=await D.json();return console.log("Products fetched for store:",w.id,"Count:",B.length),Array.isArray(B)?B:[]}catch(D){throw console.error("Products fetch error:",D),D}},enabled:!!w}),C=N.filter(D=>{const B=D.name.toLowerCase().includes(n.toLowerCase()),M=i==="all"||D.categoryId.toString()===i,U=o==="all"||o==="low"&&D.stock<=5||o==="out"&&D.stock===0||o==="available"&&D.stock>5;return B&&M&&U}),k=N.filter(D=>D.stock<=5&&D.stock>0),O=N.filter(D=>D.stock===0),I=async D=>{var B;if(w)try{const M={...D,storeId:w.id,price:D.price,originalPrice:D.originalPrice||void 0,images:D.images||[],imageUrl:((B=D.images)==null?void 0:B[0])||void 0,isFastSell:D.isFastSell||!1,isOnOffer:D.isOnOffer||!1,offerPercentage:D.offerPercentage||0,offerEndDate:D.offerEndDate||void 0,productType:w.storeType==="restaurant"?"food":"retail",preparationTime:w.storeType==="restaurant"&&D.preparationTime||null,ingredients:w.storeType==="restaurant"?D.ingredients||[]:[],allergens:w.storeType==="restaurant"?D.allergens||[]:[],spiceLevel:w.storeType==="restaurant"&&D.spiceLevel||null,isVegetarian:w.storeType==="restaurant"&&D.isVegetarian||!1,isVegan:w.storeType==="restaurant"&&D.isVegan||!1,nutritionInfo:w.storeType==="restaurant"&&D.nutritionInfo||null};if(c){if(!(await fetch(`/api/products/${c.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(M)})).ok)throw new Error("Failed to update product");e({title:"Product updated successfully"})}else{if(!(await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(M)})).ok)throw new Error("Failed to create product");e({title:"Product added successfully"})}g.reset(),d(null),m(!1),t.invalidateQueries({queryKey:[`/api/products/store/${w.id}`]}),t.invalidateQueries({queryKey:["/api/products"]})}catch(M){e({title:"Error",description:M instanceof Error?M.message:"Failed to save product",variant:"destructive"})}},T=D=>{var B;d(D),g.reset({name:D.name,description:D.description||"",price:D.price,originalPrice:D.originalPrice||"",categoryId:D.categoryId||1,stock:D.stock||0,imageUrl:((B=D.images)==null?void 0:B[0])||"",images:D.images||[],isFastSell:D.isFastSell||!1,isOnOffer:D.isOnOffer||!1,offerPercentage:D.offerPercentage||0,offerEndDate:"",preparationTime:D.preparationTime||"",spiceLevel:D.spiceLevel||"",isVegetarian:D.isVegetarian||!1,isVegan:D.isVegan||!1}),m(!0)},E=async D=>{if(confirm("Are you sure you want to delete this product?"))try{if(!(await fetch(`/api/products/${D}`,{method:"DELETE"})).ok)throw new Error("Failed to delete product");e({title:"Product deleted successfully"}),w&&(t.invalidateQueries({queryKey:[`/api/products/store/${w.id}`]}),t.invalidateQueries({queryKey:["/api/products"]}))}catch{e({title:"Error",description:"Failed to delete product",variant:"destructive"})}};return!f||f.role!=="shopkeeper"?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:r.jsxs(G,{className:"w-full max-w-md",children:[r.jsx(se,{children:r.jsx(ie,{className:"text-center text-red-600",children:"Access Denied"})}),r.jsxs(Z,{children:[r.jsx("p",{className:"text-center text-muted-foreground",children:"You need to be a shopkeeper to access inventory management."}),r.jsx("div",{className:"mt-4 text-center",children:r.jsx(Ae,{href:"/",className:"text-primary hover:underline",children:"Go back to homepage"})})]})]})}):f.role==="shopkeeper"&&f.status!=="active"?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:r.jsxs(G,{className:"w-full max-w-lg",children:[r.jsx(se,{children:r.jsx(ie,{className:"text-center text-yellow-600",children:"Pending Admin Approval"})}),r.jsxs(Z,{className:"text-center space-y-4",children:[r.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-yellow-100 dark:bg-yellow-900/20 flex items-center justify-center",children:r.jsx(rt,{className:"h-8 w-8 text-yellow-600"})}),r.jsx("p",{className:"text-muted-foreground",children:"Your seller account is pending approval from our admin team. You cannot access inventory management until approved."}),r.jsx("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:r.jsx(Ae,{href:"/",children:r.jsx(F,{variant:"outline",children:"Go to Homepage"})})})]})]})}):y?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:r.jsx(G,{className:"w-full max-w-md",children:r.jsxs(Z,{className:"pt-6 text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Loading your store information..."})]})})}):b?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:r.jsxs(G,{className:"w-full max-w-md",children:[r.jsx(se,{children:r.jsx(ie,{className:"text-center text-red-600",children:"Error Loading Store"})}),r.jsxs(Z,{className:"text-center",children:[r.jsx("p",{className:"text-muted-foreground mb-4",children:"Failed to load your store information. Please try again."}),r.jsx(F,{onClick:()=>window.location.reload(),children:"Retry"})]})]})}):w?r.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b",children:r.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-8",children:r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center py-3 sm:py-4 gap-3 sm:gap-0",children:[r.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[r.jsx(rt,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary"}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg sm:text-2xl font-bold text-gray-900 dark:text-white",children:"Inventory Management"}),r.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:w.name})]})]}),r.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 w-full sm:w-auto",children:[r.jsxs(F,{onClick:()=>m(!0),className:"bg-primary flex-1 sm:flex-none text-sm",children:[r.jsx(Wt,{className:"h-4 w-4 mr-2"}),"Add Product"]}),r.jsxs(F,{variant:"outline",size:"sm",className:"hidden sm:flex",children:[r.jsx(eu,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-8 py-4 sm:py-8",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[r.jsxs(G,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3 sm:p-6",children:[r.jsx(ie,{className:"text-xs sm:text-sm font-medium",children:"Total Products"}),r.jsx(rt,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"})]}),r.jsxs(Z,{className:"p-3 pt-0 sm:p-6 sm:pt-0",children:[r.jsx("div",{className:"text-lg sm:text-2xl font-bold",children:N.length}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[r.jsx(wn,{className:"h-3 w-3 inline mr-1"}),"Active inventory items"]})]})]}),r.jsxs(G,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3 sm:p-6",children:[r.jsx(ie,{className:"text-xs sm:text-sm font-medium",children:"Low Stock Alert"}),r.jsx(ac,{className:"h-3 w-3 sm:h-4 sm:w-4 text-orange-500"})]}),r.jsxs(Z,{className:"p-3 pt-0 sm:p-6 sm:pt-0",children:[r.jsx("div",{className:"text-lg sm:text-2xl font-bold text-orange-600",children:k.length}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Items with 5 units remaining"})]})]}),r.jsxs(G,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3 sm:p-6",children:[r.jsx(ie,{className:"text-xs sm:text-sm font-medium",children:"Out of Stock"}),r.jsx(ore,{className:"h-3 w-3 sm:h-4 sm:w-4 text-red-500"})]}),r.jsxs(Z,{className:"p-3 pt-0 sm:p-6 sm:pt-0",children:[r.jsx("div",{className:"text-lg sm:text-2xl font-bold text-red-600",children:O.length}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Items requiring restocking"})]})]})]}),r.jsxs(G,{className:"mb-4 sm:mb-6",children:[r.jsx(se,{className:"p-3 sm:p-6",children:r.jsx(ie,{className:"text-lg sm:text-xl",children:"Product Management"})}),r.jsxs(Z,{className:"p-3 sm:p-6",children:[r.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4 mb-4 sm:mb-6",children:[r.jsx("div",{className:"flex-1",children:r.jsx(he,{placeholder:"Search products...",value:n,onChange:D=>s(D.target.value),className:"w-full text-sm"})}),r.jsxs("div",{className:"flex gap-2 sm:gap-4 flex-col sm:flex-row",children:[r.jsxs(ct,{value:i,onValueChange:a,children:[r.jsx(it,{className:"w-full sm:w-48",children:r.jsx(dt,{placeholder:"All Categories"})}),r.jsxs(at,{children:[r.jsx(ne,{value:"all",children:"All Categories"}),Array.isArray(x)&&x.map(D=>r.jsx(ne,{value:D.id.toString(),children:D.name},D.id))]})]}),r.jsxs(ct,{value:o,onValueChange:l,children:[r.jsx(it,{className:"w-full sm:w-48",children:r.jsx(dt,{placeholder:"Stock Status"})}),r.jsxs(at,{children:[r.jsx(ne,{value:"all",children:"All Stock"}),r.jsxs(ne,{value:"available",children:["Available (",">","5)"]}),r.jsx(ne,{value:"low",children:"Low Stock (5)"}),r.jsx(ne,{value:"out",children:"Out of Stock"})]})]})]})]}),r.jsx("div",{className:"space-y-3 sm:space-y-4",children:C.length>0?C.map(D=>{var B;return r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 sm:p-4 border rounded-lg hover:shadow-md transition-shadow gap-3 sm:gap-0",children:[r.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[r.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0",children:(B=D.images)!=null&&B[0]?r.jsx("img",{src:D.images[0],alt:D.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center",children:r.jsx(rt,{className:"h-4 w-4 sm:h-6 sm:w-6 text-gray-400"})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-medium text-sm sm:text-base truncate",children:D.name}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["",D.price]}),r.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[r.jsxs(le,{variant:D.stock===0?"destructive":D.stock<=5?"secondary":"default",className:"text-xs",children:["Stock: ",D.stock]}),D.isOnOffer&&r.jsxs(le,{variant:"outline",className:"text-green-600 text-xs",children:[D.offerPercentage,"% OFF"]}),D.isFastSell&&r.jsx(le,{variant:"outline",className:"text-blue-600 text-xs",children:"Fast Sell"})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2 justify-end sm:justify-start",children:[r.jsxs(F,{onClick:()=>T(D),variant:"outline",size:"sm",className:"flex-1 sm:flex-none",children:[r.jsx(us,{className:"h-4 w-4"}),r.jsx("span",{className:"ml-1 sm:hidden",children:"Edit"})]}),r.jsxs(F,{onClick:()=>E(D.id),variant:"destructive",size:"sm",className:"flex-1 sm:flex-none",children:[r.jsx(Xs,{className:"h-4 w-4"}),r.jsx("span",{className:"ml-1 sm:hidden",children:"Delete"})]})]})]},D.id)}):r.jsxs("div",{className:"text-center py-6 sm:py-8",children:[r.jsx(rt,{className:"h-10 w-10 sm:h-12 sm:w-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground text-sm sm:text-base",children:n||i!=="all"||o!=="all"?"No products match your filters":"No products in inventory"}),!h&&r.jsxs(F,{onClick:()=>m(!0),className:"mt-4 text-sm",children:[r.jsx(Wt,{className:"h-4 w-4 mr-2"}),"Add Your First Product"]})]})})]})]}),h&&r.jsxs(G,{children:[r.jsx(se,{className:"p-3 sm:p-6",children:r.jsxs(ie,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[r.jsx(rt,{className:"h-4 w-4 sm:h-5 sm:w-5"}),c?"Edit Product":"Add New Product"]})}),r.jsx(Z,{className:"p-3 sm:p-6",children:r.jsx(Or,{...g,children:r.jsxs("form",{onSubmit:g.handleSubmit(I),className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[r.jsx(oe,{control:g.control,name:"name",render:({field:D})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Product Name *"}),r.jsx(me,{children:r.jsx(he,{placeholder:"Enter product name",...D})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:g.control,name:"categoryId",render:({field:D})=>{var B;return r.jsxs(ae,{children:[r.jsx(de,{children:"Category *"}),r.jsxs(ct,{onValueChange:M=>D.onChange(parseInt(M)),defaultValue:(B=D.value)==null?void 0:B.toString(),children:[r.jsx(me,{children:r.jsx(it,{children:r.jsx(dt,{placeholder:"Select category"})})}),r.jsx(at,{children:Array.isArray(x)&&x.map(M=>r.jsx(ne,{value:M.id.toString(),children:M.name},M.id))})]}),r.jsx(fe,{})]})}})]}),r.jsx(oe,{control:g.control,name:"description",render:({field:D})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Description"}),r.jsx(me,{children:r.jsx(Yt,{placeholder:"Enter product description",className:"min-h-24",...D})}),r.jsx(fe,{})]})}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6",children:[r.jsx(oe,{control:g.control,name:"price",render:({field:D})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Price *"}),r.jsx(me,{children:r.jsx(he,{type:"number",placeholder:"0.00",...D})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:g.control,name:"originalPrice",render:({field:D})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Original Price"}),r.jsx(me,{children:r.jsx(he,{type:"number",placeholder:"0.00",...D})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:g.control,name:"stock",render:({field:D})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Stock Quantity *"}),r.jsx(me,{children:r.jsx(he,{type:"number",placeholder:"Enter quantity",...D,onChange:B=>D.onChange(parseInt(B.target.value)||0)})}),r.jsx(fe,{})]})})]}),r.jsx(oe,{control:g.control,name:"images",render:({field:D})=>r.jsxs(ae,{children:[r.jsx(qs,{label:"Product Images",maxImages:6,minImages:1,onImagesChange:D.onChange,initialImages:D.value||[],className:"col-span-full"}),r.jsx(fe,{})]})}),r.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 sm:gap-4",children:[r.jsx(F,{type:"button",variant:"outline",onClick:()=>{m(!1),d(null),g.reset()},className:"order-2 sm:order-1",children:"Cancel"}),r.jsxs(F,{type:"submit",className:"order-1 sm:order-2",children:[r.jsx(Wt,{className:"h-4 w-4 mr-2"}),c?"Update Product":"Add Product"]})]})]})})})]})]})]}):r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:r.jsxs(G,{className:"w-full max-w-md",children:[r.jsx(se,{children:r.jsx(ie,{className:"text-center",children:"No Store Found"})}),r.jsxs(Z,{className:"text-center",children:[r.jsx("p",{className:"text-muted-foreground mb-4",children:"You need to create a store before managing inventory."}),r.jsx(Ae,{href:"/seller/store",children:r.jsx(F,{children:"Create Store"})})]})]})})}const zbe=te.object({storeId:te.number(),title:te.string().min(1,"Title is required"),description:te.string().optional(),discountType:te.enum(["percentage","fixed_amount"]),discountValue:te.number().min(.01,"Discount value must be greater than 0"),minOrderAmount:te.number().min(0).optional(),maxDiscountAmount:te.number().min(0).optional(),startDate:te.string(),endDate:te.string(),usageLimit:te.number().min(1).optional(),isActive:te.boolean().default(!0)});function Bbe(){const{toast:e}=ft(),t=pn(),{user:n}=Gt(),[s,i]=j.useState(""),[a,o]=j.useState("all"),[l,c]=j.useState(!1),[d,h]=j.useState(null),[m,f]=j.useState(!1);if(!n||n.role!=="shopkeeper")return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:r.jsxs(G,{className:"w-full max-w-md",children:[r.jsx(se,{children:r.jsx(ie,{className:"text-center text-red-600",children:"Access Denied"})}),r.jsx(Z,{children:r.jsx("p",{className:"text-center text-muted-foreground",children:"You need to be a shopkeeper to access promotions management."})})]})});if(n.role==="shopkeeper"&&n.status!=="active")return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:r.jsxs(G,{className:"w-full max-w-lg",children:[r.jsx(se,{children:r.jsx(ie,{className:"text-center text-yellow-600",children:"Pending Admin Approval"})}),r.jsxs(Z,{className:"text-center space-y-4",children:[r.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-yellow-100 dark:bg-yellow-900/20 flex items-center justify-center",children:r.jsx(gt,{className:"h-8 w-8 text-yellow-600"})}),r.jsx("p",{className:"text-muted-foreground",children:"Your seller account is pending approval from our admin team. You cannot access promotions management until approved."}),r.jsx("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:r.jsx(Ae,{href:"/",children:r.jsx(F,{variant:"outline",children:"Go to Homepage"})})})]})]})});const g=(n==null?void 0:n.id)||1,x=an({resolver:on(zbe),defaultValues:{storeId:g,discountType:"percentage",isActive:!0}}),{data:p,isLoading:y}=Re({queryKey:["/api/seller/promotions",g]}),b=pt({mutationFn:async D=>await Pi("/api/seller/promotions",D),onSuccess:()=>{e({title:"Promotion Created",description:"Your promotion has been created successfully"}),t.invalidateQueries({queryKey:["/api/seller/promotions",g]}),c(!1),x.reset()},onError:()=>{e({title:"Error",description:"Failed to create promotion",variant:"destructive"})}}),w=pt({mutationFn:async({id:D,data:B})=>await Gl(`/api/seller/promotions/${D}`,B),onSuccess:()=>{e({title:"Promotion Updated",description:"Your promotion has been updated successfully"}),t.invalidateQueries({queryKey:["/api/seller/promotions",g]}),f(!1),h(null)},onError:()=>{e({title:"Error",description:"Failed to update promotion",variant:"destructive"})}}),N=pt({mutationFn:async D=>await vb(`/api/seller/promotions/${D}`),onSuccess:()=>{e({title:"Promotion Deleted",description:"Your promotion has been deleted successfully"}),t.invalidateQueries({queryKey:["/api/seller/promotions",g]})},onError:()=>{e({title:"Error",description:"Failed to delete promotion",variant:"destructive"})}}),S=D=>{b.mutate(D)},P=D=>{h(D),x.reset({storeId:D.storeId,title:D.title,description:D.description||"",discountType:D.discountType,discountValue:parseFloat(D.discountValue),minOrderAmount:D.minOrderAmount?parseFloat(D.minOrderAmount):void 0,maxDiscountAmount:D.maxDiscountAmount?parseFloat(D.maxDiscountAmount):void 0,startDate:D.startDate.split("T")[0],endDate:D.endDate.split("T")[0],usageLimit:D.usageLimit||void 0,isActive:D.isActive}),f(!0)},C=D=>{d&&w.mutate({id:d.id,data:D})},k=D=>{confirm("Are you sure you want to delete this promotion?")&&N.mutate(D)},O=(p==null?void 0:p.filter(D=>{const B=D.title.toLowerCase().includes(s.toLowerCase()),M=new Date,U=new Date(D.startDate),H=new Date(D.endDate);let K=!0;return a==="active"?K=D.isActive&&M>=U&&M<=H:a==="inactive"?K=!D.isActive:a==="expired"?K=M>H:a==="scheduled"&&(K=M<U),B&&K}))||[],I=(p==null?void 0:p.filter(D=>{const B=new Date,M=new Date(D.startDate),U=new Date(D.endDate);return D.isActive&&B>=M&&B<=U}).length)||0,T=(p==null?void 0:p.reduce((D,B)=>D+B.usedCount,0))||0,E=(p==null?void 0:p.filter(D=>{const B=new Date(D.endDate),M=new Date;return M.setDate(M.getDate()+3),B<=M&&B>new Date}).length)||0;return r.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex justify-between items-center py-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Kp,{className:"h-8 w-8 text-primary"}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Promotions & Offers"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Create and manage promotional campaigns"})]})]}),r.jsx("div",{className:"flex items-center space-x-3",children:r.jsxs(F,{onClick:()=>c(!0),children:[r.jsx(Wt,{className:"h-4 w-4 mr-2"}),"Create Promotion"]})})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[r.jsxs(G,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ie,{className:"text-sm font-medium",children:"Active Promotions"}),r.jsx(Kp,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold",children:I}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently running"})]})]}),r.jsxs(G,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ie,{className:"text-sm font-medium",children:"Total Usage"}),r.jsx(vd,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold",children:T}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Times used"})]})]}),r.jsxs(G,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ie,{className:"text-sm font-medium",children:"Expiring Soon"}),r.jsx(Zl,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold text-orange-600",children:E}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Within 3 days"})]})]}),r.jsxs(G,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ie,{className:"text-sm font-medium",children:"Total Promotions"}),r.jsx(wn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold",children:(p==null?void 0:p.length)||0}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"All time"})]})]})]}),r.jsx(G,{className:"mb-6",children:r.jsx(Z,{className:"pt-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"relative",children:[r.jsx(zn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),r.jsx(he,{placeholder:"Search promotions...",value:s,onChange:D=>i(D.target.value),className:"pl-10"})]})}),r.jsxs(ct,{value:a,onValueChange:o,children:[r.jsx(it,{className:"w-40",children:r.jsx(dt,{})}),r.jsxs(at,{children:[r.jsx(ne,{value:"all",children:"All Promotions"}),r.jsx(ne,{value:"active",children:"Active"}),r.jsx(ne,{value:"scheduled",children:"Scheduled"}),r.jsx(ne,{value:"expired",children:"Expired"}),r.jsx(ne,{value:"inactive",children:"Inactive"})]})]})]})})}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:"Promotional Campaigns"})}),r.jsx(Z,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(wi,{children:[r.jsx(Ni,{children:r.jsxs(Vr,{children:[r.jsx(Ze,{children:"Promotion"}),r.jsx(Ze,{children:"Discount"}),r.jsx(Ze,{children:"Duration"}),r.jsx(Ze,{children:"Usage"}),r.jsx(Ze,{children:"Status"}),r.jsx(Ze,{children:"Actions"})]})}),r.jsx(Si,{children:O.map(D=>{const B=new Date,M=new Date(D.startDate),U=new Date(D.endDate),H=D.isActive&&B>=M&&B<=U,K=B>U,W=B<M,V=D.usageLimit?D.usedCount/D.usageLimit*100:0;return r.jsxs(Vr,{children:[r.jsx(Ye,{children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:D.title}),r.jsx("p",{className:"text-sm text-muted-foreground",children:D.description||"No description"})]})}),r.jsx(Ye,{children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:D.discountType==="percentage"?`${D.discountValue}% off`:`${D.discountValue} off`}),D.minOrderAmount&&r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Min: ",D.minOrderAmount]})]})}),r.jsx(Ye,{children:r.jsx("div",{children:r.jsxs("p",{className:"text-sm",children:[new Date(D.startDate).toLocaleDateString()," -",new Date(D.endDate).toLocaleDateString()]})})}),r.jsx(Ye,{children:r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium",children:[D.usedCount,D.usageLimit&&` / ${D.usageLimit}`]}),D.usageLimit&&r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:r.jsx("div",{className:"bg-primary h-2 rounded-full",style:{width:`${Math.min(V,100)}%`}})})]})}),r.jsx(Ye,{children:r.jsx(le,{variant:H?"default":W?"secondary":K?"destructive":"outline",children:H?"Active":W?"Scheduled":K?"Expired":"Inactive"})}),r.jsx(Ye,{children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(F,{size:"sm",variant:"outline",onClick:()=>P(D),children:r.jsx(us,{className:"h-3 w-3"})}),r.jsx(F,{size:"sm",variant:"outline",onClick:()=>k(D.id),children:r.jsx(Xs,{className:"h-3 w-3"})})]})})]},D.id)})})]})})})]})]}),r.jsx(Ir,{open:l,onOpenChange:c,children:r.jsxs(Tr,{className:"max-w-2xl",children:[r.jsx(Ar,{children:r.jsx(Er,{children:"Create New Promotion"})}),r.jsx(Or,{...x,children:r.jsxs("form",{onSubmit:x.handleSubmit(S),className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(oe,{control:x.control,name:"title",render:({field:D})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Promotion Title"}),r.jsx(me,{children:r.jsx(he,{placeholder:"e.g., Summer Sale",...D})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:x.control,name:"discountType",render:({field:D})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Discount Type"}),r.jsxs(ct,{onValueChange:D.onChange,defaultValue:D.value,children:[r.jsx(me,{children:r.jsx(it,{children:r.jsx(dt,{})})}),r.jsxs(at,{children:[r.jsx(ne,{value:"percentage",children:"Percentage Off"}),r.jsx(ne,{value:"fixed_amount",children:"Fixed Amount Off"})]})]}),r.jsx(fe,{})]})})]}),r.jsx(oe,{control:x.control,name:"description",render:({field:D})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Description (Optional)"}),r.jsx(me,{children:r.jsx(he,{placeholder:"Promotion description",...D})}),r.jsx(fe,{})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx(oe,{control:x.control,name:"discountValue",render:({field:D})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Discount Value"}),r.jsx(me,{children:r.jsx(he,{type:"number",step:"0.01",placeholder:"10",...D,onChange:B=>D.onChange(parseFloat(B.target.value)||0)})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:x.control,name:"minOrderAmount",render:({field:D})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Min Order Amount"}),r.jsx(me,{children:r.jsx(he,{type:"number",step:"0.01",placeholder:"500",...D,onChange:B=>D.onChange(parseFloat(B.target.value)||void 0)})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:x.control,name:"usageLimit",render:({field:D})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Usage Limit"}),r.jsx(me,{children:r.jsx(he,{type:"number",placeholder:"100",...D,onChange:B=>D.onChange(parseInt(B.target.value)||void 0)})}),r.jsx(fe,{})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(oe,{control:x.control,name:"startDate",render:({field:D})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Start Date"}),r.jsx(me,{children:r.jsx(he,{type:"date",...D})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:x.control,name:"endDate",render:({field:D})=>r.jsxs(ae,{children:[r.jsx(de,{children:"End Date"}),r.jsx(me,{children:r.jsx(he,{type:"date",...D})}),r.jsx(fe,{})]})})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(F,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Cancel"}),r.jsx(F,{type:"submit",disabled:b.isPending,children:b.isPending?"Creating...":"Create Promotion"})]})]})})]})}),r.jsx(Ir,{open:m,onOpenChange:f,children:r.jsxs(Tr,{className:"max-w-2xl",children:[r.jsx(Ar,{children:r.jsx(Er,{children:"Edit Promotion"})}),r.jsx(Or,{...x,children:r.jsxs("form",{onSubmit:x.handleSubmit(C),className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(oe,{control:x.control,name:"title",render:({field:D})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Promotion Title"}),r.jsx(me,{children:r.jsx(he,{placeholder:"e.g., Summer Sale",...D})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:x.control,name:"discountType",render:({field:D})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Discount Type"}),r.jsxs(ct,{onValueChange:D.onChange,value:D.value,children:[r.jsx(me,{children:r.jsx(it,{children:r.jsx(dt,{})})}),r.jsxs(at,{children:[r.jsx(ne,{value:"percentage",children:"Percentage Off"}),r.jsx(ne,{value:"fixed_amount",children:"Fixed Amount Off"})]})]}),r.jsx(fe,{})]})})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(F,{type:"button",variant:"outline",onClick:()=>f(!1),children:"Cancel"}),r.jsx(F,{type:"submit",disabled:w.isPending,children:w.isPending?"Updating...":"Update Promotion"})]})]})})]})})]})}function Vbe(){const{user:e}=Gt(),{toast:t}=ft(),[n,s]=j.useState(""),[i,a]=j.useState("all");if(!e||e.role!=="shopkeeper")return r.jsx("div",{className:"min-h-screen bg-muted flex items-center justify-center",children:r.jsx(G,{className:"w-full max-w-md",children:r.jsxs(Z,{className:"pt-6 text-center",children:[r.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Access Denied"}),r.jsx("p",{className:"text-muted-foreground",children:"This page is only accessible to verified shopkeepers."})]})})});const{data:o=[]}=Re({queryKey:["/api/stores/owner",e==null?void 0:e.id],queryFn:()=>fetch(`/api/stores/owner/${e==null?void 0:e.id}`).then(p=>p.json()),enabled:!!(e!=null&&e.id)}),l=o[0],{data:c=[],isLoading:d}=Re({queryKey:["/api/orders/store",l==null?void 0:l.id],queryFn:async()=>{if(!(l!=null&&l.id))return[];try{const p=await fetch(`/api/orders/store/${l.id}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!p.ok){if(p.status===404)return[];throw new Error(`Failed to fetch orders: ${p.status} ${p.statusText}`)}const y=await p.json();return console.log("Orders fetched for user:",e.id,"Count:",y.length),Array.isArray(y)?y:[]}catch(p){throw console.error("Order fetch error:",p),p}},enabled:!!(e!=null&&e.id)&&e.role==="shopkeeper"&&!!(l!=null&&l.id),retry:2,staleTime:30*1e3}),h=pt({mutationFn:async({orderId:p,status:y})=>await Gl(`/api/orders/${p}/status`,{status:y}),onSuccess:()=>{Dr.invalidateQueries({queryKey:["/api/orders/store"]}),t({title:"Success",description:"Order status updated successfully"})},onError:p=>{t({title:"Error",description:p.message||"Failed to update order status",variant:"destructive"})}}),m=pt({mutationFn:async({orderId:p,message:y,isAssigned:b})=>await Pi("/api/delivery-partners/notify",{orderId:p,message:y,isAssigned:b,storeId:l==null?void 0:l.id}),onSuccess:()=>{t({title:"Success",description:"Delivery partners notified successfully"})},onError:p=>{t({title:"Error",description:p.message||"Failed to notify delivery partners",variant:"destructive"})}}),f=(p,y)=>{h.mutate({orderId:p,status:y})},g=(p,y,b)=>{m.mutate({orderId:p,message:y,isAssigned:b})},x=c.filter(p=>{const y=p.customerName.toLowerCase().includes(n.toLowerCase())||p.id.toString().includes(n),b=i==="all"||p.status===i;return y&&b});return r.jsx("div",{className:"min-h-screen bg-muted",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[r.jsx("div",{className:"flex justify-between items-center mb-8",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Orders Management"}),r.jsx("p",{className:"text-muted-foreground",children:l?`Managing orders for ${l.name}`:"Track and manage your store orders"})]})}),l?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsx(he,{placeholder:"Search by customer name or order ID...",value:n,onChange:p=>s(p.target.value),className:"w-full"})}),r.jsxs(ct,{value:i,onValueChange:a,children:[r.jsx(it,{className:"w-full sm:w-48",children:r.jsx(dt,{placeholder:"Filter by status"})}),r.jsxs(at,{children:[r.jsx(ne,{value:"all",children:"All Status"}),r.jsx(ne,{value:"pending",children:"Pending"}),r.jsx(ne,{value:"processing",children:"Processing"}),r.jsx(ne,{value:"ready_for_pickup",children:"Ready for Pickup"}),r.jsx(ne,{value:"assigned_for_delivery",children:"Assigned for Delivery"}),r.jsx(ne,{value:"shipped",children:"Shipped"}),r.jsx(ne,{value:"delivered",children:"Delivered"}),r.jsx(ne,{value:"cancelled",children:"Cancelled"})]})]})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:"Order Management"})}),r.jsx(Z,{children:x.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Bn,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:n||i!=="all"?"No orders match your filters":"No orders yet"})]}):r.jsx("div",{className:"space-y-4",children:x.map(p=>r.jsxs("div",{className:"border rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-semibold",children:["Order #",p.id]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[p.customerName,"  ",p.phone]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(p.createdAt).toLocaleDateString()})]}),r.jsxs("div",{className:"text-right space-y-2",children:[r.jsxs("p",{className:"font-semibold text-lg",children:["",Number(p.totalAmount).toLocaleString()]}),r.jsx("div",{className:"flex gap-2",children:r.jsxs(ct,{value:p.status,onValueChange:y=>f(p.id,y),children:[r.jsx(it,{className:"w-32",children:r.jsx(dt,{})}),r.jsxs(at,{children:[r.jsx(ne,{value:"pending",children:"Pending"}),r.jsx(ne,{value:"processing",children:"Processing"}),r.jsx(ne,{value:"ready_for_pickup",children:"Ready for Pickup"}),r.jsx(ne,{value:"assigned_for_delivery",children:"Assigned for Delivery"}),r.jsx(ne,{value:"shipped",children:"Shipped"}),r.jsx(ne,{value:"delivered",children:"Delivered"}),r.jsx(ne,{value:"cancelled",children:"Cancelled"})]})]})}),r.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[p.status!=="assigned_for_delivery"&&p.status!=="delivered"&&p.status!=="cancelled"&&r.jsx("div",{className:"flex gap-2",children:r.jsxs(F,{onClick:()=>{g(p.id,` New Order Available: Order #${p.id} from ${l==null?void 0:l.name}. Customer: ${p.customerName}. Total: ${p.totalAmount}. First to accept gets delivery!`,!1)},className:"bg-orange-600 hover:bg-orange-700 text-white",children:[r.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Send to All Partners (First Accept)"]})}),p.status==="assigned_for_delivery"&&r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 w-full",children:[r.jsx("p",{className:"text-sm text-green-700 font-medium",children:" Delivery partner assigned and notified"}),r.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Order is being processed for delivery"})]})]})]})]}),r.jsx(mn,{className:"my-3"}),p.items&&p.items.length>0&&r.jsxs("div",{className:"mb-3",children:[r.jsx("p",{className:"text-sm font-medium mb-2",children:"Order Items:"}),r.jsx("div",{className:"space-y-2",children:p.items.map(y=>{var N,S;const w=(()=>{var P,C;return(P=y.product)!=null&&P.images&&y.product.images.length>0?y.product.images[0]:(C=y.product)!=null&&C.imageUrl?y.product.imageUrl:null})();return r.jsxs("div",{className:"flex items-center space-x-3 p-2 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[r.jsxs("div",{className:"w-12 h-12 bg-gray-200 rounded-lg overflow-hidden flex-shrink-0 relative",children:[w?r.jsx("img",{src:w,alt:((N=y.product)==null?void 0:N.name)||"Product",className:"w-full h-full object-cover",onError:P=>{var k;P.currentTarget.classList.add("hidden");const C=(k=P.currentTarget.parentElement)==null?void 0:k.querySelector(".fallback-icon");C&&C.classList.remove("hidden")}}):null,r.jsx(rt,{className:`fallback-icon w-6 h-6 text-gray-400 absolute inset-0 m-auto ${w?"hidden":"flex"}`})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium truncate",children:((S=y.product)==null?void 0:S.name)||`Product #${y.productId}`}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Qty: ",y.quantity,"  ",Number(y.price).toLocaleString()," = ",(y.quantity*Number(y.price)).toLocaleString()]})]})]},y.id)})})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium mb-2",children:"Delivery Address:"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:p.shippingAddress})]})]},p.id))})})]})]}):r.jsx(G,{children:r.jsxs(Z,{className:"text-center py-8",children:[r.jsx(nr,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"No store found. Please create a store first."})]})})]})})}function lq({className:e="",variant:t="outline",size:n="sm"}){const{user:s}=Gt(),i=()=>{if(!s)return"/";switch(s.role){case"shopkeeper":return"/seller/dashboard";case"admin":return"/admin";case"delivery_partner":return"/delivery-partner/dashboard";default:return"/customer-dashboard"}},a=()=>{if(!s)return"Home";switch(s.role){case"shopkeeper":return"Seller Dashboard";case"admin":return"Admin Dashboard";case"delivery_partner":return"Delivery Dashboard";default:return"My Dashboard"}};return r.jsx(Ae,{href:i(),children:r.jsx(F,{variant:t,size:n,className:`flex items-center ${e}`,title:`Back to ${a()}`,children:r.jsx(Xa,{className:"h-4 w-4"})})})}const Ube=te.object({name:te.string().min(1,"Store name is required").transform(e=>e.trim()),description:te.string().optional().default(""),address:te.string().min(1,"Address is required").transform(e=>e.trim()),latitude:te.string().optional().default(""),longitude:te.string().optional().default(""),phone:te.string().optional().default("").transform(e=>(e==null?void 0:e.trim())||""),website:te.string().optional().default("").transform(e=>{if(!e||e.trim()==="")return"";const t=e.trim();return t&&!t.startsWith("http://")&&!t.startsWith("https://")?`https://${t}`:t}).pipe(te.string().url().optional().or(te.literal(""))),logo:te.string().optional().default(""),coverImage:te.string().optional().default(""),storeType:te.enum(["retail","restaurant"]).default("retail"),cuisineType:te.string().optional().default(""),deliveryTime:te.string().optional().default(""),minimumOrder:te.string().optional().default("").transform(e=>(e==null?void 0:e.trim())||""),deliveryFee:te.string().optional().default("").transform(e=>(e==null?void 0:e.trim())||""),isDeliveryAvailable:te.boolean().default(!1),openingHours:te.string().optional().default("")});function Wbe(){const{toast:e}=ft(),t=pn(),[n,s]=j.useState(!1),[i,a]=j.useState(!1),{user:o}=Gt(),l=an({resolver:on(Ube),defaultValues:{name:"",description:"",address:"",latitude:"",longitude:"",phone:"",website:"",logo:"",coverImage:"",storeType:"retail",cuisineType:"",deliveryTime:"",minimumOrder:"",deliveryFee:"",isDeliveryAvailable:!1,openingHours:""}}),{data:c,isLoading:d}=Re({queryKey:["/api/stores/owner",o==null?void 0:o.id],enabled:!!(o!=null&&o.id)}),h=c==null?void 0:c[0],m=pt({mutationFn:async y=>{try{const b=await fetch("/api/stores",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...y,ownerId:o==null?void 0:o.id})});if(!b.ok){const N=(await b.json().catch(()=>({}))).message||`Store creation failed (${b.status})`;throw new Error(N)}return b.json()}catch(b){throw b instanceof TypeError&&b.message.includes("fetch")?new Error("Network connection error. Please check your internet connection."):b}},onSuccess:y=>{const w=(y.storeType||"store")==="restaurant"?"restaurant":"retail store";e({title:"Store Created Successfully!",description:`Your ${w} "${y.name||"store"}" is now live on Siraha Bazaar`}),t.invalidateQueries({queryKey:["/api/stores/owner",o==null?void 0:o.id]}),a(!1),l.reset()},onError:y=>{console.warn("Store creation error:",y.message);let b="Unable to create your store right now. Please try again.";y.message.includes("network")||y.message.includes("connection")?b="Network connection issue. Please check your internet and try again.":y.message.includes("duplicate")||y.message.includes("exists")?b="A store with this name already exists. Please choose a different name.":y.message.includes("validation")&&(b="Please check your store information and try again."),e({title:"Store Creation Issue",description:b,variant:"destructive"})}}),f=pt({mutationFn:async y=>{try{const b=await fetch(`/api/stores/${h==null?void 0:h.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});if(!b.ok){const N=(await b.json().catch(()=>({}))).message||`Store update failed (${b.status})`;throw new Error(N)}return b.json()}catch(b){throw b instanceof TypeError&&b.message.includes("fetch")?new Error("Network connection error. Please check your internet connection."):b}},onSuccess:y=>{const w=(y.storeType||(h==null?void 0:h.storeType)||"store")==="restaurant"?"restaurant":"retail store";e({title:"Store Updated Successfully!",description:`Your ${w} information has been updated`}),t.invalidateQueries({queryKey:["/api/stores/owner",o==null?void 0:o.id]}),s(!1)},onError:y=>{console.warn("Store update error:",y.message);let b="Unable to update your store right now. Please try again.";y.message.includes("network")||y.message.includes("connection")?b="Network connection issue. Please check your internet and try again.":y.message.includes("not found")?b="Store not found. Please refresh the page and try again.":y.message.includes("validation")&&(b="Please check your store information and try again."),e({title:"Store Update Issue",description:b,variant:"destructive"})}}),g=y=>{var w,N;const b={...y,name:((w=y.name)==null?void 0:w.trim())||"",description:y.description||"",address:((N=y.address)==null?void 0:N.trim())||"",phone:y.phone||"",website:y.website||"",logo:y.logo||"",coverImage:y.coverImage||"",latitude:y.latitude||"",longitude:y.longitude||"",cuisineType:y.cuisineType||"",deliveryTime:y.deliveryTime||"",minimumOrder:y.minimumOrder||"",deliveryFee:y.deliveryFee||"",openingHours:y.openingHours||"",isDeliveryAvailable:!!y.isDeliveryAvailable,storeType:y.storeType||"retail"};console.log("Creating store with cleaned data:",b),m.mutate(b)},x=y=>{var w,N;const b={...y,name:((w=y.name)==null?void 0:w.trim())||"",description:y.description||"",address:((N=y.address)==null?void 0:N.trim())||"",phone:y.phone||"",website:y.website||"",logo:y.logo||"",coverImage:y.coverImage||"",latitude:y.latitude||"",longitude:y.longitude||"",cuisineType:y.cuisineType||"",deliveryTime:y.deliveryTime||"",minimumOrder:y.minimumOrder||"",deliveryFee:y.deliveryFee||"",openingHours:y.openingHours||"",isDeliveryAvailable:!!y.isDeliveryAvailable,storeType:y.storeType||"retail"};console.log("Updating store with cleaned data:",b),f.mutate(b)},p=()=>{var y,b;h&&(l.reset({name:h.name||"",description:h.description||"",address:h.address||"",latitude:h.latitude||"",longitude:h.longitude||"",phone:h.phone||"",website:h.website||"",logo:h.logo||"",coverImage:h.coverImage||"",storeType:h.storeType==="restaurant"?"restaurant":"retail",cuisineType:h.cuisineType||"",deliveryTime:h.deliveryTime||"",minimumOrder:((y=h.minimumOrder)==null?void 0:y.toString())||"",deliveryFee:((b=h.deliveryFee)==null?void 0:b.toString())||"",isDeliveryAvailable:!!h.isDeliveryAvailable,openingHours:h.openingHours||""}),s(!0))};return!o||o.role!=="shopkeeper"?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:r.jsxs(G,{className:"w-full max-w-md",children:[r.jsx(se,{children:r.jsx(ie,{className:"text-center text-red-600",children:"Access Denied"})}),r.jsx(Z,{children:r.jsx("p",{className:"text-center text-muted-foreground",children:"You need to be a shopkeeper to access store management."})})]})}):o.role==="shopkeeper"&&o.status!=="active"?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:r.jsxs(G,{className:"w-full max-w-lg",children:[r.jsx(se,{children:r.jsx(ie,{className:"text-center text-yellow-600",children:"Pending Admin Approval"})}),r.jsxs(Z,{className:"text-center space-y-4",children:[r.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-yellow-100 dark:bg-yellow-900/20 flex items-center justify-center",children:r.jsx(gt,{className:"h-8 w-8 text-yellow-600"})}),r.jsx("p",{className:"text-muted-foreground",children:"Your seller account is pending approval from our admin team. You cannot access store management until approved."}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[r.jsx(Ae,{href:"/",children:r.jsx(F,{variant:"outline",children:"Go to Homepage"})}),r.jsx(Ae,{href:"/account",children:r.jsx(F,{variant:"default",children:"View Account Status"})})]})]})]})}):r.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex justify-between items-center py-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(nr,{className:"h-8 w-8 text-primary"}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Store Management"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your store information and settings"})]})]}),r.jsx("div",{className:"flex items-center space-x-3",children:r.jsx(lq,{})})]})})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:d?r.jsx("div",{className:"space-y-6",children:r.jsx(G,{children:r.jsx(Z,{className:"pt-6",children:r.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center space-y-4 md:space-y-0 md:space-x-6",children:[r.jsx("div",{className:"w-24 h-24 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse"}),r.jsxs("div",{className:"flex-1 space-y-3",children:[r.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),r.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse w-3/4"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("div",{className:"h-6 w-20 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),r.jsx("div",{className:"h-6 w-16 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]})]})]})})})}):h?r.jsxs("div",{className:"space-y-6",children:[r.jsx(G,{children:r.jsx(Z,{className:"pt-6",children:r.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center space-y-4 md:space-y-0 md:space-x-6",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsxs("div",{className:"w-24 h-24 bg-gray-100 dark:bg-gray-800 rounded-lg flex items-center justify-center overflow-hidden",children:[h.logo?r.jsx("img",{src:h.logo,alt:h.name||"Store Logo",className:"w-full h-full object-cover",onError:y=>{var N;const b=y.target;b.style.display="none";const w=(N=b.parentElement)==null?void 0:N.querySelector(".fallback-icon");w&&(w.style.display="block")}}):null,r.jsx(nr,{className:`h-12 w-12 text-muted-foreground fallback-icon ${h.logo?"hidden":"block"}`})]})}),r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:h.name||"My Store"}),r.jsx("p",{className:"text-muted-foreground",children:h.description||"No description added yet."}),r.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx($t,{className:"h-4 w-4 text-yellow-400 fill-current"}),r.jsx("span",{className:"text-sm",children:h.rating?parseFloat(h.rating).toFixed(1):"0.0"}),r.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",h.totalReviews||0," reviews)"]})]}),r.jsx(le,{variant:h.storeType==="restaurant"?"default":"secondary",children:h.storeType==="restaurant"?r.jsxs(r.Fragment,{children:[r.jsx(Fh,{className:"h-3 w-3 mr-1"})," Restaurant"]}):r.jsxs(r.Fragment,{children:[r.jsx(nr,{className:"h-3 w-3 mr-1"})," Retail"]})}),r.jsx(le,{variant:h.isActive?"default":"secondary",children:h.isActive?"Active":"Inactive"})]})]}),r.jsxs(F,{onClick:p,className:"mt-4 sm:mt-0",children:[r.jsx(us,{className:"h-4 w-4 mr-2"}),"Edit Store"]})]})})]})})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:"Contact Information"})}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Le,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Address"}),r.jsx("p",{className:"text-muted-foreground",children:h.address||"No address provided"})]})]}),h.phone&&h.phone.trim()&&r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Ot,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Phone"}),r.jsx("p",{className:"text-muted-foreground",children:h.phone})]})]}),h.website&&h.website.trim()&&r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Nb,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Website"}),r.jsx("a",{href:h.website,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline break-all",children:h.website})]})]}),(!h.phone||!h.phone.trim())&&(!h.website||!h.website.trim())&&r.jsx("div",{className:"text-center py-4",children:r.jsx("p",{className:"text-muted-foreground text-sm",children:"Add your phone number and website to help customers connect with you"})})]})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:"Store Statistics"})}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold",children:h.totalReviews||0}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Reviews"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold",children:h.rating?parseFloat(h.rating).toFixed(1):"0.0"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Average Rating"})]})]}),r.jsxs("div",{className:"pt-4",children:[r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Store created on ",h.createdAt?new Date(h.createdAt).toLocaleDateString():"Unknown date"]}),h.storeType==="restaurant"&&r.jsxs("div",{className:"mt-2 space-y-1",children:[h.cuisineType&&r.jsxs("p",{className:"text-sm text-muted-foreground",children:[r.jsx("strong",{children:"Cuisine:"})," ",h.cuisineType]}),h.deliveryTime&&r.jsxs("p",{className:"text-sm text-muted-foreground",children:[r.jsx("strong",{children:"Delivery Time:"})," ",h.deliveryTime]}),h.minimumOrder&&r.jsxs("p",{className:"text-sm text-muted-foreground",children:[r.jsx("strong",{children:"Minimum Order:"})," ",h.minimumOrder]})]})]})]})]})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:"Quick Actions"})}),r.jsx(Z,{children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[r.jsx(Ae,{href:"/seller/products/add",children:r.jsxs(F,{className:"w-full",children:[r.jsx(Wt,{className:"h-4 w-4 mr-2"}),"Add Product"]})}),r.jsx(Ae,{href:"/seller/inventory",children:r.jsx(F,{variant:"outline",className:"w-full",children:"View Inventory"})}),r.jsx(Ae,{href:"/seller/orders",children:r.jsx(F,{variant:"outline",className:"w-full",children:"Manage Orders"})})]})})]})]}):r.jsx("div",{className:"max-w-4xl mx-auto",children:r.jsxs(G,{children:[r.jsxs(se,{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(nr,{className:"h-8 w-8 text-primary"})}),r.jsx(ie,{className:"text-2xl",children:"Create Your Store"}),r.jsx("p",{className:"text-muted-foreground",children:"Set up your store to start selling products on Siraha Bazaar"})]}),r.jsx(Z,{children:r.jsx(Or,{...l,children:r.jsxs("form",{onSubmit:l.handleSubmit(g),className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(oe,{control:l.control,name:"name",render:({field:y})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Store Name"}),r.jsx(me,{children:r.jsx(he,{placeholder:"My Awesome Store",...y})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:l.control,name:"storeType",render:({field:y})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Store Type"}),r.jsxs(ct,{onValueChange:y.onChange,defaultValue:y.value,children:[r.jsx(me,{children:r.jsx(it,{children:r.jsx(dt,{placeholder:"Select store type"})})}),r.jsxs(at,{children:[r.jsx(ne,{value:"retail",children:"Retail Store"}),r.jsx(ne,{value:"restaurant",children:"Restaurant"})]})]}),r.jsx(fe,{})]})})]}),r.jsx(oe,{control:l.control,name:"description",render:({field:y})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Description"}),r.jsx(me,{children:r.jsx(Yt,{placeholder:"Tell customers about your store...",...y})}),r.jsx(fe,{})]})}),r.jsx(H0,{address:l.watch("address"),latitude:l.watch("latitude"),longitude:l.watch("longitude"),onLocationChange:y=>{l.setValue("address",y.address),l.setValue("latitude",y.latitude),l.setValue("longitude",y.longitude)}}),r.jsx(oe,{control:l.control,name:"website",render:({field:y})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Website (Optional)"}),r.jsx(me,{children:r.jsx(he,{placeholder:"https://mystore.com",...y})}),r.jsx(fe,{})]})}),l.watch("storeType")==="restaurant"&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 border rounded-lg bg-orange-50 dark:bg-orange-950/20",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("h3",{className:"text-lg font-medium text-orange-800 dark:text-orange-200 mb-2",children:" Restaurant Information"}),r.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-300 mb-4",children:"Additional fields for restaurants"})]}),r.jsx(oe,{control:l.control,name:"phone",render:({field:y})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Phone Number"}),r.jsx(me,{children:r.jsx(he,{placeholder:"+977-XXXXXXXXX",...y})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:l.control,name:"deliveryFee",render:({field:y})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Delivery Fee ()"}),r.jsx(me,{children:r.jsx(he,{placeholder:"50",type:"number",...y})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:l.control,name:"minimumOrder",render:({field:y})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Minimum Order ()"}),r.jsx(me,{children:r.jsx(he,{placeholder:"300",type:"number",...y})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:l.control,name:"deliveryTime",render:({field:y})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Delivery Time"}),r.jsx(me,{children:r.jsx(he,{placeholder:"30-45 minutes",...y})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:l.control,name:"cuisineType",render:({field:y})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Cuisine Type"}),r.jsx(me,{children:r.jsx(he,{placeholder:"Nepali, Indian, Chinese",...y})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:l.control,name:"openingHours",render:({field:y})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Opening Hours"}),r.jsx(me,{children:r.jsx(he,{placeholder:"9:00 AM - 10:00 PM",...y})}),r.jsx(fe,{})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(oe,{control:l.control,name:"logo",render:({field:y})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Store Logo"}),r.jsx(me,{children:r.jsx(qs,{label:"Store Logo",maxImages:1,minImages:0,onImagesChange:b=>y.onChange(b[0]||""),initialImages:y.value?[y.value]:[],className:"w-full"})}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Auto-compressed to 200KB for fast loading"}),r.jsx(fe,{})]})}),r.jsx(oe,{control:l.control,name:"coverImage",render:({field:y})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Store Cover Image"}),r.jsx(me,{children:r.jsx(qs,{label:"Store Cover Image",maxImages:1,minImages:0,onImagesChange:b=>y.onChange(b[0]||""),initialImages:y.value?[y.value]:[],className:"w-full"})}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Auto-compressed to 200KB for fast loading"}),r.jsx(fe,{})]})})]}),r.jsx("div",{className:"flex justify-center",children:r.jsx(F,{type:"submit",disabled:m.isPending,size:"lg",className:"w-full sm:w-auto px-8",children:m.isPending?"Creating...":"Create Store"})})]})})})]})})}),r.jsx(Ir,{open:n,onOpenChange:s,children:r.jsxs(Tr,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx(Ar,{children:r.jsx(Er,{children:"Edit Store Information"})}),r.jsx(Or,{...l,children:r.jsxs("form",{onSubmit:l.handleSubmit(x),className:"space-y-4 pb-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(oe,{control:l.control,name:"name",render:({field:y})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Store Name"}),r.jsx(me,{children:r.jsx(he,{placeholder:"My Awesome Store",...y})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:l.control,name:"storeType",render:({field:y})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Store Type"}),r.jsxs(ct,{onValueChange:y.onChange,defaultValue:y.value,children:[r.jsx(me,{children:r.jsx(it,{children:r.jsx(dt,{placeholder:"Select store type"})})}),r.jsxs(at,{children:[r.jsx(ne,{value:"retail",children:"Retail Store"}),r.jsx(ne,{value:"restaurant",children:"Restaurant"})]})]}),r.jsx(fe,{})]})})]}),r.jsx(oe,{control:l.control,name:"description",render:({field:y})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Description"}),r.jsx(me,{children:r.jsx(Yt,{placeholder:"Tell customers about your store...",...y})}),r.jsx(fe,{})]})}),r.jsx(H0,{address:l.watch("address"),latitude:l.watch("latitude"),longitude:l.watch("longitude"),onLocationChange:y=>{l.setValue("address",y.address),l.setValue("latitude",y.latitude),l.setValue("longitude",y.longitude)}}),r.jsx(oe,{control:l.control,name:"website",render:({field:y})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Website (Optional)"}),r.jsx(me,{children:r.jsx(he,{placeholder:"https://mystore.com",...y})}),r.jsx(fe,{})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(oe,{control:l.control,name:"logo",render:({field:y})=>r.jsxs(ae,{children:[r.jsx(de,{className:"text-base font-medium",children:"Store Logo"}),r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[r.jsx("div",{className:"flex items-center justify-center w-full",children:r.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100",children:[r.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[r.jsx(Wt,{className:"w-6 h-6 mb-2 text-gray-500"}),r.jsx("p",{className:"text-sm text-gray-500 font-semibold",children:"Upload Logo"}),r.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG recommended"})]}),r.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:b=>{var N;const w=(N=b.target.files)==null?void 0:N[0];if(w){const S=new FileReader;S.onload=P=>{var k;const C=(k=P.target)==null?void 0:k.result;C&&y.onChange(C)},S.readAsDataURL(w)}}})]})}),r.jsx("div",{className:"flex items-center justify-center w-full",children:r.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-orange-300 border-dashed rounded-lg cursor-pointer bg-orange-50 hover:bg-orange-100",children:[r.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[r.jsx(Eo,{className:"w-6 h-6 mb-2 text-orange-500"}),r.jsx("p",{className:"text-sm text-orange-600 font-semibold",children:"Take Photo"}),r.jsx("p",{className:"text-xs text-orange-500",children:"Camera capture"})]}),r.jsx("input",{type:"file",className:"hidden",accept:"image/*",capture:"environment",onChange:b=>{var N;const w=(N=b.target.files)==null?void 0:N[0];if(w){const S=new FileReader;S.onload=P=>{var k;const C=(k=P.target)==null?void 0:k.result;C&&y.onChange(C)},S.readAsDataURL(w)}}})]})})]}),r.jsxs("div",{className:"relative",children:[r.jsx(he,{placeholder:"Or paste image URL...",value:y.value||"",onChange:b=>y.onChange(b.target.value),className:"pr-10"}),r.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:r.jsx(Dd,{className:"h-4 w-4 text-gray-400"})})]}),y.value&&r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:y.value,alt:"Store logo preview",className:"w-full h-24 object-cover rounded-lg border"}),r.jsx(F,{type:"button",variant:"outline",size:"sm",className:"absolute top-2 right-2",onClick:()=>y.onChange(""),children:r.jsx(Fr,{className:"h-4 w-4"})})]})]})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:l.control,name:"coverImage",render:({field:y})=>r.jsxs(ae,{children:[r.jsx(de,{className:"text-base font-medium",children:"Cover Image"}),r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[r.jsx("div",{className:"flex items-center justify-center w-full",children:r.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100",children:[r.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[r.jsx(Wt,{className:"w-6 h-6 mb-2 text-gray-500"}),r.jsx("p",{className:"text-sm text-gray-500 font-semibold",children:"Upload Cover"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Wide format preferred"})]}),r.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:b=>{var N;const w=(N=b.target.files)==null?void 0:N[0];if(w){const S=new FileReader;S.onload=P=>{var k;const C=(k=P.target)==null?void 0:k.result;C&&y.onChange(C)},S.readAsDataURL(w)}}})]})}),r.jsx("div",{className:"flex items-center justify-center w-full",children:r.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-orange-300 border-dashed rounded-lg cursor-pointer bg-orange-50 hover:bg-orange-100",children:[r.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[r.jsx(Eo,{className:"w-6 h-6 mb-2 text-orange-500"}),r.jsx("p",{className:"text-sm text-orange-600 font-semibold",children:"Take Photo"}),r.jsx("p",{className:"text-xs text-orange-500",children:"Camera capture"})]}),r.jsx("input",{type:"file",className:"hidden",accept:"image/*",capture:"environment",onChange:b=>{var N;const w=(N=b.target.files)==null?void 0:N[0];if(w){const S=new FileReader;S.onload=P=>{var k;const C=(k=P.target)==null?void 0:k.result;C&&y.onChange(C)},S.readAsDataURL(w)}}})]})})]}),r.jsxs("div",{className:"relative",children:[r.jsx(he,{placeholder:"Or paste image URL...",value:y.value||"",onChange:b=>y.onChange(b.target.value),className:"pr-10"}),r.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:r.jsx(Dd,{className:"h-4 w-4 text-gray-400"})})]}),y.value&&r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:y.value,alt:"Store cover preview",className:"w-full h-24 object-cover rounded-lg border"}),r.jsx(F,{type:"button",variant:"outline",size:"sm",className:"absolute top-2 right-2",onClick:()=>y.onChange(""),children:r.jsx(Fr,{className:"h-4 w-4"})})]})]})}),r.jsx(fe,{})]})})]}),l.watch("storeType")==="restaurant"&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 border rounded-lg bg-orange-50 dark:bg-orange-950/20",children:[r.jsx("div",{className:"md:col-span-2",children:r.jsx("h3",{className:"text-lg font-medium text-orange-800 dark:text-orange-200 mb-2",children:" Restaurant Information"})}),r.jsx(oe,{control:l.control,name:"phone",render:({field:y})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Phone Number"}),r.jsx(me,{children:r.jsx(he,{placeholder:"+977-XXXXXXXXX",...y})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:l.control,name:"deliveryFee",render:({field:y})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Delivery Fee ()"}),r.jsx(me,{children:r.jsx(he,{placeholder:"50",type:"number",...y})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:l.control,name:"minimumOrder",render:({field:y})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Minimum Order ()"}),r.jsx(me,{children:r.jsx(he,{placeholder:"300",type:"number",...y})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:l.control,name:"deliveryTime",render:({field:y})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Delivery Time"}),r.jsx(me,{children:r.jsx(he,{placeholder:"30-45 minutes",...y})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:l.control,name:"cuisineType",render:({field:y})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Cuisine Type"}),r.jsx(me,{children:r.jsx(he,{placeholder:"Nepali, Indian, Chinese",...y})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:l.control,name:"openingHours",render:({field:y})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Opening Hours"}),r.jsx(me,{children:r.jsx(he,{placeholder:"9:00 AM - 10:00 PM",...y})}),r.jsx(fe,{})]})})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(F,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),r.jsx(F,{type:"submit",disabled:f.isPending,children:f.isPending?"Updating...":"Update Store"})]})]})})]})})]})}const Hbe=te.object({name:te.string().min(2,"Product name must be at least 2 characters"),categoryId:te.number().min(1,"Category is required"),description:te.string().optional(),price:te.string().min(1,"Price is required"),originalPrice:te.string().optional(),stock:te.number().min(0,"Stock cannot be negative"),images:te.array(te.string()).default([]),productType:te.enum(["retail","food"]).default("retail"),preparationTime:te.string().optional(),ingredients:te.array(te.string()).default([]),allergens:te.array(te.string()).default([]),spiceLevel:te.string().optional(),isVegetarian:te.boolean().default(!1),isVegan:te.boolean().default(!1),nutritionInfo:te.string().optional()});function qbe(){const[,e]=Jr(),{user:t}=Gt(),{toast:n}=ft(),s=pn(),[i,a]=j.useState(!1),[o,l]=j.useState([]),[c,d]=j.useState([]),[h,m]=j.useState(""),[f,g]=j.useState(""),{data:x=[]}=Re({queryKey:["/api/categories"]}),{data:p=[],isLoading:y,error:b}=Re({queryKey:[`/api/stores/owner/${t==null?void 0:t.id}`],queryFn:async()=>{if(!(t!=null&&t.id))return[];const B=await fetch(`/api/stores/owner/${t.id}`);if(!B.ok){if(B.status===404)return[];throw new Error("Failed to fetch stores")}return B.json()},enabled:!!t}),w=p[0],N=(w==null?void 0:w.storeType)==="restaurant"||(w==null?void 0:w.name)&&w.name.toLowerCase().includes("restaurant"),S=N?"food":"retail",P=x.length>0?x[0].id:1,C=an({resolver:on(Hbe),defaultValues:{name:"",categoryId:P,description:"",price:"",originalPrice:"",stock:0,images:[],productType:S,preparationTime:"",ingredients:[],allergens:[],spiceLevel:"",isVegetarian:!1,isVegan:!1,nutritionInfo:""}});j.useEffect(()=>{x.length>0&&P!==1&&C.setValue("categoryId",x[0].id)},[x,P,C]);const k=C.watch("productType"),O=()=>{if(h.trim()&&!o.includes(h.trim())){const B=[...o,h.trim()];l(B),C.setValue("ingredients",B),m("")}},I=B=>{const M=o.filter(U=>U!==B);l(M),C.setValue("ingredients",M)},T=()=>{if(f.trim()&&!c.includes(f.trim())){const B=[...c,f.trim()];d(B),C.setValue("allergens",B),g("")}},E=B=>{const M=c.filter(U=>U!==B);d(M),C.setValue("allergens",M)},D=async B=>{if(!w){n({title:"Error",description:"Please create a store first",variant:"destructive"});return}a(!0);try{const M={...B,storeId:w.id,ingredients:o,allergens:c,productType:N?"food":B.productType};if(!(await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(M)})).ok)throw new Error("Failed to create product");n({title:N?"Menu item added successfully!":"Product added successfully!"}),await Promise.all([s.invalidateQueries({queryKey:[`/api/products/store/${w.id}`]}),s.invalidateQueries({queryKey:["/api/products"]}),s.invalidateQueries({queryKey:["/api/products/store",t==null?void 0:t.id]}),s.invalidateQueries({queryKey:["/api/seller/inventory",t==null?void 0:t.id]}),s.invalidateQueries({queryKey:["/api/seller/dashboard",t==null?void 0:t.id]})]),e("/seller/inventory")}catch{n({title:"Error",description:N?"Failed to add menu item":"Failed to add product",variant:"destructive"})}finally{a(!1)}};return!t||t.role!=="shopkeeper"?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:r.jsxs(G,{className:"w-full max-w-md",children:[r.jsx(se,{children:r.jsx(ie,{className:"text-center text-red-600",children:"Access Denied"})}),r.jsxs(Z,{children:[r.jsx("p",{className:"text-center text-muted-foreground",children:"You need to be a shopkeeper to add products."}),r.jsx("div",{className:"mt-4 text-center",children:r.jsx(Ae,{href:"/",className:"text-primary hover:underline",children:"Go back to homepage"})})]})]})}):w?r.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b",children:r.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsx("div",{className:"flex items-center justify-between py-4",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Ae,{href:"/seller/inventory",children:r.jsxs(F,{variant:"ghost",size:"sm",children:[r.jsx(Xa,{className:"h-4 w-4 mr-2"}),"Back"]})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:N?"Add New Menu Item":"Add New Product"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:N?"Add items to your restaurant menu":"Add products to your store inventory"})]})]})})})}),r.jsx("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r.jsx(G,{children:r.jsx(Z,{className:"p-6",children:r.jsx(Or,{...C,children:r.jsxs("form",{onSubmit:C.handleSubmit(D),className:"space-y-6",children:[r.jsx(oe,{control:C.control,name:"name",render:({field:B})=>r.jsxs(ae,{children:[r.jsx(de,{className:"text-base font-medium",children:N?"Menu Item Name *":"Product Name *"}),r.jsx(me,{children:r.jsx(he,{placeholder:N?"Enter menu item name":"Enter product name",className:"h-11",...B})}),r.jsx(fe,{})]})}),!N&&r.jsx(oe,{control:C.control,name:"productType",render:({field:B})=>r.jsxs(ae,{children:[r.jsx(de,{className:"text-base font-medium",children:"Product Type *"}),r.jsxs(ct,{onValueChange:B.onChange,defaultValue:B.value,children:[r.jsx(me,{children:r.jsx(it,{className:"h-11",children:r.jsx(dt,{placeholder:"Select product type"})})}),r.jsxs(at,{children:[r.jsx(ne,{value:"retail",children:"Retail Product"}),r.jsx(ne,{value:"food",children:"Food Item"})]})]}),r.jsx(fe,{})]})}),r.jsx(oe,{control:C.control,name:"categoryId",render:({field:B})=>{var M;return r.jsxs(ae,{children:[r.jsx(de,{className:"text-base font-medium",children:"Category *"}),r.jsxs(ct,{onValueChange:U=>B.onChange(parseInt(U)),value:(M=B.value)==null?void 0:M.toString(),children:[r.jsx(me,{children:r.jsx(it,{className:"h-11",children:r.jsx(dt,{placeholder:"Select a category"})})}),r.jsx(at,{children:x.length>0?x.map(U=>r.jsx(ne,{value:U.id.toString(),children:U.name},U.id)):r.jsx(ne,{value:"1",disabled:!0,children:"Loading categories..."})})]}),r.jsx(fe,{})]})}}),r.jsx(oe,{control:C.control,name:"description",render:({field:B})=>r.jsxs(ae,{children:[r.jsx(de,{className:"text-base font-medium",children:"Description"}),r.jsx(me,{children:r.jsx(Yt,{placeholder:"Enter product description",rows:4,...B})}),r.jsx(fe,{})]})}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsx(oe,{control:C.control,name:"price",render:({field:B})=>r.jsxs(ae,{children:[r.jsx(de,{className:"text-base font-medium",children:"Price *"}),r.jsx(me,{children:r.jsx(he,{type:"number",step:"0.01",placeholder:"0.00",className:"h-11",...B})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:C.control,name:"originalPrice",render:({field:B})=>r.jsxs(ae,{children:[r.jsx(de,{className:"text-base font-medium",children:"Original Price"}),r.jsx(me,{children:r.jsx(he,{type:"number",step:"0.01",placeholder:"0.00",className:"h-11",...B})}),r.jsx(fe,{})]})})]}),r.jsx(oe,{control:C.control,name:"stock",render:({field:B})=>r.jsxs(ae,{children:[r.jsx(de,{className:"text-base font-medium",children:N||k==="food"?"Available Quantity *":"Stock Quantity *"}),r.jsx(me,{children:r.jsx(he,{type:"number",placeholder:"0",className:"h-11",...B,onChange:M=>B.onChange(parseInt(M.target.value)||0)})}),r.jsx(fe,{})]})}),(N||k==="food")&&r.jsxs("div",{className:"space-y-6 border-t pt-6",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Food Item Details"}),r.jsx(oe,{control:C.control,name:"preparationTime",render:({field:B})=>r.jsxs(ae,{children:[r.jsx(de,{className:"text-base font-medium",children:"Preparation Time"}),r.jsx(me,{children:r.jsx(he,{placeholder:"e.g., 15-20 mins",className:"h-11",...B})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:C.control,name:"spiceLevel",render:({field:B})=>r.jsxs(ae,{children:[r.jsx(de,{className:"text-base font-medium",children:"Spice Level"}),r.jsxs(ct,{onValueChange:B.onChange,value:B.value||"",children:[r.jsx(me,{children:r.jsx(it,{className:"h-11",children:r.jsx(dt,{placeholder:"Select spice level"})})}),r.jsxs(at,{children:[r.jsx(ne,{value:"mild",children:"Mild"}),r.jsx(ne,{value:"medium",children:"Medium"}),r.jsx(ne,{value:"hot",children:"Hot"}),r.jsx(ne,{value:"extra-hot",children:"Extra Hot"})]})]}),r.jsx(fe,{})]})}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsx(oe,{control:C.control,name:"isVegetarian",render:({field:B})=>r.jsxs(ae,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(de,{className:"text-base",children:"Vegetarian"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Contains no meat"})]}),r.jsx(me,{children:r.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:B.value,onChange:B.onChange})})]})}),r.jsx(oe,{control:C.control,name:"isVegan",render:({field:B})=>r.jsxs(ae,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(de,{className:"text-base",children:"Vegan"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"No animal products"})]}),r.jsx(me,{children:r.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:B.value,onChange:B.onChange})})]})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(de,{className:"text-base font-medium",children:"Ingredients"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(he,{placeholder:"Add ingredient",value:h,onChange:B=>m(B.target.value),className:"h-11 flex-1",onKeyPress:B=>B.key==="Enter"&&(B.preventDefault(),O())}),r.jsxs(F,{type:"button",variant:"outline",onClick:O,className:"h-11",children:[r.jsx(Wt,{className:"h-4 w-4 mr-2"}),"Add"]})]}),o.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2",children:o.map((B,M)=>r.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:[B,r.jsx("button",{type:"button",onClick:()=>I(B),className:"ml-2 text-blue-600 hover:text-blue-800",children:r.jsx(Fr,{className:"h-3 w-3"})})]},M))})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(de,{className:"text-base font-medium",children:"Allergens"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(he,{placeholder:"Add allergen",value:f,onChange:B=>g(B.target.value),className:"h-11 flex-1",onKeyPress:B=>B.key==="Enter"&&(B.preventDefault(),T())}),r.jsxs(F,{type:"button",variant:"outline",onClick:T,className:"h-11",children:[r.jsx(Wt,{className:"h-4 w-4 mr-2"}),"Add"]})]}),c.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2",children:c.map((B,M)=>r.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",children:[B,r.jsx("button",{type:"button",onClick:()=>E(B),className:"ml-2 text-red-600 hover:text-red-800",children:r.jsx(Fr,{className:"h-3 w-3"})})]},M))})]}),r.jsx(oe,{control:C.control,name:"nutritionInfo",render:({field:B})=>r.jsxs(ae,{children:[r.jsx(de,{className:"text-base font-medium",children:"Nutrition Information"}),r.jsx(me,{children:r.jsx(Yt,{placeholder:"e.g., Calories: 350, Protein: 15g, Carbs: 45g, Fat: 12g",rows:3,...B})}),r.jsx(fe,{})]})})]}),r.jsx(oe,{control:C.control,name:"images",render:({field:B})=>r.jsxs(ae,{children:[r.jsx(qs,{label:"Product Images",maxImages:6,minImages:1,onImagesChange:B.onChange,initialImages:B.value||[],className:"col-span-full"}),r.jsx(fe,{})]})}),r.jsx(F,{type:"submit",className:"w-full h-11 text-base",disabled:i,children:i?N?"Adding Menu Item...":"Adding Product...":N?"Add Menu Item":"Add Product"})]})})})})})]}):r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:r.jsxs(G,{className:"w-full max-w-md",children:[r.jsx(se,{children:r.jsx(ie,{className:"text-center",children:"No Store Found"})}),r.jsxs(Z,{children:[r.jsx("p",{className:"text-center text-muted-foreground mb-4",children:"You need to create a store before adding products."}),r.jsx("div",{className:"flex justify-center",children:r.jsx(Ae,{href:"/seller/store",children:r.jsx(F,{children:"Create Store"})})})]})]})})}var Kbe=Array.isArray,Is=Kbe,Gbe=typeof zf=="object"&&zf&&zf.Object===Object&&zf,cq=Gbe,Zbe=cq,Ybe=typeof self=="object"&&self&&self.Object===Object&&self,Xbe=Zbe||Ybe||Function("return this")(),to=Xbe,Qbe=to,Jbe=Qbe.Symbol,$g=Jbe,g3=$g,dq=Object.prototype,ewe=dq.hasOwnProperty,twe=dq.toString,Af=g3?g3.toStringTag:void 0;function rwe(e){var t=ewe.call(e,Af),n=e[Af];try{e[Af]=void 0;var s=!0}catch{}var i=twe.call(e);return s&&(t?e[Af]=n:delete e[Af]),i}var nwe=rwe,swe=Object.prototype,iwe=swe.toString;function awe(e){return iwe.call(e)}var owe=awe,v3=$g,lwe=nwe,cwe=owe,dwe="[object Null]",uwe="[object Undefined]",y3=v3?v3.toStringTag:void 0;function hwe(e){return e==null?e===void 0?uwe:dwe:y3&&y3 in Object(e)?lwe(e):cwe(e)}var sl=hwe;function mwe(e){return e!=null&&typeof e=="object"}var il=mwe,fwe=sl,pwe=il,xwe="[object Symbol]";function gwe(e){return typeof e=="symbol"||pwe(e)&&fwe(e)==xwe}var Bm=gwe,vwe=Is,ywe=Bm,jwe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,bwe=/^\w*$/;function wwe(e,t){if(vwe(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||ywe(e)?!0:bwe.test(e)||!jwe.test(e)||t!=null&&e in Object(t)}var LA=wwe;function Nwe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Cc=Nwe;const Vm=hr(Cc);var Swe=sl,_we=Cc,Pwe="[object AsyncFunction]",Cwe="[object Function]",kwe="[object GeneratorFunction]",Twe="[object Proxy]";function Awe(e){if(!_we(e))return!1;var t=Swe(e);return t==Cwe||t==kwe||t==Pwe||t==Twe}var RA=Awe;const Et=hr(RA);var Ewe=to,Owe=Ewe["__core-js_shared__"],Mwe=Owe,Z1=Mwe,j3=function(){var e=/[^.]+$/.exec(Z1&&Z1.keys&&Z1.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Dwe(e){return!!j3&&j3 in e}var Iwe=Dwe,Lwe=Function.prototype,Rwe=Lwe.toString;function $we(e){if(e!=null){try{return Rwe.call(e)}catch{}try{return e+""}catch{}}return""}var uq=$we,Fwe=RA,zwe=Iwe,Bwe=Cc,Vwe=uq,Uwe=/[\\^$.*+?()[\]{}|]/g,Wwe=/^\[object .+?Constructor\]$/,Hwe=Function.prototype,qwe=Object.prototype,Kwe=Hwe.toString,Gwe=qwe.hasOwnProperty,Zwe=RegExp("^"+Kwe.call(Gwe).replace(Uwe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ywe(e){if(!Bwe(e)||zwe(e))return!1;var t=Fwe(e)?Zwe:Wwe;return t.test(Vwe(e))}var Xwe=Ywe;function Qwe(e,t){return e==null?void 0:e[t]}var Jwe=Qwe,eNe=Xwe,tNe=Jwe;function rNe(e,t){var n=tNe(e,t);return eNe(n)?n:void 0}var au=rNe,nNe=au,sNe=nNe(Object,"create"),cw=sNe,b3=cw;function iNe(){this.__data__=b3?b3(null):{},this.size=0}var aNe=iNe;function oNe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var lNe=oNe,cNe=cw,dNe="__lodash_hash_undefined__",uNe=Object.prototype,hNe=uNe.hasOwnProperty;function mNe(e){var t=this.__data__;if(cNe){var n=t[e];return n===dNe?void 0:n}return hNe.call(t,e)?t[e]:void 0}var fNe=mNe,pNe=cw,xNe=Object.prototype,gNe=xNe.hasOwnProperty;function vNe(e){var t=this.__data__;return pNe?t[e]!==void 0:gNe.call(t,e)}var yNe=vNe,jNe=cw,bNe="__lodash_hash_undefined__";function wNe(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=jNe&&t===void 0?bNe:t,this}var NNe=wNe,SNe=aNe,_Ne=lNe,PNe=fNe,CNe=yNe,kNe=NNe;function Um(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}Um.prototype.clear=SNe;Um.prototype.delete=_Ne;Um.prototype.get=PNe;Um.prototype.has=CNe;Um.prototype.set=kNe;var TNe=Um;function ANe(){this.__data__=[],this.size=0}var ENe=ANe;function ONe(e,t){return e===t||e!==e&&t!==t}var $A=ONe,MNe=$A;function DNe(e,t){for(var n=e.length;n--;)if(MNe(e[n][0],t))return n;return-1}var dw=DNe,INe=dw,LNe=Array.prototype,RNe=LNe.splice;function $Ne(e){var t=this.__data__,n=INe(t,e);if(n<0)return!1;var s=t.length-1;return n==s?t.pop():RNe.call(t,n,1),--this.size,!0}var FNe=$Ne,zNe=dw;function BNe(e){var t=this.__data__,n=zNe(t,e);return n<0?void 0:t[n][1]}var VNe=BNe,UNe=dw;function WNe(e){return UNe(this.__data__,e)>-1}var HNe=WNe,qNe=dw;function KNe(e,t){var n=this.__data__,s=qNe(n,e);return s<0?(++this.size,n.push([e,t])):n[s][1]=t,this}var GNe=KNe,ZNe=ENe,YNe=FNe,XNe=VNe,QNe=HNe,JNe=GNe;function Wm(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}Wm.prototype.clear=ZNe;Wm.prototype.delete=YNe;Wm.prototype.get=XNe;Wm.prototype.has=QNe;Wm.prototype.set=JNe;var uw=Wm,e1e=au,t1e=to,r1e=e1e(t1e,"Map"),FA=r1e,w3=TNe,n1e=uw,s1e=FA;function i1e(){this.size=0,this.__data__={hash:new w3,map:new(s1e||n1e),string:new w3}}var a1e=i1e;function o1e(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var l1e=o1e,c1e=l1e;function d1e(e,t){var n=e.__data__;return c1e(t)?n[typeof t=="string"?"string":"hash"]:n.map}var hw=d1e,u1e=hw;function h1e(e){var t=u1e(this,e).delete(e);return this.size-=t?1:0,t}var m1e=h1e,f1e=hw;function p1e(e){return f1e(this,e).get(e)}var x1e=p1e,g1e=hw;function v1e(e){return g1e(this,e).has(e)}var y1e=v1e,j1e=hw;function b1e(e,t){var n=j1e(this,e),s=n.size;return n.set(e,t),this.size+=n.size==s?0:1,this}var w1e=b1e,N1e=a1e,S1e=m1e,_1e=x1e,P1e=y1e,C1e=w1e;function Hm(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}Hm.prototype.clear=N1e;Hm.prototype.delete=S1e;Hm.prototype.get=_1e;Hm.prototype.has=P1e;Hm.prototype.set=C1e;var zA=Hm,hq=zA,k1e="Expected a function";function BA(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(k1e);var n=function(){var s=arguments,i=t?t.apply(this,s):s[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,s);return n.cache=a.set(i,o)||a,o};return n.cache=new(BA.Cache||hq),n}BA.Cache=hq;var mq=BA;const T1e=hr(mq);var A1e=mq,E1e=500;function O1e(e){var t=A1e(e,function(s){return n.size===E1e&&n.clear(),s}),n=t.cache;return t}var M1e=O1e,D1e=M1e,I1e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,L1e=/\\(\\)?/g,R1e=D1e(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(I1e,function(n,s,i,a){t.push(i?a.replace(L1e,"$1"):s||n)}),t}),$1e=R1e;function F1e(e,t){for(var n=-1,s=e==null?0:e.length,i=Array(s);++n<s;)i[n]=t(e[n],n,e);return i}var VA=F1e,N3=$g,z1e=VA,B1e=Is,V1e=Bm,U1e=1/0,S3=N3?N3.prototype:void 0,_3=S3?S3.toString:void 0;function fq(e){if(typeof e=="string")return e;if(B1e(e))return z1e(e,fq)+"";if(V1e(e))return _3?_3.call(e):"";var t=e+"";return t=="0"&&1/e==-U1e?"-0":t}var W1e=fq,H1e=W1e;function q1e(e){return e==null?"":H1e(e)}var pq=q1e,K1e=Is,G1e=LA,Z1e=$1e,Y1e=pq;function X1e(e,t){return K1e(e)?e:G1e(e,t)?[e]:Z1e(Y1e(e))}var xq=X1e,Q1e=Bm,J1e=1/0;function eSe(e){if(typeof e=="string"||Q1e(e))return e;var t=e+"";return t=="0"&&1/e==-J1e?"-0":t}var mw=eSe,tSe=xq,rSe=mw;function nSe(e,t){t=tSe(t,e);for(var n=0,s=t.length;e!=null&&n<s;)e=e[rSe(t[n++])];return n&&n==s?e:void 0}var UA=nSe,sSe=UA;function iSe(e,t,n){var s=e==null?void 0:sSe(e,t);return s===void 0?n:s}var gq=iSe;const Oi=hr(gq);function aSe(e){return e==null}var oSe=aSe;const Vt=hr(oSe);var lSe=sl,cSe=Is,dSe=il,uSe="[object String]";function hSe(e){return typeof e=="string"||!cSe(e)&&dSe(e)&&lSe(e)==uSe}var mSe=hSe;const Fg=hr(mSe);var vq={exports:{}},mr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WA=Symbol.for("react.element"),HA=Symbol.for("react.portal"),fw=Symbol.for("react.fragment"),pw=Symbol.for("react.strict_mode"),xw=Symbol.for("react.profiler"),gw=Symbol.for("react.provider"),vw=Symbol.for("react.context"),fSe=Symbol.for("react.server_context"),yw=Symbol.for("react.forward_ref"),jw=Symbol.for("react.suspense"),bw=Symbol.for("react.suspense_list"),ww=Symbol.for("react.memo"),Nw=Symbol.for("react.lazy"),pSe=Symbol.for("react.offscreen"),yq;yq=Symbol.for("react.module.reference");function Fi(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case WA:switch(e=e.type,e){case fw:case xw:case pw:case jw:case bw:return e;default:switch(e=e&&e.$$typeof,e){case fSe:case vw:case yw:case Nw:case ww:case gw:return e;default:return t}}case HA:return t}}}mr.ContextConsumer=vw;mr.ContextProvider=gw;mr.Element=WA;mr.ForwardRef=yw;mr.Fragment=fw;mr.Lazy=Nw;mr.Memo=ww;mr.Portal=HA;mr.Profiler=xw;mr.StrictMode=pw;mr.Suspense=jw;mr.SuspenseList=bw;mr.isAsyncMode=function(){return!1};mr.isConcurrentMode=function(){return!1};mr.isContextConsumer=function(e){return Fi(e)===vw};mr.isContextProvider=function(e){return Fi(e)===gw};mr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===WA};mr.isForwardRef=function(e){return Fi(e)===yw};mr.isFragment=function(e){return Fi(e)===fw};mr.isLazy=function(e){return Fi(e)===Nw};mr.isMemo=function(e){return Fi(e)===ww};mr.isPortal=function(e){return Fi(e)===HA};mr.isProfiler=function(e){return Fi(e)===xw};mr.isStrictMode=function(e){return Fi(e)===pw};mr.isSuspense=function(e){return Fi(e)===jw};mr.isSuspenseList=function(e){return Fi(e)===bw};mr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===fw||e===xw||e===pw||e===jw||e===bw||e===pSe||typeof e=="object"&&e!==null&&(e.$$typeof===Nw||e.$$typeof===ww||e.$$typeof===gw||e.$$typeof===vw||e.$$typeof===yw||e.$$typeof===yq||e.getModuleId!==void 0)};mr.typeOf=Fi;vq.exports=mr;var xSe=vq.exports,gSe=sl,vSe=il,ySe="[object Number]";function jSe(e){return typeof e=="number"||vSe(e)&&gSe(e)==ySe}var jq=jSe;const bSe=hr(jq);var wSe=jq;function NSe(e){return wSe(e)&&e!=+e}var SSe=NSe;const qm=hr(SSe);var ia=function(t){return t===0?0:t>0?1:-1},nd=function(t){return Fg(t)&&t.indexOf("%")===t.length-1},Ue=function(t){return bSe(t)&&!qm(t)},_n=function(t){return Ue(t)||Fg(t)},_Se=0,Km=function(t){var n=++_Se;return"".concat(t||"").concat(n)},Gd=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ue(t)&&!Fg(t))return s;var a;if(nd(t)){var o=t.indexOf("%");a=n*parseFloat(t.slice(0,o))/100}else a=+t;return qm(a)&&(a=s),i&&a>n&&(a=n),a},Nl=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},PSe=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,s={},i=0;i<n;i++)if(!s[t[i]])s[t[i]]=!0;else return!0;return!1},Fn=function(t,n){return Ue(t)&&Ue(n)?function(s){return t+s*(n-t)}:function(){return n}};function ej(e,t,n){return!e||!e.length?null:e.find(function(s){return s&&(typeof t=="function"?t(s):Oi(s,t))===n})}function fh(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var s in t)if({}.hasOwnProperty.call(t,s)&&!{}.hasOwnProperty.call(e,s))return!1;return!0}function Z2(e){"@babel/helpers - typeof";return Z2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z2(e)}var CSe=["viewBox","children"],kSe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],P3=["points","pathLength"],Y1={svg:CSe,polygon:P3,polyline:P3},qA=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],tj=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(j.isValidElement(t)&&(s=t.props),!Vm(s))return null;var i={};return Object.keys(s).forEach(function(a){qA.includes(a)&&(i[a]=n||function(o){return s[a](s,o)})}),i},TSe=function(t,n,s){return function(i){return t(n,s,i),null}},rj=function(t,n,s){if(!Vm(t)||Z2(t)!=="object")return null;var i=null;return Object.keys(t).forEach(function(a){var o=t[a];qA.includes(a)&&typeof o=="function"&&(i||(i={}),i[a]=TSe(o,n,s))}),i},ASe=["children"],ESe=["children"];function C3(e,t){if(e==null)return{};var n=OSe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function OSe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function Y2(e){"@babel/helpers - typeof";return Y2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y2(e)}var k3={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Io=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},T3=null,X1=null,KA=function e(t){if(t===T3&&Array.isArray(X1))return X1;var n=[];return j.Children.forEach(t,function(s){Vt(s)||(xSe.isFragment(s)?n=n.concat(e(s.props.children)):n.push(s))}),X1=n,T3=t,n};function Mi(e,t){var n=[],s=[];return Array.isArray(t)?s=t.map(function(i){return Io(i)}):s=[Io(t)],KA(e).forEach(function(i){var a=Oi(i,"type.displayName")||Oi(i,"type.name");s.indexOf(a)!==-1&&n.push(i)}),n}function zs(e,t){var n=Mi(e,t);return n&&n[0]}var A3=function(t){if(!t||!t.props)return!1;var n=t.props,s=n.width,i=n.height;return!(!Ue(s)||s<=0||!Ue(i)||i<=0)},MSe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],DSe=function(t){return t&&t.type&&Fg(t.type)&&MSe.indexOf(t.type)>=0},bq=function(t){return t&&Y2(t)==="object"&&"clipDot"in t},ISe=function(t,n,s,i){var a,o=(a=Y1==null?void 0:Y1[i])!==null&&a!==void 0?a:[];return n.startsWith("data-")||!Et(t)&&(i&&o.includes(n)||kSe.includes(n))||s&&qA.includes(n)},It=function(t,n,s){if(!t||typeof t=="function"||typeof t=="boolean")return null;var i=t;if(j.isValidElement(t)&&(i=t.props),!Vm(i))return null;var a={};return Object.keys(i).forEach(function(o){var l;ISe((l=i)===null||l===void 0?void 0:l[o],o,n,s)&&(a[o]=i[o])}),a},X2=function e(t,n){if(t===n)return!0;var s=j.Children.count(t);if(s!==j.Children.count(n))return!1;if(s===0)return!0;if(s===1)return E3(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var i=0;i<s;i++){var a=t[i],o=n[i];if(Array.isArray(a)||Array.isArray(o)){if(!e(a,o))return!1}else if(!E3(a,o))return!1}return!0},E3=function(t,n){if(Vt(t)&&Vt(n))return!0;if(!Vt(t)&&!Vt(n)){var s=t.props||{},i=s.children,a=C3(s,ASe),o=n.props||{},l=o.children,c=C3(o,ESe);return i&&l?fh(a,c)&&X2(i,l):!i&&!l?fh(a,c):!1}return!1},O3=function(t,n){var s=[],i={};return KA(t).forEach(function(a,o){if(DSe(a))s.push(a);else if(a){var l=Io(a.type),c=n[l]||{},d=c.handler,h=c.once;if(d&&(!h||!i[l])){var m=d(a,l,o);s.push(m),i[l]=!0}}}),s},LSe=function(t){var n=t&&t.type;return n&&k3[n]?k3[n]:null},RSe=function(t,n){return KA(n).indexOf(t)},$Se=["children","width","height","viewBox","className","style","title","desc"];function Q2(){return Q2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Q2.apply(this,arguments)}function FSe(e,t){if(e==null)return{};var n=zSe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function zSe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function J2(e){var t=e.children,n=e.width,s=e.height,i=e.viewBox,a=e.className,o=e.style,l=e.title,c=e.desc,d=FSe(e,$Se),h=i||{width:n,height:s,x:0,y:0},m=Kt("recharts-surface",a);return re.createElement("svg",Q2({},It(d,!0,"svg"),{className:m,width:n,height:s,style:o,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height)}),re.createElement("title",null,l),re.createElement("desc",null,c),t)}var BSe=["children","className"];function eP(){return eP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},eP.apply(this,arguments)}function VSe(e,t){if(e==null)return{};var n=USe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function USe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var Nr=re.forwardRef(function(e,t){var n=e.children,s=e.className,i=VSe(e,BSe),a=Kt("recharts-layer",s);return re.createElement("g",eP({className:a},It(i,!0),{ref:t}),n)}),Lo=function(t,n){for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a]};function WSe(e,t,n){var s=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(i);++s<i;)a[s]=e[s+t];return a}var HSe=WSe,qSe=HSe;function KSe(e,t,n){var s=e.length;return n=n===void 0?s:n,!t&&n>=s?e:qSe(e,t,n)}var GSe=KSe,ZSe="\\ud800-\\udfff",YSe="\\u0300-\\u036f",XSe="\\ufe20-\\ufe2f",QSe="\\u20d0-\\u20ff",JSe=YSe+XSe+QSe,e_e="\\ufe0e\\ufe0f",t_e="\\u200d",r_e=RegExp("["+t_e+ZSe+JSe+e_e+"]");function n_e(e){return r_e.test(e)}var wq=n_e;function s_e(e){return e.split("")}var i_e=s_e,Nq="\\ud800-\\udfff",a_e="\\u0300-\\u036f",o_e="\\ufe20-\\ufe2f",l_e="\\u20d0-\\u20ff",c_e=a_e+o_e+l_e,d_e="\\ufe0e\\ufe0f",u_e="["+Nq+"]",tP="["+c_e+"]",rP="\\ud83c[\\udffb-\\udfff]",h_e="(?:"+tP+"|"+rP+")",Sq="[^"+Nq+"]",_q="(?:\\ud83c[\\udde6-\\uddff]){2}",Pq="[\\ud800-\\udbff][\\udc00-\\udfff]",m_e="\\u200d",Cq=h_e+"?",kq="["+d_e+"]?",f_e="(?:"+m_e+"(?:"+[Sq,_q,Pq].join("|")+")"+kq+Cq+")*",p_e=kq+Cq+f_e,x_e="(?:"+[Sq+tP+"?",tP,_q,Pq,u_e].join("|")+")",g_e=RegExp(rP+"(?="+rP+")|"+x_e+p_e,"g");function v_e(e){return e.match(g_e)||[]}var y_e=v_e,j_e=i_e,b_e=wq,w_e=y_e;function N_e(e){return b_e(e)?w_e(e):j_e(e)}var S_e=N_e,__e=GSe,P_e=wq,C_e=S_e,k_e=pq;function T_e(e){return function(t){t=k_e(t);var n=P_e(t)?C_e(t):void 0,s=n?n[0]:t.charAt(0),i=n?__e(n,1).join(""):t.slice(1);return s[e]()+i}}var A_e=T_e,E_e=A_e,O_e=E_e("toUpperCase"),M_e=O_e;const Sw=hr(M_e);function jr(e){return function(){return e}}const Tq=Math.cos,nj=Math.sin,xa=Math.sqrt,sj=Math.PI,_w=2*sj,nP=Math.PI,sP=2*nP,Kc=1e-6,D_e=sP-Kc;function Aq(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function I_e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Aq;const n=10**t;return function(s){this._+=s[0];for(let i=1,a=s.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+s[i]}}class L_e{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Aq:I_e(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,s,i){this._append`Q${+t},${+n},${this._x1=+s},${this._y1=+i}`}bezierCurveTo(t,n,s,i,a,o){this._append`C${+t},${+n},${+s},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(t,n,s,i,a){if(t=+t,n=+n,s=+s,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,l=this._y1,c=s-t,d=i-n,h=o-t,m=l-n,f=h*h+m*m;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>Kc)if(!(Math.abs(m*c-d*h)>Kc)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let g=s-o,x=i-l,p=c*c+d*d,y=g*g+x*x,b=Math.sqrt(p),w=Math.sqrt(f),N=a*Math.tan((nP-Math.acos((p+f-y)/(2*b*w)))/2),S=N/w,P=N/b;Math.abs(S-1)>Kc&&this._append`L${t+S*h},${n+S*m}`,this._append`A${a},${a},0,0,${+(m*g>h*x)},${this._x1=t+P*c},${this._y1=n+P*d}`}}arc(t,n,s,i,a,o){if(t=+t,n=+n,s=+s,o=!!o,s<0)throw new Error(`negative radius: ${s}`);let l=s*Math.cos(i),c=s*Math.sin(i),d=t+l,h=n+c,m=1^o,f=o?i-a:a-i;this._x1===null?this._append`M${d},${h}`:(Math.abs(this._x1-d)>Kc||Math.abs(this._y1-h)>Kc)&&this._append`L${d},${h}`,s&&(f<0&&(f=f%sP+sP),f>D_e?this._append`A${s},${s},0,1,${m},${t-l},${n-c}A${s},${s},0,1,${m},${this._x1=d},${this._y1=h}`:f>Kc&&this._append`A${s},${s},0,${+(f>=nP)},${m},${this._x1=t+s*Math.cos(a)},${this._y1=n+s*Math.sin(a)}`)}rect(t,n,s,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${s=+s}v${+i}h${-s}Z`}toString(){return this._}}function GA(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const s=Math.floor(n);if(!(s>=0))throw new RangeError(`invalid digits: ${n}`);t=s}return e},()=>new L_e(t)}function ZA(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Eq(e){this._context=e}Eq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Pw(e){return new Eq(e)}function Oq(e){return e[0]}function Mq(e){return e[1]}function Dq(e,t){var n=jr(!0),s=null,i=Pw,a=null,o=GA(l);e=typeof e=="function"?e:e===void 0?Oq:jr(e),t=typeof t=="function"?t:t===void 0?Mq:jr(t);function l(c){var d,h=(c=ZA(c)).length,m,f=!1,g;for(s==null&&(a=i(g=o())),d=0;d<=h;++d)!(d<h&&n(m=c[d],d,c))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+e(m,d,c),+t(m,d,c));if(g)return a=null,g+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:jr(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:jr(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:jr(!!c),l):n},l.curve=function(c){return arguments.length?(i=c,s!=null&&(a=i(s)),l):i},l.context=function(c){return arguments.length?(c==null?s=a=null:a=i(s=c),l):s},l}function Gv(e,t,n){var s=null,i=jr(!0),a=null,o=Pw,l=null,c=GA(d);e=typeof e=="function"?e:e===void 0?Oq:jr(+e),t=typeof t=="function"?t:jr(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Mq:jr(+n);function d(m){var f,g,x,p=(m=ZA(m)).length,y,b=!1,w,N=new Array(p),S=new Array(p);for(a==null&&(l=o(w=c())),f=0;f<=p;++f){if(!(f<p&&i(y=m[f],f,m))===b)if(b=!b)g=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),x=f-1;x>=g;--x)l.point(N[x],S[x]);l.lineEnd(),l.areaEnd()}b&&(N[f]=+e(y,f,m),S[f]=+t(y,f,m),l.point(s?+s(y,f,m):N[f],n?+n(y,f,m):S[f]))}if(w)return l=null,w+""||null}function h(){return Dq().defined(i).curve(o).context(a)}return d.x=function(m){return arguments.length?(e=typeof m=="function"?m:jr(+m),s=null,d):e},d.x0=function(m){return arguments.length?(e=typeof m=="function"?m:jr(+m),d):e},d.x1=function(m){return arguments.length?(s=m==null?null:typeof m=="function"?m:jr(+m),d):s},d.y=function(m){return arguments.length?(t=typeof m=="function"?m:jr(+m),n=null,d):t},d.y0=function(m){return arguments.length?(t=typeof m=="function"?m:jr(+m),d):t},d.y1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:jr(+m),d):n},d.lineX0=d.lineY0=function(){return h().x(e).y(t)},d.lineY1=function(){return h().x(e).y(n)},d.lineX1=function(){return h().x(s).y(t)},d.defined=function(m){return arguments.length?(i=typeof m=="function"?m:jr(!!m),d):i},d.curve=function(m){return arguments.length?(o=m,a!=null&&(l=o(a)),d):o},d.context=function(m){return arguments.length?(m==null?a=l=null:l=o(a=m),d):a},d}class Iq{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function R_e(e){return new Iq(e,!0)}function $_e(e){return new Iq(e,!1)}const YA={draw(e,t){const n=xa(t/sj);e.moveTo(n,0),e.arc(0,0,n,0,_w)}},F_e={draw(e,t){const n=xa(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Lq=xa(1/3),z_e=Lq*2,B_e={draw(e,t){const n=xa(t/z_e),s=n*Lq;e.moveTo(0,-n),e.lineTo(s,0),e.lineTo(0,n),e.lineTo(-s,0),e.closePath()}},V_e={draw(e,t){const n=xa(t),s=-n/2;e.rect(s,s,n,n)}},U_e=.8908130915292852,Rq=nj(sj/10)/nj(7*sj/10),W_e=nj(_w/10)*Rq,H_e=-Tq(_w/10)*Rq,q_e={draw(e,t){const n=xa(t*U_e),s=W_e*n,i=H_e*n;e.moveTo(0,-n),e.lineTo(s,i);for(let a=1;a<5;++a){const o=_w*a/5,l=Tq(o),c=nj(o);e.lineTo(c*n,-l*n),e.lineTo(l*s-c*i,c*s+l*i)}e.closePath()}},Q1=xa(3),K_e={draw(e,t){const n=-xa(t/(Q1*3));e.moveTo(0,n*2),e.lineTo(-Q1*n,-n),e.lineTo(Q1*n,-n),e.closePath()}},hi=-.5,mi=xa(3)/2,iP=1/xa(12),G_e=(iP/2+1)*3,Z_e={draw(e,t){const n=xa(t/G_e),s=n/2,i=n*iP,a=s,o=n*iP+n,l=-a,c=o;e.moveTo(s,i),e.lineTo(a,o),e.lineTo(l,c),e.lineTo(hi*s-mi*i,mi*s+hi*i),e.lineTo(hi*a-mi*o,mi*a+hi*o),e.lineTo(hi*l-mi*c,mi*l+hi*c),e.lineTo(hi*s+mi*i,hi*i-mi*s),e.lineTo(hi*a+mi*o,hi*o-mi*a),e.lineTo(hi*l+mi*c,hi*c-mi*l),e.closePath()}};function Y_e(e,t){let n=null,s=GA(i);e=typeof e=="function"?e:jr(e||YA),t=typeof t=="function"?t:jr(t===void 0?64:+t);function i(){let a;if(n||(n=a=s()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(e=typeof a=="function"?a:jr(a),i):e},i.size=function(a){return arguments.length?(t=typeof a=="function"?a:jr(+a),i):t},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function ij(){}function aj(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function $q(e){this._context=e}$q.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:aj(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:aj(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function X_e(e){return new $q(e)}function Fq(e){this._context=e}Fq.prototype={areaStart:ij,areaEnd:ij,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:aj(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Q_e(e){return new Fq(e)}function zq(e){this._context=e}zq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,s):this._context.moveTo(n,s);break;case 3:this._point=4;default:aj(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function J_e(e){return new zq(e)}function Bq(e){this._context=e}Bq.prototype={areaStart:ij,areaEnd:ij,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function e2e(e){return new Bq(e)}function M3(e){return e<0?-1:1}function D3(e,t,n){var s=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(s||i<0&&-0),o=(n-e._y1)/(i||s<0&&-0),l=(a*i+o*s)/(s+i);return(M3(a)+M3(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(l))||0}function I3(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function J1(e,t,n){var s=e._x0,i=e._y0,a=e._x1,o=e._y1,l=(a-s)/3;e._context.bezierCurveTo(s+l,i+l*t,a-l,o-l*n,a,o)}function oj(e){this._context=e}oj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:J1(this,this._t0,I3(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,J1(this,I3(this,n=D3(this,e,t)),n);break;default:J1(this,this._t0,n=D3(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Vq(e){this._context=new Uq(e)}(Vq.prototype=Object.create(oj.prototype)).point=function(e,t){oj.prototype.point.call(this,t,e)};function Uq(e){this._context=e}Uq.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,s,i,a){this._context.bezierCurveTo(t,e,s,n,a,i)}};function t2e(e){return new oj(e)}function r2e(e){return new Vq(e)}function Wq(e){this._context=e}Wq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var s=L3(e),i=L3(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(s[0][a],i[0][a],s[1][a],i[1][a],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function L3(e){var t,n=e.length-1,s,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)s=i[t]/a[t-1],a[t]-=s,o[t]-=s*o[t-1];for(i[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function n2e(e){return new Wq(e)}function Cw(e,t){this._context=e,this._t=t}Cw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function s2e(e){return new Cw(e,.5)}function i2e(e){return new Cw(e,0)}function a2e(e){return new Cw(e,1)}function Qh(e,t){if((o=e.length)>1)for(var n=1,s,i,a=e[t[0]],o,l=a.length;n<o;++n)for(i=a,a=e[t[n]],s=0;s<l;++s)a[s][1]+=a[s][0]=isNaN(i[s][1])?i[s][0]:i[s][1]}function aP(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function o2e(e,t){return e[t]}function l2e(e){const t=[];return t.key=e,t}function c2e(){var e=jr([]),t=aP,n=Qh,s=o2e;function i(a){var o=Array.from(e.apply(this,arguments),l2e),l,c=o.length,d=-1,h;for(const m of a)for(l=0,++d;l<c;++l)(o[l][d]=[0,+s(m,o[l].key,d,a)]).data=m;for(l=0,h=ZA(t(o));l<c;++l)o[h[l]].index=l;return n(o,h),o}return i.keys=function(a){return arguments.length?(e=typeof a=="function"?a:jr(Array.from(a)),i):e},i.value=function(a){return arguments.length?(s=typeof a=="function"?a:jr(+a),i):s},i.order=function(a){return arguments.length?(t=a==null?aP:typeof a=="function"?a:jr(Array.from(a)),i):t},i.offset=function(a){return arguments.length?(n=a??Qh,i):n},i}function d2e(e,t){if((s=e.length)>0){for(var n,s,i=0,a=e[0].length,o;i<a;++i){for(o=n=0;n<s;++n)o+=e[n][i][1]||0;if(o)for(n=0;n<s;++n)e[n][i][1]/=o}Qh(e,t)}}function u2e(e,t){if((i=e.length)>0){for(var n=0,s=e[t[0]],i,a=s.length;n<a;++n){for(var o=0,l=0;o<i;++o)l+=e[o][n][1]||0;s[n][1]+=s[n][0]=-l/2}Qh(e,t)}}function h2e(e,t){if(!(!((o=e.length)>0)||!((a=(i=e[t[0]]).length)>0))){for(var n=0,s=1,i,a,o;s<a;++s){for(var l=0,c=0,d=0;l<o;++l){for(var h=e[t[l]],m=h[s][1]||0,f=h[s-1][1]||0,g=(m-f)/2,x=0;x<l;++x){var p=e[t[x]],y=p[s][1]||0,b=p[s-1][1]||0;g+=y-b}c+=m,d+=g*m}i[s-1][1]+=i[s-1][0]=n,c&&(n-=d/c)}i[s-1][1]+=i[s-1][0]=n,Qh(e,t)}}function wx(e){"@babel/helpers - typeof";return wx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wx(e)}var m2e=["type","size","sizeType"];function oP(){return oP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},oP.apply(this,arguments)}function R3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function $3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?R3(Object(n),!0).forEach(function(s){f2e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R3(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function f2e(e,t,n){return t=p2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p2e(e){var t=x2e(e,"string");return wx(t)=="symbol"?t:t+""}function x2e(e,t){if(wx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(wx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function g2e(e,t){if(e==null)return{};var n=v2e(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function v2e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var Hq={symbolCircle:YA,symbolCross:F_e,symbolDiamond:B_e,symbolSquare:V_e,symbolStar:q_e,symbolTriangle:K_e,symbolWye:Z_e},y2e=Math.PI/180,j2e=function(t){var n="symbol".concat(Sw(t));return Hq[n]||YA},b2e=function(t,n,s){if(n==="area")return t;switch(s){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var i=18*y2e;return 1.25*t*t*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},w2e=function(t,n){Hq["symbol".concat(Sw(t))]=n},XA=function(t){var n=t.type,s=n===void 0?"circle":n,i=t.size,a=i===void 0?64:i,o=t.sizeType,l=o===void 0?"area":o,c=g2e(t,m2e),d=$3($3({},c),{},{type:s,size:a,sizeType:l}),h=function(){var y=j2e(s),b=Y_e().type(y).size(b2e(a,l,s));return b()},m=d.className,f=d.cx,g=d.cy,x=It(d,!0);return f===+f&&g===+g&&a===+a?re.createElement("path",oP({},x,{className:Kt("recharts-symbols",m),transform:"translate(".concat(f,", ").concat(g,")"),d:h()})):null};XA.registerSymbol=w2e;function Jh(e){"@babel/helpers - typeof";return Jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jh(e)}function lP(){return lP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},lP.apply(this,arguments)}function F3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function N2e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?F3(Object(n),!0).forEach(function(s){Nx(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F3(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function S2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _2e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Kq(s.key),s)}}function P2e(e,t,n){return t&&_2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function C2e(e,t,n){return t=lj(t),k2e(e,qq()?Reflect.construct(t,n||[],lj(e).constructor):t.apply(e,n))}function k2e(e,t){if(t&&(Jh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return T2e(e)}function T2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qq=function(){return!!e})()}function lj(e){return lj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},lj(e)}function A2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cP(e,t)}function cP(e,t){return cP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},cP(e,t)}function Nx(e,t,n){return t=Kq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kq(e){var t=E2e(e,"string");return Jh(t)=="symbol"?t:t+""}function E2e(e,t){if(Jh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Jh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fi=32,QA=function(e){function t(){return S2e(this,t),C2e(this,t,arguments)}return A2e(t,e),P2e(t,[{key:"renderIcon",value:function(s){var i=this.props.inactiveColor,a=fi/2,o=fi/6,l=fi/3,c=s.inactive?i:s.color;if(s.type==="plainline")return re.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:s.payload.strokeDasharray,x1:0,y1:a,x2:fi,y2:a,className:"recharts-legend-icon"});if(s.type==="line")return re.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(a,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(a,`
            H`).concat(fi,"M").concat(2*l,",").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(a),className:"recharts-legend-icon"});if(s.type==="rect")return re.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(fi/8,"h").concat(fi,"v").concat(fi*3/4,"h").concat(-fi,"z"),className:"recharts-legend-icon"});if(re.isValidElement(s.legendIcon)){var d=N2e({},s);return delete d.legendIcon,re.cloneElement(s.legendIcon,d)}return re.createElement(XA,{fill:c,cx:a,cy:a,size:fi,sizeType:"diameter",type:s.type})}},{key:"renderItems",value:function(){var s=this,i=this.props,a=i.payload,o=i.iconSize,l=i.layout,c=i.formatter,d=i.inactiveColor,h={x:0,y:0,width:fi,height:fi},m={display:l==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(g,x){var p=g.formatter||c,y=Kt(Nx(Nx({"recharts-legend-item":!0},"legend-item-".concat(x),!0),"inactive",g.inactive));if(g.type==="none")return null;var b=Et(g.value)?null:g.value;Lo(!Et(g.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var w=g.inactive?d:g.color;return re.createElement("li",lP({className:y,style:m,key:"legend-item-".concat(x)},rj(s.props,g,x)),re.createElement(J2,{width:o,height:o,viewBox:h,style:f},s.renderIcon(g)),re.createElement("span",{className:"recharts-legend-item-text",style:{color:w}},p?p(b,g,x):b))})}},{key:"render",value:function(){var s=this.props,i=s.payload,a=s.layout,o=s.align;if(!i||!i.length)return null;var l={padding:0,margin:0,textAlign:a==="horizontal"?o:"left"};return re.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(j.PureComponent);Nx(QA,"displayName","Legend");Nx(QA,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var O2e=uw;function M2e(){this.__data__=new O2e,this.size=0}var D2e=M2e;function I2e(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var L2e=I2e;function R2e(e){return this.__data__.get(e)}var $2e=R2e;function F2e(e){return this.__data__.has(e)}var z2e=F2e,B2e=uw,V2e=FA,U2e=zA,W2e=200;function H2e(e,t){var n=this.__data__;if(n instanceof B2e){var s=n.__data__;if(!V2e||s.length<W2e-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new U2e(s)}return n.set(e,t),this.size=n.size,this}var q2e=H2e,K2e=uw,G2e=D2e,Z2e=L2e,Y2e=$2e,X2e=z2e,Q2e=q2e;function Gm(e){var t=this.__data__=new K2e(e);this.size=t.size}Gm.prototype.clear=G2e;Gm.prototype.delete=Z2e;Gm.prototype.get=Y2e;Gm.prototype.has=X2e;Gm.prototype.set=Q2e;var Gq=Gm,J2e="__lodash_hash_undefined__";function ePe(e){return this.__data__.set(e,J2e),this}var tPe=ePe;function rPe(e){return this.__data__.has(e)}var nPe=rPe,sPe=zA,iPe=tPe,aPe=nPe;function cj(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new sPe;++t<n;)this.add(e[t])}cj.prototype.add=cj.prototype.push=iPe;cj.prototype.has=aPe;var Zq=cj;function oPe(e,t){for(var n=-1,s=e==null?0:e.length;++n<s;)if(t(e[n],n,e))return!0;return!1}var Yq=oPe;function lPe(e,t){return e.has(t)}var Xq=lPe,cPe=Zq,dPe=Yq,uPe=Xq,hPe=1,mPe=2;function fPe(e,t,n,s,i,a){var o=n&hPe,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var d=a.get(e),h=a.get(t);if(d&&h)return d==t&&h==e;var m=-1,f=!0,g=n&mPe?new cPe:void 0;for(a.set(e,t),a.set(t,e);++m<l;){var x=e[m],p=t[m];if(s)var y=o?s(p,x,m,t,e,a):s(x,p,m,e,t,a);if(y!==void 0){if(y)continue;f=!1;break}if(g){if(!dPe(t,function(b,w){if(!uPe(g,w)&&(x===b||i(x,b,n,s,a)))return g.push(w)})){f=!1;break}}else if(!(x===p||i(x,p,n,s,a))){f=!1;break}}return a.delete(e),a.delete(t),f}var Qq=fPe,pPe=to,xPe=pPe.Uint8Array,gPe=xPe;function vPe(e){var t=-1,n=Array(e.size);return e.forEach(function(s,i){n[++t]=[i,s]}),n}var yPe=vPe;function jPe(e){var t=-1,n=Array(e.size);return e.forEach(function(s){n[++t]=s}),n}var JA=jPe,z3=$g,B3=gPe,bPe=$A,wPe=Qq,NPe=yPe,SPe=JA,_Pe=1,PPe=2,CPe="[object Boolean]",kPe="[object Date]",TPe="[object Error]",APe="[object Map]",EPe="[object Number]",OPe="[object RegExp]",MPe="[object Set]",DPe="[object String]",IPe="[object Symbol]",LPe="[object ArrayBuffer]",RPe="[object DataView]",V3=z3?z3.prototype:void 0,eS=V3?V3.valueOf:void 0;function $Pe(e,t,n,s,i,a,o){switch(n){case RPe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case LPe:return!(e.byteLength!=t.byteLength||!a(new B3(e),new B3(t)));case CPe:case kPe:case EPe:return bPe(+e,+t);case TPe:return e.name==t.name&&e.message==t.message;case OPe:case DPe:return e==t+"";case APe:var l=NPe;case MPe:var c=s&_Pe;if(l||(l=SPe),e.size!=t.size&&!c)return!1;var d=o.get(e);if(d)return d==t;s|=PPe,o.set(e,t);var h=wPe(l(e),l(t),s,i,a,o);return o.delete(e),h;case IPe:if(eS)return eS.call(e)==eS.call(t)}return!1}var FPe=$Pe;function zPe(e,t){for(var n=-1,s=t.length,i=e.length;++n<s;)e[i+n]=t[n];return e}var Jq=zPe,BPe=Jq,VPe=Is;function UPe(e,t,n){var s=t(e);return VPe(e)?s:BPe(s,n(e))}var WPe=UPe;function HPe(e,t){for(var n=-1,s=e==null?0:e.length,i=0,a=[];++n<s;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}var qPe=HPe;function KPe(){return[]}var GPe=KPe,ZPe=qPe,YPe=GPe,XPe=Object.prototype,QPe=XPe.propertyIsEnumerable,U3=Object.getOwnPropertySymbols,JPe=U3?function(e){return e==null?[]:(e=Object(e),ZPe(U3(e),function(t){return QPe.call(e,t)}))}:YPe,eCe=JPe;function tCe(e,t){for(var n=-1,s=Array(e);++n<e;)s[n]=t(n);return s}var rCe=tCe,nCe=sl,sCe=il,iCe="[object Arguments]";function aCe(e){return sCe(e)&&nCe(e)==iCe}var oCe=aCe,W3=oCe,lCe=il,eK=Object.prototype,cCe=eK.hasOwnProperty,dCe=eK.propertyIsEnumerable,uCe=W3(function(){return arguments}())?W3:function(e){return lCe(e)&&cCe.call(e,"callee")&&!dCe.call(e,"callee")},eE=uCe,dj={exports:{}};function hCe(){return!1}var mCe=hCe;dj.exports;(function(e,t){var n=to,s=mCe,i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,o=a&&a.exports===i,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||s;e.exports=d})(dj,dj.exports);var tK=dj.exports,fCe=9007199254740991,pCe=/^(?:0|[1-9]\d*)$/;function xCe(e,t){var n=typeof e;return t=t??fCe,!!t&&(n=="number"||n!="symbol"&&pCe.test(e))&&e>-1&&e%1==0&&e<t}var tE=xCe,gCe=9007199254740991;function vCe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=gCe}var rE=vCe,yCe=sl,jCe=rE,bCe=il,wCe="[object Arguments]",NCe="[object Array]",SCe="[object Boolean]",_Ce="[object Date]",PCe="[object Error]",CCe="[object Function]",kCe="[object Map]",TCe="[object Number]",ACe="[object Object]",ECe="[object RegExp]",OCe="[object Set]",MCe="[object String]",DCe="[object WeakMap]",ICe="[object ArrayBuffer]",LCe="[object DataView]",RCe="[object Float32Array]",$Ce="[object Float64Array]",FCe="[object Int8Array]",zCe="[object Int16Array]",BCe="[object Int32Array]",VCe="[object Uint8Array]",UCe="[object Uint8ClampedArray]",WCe="[object Uint16Array]",HCe="[object Uint32Array]",Pr={};Pr[RCe]=Pr[$Ce]=Pr[FCe]=Pr[zCe]=Pr[BCe]=Pr[VCe]=Pr[UCe]=Pr[WCe]=Pr[HCe]=!0;Pr[wCe]=Pr[NCe]=Pr[ICe]=Pr[SCe]=Pr[LCe]=Pr[_Ce]=Pr[PCe]=Pr[CCe]=Pr[kCe]=Pr[TCe]=Pr[ACe]=Pr[ECe]=Pr[OCe]=Pr[MCe]=Pr[DCe]=!1;function qCe(e){return bCe(e)&&jCe(e.length)&&!!Pr[yCe(e)]}var KCe=qCe;function GCe(e){return function(t){return e(t)}}var rK=GCe,uj={exports:{}};uj.exports;(function(e,t){var n=cq,s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===s,o=a&&n.process,l=function(){try{var c=i&&i.require&&i.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(uj,uj.exports);var ZCe=uj.exports,YCe=KCe,XCe=rK,H3=ZCe,q3=H3&&H3.isTypedArray,QCe=q3?XCe(q3):YCe,nK=QCe,JCe=rCe,eke=eE,tke=Is,rke=tK,nke=tE,ske=nK,ike=Object.prototype,ake=ike.hasOwnProperty;function oke(e,t){var n=tke(e),s=!n&&eke(e),i=!n&&!s&&rke(e),a=!n&&!s&&!i&&ske(e),o=n||s||i||a,l=o?JCe(e.length,String):[],c=l.length;for(var d in e)(t||ake.call(e,d))&&!(o&&(d=="length"||i&&(d=="offset"||d=="parent")||a&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||nke(d,c)))&&l.push(d);return l}var lke=oke,cke=Object.prototype;function dke(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||cke;return e===n}var uke=dke;function hke(e,t){return function(n){return e(t(n))}}var sK=hke,mke=sK,fke=mke(Object.keys,Object),pke=fke,xke=uke,gke=pke,vke=Object.prototype,yke=vke.hasOwnProperty;function jke(e){if(!xke(e))return gke(e);var t=[];for(var n in Object(e))yke.call(e,n)&&n!="constructor"&&t.push(n);return t}var bke=jke,wke=RA,Nke=rE;function Ske(e){return e!=null&&Nke(e.length)&&!wke(e)}var zg=Ske,_ke=lke,Pke=bke,Cke=zg;function kke(e){return Cke(e)?_ke(e):Pke(e)}var kw=kke,Tke=WPe,Ake=eCe,Eke=kw;function Oke(e){return Tke(e,Eke,Ake)}var Mke=Oke,K3=Mke,Dke=1,Ike=Object.prototype,Lke=Ike.hasOwnProperty;function Rke(e,t,n,s,i,a){var o=n&Dke,l=K3(e),c=l.length,d=K3(t),h=d.length;if(c!=h&&!o)return!1;for(var m=c;m--;){var f=l[m];if(!(o?f in t:Lke.call(t,f)))return!1}var g=a.get(e),x=a.get(t);if(g&&x)return g==t&&x==e;var p=!0;a.set(e,t),a.set(t,e);for(var y=o;++m<c;){f=l[m];var b=e[f],w=t[f];if(s)var N=o?s(w,b,f,t,e,a):s(b,w,f,e,t,a);if(!(N===void 0?b===w||i(b,w,n,s,a):N)){p=!1;break}y||(y=f=="constructor")}if(p&&!y){var S=e.constructor,P=t.constructor;S!=P&&"constructor"in e&&"constructor"in t&&!(typeof S=="function"&&S instanceof S&&typeof P=="function"&&P instanceof P)&&(p=!1)}return a.delete(e),a.delete(t),p}var $ke=Rke,Fke=au,zke=to,Bke=Fke(zke,"DataView"),Vke=Bke,Uke=au,Wke=to,Hke=Uke(Wke,"Promise"),qke=Hke,Kke=au,Gke=to,Zke=Kke(Gke,"Set"),iK=Zke,Yke=au,Xke=to,Qke=Yke(Xke,"WeakMap"),Jke=Qke,dP=Vke,uP=FA,hP=qke,mP=iK,fP=Jke,aK=sl,Zm=uq,G3="[object Map]",eTe="[object Object]",Z3="[object Promise]",Y3="[object Set]",X3="[object WeakMap]",Q3="[object DataView]",tTe=Zm(dP),rTe=Zm(uP),nTe=Zm(hP),sTe=Zm(mP),iTe=Zm(fP),Gc=aK;(dP&&Gc(new dP(new ArrayBuffer(1)))!=Q3||uP&&Gc(new uP)!=G3||hP&&Gc(hP.resolve())!=Z3||mP&&Gc(new mP)!=Y3||fP&&Gc(new fP)!=X3)&&(Gc=function(e){var t=aK(e),n=t==eTe?e.constructor:void 0,s=n?Zm(n):"";if(s)switch(s){case tTe:return Q3;case rTe:return G3;case nTe:return Z3;case sTe:return Y3;case iTe:return X3}return t});var aTe=Gc,tS=Gq,oTe=Qq,lTe=FPe,cTe=$ke,J3=aTe,eL=Is,tL=tK,dTe=nK,uTe=1,rL="[object Arguments]",nL="[object Array]",Zv="[object Object]",hTe=Object.prototype,sL=hTe.hasOwnProperty;function mTe(e,t,n,s,i,a){var o=eL(e),l=eL(t),c=o?nL:J3(e),d=l?nL:J3(t);c=c==rL?Zv:c,d=d==rL?Zv:d;var h=c==Zv,m=d==Zv,f=c==d;if(f&&tL(e)){if(!tL(t))return!1;o=!0,h=!1}if(f&&!h)return a||(a=new tS),o||dTe(e)?oTe(e,t,n,s,i,a):lTe(e,t,c,n,s,i,a);if(!(n&uTe)){var g=h&&sL.call(e,"__wrapped__"),x=m&&sL.call(t,"__wrapped__");if(g||x){var p=g?e.value():e,y=x?t.value():t;return a||(a=new tS),i(p,y,n,s,a)}}return f?(a||(a=new tS),cTe(e,t,n,s,i,a)):!1}var fTe=mTe,pTe=fTe,iL=il;function oK(e,t,n,s,i){return e===t?!0:e==null||t==null||!iL(e)&&!iL(t)?e!==e&&t!==t:pTe(e,t,n,s,oK,i)}var nE=oK,xTe=Gq,gTe=nE,vTe=1,yTe=2;function jTe(e,t,n,s){var i=n.length,a=i,o=!s;if(e==null)return!a;for(e=Object(e);i--;){var l=n[i];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<a;){l=n[i];var c=l[0],d=e[c],h=l[1];if(o&&l[2]){if(d===void 0&&!(c in e))return!1}else{var m=new xTe;if(s)var f=s(d,h,c,e,t,m);if(!(f===void 0?gTe(h,d,vTe|yTe,s,m):f))return!1}}return!0}var bTe=jTe,wTe=Cc;function NTe(e){return e===e&&!wTe(e)}var lK=NTe,STe=lK,_Te=kw;function PTe(e){for(var t=_Te(e),n=t.length;n--;){var s=t[n],i=e[s];t[n]=[s,i,STe(i)]}return t}var CTe=PTe;function kTe(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var cK=kTe,TTe=bTe,ATe=CTe,ETe=cK;function OTe(e){var t=ATe(e);return t.length==1&&t[0][2]?ETe(t[0][0],t[0][1]):function(n){return n===e||TTe(n,e,t)}}var MTe=OTe;function DTe(e,t){return e!=null&&t in Object(e)}var ITe=DTe,LTe=xq,RTe=eE,$Te=Is,FTe=tE,zTe=rE,BTe=mw;function VTe(e,t,n){t=LTe(t,e);for(var s=-1,i=t.length,a=!1;++s<i;){var o=BTe(t[s]);if(!(a=e!=null&&n(e,o)))break;e=e[o]}return a||++s!=i?a:(i=e==null?0:e.length,!!i&&zTe(i)&&FTe(o,i)&&($Te(e)||RTe(e)))}var UTe=VTe,WTe=ITe,HTe=UTe;function qTe(e,t){return e!=null&&HTe(e,t,WTe)}var KTe=qTe,GTe=nE,ZTe=gq,YTe=KTe,XTe=LA,QTe=lK,JTe=cK,eAe=mw,tAe=1,rAe=2;function nAe(e,t){return XTe(e)&&QTe(t)?JTe(eAe(e),t):function(n){var s=ZTe(n,e);return s===void 0&&s===t?YTe(n,e):GTe(t,s,tAe|rAe)}}var sAe=nAe;function iAe(e){return e}var Ym=iAe;function aAe(e){return function(t){return t==null?void 0:t[e]}}var oAe=aAe,lAe=UA;function cAe(e){return function(t){return lAe(t,e)}}var dAe=cAe,uAe=oAe,hAe=dAe,mAe=LA,fAe=mw;function pAe(e){return mAe(e)?uAe(fAe(e)):hAe(e)}var xAe=pAe,gAe=MTe,vAe=sAe,yAe=Ym,jAe=Is,bAe=xAe;function wAe(e){return typeof e=="function"?e:e==null?yAe:typeof e=="object"?jAe(e)?vAe(e[0],e[1]):gAe(e):bAe(e)}var kc=wAe;function NAe(e,t,n,s){for(var i=e.length,a=n+(s?1:-1);s?a--:++a<i;)if(t(e[a],a,e))return a;return-1}var dK=NAe;function SAe(e){return e!==e}var _Ae=SAe;function PAe(e,t,n){for(var s=n-1,i=e.length;++s<i;)if(e[s]===t)return s;return-1}var CAe=PAe,kAe=dK,TAe=_Ae,AAe=CAe;function EAe(e,t,n){return t===t?AAe(e,t,n):kAe(e,TAe,n)}var OAe=EAe,MAe=OAe;function DAe(e,t){var n=e==null?0:e.length;return!!n&&MAe(e,t,0)>-1}var IAe=DAe;function LAe(e,t,n){for(var s=-1,i=e==null?0:e.length;++s<i;)if(n(t,e[s]))return!0;return!1}var RAe=LAe;function $Ae(){}var FAe=$Ae,rS=iK,zAe=FAe,BAe=JA,VAe=1/0,UAe=rS&&1/BAe(new rS([,-0]))[1]==VAe?function(e){return new rS(e)}:zAe,WAe=UAe,HAe=Zq,qAe=IAe,KAe=RAe,GAe=Xq,ZAe=WAe,YAe=JA,XAe=200;function QAe(e,t,n){var s=-1,i=qAe,a=e.length,o=!0,l=[],c=l;if(n)o=!1,i=KAe;else if(a>=XAe){var d=t?null:ZAe(e);if(d)return YAe(d);o=!1,i=GAe,c=new HAe}else c=t?[]:l;e:for(;++s<a;){var h=e[s],m=t?t(h):h;if(h=n||h!==0?h:0,o&&m===m){for(var f=c.length;f--;)if(c[f]===m)continue e;t&&c.push(m),l.push(h)}else i(c,m,n)||(c!==l&&c.push(m),l.push(h))}return l}var JAe=QAe,eEe=kc,tEe=JAe;function rEe(e,t){return e&&e.length?tEe(e,eEe(t)):[]}var nEe=rEe;const aL=hr(nEe);function uK(e,t,n){return t===!0?aL(e,n):Et(t)?aL(e,t):e}function em(e){"@babel/helpers - typeof";return em=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},em(e)}var sEe=["ref"];function oL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function co(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oL(Object(n),!0).forEach(function(s){Tw(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oL(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function iEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lL(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,mK(s.key),s)}}function aEe(e,t,n){return t&&lL(e.prototype,t),n&&lL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function oEe(e,t,n){return t=hj(t),lEe(e,hK()?Reflect.construct(t,n||[],hj(e).constructor):t.apply(e,n))}function lEe(e,t){if(t&&(em(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cEe(e)}function cEe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hK=function(){return!!e})()}function hj(e){return hj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},hj(e)}function dEe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pP(e,t)}function pP(e,t){return pP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},pP(e,t)}function Tw(e,t,n){return t=mK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mK(e){var t=uEe(e,"string");return em(t)=="symbol"?t:t+""}function uEe(e,t){if(em(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(em(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hEe(e,t){if(e==null)return{};var n=mEe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function mEe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function fEe(e){return e.value}function pEe(e,t){if(re.isValidElement(e))return re.cloneElement(e,t);if(typeof e=="function")return re.createElement(e,t);t.ref;var n=hEe(t,sEe);return re.createElement(QA,n)}var cL=1,rc=function(e){function t(){var n;iEe(this,t);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return n=oEe(this,t,[].concat(i)),Tw(n,"lastBoundingBox",{width:-1,height:-1}),n}return dEe(t,e),aEe(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();return s.height=this.wrapperNode.offsetHeight,s.width=this.wrapperNode.offsetWidth,s}return null}},{key:"updateBBox",value:function(){var s=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>cL||Math.abs(i.height-this.lastBoundingBox.height)>cL)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,s&&s(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,s&&s(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?co({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(s){var i=this.props,a=i.layout,o=i.align,l=i.verticalAlign,c=i.margin,d=i.chartWidth,h=i.chartHeight,m,f;if(!s||(s.left===void 0||s.left===null)&&(s.right===void 0||s.right===null))if(o==="center"&&a==="vertical"){var g=this.getBBoxSnapshot();m={left:((d||0)-g.width)/2}}else m=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!s||(s.top===void 0||s.top===null)&&(s.bottom===void 0||s.bottom===null))if(l==="middle"){var x=this.getBBoxSnapshot();f={top:((h||0)-x.height)/2}}else f=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return co(co({},m),f)}},{key:"render",value:function(){var s=this,i=this.props,a=i.content,o=i.width,l=i.height,c=i.wrapperStyle,d=i.payloadUniqBy,h=i.payload,m=co(co({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return re.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:function(g){s.wrapperNode=g}},pEe(a,co(co({},this.props),{},{payload:uK(h,d,fEe)})))}}],[{key:"getWithHeight",value:function(s,i){var a=co(co({},this.defaultProps),s.props),o=a.layout;return o==="vertical"&&Ue(s.props.height)?{height:s.props.height}:o==="horizontal"?{width:s.props.width||i}:null}}])}(j.PureComponent);Tw(rc,"displayName","Legend");Tw(rc,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var dL=$g,xEe=eE,gEe=Is,uL=dL?dL.isConcatSpreadable:void 0;function vEe(e){return gEe(e)||xEe(e)||!!(uL&&e&&e[uL])}var yEe=vEe,jEe=Jq,bEe=yEe;function fK(e,t,n,s,i){var a=-1,o=e.length;for(n||(n=bEe),i||(i=[]);++a<o;){var l=e[a];t>0&&n(l)?t>1?fK(l,t-1,n,s,i):jEe(i,l):s||(i[i.length]=l)}return i}var pK=fK;function wEe(e){return function(t,n,s){for(var i=-1,a=Object(t),o=s(t),l=o.length;l--;){var c=o[e?l:++i];if(n(a[c],c,a)===!1)break}return t}}var NEe=wEe,SEe=NEe,_Ee=SEe(),PEe=_Ee,CEe=PEe,kEe=kw;function TEe(e,t){return e&&CEe(e,t,kEe)}var xK=TEe,AEe=zg;function EEe(e,t){return function(n,s){if(n==null)return n;if(!AEe(n))return e(n,s);for(var i=n.length,a=t?i:-1,o=Object(n);(t?a--:++a<i)&&s(o[a],a,o)!==!1;);return n}}var OEe=EEe,MEe=xK,DEe=OEe,IEe=DEe(MEe),sE=IEe,LEe=sE,REe=zg;function $Ee(e,t){var n=-1,s=REe(e)?Array(e.length):[];return LEe(e,function(i,a,o){s[++n]=t(i,a,o)}),s}var gK=$Ee;function FEe(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var zEe=FEe,hL=Bm;function BEe(e,t){if(e!==t){var n=e!==void 0,s=e===null,i=e===e,a=hL(e),o=t!==void 0,l=t===null,c=t===t,d=hL(t);if(!l&&!d&&!a&&e>t||a&&o&&c&&!l&&!d||s&&o&&c||!n&&c||!i)return 1;if(!s&&!a&&!d&&e<t||d&&n&&i&&!s&&!a||l&&n&&i||!o&&i||!c)return-1}return 0}var VEe=BEe,UEe=VEe;function WEe(e,t,n){for(var s=-1,i=e.criteria,a=t.criteria,o=i.length,l=n.length;++s<o;){var c=UEe(i[s],a[s]);if(c){if(s>=l)return c;var d=n[s];return c*(d=="desc"?-1:1)}}return e.index-t.index}var HEe=WEe,nS=VA,qEe=UA,KEe=kc,GEe=gK,ZEe=zEe,YEe=rK,XEe=HEe,QEe=Ym,JEe=Is;function e4e(e,t,n){t.length?t=nS(t,function(a){return JEe(a)?function(o){return qEe(o,a.length===1?a[0]:a)}:a}):t=[QEe];var s=-1;t=nS(t,YEe(KEe));var i=GEe(e,function(a,o,l){var c=nS(t,function(d){return d(a)});return{criteria:c,index:++s,value:a}});return ZEe(i,function(a,o){return XEe(a,o,n)})}var t4e=e4e;function r4e(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var n4e=r4e,s4e=n4e,mL=Math.max;function i4e(e,t,n){return t=mL(t===void 0?e.length-1:t,0),function(){for(var s=arguments,i=-1,a=mL(s.length-t,0),o=Array(a);++i<a;)o[i]=s[t+i];i=-1;for(var l=Array(t+1);++i<t;)l[i]=s[i];return l[t]=n(o),s4e(e,this,l)}}var a4e=i4e;function o4e(e){return function(){return e}}var l4e=o4e,c4e=au,d4e=function(){try{var e=c4e(Object,"defineProperty");return e({},"",{}),e}catch{}}(),vK=d4e,u4e=l4e,fL=vK,h4e=Ym,m4e=fL?function(e,t){return fL(e,"toString",{configurable:!0,enumerable:!1,value:u4e(t),writable:!0})}:h4e,f4e=m4e,p4e=800,x4e=16,g4e=Date.now;function v4e(e){var t=0,n=0;return function(){var s=g4e(),i=x4e-(s-n);if(n=s,i>0){if(++t>=p4e)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var y4e=v4e,j4e=f4e,b4e=y4e,w4e=b4e(j4e),N4e=w4e,S4e=Ym,_4e=a4e,P4e=N4e;function C4e(e,t){return P4e(_4e(e,t,S4e),e+"")}var k4e=C4e,T4e=$A,A4e=zg,E4e=tE,O4e=Cc;function M4e(e,t,n){if(!O4e(n))return!1;var s=typeof t;return(s=="number"?A4e(n)&&E4e(t,n.length):s=="string"&&t in n)?T4e(n[t],e):!1}var Aw=M4e,D4e=pK,I4e=t4e,L4e=k4e,pL=Aw,R4e=L4e(function(e,t){if(e==null)return[];var n=t.length;return n>1&&pL(e,t[0],t[1])?t=[]:n>2&&pL(t[0],t[1],t[2])&&(t=[t[0]]),I4e(e,D4e(t,1),[])}),$4e=R4e;const iE=hr($4e);function Sx(e){"@babel/helpers - typeof";return Sx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sx(e)}function xP(){return xP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},xP.apply(this,arguments)}function F4e(e,t){return U4e(e)||V4e(e,t)||B4e(e,t)||z4e()}function z4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B4e(e,t){if(e){if(typeof e=="string")return xL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xL(e,t)}}function xL(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function V4e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(h){d=!0,i=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function U4e(e){if(Array.isArray(e))return e}function gL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function sS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gL(Object(n),!0).forEach(function(s){W4e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gL(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function W4e(e,t,n){return t=H4e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H4e(e){var t=q4e(e,"string");return Sx(t)=="symbol"?t:t+""}function q4e(e,t){if(Sx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Sx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function K4e(e){return Array.isArray(e)&&_n(e[0])&&_n(e[1])?e.join(" ~ "):e}var G4e=function(t){var n=t.separator,s=n===void 0?" : ":n,i=t.contentStyle,a=i===void 0?{}:i,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,d=c===void 0?{}:c,h=t.payload,m=t.formatter,f=t.itemSorter,g=t.wrapperClassName,x=t.labelClassName,p=t.label,y=t.labelFormatter,b=t.accessibilityLayer,w=b===void 0?!1:b,N=function(){if(h&&h.length){var D={padding:0,margin:0},B=(f?iE(h,f):h).map(function(M,U){if(M.type==="none")return null;var H=sS({display:"block",paddingTop:4,paddingBottom:4,color:M.color||"#000"},l),K=M.formatter||m||K4e,W=M.value,V=M.name,z=W,q=V;if(K&&z!=null&&q!=null){var J=K(W,V,M,U,h);if(Array.isArray(J)){var pe=F4e(J,2);z=pe[0],q=pe[1]}else z=J}return re.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(U),style:H},_n(q)?re.createElement("span",{className:"recharts-tooltip-item-name"},q):null,_n(q)?re.createElement("span",{className:"recharts-tooltip-item-separator"},s):null,re.createElement("span",{className:"recharts-tooltip-item-value"},z),re.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return re.createElement("ul",{className:"recharts-tooltip-item-list",style:D},B)}return null},S=sS({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),P=sS({margin:0},d),C=!Vt(p),k=C?p:"",O=Kt("recharts-default-tooltip",g),I=Kt("recharts-tooltip-label",x);C&&y&&h!==void 0&&h!==null&&(k=y(p,h));var T=w?{role:"status","aria-live":"assertive"}:{};return re.createElement("div",xP({className:O,style:S},T),re.createElement("p",{className:I,style:P},re.isValidElement(k)?k:"".concat(k)),N())};function _x(e){"@babel/helpers - typeof";return _x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_x(e)}function Yv(e,t,n){return t=Z4e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z4e(e){var t=Y4e(e,"string");return _x(t)=="symbol"?t:t+""}function Y4e(e,t){if(_x(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(_x(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ef="recharts-tooltip-wrapper",X4e={visibility:"hidden"};function Q4e(e){var t=e.coordinate,n=e.translateX,s=e.translateY;return Kt(Ef,Yv(Yv(Yv(Yv({},"".concat(Ef,"-right"),Ue(n)&&t&&Ue(t.x)&&n>=t.x),"".concat(Ef,"-left"),Ue(n)&&t&&Ue(t.x)&&n<t.x),"".concat(Ef,"-bottom"),Ue(s)&&t&&Ue(t.y)&&s>=t.y),"".concat(Ef,"-top"),Ue(s)&&t&&Ue(t.y)&&s<t.y))}function vL(e){var t=e.allowEscapeViewBox,n=e.coordinate,s=e.key,i=e.offsetTopLeft,a=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,d=e.viewBoxDimension;if(a&&Ue(a[s]))return a[s];var h=n[s]-l-i,m=n[s]+i;if(t[s])return o[s]?h:m;if(o[s]){var f=h,g=c[s];return f<g?Math.max(m,c[s]):Math.max(h,c[s])}var x=m+l,p=c[s]+d;return x>p?Math.max(h,c[s]):Math.max(m,c[s])}function J4e(e){var t=e.translateX,n=e.translateY,s=e.useTranslate3d;return{transform:s?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function eOe(e){var t=e.allowEscapeViewBox,n=e.coordinate,s=e.offsetTopLeft,i=e.position,a=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,d,h,m;return o.height>0&&o.width>0&&n?(h=vL({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:s,position:i,reverseDirection:a,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),m=vL({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:s,position:i,reverseDirection:a,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=J4e({translateX:h,translateY:m,useTranslate3d:l})):d=X4e,{cssProperties:d,cssClasses:Q4e({translateX:h,translateY:m,coordinate:n})}}function tm(e){"@babel/helpers - typeof";return tm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tm(e)}function yL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function jL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yL(Object(n),!0).forEach(function(s){vP(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yL(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function tOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rOe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,jK(s.key),s)}}function nOe(e,t,n){return t&&rOe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function sOe(e,t,n){return t=mj(t),iOe(e,yK()?Reflect.construct(t,n||[],mj(e).constructor):t.apply(e,n))}function iOe(e,t){if(t&&(tm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aOe(e)}function aOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yK=function(){return!!e})()}function mj(e){return mj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},mj(e)}function oOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gP(e,t)}function gP(e,t){return gP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},gP(e,t)}function vP(e,t,n){return t=jK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jK(e){var t=lOe(e,"string");return tm(t)=="symbol"?t:t+""}function lOe(e,t){if(tm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(tm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bL=1,cOe=function(e){function t(){var n;tOe(this,t);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return n=sOe(this,t,[].concat(i)),vP(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),vP(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,d,h;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(h=n.props.coordinate)===null||h===void 0?void 0:h.y)!==null&&d!==void 0?d:0}})}}),n}return oOe(t,e),nOe(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();(Math.abs(s.width-this.state.lastBoundingBox.width)>bL||Math.abs(s.height-this.state.lastBoundingBox.height)>bL)&&this.setState({lastBoundingBox:{width:s.width,height:s.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var s,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var s=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,d=i.children,h=i.coordinate,m=i.hasPayload,f=i.isAnimationActive,g=i.offset,x=i.position,p=i.reverseDirection,y=i.useTranslate3d,b=i.viewBox,w=i.wrapperStyle,N=eOe({allowEscapeViewBox:o,coordinate:h,offsetTopLeft:g,position:x,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:b}),S=N.cssClasses,P=N.cssProperties,C=jL(jL({transition:f&&a?"transform ".concat(l,"ms ").concat(c):void 0},P),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&m?"visible":"hidden",position:"absolute",top:0,left:0},w);return re.createElement("div",{tabIndex:-1,className:S,style:C,ref:function(O){s.wrapperNode=O}},d)}}])}(j.PureComponent),dOe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Ua={isSsr:dOe(),get:function(t){return Ua[t]},set:function(t,n){if(typeof t=="string")Ua[t]=n;else{var s=Object.keys(t);s&&s.length&&s.forEach(function(i){Ua[i]=t[i]})}}};function rm(e){"@babel/helpers - typeof";return rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rm(e)}function wL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function NL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wL(Object(n),!0).forEach(function(s){aE(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wL(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function uOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hOe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,wK(s.key),s)}}function mOe(e,t,n){return t&&hOe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function fOe(e,t,n){return t=fj(t),pOe(e,bK()?Reflect.construct(t,n||[],fj(e).constructor):t.apply(e,n))}function pOe(e,t){if(t&&(rm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xOe(e)}function xOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bK=function(){return!!e})()}function fj(e){return fj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fj(e)}function gOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yP(e,t)}function yP(e,t){return yP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},yP(e,t)}function aE(e,t,n){return t=wK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wK(e){var t=vOe(e,"string");return rm(t)=="symbol"?t:t+""}function vOe(e,t){if(rm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(rm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yOe(e){return e.dataKey}function jOe(e,t){return re.isValidElement(e)?re.cloneElement(e,t):typeof e=="function"?re.createElement(e,t):re.createElement(G4e,t)}var Yi=function(e){function t(){return uOe(this,t),fOe(this,t,arguments)}return gOe(t,e),mOe(t,[{key:"render",value:function(){var s=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,d=i.content,h=i.coordinate,m=i.filterNull,f=i.isAnimationActive,g=i.offset,x=i.payload,p=i.payloadUniqBy,y=i.position,b=i.reverseDirection,w=i.useTranslate3d,N=i.viewBox,S=i.wrapperStyle,P=x??[];m&&P.length&&(P=uK(x.filter(function(k){return k.value!=null&&(k.hide!==!0||s.props.includeHidden)}),p,yOe));var C=P.length>0;return re.createElement(cOe,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:f,active:a,coordinate:h,hasPayload:C,offset:g,position:y,reverseDirection:b,useTranslate3d:w,viewBox:N,wrapperStyle:S},jOe(d,NL(NL({},this.props),{},{payload:P})))}}])}(j.PureComponent);aE(Yi,"displayName","Tooltip");aE(Yi,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Ua.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var bOe=to,wOe=function(){return bOe.Date.now()},NOe=wOe,SOe=/\s/;function _Oe(e){for(var t=e.length;t--&&SOe.test(e.charAt(t)););return t}var POe=_Oe,COe=POe,kOe=/^\s+/;function TOe(e){return e&&e.slice(0,COe(e)+1).replace(kOe,"")}var AOe=TOe,EOe=AOe,SL=Cc,OOe=Bm,_L=NaN,MOe=/^[-+]0x[0-9a-f]+$/i,DOe=/^0b[01]+$/i,IOe=/^0o[0-7]+$/i,LOe=parseInt;function ROe(e){if(typeof e=="number")return e;if(OOe(e))return _L;if(SL(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=SL(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=EOe(e);var n=DOe.test(e);return n||IOe.test(e)?LOe(e.slice(2),n?2:8):MOe.test(e)?_L:+e}var NK=ROe,$Oe=Cc,iS=NOe,PL=NK,FOe="Expected a function",zOe=Math.max,BOe=Math.min;function VOe(e,t,n){var s,i,a,o,l,c,d=0,h=!1,m=!1,f=!0;if(typeof e!="function")throw new TypeError(FOe);t=PL(t)||0,$Oe(n)&&(h=!!n.leading,m="maxWait"in n,a=m?zOe(PL(n.maxWait)||0,t):a,f="trailing"in n?!!n.trailing:f);function g(C){var k=s,O=i;return s=i=void 0,d=C,o=e.apply(O,k),o}function x(C){return d=C,l=setTimeout(b,t),h?g(C):o}function p(C){var k=C-c,O=C-d,I=t-k;return m?BOe(I,a-O):I}function y(C){var k=C-c,O=C-d;return c===void 0||k>=t||k<0||m&&O>=a}function b(){var C=iS();if(y(C))return w(C);l=setTimeout(b,p(C))}function w(C){return l=void 0,f&&s?g(C):(s=i=void 0,o)}function N(){l!==void 0&&clearTimeout(l),d=0,s=c=i=l=void 0}function S(){return l===void 0?o:w(iS())}function P(){var C=iS(),k=y(C);if(s=arguments,i=this,c=C,k){if(l===void 0)return x(c);if(m)return clearTimeout(l),l=setTimeout(b,t),g(c)}return l===void 0&&(l=setTimeout(b,t)),o}return P.cancel=N,P.flush=S,P}var UOe=VOe,WOe=UOe,HOe=Cc,qOe="Expected a function";function KOe(e,t,n){var s=!0,i=!0;if(typeof e!="function")throw new TypeError(qOe);return HOe(n)&&(s="leading"in n?!!n.leading:s,i="trailing"in n?!!n.trailing:i),WOe(e,t,{leading:s,maxWait:t,trailing:i})}var GOe=KOe;const SK=hr(GOe);function Px(e){"@babel/helpers - typeof";return Px=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Px(e)}function CL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Xv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CL(Object(n),!0).forEach(function(s){ZOe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CL(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function ZOe(e,t,n){return t=YOe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YOe(e){var t=XOe(e,"string");return Px(t)=="symbol"?t:t+""}function XOe(e,t){if(Px(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Px(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QOe(e,t){return rMe(e)||tMe(e,t)||eMe(e,t)||JOe()}function JOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eMe(e,t){if(e){if(typeof e=="string")return kL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kL(e,t)}}function kL(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function tMe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(h){d=!0,i=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function rMe(e){if(Array.isArray(e))return e}var TL=j.forwardRef(function(e,t){var n=e.aspect,s=e.initialDimension,i=s===void 0?{width:-1,height:-1}:s,a=e.width,o=a===void 0?"100%":a,l=e.height,c=l===void 0?"100%":l,d=e.minWidth,h=d===void 0?0:d,m=e.minHeight,f=e.maxHeight,g=e.children,x=e.debounce,p=x===void 0?0:x,y=e.id,b=e.className,w=e.onResize,N=e.style,S=N===void 0?{}:N,P=j.useRef(null),C=j.useRef();C.current=w,j.useImperativeHandle(t,function(){return Object.defineProperty(P.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),P.current},configurable:!0})});var k=j.useState({containerWidth:i.width,containerHeight:i.height}),O=QOe(k,2),I=O[0],T=O[1],E=j.useCallback(function(B,M){T(function(U){var H=Math.round(B),K=Math.round(M);return U.containerWidth===H&&U.containerHeight===K?U:{containerWidth:H,containerHeight:K}})},[]);j.useEffect(function(){var B=function(V){var z,q=V[0].contentRect,J=q.width,pe=q.height;E(J,pe),(z=C.current)===null||z===void 0||z.call(C,J,pe)};p>0&&(B=SK(B,p,{trailing:!0,leading:!1}));var M=new ResizeObserver(B),U=P.current.getBoundingClientRect(),H=U.width,K=U.height;return E(H,K),M.observe(P.current),function(){M.disconnect()}},[E,p]);var D=j.useMemo(function(){var B=I.containerWidth,M=I.containerHeight;if(B<0||M<0)return null;Lo(nd(o)||nd(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Lo(!n||n>0,"The aspect(%s) must be greater than zero.",n);var U=nd(o)?B:o,H=nd(c)?M:c;n&&n>0&&(U?H=U/n:H&&(U=H*n),f&&H>f&&(H=f)),Lo(U>0||H>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,U,H,o,c,h,m,n);var K=!Array.isArray(g)&&Io(g.type).endsWith("Chart");return re.Children.map(g,function(W){return re.isValidElement(W)?j.cloneElement(W,Xv({width:U,height:H},K?{style:Xv({height:"100%",width:"100%",maxHeight:H,maxWidth:U},W.props.style)}:{})):W})},[n,g,c,f,m,h,I,o]);return re.createElement("div",{id:y?"".concat(y):void 0,className:Kt("recharts-responsive-container",b),style:Xv(Xv({},S),{},{width:o,height:c,minWidth:h,minHeight:m,maxHeight:f}),ref:P},D)}),_K=function(t){return null};_K.displayName="Cell";function Cx(e){"@babel/helpers - typeof";return Cx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cx(e)}function AL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function jP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AL(Object(n),!0).forEach(function(s){nMe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AL(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function nMe(e,t,n){return t=sMe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sMe(e){var t=iMe(e,"string");return Cx(t)=="symbol"?t:t+""}function iMe(e,t){if(Cx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Cx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Cu={widthCache:{},cacheCount:0},aMe=2e3,oMe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},EL="recharts_measurement_span";function lMe(e){var t=jP({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var vp=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Ua.isSsr)return{width:0,height:0};var s=lMe(n),i=JSON.stringify({text:t,copyStyle:s});if(Cu.widthCache[i])return Cu.widthCache[i];try{var a=document.getElementById(EL);a||(a=document.createElement("span"),a.setAttribute("id",EL),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var o=jP(jP({},oMe),s);Object.assign(a.style,o),a.textContent="".concat(t);var l=a.getBoundingClientRect(),c={width:l.width,height:l.height};return Cu.widthCache[i]=c,++Cu.cacheCount>aMe&&(Cu.cacheCount=0,Cu.widthCache={}),c}catch{return{width:0,height:0}}},cMe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function kx(e){"@babel/helpers - typeof";return kx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kx(e)}function pj(e,t){return mMe(e)||hMe(e,t)||uMe(e,t)||dMe()}function dMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uMe(e,t){if(e){if(typeof e=="string")return OL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OL(e,t)}}function OL(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function hMe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(h){d=!0,i=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function mMe(e){if(Array.isArray(e))return e}function fMe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ML(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,xMe(s.key),s)}}function pMe(e,t,n){return t&&ML(e.prototype,t),n&&ML(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function xMe(e){var t=gMe(e,"string");return kx(t)=="symbol"?t:t+""}function gMe(e,t){if(kx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(kx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var DL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,IL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,vMe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,yMe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,PK={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},jMe=Object.keys(PK),Yu="NaN";function bMe(e,t){return e*PK[t]}var Qv=function(){function e(t,n){fMe(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!vMe.test(n)&&(this.num=NaN,this.unit=""),jMe.includes(n)&&(this.num=bMe(t,n),this.unit="px")}return pMe(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var s,i=(s=yMe.exec(n))!==null&&s!==void 0?s:[],a=pj(i,3),o=a[1],l=a[2];return new e(parseFloat(o),l??"")}}])}();function CK(e){if(e.includes(Yu))return Yu;for(var t=e;t.includes("*")||t.includes("/");){var n,s=(n=DL.exec(t))!==null&&n!==void 0?n:[],i=pj(s,4),a=i[1],o=i[2],l=i[3],c=Qv.parse(a??""),d=Qv.parse(l??""),h=o==="*"?c.multiply(d):c.divide(d);if(h.isNaN())return Yu;t=t.replace(DL,h.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var m,f=(m=IL.exec(t))!==null&&m!==void 0?m:[],g=pj(f,4),x=g[1],p=g[2],y=g[3],b=Qv.parse(x??""),w=Qv.parse(y??""),N=p==="+"?b.add(w):b.subtract(w);if(N.isNaN())return Yu;t=t.replace(IL,N.toString())}return t}var LL=/\(([^()]*)\)/;function wMe(e){for(var t=e;t.includes("(");){var n=LL.exec(t),s=pj(n,2),i=s[1];t=t.replace(LL,CK(i))}return t}function NMe(e){var t=e.replace(/\s+/g,"");return t=wMe(t),t=CK(t),t}function SMe(e){try{return NMe(e)}catch{return Yu}}function aS(e){var t=SMe(e.slice(5,-1));return t===Yu?"":t}var _Me=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],PMe=["dx","dy","angle","className","breakAll"];function bP(){return bP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},bP.apply(this,arguments)}function RL(e,t){if(e==null)return{};var n=CMe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function CMe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function $L(e,t){return EMe(e)||AMe(e,t)||TMe(e,t)||kMe()}function kMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TMe(e,t){if(e){if(typeof e=="string")return FL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FL(e,t)}}function FL(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function AMe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(h){d=!0,i=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function EMe(e){if(Array.isArray(e))return e}var kK=/[ \f\n\r\t\v\u2028\u2029]+/,TK=function(t){var n=t.children,s=t.breakAll,i=t.style;try{var a=[];Vt(n)||(s?a=n.toString().split(""):a=n.toString().split(kK));var o=a.map(function(c){return{word:c,width:vp(c,i).width}}),l=s?0:vp("",i).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},OMe=function(t,n,s,i,a){var o=t.maxLines,l=t.children,c=t.style,d=t.breakAll,h=Ue(o),m=l,f=function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return U.reduce(function(H,K){var W=K.word,V=K.width,z=H[H.length-1];if(z&&(i==null||a||z.width+V+s<Number(i)))z.words.push(W),z.width+=V+s;else{var q={words:[W],width:V};H.push(q)}return H},[])},g=f(n),x=function(U){return U.reduce(function(H,K){return H.width>K.width?H:K})};if(!h)return g;for(var p="",y=function(U){var H=m.slice(0,U),K=TK({breakAll:d,style:c,children:H+p}).wordsWithComputedWidth,W=f(K),V=W.length>o||x(W).width>Number(i);return[V,W]},b=0,w=m.length-1,N=0,S;b<=w&&N<=m.length-1;){var P=Math.floor((b+w)/2),C=P-1,k=y(C),O=$L(k,2),I=O[0],T=O[1],E=y(P),D=$L(E,1),B=D[0];if(!I&&!B&&(b=P+1),I&&B&&(w=P-1),!I&&B){S=T;break}N++}return S||g},zL=function(t){var n=Vt(t)?[]:t.toString().split(kK);return[{words:n}]},MMe=function(t){var n=t.width,s=t.scaleToFit,i=t.children,a=t.style,o=t.breakAll,l=t.maxLines;if((n||s)&&!Ua.isSsr){var c,d,h=TK({breakAll:o,children:i,style:a});if(h){var m=h.wordsWithComputedWidth,f=h.spaceWidth;c=m,d=f}else return zL(i);return OMe({breakAll:o,children:i,maxLines:l,style:a},c,d,n,s)}return zL(i)},BL="#808080",xj=function(t){var n=t.x,s=n===void 0?0:n,i=t.y,a=i===void 0?0:i,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,d=c===void 0?"0.71em":c,h=t.scaleToFit,m=h===void 0?!1:h,f=t.textAnchor,g=f===void 0?"start":f,x=t.verticalAnchor,p=x===void 0?"end":x,y=t.fill,b=y===void 0?BL:y,w=RL(t,_Me),N=j.useMemo(function(){return MMe({breakAll:w.breakAll,children:w.children,maxLines:w.maxLines,scaleToFit:m,style:w.style,width:w.width})},[w.breakAll,w.children,w.maxLines,m,w.style,w.width]),S=w.dx,P=w.dy,C=w.angle,k=w.className,O=w.breakAll,I=RL(w,PMe);if(!_n(s)||!_n(a))return null;var T=s+(Ue(S)?S:0),E=a+(Ue(P)?P:0),D;switch(p){case"start":D=aS("calc(".concat(d,")"));break;case"middle":D=aS("calc(".concat((N.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:D=aS("calc(".concat(N.length-1," * -").concat(l,")"));break}var B=[];if(m){var M=N[0].width,U=w.width;B.push("scale(".concat((Ue(U)?U/M:1)/M,")"))}return C&&B.push("rotate(".concat(C,", ").concat(T,", ").concat(E,")")),B.length&&(I.transform=B.join(" ")),re.createElement("text",bP({},It(I,!0),{x:T,y:E,className:Kt("recharts-text",k),textAnchor:g,fill:b.includes("url")?BL:b}),N.map(function(H,K){var W=H.words.join(O?"":" ");return re.createElement("tspan",{x:T,dy:K===0?D:l,key:"".concat(W,"-").concat(K)},W)}))};function nc(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function DMe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function oE(e){let t,n,s;e.length!==2?(t=nc,n=(l,c)=>nc(e(l),c),s=(l,c)=>e(l)-c):(t=e===nc||e===DMe?e:IMe,n=e,s=e);function i(l,c,d=0,h=l.length){if(d<h){if(t(c,c)!==0)return h;do{const m=d+h>>>1;n(l[m],c)<0?d=m+1:h=m}while(d<h)}return d}function a(l,c,d=0,h=l.length){if(d<h){if(t(c,c)!==0)return h;do{const m=d+h>>>1;n(l[m],c)<=0?d=m+1:h=m}while(d<h)}return d}function o(l,c,d=0,h=l.length){const m=i(l,c,d,h-1);return m>d&&s(l[m-1],c)>-s(l[m],c)?m-1:m}return{left:i,center:o,right:a}}function IMe(){return 0}function AK(e){return e===null?NaN:+e}function*LMe(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const RMe=oE(nc),Bg=RMe.right;oE(AK).center;class VL extends Map{constructor(t,n=zMe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[s,i]of t)this.set(s,i)}get(t){return super.get(UL(this,t))}has(t){return super.has(UL(this,t))}set(t,n){return super.set($Me(this,t),n)}delete(t){return super.delete(FMe(this,t))}}function UL({_intern:e,_key:t},n){const s=t(n);return e.has(s)?e.get(s):n}function $Me({_intern:e,_key:t},n){const s=t(n);return e.has(s)?e.get(s):(e.set(s,n),n)}function FMe({_intern:e,_key:t},n){const s=t(n);return e.has(s)&&(n=e.get(s),e.delete(s)),n}function zMe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function BMe(e=nc){if(e===nc)return EK;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const s=e(t,n);return s||s===0?s:(e(n,n)===0)-(e(t,t)===0)}}function EK(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const VMe=Math.sqrt(50),UMe=Math.sqrt(10),WMe=Math.sqrt(2);function gj(e,t,n){const s=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(s)),a=s/Math.pow(10,i),o=a>=VMe?10:a>=UMe?5:a>=WMe?2:1;let l,c,d;return i<0?(d=Math.pow(10,-i)/o,l=Math.round(e*d),c=Math.round(t*d),l/d<e&&++l,c/d>t&&--c,d=-d):(d=Math.pow(10,i)*o,l=Math.round(e/d),c=Math.round(t/d),l*d<e&&++l,c*d>t&&--c),c<l&&.5<=n&&n<2?gj(e,t,n*2):[l,c,d]}function wP(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const s=t<e,[i,a,o]=s?gj(t,e,n):gj(e,t,n);if(!(a>=i))return[];const l=a-i+1,c=new Array(l);if(s)if(o<0)for(let d=0;d<l;++d)c[d]=(a-d)/-o;else for(let d=0;d<l;++d)c[d]=(a-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(i+d)/-o;else for(let d=0;d<l;++d)c[d]=(i+d)*o;return c}function NP(e,t,n){return t=+t,e=+e,n=+n,gj(e,t,n)[2]}function SP(e,t,n){t=+t,e=+e,n=+n;const s=t<e,i=s?NP(t,e,n):NP(e,t,n);return(s?-1:1)*(i<0?1/-i:i)}function WL(e,t){let n;for(const s of e)s!=null&&(n<s||n===void 0&&s>=s)&&(n=s);return n}function HL(e,t){let n;for(const s of e)s!=null&&(n>s||n===void 0&&s>=s)&&(n=s);return n}function OK(e,t,n=0,s=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),s=Math.floor(Math.min(e.length-1,s)),!(n<=t&&t<=s))return e;for(i=i===void 0?EK:BMe(i);s>n;){if(s-n>600){const c=s-n+1,d=t-n+1,h=Math.log(c),m=.5*Math.exp(2*h/3),f=.5*Math.sqrt(h*m*(c-m)/c)*(d-c/2<0?-1:1),g=Math.max(n,Math.floor(t-d*m/c+f)),x=Math.min(s,Math.floor(t+(c-d)*m/c+f));OK(e,t,g,x,i)}const a=e[t];let o=n,l=s;for(Of(e,n,t),i(e[s],a)>0&&Of(e,n,s);o<l;){for(Of(e,o,l),++o,--l;i(e[o],a)<0;)++o;for(;i(e[l],a)>0;)--l}i(e[n],a)===0?Of(e,n,l):(++l,Of(e,l,s)),l<=t&&(n=l+1),t<=l&&(s=l-1)}return e}function Of(e,t,n){const s=e[t];e[t]=e[n],e[n]=s}function HMe(e,t,n){if(e=Float64Array.from(LMe(e)),!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return HL(e);if(t>=1)return WL(e);var s,i=(s-1)*t,a=Math.floor(i),o=WL(OK(e,a).subarray(0,a+1)),l=HL(e.subarray(a+1));return o+(l-o)*(i-a)}}function qMe(e,t,n=AK){if(!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return+n(e[0],0,e);if(t>=1)return+n(e[s-1],s-1,e);var s,i=(s-1)*t,a=Math.floor(i),o=+n(e[a],a,e),l=+n(e[a+1],a+1,e);return o+(l-o)*(i-a)}}function KMe(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var s=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++s<i;)a[s]=e+s*n;return a}function zi(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function al(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const _P=Symbol("implicit");function lE(){var e=new VL,t=[],n=[],s=_P;function i(a){let o=e.get(a);if(o===void 0){if(s!==_P)return s;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new VL;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(s=a,i):s},i.copy=function(){return lE(t,n).unknown(s)},zi.apply(i,arguments),i}function Tx(){var e=lE().unknown(void 0),t=e.domain,n=e.range,s=0,i=1,a,o,l=!1,c=0,d=0,h=.5;delete e.unknown;function m(){var f=t().length,g=i<s,x=g?i:s,p=g?s:i;a=(p-x)/Math.max(1,f-c+d*2),l&&(a=Math.floor(a)),x+=(p-x-a*(f-c))*h,o=a*(1-c),l&&(x=Math.round(x),o=Math.round(o));var y=KMe(f).map(function(b){return x+a*b});return n(g?y.reverse():y)}return e.domain=function(f){return arguments.length?(t(f),m()):t()},e.range=function(f){return arguments.length?([s,i]=f,s=+s,i=+i,m()):[s,i]},e.rangeRound=function(f){return[s,i]=f,s=+s,i=+i,l=!0,m()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(f){return arguments.length?(l=!!f,m()):l},e.padding=function(f){return arguments.length?(c=Math.min(1,d=+f),m()):c},e.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),m()):c},e.paddingOuter=function(f){return arguments.length?(d=+f,m()):d},e.align=function(f){return arguments.length?(h=Math.max(0,Math.min(1,f)),m()):h},e.copy=function(){return Tx(t(),[s,i]).round(l).paddingInner(c).paddingOuter(d).align(h)},zi.apply(m(),arguments)}function MK(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return MK(t())},e}function yp(){return MK(Tx.apply(null,arguments).paddingInner(1))}function cE(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function DK(e,t){var n=Object.create(e.prototype);for(var s in t)n[s]=t[s];return n}function Vg(){}var Ax=.7,vj=1/Ax,ph="\\s*([+-]?\\d+)\\s*",Ex="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",GMe=/^#([0-9a-f]{3,8})$/,ZMe=new RegExp(`^rgb\\(${ph},${ph},${ph}\\)$`),YMe=new RegExp(`^rgb\\(${Wa},${Wa},${Wa}\\)$`),XMe=new RegExp(`^rgba\\(${ph},${ph},${ph},${Ex}\\)$`),QMe=new RegExp(`^rgba\\(${Wa},${Wa},${Wa},${Ex}\\)$`),JMe=new RegExp(`^hsl\\(${Ex},${Wa},${Wa}\\)$`),eDe=new RegExp(`^hsla\\(${Ex},${Wa},${Wa},${Ex}\\)$`),qL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};cE(Vg,Ox,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:KL,formatHex:KL,formatHex8:tDe,formatHsl:rDe,formatRgb:GL,toString:GL});function KL(){return this.rgb().formatHex()}function tDe(){return this.rgb().formatHex8()}function rDe(){return IK(this).formatHsl()}function GL(){return this.rgb().formatRgb()}function Ox(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=GMe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ZL(t):n===3?new Ts(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Jv(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Jv(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ZMe.exec(e))?new Ts(t[1],t[2],t[3],1):(t=YMe.exec(e))?new Ts(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=XMe.exec(e))?Jv(t[1],t[2],t[3],t[4]):(t=QMe.exec(e))?Jv(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=JMe.exec(e))?QL(t[1],t[2]/100,t[3]/100,1):(t=eDe.exec(e))?QL(t[1],t[2]/100,t[3]/100,t[4]):qL.hasOwnProperty(e)?ZL(qL[e]):e==="transparent"?new Ts(NaN,NaN,NaN,0):null}function ZL(e){return new Ts(e>>16&255,e>>8&255,e&255,1)}function Jv(e,t,n,s){return s<=0&&(e=t=n=NaN),new Ts(e,t,n,s)}function nDe(e){return e instanceof Vg||(e=Ox(e)),e?(e=e.rgb(),new Ts(e.r,e.g,e.b,e.opacity)):new Ts}function PP(e,t,n,s){return arguments.length===1?nDe(e):new Ts(e,t,n,s??1)}function Ts(e,t,n,s){this.r=+e,this.g=+t,this.b=+n,this.opacity=+s}cE(Ts,PP,DK(Vg,{brighter(e){return e=e==null?vj:Math.pow(vj,e),new Ts(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ax:Math.pow(Ax,e),new Ts(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ts(Nd(this.r),Nd(this.g),Nd(this.b),yj(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:YL,formatHex:YL,formatHex8:sDe,formatRgb:XL,toString:XL}));function YL(){return`#${sd(this.r)}${sd(this.g)}${sd(this.b)}`}function sDe(){return`#${sd(this.r)}${sd(this.g)}${sd(this.b)}${sd((isNaN(this.opacity)?1:this.opacity)*255)}`}function XL(){const e=yj(this.opacity);return`${e===1?"rgb(":"rgba("}${Nd(this.r)}, ${Nd(this.g)}, ${Nd(this.b)}${e===1?")":`, ${e})`}`}function yj(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Nd(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function sd(e){return e=Nd(e),(e<16?"0":"")+e.toString(16)}function QL(e,t,n,s){return s<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new na(e,t,n,s)}function IK(e){if(e instanceof na)return new na(e.h,e.s,e.l,e.opacity);if(e instanceof Vg||(e=Ox(e)),!e)return new na;if(e instanceof na)return e;e=e.rgb();var t=e.r/255,n=e.g/255,s=e.b/255,i=Math.min(t,n,s),a=Math.max(t,n,s),o=NaN,l=a-i,c=(a+i)/2;return l?(t===a?o=(n-s)/l+(n<s)*6:n===a?o=(s-t)/l+2:o=(t-n)/l+4,l/=c<.5?a+i:2-a-i,o*=60):l=c>0&&c<1?0:o,new na(o,l,c,e.opacity)}function iDe(e,t,n,s){return arguments.length===1?IK(e):new na(e,t,n,s??1)}function na(e,t,n,s){this.h=+e,this.s=+t,this.l=+n,this.opacity=+s}cE(na,iDe,DK(Vg,{brighter(e){return e=e==null?vj:Math.pow(vj,e),new na(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ax:Math.pow(Ax,e),new na(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*t,i=2*n-s;return new Ts(oS(e>=240?e-240:e+120,i,s),oS(e,i,s),oS(e<120?e+240:e-120,i,s),this.opacity)},clamp(){return new na(JL(this.h),ey(this.s),ey(this.l),yj(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=yj(this.opacity);return`${e===1?"hsl(":"hsla("}${JL(this.h)}, ${ey(this.s)*100}%, ${ey(this.l)*100}%${e===1?")":`, ${e})`}`}}));function JL(e){return e=(e||0)%360,e<0?e+360:e}function ey(e){return Math.max(0,Math.min(1,e||0))}function oS(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const dE=e=>()=>e;function aDe(e,t){return function(n){return e+n*t}}function oDe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(s){return Math.pow(e+s*t,n)}}function lDe(e){return(e=+e)==1?LK:function(t,n){return n-t?oDe(t,n,e):dE(isNaN(t)?n:t)}}function LK(e,t){var n=t-e;return n?aDe(e,n):dE(isNaN(e)?t:e)}const eR=function e(t){var n=lDe(t);function s(i,a){var o=n((i=PP(i)).r,(a=PP(a)).r),l=n(i.g,a.g),c=n(i.b,a.b),d=LK(i.opacity,a.opacity);return function(h){return i.r=o(h),i.g=l(h),i.b=c(h),i.opacity=d(h),i+""}}return s.gamma=e,s}(1);function cDe(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,s=t.slice(),i;return function(a){for(i=0;i<n;++i)s[i]=e[i]*(1-a)+t[i]*a;return s}}function dDe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function uDe(e,t){var n=t?t.length:0,s=e?Math.min(n,e.length):0,i=new Array(s),a=new Array(n),o;for(o=0;o<s;++o)i[o]=Xm(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(l){for(o=0;o<s;++o)a[o]=i[o](l);return a}}function hDe(e,t){var n=new Date;return e=+e,t=+t,function(s){return n.setTime(e*(1-s)+t*s),n}}function jj(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function mDe(e,t){var n={},s={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Xm(e[i],t[i]):s[i]=t[i];return function(a){for(i in n)s[i]=n[i](a);return s}}var CP=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lS=new RegExp(CP.source,"g");function fDe(e){return function(){return e}}function pDe(e){return function(t){return e(t)+""}}function xDe(e,t){var n=CP.lastIndex=lS.lastIndex=0,s,i,a,o=-1,l=[],c=[];for(e=e+"",t=t+"";(s=CP.exec(e))&&(i=lS.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),l[o]?l[o]+=a:l[++o]=a),(s=s[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,c.push({i:o,x:jj(s,i)})),n=lS.lastIndex;return n<t.length&&(a=t.slice(n),l[o]?l[o]+=a:l[++o]=a),l.length<2?c[0]?pDe(c[0].x):fDe(t):(t=c.length,function(d){for(var h=0,m;h<t;++h)l[(m=c[h]).i]=m.x(d);return l.join("")})}function Xm(e,t){var n=typeof t,s;return t==null||n==="boolean"?dE(t):(n==="number"?jj:n==="string"?(s=Ox(t))?(t=s,eR):xDe:t instanceof Ox?eR:t instanceof Date?hDe:dDe(t)?cDe:Array.isArray(t)?uDe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?mDe:jj)(e,t)}function uE(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function gDe(e,t){t===void 0&&(t=e,e=Xm);for(var n=0,s=t.length-1,i=t[0],a=new Array(s<0?0:s);n<s;)a[n]=e(i,i=t[++n]);return function(o){var l=Math.max(0,Math.min(s-1,Math.floor(o*=s)));return a[l](o-l)}}function vDe(e){return function(){return e}}function bj(e){return+e}var tR=[0,1];function hs(e){return e}function kP(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:vDe(isNaN(t)?NaN:.5)}function yDe(e,t){var n;return e>t&&(n=e,e=t,t=n),function(s){return Math.max(e,Math.min(t,s))}}function jDe(e,t,n){var s=e[0],i=e[1],a=t[0],o=t[1];return i<s?(s=kP(i,s),a=n(o,a)):(s=kP(s,i),a=n(a,o)),function(l){return a(s(l))}}function bDe(e,t,n){var s=Math.min(e.length,t.length)-1,i=new Array(s),a=new Array(s),o=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<s;)i[o]=kP(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(l){var c=Bg(e,l,1,s)-1;return a[c](i[c](l))}}function Ug(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Ew(){var e=tR,t=tR,n=Xm,s,i,a,o=hs,l,c,d;function h(){var f=Math.min(e.length,t.length);return o!==hs&&(o=yDe(e[0],e[f-1])),l=f>2?bDe:jDe,c=d=null,m}function m(f){return f==null||isNaN(f=+f)?a:(c||(c=l(e.map(s),t,n)))(s(o(f)))}return m.invert=function(f){return o(i((d||(d=l(t,e.map(s),jj)))(f)))},m.domain=function(f){return arguments.length?(e=Array.from(f,bj),h()):e.slice()},m.range=function(f){return arguments.length?(t=Array.from(f),h()):t.slice()},m.rangeRound=function(f){return t=Array.from(f),n=uE,h()},m.clamp=function(f){return arguments.length?(o=f?!0:hs,h()):o!==hs},m.interpolate=function(f){return arguments.length?(n=f,h()):n},m.unknown=function(f){return arguments.length?(a=f,m):a},function(f,g){return s=f,i=g,h()}}function hE(){return Ew()(hs,hs)}function wDe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function wj(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,s=e.slice(0,n);return[s.length>1?s[0]+s.slice(2):s,+e.slice(n+1)]}function nm(e){return e=wj(Math.abs(e)),e?e[1]:NaN}function NDe(e,t){return function(n,s){for(var i=n.length,a=[],o=0,l=e[0],c=0;i>0&&l>0&&(c+l+1>s&&(l=Math.max(1,s-c)),a.push(n.substring(i-=l,i+l)),!((c+=l+1)>s));)l=e[o=(o+1)%e.length];return a.reverse().join(t)}}function SDe(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var _De=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Mx(e){if(!(t=_De.exec(e)))throw new Error("invalid format: "+e);var t;return new mE({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Mx.prototype=mE.prototype;function mE(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}mE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function PDe(e){e:for(var t=e.length,n=1,s=-1,i;n<t;++n)switch(e[n]){case".":s=i=n;break;case"0":s===0&&(s=n),i=n;break;default:if(!+e[n])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(i+1):e}var RK;function CDe(e,t){var n=wj(e,t);if(!n)return e+"";var s=n[0],i=n[1],a=i-(RK=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=s.length;return a===o?s:a>o?s+new Array(a-o+1).join("0"):a>0?s.slice(0,a)+"."+s.slice(a):"0."+new Array(1-a).join("0")+wj(e,Math.max(0,t+a-1))[0]}function rR(e,t){var n=wj(e,t);if(!n)return e+"";var s=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+s:s.length>i+1?s.slice(0,i+1)+"."+s.slice(i+1):s+new Array(i-s.length+2).join("0")}const nR={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:wDe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>rR(e*100,t),r:rR,s:CDe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function sR(e){return e}var iR=Array.prototype.map,aR=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function kDe(e){var t=e.grouping===void 0||e.thousands===void 0?sR:NDe(iR.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?sR:SDe(iR.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(m){m=Mx(m);var f=m.fill,g=m.align,x=m.sign,p=m.symbol,y=m.zero,b=m.width,w=m.comma,N=m.precision,S=m.trim,P=m.type;P==="n"?(w=!0,P="g"):nR[P]||(N===void 0&&(N=12),S=!0,P="g"),(y||f==="0"&&g==="=")&&(y=!0,f="0",g="=");var C=p==="$"?n:p==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():"",k=p==="$"?s:/[%p]/.test(P)?o:"",O=nR[P],I=/[defgprs%]/.test(P);N=N===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function T(E){var D=C,B=k,M,U,H;if(P==="c")B=O(E)+B,E="";else{E=+E;var K=E<0||1/E<0;if(E=isNaN(E)?c:O(Math.abs(E),N),S&&(E=PDe(E)),K&&+E==0&&x!=="+"&&(K=!1),D=(K?x==="("?x:l:x==="-"||x==="("?"":x)+D,B=(P==="s"?aR[8+RK/3]:"")+B+(K&&x==="("?")":""),I){for(M=-1,U=E.length;++M<U;)if(H=E.charCodeAt(M),48>H||H>57){B=(H===46?i+E.slice(M+1):E.slice(M))+B,E=E.slice(0,M);break}}}w&&!y&&(E=t(E,1/0));var W=D.length+E.length+B.length,V=W<b?new Array(b-W+1).join(f):"";switch(w&&y&&(E=t(V+E,V.length?b-B.length:1/0),V=""),g){case"<":E=D+E+B+V;break;case"=":E=D+V+E+B;break;case"^":E=V.slice(0,W=V.length>>1)+D+E+B+V.slice(W);break;default:E=V+D+E+B;break}return a(E)}return T.toString=function(){return m+""},T}function h(m,f){var g=d((m=Mx(m),m.type="f",m)),x=Math.max(-8,Math.min(8,Math.floor(nm(f)/3)))*3,p=Math.pow(10,-x),y=aR[8+x/3];return function(b){return g(p*b)+y}}return{format:d,formatPrefix:h}}var ty,fE,$K;TDe({thousands:",",grouping:[3],currency:["$",""]});function TDe(e){return ty=kDe(e),fE=ty.format,$K=ty.formatPrefix,ty}function ADe(e){return Math.max(0,-nm(Math.abs(e)))}function EDe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(nm(t)/3)))*3-nm(Math.abs(e)))}function ODe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,nm(t)-nm(e))+1}function FK(e,t,n,s){var i=SP(e,t,n),a;switch(s=Mx(s??",f"),s.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(a=EDe(i,o))&&(s.precision=a),$K(s,o)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(a=ODe(i,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=a-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(a=ADe(i))&&(s.precision=a-(s.type==="%")*2);break}}return fE(s)}function Tc(e){var t=e.domain;return e.ticks=function(n){var s=t();return wP(s[0],s[s.length-1],n??10)},e.tickFormat=function(n,s){var i=t();return FK(i[0],i[i.length-1],n??10,s)},e.nice=function(n){n==null&&(n=10);var s=t(),i=0,a=s.length-1,o=s[i],l=s[a],c,d,h=10;for(l<o&&(d=o,o=l,l=d,d=i,i=a,a=d);h-- >0;){if(d=NP(o,l,n),d===c)return s[i]=o,s[a]=l,t(s);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function Nj(){var e=hE();return e.copy=function(){return Ug(e,Nj())},zi.apply(e,arguments),Tc(e)}function zK(e){var t;function n(s){return s==null||isNaN(s=+s)?t:s}return n.invert=n,n.domain=n.range=function(s){return arguments.length?(e=Array.from(s,bj),n):e.slice()},n.unknown=function(s){return arguments.length?(t=s,n):t},n.copy=function(){return zK(e).unknown(t)},e=arguments.length?Array.from(e,bj):[0,1],Tc(n)}function BK(e,t){e=e.slice();var n=0,s=e.length-1,i=e[n],a=e[s],o;return a<i&&(o=n,n=s,s=o,o=i,i=a,a=o),e[n]=t.floor(i),e[s]=t.ceil(a),e}function oR(e){return Math.log(e)}function lR(e){return Math.exp(e)}function MDe(e){return-Math.log(-e)}function DDe(e){return-Math.exp(-e)}function IDe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function LDe(e){return e===10?IDe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function RDe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function cR(e){return(t,n)=>-e(-t,n)}function pE(e){const t=e(oR,lR),n=t.domain;let s=10,i,a;function o(){return i=RDe(s),a=LDe(s),n()[0]<0?(i=cR(i),a=cR(a),e(MDe,DDe)):e(oR,lR),t}return t.base=function(l){return arguments.length?(s=+l,o()):s},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const c=n();let d=c[0],h=c[c.length-1];const m=h<d;m&&([d,h]=[h,d]);let f=i(d),g=i(h),x,p;const y=l==null?10:+l;let b=[];if(!(s%1)&&g-f<y){if(f=Math.floor(f),g=Math.ceil(g),d>0){for(;f<=g;++f)for(x=1;x<s;++x)if(p=f<0?x/a(-f):x*a(f),!(p<d)){if(p>h)break;b.push(p)}}else for(;f<=g;++f)for(x=s-1;x>=1;--x)if(p=f>0?x/a(-f):x*a(f),!(p<d)){if(p>h)break;b.push(p)}b.length*2<y&&(b=wP(d,h,y))}else b=wP(f,g,Math.min(g-f,y)).map(a);return m?b.reverse():b},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=s===10?"s":","),typeof c!="function"&&(!(s%1)&&(c=Mx(c)).precision==null&&(c.trim=!0),c=fE(c)),l===1/0)return c;const d=Math.max(1,s*l/t.ticks().length);return h=>{let m=h/a(Math.round(i(h)));return m*s<s-.5&&(m*=s),m<=d?c(h):""}},t.nice=()=>n(BK(n(),{floor:l=>a(Math.floor(i(l))),ceil:l=>a(Math.ceil(i(l)))})),t}function VK(){const e=pE(Ew()).domain([1,10]);return e.copy=()=>Ug(e,VK()).base(e.base()),zi.apply(e,arguments),e}function dR(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function uR(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function xE(e){var t=1,n=e(dR(t),uR(t));return n.constant=function(s){return arguments.length?e(dR(t=+s),uR(t)):t},Tc(n)}function UK(){var e=xE(Ew());return e.copy=function(){return Ug(e,UK()).constant(e.constant())},zi.apply(e,arguments)}function hR(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function $De(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function FDe(e){return e<0?-e*e:e*e}function gE(e){var t=e(hs,hs),n=1;function s(){return n===1?e(hs,hs):n===.5?e($De,FDe):e(hR(n),hR(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,s()):n},Tc(t)}function vE(){var e=gE(Ew());return e.copy=function(){return Ug(e,vE()).exponent(e.exponent())},zi.apply(e,arguments),e}function zDe(){return vE.apply(null,arguments).exponent(.5)}function mR(e){return Math.sign(e)*e*e}function BDe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function WK(){var e=hE(),t=[0,1],n=!1,s;function i(a){var o=BDe(e(a));return isNaN(o)?s:n?Math.round(o):o}return i.invert=function(a){return e.invert(mR(a))},i.domain=function(a){return arguments.length?(e.domain(a),i):e.domain()},i.range=function(a){return arguments.length?(e.range((t=Array.from(a,bj)).map(mR)),i):t.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(e.clamp(a),i):e.clamp()},i.unknown=function(a){return arguments.length?(s=a,i):s},i.copy=function(){return WK(e.domain(),t).round(n).clamp(e.clamp()).unknown(s)},zi.apply(i,arguments),Tc(i)}function HK(){var e=[],t=[],n=[],s;function i(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=qMe(e,o/l);return a}function a(o){return o==null||isNaN(o=+o)?s:t[Bg(n,o)]}return a.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(nc),i()},a.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},a.unknown=function(o){return arguments.length?(s=o,a):s},a.quantiles=function(){return n.slice()},a.copy=function(){return HK().domain(e).range(t).unknown(s)},zi.apply(a,arguments)}function qK(){var e=0,t=1,n=1,s=[.5],i=[0,1],a;function o(c){return c!=null&&c<=c?i[Bg(s,c,0,n)]:a}function l(){var c=-1;for(s=new Array(n);++c<n;)s[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,l()):i.slice()},o.invertExtent=function(c){var d=i.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,s[0]]:d>=n?[s[n-1],t]:[s[d-1],s[d]]},o.unknown=function(c){return arguments.length&&(a=c),o},o.thresholds=function(){return s.slice()},o.copy=function(){return qK().domain([e,t]).range(i).unknown(a)},zi.apply(Tc(o),arguments)}function KK(){var e=[.5],t=[0,1],n,s=1;function i(a){return a!=null&&a<=a?t[Bg(e,a,0,s)]:n}return i.domain=function(a){return arguments.length?(e=Array.from(a),s=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),s=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return KK().domain(e).range(t).unknown(n)},zi.apply(i,arguments)}const cS=new Date,dS=new Date;function Pn(e,t,n,s){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const o=i(a),l=i.ceil(a);return a-o<l-a?o:l},i.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,l)=>{const c=[];if(a=i.ceil(a),l=l==null?1:Math.floor(l),!(a<o)||!(l>0))return c;let d;do c.push(d=new Date(+a)),t(a,l),e(a);while(d<a&&a<o);return c},i.filter=a=>Pn(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!a(o););else for(;--l>=0;)for(;t(o,1),!a(o););}),n&&(i.count=(a,o)=>(cS.setTime(+a),dS.setTime(+o),e(cS),e(dS),Math.floor(n(cS,dS))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(s?o=>s(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const Sj=Pn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Sj.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Pn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Sj);Sj.range;const Po=1e3,Ci=Po*60,Co=Ci*60,Xo=Co*24,yE=Xo*7,fR=Xo*30,uS=Xo*365,id=Pn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Po)},(e,t)=>(t-e)/Po,e=>e.getUTCSeconds());id.range;const jE=Pn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Po)},(e,t)=>{e.setTime(+e+t*Ci)},(e,t)=>(t-e)/Ci,e=>e.getMinutes());jE.range;const bE=Pn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ci)},(e,t)=>(t-e)/Ci,e=>e.getUTCMinutes());bE.range;const wE=Pn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Po-e.getMinutes()*Ci)},(e,t)=>{e.setTime(+e+t*Co)},(e,t)=>(t-e)/Co,e=>e.getHours());wE.range;const NE=Pn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Co)},(e,t)=>(t-e)/Co,e=>e.getUTCHours());NE.range;const Wg=Pn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ci)/Xo,e=>e.getDate()-1);Wg.range;const Ow=Pn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Xo,e=>e.getUTCDate()-1);Ow.range;const GK=Pn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Xo,e=>Math.floor(e/Xo));GK.range;function ou(e){return Pn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Ci)/yE)}const Mw=ou(0),_j=ou(1),VDe=ou(2),UDe=ou(3),sm=ou(4),WDe=ou(5),HDe=ou(6);Mw.range;_j.range;VDe.range;UDe.range;sm.range;WDe.range;HDe.range;function lu(e){return Pn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/yE)}const Dw=lu(0),Pj=lu(1),qDe=lu(2),KDe=lu(3),im=lu(4),GDe=lu(5),ZDe=lu(6);Dw.range;Pj.range;qDe.range;KDe.range;im.range;GDe.range;ZDe.range;const SE=Pn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());SE.range;const _E=Pn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());_E.range;const Qo=Pn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Qo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Pn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Qo.range;const Jo=Pn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Jo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Pn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Jo.range;function ZK(e,t,n,s,i,a){const o=[[id,1,Po],[id,5,5*Po],[id,15,15*Po],[id,30,30*Po],[a,1,Ci],[a,5,5*Ci],[a,15,15*Ci],[a,30,30*Ci],[i,1,Co],[i,3,3*Co],[i,6,6*Co],[i,12,12*Co],[s,1,Xo],[s,2,2*Xo],[n,1,yE],[t,1,fR],[t,3,3*fR],[e,1,uS]];function l(d,h,m){const f=h<d;f&&([d,h]=[h,d]);const g=m&&typeof m.range=="function"?m:c(d,h,m),x=g?g.range(d,+h+1):[];return f?x.reverse():x}function c(d,h,m){const f=Math.abs(h-d)/m,g=oE(([,,y])=>y).right(o,f);if(g===o.length)return e.every(SP(d/uS,h/uS,m));if(g===0)return Sj.every(Math.max(SP(d,h,m),1));const[x,p]=o[f/o[g-1][2]<o[g][2]/f?g-1:g];return x.every(p)}return[l,c]}const[YDe,XDe]=ZK(Jo,_E,Dw,GK,NE,bE),[QDe,JDe]=ZK(Qo,SE,Mw,Wg,wE,jE);function hS(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function mS(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Mf(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function eIe(e){var t=e.dateTime,n=e.date,s=e.time,i=e.periods,a=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=Df(i),h=If(i),m=Df(a),f=If(a),g=Df(o),x=If(o),p=Df(l),y=If(l),b=Df(c),w=If(c),N={a:K,A:W,b:V,B:z,c:null,d:jR,e:jR,f:NIe,g:MIe,G:IIe,H:jIe,I:bIe,j:wIe,L:YK,m:SIe,M:_Ie,p:q,q:J,Q:NR,s:SR,S:PIe,u:CIe,U:kIe,V:TIe,w:AIe,W:EIe,x:null,X:null,y:OIe,Y:DIe,Z:LIe,"%":wR},S={a:pe,A:ye,b:Ne,B:ke,c:null,d:bR,e:bR,f:zIe,g:YIe,G:QIe,H:RIe,I:$Ie,j:FIe,L:QK,m:BIe,M:VIe,p:Ee,q:We,Q:NR,s:SR,S:UIe,u:WIe,U:HIe,V:qIe,w:KIe,W:GIe,x:null,X:null,y:ZIe,Y:XIe,Z:JIe,"%":wR},P={a:T,A:E,b:D,B,c:M,d:vR,e:vR,f:xIe,g:gR,G:xR,H:yR,I:yR,j:hIe,L:pIe,m:uIe,M:mIe,p:I,q:dIe,Q:vIe,s:yIe,S:fIe,u:iIe,U:aIe,V:oIe,w:sIe,W:lIe,x:U,X:H,y:gR,Y:xR,Z:cIe,"%":gIe};N.x=C(n,N),N.X=C(s,N),N.c=C(t,N),S.x=C(n,S),S.X=C(s,S),S.c=C(t,S);function C(Se,Me){return function(Ie){var $=[],ee=-1,X=0,Ce=Se.length,$e,He,lt;for(Ie instanceof Date||(Ie=new Date(+Ie));++ee<Ce;)Se.charCodeAt(ee)===37&&($.push(Se.slice(X,ee)),(He=pR[$e=Se.charAt(++ee)])!=null?$e=Se.charAt(++ee):He=$e==="e"?" ":"0",(lt=Me[$e])&&($e=lt(Ie,He)),$.push($e),X=ee+1);return $.push(Se.slice(X,ee)),$.join("")}}function k(Se,Me){return function(Ie){var $=Mf(1900,void 0,1),ee=O($,Se,Ie+="",0),X,Ce;if(ee!=Ie.length)return null;if("Q"in $)return new Date($.Q);if("s"in $)return new Date($.s*1e3+("L"in $?$.L:0));if(Me&&!("Z"in $)&&($.Z=0),"p"in $&&($.H=$.H%12+$.p*12),$.m===void 0&&($.m="q"in $?$.q:0),"V"in $){if($.V<1||$.V>53)return null;"w"in $||($.w=1),"Z"in $?(X=mS(Mf($.y,0,1)),Ce=X.getUTCDay(),X=Ce>4||Ce===0?Pj.ceil(X):Pj(X),X=Ow.offset(X,($.V-1)*7),$.y=X.getUTCFullYear(),$.m=X.getUTCMonth(),$.d=X.getUTCDate()+($.w+6)%7):(X=hS(Mf($.y,0,1)),Ce=X.getDay(),X=Ce>4||Ce===0?_j.ceil(X):_j(X),X=Wg.offset(X,($.V-1)*7),$.y=X.getFullYear(),$.m=X.getMonth(),$.d=X.getDate()+($.w+6)%7)}else("W"in $||"U"in $)&&("w"in $||($.w="u"in $?$.u%7:"W"in $?1:0),Ce="Z"in $?mS(Mf($.y,0,1)).getUTCDay():hS(Mf($.y,0,1)).getDay(),$.m=0,$.d="W"in $?($.w+6)%7+$.W*7-(Ce+5)%7:$.w+$.U*7-(Ce+6)%7);return"Z"in $?($.H+=$.Z/100|0,$.M+=$.Z%100,mS($)):hS($)}}function O(Se,Me,Ie,$){for(var ee=0,X=Me.length,Ce=Ie.length,$e,He;ee<X;){if($>=Ce)return-1;if($e=Me.charCodeAt(ee++),$e===37){if($e=Me.charAt(ee++),He=P[$e in pR?Me.charAt(ee++):$e],!He||($=He(Se,Ie,$))<0)return-1}else if($e!=Ie.charCodeAt($++))return-1}return $}function I(Se,Me,Ie){var $=d.exec(Me.slice(Ie));return $?(Se.p=h.get($[0].toLowerCase()),Ie+$[0].length):-1}function T(Se,Me,Ie){var $=g.exec(Me.slice(Ie));return $?(Se.w=x.get($[0].toLowerCase()),Ie+$[0].length):-1}function E(Se,Me,Ie){var $=m.exec(Me.slice(Ie));return $?(Se.w=f.get($[0].toLowerCase()),Ie+$[0].length):-1}function D(Se,Me,Ie){var $=b.exec(Me.slice(Ie));return $?(Se.m=w.get($[0].toLowerCase()),Ie+$[0].length):-1}function B(Se,Me,Ie){var $=p.exec(Me.slice(Ie));return $?(Se.m=y.get($[0].toLowerCase()),Ie+$[0].length):-1}function M(Se,Me,Ie){return O(Se,t,Me,Ie)}function U(Se,Me,Ie){return O(Se,n,Me,Ie)}function H(Se,Me,Ie){return O(Se,s,Me,Ie)}function K(Se){return o[Se.getDay()]}function W(Se){return a[Se.getDay()]}function V(Se){return c[Se.getMonth()]}function z(Se){return l[Se.getMonth()]}function q(Se){return i[+(Se.getHours()>=12)]}function J(Se){return 1+~~(Se.getMonth()/3)}function pe(Se){return o[Se.getUTCDay()]}function ye(Se){return a[Se.getUTCDay()]}function Ne(Se){return c[Se.getUTCMonth()]}function ke(Se){return l[Se.getUTCMonth()]}function Ee(Se){return i[+(Se.getUTCHours()>=12)]}function We(Se){return 1+~~(Se.getUTCMonth()/3)}return{format:function(Se){var Me=C(Se+="",N);return Me.toString=function(){return Se},Me},parse:function(Se){var Me=k(Se+="",!1);return Me.toString=function(){return Se},Me},utcFormat:function(Se){var Me=C(Se+="",S);return Me.toString=function(){return Se},Me},utcParse:function(Se){var Me=k(Se+="",!0);return Me.toString=function(){return Se},Me}}}var pR={"-":"",_:" ",0:"0"},Mn=/^\s*\d+/,tIe=/^%/,rIe=/[\\^$*+?|[\]().{}]/g;function sr(e,t,n){var s=e<0?"-":"",i=(s?-e:e)+"",a=i.length;return s+(a<n?new Array(n-a+1).join(t)+i:i)}function nIe(e){return e.replace(rIe,"\\$&")}function Df(e){return new RegExp("^(?:"+e.map(nIe).join("|")+")","i")}function If(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function sIe(e,t,n){var s=Mn.exec(t.slice(n,n+1));return s?(e.w=+s[0],n+s[0].length):-1}function iIe(e,t,n){var s=Mn.exec(t.slice(n,n+1));return s?(e.u=+s[0],n+s[0].length):-1}function aIe(e,t,n){var s=Mn.exec(t.slice(n,n+2));return s?(e.U=+s[0],n+s[0].length):-1}function oIe(e,t,n){var s=Mn.exec(t.slice(n,n+2));return s?(e.V=+s[0],n+s[0].length):-1}function lIe(e,t,n){var s=Mn.exec(t.slice(n,n+2));return s?(e.W=+s[0],n+s[0].length):-1}function xR(e,t,n){var s=Mn.exec(t.slice(n,n+4));return s?(e.y=+s[0],n+s[0].length):-1}function gR(e,t,n){var s=Mn.exec(t.slice(n,n+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),n+s[0].length):-1}function cIe(e,t,n){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),n+s[0].length):-1}function dIe(e,t,n){var s=Mn.exec(t.slice(n,n+1));return s?(e.q=s[0]*3-3,n+s[0].length):-1}function uIe(e,t,n){var s=Mn.exec(t.slice(n,n+2));return s?(e.m=s[0]-1,n+s[0].length):-1}function vR(e,t,n){var s=Mn.exec(t.slice(n,n+2));return s?(e.d=+s[0],n+s[0].length):-1}function hIe(e,t,n){var s=Mn.exec(t.slice(n,n+3));return s?(e.m=0,e.d=+s[0],n+s[0].length):-1}function yR(e,t,n){var s=Mn.exec(t.slice(n,n+2));return s?(e.H=+s[0],n+s[0].length):-1}function mIe(e,t,n){var s=Mn.exec(t.slice(n,n+2));return s?(e.M=+s[0],n+s[0].length):-1}function fIe(e,t,n){var s=Mn.exec(t.slice(n,n+2));return s?(e.S=+s[0],n+s[0].length):-1}function pIe(e,t,n){var s=Mn.exec(t.slice(n,n+3));return s?(e.L=+s[0],n+s[0].length):-1}function xIe(e,t,n){var s=Mn.exec(t.slice(n,n+6));return s?(e.L=Math.floor(s[0]/1e3),n+s[0].length):-1}function gIe(e,t,n){var s=tIe.exec(t.slice(n,n+1));return s?n+s[0].length:-1}function vIe(e,t,n){var s=Mn.exec(t.slice(n));return s?(e.Q=+s[0],n+s[0].length):-1}function yIe(e,t,n){var s=Mn.exec(t.slice(n));return s?(e.s=+s[0],n+s[0].length):-1}function jR(e,t){return sr(e.getDate(),t,2)}function jIe(e,t){return sr(e.getHours(),t,2)}function bIe(e,t){return sr(e.getHours()%12||12,t,2)}function wIe(e,t){return sr(1+Wg.count(Qo(e),e),t,3)}function YK(e,t){return sr(e.getMilliseconds(),t,3)}function NIe(e,t){return YK(e,t)+"000"}function SIe(e,t){return sr(e.getMonth()+1,t,2)}function _Ie(e,t){return sr(e.getMinutes(),t,2)}function PIe(e,t){return sr(e.getSeconds(),t,2)}function CIe(e){var t=e.getDay();return t===0?7:t}function kIe(e,t){return sr(Mw.count(Qo(e)-1,e),t,2)}function XK(e){var t=e.getDay();return t>=4||t===0?sm(e):sm.ceil(e)}function TIe(e,t){return e=XK(e),sr(sm.count(Qo(e),e)+(Qo(e).getDay()===4),t,2)}function AIe(e){return e.getDay()}function EIe(e,t){return sr(_j.count(Qo(e)-1,e),t,2)}function OIe(e,t){return sr(e.getFullYear()%100,t,2)}function MIe(e,t){return e=XK(e),sr(e.getFullYear()%100,t,2)}function DIe(e,t){return sr(e.getFullYear()%1e4,t,4)}function IIe(e,t){var n=e.getDay();return e=n>=4||n===0?sm(e):sm.ceil(e),sr(e.getFullYear()%1e4,t,4)}function LIe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+sr(t/60|0,"0",2)+sr(t%60,"0",2)}function bR(e,t){return sr(e.getUTCDate(),t,2)}function RIe(e,t){return sr(e.getUTCHours(),t,2)}function $Ie(e,t){return sr(e.getUTCHours()%12||12,t,2)}function FIe(e,t){return sr(1+Ow.count(Jo(e),e),t,3)}function QK(e,t){return sr(e.getUTCMilliseconds(),t,3)}function zIe(e,t){return QK(e,t)+"000"}function BIe(e,t){return sr(e.getUTCMonth()+1,t,2)}function VIe(e,t){return sr(e.getUTCMinutes(),t,2)}function UIe(e,t){return sr(e.getUTCSeconds(),t,2)}function WIe(e){var t=e.getUTCDay();return t===0?7:t}function HIe(e,t){return sr(Dw.count(Jo(e)-1,e),t,2)}function JK(e){var t=e.getUTCDay();return t>=4||t===0?im(e):im.ceil(e)}function qIe(e,t){return e=JK(e),sr(im.count(Jo(e),e)+(Jo(e).getUTCDay()===4),t,2)}function KIe(e){return e.getUTCDay()}function GIe(e,t){return sr(Pj.count(Jo(e)-1,e),t,2)}function ZIe(e,t){return sr(e.getUTCFullYear()%100,t,2)}function YIe(e,t){return e=JK(e),sr(e.getUTCFullYear()%100,t,2)}function XIe(e,t){return sr(e.getUTCFullYear()%1e4,t,4)}function QIe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?im(e):im.ceil(e),sr(e.getUTCFullYear()%1e4,t,4)}function JIe(){return"+0000"}function wR(){return"%"}function NR(e){return+e}function SR(e){return Math.floor(+e/1e3)}var ku,eG,tG;e3e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function e3e(e){return ku=eIe(e),eG=ku.format,ku.parse,tG=ku.utcFormat,ku.utcParse,ku}function t3e(e){return new Date(e)}function r3e(e){return e instanceof Date?+e:+new Date(+e)}function PE(e,t,n,s,i,a,o,l,c,d){var h=hE(),m=h.invert,f=h.domain,g=d(".%L"),x=d(":%S"),p=d("%I:%M"),y=d("%I %p"),b=d("%a %d"),w=d("%b %d"),N=d("%B"),S=d("%Y");function P(C){return(c(C)<C?g:l(C)<C?x:o(C)<C?p:a(C)<C?y:s(C)<C?i(C)<C?b:w:n(C)<C?N:S)(C)}return h.invert=function(C){return new Date(m(C))},h.domain=function(C){return arguments.length?f(Array.from(C,r3e)):f().map(t3e)},h.ticks=function(C){var k=f();return e(k[0],k[k.length-1],C??10)},h.tickFormat=function(C,k){return k==null?P:d(k)},h.nice=function(C){var k=f();return(!C||typeof C.range!="function")&&(C=t(k[0],k[k.length-1],C??10)),C?f(BK(k,C)):h},h.copy=function(){return Ug(h,PE(e,t,n,s,i,a,o,l,c,d))},h}function n3e(){return zi.apply(PE(QDe,JDe,Qo,SE,Mw,Wg,wE,jE,id,eG).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function s3e(){return zi.apply(PE(YDe,XDe,Jo,_E,Dw,Ow,NE,bE,id,tG).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Iw(){var e=0,t=1,n,s,i,a,o=hs,l=!1,c;function d(m){return m==null||isNaN(m=+m)?c:o(i===0?.5:(m=(a(m)-n)*i,l?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([e,t]=m,n=a(e=+e),s=a(t=+t),i=n===s?0:1/(s-n),d):[e,t]},d.clamp=function(m){return arguments.length?(l=!!m,d):l},d.interpolator=function(m){return arguments.length?(o=m,d):o};function h(m){return function(f){var g,x;return arguments.length?([g,x]=f,o=m(g,x),d):[o(0),o(1)]}}return d.range=h(Xm),d.rangeRound=h(uE),d.unknown=function(m){return arguments.length?(c=m,d):c},function(m){return a=m,n=m(e),s=m(t),i=n===s?0:1/(s-n),d}}function Ac(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function rG(){var e=Tc(Iw()(hs));return e.copy=function(){return Ac(e,rG())},al.apply(e,arguments)}function nG(){var e=pE(Iw()).domain([1,10]);return e.copy=function(){return Ac(e,nG()).base(e.base())},al.apply(e,arguments)}function sG(){var e=xE(Iw());return e.copy=function(){return Ac(e,sG()).constant(e.constant())},al.apply(e,arguments)}function CE(){var e=gE(Iw());return e.copy=function(){return Ac(e,CE()).exponent(e.exponent())},al.apply(e,arguments)}function i3e(){return CE.apply(null,arguments).exponent(.5)}function iG(){var e=[],t=hs;function n(s){if(s!=null&&!isNaN(s=+s))return t((Bg(e,s,1)-1)/(e.length-1))}return n.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let i of s)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(nc),n},n.interpolator=function(s){return arguments.length?(t=s,n):t},n.range=function(){return e.map((s,i)=>t(i/(e.length-1)))},n.quantiles=function(s){return Array.from({length:s+1},(i,a)=>HMe(e,a/s))},n.copy=function(){return iG(t).domain(e)},al.apply(n,arguments)}function Lw(){var e=0,t=.5,n=1,s=1,i,a,o,l,c,d=hs,h,m=!1,f;function g(p){return isNaN(p=+p)?f:(p=.5+((p=+h(p))-a)*(s*p<s*a?l:c),d(m?Math.max(0,Math.min(1,p)):p))}g.domain=function(p){return arguments.length?([e,t,n]=p,i=h(e=+e),a=h(t=+t),o=h(n=+n),l=i===a?0:.5/(a-i),c=a===o?0:.5/(o-a),s=a<i?-1:1,g):[e,t,n]},g.clamp=function(p){return arguments.length?(m=!!p,g):m},g.interpolator=function(p){return arguments.length?(d=p,g):d};function x(p){return function(y){var b,w,N;return arguments.length?([b,w,N]=y,d=gDe(p,[b,w,N]),g):[d(0),d(.5),d(1)]}}return g.range=x(Xm),g.rangeRound=x(uE),g.unknown=function(p){return arguments.length?(f=p,g):f},function(p){return h=p,i=p(e),a=p(t),o=p(n),l=i===a?0:.5/(a-i),c=a===o?0:.5/(o-a),s=a<i?-1:1,g}}function aG(){var e=Tc(Lw()(hs));return e.copy=function(){return Ac(e,aG())},al.apply(e,arguments)}function oG(){var e=pE(Lw()).domain([.1,1,10]);return e.copy=function(){return Ac(e,oG()).base(e.base())},al.apply(e,arguments)}function lG(){var e=xE(Lw());return e.copy=function(){return Ac(e,lG()).constant(e.constant())},al.apply(e,arguments)}function kE(){var e=gE(Lw());return e.copy=function(){return Ac(e,kE()).exponent(e.exponent())},al.apply(e,arguments)}function a3e(){return kE.apply(null,arguments).exponent(.5)}const _R=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Tx,scaleDiverging:aG,scaleDivergingLog:oG,scaleDivergingPow:kE,scaleDivergingSqrt:a3e,scaleDivergingSymlog:lG,scaleIdentity:zK,scaleImplicit:_P,scaleLinear:Nj,scaleLog:VK,scaleOrdinal:lE,scalePoint:yp,scalePow:vE,scaleQuantile:HK,scaleQuantize:qK,scaleRadial:WK,scaleSequential:rG,scaleSequentialLog:nG,scaleSequentialPow:CE,scaleSequentialQuantile:iG,scaleSequentialSqrt:i3e,scaleSequentialSymlog:sG,scaleSqrt:zDe,scaleSymlog:UK,scaleThreshold:KK,scaleTime:n3e,scaleUtc:s3e,tickFormat:FK},Symbol.toStringTag,{value:"Module"}));var o3e=Bm;function l3e(e,t,n){for(var s=-1,i=e.length;++s<i;){var a=e[s],o=t(a);if(o!=null&&(l===void 0?o===o&&!o3e(o):n(o,l)))var l=o,c=a}return c}var cG=l3e;function c3e(e,t){return e>t}var d3e=c3e,u3e=cG,h3e=d3e,m3e=Ym;function f3e(e){return e&&e.length?u3e(e,m3e,h3e):void 0}var p3e=f3e;const Rl=hr(p3e);function x3e(e,t){return e<t}var g3e=x3e,v3e=cG,y3e=g3e,j3e=Ym;function b3e(e){return e&&e.length?v3e(e,j3e,y3e):void 0}var w3e=b3e;const Rw=hr(w3e);var N3e=VA,S3e=kc,_3e=gK,P3e=Is;function C3e(e,t){var n=P3e(e)?N3e:_3e;return n(e,S3e(t))}var k3e=C3e,T3e=pK,A3e=k3e;function E3e(e,t){return T3e(A3e(e,t),1)}var O3e=E3e;const M3e=hr(O3e);var D3e=nE;function I3e(e,t){return D3e(e,t)}var L3e=I3e;const am=hr(L3e);var Qm=1e9,R3e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},AE,$r=!0,Ri="[DecimalError] ",Sd=Ri+"Invalid argument: ",TE=Ri+"Exponent out of range: ",Jm=Math.floor,Zc=Math.pow,$3e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ks,Tn=1e7,kr=7,dG=9007199254740991,Cj=Jm(dG/kr),ot={};ot.absoluteValue=ot.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};ot.comparedTo=ot.cmp=function(e){var t,n,s,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(s=a.d.length,i=e.d.length,t=0,n=s<i?s:i;t<n;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return s===i?0:s>i^a.s<0?1:-1};ot.decimalPlaces=ot.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*kr;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};ot.dividedBy=ot.div=function(e){return Ro(this,new this.constructor(e))};ot.dividedToIntegerBy=ot.idiv=function(e){var t=this,n=t.constructor;return vr(Ro(t,new n(e),0,1),n.precision)};ot.equals=ot.eq=function(e){return!this.cmp(e)};ot.exponent=function(){return fn(this)};ot.greaterThan=ot.gt=function(e){return this.cmp(e)>0};ot.greaterThanOrEqualTo=ot.gte=function(e){return this.cmp(e)>=0};ot.isInteger=ot.isint=function(){return this.e>this.d.length-2};ot.isNegative=ot.isneg=function(){return this.s<0};ot.isPositive=ot.ispos=function(){return this.s>0};ot.isZero=function(){return this.s===0};ot.lessThan=ot.lt=function(e){return this.cmp(e)<0};ot.lessThanOrEqualTo=ot.lte=function(e){return this.cmp(e)<1};ot.logarithm=ot.log=function(e){var t,n=this,s=n.constructor,i=s.precision,a=i+5;if(e===void 0)e=new s(10);else if(e=new s(e),e.s<1||e.eq(Ks))throw Error(Ri+"NaN");if(n.s<1)throw Error(Ri+(n.s?"NaN":"-Infinity"));return n.eq(Ks)?new s(0):($r=!1,t=Ro(Dx(n,a),Dx(e,a),a),$r=!0,vr(t,i))};ot.minus=ot.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?mG(t,e):uG(t,(e.s=-e.s,e))};ot.modulo=ot.mod=function(e){var t,n=this,s=n.constructor,i=s.precision;if(e=new s(e),!e.s)throw Error(Ri+"NaN");return n.s?($r=!1,t=Ro(n,e,0,1).times(e),$r=!0,n.minus(t)):vr(new s(n),i)};ot.naturalExponential=ot.exp=function(){return hG(this)};ot.naturalLogarithm=ot.ln=function(){return Dx(this)};ot.negated=ot.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};ot.plus=ot.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?uG(t,e):mG(t,(e.s=-e.s,e))};ot.precision=ot.sd=function(e){var t,n,s,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Sd+e);if(t=fn(i)+1,s=i.d.length-1,n=s*kr+1,s=i.d[s],s){for(;s%10==0;s/=10)n--;for(s=i.d[0];s>=10;s/=10)n++}return e&&t>n?t:n};ot.squareRoot=ot.sqrt=function(){var e,t,n,s,i,a,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Ri+"NaN")}for(e=fn(l),$r=!1,i=Math.sqrt(+l),i==0||i==1/0?(t=Oa(l.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=Jm((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),s=new c(t)):s=new c(i.toString()),n=c.precision,i=o=n+3;;)if(a=s,s=a.plus(Ro(l,a,o+2)).times(.5),Oa(a.d).slice(0,o)===(t=Oa(s.d)).slice(0,o)){if(t=t.slice(o-3,o+1),i==o&&t=="4999"){if(vr(a,n+1,0),a.times(a).eq(l)){s=a;break}}else if(t!="9999")break;o+=4}return $r=!0,vr(s,n)};ot.times=ot.mul=function(e){var t,n,s,i,a,o,l,c,d,h=this,m=h.constructor,f=h.d,g=(e=new m(e)).d;if(!h.s||!e.s)return new m(0);for(e.s*=h.s,n=h.e+e.e,c=f.length,d=g.length,c<d&&(a=f,f=g,g=a,o=c,c=d,d=o),a=[],o=c+d,s=o;s--;)a.push(0);for(s=d;--s>=0;){for(t=0,i=c+s;i>s;)l=a[i]+g[s]*f[i-s-1]+t,a[i--]=l%Tn|0,t=l/Tn|0;a[i]=(a[i]+t)%Tn|0}for(;!a[--o];)a.pop();return t?++n:a.shift(),e.d=a,e.e=n,$r?vr(e,m.precision):e};ot.toDecimalPlaces=ot.todp=function(e,t){var n=this,s=n.constructor;return n=new s(n),e===void 0?n:(Za(e,0,Qm),t===void 0?t=s.rounding:Za(t,0,8),vr(n,e+fn(n)+1,t))};ot.toExponential=function(e,t){var n,s=this,i=s.constructor;return e===void 0?n=Zd(s,!0):(Za(e,0,Qm),t===void 0?t=i.rounding:Za(t,0,8),s=vr(new i(s),e+1,t),n=Zd(s,!0,e+1)),n};ot.toFixed=function(e,t){var n,s,i=this,a=i.constructor;return e===void 0?Zd(i):(Za(e,0,Qm),t===void 0?t=a.rounding:Za(t,0,8),s=vr(new a(i),e+fn(i)+1,t),n=Zd(s.abs(),!1,e+fn(s)+1),i.isneg()&&!i.isZero()?"-"+n:n)};ot.toInteger=ot.toint=function(){var e=this,t=e.constructor;return vr(new t(e),fn(e)+1,t.rounding)};ot.toNumber=function(){return+this};ot.toPower=ot.pow=function(e){var t,n,s,i,a,o,l=this,c=l.constructor,d=12,h=+(e=new c(e));if(!e.s)return new c(Ks);if(l=new c(l),!l.s){if(e.s<1)throw Error(Ri+"Infinity");return l}if(l.eq(Ks))return l;if(s=c.precision,e.eq(Ks))return vr(l,s);if(t=e.e,n=e.d.length-1,o=t>=n,a=l.s,o){if((n=h<0?-h:h)<=dG){for(i=new c(Ks),t=Math.ceil(s/kr+4),$r=!1;n%2&&(i=i.times(l),CR(i.d,t)),n=Jm(n/2),n!==0;)l=l.times(l),CR(l.d,t);return $r=!0,e.s<0?new c(Ks).div(i):vr(i,s)}}else if(a<0)throw Error(Ri+"NaN");return a=a<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,$r=!1,i=e.times(Dx(l,s+d)),$r=!0,i=hG(i),i.s=a,i};ot.toPrecision=function(e,t){var n,s,i=this,a=i.constructor;return e===void 0?(n=fn(i),s=Zd(i,n<=a.toExpNeg||n>=a.toExpPos)):(Za(e,1,Qm),t===void 0?t=a.rounding:Za(t,0,8),i=vr(new a(i),e,t),n=fn(i),s=Zd(i,e<=n||n<=a.toExpNeg,e)),s};ot.toSignificantDigits=ot.tosd=function(e,t){var n=this,s=n.constructor;return e===void 0?(e=s.precision,t=s.rounding):(Za(e,1,Qm),t===void 0?t=s.rounding:Za(t,0,8)),vr(new s(n),e,t)};ot.toString=ot.valueOf=ot.val=ot.toJSON=ot[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=fn(e),n=e.constructor;return Zd(e,t<=n.toExpNeg||t>=n.toExpPos)};function uG(e,t){var n,s,i,a,o,l,c,d,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),$r?vr(t,m):t;if(c=e.d,d=t.d,o=e.e,i=t.e,c=c.slice(),a=o-i,a){for(a<0?(s=c,a=-a,l=d.length):(s=d,i=o,l=c.length),o=Math.ceil(m/kr),l=o>l?o+1:l+1,a>l&&(a=l,s.length=1),s.reverse();a--;)s.push(0);s.reverse()}for(l=c.length,a=d.length,l-a<0&&(a=l,s=d,d=c,c=s),n=0;a;)n=(c[--a]=c[a]+d[a]+n)/Tn|0,c[a]%=Tn;for(n&&(c.unshift(n),++i),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=i,$r?vr(t,m):t}function Za(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Sd+e)}function Oa(e){var t,n,s,i=e.length-1,a="",o=e[0];if(i>0){for(a+=o,t=1;t<i;t++)s=e[t]+"",n=kr-s.length,n&&(a+=yl(n)),a+=s;o=e[t],s=o+"",n=kr-s.length,n&&(a+=yl(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var Ro=function(){function e(s,i){var a,o=0,l=s.length;for(s=s.slice();l--;)a=s[l]*i+o,s[l]=a%Tn|0,o=a/Tn|0;return o&&s.unshift(o),s}function t(s,i,a,o){var l,c;if(a!=o)c=a>o?1:-1;else for(l=c=0;l<a;l++)if(s[l]!=i[l]){c=s[l]>i[l]?1:-1;break}return c}function n(s,i,a){for(var o=0;a--;)s[a]-=o,o=s[a]<i[a]?1:0,s[a]=o*Tn+s[a]-i[a];for(;!s[0]&&s.length>1;)s.shift()}return function(s,i,a,o){var l,c,d,h,m,f,g,x,p,y,b,w,N,S,P,C,k,O,I=s.constructor,T=s.s==i.s?1:-1,E=s.d,D=i.d;if(!s.s)return new I(s);if(!i.s)throw Error(Ri+"Division by zero");for(c=s.e-i.e,k=D.length,P=E.length,g=new I(T),x=g.d=[],d=0;D[d]==(E[d]||0);)++d;if(D[d]>(E[d]||0)&&--c,a==null?w=a=I.precision:o?w=a+(fn(s)-fn(i))+1:w=a,w<0)return new I(0);if(w=w/kr+2|0,d=0,k==1)for(h=0,D=D[0],w++;(d<P||h)&&w--;d++)N=h*Tn+(E[d]||0),x[d]=N/D|0,h=N%D|0;else{for(h=Tn/(D[0]+1)|0,h>1&&(D=e(D,h),E=e(E,h),k=D.length,P=E.length),S=k,p=E.slice(0,k),y=p.length;y<k;)p[y++]=0;O=D.slice(),O.unshift(0),C=D[0],D[1]>=Tn/2&&++C;do h=0,l=t(D,p,k,y),l<0?(b=p[0],k!=y&&(b=b*Tn+(p[1]||0)),h=b/C|0,h>1?(h>=Tn&&(h=Tn-1),m=e(D,h),f=m.length,y=p.length,l=t(m,p,f,y),l==1&&(h--,n(m,k<f?O:D,f))):(h==0&&(l=h=1),m=D.slice()),f=m.length,f<y&&m.unshift(0),n(p,m,y),l==-1&&(y=p.length,l=t(D,p,k,y),l<1&&(h++,n(p,k<y?O:D,y))),y=p.length):l===0&&(h++,p=[0]),x[d++]=h,l&&p[0]?p[y++]=E[S]||0:(p=[E[S]],y=1);while((S++<P||p[0]!==void 0)&&w--)}return x[0]||x.shift(),g.e=c,vr(g,o?a+fn(g)+1:a)}}();function hG(e,t){var n,s,i,a,o,l,c=0,d=0,h=e.constructor,m=h.precision;if(fn(e)>16)throw Error(TE+fn(e));if(!e.s)return new h(Ks);for(t==null?($r=!1,l=m):l=t,o=new h(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(s=Math.log(Zc(2,d))/Math.LN10*2+5|0,l+=s,n=i=a=new h(Ks),h.precision=l;;){if(i=vr(i.times(e),l),n=n.times(++c),o=a.plus(Ro(i,n,l)),Oa(o.d).slice(0,l)===Oa(a.d).slice(0,l)){for(;d--;)a=vr(a.times(a),l);return h.precision=m,t==null?($r=!0,vr(a,m)):a}a=o}}function fn(e){for(var t=e.e*kr,n=e.d[0];n>=10;n/=10)t++;return t}function fS(e,t,n){if(t>e.LN10.sd())throw $r=!0,n&&(e.precision=n),Error(Ri+"LN10 precision limit exceeded");return vr(new e(e.LN10),t)}function yl(e){for(var t="";e--;)t+="0";return t}function Dx(e,t){var n,s,i,a,o,l,c,d,h,m=1,f=10,g=e,x=g.d,p=g.constructor,y=p.precision;if(g.s<1)throw Error(Ri+(g.s?"NaN":"-Infinity"));if(g.eq(Ks))return new p(0);if(t==null?($r=!1,d=y):d=t,g.eq(10))return t==null&&($r=!0),fS(p,d);if(d+=f,p.precision=d,n=Oa(x),s=n.charAt(0),a=fn(g),Math.abs(a)<15e14){for(;s<7&&s!=1||s==1&&n.charAt(1)>3;)g=g.times(e),n=Oa(g.d),s=n.charAt(0),m++;a=fn(g),s>1?(g=new p("0."+n),a++):g=new p(s+"."+n.slice(1))}else return c=fS(p,d+2,y).times(a+""),g=Dx(new p(s+"."+n.slice(1)),d-f).plus(c),p.precision=y,t==null?($r=!0,vr(g,y)):g;for(l=o=g=Ro(g.minus(Ks),g.plus(Ks),d),h=vr(g.times(g),d),i=3;;){if(o=vr(o.times(h),d),c=l.plus(Ro(o,new p(i),d)),Oa(c.d).slice(0,d)===Oa(l.d).slice(0,d))return l=l.times(2),a!==0&&(l=l.plus(fS(p,d+2,y).times(a+""))),l=Ro(l,new p(m),d),p.precision=y,t==null?($r=!0,vr(l,y)):l;l=c,i+=2}}function PR(e,t){var n,s,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(n<0&&(n=s),n+=+t.slice(s+1),t=t.substring(0,s)):n<0&&(n=t.length),s=0;t.charCodeAt(s)===48;)++s;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(s,i),t){if(i-=s,n=n-s-1,e.e=Jm(n/kr),e.d=[],s=(n+1)%kr,n<0&&(s+=kr),s<i){for(s&&e.d.push(+t.slice(0,s)),i-=kr;s<i;)e.d.push(+t.slice(s,s+=kr));t=t.slice(s),s=kr-t.length}else s-=i;for(;s--;)t+="0";if(e.d.push(+t),$r&&(e.e>Cj||e.e<-Cj))throw Error(TE+n)}else e.s=0,e.e=0,e.d=[0];return e}function vr(e,t,n){var s,i,a,o,l,c,d,h,m=e.d;for(o=1,a=m[0];a>=10;a/=10)o++;if(s=t-o,s<0)s+=kr,i=t,d=m[h=0];else{if(h=Math.ceil((s+1)/kr),a=m.length,h>=a)return e;for(d=a=m[h],o=1;a>=10;a/=10)o++;s%=kr,i=s-kr+o}if(n!==void 0&&(a=Zc(10,o-i-1),l=d/a%10|0,c=t<0||m[h+1]!==void 0||d%a,c=n<4?(l||c)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(s>0?i>0?d/Zc(10,o-i):0:m[h-1])%10&1||n==(e.s<0?8:7))),t<1||!m[0])return c?(a=fn(e),m.length=1,t=t-a-1,m[0]=Zc(10,(kr-t%kr)%kr),e.e=Jm(-t/kr)||0):(m.length=1,m[0]=e.e=e.s=0),e;if(s==0?(m.length=h,a=1,h--):(m.length=h+1,a=Zc(10,kr-s),m[h]=i>0?(d/Zc(10,o-i)%Zc(10,i)|0)*a:0),c)for(;;)if(h==0){(m[0]+=a)==Tn&&(m[0]=1,++e.e);break}else{if(m[h]+=a,m[h]!=Tn)break;m[h--]=0,a=1}for(s=m.length;m[--s]===0;)m.pop();if($r&&(e.e>Cj||e.e<-Cj))throw Error(TE+fn(e));return e}function mG(e,t){var n,s,i,a,o,l,c,d,h,m,f=e.constructor,g=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),$r?vr(t,g):t;if(c=e.d,m=t.d,s=t.e,d=e.e,c=c.slice(),o=d-s,o){for(h=o<0,h?(n=c,o=-o,l=m.length):(n=m,s=d,l=c.length),i=Math.max(Math.ceil(g/kr),l)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=c.length,l=m.length,h=i<l,h&&(l=i),i=0;i<l;i++)if(c[i]!=m[i]){h=c[i]<m[i];break}o=0}for(h&&(n=c,c=m,m=n,t.s=-t.s),l=c.length,i=m.length-l;i>0;--i)c[l++]=0;for(i=m.length;i>o;){if(c[--i]<m[i]){for(a=i;a&&c[--a]===0;)c[a]=Tn-1;--c[a],c[i]+=Tn}c[i]-=m[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--s;return c[0]?(t.d=c,t.e=s,$r?vr(t,g):t):new f(0)}function Zd(e,t,n){var s,i=fn(e),a=Oa(e.d),o=a.length;return t?(n&&(s=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+yl(s):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+yl(-i-1)+a,n&&(s=n-o)>0&&(a+=yl(s))):i>=o?(a+=yl(i+1-o),n&&(s=n-i-1)>0&&(a=a+"."+yl(s))):((s=i+1)<o&&(a=a.slice(0,s)+"."+a.slice(s)),n&&(s=n-o)>0&&(i+1===o&&(a+="."),a+=yl(s))),e.s<0?"-"+a:a}function CR(e,t){if(e.length>t)return e.length=t,!0}function fG(e){var t,n,s;function i(a){var o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,a instanceof i){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Sd+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return PR(o,a.toString())}else if(typeof a!="string")throw Error(Sd+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,$3e.test(a))PR(o,a);else throw Error(Sd+a)}if(i.prototype=ot,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=fG,i.config=i.set=F3e,e===void 0&&(e={}),e)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<s.length;)e.hasOwnProperty(n=s[t++])||(e[n]=this[n]);return i.config(e),i}function F3e(e){if(!e||typeof e!="object")throw Error(Ri+"Object expected");var t,n,s,i=["precision",1,Qm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((s=e[n=i[t]])!==void 0)if(Jm(s)===s&&s>=i[t+1]&&s<=i[t+2])this[n]=s;else throw Error(Sd+n+": "+s);if((s=e[n="LN10"])!==void 0)if(s==Math.LN10)this[n]=new this(s);else throw Error(Sd+n+": "+s);return this}var AE=fG(R3e);Ks=new AE(1);const pr=AE;function z3e(e){return W3e(e)||U3e(e)||V3e(e)||B3e()}function B3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V3e(e,t){if(e){if(typeof e=="string")return TP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TP(e,t)}}function U3e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function W3e(e){if(Array.isArray(e))return TP(e)}function TP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var H3e=function(t){return t},pG={"@@functional/placeholder":!0},xG=function(t){return t===pG},kR=function(t){return function n(){return arguments.length===0||arguments.length===1&&xG(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},q3e=function e(t,n){return t===1?n:kR(function(){for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];var o=i.filter(function(l){return l!==pG}).length;return o>=t?n.apply(void 0,i):e(t-o,kR(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var h=i.map(function(m){return xG(m)?c.shift():m});return n.apply(void 0,z3e(h).concat(c))}))})},$w=function(t){return q3e(t.length,t)},AP=function(t,n){for(var s=[],i=t;i<n;++i)s[i-t]=i;return s},K3e=$w(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),G3e=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];if(!n.length)return H3e;var i=n.reverse(),a=i[0],o=i.slice(1);return function(){return o.reduce(function(l,c){return c(l)},a.apply(void 0,arguments))}},EP=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},gG=function(t){var n=null,s=null;return function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n&&a.every(function(l,c){return l===n[c]})||(n=a,s=t.apply(void 0,a)),s}};function Z3e(e){var t;return e===0?t=1:t=Math.floor(new pr(e).abs().log(10).toNumber())+1,t}function Y3e(e,t,n){for(var s=new pr(e),i=0,a=[];s.lt(t)&&i<1e5;)a.push(s.toNumber()),s=s.add(n),i++;return a}var X3e=$w(function(e,t,n){var s=+e,i=+t;return s+n*(i-s)}),Q3e=$w(function(e,t,n){var s=t-+e;return s=s||1/0,(n-e)/s}),J3e=$w(function(e,t,n){var s=t-+e;return s=s||1/0,Math.max(0,Math.min(1,(n-e)/s))});const Fw={rangeStep:Y3e,getDigitCount:Z3e,interpolateNumber:X3e,uninterpolateNumber:Q3e,uninterpolateTruncation:J3e};function OP(e){return rLe(e)||tLe(e)||vG(e)||eLe()}function eLe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tLe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function rLe(e){if(Array.isArray(e))return MP(e)}function Ix(e,t){return iLe(e)||sLe(e,t)||vG(e,t)||nLe()}function nLe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vG(e,t){if(e){if(typeof e=="string")return MP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MP(e,t)}}function MP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function sLe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],s=!0,i=!1,a=void 0;try{for(var o=e[Symbol.iterator](),l;!(s=(l=o.next()).done)&&(n.push(l.value),!(t&&n.length===t));s=!0);}catch(c){i=!0,a=c}finally{try{!s&&o.return!=null&&o.return()}finally{if(i)throw a}}return n}}function iLe(e){if(Array.isArray(e))return e}function yG(e){var t=Ix(e,2),n=t[0],s=t[1],i=n,a=s;return n>s&&(i=s,a=n),[i,a]}function jG(e,t,n){if(e.lte(0))return new pr(0);var s=Fw.getDigitCount(e.toNumber()),i=new pr(10).pow(s),a=e.div(i),o=s!==1?.05:.1,l=new pr(Math.ceil(a.div(o).toNumber())).add(n).mul(o),c=l.mul(i);return t?c:new pr(Math.ceil(c))}function aLe(e,t,n){var s=1,i=new pr(e);if(!i.isint()&&n){var a=Math.abs(e);a<1?(s=new pr(10).pow(Fw.getDigitCount(e)-1),i=new pr(Math.floor(i.div(s).toNumber())).mul(s)):a>1&&(i=new pr(Math.floor(e)))}else e===0?i=new pr(Math.floor((t-1)/2)):n||(i=new pr(Math.floor(e)));var o=Math.floor((t-1)/2),l=G3e(K3e(function(c){return i.add(new pr(c-o).mul(s)).toNumber()}),AP);return l(0,t)}function bG(e,t,n,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new pr(0),tickMin:new pr(0),tickMax:new pr(0)};var a=jG(new pr(t).sub(e).div(n-1),s,i),o;e<=0&&t>=0?o=new pr(0):(o=new pr(e).add(t).div(2),o=o.sub(new pr(o).mod(a)));var l=Math.ceil(o.sub(e).div(a).toNumber()),c=Math.ceil(new pr(t).sub(o).div(a).toNumber()),d=l+c+1;return d>n?bG(e,t,n,s,i+1):(d<n&&(c=t>0?c+(n-d):c,l=t>0?l:l+(n-d)),{step:a,tickMin:o.sub(new pr(l).mul(a)),tickMax:o.add(new pr(c).mul(a))})}function oLe(e){var t=Ix(e,2),n=t[0],s=t[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),l=yG([n,s]),c=Ix(l,2),d=c[0],h=c[1];if(d===-1/0||h===1/0){var m=h===1/0?[d].concat(OP(AP(0,i-1).map(function(){return 1/0}))):[].concat(OP(AP(0,i-1).map(function(){return-1/0})),[h]);return n>s?EP(m):m}if(d===h)return aLe(d,i,a);var f=bG(d,h,o,a),g=f.step,x=f.tickMin,p=f.tickMax,y=Fw.rangeStep(x,p.add(new pr(.1).mul(g)),g);return n>s?EP(y):y}function lLe(e,t){var n=Ix(e,2),s=n[0],i=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=yG([s,i]),l=Ix(o,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[s,i];if(c===d)return[c];var h=Math.max(t,2),m=jG(new pr(d).sub(c).div(h-1),a,0),f=[].concat(OP(Fw.rangeStep(new pr(c),new pr(d).sub(new pr(.99).mul(m)),m)),[d]);return s>i?EP(f):f}var cLe=gG(oLe),dLe=gG(lLe),uLe="Invariant failed";function Yd(e,t){throw new Error(uLe)}var hLe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function om(e){"@babel/helpers - typeof";return om=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},om(e)}function kj(){return kj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},kj.apply(this,arguments)}function mLe(e,t){return gLe(e)||xLe(e,t)||pLe(e,t)||fLe()}function fLe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pLe(e,t){if(e){if(typeof e=="string")return TR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TR(e,t)}}function TR(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function xLe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(h){d=!0,i=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function gLe(e){if(Array.isArray(e))return e}function vLe(e,t){if(e==null)return{};var n=yLe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function yLe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function jLe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bLe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,SG(s.key),s)}}function wLe(e,t,n){return t&&bLe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function NLe(e,t,n){return t=Tj(t),SLe(e,wG()?Reflect.construct(t,n||[],Tj(e).constructor):t.apply(e,n))}function SLe(e,t){if(t&&(om(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _Le(e)}function _Le(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wG=function(){return!!e})()}function Tj(e){return Tj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Tj(e)}function PLe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DP(e,t)}function DP(e,t){return DP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},DP(e,t)}function NG(e,t,n){return t=SG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SG(e){var t=CLe(e,"string");return om(t)=="symbol"?t:t+""}function CLe(e,t){if(om(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(om(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Hg=function(e){function t(){return jLe(this,t),NLe(this,t,arguments)}return PLe(t,e),wLe(t,[{key:"render",value:function(){var s=this.props,i=s.offset,a=s.layout,o=s.width,l=s.dataKey,c=s.data,d=s.dataPointFormatter,h=s.xAxis,m=s.yAxis,f=vLe(s,hLe),g=It(f,!1);this.props.direction==="x"&&h.type!=="number"&&Yd();var x=c.map(function(p){var y=d(p,l),b=y.x,w=y.y,N=y.value,S=y.errorVal;if(!S)return null;var P=[],C,k;if(Array.isArray(S)){var O=mLe(S,2);C=O[0],k=O[1]}else C=k=S;if(a==="vertical"){var I=h.scale,T=w+i,E=T+o,D=T-o,B=I(N-C),M=I(N+k);P.push({x1:M,y1:E,x2:M,y2:D}),P.push({x1:B,y1:T,x2:M,y2:T}),P.push({x1:B,y1:E,x2:B,y2:D})}else if(a==="horizontal"){var U=m.scale,H=b+i,K=H-o,W=H+o,V=U(N-C),z=U(N+k);P.push({x1:K,y1:z,x2:W,y2:z}),P.push({x1:H,y1:V,x2:H,y2:z}),P.push({x1:K,y1:V,x2:W,y2:V})}return re.createElement(Nr,kj({className:"recharts-errorBar",key:"bar-".concat(P.map(function(q){return"".concat(q.x1,"-").concat(q.x2,"-").concat(q.y1,"-").concat(q.y2)}))},g),P.map(function(q){return re.createElement("line",kj({},q,{key:"line-".concat(q.x1,"-").concat(q.x2,"-").concat(q.y1,"-").concat(q.y2)}))}))});return re.createElement(Nr,{className:"recharts-errorBars"},x)}}])}(re.Component);NG(Hg,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});NG(Hg,"displayName","ErrorBar");function Lx(e){"@babel/helpers - typeof";return Lx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lx(e)}function AR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function zc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AR(Object(n),!0).forEach(function(s){kLe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function kLe(e,t,n){return t=TLe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TLe(e){var t=ALe(e,"string");return Lx(t)=="symbol"?t:t+""}function ALe(e,t){if(Lx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Lx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _G=function(t){var n=t.children,s=t.formattedGraphicalItems,i=t.legendWidth,a=t.legendContent,o=zs(n,rc);if(!o)return null;var l=rc.defaultProps,c=l!==void 0?zc(zc({},l),o.props):{},d;return o.props&&o.props.payload?d=o.props&&o.props.payload:a==="children"?d=(s||[]).reduce(function(h,m){var f=m.item,g=m.props,x=g.sectors||g.data||[];return h.concat(x.map(function(p){return{type:o.props.iconType||f.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):d=(s||[]).map(function(h){var m=h.item,f=m.type.defaultProps,g=f!==void 0?zc(zc({},f),m.props):{},x=g.dataKey,p=g.name,y=g.legendType,b=g.hide;return{inactive:b,dataKey:x,type:c.iconType||y||"square",color:EE(m),value:p||x,payload:g}}),zc(zc(zc({},c),rc.getWithHeight(o,i)),{},{payload:d,item:o})};function Rx(e){"@babel/helpers - typeof";return Rx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rx(e)}function ER(e){return DLe(e)||MLe(e)||OLe(e)||ELe()}function ELe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OLe(e,t){if(e){if(typeof e=="string")return IP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IP(e,t)}}function MLe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function DLe(e){if(Array.isArray(e))return IP(e)}function IP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function OR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Qr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OR(Object(n),!0).forEach(function(s){xh(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function xh(e,t,n){return t=ILe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ILe(e){var t=LLe(e,"string");return Rx(t)=="symbol"?t:t+""}function LLe(e,t){if(Rx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Rx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ps(e,t,n){return Vt(e)||Vt(t)?n:_n(t)?Oi(e,t,n):Et(t)?t(e):n}function jp(e,t,n,s){var i=M3e(e,function(l){return ps(l,t)});if(n==="number"){var a=i.filter(function(l){return Ue(l)||parseFloat(l)});return a.length?[Rw(a),Rl(a)]:[1/0,-1/0]}var o=s?i.filter(function(l){return!Vt(l)}):i;return o.map(function(l){return _n(l)||l instanceof Date?l:""})}var RLe=function(t){var n,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=s==null?void 0:s.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var c=a.range,d=0;d<l;d++){var h=d>0?i[d-1].coordinate:i[l-1].coordinate,m=i[d].coordinate,f=d>=l-1?i[0].coordinate:i[d+1].coordinate,g=void 0;if(ia(m-h)!==ia(f-m)){var x=[];if(ia(f-m)===ia(c[1]-c[0])){g=f;var p=m+c[1]-c[0];x[0]=Math.min(p,(p+h)/2),x[1]=Math.max(p,(p+h)/2)}else{g=h;var y=f+c[1]-c[0];x[0]=Math.min(m,(y+m)/2),x[1]=Math.max(m,(y+m)/2)}var b=[Math.min(m,(g+m)/2),Math.max(m,(g+m)/2)];if(t>b[0]&&t<=b[1]||t>=x[0]&&t<=x[1]){o=i[d].index;break}}else{var w=Math.min(h,f),N=Math.max(h,f);if(t>(w+m)/2&&t<=(N+m)/2){o=i[d].index;break}}}else for(var S=0;S<l;S++)if(S===0&&t<=(s[S].coordinate+s[S+1].coordinate)/2||S>0&&S<l-1&&t>(s[S].coordinate+s[S-1].coordinate)/2&&t<=(s[S].coordinate+s[S+1].coordinate)/2||S===l-1&&t>(s[S].coordinate+s[S-1].coordinate)/2){o=s[S].index;break}return o},EE=function(t){var n,s=t,i=s.type.displayName,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Qr(Qr({},t.type.defaultProps),t.props):t.props,o=a.stroke,l=a.fill,c;switch(i){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},$Le=function(t){var n=t.barSize,s=t.totalSize,i=t.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var o={},l=Object.keys(a),c=0,d=l.length;c<d;c++)for(var h=a[l[c]].stackGroups,m=Object.keys(h),f=0,g=m.length;f<g;f++){var x=h[m[f]],p=x.items,y=x.cateAxisId,b=p.filter(function(k){return Io(k.type).indexOf("Bar")>=0});if(b&&b.length){var w=b[0].type.defaultProps,N=w!==void 0?Qr(Qr({},w),b[0].props):b[0].props,S=N.barSize,P=N[y];o[P]||(o[P]=[]);var C=Vt(S)?n:S;o[P].push({item:b[0],stackList:b.slice(1),barSize:Vt(C)?void 0:Gd(C,s,0)})}}return o},FLe=function(t){var n=t.barGap,s=t.barCategoryGap,i=t.bandSize,a=t.sizeList,o=a===void 0?[]:a,l=t.maxBarSize,c=o.length;if(c<1)return null;var d=Gd(n,i,0,!0),h,m=[];if(o[0].barSize===+o[0].barSize){var f=!1,g=i/c,x=o.reduce(function(S,P){return S+P.barSize||0},0);x+=(c-1)*d,x>=i&&(x-=(c-1)*d,d=0),x>=i&&g>0&&(f=!0,g*=.9,x=c*g);var p=(i-x)/2>>0,y={offset:p-d,size:0};h=o.reduce(function(S,P){var C={item:P.item,position:{offset:y.offset+y.size+d,size:f?g:P.barSize}},k=[].concat(ER(S),[C]);return y=k[k.length-1].position,P.stackList&&P.stackList.length&&P.stackList.forEach(function(O){k.push({item:O,position:y})}),k},m)}else{var b=Gd(s,i,0,!0);i-2*b-(c-1)*d<=0&&(d=0);var w=(i-2*b-(c-1)*d)/c;w>1&&(w>>=0);var N=l===+l?Math.min(w,l):w;h=o.reduce(function(S,P,C){var k=[].concat(ER(S),[{item:P.item,position:{offset:b+(w+d)*C+(w-N)/2,size:N}}]);return P.stackList&&P.stackList.length&&P.stackList.forEach(function(O){k.push({item:O,position:k[k.length-1].position})}),k},m)}return h},zLe=function(t,n,s,i){var a=s.children,o=s.width,l=s.margin,c=o-(l.left||0)-(l.right||0),d=_G({children:a,legendWidth:c});if(d){var h=i||{},m=h.width,f=h.height,g=d.align,x=d.verticalAlign,p=d.layout;if((p==="vertical"||p==="horizontal"&&x==="middle")&&g!=="center"&&Ue(t[g]))return Qr(Qr({},t),{},xh({},g,t[g]+(m||0)));if((p==="horizontal"||p==="vertical"&&g==="center")&&x!=="middle"&&Ue(t[x]))return Qr(Qr({},t),{},xh({},x,t[x]+(f||0)))}return t},BLe=function(t,n,s){return Vt(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||s==="x"?n==="xAxis":s==="y"?n==="yAxis":!0},PG=function(t,n,s,i,a){var o=n.props.children,l=Mi(o,Hg).filter(function(d){return BLe(i,a,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return t.reduce(function(d,h){var m=ps(h,s);if(Vt(m))return d;var f=Array.isArray(m)?[Rw(m),Rl(m)]:[m,m],g=c.reduce(function(x,p){var y=ps(h,p,0),b=f[0]-Math.abs(Array.isArray(y)?y[0]:y),w=f[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(b,x[0]),Math.max(w,x[1])]},[1/0,-1/0]);return[Math.min(g[0],d[0]),Math.max(g[1],d[1])]},[1/0,-1/0])}return null},VLe=function(t,n,s,i,a){var o=n.map(function(l){return PG(t,l,s,a,i)}).filter(function(l){return!Vt(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},CG=function(t,n,s,i,a){var o=n.map(function(c){var d=c.props.dataKey;return s==="number"&&d&&PG(t,c,d,i)||jp(t,d,s,a)});if(s==="number")return o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,d){for(var h=0,m=d.length;h<m;h++)l[d[h]]||(l[d[h]]=!0,c.push(d[h]));return c},[])},kG=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},TG=function(t,n,s,i){if(i)return t.map(function(c){return c.coordinate});var a,o,l=t.map(function(c){return c.coordinate===n&&(a=!0),c.coordinate===s&&(o=!0),c.coordinate});return a||l.push(n),o||l.push(s),l},ko=function(t,n,s){if(!t)return null;var i=t.scale,a=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?i.bandwidth()/2:2,d=(n||s)&&o==="category"&&i.bandwidth?i.bandwidth()/c:0;if(d=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?ia(l[0]-l[1])*2*d:d,n&&(t.ticks||t.niceTicks)){var h=(t.ticks||t.niceTicks).map(function(m){var f=a?a.indexOf(m):m;return{coordinate:i(f)+d,value:m,offset:d}});return h.filter(function(m){return!qm(m.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(m,f){return{coordinate:i(m)+d,value:m,index:f,offset:d}}):i.ticks&&!s?i.ticks(t.tickCount).map(function(m){return{coordinate:i(m)+d,value:m,offset:d}}):i.domain().map(function(m,f){return{coordinate:i(m)+d,value:a?a[m]:m,index:f,offset:d}})},pS=new WeakMap,ry=function(t,n){if(typeof n!="function")return t;pS.has(t)||pS.set(t,new WeakMap);var s=pS.get(t);if(s.has(n))return s.get(n);var i=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return s.set(n,i),i},ULe=function(t,n,s){var i=t.scale,a=t.type,o=t.layout,l=t.axisType;if(i==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Tx(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:Nj(),realScaleType:"linear"}:a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!s)?{scale:yp(),realScaleType:"point"}:a==="category"?{scale:Tx(),realScaleType:"band"}:{scale:Nj(),realScaleType:"linear"};if(Fg(i)){var c="scale".concat(Sw(i));return{scale:(_R[c]||yp)(),realScaleType:_R[c]?c:"point"}}return Et(i)?{scale:i}:{scale:yp(),realScaleType:"point"}},MR=1e-4,WLe=function(t){var n=t.domain();if(!(!n||n.length<=2)){var s=n.length,i=t.range(),a=Math.min(i[0],i[1])-MR,o=Math.max(i[0],i[1])+MR,l=t(n[0]),c=t(n[s-1]);(l<a||l>o||c<a||c>o)&&t.domain([n[0],n[s-1]])}},HLe=function(t,n){if(!t)return null;for(var s=0,i=t.length;s<i;s++)if(t[s].item===n)return t[s].position;return null},qLe=function(t,n){if(!n||n.length!==2||!Ue(n[0])||!Ue(n[1]))return t;var s=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),a=[t[0],t[1]];return(!Ue(t[0])||t[0]<s)&&(a[0]=s),(!Ue(t[1])||t[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<s&&(a[1]=s),a},KLe=function(t){var n=t.length;if(!(n<=0))for(var s=0,i=t[0].length;s<i;++s)for(var a=0,o=0,l=0;l<n;++l){var c=qm(t[l][s][1])?t[l][s][0]:t[l][s][1];c>=0?(t[l][s][0]=a,t[l][s][1]=a+c,a=t[l][s][1]):(t[l][s][0]=o,t[l][s][1]=o+c,o=t[l][s][1])}},GLe=function(t){var n=t.length;if(!(n<=0))for(var s=0,i=t[0].length;s<i;++s)for(var a=0,o=0;o<n;++o){var l=qm(t[o][s][1])?t[o][s][0]:t[o][s][1];l>=0?(t[o][s][0]=a,t[o][s][1]=a+l,a=t[o][s][1]):(t[o][s][0]=0,t[o][s][1]=0)}},ZLe={sign:KLe,expand:d2e,none:Qh,silhouette:u2e,wiggle:h2e,positive:GLe},YLe=function(t,n,s){var i=n.map(function(l){return l.props.dataKey}),a=ZLe[s],o=c2e().keys(i).value(function(l,c){return+ps(l,c,0)}).order(aP).offset(a);return o(t)},XLe=function(t,n,s,i,a,o){if(!t)return null;var l=o?n.reverse():n,c={},d=l.reduce(function(m,f){var g,x=(g=f.type)!==null&&g!==void 0&&g.defaultProps?Qr(Qr({},f.type.defaultProps),f.props):f.props,p=x.stackId,y=x.hide;if(y)return m;var b=x[s],w=m[b]||{hasStack:!1,stackGroups:{}};if(_n(p)){var N=w.stackGroups[p]||{numericAxisId:s,cateAxisId:i,items:[]};N.items.push(f),w.hasStack=!0,w.stackGroups[p]=N}else w.stackGroups[Km("_stackId_")]={numericAxisId:s,cateAxisId:i,items:[f]};return Qr(Qr({},m),{},xh({},b,w))},c),h={};return Object.keys(d).reduce(function(m,f){var g=d[f];if(g.hasStack){var x={};g.stackGroups=Object.keys(g.stackGroups).reduce(function(p,y){var b=g.stackGroups[y];return Qr(Qr({},p),{},xh({},y,{numericAxisId:s,cateAxisId:i,items:b.items,stackedData:YLe(t,b.items,a)}))},x)}return Qr(Qr({},m),{},xh({},f,g))},h)},QLe=function(t,n){var s=n.realScaleType,i=n.type,a=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=s||n.scale;if(c!=="auto"&&c!=="linear")return null;if(a&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var d=t.domain();if(!d.length)return null;var h=cLe(d,a,l);return t.domain([Rw(h),Rl(h)]),{niceTicks:h}}if(a&&i==="number"){var m=t.domain(),f=dLe(m,a,l);return{niceTicks:f}}return null};function Aj(e){var t=e.axis,n=e.ticks,s=e.bandSize,i=e.entry,a=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Vt(i[t.dataKey])){var l=ej(n,"value",i[t.dataKey]);if(l)return l.coordinate+s/2}return n[a]?n[a].coordinate+s/2:null}var c=ps(i,Vt(o)?t.dataKey:o);return Vt(c)?null:t.scale(c)}var DR=function(t){var n=t.axis,s=t.ticks,i=t.offset,a=t.bandSize,o=t.entry,l=t.index;if(n.type==="category")return s[l]?s[l].coordinate+i:null;var c=ps(o,n.dataKey,n.domain[l]);return Vt(c)?null:n.scale(c)-a/2+i},JLe=function(t){var n=t.numericAxis,s=n.scale.domain();if(n.type==="number"){var i=Math.min(s[0],s[1]),a=Math.max(s[0],s[1]);return i<=0&&a>=0?0:a<0?a:i}return s[0]},eRe=function(t,n){var s,i=(s=t.type)!==null&&s!==void 0&&s.defaultProps?Qr(Qr({},t.type.defaultProps),t.props):t.props,a=i.stackId;if(_n(a)){var o=n[a];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},tRe=function(t){return t.reduce(function(n,s){return[Rw(s.concat([n[0]]).filter(Ue)),Rl(s.concat([n[1]]).filter(Ue))]},[1/0,-1/0])},AG=function(t,n,s){return Object.keys(t).reduce(function(i,a){var o=t[a],l=o.stackedData,c=l.reduce(function(d,h){var m=tRe(h.slice(n,s+1));return[Math.min(d[0],m[0]),Math.max(d[1],m[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},IR=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,LR=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,LP=function(t,n,s){if(Et(t))return t(n,s);if(!Array.isArray(t))return n;var i=[];if(Ue(t[0]))i[0]=s?t[0]:Math.min(t[0],n[0]);else if(IR.test(t[0])){var a=+IR.exec(t[0])[1];i[0]=n[0]-a}else Et(t[0])?i[0]=t[0](n[0]):i[0]=n[0];if(Ue(t[1]))i[1]=s?t[1]:Math.max(t[1],n[1]);else if(LR.test(t[1])){var o=+LR.exec(t[1])[1];i[1]=n[1]+o}else Et(t[1])?i[1]=t[1](n[1]):i[1]=n[1];return i},Ej=function(t,n,s){if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!s||i>0)return i}if(t&&n&&n.length>=2){for(var a=iE(n,function(m){return m.coordinate}),o=1/0,l=1,c=a.length;l<c;l++){var d=a[l],h=a[l-1];o=Math.min((d.coordinate||0)-(h.coordinate||0),o)}return o===1/0?0:o}return s?void 0:0},RR=function(t,n,s){return!t||!t.length||am(t,Oi(s,"type.defaultProps.domain"))?n:t},EG=function(t,n){var s=t.type.defaultProps?Qr(Qr({},t.type.defaultProps),t.props):t.props,i=s.dataKey,a=s.name,o=s.unit,l=s.formatter,c=s.tooltipType,d=s.chartType,h=s.hide;return Qr(Qr({},It(t,!1)),{},{dataKey:i,unit:o,formatter:l,name:a||i,color:EE(t),value:ps(n,i),type:c,payload:n,chartType:d,hide:h})};function $x(e){"@babel/helpers - typeof";return $x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$x(e)}function $R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function FR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$R(Object(n),!0).forEach(function(s){rRe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$R(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function rRe(e,t,n){return t=nRe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nRe(e){var t=sRe(e,"string");return $x(t)=="symbol"?t:t+""}function sRe(e,t){if($x(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if($x(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Oj=Math.PI/180,iRe=function(t){return t*180/Math.PI},Vn=function(t,n,s,i){return{x:t+Math.cos(-Oj*i)*s,y:n+Math.sin(-Oj*i)*s}},aRe=function(t,n){var s=t.x,i=t.y,a=n.x,o=n.y;return Math.sqrt(Math.pow(s-a,2)+Math.pow(i-o,2))},oRe=function(t,n){var s=t.x,i=t.y,a=n.cx,o=n.cy,l=aRe({x:s,y:i},{x:a,y:o});if(l<=0)return{radius:l};var c=(s-a)/l,d=Math.acos(c);return i>o&&(d=2*Math.PI-d),{radius:l,angle:iRe(d),angleInRadian:d}},lRe=function(t){var n=t.startAngle,s=t.endAngle,i=Math.floor(n/360),a=Math.floor(s/360),o=Math.min(i,a);return{startAngle:n-o*360,endAngle:s-o*360}},cRe=function(t,n){var s=n.startAngle,i=n.endAngle,a=Math.floor(s/360),o=Math.floor(i/360),l=Math.min(a,o);return t+l*360},zR=function(t,n){var s=t.x,i=t.y,a=oRe({x:s,y:i},n),o=a.radius,l=a.angle,c=n.innerRadius,d=n.outerRadius;if(o<c||o>d)return!1;if(o===0)return!0;var h=lRe(n),m=h.startAngle,f=h.endAngle,g=l,x;if(m<=f){for(;g>f;)g-=360;for(;g<m;)g+=360;x=g>=m&&g<=f}else{for(;g>m;)g-=360;for(;g<f;)g+=360;x=g>=f&&g<=m}return x?FR(FR({},n),{},{radius:o,angle:cRe(g,n)}):null};function Fx(e){"@babel/helpers - typeof";return Fx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fx(e)}var dRe=["offset"];function uRe(e){return pRe(e)||fRe(e)||mRe(e)||hRe()}function hRe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mRe(e,t){if(e){if(typeof e=="string")return RP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RP(e,t)}}function fRe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function pRe(e){if(Array.isArray(e))return RP(e)}function RP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function xRe(e,t){if(e==null)return{};var n=gRe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function gRe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function BR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function vn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BR(Object(n),!0).forEach(function(s){vRe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function vRe(e,t,n){return t=yRe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yRe(e){var t=jRe(e,"string");return Fx(t)=="symbol"?t:t+""}function jRe(e,t){if(Fx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Fx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zx(){return zx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},zx.apply(this,arguments)}var bRe=function(t){var n=t.value,s=t.formatter,i=Vt(t.children)?n:t.children;return Et(s)?s(i):i},wRe=function(t,n){var s=ia(n-t),i=Math.min(Math.abs(n-t),360);return s*i},NRe=function(t,n,s){var i=t.position,a=t.viewBox,o=t.offset,l=t.className,c=a,d=c.cx,h=c.cy,m=c.innerRadius,f=c.outerRadius,g=c.startAngle,x=c.endAngle,p=c.clockWise,y=(m+f)/2,b=wRe(g,x),w=b>=0?1:-1,N,S;i==="insideStart"?(N=g+w*o,S=p):i==="insideEnd"?(N=x-w*o,S=!p):i==="end"&&(N=x+w*o,S=p),S=b<=0?S:!S;var P=Vn(d,h,y,N),C=Vn(d,h,y,N+(S?1:-1)*359),k="M".concat(P.x,",").concat(P.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(S?0:1,`,
    `).concat(C.x,",").concat(C.y),O=Vt(t.id)?Km("recharts-radial-line-"):t.id;return re.createElement("text",zx({},s,{dominantBaseline:"central",className:Kt("recharts-radial-bar-label",l)}),re.createElement("defs",null,re.createElement("path",{id:O,d:k})),re.createElement("textPath",{xlinkHref:"#".concat(O)},n))},SRe=function(t){var n=t.viewBox,s=t.offset,i=t.position,a=n,o=a.cx,l=a.cy,c=a.innerRadius,d=a.outerRadius,h=a.startAngle,m=a.endAngle,f=(h+m)/2;if(i==="outside"){var g=Vn(o,l,d+s,f),x=g.x,p=g.y;return{x,y:p,textAnchor:x>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var y=(c+d)/2,b=Vn(o,l,y,f),w=b.x,N=b.y;return{x:w,y:N,textAnchor:"middle",verticalAnchor:"middle"}},_Re=function(t){var n=t.viewBox,s=t.parentViewBox,i=t.offset,a=t.position,o=n,l=o.x,c=o.y,d=o.width,h=o.height,m=h>=0?1:-1,f=m*i,g=m>0?"end":"start",x=m>0?"start":"end",p=d>=0?1:-1,y=p*i,b=p>0?"end":"start",w=p>0?"start":"end";if(a==="top"){var N={x:l+d/2,y:c-m*i,textAnchor:"middle",verticalAnchor:g};return vn(vn({},N),s?{height:Math.max(c-s.y,0),width:d}:{})}if(a==="bottom"){var S={x:l+d/2,y:c+h+f,textAnchor:"middle",verticalAnchor:x};return vn(vn({},S),s?{height:Math.max(s.y+s.height-(c+h),0),width:d}:{})}if(a==="left"){var P={x:l-y,y:c+h/2,textAnchor:b,verticalAnchor:"middle"};return vn(vn({},P),s?{width:Math.max(P.x-s.x,0),height:h}:{})}if(a==="right"){var C={x:l+d+y,y:c+h/2,textAnchor:w,verticalAnchor:"middle"};return vn(vn({},C),s?{width:Math.max(s.x+s.width-C.x,0),height:h}:{})}var k=s?{width:d,height:h}:{};return a==="insideLeft"?vn({x:l+y,y:c+h/2,textAnchor:w,verticalAnchor:"middle"},k):a==="insideRight"?vn({x:l+d-y,y:c+h/2,textAnchor:b,verticalAnchor:"middle"},k):a==="insideTop"?vn({x:l+d/2,y:c+f,textAnchor:"middle",verticalAnchor:x},k):a==="insideBottom"?vn({x:l+d/2,y:c+h-f,textAnchor:"middle",verticalAnchor:g},k):a==="insideTopLeft"?vn({x:l+y,y:c+f,textAnchor:w,verticalAnchor:x},k):a==="insideTopRight"?vn({x:l+d-y,y:c+f,textAnchor:b,verticalAnchor:x},k):a==="insideBottomLeft"?vn({x:l+y,y:c+h-f,textAnchor:w,verticalAnchor:g},k):a==="insideBottomRight"?vn({x:l+d-y,y:c+h-f,textAnchor:b,verticalAnchor:g},k):Vm(a)&&(Ue(a.x)||nd(a.x))&&(Ue(a.y)||nd(a.y))?vn({x:l+Gd(a.x,d),y:c+Gd(a.y,h),textAnchor:"end",verticalAnchor:"end"},k):vn({x:l+d/2,y:c+h/2,textAnchor:"middle",verticalAnchor:"middle"},k)},PRe=function(t){return"cx"in t&&Ue(t.cx)};function Xn(e){var t=e.offset,n=t===void 0?5:t,s=xRe(e,dRe),i=vn({offset:n},s),a=i.viewBox,o=i.position,l=i.value,c=i.children,d=i.content,h=i.className,m=h===void 0?"":h,f=i.textBreakAll;if(!a||Vt(l)&&Vt(c)&&!j.isValidElement(d)&&!Et(d))return null;if(j.isValidElement(d))return j.cloneElement(d,i);var g;if(Et(d)){if(g=j.createElement(d,i),j.isValidElement(g))return g}else g=bRe(i);var x=PRe(a),p=It(i,!0);if(x&&(o==="insideStart"||o==="insideEnd"||o==="end"))return NRe(i,g,p);var y=x?SRe(i):_Re(i);return re.createElement(xj,zx({className:Kt("recharts-label",m)},p,y,{breakAll:f}),g)}Xn.displayName="Label";var OG=function(t){var n=t.cx,s=t.cy,i=t.angle,a=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,d=t.innerRadius,h=t.outerRadius,m=t.x,f=t.y,g=t.top,x=t.left,p=t.width,y=t.height,b=t.clockWise,w=t.labelViewBox;if(w)return w;if(Ue(p)&&Ue(y)){if(Ue(m)&&Ue(f))return{x:m,y:f,width:p,height:y};if(Ue(g)&&Ue(x))return{x:g,y:x,width:p,height:y}}return Ue(m)&&Ue(f)?{x:m,y:f,width:0,height:0}:Ue(n)&&Ue(s)?{cx:n,cy:s,startAngle:a||i||0,endAngle:o||i||0,innerRadius:d||0,outerRadius:h||c||l||0,clockWise:b}:t.viewBox?t.viewBox:{}},CRe=function(t,n){return t?t===!0?re.createElement(Xn,{key:"label-implicit",viewBox:n}):_n(t)?re.createElement(Xn,{key:"label-implicit",viewBox:n,value:t}):j.isValidElement(t)?t.type===Xn?j.cloneElement(t,{key:"label-implicit",viewBox:n}):re.createElement(Xn,{key:"label-implicit",content:t,viewBox:n}):Et(t)?re.createElement(Xn,{key:"label-implicit",content:t,viewBox:n}):Vm(t)?re.createElement(Xn,zx({viewBox:n},t,{key:"label-implicit"})):null:null},kRe=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&s&&!t.label)return null;var i=t.children,a=OG(t),o=Mi(i,Xn).map(function(c,d){return j.cloneElement(c,{viewBox:n||a,key:"label-".concat(d)})});if(!s)return o;var l=CRe(t.label,n||a);return[l].concat(uRe(o))};Xn.parseViewBox=OG;Xn.renderCallByParent=kRe;function TRe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var ARe=TRe;const ERe=hr(ARe);function Bx(e){"@babel/helpers - typeof";return Bx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bx(e)}var ORe=["valueAccessor"],MRe=["data","dataKey","clockWise","id","textBreakAll"];function DRe(e){return $Re(e)||RRe(e)||LRe(e)||IRe()}function IRe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LRe(e,t){if(e){if(typeof e=="string")return $P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $P(e,t)}}function RRe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $Re(e){if(Array.isArray(e))return $P(e)}function $P(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Mj(){return Mj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Mj.apply(this,arguments)}function VR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function UR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VR(Object(n),!0).forEach(function(s){FRe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function FRe(e,t,n){return t=zRe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zRe(e){var t=BRe(e,"string");return Bx(t)=="symbol"?t:t+""}function BRe(e,t){if(Bx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Bx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WR(e,t){if(e==null)return{};var n=VRe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function VRe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var URe=function(t){return Array.isArray(t.value)?ERe(t.value):t.value};function $o(e){var t=e.valueAccessor,n=t===void 0?URe:t,s=WR(e,ORe),i=s.data,a=s.dataKey,o=s.clockWise,l=s.id,c=s.textBreakAll,d=WR(s,MRe);return!i||!i.length?null:re.createElement(Nr,{className:"recharts-label-list"},i.map(function(h,m){var f=Vt(a)?n(h,m):ps(h&&h.payload,a),g=Vt(l)?{}:{id:"".concat(l,"-").concat(m)};return re.createElement(Xn,Mj({},It(h,!0),d,g,{parentViewBox:h.parentViewBox,value:f,textBreakAll:c,viewBox:Xn.parseViewBox(Vt(o)?h:UR(UR({},h),{},{clockWise:o})),key:"label-".concat(m),index:m}))}))}$o.displayName="LabelList";function WRe(e,t){return e?e===!0?re.createElement($o,{key:"labelList-implicit",data:t}):re.isValidElement(e)||Et(e)?re.createElement($o,{key:"labelList-implicit",data:t,content:e}):Vm(e)?re.createElement($o,Mj({data:t},e,{key:"labelList-implicit"})):null:null}function HRe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var s=e.children,i=Mi(s,$o).map(function(o,l){return j.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!n)return i;var a=WRe(e.label,t);return[a].concat(DRe(i))}$o.renderCallByParent=HRe;function Vx(e){"@babel/helpers - typeof";return Vx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vx(e)}function FP(){return FP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},FP.apply(this,arguments)}function HR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function qR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?HR(Object(n),!0).forEach(function(s){qRe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function qRe(e,t,n){return t=KRe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KRe(e){var t=GRe(e,"string");return Vx(t)=="symbol"?t:t+""}function GRe(e,t){if(Vx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Vx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZRe=function(t,n){var s=ia(n-t),i=Math.min(Math.abs(n-t),359.999);return s*i},ny=function(t){var n=t.cx,s=t.cy,i=t.radius,a=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,d=t.cornerIsExternal,h=c*(l?1:-1)+i,m=Math.asin(c/h)/Oj,f=d?a:a+o*m,g=Vn(n,s,h,f),x=Vn(n,s,i,f),p=d?a-o*m:a,y=Vn(n,s,h*Math.cos(m*Oj),p);return{center:g,circleTangency:x,lineTangency:y,theta:m}},MG=function(t){var n=t.cx,s=t.cy,i=t.innerRadius,a=t.outerRadius,o=t.startAngle,l=t.endAngle,c=ZRe(o,l),d=o+c,h=Vn(n,s,a,o),m=Vn(n,s,a,d),f="M ".concat(h.x,",").concat(h.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>d),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(i>0){var g=Vn(n,s,i,o),x=Vn(n,s,i,d);f+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=d),`,
            `).concat(g.x,",").concat(g.y," Z")}else f+="L ".concat(n,",").concat(s," Z");return f},YRe=function(t){var n=t.cx,s=t.cy,i=t.innerRadius,a=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,d=t.startAngle,h=t.endAngle,m=ia(h-d),f=ny({cx:n,cy:s,radius:a,angle:d,sign:m,cornerRadius:o,cornerIsExternal:c}),g=f.circleTangency,x=f.lineTangency,p=f.theta,y=ny({cx:n,cy:s,radius:a,angle:h,sign:-m,cornerRadius:o,cornerIsExternal:c}),b=y.circleTangency,w=y.lineTangency,N=y.theta,S=c?Math.abs(d-h):Math.abs(d-h)-p-N;if(S<0)return l?"M ".concat(x.x,",").concat(x.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):MG({cx:n,cy:s,innerRadius:i,outerRadius:a,startAngle:d,endAngle:h});var P="M ".concat(x.x,",").concat(x.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(S>180),",").concat(+(m<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(w.x,",").concat(w.y,`
  `);if(i>0){var C=ny({cx:n,cy:s,radius:i,angle:d,sign:m,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),k=C.circleTangency,O=C.lineTangency,I=C.theta,T=ny({cx:n,cy:s,radius:i,angle:h,sign:-m,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),E=T.circleTangency,D=T.lineTangency,B=T.theta,M=c?Math.abs(d-h):Math.abs(d-h)-I-B;if(M<0&&o===0)return"".concat(P,"L").concat(n,",").concat(s,"Z");P+="L".concat(D.x,",").concat(D.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(E.x,",").concat(E.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(M>180),",").concat(+(m>0),",").concat(k.x,",").concat(k.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(O.x,",").concat(O.y,"Z")}else P+="L".concat(n,",").concat(s,"Z");return P},XRe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},DG=function(t){var n=qR(qR({},XRe),t),s=n.cx,i=n.cy,a=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,d=n.cornerIsExternal,h=n.startAngle,m=n.endAngle,f=n.className;if(o<a||h===m)return null;var g=Kt("recharts-sector",f),x=o-a,p=Gd(l,x,0,!0),y;return p>0&&Math.abs(h-m)<360?y=YRe({cx:s,cy:i,innerRadius:a,outerRadius:o,cornerRadius:Math.min(p,x/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:h,endAngle:m}):y=MG({cx:s,cy:i,innerRadius:a,outerRadius:o,startAngle:h,endAngle:m}),re.createElement("path",FP({},It(n,!0),{className:g,d:y,role:"img"}))};function Ux(e){"@babel/helpers - typeof";return Ux=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ux(e)}function zP(){return zP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},zP.apply(this,arguments)}function KR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function GR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KR(Object(n),!0).forEach(function(s){QRe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function QRe(e,t,n){return t=JRe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JRe(e){var t=e5e(e,"string");return Ux(t)=="symbol"?t:t+""}function e5e(e,t){if(Ux(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Ux(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZR={curveBasisClosed:Q_e,curveBasisOpen:J_e,curveBasis:X_e,curveBumpX:R_e,curveBumpY:$_e,curveLinearClosed:e2e,curveLinear:Pw,curveMonotoneX:t2e,curveMonotoneY:r2e,curveNatural:n2e,curveStep:s2e,curveStepAfter:a2e,curveStepBefore:i2e},sy=function(t){return t.x===+t.x&&t.y===+t.y},Lf=function(t){return t.x},Rf=function(t){return t.y},t5e=function(t,n){if(Et(t))return t;var s="curve".concat(Sw(t));return(s==="curveMonotone"||s==="curveBump")&&n?ZR["".concat(s).concat(n==="vertical"?"Y":"X")]:ZR[s]||Pw},r5e=function(t){var n=t.type,s=n===void 0?"linear":n,i=t.points,a=i===void 0?[]:i,o=t.baseLine,l=t.layout,c=t.connectNulls,d=c===void 0?!1:c,h=t5e(s,l),m=d?a.filter(function(p){return sy(p)}):a,f;if(Array.isArray(o)){var g=d?o.filter(function(p){return sy(p)}):o,x=m.map(function(p,y){return GR(GR({},p),{},{base:g[y]})});return l==="vertical"?f=Gv().y(Rf).x1(Lf).x0(function(p){return p.base.x}):f=Gv().x(Lf).y1(Rf).y0(function(p){return p.base.y}),f.defined(sy).curve(h),f(x)}return l==="vertical"&&Ue(o)?f=Gv().y(Rf).x1(Lf).x0(o):Ue(o)?f=Gv().x(Lf).y1(Rf).y0(o):f=Dq().x(Lf).y(Rf),f.defined(sy).curve(h),f(m)},gh=function(t){var n=t.className,s=t.points,i=t.path,a=t.pathRef;if((!s||!s.length)&&!i)return null;var o=s&&s.length?r5e(t):i;return re.createElement("path",zP({},It(t,!1),tj(t),{className:Kt("recharts-curve",n),d:o,ref:a}))},IG={exports:{}},n5e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",s5e=n5e,i5e=s5e;function LG(){}function RG(){}RG.resetWarningCache=LG;var a5e=function(){function e(s,i,a,o,l,c){if(c!==i5e){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:RG,resetWarningCache:LG};return n.PropTypes=n,n};IG.exports=a5e();var o5e=IG.exports;const ar=hr(o5e);var l5e=Object.getOwnPropertyNames,c5e=Object.getOwnPropertySymbols,d5e=Object.prototype.hasOwnProperty;function YR(e,t){return function(s,i,a){return e(s,i,a)&&t(s,i,a)}}function iy(e){return function(n,s,i){if(!n||!s||typeof n!="object"||typeof s!="object")return e(n,s,i);var a=i.cache,o=a.get(n),l=a.get(s);if(o&&l)return o===s&&l===n;a.set(n,s),a.set(s,n);var c=e(n,s,i);return a.delete(n),a.delete(s),c}}function XR(e){return l5e(e).concat(c5e(e))}var u5e=Object.hasOwn||function(e,t){return d5e.call(e,t)};function cu(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var h5e="__v",m5e="__o",f5e="_owner",QR=Object.getOwnPropertyDescriptor,JR=Object.keys;function p5e(e,t,n){var s=e.length;if(t.length!==s)return!1;for(;s-- >0;)if(!n.equals(e[s],t[s],s,s,e,t,n))return!1;return!0}function x5e(e,t){return cu(e.getTime(),t.getTime())}function g5e(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function v5e(e,t){return e===t}function e5(e,t,n){var s=e.size;if(s!==t.size)return!1;if(!s)return!0;for(var i=new Array(s),a=e.entries(),o,l,c=0;(o=a.next())&&!o.done;){for(var d=t.entries(),h=!1,m=0;(l=d.next())&&!l.done;){if(i[m]){m++;continue}var f=o.value,g=l.value;if(n.equals(f[0],g[0],c,m,e,t,n)&&n.equals(f[1],g[1],f[0],g[0],e,t,n)){h=i[m]=!0;break}m++}if(!h)return!1;c++}return!0}var y5e=cu;function j5e(e,t,n){var s=JR(e),i=s.length;if(JR(t).length!==i)return!1;for(;i-- >0;)if(!$G(e,t,n,s[i]))return!1;return!0}function $f(e,t,n){var s=XR(e),i=s.length;if(XR(t).length!==i)return!1;for(var a,o,l;i-- >0;)if(a=s[i],!$G(e,t,n,a)||(o=QR(e,a),l=QR(t,a),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function b5e(e,t){return cu(e.valueOf(),t.valueOf())}function w5e(e,t){return e.source===t.source&&e.flags===t.flags}function t5(e,t,n){var s=e.size;if(s!==t.size)return!1;if(!s)return!0;for(var i=new Array(s),a=e.values(),o,l;(o=a.next())&&!o.done;){for(var c=t.values(),d=!1,h=0;(l=c.next())&&!l.done;){if(!i[h]&&n.equals(o.value,l.value,o.value,l.value,e,t,n)){d=i[h]=!0;break}h++}if(!d)return!1}return!0}function N5e(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function S5e(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function $G(e,t,n,s){return(s===f5e||s===m5e||s===h5e)&&(e.$$typeof||t.$$typeof)?!0:u5e(t,s)&&n.equals(e[s],t[s],s,s,e,t,n)}var _5e="[object Arguments]",P5e="[object Boolean]",C5e="[object Date]",k5e="[object Error]",T5e="[object Map]",A5e="[object Number]",E5e="[object Object]",O5e="[object RegExp]",M5e="[object Set]",D5e="[object String]",I5e="[object URL]",L5e=Array.isArray,r5=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,n5=Object.assign,R5e=Object.prototype.toString.call.bind(Object.prototype.toString);function $5e(e){var t=e.areArraysEqual,n=e.areDatesEqual,s=e.areErrorsEqual,i=e.areFunctionsEqual,a=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,d=e.areRegExpsEqual,h=e.areSetsEqual,m=e.areTypedArraysEqual,f=e.areUrlsEqual;return function(x,p,y){if(x===p)return!0;if(x==null||p==null)return!1;var b=typeof x;if(b!==typeof p)return!1;if(b!=="object")return b==="number"?o(x,p,y):b==="function"?i(x,p,y):!1;var w=x.constructor;if(w!==p.constructor)return!1;if(w===Object)return l(x,p,y);if(L5e(x))return t(x,p,y);if(r5!=null&&r5(x))return m(x,p,y);if(w===Date)return n(x,p,y);if(w===RegExp)return d(x,p,y);if(w===Map)return a(x,p,y);if(w===Set)return h(x,p,y);var N=R5e(x);return N===C5e?n(x,p,y):N===O5e?d(x,p,y):N===T5e?a(x,p,y):N===M5e?h(x,p,y):N===E5e?typeof x.then!="function"&&typeof p.then!="function"&&l(x,p,y):N===I5e?f(x,p,y):N===k5e?s(x,p,y):N===_5e?l(x,p,y):N===P5e||N===A5e||N===D5e?c(x,p,y):!1}}function F5e(e){var t=e.circular,n=e.createCustomConfig,s=e.strict,i={areArraysEqual:s?$f:p5e,areDatesEqual:x5e,areErrorsEqual:g5e,areFunctionsEqual:v5e,areMapsEqual:s?YR(e5,$f):e5,areNumbersEqual:y5e,areObjectsEqual:s?$f:j5e,arePrimitiveWrappersEqual:b5e,areRegExpsEqual:w5e,areSetsEqual:s?YR(t5,$f):t5,areTypedArraysEqual:s?$f:N5e,areUrlsEqual:S5e};if(n&&(i=n5({},i,n(i))),t){var a=iy(i.areArraysEqual),o=iy(i.areMapsEqual),l=iy(i.areObjectsEqual),c=iy(i.areSetsEqual);i=n5({},i,{areArraysEqual:a,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return i}function z5e(e){return function(t,n,s,i,a,o,l){return e(t,n,l)}}function B5e(e){var t=e.circular,n=e.comparator,s=e.createState,i=e.equals,a=e.strict;if(s)return function(c,d){var h=s(),m=h.cache,f=m===void 0?t?new WeakMap:void 0:m,g=h.meta;return n(c,d,{cache:f,equals:i,meta:g,strict:a})};if(t)return function(c,d){return n(c,d,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var o={cache:void 0,equals:i,meta:void 0,strict:a};return function(c,d){return n(c,d,o)}}var V5e=Ec();Ec({strict:!0});Ec({circular:!0});Ec({circular:!0,strict:!0});Ec({createInternalComparator:function(){return cu}});Ec({strict:!0,createInternalComparator:function(){return cu}});Ec({circular:!0,createInternalComparator:function(){return cu}});Ec({circular:!0,createInternalComparator:function(){return cu},strict:!0});function Ec(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,s=e.createInternalComparator,i=e.createState,a=e.strict,o=a===void 0?!1:a,l=F5e(e),c=$5e(l),d=s?s(c):z5e(c);return B5e({circular:n,comparator:c,createState:i,equals:d,strict:o})}function U5e(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function s5(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,s=function i(a){n<0&&(n=a),a-n>t?(e(a),n=-1):U5e(i)};requestAnimationFrame(s)}function BP(e){"@babel/helpers - typeof";return BP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},BP(e)}function W5e(e){return G5e(e)||K5e(e)||q5e(e)||H5e()}function H5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q5e(e,t){if(e){if(typeof e=="string")return i5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i5(e,t)}}function i5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function K5e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function G5e(e){if(Array.isArray(e))return e}function Z5e(){var e={},t=function(){return null},n=!1,s=function i(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var o=a,l=W5e(o),c=l[0],d=l.slice(1);if(typeof c=="number"){s5(i.bind(null,d),c);return}i(c),s5(i.bind(null,d));return}BP(a)==="object"&&(e=a,t(e)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(a){n=!1,s(a)},subscribe:function(a){return t=a,function(){t=function(){return null}}}}}function Wx(e){"@babel/helpers - typeof";return Wx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wx(e)}function a5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function o5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?a5(Object(n),!0).forEach(function(s){FG(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function FG(e,t,n){return t=Y5e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y5e(e){var t=X5e(e,"string");return Wx(t)==="symbol"?t:String(t)}function X5e(e,t){if(Wx(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Wx(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Q5e=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(s,i){return s.filter(function(a){return i.includes(a)})})},J5e=function(t){return t},e6e=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},bp=function(t,n){return Object.keys(n).reduce(function(s,i){return o5(o5({},s),{},FG({},i,t(i,n[i])))},{})},l5=function(t,n,s){return t.map(function(i){return"".concat(e6e(i)," ").concat(n,"ms ").concat(s)}).join(",")};function t6e(e,t){return s6e(e)||n6e(e,t)||zG(e,t)||r6e()}function r6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n6e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(h){d=!0,i=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function s6e(e){if(Array.isArray(e))return e}function i6e(e){return l6e(e)||o6e(e)||zG(e)||a6e()}function a6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zG(e,t){if(e){if(typeof e=="string")return VP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VP(e,t)}}function o6e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function l6e(e){if(Array.isArray(e))return VP(e)}function VP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var Dj=1e-4,BG=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},VG=function(t,n){return t.map(function(s,i){return s*Math.pow(n,i)}).reduce(function(s,i){return s+i})},c5=function(t,n){return function(s){var i=BG(t,n);return VG(i,s)}},c6e=function(t,n){return function(s){var i=BG(t,n),a=[].concat(i6e(i.map(function(o,l){return o*l}).slice(1)),[0]);return VG(a,s)}},d5=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];var i=n[0],a=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,a=0,o=1,l=1;break;case"ease":i=.25,a=.1,o=.25,l=1;break;case"ease-in":i=.42,a=0,o=1,l=1;break;case"ease-out":i=.42,a=0,o=.58,l=1;break;case"ease-in-out":i=0,a=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),h=t6e(d,4);i=h[0],a=h[1],o=h[2],l=h[3]}}}var m=c5(i,o),f=c5(a,l),g=c6e(i,o),x=function(b){return b>1?1:b<0?0:b},p=function(b){for(var w=b>1?1:b,N=w,S=0;S<8;++S){var P=m(N)-w,C=g(N);if(Math.abs(P-w)<Dj||C<Dj)return f(N);N=x(N-P/C)}return f(N)};return p.isStepper=!1,p},d6e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,s=n===void 0?100:n,i=t.damping,a=i===void 0?8:i,o=t.dt,l=o===void 0?17:o,c=function(h,m,f){var g=-(h-m)*s,x=f*a,p=f+(g-x)*l/1e3,y=f*l/1e3+h;return Math.abs(y-m)<Dj&&Math.abs(p)<Dj?[m,0]:[y,p]};return c.isStepper=!0,c.dt=l,c},u6e=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return d5(i);case"spring":return d6e();default:if(i.split("(")[0]==="cubic-bezier")return d5(i)}return typeof i=="function"?i:null};function Hx(e){"@babel/helpers - typeof";return Hx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hx(e)}function u5(e){return f6e(e)||m6e(e)||UG(e)||h6e()}function h6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m6e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function f6e(e){if(Array.isArray(e))return WP(e)}function h5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Ln(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?h5(Object(n),!0).forEach(function(s){UP(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function UP(e,t,n){return t=p6e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p6e(e){var t=x6e(e,"string");return Hx(t)==="symbol"?t:String(t)}function x6e(e,t){if(Hx(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Hx(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function g6e(e,t){return j6e(e)||y6e(e,t)||UG(e,t)||v6e()}function v6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UG(e,t){if(e){if(typeof e=="string")return WP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WP(e,t)}}function WP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function y6e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(h){d=!0,i=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function j6e(e){if(Array.isArray(e))return e}var Ij=function(t,n,s){return t+(n-t)*s},HP=function(t){var n=t.from,s=t.to;return n!==s},b6e=function e(t,n,s){var i=bp(function(a,o){if(HP(o)){var l=t(o.from,o.to,o.velocity),c=g6e(l,2),d=c[0],h=c[1];return Ln(Ln({},o),{},{from:d,velocity:h})}return o},n);return s<1?bp(function(a,o){return HP(o)?Ln(Ln({},o),{},{velocity:Ij(o.velocity,i[a].velocity,s),from:Ij(o.from,i[a].from,s)}):o},n):e(t,i,s-1)};const w6e=function(e,t,n,s,i){var a=Q5e(e,t),o=a.reduce(function(y,b){return Ln(Ln({},y),{},UP({},b,[e[b],t[b]]))},{}),l=a.reduce(function(y,b){return Ln(Ln({},y),{},UP({},b,{from:e[b],velocity:0,to:t[b]}))},{}),c=-1,d,h,m=function(){return null},f=function(){return bp(function(b,w){return w.from},l)},g=function(){return!Object.values(l).filter(HP).length},x=function(b){d||(d=b);var w=b-d,N=w/n.dt;l=b6e(n,l,N),i(Ln(Ln(Ln({},e),t),f())),d=b,g()||(c=requestAnimationFrame(m))},p=function(b){h||(h=b);var w=(b-h)/s,N=bp(function(P,C){return Ij.apply(void 0,u5(C).concat([n(w)]))},o);if(i(Ln(Ln(Ln({},e),t),N)),w<1)c=requestAnimationFrame(m);else{var S=bp(function(P,C){return Ij.apply(void 0,u5(C).concat([n(1)]))},o);i(Ln(Ln(Ln({},e),t),S))}};return m=n.isStepper?x:p,function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(c)}}};function lm(e){"@babel/helpers - typeof";return lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lm(e)}var N6e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function S6e(e,t){if(e==null)return{};var n=_6e(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function _6e(e,t){if(e==null)return{};var n={},s=Object.keys(e),i,a;for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function xS(e){return T6e(e)||k6e(e)||C6e(e)||P6e()}function P6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C6e(e,t){if(e){if(typeof e=="string")return qP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qP(e,t)}}function k6e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function T6e(e){if(Array.isArray(e))return qP(e)}function qP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function m5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Wi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?m5(Object(n),!0).forEach(function(s){ep(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function ep(e,t,n){return t=WG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A6e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E6e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,WG(s.key),s)}}function O6e(e,t,n){return t&&E6e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function WG(e){var t=M6e(e,"string");return lm(t)==="symbol"?t:String(t)}function M6e(e,t){if(lm(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(lm(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function D6e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KP(e,t)}function KP(e,t){return KP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},KP(e,t)}function I6e(e){var t=L6e();return function(){var s=Lj(e),i;if(t){var a=Lj(this).constructor;i=Reflect.construct(s,arguments,a)}else i=s.apply(this,arguments);return GP(this,i)}}function GP(e,t){if(t&&(lm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ZP(e)}function ZP(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L6e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Lj(e){return Lj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Lj(e)}var Ya=function(e){D6e(n,e);var t=I6e(n);function n(s,i){var a;A6e(this,n),a=t.call(this,s,i);var o=a.props,l=o.isActive,c=o.attributeName,d=o.from,h=o.to,m=o.steps,f=o.children,g=o.duration;if(a.handleStyleChange=a.handleStyleChange.bind(ZP(a)),a.changeStyle=a.changeStyle.bind(ZP(a)),!l||g<=0)return a.state={style:{}},typeof f=="function"&&(a.state={style:h}),GP(a);if(m&&m.length)a.state={style:m[0].style};else if(d){if(typeof f=="function")return a.state={style:d},GP(a);a.state={style:c?ep({},c,d):d}}else a.state={style:{}};return a}return O6e(n,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,o=i.canBegin;this.mounted=!0,!(!a||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,o=a.isActive,l=a.canBegin,c=a.attributeName,d=a.shouldReAnimate,h=a.to,m=a.from,f=this.state.style;if(l){if(!o){var g={style:c?ep({},c,h):h};this.state&&f&&(c&&f[c]!==h||!c&&f!==h)&&this.setState(g);return}if(!(V5e(i.to,h)&&i.canBegin&&i.isActive)){var x=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=x||d?m:i.to;if(this.state&&f){var y={style:c?ep({},c,p):p};(c&&f[c]!==p||!c&&f!==p)&&this.setState(y)}this.runAnimation(Wi(Wi({},this.props),{},{from:p,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,o=i.from,l=i.to,c=i.duration,d=i.easing,h=i.begin,m=i.onAnimationEnd,f=i.onAnimationStart,g=w6e(o,l,u6e(d),c,this.changeStyle),x=function(){a.stopJSAnimation=g()};this.manager.start([f,h,x,c,m])}},{key:"runStepAnimation",value:function(i){var a=this,o=i.steps,l=i.begin,c=i.onAnimationStart,d=o[0],h=d.style,m=d.duration,f=m===void 0?0:m,g=function(p,y,b){if(b===0)return p;var w=y.duration,N=y.easing,S=N===void 0?"ease":N,P=y.style,C=y.properties,k=y.onAnimationEnd,O=b>0?o[b-1]:y,I=C||Object.keys(P);if(typeof S=="function"||S==="spring")return[].concat(xS(p),[a.runJSAnimation.bind(a,{from:O.style,to:P,duration:w,easing:S}),w]);var T=l5(I,w,S),E=Wi(Wi(Wi({},O.style),P),{},{transition:T});return[].concat(xS(p),[E,w,k]).filter(J5e)};return this.manager.start([c].concat(xS(o.reduce(g,[h,Math.max(f,l)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=Z5e());var a=i.begin,o=i.duration,l=i.attributeName,c=i.to,d=i.easing,h=i.onAnimationStart,m=i.onAnimationEnd,f=i.steps,g=i.children,x=this.manager;if(this.unSubscribe=x.subscribe(this.handleStyleChange),typeof d=="function"||typeof g=="function"||d==="spring"){this.runJSAnimation(i);return}if(f.length>1){this.runStepAnimation(i);return}var p=l?ep({},l,c):c,y=l5(Object.keys(p),o,d);x.start([h,a,Wi(Wi({},p),{},{transition:y}),o,m])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var l=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=S6e(i,N6e),d=j.Children.count(a),h=this.state.style;if(typeof a=="function")return a(h);if(!l||d===0||o<=0)return a;var m=function(g){var x=g.props,p=x.style,y=p===void 0?{}:p,b=x.className,w=j.cloneElement(g,Wi(Wi({},c),{},{style:Wi(Wi({},y),h),className:b}));return w};return d===1?m(j.Children.only(a)):re.createElement("div",null,j.Children.map(a,function(f){return m(f)}))}}]),n}(j.PureComponent);Ya.displayName="Animate";Ya.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Ya.propTypes={from:ar.oneOfType([ar.object,ar.string]),to:ar.oneOfType([ar.object,ar.string]),attributeName:ar.string,duration:ar.number,begin:ar.number,easing:ar.oneOfType([ar.string,ar.func]),steps:ar.arrayOf(ar.shape({duration:ar.number.isRequired,style:ar.object.isRequired,easing:ar.oneOfType([ar.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),ar.func]),properties:ar.arrayOf("string"),onAnimationEnd:ar.func})),children:ar.oneOfType([ar.node,ar.func]),isActive:ar.bool,canBegin:ar.bool,onAnimationEnd:ar.func,shouldReAnimate:ar.bool,onAnimationStart:ar.func,onAnimationReStart:ar.func};function qx(e){"@babel/helpers - typeof";return qx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qx(e)}function Rj(){return Rj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Rj.apply(this,arguments)}function R6e(e,t){return B6e(e)||z6e(e,t)||F6e(e,t)||$6e()}function $6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F6e(e,t){if(e){if(typeof e=="string")return f5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f5(e,t)}}function f5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function z6e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(h){d=!0,i=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function B6e(e){if(Array.isArray(e))return e}function p5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function x5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?p5(Object(n),!0).forEach(function(s){V6e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function V6e(e,t,n){return t=U6e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U6e(e){var t=W6e(e,"string");return qx(t)=="symbol"?t:t+""}function W6e(e,t){if(qx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(qx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var g5=function(t,n,s,i,a){var o=Math.min(Math.abs(s)/2,Math.abs(i)/2),l=i>=0?1:-1,c=s>=0?1:-1,d=i>=0&&s>=0||i<0&&s<0?1:0,h;if(o>0&&a instanceof Array){for(var m=[0,0,0,0],f=0,g=4;f<g;f++)m[f]=a[f]>o?o:a[f];h="M".concat(t,",").concat(n+l*m[0]),m[0]>0&&(h+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(d,",").concat(t+c*m[0],",").concat(n)),h+="L ".concat(t+s-c*m[1],",").concat(n),m[1]>0&&(h+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(d,`,
        `).concat(t+s,",").concat(n+l*m[1])),h+="L ".concat(t+s,",").concat(n+i-l*m[2]),m[2]>0&&(h+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(d,`,
        `).concat(t+s-c*m[2],",").concat(n+i)),h+="L ".concat(t+c*m[3],",").concat(n+i),m[3]>0&&(h+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(d,`,
        `).concat(t,",").concat(n+i-l*m[3])),h+="Z"}else if(o>0&&a===+a&&a>0){var x=Math.min(o,a);h="M ".concat(t,",").concat(n+l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(t+c*x,",").concat(n,`
            L `).concat(t+s-c*x,",").concat(n,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(t+s,",").concat(n+l*x,`
            L `).concat(t+s,",").concat(n+i-l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(t+s-c*x,",").concat(n+i,`
            L `).concat(t+c*x,",").concat(n+i,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(t,",").concat(n+i-l*x," Z")}else h="M ".concat(t,",").concat(n," h ").concat(s," v ").concat(i," h ").concat(-s," Z");return h},H6e=function(t,n){if(!t||!n)return!1;var s=t.x,i=t.y,a=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(a,a+l),h=Math.max(a,a+l),m=Math.min(o,o+c),f=Math.max(o,o+c);return s>=d&&s<=h&&i>=m&&i<=f}return!1},q6e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},OE=function(t){var n=x5(x5({},q6e),t),s=j.useRef(),i=j.useState(-1),a=R6e(i,2),o=a[0],l=a[1];j.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var S=s.current.getTotalLength();S&&l(S)}catch{}},[]);var c=n.x,d=n.y,h=n.width,m=n.height,f=n.radius,g=n.className,x=n.animationEasing,p=n.animationDuration,y=n.animationBegin,b=n.isAnimationActive,w=n.isUpdateAnimationActive;if(c!==+c||d!==+d||h!==+h||m!==+m||h===0||m===0)return null;var N=Kt("recharts-rectangle",g);return w?re.createElement(Ya,{canBegin:o>0,from:{width:h,height:m,x:c,y:d},to:{width:h,height:m,x:c,y:d},duration:p,animationEasing:x,isActive:w},function(S){var P=S.width,C=S.height,k=S.x,O=S.y;return re.createElement(Ya,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:p,isActive:b,easing:x},re.createElement("path",Rj({},It(n,!0),{className:N,d:g5(k,O,P,C,f),ref:s})))}):re.createElement("path",Rj({},It(n,!0),{className:N,d:g5(c,d,h,m,f)}))};function YP(){return YP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},YP.apply(this,arguments)}var zw=function(t){var n=t.cx,s=t.cy,i=t.r,a=t.className,o=Kt("recharts-dot",a);return n===+n&&s===+s&&i===+i?re.createElement("circle",YP({},It(t,!1),tj(t),{className:o,cx:n,cy:s,r:i})):null};function Kx(e){"@babel/helpers - typeof";return Kx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kx(e)}var K6e=["x","y","top","left","width","height","className"];function XP(){return XP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},XP.apply(this,arguments)}function v5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function G6e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?v5(Object(n),!0).forEach(function(s){Z6e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Z6e(e,t,n){return t=Y6e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y6e(e){var t=X6e(e,"string");return Kx(t)=="symbol"?t:t+""}function X6e(e,t){if(Kx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Kx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Q6e(e,t){if(e==null)return{};var n=J6e(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function J6e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var e$e=function(t,n,s,i,a,o){return"M".concat(t,",").concat(a,"v").concat(i,"M").concat(o,",").concat(n,"h").concat(s)},t$e=function(t){var n=t.x,s=n===void 0?0:n,i=t.y,a=i===void 0?0:i,o=t.top,l=o===void 0?0:o,c=t.left,d=c===void 0?0:c,h=t.width,m=h===void 0?0:h,f=t.height,g=f===void 0?0:f,x=t.className,p=Q6e(t,K6e),y=G6e({x:s,y:a,top:l,left:d,width:m,height:g},p);return!Ue(s)||!Ue(a)||!Ue(m)||!Ue(g)||!Ue(l)||!Ue(d)?null:re.createElement("path",XP({},It(y,!0),{className:Kt("recharts-cross",x),d:e$e(s,a,m,g,l,d)}))},r$e=sK,n$e=r$e(Object.getPrototypeOf,Object),s$e=n$e,i$e=sl,a$e=s$e,o$e=il,l$e="[object Object]",c$e=Function.prototype,d$e=Object.prototype,HG=c$e.toString,u$e=d$e.hasOwnProperty,h$e=HG.call(Object);function m$e(e){if(!o$e(e)||i$e(e)!=l$e)return!1;var t=a$e(e);if(t===null)return!0;var n=u$e.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&HG.call(n)==h$e}var f$e=m$e;const p$e=hr(f$e);var x$e=sl,g$e=il,v$e="[object Boolean]";function y$e(e){return e===!0||e===!1||g$e(e)&&x$e(e)==v$e}var j$e=y$e;const b$e=hr(j$e);function Gx(e){"@babel/helpers - typeof";return Gx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gx(e)}function $j(){return $j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},$j.apply(this,arguments)}function w$e(e,t){return P$e(e)||_$e(e,t)||S$e(e,t)||N$e()}function N$e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S$e(e,t){if(e){if(typeof e=="string")return y5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y5(e,t)}}function y5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function _$e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(h){d=!0,i=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function P$e(e){if(Array.isArray(e))return e}function j5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function b5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?j5(Object(n),!0).forEach(function(s){C$e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function C$e(e,t,n){return t=k$e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k$e(e){var t=T$e(e,"string");return Gx(t)=="symbol"?t:t+""}function T$e(e,t){if(Gx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Gx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var w5=function(t,n,s,i,a){var o=s-i,l;return l="M ".concat(t,",").concat(n),l+="L ".concat(t+s,",").concat(n),l+="L ".concat(t+s-o/2,",").concat(n+a),l+="L ".concat(t+s-o/2-i,",").concat(n+a),l+="L ".concat(t,",").concat(n," Z"),l},A$e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},E$e=function(t){var n=b5(b5({},A$e),t),s=j.useRef(),i=j.useState(-1),a=w$e(i,2),o=a[0],l=a[1];j.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var N=s.current.getTotalLength();N&&l(N)}catch{}},[]);var c=n.x,d=n.y,h=n.upperWidth,m=n.lowerWidth,f=n.height,g=n.className,x=n.animationEasing,p=n.animationDuration,y=n.animationBegin,b=n.isUpdateAnimationActive;if(c!==+c||d!==+d||h!==+h||m!==+m||f!==+f||h===0&&m===0||f===0)return null;var w=Kt("recharts-trapezoid",g);return b?re.createElement(Ya,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:f,x:c,y:d},to:{upperWidth:h,lowerWidth:m,height:f,x:c,y:d},duration:p,animationEasing:x,isActive:b},function(N){var S=N.upperWidth,P=N.lowerWidth,C=N.height,k=N.x,O=N.y;return re.createElement(Ya,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:p,easing:x},re.createElement("path",$j({},It(n,!0),{className:w,d:w5(k,O,S,P,C),ref:s})))}):re.createElement("g",null,re.createElement("path",$j({},It(n,!0),{className:w,d:w5(c,d,h,m,f)})))},O$e=["option","shapeType","propTransformer","activeClassName","isActive"];function Zx(e){"@babel/helpers - typeof";return Zx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zx(e)}function M$e(e,t){if(e==null)return{};var n=D$e(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function D$e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function N5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Fj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?N5(Object(n),!0).forEach(function(s){I$e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function I$e(e,t,n){return t=L$e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L$e(e){var t=R$e(e,"string");return Zx(t)=="symbol"?t:t+""}function R$e(e,t){if(Zx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Zx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $$e(e,t){return Fj(Fj({},t),e)}function F$e(e,t){return e==="symbols"}function S5(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return re.createElement(OE,n);case"trapezoid":return re.createElement(E$e,n);case"sector":return re.createElement(DG,n);case"symbols":if(F$e(t))return re.createElement(XA,n);break;default:return null}}function z$e(e){return j.isValidElement(e)?e.props:e}function B$e(e){var t=e.option,n=e.shapeType,s=e.propTransformer,i=s===void 0?$$e:s,a=e.activeClassName,o=a===void 0?"recharts-active-shape":a,l=e.isActive,c=M$e(e,O$e),d;if(j.isValidElement(t))d=j.cloneElement(t,Fj(Fj({},c),z$e(t)));else if(Et(t))d=t(c);else if(p$e(t)&&!b$e(t)){var h=i(t,c);d=re.createElement(S5,{shapeType:n,elementProps:h})}else{var m=c;d=re.createElement(S5,{shapeType:n,elementProps:m})}return l?re.createElement(Nr,{className:o},d):d}function Bw(e,t){return t!=null&&"trapezoids"in e.props}function Vw(e,t){return t!=null&&"sectors"in e.props}function Yx(e,t){return t!=null&&"points"in e.props}function V$e(e,t){var n,s,i=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,a=e.y===(t==null||(s=t.labelViewBox)===null||s===void 0?void 0:s.y)||e.y===t.y;return i&&a}function U$e(e,t){var n=e.endAngle===t.endAngle,s=e.startAngle===t.startAngle;return n&&s}function W$e(e,t){var n=e.x===t.x,s=e.y===t.y,i=e.z===t.z;return n&&s&&i}function H$e(e,t){var n;return Bw(e,t)?n=V$e:Vw(e,t)?n=U$e:Yx(e,t)&&(n=W$e),n}function q$e(e,t){var n;return Bw(e,t)?n="trapezoids":Vw(e,t)?n="sectors":Yx(e,t)&&(n="points"),n}function K$e(e,t){if(Bw(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(Vw(e,t)){var s;return(s=t.tooltipPayload)===null||s===void 0||(s=s[0])===null||s===void 0||(s=s.payload)===null||s===void 0?void 0:s.payload}return Yx(e,t)?t.payload:{}}function G$e(e){var t=e.activeTooltipItem,n=e.graphicalItem,s=e.itemData,i=q$e(n,t),a=K$e(n,t),o=s.filter(function(c,d){var h=am(a,c),m=n.props[i].filter(function(x){var p=H$e(n,t);return p(x,t)}),f=n.props[i].indexOf(m[m.length-1]),g=d===f;return h&&g}),l=s.indexOf(o[o.length-1]);return l}var Z$e=Math.ceil,Y$e=Math.max;function X$e(e,t,n,s){for(var i=-1,a=Y$e(Z$e((t-e)/(n||1)),0),o=Array(a);a--;)o[s?a:++i]=e,e+=n;return o}var Q$e=X$e,J$e=NK,_5=1/0,eFe=17976931348623157e292;function tFe(e){if(!e)return e===0?e:0;if(e=J$e(e),e===_5||e===-_5){var t=e<0?-1:1;return t*eFe}return e===e?e:0}var qG=tFe,rFe=Q$e,nFe=Aw,gS=qG;function sFe(e){return function(t,n,s){return s&&typeof s!="number"&&nFe(t,n,s)&&(n=s=void 0),t=gS(t),n===void 0?(n=t,t=0):n=gS(n),s=s===void 0?t<n?1:-1:gS(s),rFe(t,n,s,e)}}var iFe=sFe,aFe=iFe,oFe=aFe(),lFe=oFe;const zj=hr(lFe);function Xx(e){"@babel/helpers - typeof";return Xx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xx(e)}function P5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function C5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?P5(Object(n),!0).forEach(function(s){KG(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function KG(e,t,n){return t=cFe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cFe(e){var t=dFe(e,"string");return Xx(t)=="symbol"?t:t+""}function dFe(e,t){if(Xx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Xx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uFe=["Webkit","Moz","O","ms"],hFe=function(t,n){var s=t.replace(/(\w)/,function(a){return a.toUpperCase()}),i=uFe.reduce(function(a,o){return C5(C5({},a),{},KG({},o+s,n))},{});return i[t]=n,i};function cm(e){"@babel/helpers - typeof";return cm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cm(e)}function Bj(){return Bj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Bj.apply(this,arguments)}function k5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function vS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?k5(Object(n),!0).forEach(function(s){Rs(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function mFe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T5(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,ZG(s.key),s)}}function fFe(e,t,n){return t&&T5(e.prototype,t),n&&T5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function pFe(e,t,n){return t=Vj(t),xFe(e,GG()?Reflect.construct(t,n||[],Vj(e).constructor):t.apply(e,n))}function xFe(e,t){if(t&&(cm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gFe(e)}function gFe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GG=function(){return!!e})()}function Vj(e){return Vj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Vj(e)}function vFe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QP(e,t)}function QP(e,t){return QP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},QP(e,t)}function Rs(e,t,n){return t=ZG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZG(e){var t=yFe(e,"string");return cm(t)=="symbol"?t:t+""}function yFe(e,t){if(cm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(cm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jFe=function(t){var n=t.data,s=t.startIndex,i=t.endIndex,a=t.x,o=t.width,l=t.travellerWidth;if(!n||!n.length)return{};var c=n.length,d=yp().domain(zj(0,c)).range([a,a+o-l]),h=d.domain().map(function(m){return d(m)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(s),endX:d(i),scale:d,scaleValues:h}},A5=function(t){return t.changedTouches&&!!t.changedTouches.length},dm=function(e){function t(n){var s;return mFe(this,t),s=pFe(this,t,[n]),Rs(s,"handleDrag",function(i){s.leaveTimer&&(clearTimeout(s.leaveTimer),s.leaveTimer=null),s.state.isTravellerMoving?s.handleTravellerMove(i):s.state.isSlideMoving&&s.handleSlideDrag(i)}),Rs(s,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&s.handleDrag(i.changedTouches[0])}),Rs(s,"handleDragEnd",function(){s.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=s.props,a=i.endIndex,o=i.onDragEnd,l=i.startIndex;o==null||o({endIndex:a,startIndex:l})}),s.detachDragEndListener()}),Rs(s,"handleLeaveWrapper",function(){(s.state.isTravellerMoving||s.state.isSlideMoving)&&(s.leaveTimer=window.setTimeout(s.handleDragEnd,s.props.leaveTimeOut))}),Rs(s,"handleEnterSlideOrTraveller",function(){s.setState({isTextActive:!0})}),Rs(s,"handleLeaveSlideOrTraveller",function(){s.setState({isTextActive:!1})}),Rs(s,"handleSlideDragStart",function(i){var a=A5(i)?i.changedTouches[0]:i;s.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),s.attachDragEndListener()}),s.travellerDragStartHandlers={startX:s.handleTravellerDragStart.bind(s,"startX"),endX:s.handleTravellerDragStart.bind(s,"endX")},s.state={},s}return vFe(t,e),fFe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(s){var i=s.startX,a=s.endX,o=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,h=d.length-1,m=Math.min(i,a),f=Math.max(i,a),g=t.getIndexInRange(o,m),x=t.getIndexInRange(o,f);return{startIndex:g-g%c,endIndex:x===h?h:x-x%c}}},{key:"getTextOfTick",value:function(s){var i=this.props,a=i.data,o=i.tickFormatter,l=i.dataKey,c=ps(a[s],l,s);return Et(o)?o(c,s):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(s){var i=this.state,a=i.slideMoveStartX,o=i.startX,l=i.endX,c=this.props,d=c.x,h=c.width,m=c.travellerWidth,f=c.startIndex,g=c.endIndex,x=c.onChange,p=s.pageX-a;p>0?p=Math.min(p,d+h-m-l,d+h-m-o):p<0&&(p=Math.max(p,d-o,d-l));var y=this.getIndex({startX:o+p,endX:l+p});(y.startIndex!==f||y.endIndex!==g)&&x&&x(y),this.setState({startX:o+p,endX:l+p,slideMoveStartX:s.pageX})}},{key:"handleTravellerDragStart",value:function(s,i){var a=A5(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:s,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(s){var i=this.state,a=i.brushMoveStartX,o=i.movingTravellerId,l=i.endX,c=i.startX,d=this.state[o],h=this.props,m=h.x,f=h.width,g=h.travellerWidth,x=h.onChange,p=h.gap,y=h.data,b={startX:this.state.startX,endX:this.state.endX},w=s.pageX-a;w>0?w=Math.min(w,m+f-g-d):w<0&&(w=Math.max(w,m-d)),b[o]=d+w;var N=this.getIndex(b),S=N.startIndex,P=N.endIndex,C=function(){var O=y.length-1;return o==="startX"&&(l>c?S%p===0:P%p===0)||l<c&&P===O||o==="endX"&&(l>c?P%p===0:S%p===0)||l>c&&P===O};this.setState(Rs(Rs({},o,d+w),"brushMoveStartX",s.pageX),function(){x&&C()&&x(N)})}},{key:"handleTravellerMoveKeyboard",value:function(s,i){var a=this,o=this.state,l=o.scaleValues,c=o.startX,d=o.endX,h=this.state[i],m=l.indexOf(h);if(m!==-1){var f=m+s;if(!(f===-1||f>=l.length)){var g=l[f];i==="startX"&&g>=d||i==="endX"&&g<=c||this.setState(Rs({},i,g),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var s=this.props,i=s.x,a=s.y,o=s.width,l=s.height,c=s.fill,d=s.stroke;return re.createElement("rect",{stroke:d,fill:c,x:i,y:a,width:o,height:l})}},{key:"renderPanorama",value:function(){var s=this.props,i=s.x,a=s.y,o=s.width,l=s.height,c=s.data,d=s.children,h=s.padding,m=j.Children.only(d);return m?re.cloneElement(m,{x:i,y:a,width:o,height:l,margin:h,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(s,i){var a,o,l=this,c=this.props,d=c.y,h=c.travellerWidth,m=c.height,f=c.traveller,g=c.ariaLabel,x=c.data,p=c.startIndex,y=c.endIndex,b=Math.max(s,this.props.x),w=vS(vS({},It(this.props,!1)),{},{x:b,y:d,width:h,height:m}),N=g||"Min value: ".concat((a=x[p])===null||a===void 0?void 0:a.name,", Max value: ").concat((o=x[y])===null||o===void 0?void 0:o.name);return re.createElement(Nr,{tabIndex:0,role:"slider","aria-label":N,"aria-valuenow":s,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(P){["ArrowLeft","ArrowRight"].includes(P.key)&&(P.preventDefault(),P.stopPropagation(),l.handleTravellerMoveKeyboard(P.key==="ArrowRight"?1:-1,i))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(f,w))}},{key:"renderSlide",value:function(s,i){var a=this.props,o=a.y,l=a.height,c=a.stroke,d=a.travellerWidth,h=Math.min(s,i)+d,m=Math.max(Math.abs(i-s)-d,0);return re.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:h,y:o,width:m,height:l})}},{key:"renderText",value:function(){var s=this.props,i=s.startIndex,a=s.endIndex,o=s.y,l=s.height,c=s.travellerWidth,d=s.stroke,h=this.state,m=h.startX,f=h.endX,g=5,x={pointerEvents:"none",fill:d};return re.createElement(Nr,{className:"recharts-brush-texts"},re.createElement(xj,Bj({textAnchor:"end",verticalAnchor:"middle",x:Math.min(m,f)-g,y:o+l/2},x),this.getTextOfTick(i)),re.createElement(xj,Bj({textAnchor:"start",verticalAnchor:"middle",x:Math.max(m,f)+c+g,y:o+l/2},x),this.getTextOfTick(a)))}},{key:"render",value:function(){var s=this.props,i=s.data,a=s.className,o=s.children,l=s.x,c=s.y,d=s.width,h=s.height,m=s.alwaysShowText,f=this.state,g=f.startX,x=f.endX,p=f.isTextActive,y=f.isSlideMoving,b=f.isTravellerMoving,w=f.isTravellerFocused;if(!i||!i.length||!Ue(l)||!Ue(c)||!Ue(d)||!Ue(h)||d<=0||h<=0)return null;var N=Kt("recharts-brush",a),S=re.Children.count(o)===1,P=hFe("userSelect","none");return re.createElement(Nr,{className:N,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:P},this.renderBackground(),S&&this.renderPanorama(),this.renderSlide(g,x),this.renderTravellerLayer(g,"startX"),this.renderTravellerLayer(x,"endX"),(p||y||b||w||m)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(s){var i=s.x,a=s.y,o=s.width,l=s.height,c=s.stroke,d=Math.floor(a+l/2)-1;return re.createElement(re.Fragment,null,re.createElement("rect",{x:i,y:a,width:o,height:l,fill:c,stroke:"none"}),re.createElement("line",{x1:i+1,y1:d,x2:i+o-1,y2:d,fill:"none",stroke:"#fff"}),re.createElement("line",{x1:i+1,y1:d+2,x2:i+o-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(s,i){var a;return re.isValidElement(s)?a=re.cloneElement(s,i):Et(s)?a=s(i):a=t.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(s,i){var a=s.data,o=s.width,l=s.x,c=s.travellerWidth,d=s.updateId,h=s.startIndex,m=s.endIndex;if(a!==i.prevData||d!==i.prevUpdateId)return vS({prevData:a,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o},a&&a.length?jFe({data:a,width:o,x:l,travellerWidth:c,startIndex:h,endIndex:m}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||l!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([l,l+o-c]);var f=i.scale.domain().map(function(g){return i.scale(g)});return{prevData:a,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o,startX:i.scale(s.startIndex),endX:i.scale(s.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(s,i){for(var a=s.length,o=0,l=a-1;l-o>1;){var c=Math.floor((o+l)/2);s[c]>i?l=c:o=c}return i>=s[l]?l:o}}])}(j.PureComponent);Rs(dm,"displayName","Brush");Rs(dm,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var bFe=sE;function wFe(e,t){var n;return bFe(e,function(s,i,a){return n=t(s,i,a),!n}),!!n}var NFe=wFe,SFe=Yq,_Fe=kc,PFe=NFe,CFe=Is,kFe=Aw;function TFe(e,t,n){var s=CFe(e)?SFe:PFe;return n&&kFe(e,t,n)&&(t=void 0),s(e,_Fe(t))}var AFe=TFe;const EFe=hr(AFe);var Ha=function(t,n){var s=t.alwaysShow,i=t.ifOverflow;return s&&(i="extendDomain"),i===n},E5=vK;function OFe(e,t,n){t=="__proto__"&&E5?E5(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var MFe=OFe,DFe=MFe,IFe=xK,LFe=kc;function RFe(e,t){var n={};return t=LFe(t),IFe(e,function(s,i,a){DFe(n,i,t(s,i,a))}),n}var $Fe=RFe;const FFe=hr($Fe);function zFe(e,t){for(var n=-1,s=e==null?0:e.length;++n<s;)if(!t(e[n],n,e))return!1;return!0}var BFe=zFe,VFe=sE;function UFe(e,t){var n=!0;return VFe(e,function(s,i,a){return n=!!t(s,i,a),n}),n}var WFe=UFe,HFe=BFe,qFe=WFe,KFe=kc,GFe=Is,ZFe=Aw;function YFe(e,t,n){var s=GFe(e)?HFe:qFe;return n&&ZFe(e,t,n)&&(t=void 0),s(e,KFe(t))}var XFe=YFe;const YG=hr(XFe);var QFe=["x","y"];function Qx(e){"@babel/helpers - typeof";return Qx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qx(e)}function JP(){return JP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},JP.apply(this,arguments)}function O5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Ff(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?O5(Object(n),!0).forEach(function(s){JFe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function JFe(e,t,n){return t=e8e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function e8e(e){var t=t8e(e,"string");return Qx(t)=="symbol"?t:t+""}function t8e(e,t){if(Qx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Qx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function r8e(e,t){if(e==null)return{};var n=n8e(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function n8e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function s8e(e,t){var n=e.x,s=e.y,i=r8e(e,QFe),a="".concat(n),o=parseInt(a,10),l="".concat(s),c=parseInt(l,10),d="".concat(t.height||i.height),h=parseInt(d,10),m="".concat(t.width||i.width),f=parseInt(m,10);return Ff(Ff(Ff(Ff(Ff({},t),i),o?{x:o}:{}),c?{y:c}:{}),{},{height:h,width:f,name:t.name,radius:t.radius})}function M5(e){return re.createElement(B$e,JP({shapeType:"rectangle",propTransformer:s8e,activeClassName:"recharts-active-bar"},e))}var i8e=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(s,i){if(typeof t=="number")return t;var a=typeof s=="number";return a?t(s,i):(a||Yd(),n)}},a8e=["value","background"],XG;function um(e){"@babel/helpers - typeof";return um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},um(e)}function o8e(e,t){if(e==null)return{};var n=l8e(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function l8e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function Uj(){return Uj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Uj.apply(this,arguments)}function D5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function un(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?D5(Object(n),!0).forEach(function(s){$l(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function c8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I5(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,JG(s.key),s)}}function d8e(e,t,n){return t&&I5(e.prototype,t),n&&I5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u8e(e,t,n){return t=Wj(t),h8e(e,QG()?Reflect.construct(t,n||[],Wj(e).constructor):t.apply(e,n))}function h8e(e,t){if(t&&(um(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m8e(e)}function m8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QG=function(){return!!e})()}function Wj(e){return Wj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Wj(e)}function f8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eC(e,t)}function eC(e,t){return eC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},eC(e,t)}function $l(e,t,n){return t=JG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JG(e){var t=p8e(e,"string");return um(t)=="symbol"?t:t+""}function p8e(e,t){if(um(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(um(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qg=function(e){function t(){var n;c8e(this,t);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return n=u8e(this,t,[].concat(i)),$l(n,"state",{isAnimationFinished:!1}),$l(n,"id",Km("recharts-bar-")),$l(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),$l(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return f8e(t,e),d8e(t,[{key:"renderRectanglesStatically",value:function(s){var i=this,a=this.props,o=a.shape,l=a.dataKey,c=a.activeIndex,d=a.activeBar,h=It(this.props,!1);return s&&s.map(function(m,f){var g=f===c,x=g?d:o,p=un(un(un({},h),m),{},{isActive:g,option:x,index:f,dataKey:l,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return re.createElement(Nr,Uj({className:"recharts-bar-rectangle"},rj(i.props,m,f),{key:"rectangle-".concat(m==null?void 0:m.x,"-").concat(m==null?void 0:m.y,"-").concat(m==null?void 0:m.value,"-").concat(f)}),re.createElement(M5,p))})}},{key:"renderRectanglesWithAnimation",value:function(){var s=this,i=this.props,a=i.data,o=i.layout,l=i.isAnimationActive,c=i.animationBegin,d=i.animationDuration,h=i.animationEasing,m=i.animationId,f=this.state.prevData;return re.createElement(Ya,{begin:c,duration:d,isActive:l,easing:h,from:{t:0},to:{t:1},key:"bar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(g){var x=g.t,p=a.map(function(y,b){var w=f&&f[b];if(w){var N=Fn(w.x,y.x),S=Fn(w.y,y.y),P=Fn(w.width,y.width),C=Fn(w.height,y.height);return un(un({},y),{},{x:N(x),y:S(x),width:P(x),height:C(x)})}if(o==="horizontal"){var k=Fn(0,y.height),O=k(x);return un(un({},y),{},{y:y.y+y.height-O,height:O})}var I=Fn(0,y.width),T=I(x);return un(un({},y),{},{width:T})});return re.createElement(Nr,null,s.renderRectanglesStatically(p))})}},{key:"renderRectangles",value:function(){var s=this.props,i=s.data,a=s.isAnimationActive,o=this.state.prevData;return a&&i&&i.length&&(!o||!am(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var s=this,i=this.props,a=i.data,o=i.dataKey,l=i.activeIndex,c=It(this.props.background,!1);return a.map(function(d,h){d.value;var m=d.background,f=o8e(d,a8e);if(!m)return null;var g=un(un(un(un(un({},f),{},{fill:"#eee"},m),c),rj(s.props,d,h)),{},{onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd,dataKey:o,index:h,className:"recharts-bar-background-rectangle"});return re.createElement(M5,Uj({key:"background-bar-".concat(h),option:s.props.background,isActive:h===l},g))})}},{key:"renderErrorBar",value:function(s,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.data,l=a.xAxis,c=a.yAxis,d=a.layout,h=a.children,m=Mi(h,Hg);if(!m)return null;var f=d==="vertical"?o[0].height/2:o[0].width/2,g=function(y,b){var w=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:w,errorVal:ps(y,b)}},x={clipPath:s?"url(#clipPath-".concat(i,")"):null};return re.createElement(Nr,x,m.map(function(p){return re.cloneElement(p,{key:"error-bar-".concat(i,"-").concat(p.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,offset:f,dataPointFormatter:g})}))}},{key:"render",value:function(){var s=this.props,i=s.hide,a=s.data,o=s.className,l=s.xAxis,c=s.yAxis,d=s.left,h=s.top,m=s.width,f=s.height,g=s.isAnimationActive,x=s.background,p=s.id;if(i||!a||!a.length)return null;var y=this.state.isAnimationFinished,b=Kt("recharts-bar",o),w=l&&l.allowDataOverflow,N=c&&c.allowDataOverflow,S=w||N,P=Vt(p)?this.id:p;return re.createElement(Nr,{className:b},w||N?re.createElement("defs",null,re.createElement("clipPath",{id:"clipPath-".concat(P)},re.createElement("rect",{x:w?d:d-m/2,y:N?h:h-f/2,width:w?m:m*2,height:N?f:f*2}))):null,re.createElement(Nr,{className:"recharts-bar-rectangles",clipPath:S?"url(#clipPath-".concat(P,")"):null},x?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(S,P),(!g||y)&&$o.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(s,i){return s.animationId!==i.prevAnimationId?{prevAnimationId:s.animationId,curData:s.data,prevData:i.curData}:s.data!==i.curData?{curData:s.data}:null}}])}(j.PureComponent);XG=qg;$l(qg,"displayName","Bar");$l(qg,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Ua.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});$l(qg,"getComposedData",function(e){var t=e.props,n=e.item,s=e.barPosition,i=e.bandSize,a=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,d=e.stackedData,h=e.dataStartIndex,m=e.displayedData,f=e.offset,g=HLe(s,n);if(!g)return null;var x=t.layout,p=n.type.defaultProps,y=p!==void 0?un(un({},p),n.props):n.props,b=y.dataKey,w=y.children,N=y.minPointSize,S=x==="horizontal"?o:a,P=d?S.scale.domain():null,C=JLe({numericAxis:S}),k=Mi(w,_K),O=m.map(function(I,T){var E,D,B,M,U,H;d?E=qLe(d[h+T],P):(E=ps(I,b),Array.isArray(E)||(E=[C,E]));var K=i8e(N,XG.defaultProps.minPointSize)(E[1],T);if(x==="horizontal"){var W,V=[o.scale(E[0]),o.scale(E[1])],z=V[0],q=V[1];D=DR({axis:a,ticks:l,bandSize:i,offset:g.offset,entry:I,index:T}),B=(W=q??z)!==null&&W!==void 0?W:void 0,M=g.size;var J=z-q;if(U=Number.isNaN(J)?0:J,H={x:D,y:o.y,width:M,height:o.height},Math.abs(K)>0&&Math.abs(U)<Math.abs(K)){var pe=ia(U||K)*(Math.abs(K)-Math.abs(U));B-=pe,U+=pe}}else{var ye=[a.scale(E[0]),a.scale(E[1])],Ne=ye[0],ke=ye[1];if(D=Ne,B=DR({axis:o,ticks:c,bandSize:i,offset:g.offset,entry:I,index:T}),M=ke-Ne,U=g.size,H={x:a.x,y:B,width:a.width,height:U},Math.abs(K)>0&&Math.abs(M)<Math.abs(K)){var Ee=ia(M||K)*(Math.abs(K)-Math.abs(M));M+=Ee}}return un(un(un({},I),{},{x:D,y:B,width:M,height:U,value:d?E:E[1],payload:I,background:H},k&&k[T]&&k[T].props),{},{tooltipPayload:[EG(n,I)],tooltipPosition:{x:D+M/2,y:B+U/2}})});return un({data:O,layout:x},f)});function Jx(e){"@babel/helpers - typeof";return Jx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jx(e)}function x8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L5(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,eZ(s.key),s)}}function g8e(e,t,n){return t&&L5(e.prototype,t),n&&L5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function R5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Xi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?R5(Object(n),!0).forEach(function(s){Uw(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Uw(e,t,n){return t=eZ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eZ(e){var t=v8e(e,"string");return Jx(t)=="symbol"?t:t+""}function v8e(e,t){if(Jx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Jx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tZ=function(t,n,s,i,a){var o=t.width,l=t.height,c=t.layout,d=t.children,h=Object.keys(n),m={left:s.left,leftMirror:s.left,right:o-s.right,rightMirror:o-s.right,top:s.top,topMirror:s.top,bottom:l-s.bottom,bottomMirror:l-s.bottom},f=!!zs(d,qg);return h.reduce(function(g,x){var p=n[x],y=p.orientation,b=p.domain,w=p.padding,N=w===void 0?{}:w,S=p.mirror,P=p.reversed,C="".concat(y).concat(S?"Mirror":""),k,O,I,T,E;if(p.type==="number"&&(p.padding==="gap"||p.padding==="no-gap")){var D=b[1]-b[0],B=1/0,M=p.categoricalDomain.sort();if(M.forEach(function(ye,Ne){Ne>0&&(B=Math.min((ye||0)-(M[Ne-1]||0),B))}),Number.isFinite(B)){var U=B/D,H=p.layout==="vertical"?s.height:s.width;if(p.padding==="gap"&&(k=U*H/2),p.padding==="no-gap"){var K=Gd(t.barCategoryGap,U*H),W=U*H/2;k=W-K-(W-K)/H*K}}}i==="xAxis"?O=[s.left+(N.left||0)+(k||0),s.left+s.width-(N.right||0)-(k||0)]:i==="yAxis"?O=c==="horizontal"?[s.top+s.height-(N.bottom||0),s.top+(N.top||0)]:[s.top+(N.top||0)+(k||0),s.top+s.height-(N.bottom||0)-(k||0)]:O=p.range,P&&(O=[O[1],O[0]]);var V=ULe(p,a,f),z=V.scale,q=V.realScaleType;z.domain(b).range(O),WLe(z);var J=QLe(z,Xi(Xi({},p),{},{realScaleType:q}));i==="xAxis"?(E=y==="top"&&!S||y==="bottom"&&S,I=s.left,T=m[C]-E*p.height):i==="yAxis"&&(E=y==="left"&&!S||y==="right"&&S,I=m[C]-E*p.width,T=s.top);var pe=Xi(Xi(Xi({},p),J),{},{realScaleType:q,x:I,y:T,scale:z,width:i==="xAxis"?s.width:p.width,height:i==="yAxis"?s.height:p.height});return pe.bandSize=Ej(pe,J),!p.hide&&i==="xAxis"?m[C]+=(E?-1:1)*pe.height:p.hide||(m[C]+=(E?-1:1)*pe.width),Xi(Xi({},g),{},Uw({},x,pe))},{})},rZ=function(t,n){var s=t.x,i=t.y,a=n.x,o=n.y;return{x:Math.min(s,a),y:Math.min(i,o),width:Math.abs(a-s),height:Math.abs(o-i)}},y8e=function(t){var n=t.x1,s=t.y1,i=t.x2,a=t.y2;return rZ({x:n,y:s},{x:i,y:a})},nZ=function(){function e(t){x8e(this,e),this.scale=t}return g8e(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=s.bandAware,a=s.position;if(n!==void 0){if(a)switch(a){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var s=this.range(),i=s[0],a=s[s.length-1];return i<=a?n>=i&&n<=a:n>=a&&n<=i}}],[{key:"create",value:function(n){return new e(n)}}])}();Uw(nZ,"EPS",1e-4);var ME=function(t){var n=Object.keys(t).reduce(function(s,i){return Xi(Xi({},s),{},Uw({},i,nZ.create(t[i])))},{});return Xi(Xi({},n),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.bandAware,l=a.position;return FFe(i,function(c,d){return n[d].apply(c,{bandAware:o,position:l})})},isInRange:function(i){return YG(i,function(a,o){return n[o].isInRange(a)})}})};function j8e(e){return(e%180+180)%180}var b8e=function(t){var n=t.width,s=t.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=j8e(i),o=a*Math.PI/180,l=Math.atan(s/n),c=o>l&&o<Math.PI-l?s/Math.sin(o):n/Math.cos(o);return Math.abs(c)},w8e=kc,N8e=zg,S8e=kw;function _8e(e){return function(t,n,s){var i=Object(t);if(!N8e(t)){var a=w8e(n);t=S8e(t),n=function(l){return a(i[l],l,i)}}var o=e(t,n,s);return o>-1?i[a?t[o]:o]:void 0}}var P8e=_8e,C8e=qG;function k8e(e){var t=C8e(e),n=t%1;return t===t?n?t-n:t:0}var T8e=k8e,A8e=dK,E8e=kc,O8e=T8e,M8e=Math.max;function D8e(e,t,n){var s=e==null?0:e.length;if(!s)return-1;var i=n==null?0:O8e(n);return i<0&&(i=M8e(s+i,0)),A8e(e,E8e(t),i)}var I8e=D8e,L8e=P8e,R8e=I8e,$8e=L8e(R8e),F8e=$8e;const z8e=hr(F8e);var B8e=T1e(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),DE=j.createContext(void 0),IE=j.createContext(void 0),sZ=j.createContext(void 0),iZ=j.createContext({}),aZ=j.createContext(void 0),oZ=j.createContext(0),lZ=j.createContext(0),$5=function(t){var n=t.state,s=n.xAxisMap,i=n.yAxisMap,a=n.offset,o=t.clipPathId,l=t.children,c=t.width,d=t.height,h=B8e(a);return re.createElement(DE.Provider,{value:s},re.createElement(IE.Provider,{value:i},re.createElement(iZ.Provider,{value:a},re.createElement(sZ.Provider,{value:h},re.createElement(aZ.Provider,{value:o},re.createElement(oZ.Provider,{value:d},re.createElement(lZ.Provider,{value:c},l)))))))},V8e=function(){return j.useContext(aZ)},cZ=function(t){var n=j.useContext(DE);n==null&&Yd();var s=n[t];return s==null&&Yd(),s},U8e=function(){var t=j.useContext(DE);return Nl(t)},W8e=function(){var t=j.useContext(IE),n=z8e(t,function(s){return YG(s.domain,Number.isFinite)});return n||Nl(t)},dZ=function(t){var n=j.useContext(IE);n==null&&Yd();var s=n[t];return s==null&&Yd(),s},H8e=function(){var t=j.useContext(sZ);return t},q8e=function(){return j.useContext(iZ)},LE=function(){return j.useContext(lZ)},RE=function(){return j.useContext(oZ)};function hm(e){"@babel/helpers - typeof";return hm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hm(e)}function K8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G8e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,hZ(s.key),s)}}function Z8e(e,t,n){return t&&G8e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Y8e(e,t,n){return t=Hj(t),X8e(e,uZ()?Reflect.construct(t,n||[],Hj(e).constructor):t.apply(e,n))}function X8e(e,t){if(t&&(hm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Q8e(e)}function Q8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uZ=function(){return!!e})()}function Hj(e){return Hj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Hj(e)}function J8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tC(e,t)}function tC(e,t){return tC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},tC(e,t)}function F5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function z5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?F5(Object(n),!0).forEach(function(s){$E(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function $E(e,t,n){return t=hZ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hZ(e){var t=eze(e,"string");return hm(t)=="symbol"?t:t+""}function eze(e,t){if(hm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(hm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tze(e,t){return ize(e)||sze(e,t)||nze(e,t)||rze()}function rze(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nze(e,t){if(e){if(typeof e=="string")return B5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B5(e,t)}}function B5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function sze(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(h){d=!0,i=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function ize(e){if(Array.isArray(e))return e}function rC(){return rC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},rC.apply(this,arguments)}var aze=function(t,n){var s;return re.isValidElement(t)?s=re.cloneElement(t,n):Et(t)?s=t(n):s=re.createElement("line",rC({},n,{className:"recharts-reference-line-line"})),s},oze=function(t,n,s,i,a,o,l,c,d){var h=a.x,m=a.y,f=a.width,g=a.height;if(s){var x=d.y,p=t.y.apply(x,{position:o});if(Ha(d,"discard")&&!t.y.isInRange(p))return null;var y=[{x:h+f,y:p},{x:h,y:p}];return c==="left"?y.reverse():y}if(n){var b=d.x,w=t.x.apply(b,{position:o});if(Ha(d,"discard")&&!t.x.isInRange(w))return null;var N=[{x:w,y:m+g},{x:w,y:m}];return l==="top"?N.reverse():N}if(i){var S=d.segment,P=S.map(function(C){return t.apply(C,{position:o})});return Ha(d,"discard")&&EFe(P,function(C){return!t.isInRange(C)})?null:P}return null};function lze(e){var t=e.x,n=e.y,s=e.segment,i=e.xAxisId,a=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,d=V8e(),h=cZ(i),m=dZ(a),f=H8e();if(!d||!f)return null;Lo(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var g=ME({x:h.scale,y:m.scale}),x=_n(t),p=_n(n),y=s&&s.length===2,b=oze(g,x,p,y,f,e.position,h.orientation,m.orientation,e);if(!b)return null;var w=tze(b,2),N=w[0],S=N.x,P=N.y,C=w[1],k=C.x,O=C.y,I=Ha(e,"hidden")?"url(#".concat(d,")"):void 0,T=z5(z5({clipPath:I},It(e,!0)),{},{x1:S,y1:P,x2:k,y2:O});return re.createElement(Nr,{className:Kt("recharts-reference-line",l)},aze(o,T),Xn.renderCallByParent(e,y8e({x1:S,y1:P,x2:k,y2:O})))}var FE=function(e){function t(){return K8e(this,t),Y8e(this,t,arguments)}return J8e(t,e),Z8e(t,[{key:"render",value:function(){return re.createElement(lze,this.props)}}])}(re.Component);$E(FE,"displayName","ReferenceLine");$E(FE,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function nC(){return nC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},nC.apply(this,arguments)}function mm(e){"@babel/helpers - typeof";return mm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mm(e)}function V5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function U5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?V5(Object(n),!0).forEach(function(s){Ww(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function cze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dze(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,fZ(s.key),s)}}function uze(e,t,n){return t&&dze(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function hze(e,t,n){return t=qj(t),mze(e,mZ()?Reflect.construct(t,n||[],qj(e).constructor):t.apply(e,n))}function mze(e,t){if(t&&(mm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fze(e)}function fze(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mZ=function(){return!!e})()}function qj(e){return qj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qj(e)}function pze(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sC(e,t)}function sC(e,t){return sC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},sC(e,t)}function Ww(e,t,n){return t=fZ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fZ(e){var t=xze(e,"string");return mm(t)=="symbol"?t:t+""}function xze(e,t){if(mm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(mm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gze=function(t){var n=t.x,s=t.y,i=t.xAxis,a=t.yAxis,o=ME({x:i.scale,y:a.scale}),l=o.apply({x:n,y:s},{bandAware:!0});return Ha(t,"discard")&&!o.isInRange(l)?null:l},Hw=function(e){function t(){return cze(this,t),hze(this,t,arguments)}return pze(t,e),uze(t,[{key:"render",value:function(){var s=this.props,i=s.x,a=s.y,o=s.r,l=s.alwaysShow,c=s.clipPathId,d=_n(i),h=_n(a);if(Lo(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!h)return null;var m=gze(this.props);if(!m)return null;var f=m.x,g=m.y,x=this.props,p=x.shape,y=x.className,b=Ha(this.props,"hidden")?"url(#".concat(c,")"):void 0,w=U5(U5({clipPath:b},It(this.props,!0)),{},{cx:f,cy:g});return re.createElement(Nr,{className:Kt("recharts-reference-dot",y)},t.renderDot(p,w),Xn.renderCallByParent(this.props,{x:f-o,y:g-o,width:2*o,height:2*o}))}}])}(re.Component);Ww(Hw,"displayName","ReferenceDot");Ww(Hw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Ww(Hw,"renderDot",function(e,t){var n;return re.isValidElement(e)?n=re.cloneElement(e,t):Et(e)?n=e(t):n=re.createElement(zw,nC({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function iC(){return iC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},iC.apply(this,arguments)}function fm(e){"@babel/helpers - typeof";return fm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fm(e)}function W5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function H5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?W5(Object(n),!0).forEach(function(s){qw(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function vze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yze(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,xZ(s.key),s)}}function jze(e,t,n){return t&&yze(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function bze(e,t,n){return t=Kj(t),wze(e,pZ()?Reflect.construct(t,n||[],Kj(e).constructor):t.apply(e,n))}function wze(e,t){if(t&&(fm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nze(e)}function Nze(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pZ=function(){return!!e})()}function Kj(e){return Kj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Kj(e)}function Sze(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aC(e,t)}function aC(e,t){return aC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},aC(e,t)}function qw(e,t,n){return t=xZ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xZ(e){var t=_ze(e,"string");return fm(t)=="symbol"?t:t+""}function _ze(e,t){if(fm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(fm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pze=function(t,n,s,i,a){var o=a.x1,l=a.x2,c=a.y1,d=a.y2,h=a.xAxis,m=a.yAxis;if(!h||!m)return null;var f=ME({x:h.scale,y:m.scale}),g={x:t?f.x.apply(o,{position:"start"}):f.x.rangeMin,y:s?f.y.apply(c,{position:"start"}):f.y.rangeMin},x={x:n?f.x.apply(l,{position:"end"}):f.x.rangeMax,y:i?f.y.apply(d,{position:"end"}):f.y.rangeMax};return Ha(a,"discard")&&(!f.isInRange(g)||!f.isInRange(x))?null:rZ(g,x)},Kw=function(e){function t(){return vze(this,t),bze(this,t,arguments)}return Sze(t,e),jze(t,[{key:"render",value:function(){var s=this.props,i=s.x1,a=s.x2,o=s.y1,l=s.y2,c=s.className,d=s.alwaysShow,h=s.clipPathId;Lo(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=_n(i),f=_n(a),g=_n(o),x=_n(l),p=this.props.shape;if(!m&&!f&&!g&&!x&&!p)return null;var y=Pze(m,f,g,x,this.props);if(!y&&!p)return null;var b=Ha(this.props,"hidden")?"url(#".concat(h,")"):void 0;return re.createElement(Nr,{className:Kt("recharts-reference-area",c)},t.renderRect(p,H5(H5({clipPath:b},It(this.props,!0)),y)),Xn.renderCallByParent(this.props,y))}}])}(re.Component);qw(Kw,"displayName","ReferenceArea");qw(Kw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});qw(Kw,"renderRect",function(e,t){var n;return re.isValidElement(e)?n=re.cloneElement(e,t):Et(e)?n=e(t):n=re.createElement(OE,iC({},t,{className:"recharts-reference-area-rect"})),n});function gZ(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var s=[],i=0;i<e.length;i+=t)s.push(e[i]);return s}function Cze(e,t,n){var s={width:e.width+t.width,height:e.height+t.height};return b8e(s,n)}function kze(e,t,n){var s=n==="width",i=e.x,a=e.y,o=e.width,l=e.height;return t===1?{start:s?i:a,end:s?i+o:a+l}:{start:s?i+o:a+l,end:s?i:a}}function Gj(e,t,n,s,i){if(e*t<e*s||e*t>e*i)return!1;var a=n();return e*(t-e*a/2-s)>=0&&e*(t+e*a/2-i)<=0}function Tze(e,t){return gZ(e,t+1)}function Aze(e,t,n,s,i){for(var a=(s||[]).slice(),o=t.start,l=t.end,c=0,d=1,h=o,m=function(){var x=s==null?void 0:s[c];if(x===void 0)return{v:gZ(s,d)};var p=c,y,b=function(){return y===void 0&&(y=n(x,p)),y},w=x.coordinate,N=c===0||Gj(e,w,b,h,l);N||(c=0,h=o,d+=1),N&&(h=w+e*(b()/2+i),c+=d)},f;d<=a.length;)if(f=m(),f)return f.v;return[]}function eg(e){"@babel/helpers - typeof";return eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eg(e)}function q5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Zn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?q5(Object(n),!0).forEach(function(s){Eze(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Eze(e,t,n){return t=Oze(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oze(e){var t=Mze(e,"string");return eg(t)=="symbol"?t:t+""}function Mze(e,t){if(eg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(eg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dze(e,t,n,s,i){for(var a=(s||[]).slice(),o=a.length,l=t.start,c=t.end,d=function(f){var g=a[f],x,p=function(){return x===void 0&&(x=n(g,f)),x};if(f===o-1){var y=e*(g.coordinate+e*p()/2-c);a[f]=g=Zn(Zn({},g),{},{tickCoord:y>0?g.coordinate-y*e:g.coordinate})}else a[f]=g=Zn(Zn({},g),{},{tickCoord:g.coordinate});var b=Gj(e,g.tickCoord,p,l,c);b&&(c=g.tickCoord-e*(p()/2+i),a[f]=Zn(Zn({},g),{},{isShow:!0}))},h=o-1;h>=0;h--)d(h);return a}function Ize(e,t,n,s,i,a){var o=(s||[]).slice(),l=o.length,c=t.start,d=t.end;if(a){var h=s[l-1],m=n(h,l-1),f=e*(h.coordinate+e*m/2-d);o[l-1]=h=Zn(Zn({},h),{},{tickCoord:f>0?h.coordinate-f*e:h.coordinate});var g=Gj(e,h.tickCoord,function(){return m},c,d);g&&(d=h.tickCoord-e*(m/2+i),o[l-1]=Zn(Zn({},h),{},{isShow:!0}))}for(var x=a?l-1:l,p=function(w){var N=o[w],S,P=function(){return S===void 0&&(S=n(N,w)),S};if(w===0){var C=e*(N.coordinate-e*P()/2-c);o[w]=N=Zn(Zn({},N),{},{tickCoord:C<0?N.coordinate-C*e:N.coordinate})}else o[w]=N=Zn(Zn({},N),{},{tickCoord:N.coordinate});var k=Gj(e,N.tickCoord,P,c,d);k&&(c=N.tickCoord+e*(P()/2+i),o[w]=Zn(Zn({},N),{},{isShow:!0}))},y=0;y<x;y++)p(y);return o}function zE(e,t,n){var s=e.tick,i=e.ticks,a=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,d=e.tickFormatter,h=e.unit,m=e.angle;if(!i||!i.length||!s)return[];if(Ue(c)||Ua.isSsr)return Tze(i,typeof c=="number"&&Ue(c)?c:0);var f=[],g=l==="top"||l==="bottom"?"width":"height",x=h&&g==="width"?vp(h,{fontSize:t,letterSpacing:n}):{width:0,height:0},p=function(N,S){var P=Et(d)?d(N.value,S):N.value;return g==="width"?Cze(vp(P,{fontSize:t,letterSpacing:n}),x,m):vp(P,{fontSize:t,letterSpacing:n})[g]},y=i.length>=2?ia(i[1].coordinate-i[0].coordinate):1,b=kze(a,y,g);return c==="equidistantPreserveStart"?Aze(y,b,p,i,o):(c==="preserveStart"||c==="preserveStartEnd"?f=Ize(y,b,p,i,o,c==="preserveStartEnd"):f=Dze(y,b,p,i,o),f.filter(function(w){return w.isShow}))}var Lze=["viewBox"],Rze=["viewBox"],$ze=["ticks"];function pm(e){"@babel/helpers - typeof";return pm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pm(e)}function Xu(){return Xu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Xu.apply(this,arguments)}function K5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function is(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?K5(Object(n),!0).forEach(function(s){BE(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function yS(e,t){if(e==null)return{};var n=Fze(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Fze(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function zze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G5(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,yZ(s.key),s)}}function Bze(e,t,n){return t&&G5(e.prototype,t),n&&G5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Vze(e,t,n){return t=Zj(t),Uze(e,vZ()?Reflect.construct(t,n||[],Zj(e).constructor):t.apply(e,n))}function Uze(e,t){if(t&&(pm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wze(e)}function Wze(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vZ=function(){return!!e})()}function Zj(e){return Zj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Zj(e)}function Hze(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oC(e,t)}function oC(e,t){return oC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},oC(e,t)}function BE(e,t,n){return t=yZ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yZ(e){var t=qze(e,"string");return pm(t)=="symbol"?t:t+""}function qze(e,t){if(pm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(pm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ef=function(e){function t(n){var s;return zze(this,t),s=Vze(this,t,[n]),s.state={fontSize:"",letterSpacing:""},s}return Hze(t,e),Bze(t,[{key:"shouldComponentUpdate",value:function(s,i){var a=s.viewBox,o=yS(s,Lze),l=this.props,c=l.viewBox,d=yS(l,Rze);return!fh(a,c)||!fh(o,d)||!fh(i,this.state)}},{key:"componentDidMount",value:function(){var s=this.layerReference;if(s){var i=s.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(s){var i=this.props,a=i.x,o=i.y,l=i.width,c=i.height,d=i.orientation,h=i.tickSize,m=i.mirror,f=i.tickMargin,g,x,p,y,b,w,N=m?-1:1,S=s.tickSize||h,P=Ue(s.tickCoord)?s.tickCoord:s.coordinate;switch(d){case"top":g=x=s.coordinate,y=o+ +!m*c,p=y-N*S,w=p-N*f,b=P;break;case"left":p=y=s.coordinate,x=a+ +!m*l,g=x-N*S,b=g-N*f,w=P;break;case"right":p=y=s.coordinate,x=a+ +m*l,g=x+N*S,b=g+N*f,w=P;break;default:g=x=s.coordinate,y=o+ +m*c,p=y+N*S,w=p+N*f,b=P;break}return{line:{x1:g,y1:p,x2:x,y2:y},tick:{x:b,y:w}}}},{key:"getTickTextAnchor",value:function(){var s=this.props,i=s.orientation,a=s.mirror,o;switch(i){case"left":o=a?"start":"end";break;case"right":o=a?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var s=this.props,i=s.orientation,a=s.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=a?"start":"end";break;default:o=a?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var s=this.props,i=s.x,a=s.y,o=s.width,l=s.height,c=s.orientation,d=s.mirror,h=s.axisLine,m=is(is(is({},It(this.props,!1)),It(h,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var f=+(c==="top"&&!d||c==="bottom"&&d);m=is(is({},m),{},{x1:i,y1:a+f*l,x2:i+o,y2:a+f*l})}else{var g=+(c==="left"&&!d||c==="right"&&d);m=is(is({},m),{},{x1:i+g*o,y1:a,x2:i+g*o,y2:a+l})}return re.createElement("line",Xu({},m,{className:Kt("recharts-cartesian-axis-line",Oi(h,"className"))}))}},{key:"renderTicks",value:function(s,i,a){var o=this,l=this.props,c=l.tickLine,d=l.stroke,h=l.tick,m=l.tickFormatter,f=l.unit,g=zE(is(is({},this.props),{},{ticks:s}),i,a),x=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),y=It(this.props,!1),b=It(h,!1),w=is(is({},y),{},{fill:"none"},It(c,!1)),N=g.map(function(S,P){var C=o.getTickLineCoord(S),k=C.line,O=C.tick,I=is(is(is(is({textAnchor:x,verticalAnchor:p},y),{},{stroke:"none",fill:d},b),O),{},{index:P,payload:S,visibleTicksCount:g.length,tickFormatter:m});return re.createElement(Nr,Xu({className:"recharts-cartesian-axis-tick",key:"tick-".concat(S.value,"-").concat(S.coordinate,"-").concat(S.tickCoord)},rj(o.props,S,P)),c&&re.createElement("line",Xu({},w,k,{className:Kt("recharts-cartesian-axis-tick-line",Oi(c,"className"))})),h&&t.renderTickItem(h,I,"".concat(Et(m)?m(S.value,P):S.value).concat(f||"")))});return re.createElement("g",{className:"recharts-cartesian-axis-ticks"},N)}},{key:"render",value:function(){var s=this,i=this.props,a=i.axisLine,o=i.width,l=i.height,c=i.ticksGenerator,d=i.className,h=i.hide;if(h)return null;var m=this.props,f=m.ticks,g=yS(m,$ze),x=f;return Et(c)&&(x=f&&f.length>0?c(this.props):c(g)),o<=0||l<=0||!x||!x.length?null:re.createElement(Nr,{className:Kt("recharts-cartesian-axis",d),ref:function(y){s.layerReference=y}},a&&this.renderAxisLine(),this.renderTicks(x,this.state.fontSize,this.state.letterSpacing),Xn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(s,i,a){var o;return re.isValidElement(s)?o=re.cloneElement(s,i):Et(s)?o=s(i):o=re.createElement(xj,Xu({},i,{className:"recharts-cartesian-axis-tick-value"}),a),o}}])}(j.Component);BE(ef,"displayName","CartesianAxis");BE(ef,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Kze=["x1","y1","x2","y2","key"],Gze=["offset"];function Xd(e){"@babel/helpers - typeof";return Xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xd(e)}function Z5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Qn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Z5(Object(n),!0).forEach(function(s){Zze(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Zze(e,t,n){return t=Yze(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yze(e){var t=Xze(e,"string");return Xd(t)=="symbol"?t:t+""}function Xze(e,t){if(Xd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Xd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ad(){return ad=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ad.apply(this,arguments)}function Y5(e,t){if(e==null)return{};var n=Qze(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Qze(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var Jze=function(t){var n=t.fill;if(!n||n==="none")return null;var s=t.fillOpacity,i=t.x,a=t.y,o=t.width,l=t.height,c=t.ry;return re.createElement("rect",{x:i,y:a,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:s,className:"recharts-cartesian-grid-bg"})};function jZ(e,t){var n;if(re.isValidElement(e))n=re.cloneElement(e,t);else if(Et(e))n=e(t);else{var s=t.x1,i=t.y1,a=t.x2,o=t.y2,l=t.key,c=Y5(t,Kze),d=It(c,!1);d.offset;var h=Y5(d,Gze);n=re.createElement("line",ad({},h,{x1:s,y1:i,x2:a,y2:o,fill:"none",key:l}))}return n}function eBe(e){var t=e.x,n=e.width,s=e.horizontal,i=s===void 0?!0:s,a=e.horizontalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(l,c){var d=Qn(Qn({},e),{},{x1:t,y1:l,x2:t+n,y2:l,key:"line-".concat(c),index:c});return jZ(i,d)});return re.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function tBe(e){var t=e.y,n=e.height,s=e.vertical,i=s===void 0?!0:s,a=e.verticalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(l,c){var d=Qn(Qn({},e),{},{x1:l,y1:t,x2:l,y2:t+n,key:"line-".concat(c),index:c});return jZ(i,d)});return re.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function rBe(e){var t=e.horizontalFill,n=e.fillOpacity,s=e.x,i=e.y,a=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,d=c===void 0?!0:c;if(!d||!t||!t.length)return null;var h=l.map(function(f){return Math.round(f+i-i)}).sort(function(f,g){return f-g});i!==h[0]&&h.unshift(0);var m=h.map(function(f,g){var x=!h[g+1],p=x?i+o-f:h[g+1]-f;if(p<=0)return null;var y=g%t.length;return re.createElement("rect",{key:"react-".concat(g),y:f,x:s,height:p,width:a,stroke:"none",fill:t[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return re.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function nBe(e){var t=e.vertical,n=t===void 0?!0:t,s=e.verticalFill,i=e.fillOpacity,a=e.x,o=e.y,l=e.width,c=e.height,d=e.verticalPoints;if(!n||!s||!s.length)return null;var h=d.map(function(f){return Math.round(f+a-a)}).sort(function(f,g){return f-g});a!==h[0]&&h.unshift(0);var m=h.map(function(f,g){var x=!h[g+1],p=x?a+l-f:h[g+1]-f;if(p<=0)return null;var y=g%s.length;return re.createElement("rect",{key:"react-".concat(g),x:f,y:o,width:p,height:c,stroke:"none",fill:s[y],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return re.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var sBe=function(t,n){var s=t.xAxis,i=t.width,a=t.height,o=t.offset;return TG(zE(Qn(Qn(Qn({},ef.defaultProps),s),{},{ticks:ko(s,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.left,o.left+o.width,n)},iBe=function(t,n){var s=t.yAxis,i=t.width,a=t.height,o=t.offset;return TG(zE(Qn(Qn(Qn({},ef.defaultProps),s),{},{ticks:ko(s,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.top,o.top+o.height,n)},Tu={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function lC(e){var t,n,s,i,a,o,l=LE(),c=RE(),d=q8e(),h=Qn(Qn({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Tu.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:Tu.fill,horizontal:(s=e.horizontal)!==null&&s!==void 0?s:Tu.horizontal,horizontalFill:(i=e.horizontalFill)!==null&&i!==void 0?i:Tu.horizontalFill,vertical:(a=e.vertical)!==null&&a!==void 0?a:Tu.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Tu.verticalFill,x:Ue(e.x)?e.x:d.left,y:Ue(e.y)?e.y:d.top,width:Ue(e.width)?e.width:d.width,height:Ue(e.height)?e.height:d.height}),m=h.x,f=h.y,g=h.width,x=h.height,p=h.syncWithTicks,y=h.horizontalValues,b=h.verticalValues,w=U8e(),N=W8e();if(!Ue(g)||g<=0||!Ue(x)||x<=0||!Ue(m)||m!==+m||!Ue(f)||f!==+f)return null;var S=h.verticalCoordinatesGenerator||sBe,P=h.horizontalCoordinatesGenerator||iBe,C=h.horizontalPoints,k=h.verticalPoints;if((!C||!C.length)&&Et(P)){var O=y&&y.length,I=P({yAxis:N?Qn(Qn({},N),{},{ticks:O?y:N.ticks}):void 0,width:l,height:c,offset:d},O?!0:p);Lo(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Xd(I),"]")),Array.isArray(I)&&(C=I)}if((!k||!k.length)&&Et(S)){var T=b&&b.length,E=S({xAxis:w?Qn(Qn({},w),{},{ticks:T?b:w.ticks}):void 0,width:l,height:c,offset:d},T?!0:p);Lo(Array.isArray(E),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Xd(E),"]")),Array.isArray(E)&&(k=E)}return re.createElement("g",{className:"recharts-cartesian-grid"},re.createElement(Jze,{fill:h.fill,fillOpacity:h.fillOpacity,x:h.x,y:h.y,width:h.width,height:h.height,ry:h.ry}),re.createElement(eBe,ad({},h,{offset:d,horizontalPoints:C,xAxis:w,yAxis:N})),re.createElement(tBe,ad({},h,{offset:d,verticalPoints:k,xAxis:w,yAxis:N})),re.createElement(rBe,ad({},h,{horizontalPoints:C})),re.createElement(nBe,ad({},h,{verticalPoints:k})))}lC.displayName="CartesianGrid";var aBe=["type","layout","connectNulls","ref"],oBe=["key"];function xm(e){"@babel/helpers - typeof";return xm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xm(e)}function X5(e,t){if(e==null)return{};var n=lBe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function lBe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function wp(){return wp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},wp.apply(this,arguments)}function Q5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Ls(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Q5(Object(n),!0).forEach(function(s){Qi(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Au(e){return hBe(e)||uBe(e)||dBe(e)||cBe()}function cBe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dBe(e,t){if(e){if(typeof e=="string")return cC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cC(e,t)}}function uBe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hBe(e){if(Array.isArray(e))return cC(e)}function cC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function mBe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J5(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,wZ(s.key),s)}}function fBe(e,t,n){return t&&J5(e.prototype,t),n&&J5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function pBe(e,t,n){return t=Yj(t),xBe(e,bZ()?Reflect.construct(t,n||[],Yj(e).constructor):t.apply(e,n))}function xBe(e,t){if(t&&(xm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gBe(e)}function gBe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bZ=function(){return!!e})()}function Yj(e){return Yj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Yj(e)}function vBe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dC(e,t)}function dC(e,t){return dC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},dC(e,t)}function Qi(e,t,n){return t=wZ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wZ(e){var t=yBe(e,"string");return xm(t)=="symbol"?t:t+""}function yBe(e,t){if(xm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(xm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gm=function(e){function t(){var n;mBe(this,t);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return n=pBe(this,t,[].concat(i)),Qi(n,"state",{isAnimationFinished:!0,totalLength:0}),Qi(n,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),Qi(n,"getStrokeDasharray",function(o,l,c){var d=c.reduce(function(b,w){return b+w});if(!d)return n.generateSimpleStrokeDasharray(l,o);for(var h=Math.floor(o/d),m=o%d,f=l-o,g=[],x=0,p=0;x<c.length;p+=c[x],++x)if(p+c[x]>m){g=[].concat(Au(c.slice(0,x)),[m-p]);break}var y=g.length%2===0?[0,f]:[f];return[].concat(Au(t.repeat(c,h)),Au(g),y).map(function(b){return"".concat(b,"px")}).join(", ")}),Qi(n,"id",Km("recharts-line-")),Qi(n,"pathRef",function(o){n.mainCurve=o}),Qi(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Qi(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return vBe(t,e),fBe(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();this.setState({totalLength:s})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();s!==this.state.totalLength&&this.setState({totalLength:s})}}},{key:"getTotalLength",value:function(){var s=this.mainCurve;try{return s&&s.getTotalLength&&s.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(s,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.points,l=a.xAxis,c=a.yAxis,d=a.layout,h=a.children,m=Mi(h,Hg);if(!m)return null;var f=function(p,y){return{x:p.x,y:p.y,value:p.value,errorVal:ps(p.payload,y)}},g={clipPath:s?"url(#clipPath-".concat(i,")"):null};return re.createElement(Nr,g,m.map(function(x){return re.cloneElement(x,{key:"bar-".concat(x.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,dataPointFormatter:f})}))}},{key:"renderDots",value:function(s,i,a){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,d=l.points,h=l.dataKey,m=It(this.props,!1),f=It(c,!0),g=d.map(function(p,y){var b=Ls(Ls(Ls({key:"dot-".concat(y),r:3},m),f),{},{index:y,cx:p.x,cy:p.y,value:p.value,dataKey:h,payload:p.payload,points:d});return t.renderDotItem(c,b)}),x={clipPath:s?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return re.createElement(Nr,wp({className:"recharts-line-dots",key:"dots"},x),g)}},{key:"renderCurveStatically",value:function(s,i,a,o){var l=this.props,c=l.type,d=l.layout,h=l.connectNulls;l.ref;var m=X5(l,aBe),f=Ls(Ls(Ls({},It(m,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(a,")"):null,points:s},o),{},{type:c,layout:d,connectNulls:h});return re.createElement(gh,wp({},f,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(s,i){var a=this,o=this.props,l=o.points,c=o.strokeDasharray,d=o.isAnimationActive,h=o.animationBegin,m=o.animationDuration,f=o.animationEasing,g=o.animationId,x=o.animateNewValues,p=o.width,y=o.height,b=this.state,w=b.prevPoints,N=b.totalLength;return re.createElement(Ya,{begin:h,duration:m,isActive:d,easing:f,from:{t:0},to:{t:1},key:"line-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(S){var P=S.t;if(w){var C=w.length/l.length,k=l.map(function(D,B){var M=Math.floor(B*C);if(w[M]){var U=w[M],H=Fn(U.x,D.x),K=Fn(U.y,D.y);return Ls(Ls({},D),{},{x:H(P),y:K(P)})}if(x){var W=Fn(p*2,D.x),V=Fn(y/2,D.y);return Ls(Ls({},D),{},{x:W(P),y:V(P)})}return Ls(Ls({},D),{},{x:D.x,y:D.y})});return a.renderCurveStatically(k,s,i)}var O=Fn(0,N),I=O(P),T;if(c){var E="".concat(c).split(/[,\s]+/gim).map(function(D){return parseFloat(D)});T=a.getStrokeDasharray(I,N,E)}else T=a.generateSimpleStrokeDasharray(N,I);return a.renderCurveStatically(l,s,i,{strokeDasharray:T})})}},{key:"renderCurve",value:function(s,i){var a=this.props,o=a.points,l=a.isAnimationActive,c=this.state,d=c.prevPoints,h=c.totalLength;return l&&o&&o.length&&(!d&&h>0||!am(d,o))?this.renderCurveWithAnimation(s,i):this.renderCurveStatically(o,s,i)}},{key:"render",value:function(){var s,i=this.props,a=i.hide,o=i.dot,l=i.points,c=i.className,d=i.xAxis,h=i.yAxis,m=i.top,f=i.left,g=i.width,x=i.height,p=i.isAnimationActive,y=i.id;if(a||!l||!l.length)return null;var b=this.state.isAnimationFinished,w=l.length===1,N=Kt("recharts-line",c),S=d&&d.allowDataOverflow,P=h&&h.allowDataOverflow,C=S||P,k=Vt(y)?this.id:y,O=(s=It(o,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},I=O.r,T=I===void 0?3:I,E=O.strokeWidth,D=E===void 0?2:E,B=bq(o)?o:{},M=B.clipDot,U=M===void 0?!0:M,H=T*2+D;return re.createElement(Nr,{className:N},S||P?re.createElement("defs",null,re.createElement("clipPath",{id:"clipPath-".concat(k)},re.createElement("rect",{x:S?f:f-g/2,y:P?m:m-x/2,width:S?g:g*2,height:P?x:x*2})),!U&&re.createElement("clipPath",{id:"clipPath-dots-".concat(k)},re.createElement("rect",{x:f-H/2,y:m-H/2,width:g+H,height:x+H}))):null,!w&&this.renderCurve(C,k),this.renderErrorBar(C,k),(w||o)&&this.renderDots(C,U,k),(!p||b)&&$o.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(s,i){return s.animationId!==i.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,prevPoints:i.curPoints}:s.points!==i.curPoints?{curPoints:s.points}:null}},{key:"repeat",value:function(s,i){for(var a=s.length%2!==0?[].concat(Au(s),[0]):s,o=[],l=0;l<i;++l)o=[].concat(Au(o),Au(a));return o}},{key:"renderDotItem",value:function(s,i){var a;if(re.isValidElement(s))a=re.cloneElement(s,i);else if(Et(s))a=s(i);else{var o=i.key,l=X5(i,oBe),c=Kt("recharts-line-dot",typeof s!="boolean"?s.className:"");a=re.createElement(zw,wp({key:o},l,{className:c}))}return a}}])}(j.PureComponent);Qi(gm,"displayName","Line");Qi(gm,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Ua.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Qi(gm,"getComposedData",function(e){var t=e.props,n=e.xAxis,s=e.yAxis,i=e.xAxisTicks,a=e.yAxisTicks,o=e.dataKey,l=e.bandSize,c=e.displayedData,d=e.offset,h=t.layout,m=c.map(function(f,g){var x=ps(f,o);return h==="horizontal"?{x:Aj({axis:n,ticks:i,bandSize:l,entry:f,index:g}),y:Vt(x)?null:s.scale(x),value:x,payload:f}:{x:Vt(x)?null:n.scale(x),y:Aj({axis:s,ticks:a,bandSize:l,entry:f,index:g}),value:x,payload:f}});return Ls({points:m,layout:h},d)});var jBe=["layout","type","stroke","connectNulls","isRange","ref"],bBe=["key"],NZ;function vm(e){"@babel/helpers - typeof";return vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vm(e)}function SZ(e,t){if(e==null)return{};var n=wBe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function wBe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function od(){return od=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},od.apply(this,arguments)}function e6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function xl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?e6(Object(n),!0).forEach(function(s){Ma(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e6(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function NBe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t6(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,PZ(s.key),s)}}function SBe(e,t,n){return t&&t6(e.prototype,t),n&&t6(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _Be(e,t,n){return t=Xj(t),PBe(e,_Z()?Reflect.construct(t,n||[],Xj(e).constructor):t.apply(e,n))}function PBe(e,t){if(t&&(vm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CBe(e)}function CBe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _Z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_Z=function(){return!!e})()}function Xj(e){return Xj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xj(e)}function kBe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uC(e,t)}function uC(e,t){return uC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},uC(e,t)}function Ma(e,t,n){return t=PZ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PZ(e){var t=TBe(e,"string");return vm(t)=="symbol"?t:t+""}function TBe(e,t){if(vm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(vm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var el=function(e){function t(){var n;NBe(this,t);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return n=_Be(this,t,[].concat(i)),Ma(n,"state",{isAnimationFinished:!0}),Ma(n,"id",Km("recharts-area-")),Ma(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Et(o)&&o()}),Ma(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Et(o)&&o()}),n}return kBe(t,e),SBe(t,[{key:"renderDots",value:function(s,i,a){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,d=c.dot,h=c.points,m=c.dataKey,f=It(this.props,!1),g=It(d,!0),x=h.map(function(y,b){var w=xl(xl(xl({key:"dot-".concat(b),r:3},f),g),{},{index:b,cx:y.x,cy:y.y,dataKey:m,value:y.value,payload:y.payload,points:h});return t.renderDotItem(d,w)}),p={clipPath:s?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return re.createElement(Nr,od({className:"recharts-area-dots"},p),x)}},{key:"renderHorizontalRect",value:function(s){var i=this.props,a=i.baseLine,o=i.points,l=i.strokeWidth,c=o[0].x,d=o[o.length-1].x,h=s*Math.abs(c-d),m=Rl(o.map(function(f){return f.y||0}));return Ue(a)&&typeof a=="number"?m=Math.max(a,m):a&&Array.isArray(a)&&a.length&&(m=Math.max(Rl(a.map(function(f){return f.y||0})),m)),Ue(m)?re.createElement("rect",{x:c<d?c:c-h,y:0,width:h,height:Math.floor(m+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(s){var i=this.props,a=i.baseLine,o=i.points,l=i.strokeWidth,c=o[0].y,d=o[o.length-1].y,h=s*Math.abs(c-d),m=Rl(o.map(function(f){return f.x||0}));return Ue(a)&&typeof a=="number"?m=Math.max(a,m):a&&Array.isArray(a)&&a.length&&(m=Math.max(Rl(a.map(function(f){return f.x||0})),m)),Ue(m)?re.createElement("rect",{x:0,y:c<d?c:c-h,width:m+(l?parseInt("".concat(l),10):1),height:Math.floor(h)}):null}},{key:"renderClipRect",value:function(s){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(s):this.renderHorizontalRect(s)}},{key:"renderAreaStatically",value:function(s,i,a,o){var l=this.props,c=l.layout,d=l.type,h=l.stroke,m=l.connectNulls,f=l.isRange;l.ref;var g=SZ(l,jBe);return re.createElement(Nr,{clipPath:a?"url(#clipPath-".concat(o,")"):null},re.createElement(gh,od({},It(g,!0),{points:s,connectNulls:m,type:d,baseLine:i,layout:c,stroke:"none",className:"recharts-area-area"})),h!=="none"&&re.createElement(gh,od({},It(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:m,fill:"none",points:s})),h!=="none"&&f&&re.createElement(gh,od({},It(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:m,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(s,i){var a=this,o=this.props,l=o.points,c=o.baseLine,d=o.isAnimationActive,h=o.animationBegin,m=o.animationDuration,f=o.animationEasing,g=o.animationId,x=this.state,p=x.prevPoints,y=x.prevBaseLine;return re.createElement(Ya,{begin:h,duration:m,isActive:d,easing:f,from:{t:0},to:{t:1},key:"area-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(b){var w=b.t;if(p){var N=p.length/l.length,S=l.map(function(O,I){var T=Math.floor(I*N);if(p[T]){var E=p[T],D=Fn(E.x,O.x),B=Fn(E.y,O.y);return xl(xl({},O),{},{x:D(w),y:B(w)})}return O}),P;if(Ue(c)&&typeof c=="number"){var C=Fn(y,c);P=C(w)}else if(Vt(c)||qm(c)){var k=Fn(y,0);P=k(w)}else P=c.map(function(O,I){var T=Math.floor(I*N);if(y[T]){var E=y[T],D=Fn(E.x,O.x),B=Fn(E.y,O.y);return xl(xl({},O),{},{x:D(w),y:B(w)})}return O});return a.renderAreaStatically(S,P,s,i)}return re.createElement(Nr,null,re.createElement("defs",null,re.createElement("clipPath",{id:"animationClipPath-".concat(i)},a.renderClipRect(w))),re.createElement(Nr,{clipPath:"url(#animationClipPath-".concat(i,")")},a.renderAreaStatically(l,c,s,i)))})}},{key:"renderArea",value:function(s,i){var a=this.props,o=a.points,l=a.baseLine,c=a.isAnimationActive,d=this.state,h=d.prevPoints,m=d.prevBaseLine,f=d.totalLength;return c&&o&&o.length&&(!h&&f>0||!am(h,o)||!am(m,l))?this.renderAreaWithAnimation(s,i):this.renderAreaStatically(o,l,s,i)}},{key:"render",value:function(){var s,i=this.props,a=i.hide,o=i.dot,l=i.points,c=i.className,d=i.top,h=i.left,m=i.xAxis,f=i.yAxis,g=i.width,x=i.height,p=i.isAnimationActive,y=i.id;if(a||!l||!l.length)return null;var b=this.state.isAnimationFinished,w=l.length===1,N=Kt("recharts-area",c),S=m&&m.allowDataOverflow,P=f&&f.allowDataOverflow,C=S||P,k=Vt(y)?this.id:y,O=(s=It(o,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},I=O.r,T=I===void 0?3:I,E=O.strokeWidth,D=E===void 0?2:E,B=bq(o)?o:{},M=B.clipDot,U=M===void 0?!0:M,H=T*2+D;return re.createElement(Nr,{className:N},S||P?re.createElement("defs",null,re.createElement("clipPath",{id:"clipPath-".concat(k)},re.createElement("rect",{x:S?h:h-g/2,y:P?d:d-x/2,width:S?g:g*2,height:P?x:x*2})),!U&&re.createElement("clipPath",{id:"clipPath-dots-".concat(k)},re.createElement("rect",{x:h-H/2,y:d-H/2,width:g+H,height:x+H}))):null,w?null:this.renderArea(C,k),(o||w)&&this.renderDots(C,U,k),(!p||b)&&$o.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(s,i){return s.animationId!==i.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,curBaseLine:s.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:s.points!==i.curPoints||s.baseLine!==i.curBaseLine?{curPoints:s.points,curBaseLine:s.baseLine}:null}}])}(j.PureComponent);NZ=el;Ma(el,"displayName","Area");Ma(el,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Ua.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Ma(el,"getBaseValue",function(e,t,n,s){var i=e.layout,a=e.baseValue,o=t.props.baseValue,l=o??a;if(Ue(l)&&typeof l=="number")return l;var c=i==="horizontal"?s:n,d=c.scale.domain();if(c.type==="number"){var h=Math.max(d[0],d[1]),m=Math.min(d[0],d[1]);return l==="dataMin"?m:l==="dataMax"||h<0?h:Math.max(Math.min(d[0],d[1]),0)}return l==="dataMin"?d[0]:l==="dataMax"?d[1]:d[0]});Ma(el,"getComposedData",function(e){var t=e.props,n=e.item,s=e.xAxis,i=e.yAxis,a=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,d=e.stackedData,h=e.dataStartIndex,m=e.displayedData,f=e.offset,g=t.layout,x=d&&d.length,p=NZ.getBaseValue(t,n,s,i),y=g==="horizontal",b=!1,w=m.map(function(S,P){var C;x?C=d[h+P]:(C=ps(S,c),Array.isArray(C)?b=!0:C=[p,C]);var k=C[1]==null||x&&ps(S,c)==null;return y?{x:Aj({axis:s,ticks:a,bandSize:l,entry:S,index:P}),y:k?null:i.scale(C[1]),value:C,payload:S}:{x:k?null:s.scale(C[1]),y:Aj({axis:i,ticks:o,bandSize:l,entry:S,index:P}),value:C,payload:S}}),N;return x||b?N=w.map(function(S){var P=Array.isArray(S.value)?S.value[0]:null;return y?{x:S.x,y:P!=null&&S.y!=null?i.scale(P):null}:{x:P!=null?s.scale(P):null,y:S.y}}):N=y?i.scale(p):s.scale(p),xl({points:w,baseLine:N,layout:g,isRange:b},f)});Ma(el,"renderDotItem",function(e,t){var n;if(re.isValidElement(e))n=re.cloneElement(e,t);else if(Et(e))n=e(t);else{var s=Kt("recharts-area-dot",typeof e!="boolean"?e.className:""),i=t.key,a=SZ(t,bBe);n=re.createElement(zw,od({},a,{key:i,className:s}))}return n});function ym(e){"@babel/helpers - typeof";return ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ym(e)}function ABe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EBe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,TZ(s.key),s)}}function OBe(e,t,n){return t&&EBe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function MBe(e,t,n){return t=Qj(t),DBe(e,CZ()?Reflect.construct(t,n||[],Qj(e).constructor):t.apply(e,n))}function DBe(e,t){if(t&&(ym(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IBe(e)}function IBe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CZ=function(){return!!e})()}function Qj(e){return Qj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qj(e)}function LBe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hC(e,t)}function hC(e,t){return hC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},hC(e,t)}function kZ(e,t,n){return t=TZ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TZ(e){var t=RBe(e,"string");return ym(t)=="symbol"?t:t+""}function RBe(e,t){if(ym(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(ym(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mC(){return mC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},mC.apply(this,arguments)}function $Be(e){var t=e.xAxisId,n=LE(),s=RE(),i=cZ(t);return i==null?null:re.createElement(ef,mC({},i,{className:Kt("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:s},ticksGenerator:function(o){return ko(o,!0)}}))}var jm=function(e){function t(){return ABe(this,t),MBe(this,t,arguments)}return LBe(t,e),OBe(t,[{key:"render",value:function(){return re.createElement($Be,this.props)}}])}(re.Component);kZ(jm,"displayName","XAxis");kZ(jm,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function bm(e){"@babel/helpers - typeof";return bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bm(e)}function FBe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zBe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,OZ(s.key),s)}}function BBe(e,t,n){return t&&zBe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function VBe(e,t,n){return t=Jj(t),UBe(e,AZ()?Reflect.construct(t,n||[],Jj(e).constructor):t.apply(e,n))}function UBe(e,t){if(t&&(bm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WBe(e)}function WBe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AZ=function(){return!!e})()}function Jj(e){return Jj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Jj(e)}function HBe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fC(e,t)}function fC(e,t){return fC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},fC(e,t)}function EZ(e,t,n){return t=OZ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OZ(e){var t=qBe(e,"string");return bm(t)=="symbol"?t:t+""}function qBe(e,t){if(bm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(bm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pC(){return pC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},pC.apply(this,arguments)}var KBe=function(t){var n=t.yAxisId,s=LE(),i=RE(),a=dZ(n);return a==null?null:re.createElement(ef,pC({},a,{className:Kt("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:s,height:i},ticksGenerator:function(l){return ko(l,!0)}}))},Fl=function(e){function t(){return FBe(this,t),VBe(this,t,arguments)}return HBe(t,e),BBe(t,[{key:"render",value:function(){return re.createElement(KBe,this.props)}}])}(re.Component);EZ(Fl,"displayName","YAxis");EZ(Fl,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function r6(e){return XBe(e)||YBe(e)||ZBe(e)||GBe()}function GBe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZBe(e,t){if(e){if(typeof e=="string")return xC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xC(e,t)}}function YBe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function XBe(e){if(Array.isArray(e))return xC(e)}function xC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var gC=function(t,n,s,i,a){var o=Mi(t,FE),l=Mi(t,Hw),c=[].concat(r6(o),r6(l)),d=Mi(t,Kw),h="".concat(i,"Id"),m=i[0],f=n;if(c.length&&(f=c.reduce(function(p,y){if(y.props[h]===s&&Ha(y.props,"extendDomain")&&Ue(y.props[m])){var b=y.props[m];return[Math.min(p[0],b),Math.max(p[1],b)]}return p},f)),d.length){var g="".concat(m,"1"),x="".concat(m,"2");f=d.reduce(function(p,y){if(y.props[h]===s&&Ha(y.props,"extendDomain")&&Ue(y.props[g])&&Ue(y.props[x])){var b=y.props[g],w=y.props[x];return[Math.min(p[0],b,w),Math.max(p[1],b,w)]}return p},f)}return a&&a.length&&(f=a.reduce(function(p,y){return Ue(y)?[Math.min(p[0],y),Math.max(p[1],y)]:p},f)),f},MZ={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1));function i(c,d,h){this.fn=c,this.context=d,this.once=h||!1}function a(c,d,h,m,f){if(typeof h!="function")throw new TypeError("The listener must be a function");var g=new i(h,m||c,f),x=n?n+d:d;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],g]:c._events[x].push(g):(c._events[x]=g,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new s:delete c._events[d]}function l(){this._events=new s,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],h,m;if(this._eventsCount===0)return d;for(m in h=this._events)t.call(h,m)&&d.push(n?m.slice(1):m);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(h)):d},l.prototype.listeners=function(d){var h=n?n+d:d,m=this._events[h];if(!m)return[];if(m.fn)return[m.fn];for(var f=0,g=m.length,x=new Array(g);f<g;f++)x[f]=m[f].fn;return x},l.prototype.listenerCount=function(d){var h=n?n+d:d,m=this._events[h];return m?m.fn?1:m.length:0},l.prototype.emit=function(d,h,m,f,g,x){var p=n?n+d:d;if(!this._events[p])return!1;var y=this._events[p],b=arguments.length,w,N;if(y.fn){switch(y.once&&this.removeListener(d,y.fn,void 0,!0),b){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,h),!0;case 3:return y.fn.call(y.context,h,m),!0;case 4:return y.fn.call(y.context,h,m,f),!0;case 5:return y.fn.call(y.context,h,m,f,g),!0;case 6:return y.fn.call(y.context,h,m,f,g,x),!0}for(N=1,w=new Array(b-1);N<b;N++)w[N-1]=arguments[N];y.fn.apply(y.context,w)}else{var S=y.length,P;for(N=0;N<S;N++)switch(y[N].once&&this.removeListener(d,y[N].fn,void 0,!0),b){case 1:y[N].fn.call(y[N].context);break;case 2:y[N].fn.call(y[N].context,h);break;case 3:y[N].fn.call(y[N].context,h,m);break;case 4:y[N].fn.call(y[N].context,h,m,f);break;default:if(!w)for(P=1,w=new Array(b-1);P<b;P++)w[P-1]=arguments[P];y[N].fn.apply(y[N].context,w)}}return!0},l.prototype.on=function(d,h,m){return a(this,d,h,m,!1)},l.prototype.once=function(d,h,m){return a(this,d,h,m,!0)},l.prototype.removeListener=function(d,h,m,f){var g=n?n+d:d;if(!this._events[g])return this;if(!h)return o(this,g),this;var x=this._events[g];if(x.fn)x.fn===h&&(!f||x.once)&&(!m||x.context===m)&&o(this,g);else{for(var p=0,y=[],b=x.length;p<b;p++)(x[p].fn!==h||f&&!x[p].once||m&&x[p].context!==m)&&y.push(x[p]);y.length?this._events[g]=y.length===1?y[0]:y:o(this,g)}return this},l.prototype.removeAllListeners=function(d){var h;return d?(h=n?n+d:d,this._events[h]&&o(this,h)):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(MZ);var QBe=MZ.exports;const JBe=hr(QBe);var jS=new JBe,bS="recharts.syncMouseEvents";function tg(e){"@babel/helpers - typeof";return tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tg(e)}function eVe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tVe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,DZ(s.key),s)}}function rVe(e,t,n){return t&&tVe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function wS(e,t,n){return t=DZ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DZ(e){var t=nVe(e,"string");return tg(t)=="symbol"?t:t+""}function nVe(e,t){if(tg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(tg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var sVe=function(){function e(){eVe(this,e),wS(this,"activeIndex",0),wS(this,"coordinateList",[]),wS(this,"layout","horizontal")}return rVe(e,[{key:"setDetails",value:function(n){var s,i=n.coordinateList,a=i===void 0?null:i,o=n.container,l=o===void 0?null:o,c=n.layout,d=c===void 0?null:c,h=n.offset,m=h===void 0?null:h,f=n.mouseHandlerCallback,g=f===void 0?null:f;this.coordinateList=(s=a??this.coordinateList)!==null&&s!==void 0?s:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=m??this.offset,this.mouseHandlerCallback=g??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,s;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,o=i.y,l=i.height,c=this.coordinateList[this.activeIndex].coordinate,d=((n=window)===null||n===void 0?void 0:n.scrollX)||0,h=((s=window)===null||s===void 0?void 0:s.scrollY)||0,m=a+c+d,f=o+this.offset.top+l/2+h;this.mouseHandlerCallback({pageX:m,pageY:f})}}}])}();function iVe(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var s=e==null?void 0:e[0],i=e==null?void 0:e[1];if(s&&i&&Ue(s)&&Ue(i))return!0}return!1}function aVe(e,t,n,s){var i=s/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?s:n.width-1,height:e==="horizontal"?n.height-1:s}}function IZ(e){var t=e.cx,n=e.cy,s=e.radius,i=e.startAngle,a=e.endAngle,o=Vn(t,n,s,i),l=Vn(t,n,s,a);return{points:[o,l],cx:t,cy:n,radius:s,startAngle:i,endAngle:a}}function oVe(e,t,n){var s,i,a,o;if(e==="horizontal")s=t.x,a=s,i=n.top,o=n.top+n.height;else if(e==="vertical")i=t.y,o=i,s=n.left,a=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,d=t.innerRadius,h=t.outerRadius,m=t.angle,f=Vn(l,c,d,m),g=Vn(l,c,h,m);s=f.x,i=f.y,a=g.x,o=g.y}else return IZ(t);return[{x:s,y:i},{x:a,y:o}]}function rg(e){"@babel/helpers - typeof";return rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rg(e)}function n6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function ay(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?n6(Object(n),!0).forEach(function(s){lVe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):n6(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function lVe(e,t,n){return t=cVe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cVe(e){var t=dVe(e,"string");return rg(t)=="symbol"?t:t+""}function dVe(e,t){if(rg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(rg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uVe(e){var t,n,s=e.element,i=e.tooltipEventType,a=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,d=e.activeTooltipIndex,h=e.tooltipAxisBandSize,m=e.layout,f=e.chartName,g=(t=s.props.cursor)!==null&&t!==void 0?t:(n=s.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!s||!g||!a||!o||f!=="ScatterChart"&&i!=="axis")return null;var x,p=gh;if(f==="ScatterChart")x=o,p=t$e;else if(f==="BarChart")x=aVe(m,o,c,h),p=OE;else if(m==="radial"){var y=IZ(o),b=y.cx,w=y.cy,N=y.radius,S=y.startAngle,P=y.endAngle;x={cx:b,cy:w,startAngle:S,endAngle:P,innerRadius:N,outerRadius:N},p=DG}else x={points:oVe(m,o,c)},p=gh;var C=ay(ay(ay(ay({stroke:"#ccc",pointerEvents:"none"},c),x),It(g,!1)),{},{payload:l,payloadIndex:d,className:Kt("recharts-tooltip-cursor",g.className)});return j.isValidElement(g)?j.cloneElement(g,C):j.createElement(p,C)}var hVe=["item"],mVe=["children","className","width","height","style","compact","title","desc"];function wm(e){"@babel/helpers - typeof";return wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wm(e)}function Qu(){return Qu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Qu.apply(this,arguments)}function s6(e,t){return xVe(e)||pVe(e,t)||RZ(e,t)||fVe()}function fVe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pVe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(h){d=!0,i=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function xVe(e){if(Array.isArray(e))return e}function i6(e,t){if(e==null)return{};var n=gVe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function gVe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function vVe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yVe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,$Z(s.key),s)}}function jVe(e,t,n){return t&&yVe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function bVe(e,t,n){return t=eb(t),wVe(e,LZ()?Reflect.construct(t,n||[],eb(e).constructor):t.apply(e,n))}function wVe(e,t){if(t&&(wm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NVe(e)}function NVe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LZ=function(){return!!e})()}function eb(e){return eb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},eb(e)}function SVe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vC(e,t)}function vC(e,t){return vC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},vC(e,t)}function Nm(e){return CVe(e)||PVe(e)||RZ(e)||_Ve()}function _Ve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RZ(e,t){if(e){if(typeof e=="string")return yC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yC(e,t)}}function PVe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function CVe(e){if(Array.isArray(e))return yC(e)}function yC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function a6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?a6(Object(n),!0).forEach(function(s){vt(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a6(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function vt(e,t,n){return t=$Z(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $Z(e){var t=kVe(e,"string");return wm(t)=="symbol"?t:t+""}function kVe(e,t){if(wm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(wm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TVe={xAxis:["bottom","top"],yAxis:["left","right"]},AVe={width:"100%",height:"100%"},FZ={x:0,y:0};function oy(e){return e}var EVe=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},OVe=function(t,n,s,i){var a=n.find(function(h){return h&&h.index===s});if(a){if(t==="horizontal")return{x:a.coordinate,y:i.y};if(t==="vertical")return{x:i.x,y:a.coordinate};if(t==="centric"){var o=a.coordinate,l=i.radius;return Pe(Pe(Pe({},i),Vn(i.cx,i.cy,l,o)),{},{angle:o,radius:l})}var c=a.coordinate,d=i.angle;return Pe(Pe(Pe({},i),Vn(i.cx,i.cy,c,d)),{},{angle:d,radius:c})}return FZ},Gw=function(t,n){var s=n.graphicalItems,i=n.dataStartIndex,a=n.dataEndIndex,o=(s??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat(Nm(l),Nm(d)):l},[]);return o.length>0?o:t&&t.length&&Ue(i)&&Ue(a)?t.slice(i,a+1):[]};function zZ(e){return e==="number"?[0,"auto"]:void 0}var jC=function(t,n,s,i){var a=t.graphicalItems,o=t.tooltipAxis,l=Gw(n,t);return s<0||!a||!a.length||s>=l.length?null:a.reduce(function(c,d){var h,m=(h=d.props.data)!==null&&h!==void 0?h:n;m&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=s&&(m=m.slice(t.dataStartIndex,t.dataEndIndex+1));var f;if(o.dataKey&&!o.allowDuplicatedCategory){var g=m===void 0?l:m;f=ej(g,o.dataKey,i)}else f=m&&m[s]||l[s];return f?[].concat(Nm(c),[EG(d,f)]):c},[])},o6=function(t,n,s,i){var a=i||{x:t.chartX,y:t.chartY},o=EVe(a,s),l=t.orderedTooltipTicks,c=t.tooltipAxis,d=t.tooltipTicks,h=RLe(o,l,d,c);if(h>=0&&d){var m=d[h]&&d[h].value,f=jC(t,n,h,m),g=OVe(s,l,h,a);return{activeTooltipIndex:h,activeLabel:m,activePayload:f,activeCoordinate:g}}return null},MVe=function(t,n){var s=n.axes,i=n.graphicalItems,a=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,h=t.layout,m=t.children,f=t.stackOffset,g=kG(h,a);return s.reduce(function(x,p){var y,b=p.type.defaultProps!==void 0?Pe(Pe({},p.type.defaultProps),p.props):p.props,w=b.type,N=b.dataKey,S=b.allowDataOverflow,P=b.allowDuplicatedCategory,C=b.scale,k=b.ticks,O=b.includeHidden,I=b[o];if(x[I])return x;var T=Gw(t.data,{graphicalItems:i.filter(function(J){var pe,ye=o in J.props?J.props[o]:(pe=J.type.defaultProps)===null||pe===void 0?void 0:pe[o];return ye===I}),dataStartIndex:c,dataEndIndex:d}),E=T.length,D,B,M;iVe(b.domain,S,w)&&(D=LP(b.domain,null,S),g&&(w==="number"||C!=="auto")&&(M=jp(T,N,"category")));var U=zZ(w);if(!D||D.length===0){var H,K=(H=b.domain)!==null&&H!==void 0?H:U;if(N){if(D=jp(T,N,w),w==="category"&&g){var W=PSe(D);P&&W?(B=D,D=zj(0,E)):P||(D=RR(K,D,p).reduce(function(J,pe){return J.indexOf(pe)>=0?J:[].concat(Nm(J),[pe])},[]))}else if(w==="category")P?D=D.filter(function(J){return J!==""&&!Vt(J)}):D=RR(K,D,p).reduce(function(J,pe){return J.indexOf(pe)>=0||pe===""||Vt(pe)?J:[].concat(Nm(J),[pe])},[]);else if(w==="number"){var V=VLe(T,i.filter(function(J){var pe,ye,Ne=o in J.props?J.props[o]:(pe=J.type.defaultProps)===null||pe===void 0?void 0:pe[o],ke="hide"in J.props?J.props.hide:(ye=J.type.defaultProps)===null||ye===void 0?void 0:ye.hide;return Ne===I&&(O||!ke)}),N,a,h);V&&(D=V)}g&&(w==="number"||C!=="auto")&&(M=jp(T,N,"category"))}else g?D=zj(0,E):l&&l[I]&&l[I].hasStack&&w==="number"?D=f==="expand"?[0,1]:AG(l[I].stackGroups,c,d):D=CG(T,i.filter(function(J){var pe=o in J.props?J.props[o]:J.type.defaultProps[o],ye="hide"in J.props?J.props.hide:J.type.defaultProps.hide;return pe===I&&(O||!ye)}),w,h,!0);if(w==="number")D=gC(m,D,I,a,k),K&&(D=LP(K,D,S));else if(w==="category"&&K){var z=K,q=D.every(function(J){return z.indexOf(J)>=0});q&&(D=z)}}return Pe(Pe({},x),{},vt({},I,Pe(Pe({},b),{},{axisType:a,domain:D,categoricalDomain:M,duplicateDomain:B,originalDomain:(y=b.domain)!==null&&y!==void 0?y:U,isCategorical:g,layout:h})))},{})},DVe=function(t,n){var s=n.graphicalItems,i=n.Axis,a=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,h=t.layout,m=t.children,f=Gw(t.data,{graphicalItems:s,dataStartIndex:c,dataEndIndex:d}),g=f.length,x=kG(h,a),p=-1;return s.reduce(function(y,b){var w=b.type.defaultProps!==void 0?Pe(Pe({},b.type.defaultProps),b.props):b.props,N=w[o],S=zZ("number");if(!y[N]){p++;var P;return x?P=zj(0,g):l&&l[N]&&l[N].hasStack?(P=AG(l[N].stackGroups,c,d),P=gC(m,P,N,a)):(P=LP(S,CG(f,s.filter(function(C){var k,O,I=o in C.props?C.props[o]:(k=C.type.defaultProps)===null||k===void 0?void 0:k[o],T="hide"in C.props?C.props.hide:(O=C.type.defaultProps)===null||O===void 0?void 0:O.hide;return I===N&&!T}),"number",h),i.defaultProps.allowDataOverflow),P=gC(m,P,N,a)),Pe(Pe({},y),{},vt({},N,Pe(Pe({axisType:a},i.defaultProps),{},{hide:!0,orientation:Oi(TVe,"".concat(a,".").concat(p%2),null),domain:P,originalDomain:S,isCategorical:x,layout:h})))}return y},{})},IVe=function(t,n){var s=n.axisType,i=s===void 0?"xAxis":s,a=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,h=t.children,m="".concat(i,"Id"),f=Mi(h,a),g={};return f&&f.length?g=MVe(t,{axes:f,graphicalItems:o,axisType:i,axisIdKey:m,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):o&&o.length&&(g=DVe(t,{Axis:a,graphicalItems:o,axisType:i,axisIdKey:m,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),g},LVe=function(t){var n=Nl(t),s=ko(n,!1,!0);return{tooltipTicks:s,orderedTooltipTicks:iE(s,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:Ej(n,s)}},l6=function(t){var n=t.children,s=t.defaultShowTooltip,i=zs(n,dm),a=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!s}},RVe=function(t){return!t||!t.length?!1:t.some(function(n){var s=Io(n&&n.type);return s&&s.indexOf("Bar")>=0})},c6=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},$Ve=function(t,n){var s=t.props,i=t.graphicalItems,a=t.xAxisMap,o=a===void 0?{}:a,l=t.yAxisMap,c=l===void 0?{}:l,d=s.width,h=s.height,m=s.children,f=s.margin||{},g=zs(m,dm),x=zs(m,rc),p=Object.keys(c).reduce(function(P,C){var k=c[C],O=k.orientation;return!k.mirror&&!k.hide?Pe(Pe({},P),{},vt({},O,P[O]+k.width)):P},{left:f.left||0,right:f.right||0}),y=Object.keys(o).reduce(function(P,C){var k=o[C],O=k.orientation;return!k.mirror&&!k.hide?Pe(Pe({},P),{},vt({},O,Oi(P,"".concat(O))+k.height)):P},{top:f.top||0,bottom:f.bottom||0}),b=Pe(Pe({},y),p),w=b.bottom;g&&(b.bottom+=g.props.height||dm.defaultProps.height),x&&n&&(b=zLe(b,i,s,n));var N=d-b.left-b.right,S=h-b.top-b.bottom;return Pe(Pe({brushBottom:w},b),{},{width:Math.max(N,0),height:Math.max(S,0)})},FVe=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},BZ=function(t){var n=t.chartName,s=t.GraphicalChild,i=t.defaultTooltipEventType,a=i===void 0?"axis":i,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,d=t.legendContent,h=t.formatAxisMap,m=t.defaultProps,f=function(b,w){var N=w.graphicalItems,S=w.stackGroups,P=w.offset,C=w.updateId,k=w.dataStartIndex,O=w.dataEndIndex,I=b.barSize,T=b.layout,E=b.barGap,D=b.barCategoryGap,B=b.maxBarSize,M=c6(T),U=M.numericAxisName,H=M.cateAxisName,K=RVe(N),W=[];return N.forEach(function(V,z){var q=Gw(b.data,{graphicalItems:[V],dataStartIndex:k,dataEndIndex:O}),J=V.type.defaultProps!==void 0?Pe(Pe({},V.type.defaultProps),V.props):V.props,pe=J.dataKey,ye=J.maxBarSize,Ne=J["".concat(U,"Id")],ke=J["".concat(H,"Id")],Ee={},We=c.reduce(function(Ut,ce){var je=w["".concat(ce.axisType,"Map")],_e=J["".concat(ce.axisType,"Id")];je&&je[_e]||ce.axisType==="zAxis"||Yd();var Q=je[_e];return Pe(Pe({},Ut),{},vt(vt({},ce.axisType,Q),"".concat(ce.axisType,"Ticks"),ko(Q)))},Ee),Se=We[H],Me=We["".concat(H,"Ticks")],Ie=S&&S[Ne]&&S[Ne].hasStack&&eRe(V,S[Ne].stackGroups),$=Io(V.type).indexOf("Bar")>=0,ee=Ej(Se,Me),X=[],Ce=K&&$Le({barSize:I,stackGroups:S,totalSize:FVe(We,H)});if($){var $e,He,lt=Vt(ye)?B:ye,Tt=($e=(He=Ej(Se,Me,!0))!==null&&He!==void 0?He:lt)!==null&&$e!==void 0?$e:0;X=FLe({barGap:E,barCategoryGap:D,bandSize:Tt!==ee?Tt:ee,sizeList:Ce[ke],maxBarSize:lt}),Tt!==ee&&(X=X.map(function(Ut){return Pe(Pe({},Ut),{},{position:Pe(Pe({},Ut.position),{},{offset:Ut.position.offset-Tt/2})})}))}var ir=V&&V.type&&V.type.getComposedData;ir&&W.push({props:Pe(Pe({},ir(Pe(Pe({},We),{},{displayedData:q,props:b,dataKey:pe,item:V,bandSize:ee,barPosition:X,offset:P,stackedData:Ie,layout:T,dataStartIndex:k,dataEndIndex:O}))),{},vt(vt(vt({key:V.key||"item-".concat(z)},U,We[U]),H,We[H]),"animationId",C)),childIndex:RSe(V,b.children),item:V})}),W},g=function(b,w){var N=b.props,S=b.dataStartIndex,P=b.dataEndIndex,C=b.updateId;if(!A3({props:N}))return null;var k=N.children,O=N.layout,I=N.stackOffset,T=N.data,E=N.reverseStackOrder,D=c6(O),B=D.numericAxisName,M=D.cateAxisName,U=Mi(k,s),H=XLe(T,U,"".concat(B,"Id"),"".concat(M,"Id"),I,E),K=c.reduce(function(J,pe){var ye="".concat(pe.axisType,"Map");return Pe(Pe({},J),{},vt({},ye,IVe(N,Pe(Pe({},pe),{},{graphicalItems:U,stackGroups:pe.axisType===B&&H,dataStartIndex:S,dataEndIndex:P}))))},{}),W=$Ve(Pe(Pe({},K),{},{props:N,graphicalItems:U}),w==null?void 0:w.legendBBox);Object.keys(K).forEach(function(J){K[J]=h(N,K[J],W,J.replace("Map",""),n)});var V=K["".concat(M,"Map")],z=LVe(V),q=f(N,Pe(Pe({},K),{},{dataStartIndex:S,dataEndIndex:P,updateId:C,graphicalItems:U,stackGroups:H,offset:W}));return Pe(Pe({formattedGraphicalItems:q,graphicalItems:U,offset:W,stackGroups:H},z),K)},x=function(y){function b(w){var N,S,P;return vVe(this,b),P=bVe(this,b,[w]),vt(P,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),vt(P,"accessibilityManager",new sVe),vt(P,"handleLegendBBoxUpdate",function(C){if(C){var k=P.state,O=k.dataStartIndex,I=k.dataEndIndex,T=k.updateId;P.setState(Pe({legendBBox:C},g({props:P.props,dataStartIndex:O,dataEndIndex:I,updateId:T},Pe(Pe({},P.state),{},{legendBBox:C}))))}}),vt(P,"handleReceiveSyncEvent",function(C,k,O){if(P.props.syncId===C){if(O===P.eventEmitterSymbol&&typeof P.props.syncMethod!="function")return;P.applySyncEvent(k)}}),vt(P,"handleBrushChange",function(C){var k=C.startIndex,O=C.endIndex;if(k!==P.state.dataStartIndex||O!==P.state.dataEndIndex){var I=P.state.updateId;P.setState(function(){return Pe({dataStartIndex:k,dataEndIndex:O},g({props:P.props,dataStartIndex:k,dataEndIndex:O,updateId:I},P.state))}),P.triggerSyncEvent({dataStartIndex:k,dataEndIndex:O})}}),vt(P,"handleMouseEnter",function(C){var k=P.getMouseInfo(C);if(k){var O=Pe(Pe({},k),{},{isTooltipActive:!0});P.setState(O),P.triggerSyncEvent(O);var I=P.props.onMouseEnter;Et(I)&&I(O,C)}}),vt(P,"triggeredAfterMouseMove",function(C){var k=P.getMouseInfo(C),O=k?Pe(Pe({},k),{},{isTooltipActive:!0}):{isTooltipActive:!1};P.setState(O),P.triggerSyncEvent(O);var I=P.props.onMouseMove;Et(I)&&I(O,C)}),vt(P,"handleItemMouseEnter",function(C){P.setState(function(){return{isTooltipActive:!0,activeItem:C,activePayload:C.tooltipPayload,activeCoordinate:C.tooltipPosition||{x:C.cx,y:C.cy}}})}),vt(P,"handleItemMouseLeave",function(){P.setState(function(){return{isTooltipActive:!1}})}),vt(P,"handleMouseMove",function(C){C.persist(),P.throttleTriggeredAfterMouseMove(C)}),vt(P,"handleMouseLeave",function(C){P.throttleTriggeredAfterMouseMove.cancel();var k={isTooltipActive:!1};P.setState(k),P.triggerSyncEvent(k);var O=P.props.onMouseLeave;Et(O)&&O(k,C)}),vt(P,"handleOuterEvent",function(C){var k=LSe(C),O=Oi(P.props,"".concat(k));if(k&&Et(O)){var I,T;/.*touch.*/i.test(k)?T=P.getMouseInfo(C.changedTouches[0]):T=P.getMouseInfo(C),O((I=T)!==null&&I!==void 0?I:{},C)}}),vt(P,"handleClick",function(C){var k=P.getMouseInfo(C);if(k){var O=Pe(Pe({},k),{},{isTooltipActive:!0});P.setState(O),P.triggerSyncEvent(O);var I=P.props.onClick;Et(I)&&I(O,C)}}),vt(P,"handleMouseDown",function(C){var k=P.props.onMouseDown;if(Et(k)){var O=P.getMouseInfo(C);k(O,C)}}),vt(P,"handleMouseUp",function(C){var k=P.props.onMouseUp;if(Et(k)){var O=P.getMouseInfo(C);k(O,C)}}),vt(P,"handleTouchMove",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&P.throttleTriggeredAfterMouseMove(C.changedTouches[0])}),vt(P,"handleTouchStart",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&P.handleMouseDown(C.changedTouches[0])}),vt(P,"handleTouchEnd",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&P.handleMouseUp(C.changedTouches[0])}),vt(P,"handleDoubleClick",function(C){var k=P.props.onDoubleClick;if(Et(k)){var O=P.getMouseInfo(C);k(O,C)}}),vt(P,"handleContextMenu",function(C){var k=P.props.onContextMenu;if(Et(k)){var O=P.getMouseInfo(C);k(O,C)}}),vt(P,"triggerSyncEvent",function(C){P.props.syncId!==void 0&&jS.emit(bS,P.props.syncId,C,P.eventEmitterSymbol)}),vt(P,"applySyncEvent",function(C){var k=P.props,O=k.layout,I=k.syncMethod,T=P.state.updateId,E=C.dataStartIndex,D=C.dataEndIndex;if(C.dataStartIndex!==void 0||C.dataEndIndex!==void 0)P.setState(Pe({dataStartIndex:E,dataEndIndex:D},g({props:P.props,dataStartIndex:E,dataEndIndex:D,updateId:T},P.state)));else if(C.activeTooltipIndex!==void 0){var B=C.chartX,M=C.chartY,U=C.activeTooltipIndex,H=P.state,K=H.offset,W=H.tooltipTicks;if(!K)return;if(typeof I=="function")U=I(W,C);else if(I==="value"){U=-1;for(var V=0;V<W.length;V++)if(W[V].value===C.activeLabel){U=V;break}}var z=Pe(Pe({},K),{},{x:K.left,y:K.top}),q=Math.min(B,z.x+z.width),J=Math.min(M,z.y+z.height),pe=W[U]&&W[U].value,ye=jC(P.state,P.props.data,U),Ne=W[U]?{x:O==="horizontal"?W[U].coordinate:q,y:O==="horizontal"?J:W[U].coordinate}:FZ;P.setState(Pe(Pe({},C),{},{activeLabel:pe,activeCoordinate:Ne,activePayload:ye,activeTooltipIndex:U}))}else P.setState(C)}),vt(P,"renderCursor",function(C){var k,O=P.state,I=O.isTooltipActive,T=O.activeCoordinate,E=O.activePayload,D=O.offset,B=O.activeTooltipIndex,M=O.tooltipAxisBandSize,U=P.getTooltipEventType(),H=(k=C.props.active)!==null&&k!==void 0?k:I,K=P.props.layout,W=C.key||"_recharts-cursor";return re.createElement(uVe,{key:W,activeCoordinate:T,activePayload:E,activeTooltipIndex:B,chartName:n,element:C,isActive:H,layout:K,offset:D,tooltipAxisBandSize:M,tooltipEventType:U})}),vt(P,"renderPolarAxis",function(C,k,O){var I=Oi(C,"type.axisType"),T=Oi(P.state,"".concat(I,"Map")),E=C.type.defaultProps,D=E!==void 0?Pe(Pe({},E),C.props):C.props,B=T&&T[D["".concat(I,"Id")]];return j.cloneElement(C,Pe(Pe({},B),{},{className:Kt(I,B.className),key:C.key||"".concat(k,"-").concat(O),ticks:ko(B,!0)}))}),vt(P,"renderPolarGrid",function(C){var k=C.props,O=k.radialLines,I=k.polarAngles,T=k.polarRadius,E=P.state,D=E.radiusAxisMap,B=E.angleAxisMap,M=Nl(D),U=Nl(B),H=U.cx,K=U.cy,W=U.innerRadius,V=U.outerRadius;return j.cloneElement(C,{polarAngles:Array.isArray(I)?I:ko(U,!0).map(function(z){return z.coordinate}),polarRadius:Array.isArray(T)?T:ko(M,!0).map(function(z){return z.coordinate}),cx:H,cy:K,innerRadius:W,outerRadius:V,key:C.key||"polar-grid",radialLines:O})}),vt(P,"renderLegend",function(){var C=P.state.formattedGraphicalItems,k=P.props,O=k.children,I=k.width,T=k.height,E=P.props.margin||{},D=I-(E.left||0)-(E.right||0),B=_G({children:O,formattedGraphicalItems:C,legendWidth:D,legendContent:d});if(!B)return null;var M=B.item,U=i6(B,hVe);return j.cloneElement(M,Pe(Pe({},U),{},{chartWidth:I,chartHeight:T,margin:E,onBBoxUpdate:P.handleLegendBBoxUpdate}))}),vt(P,"renderTooltip",function(){var C,k=P.props,O=k.children,I=k.accessibilityLayer,T=zs(O,Yi);if(!T)return null;var E=P.state,D=E.isTooltipActive,B=E.activeCoordinate,M=E.activePayload,U=E.activeLabel,H=E.offset,K=(C=T.props.active)!==null&&C!==void 0?C:D;return j.cloneElement(T,{viewBox:Pe(Pe({},H),{},{x:H.left,y:H.top}),active:K,label:U,payload:K?M:[],coordinate:B,accessibilityLayer:I})}),vt(P,"renderBrush",function(C){var k=P.props,O=k.margin,I=k.data,T=P.state,E=T.offset,D=T.dataStartIndex,B=T.dataEndIndex,M=T.updateId;return j.cloneElement(C,{key:C.key||"_recharts-brush",onChange:ry(P.handleBrushChange,C.props.onChange),data:I,x:Ue(C.props.x)?C.props.x:E.left,y:Ue(C.props.y)?C.props.y:E.top+E.height+E.brushBottom-(O.bottom||0),width:Ue(C.props.width)?C.props.width:E.width,startIndex:D,endIndex:B,updateId:"brush-".concat(M)})}),vt(P,"renderReferenceElement",function(C,k,O){if(!C)return null;var I=P,T=I.clipPathId,E=P.state,D=E.xAxisMap,B=E.yAxisMap,M=E.offset,U=C.type.defaultProps||{},H=C.props,K=H.xAxisId,W=K===void 0?U.xAxisId:K,V=H.yAxisId,z=V===void 0?U.yAxisId:V;return j.cloneElement(C,{key:C.key||"".concat(k,"-").concat(O),xAxis:D[W],yAxis:B[z],viewBox:{x:M.left,y:M.top,width:M.width,height:M.height},clipPathId:T})}),vt(P,"renderActivePoints",function(C){var k=C.item,O=C.activePoint,I=C.basePoint,T=C.childIndex,E=C.isRange,D=[],B=k.props.key,M=k.item.type.defaultProps!==void 0?Pe(Pe({},k.item.type.defaultProps),k.item.props):k.item.props,U=M.activeDot,H=M.dataKey,K=Pe(Pe({index:T,dataKey:H,cx:O.x,cy:O.y,r:4,fill:EE(k.item),strokeWidth:2,stroke:"#fff",payload:O.payload,value:O.value},It(U,!1)),tj(U));return D.push(b.renderActiveDot(U,K,"".concat(B,"-activePoint-").concat(T))),I?D.push(b.renderActiveDot(U,Pe(Pe({},K),{},{cx:I.x,cy:I.y}),"".concat(B,"-basePoint-").concat(T))):E&&D.push(null),D}),vt(P,"renderGraphicChild",function(C,k,O){var I=P.filterFormatItem(C,k,O);if(!I)return null;var T=P.getTooltipEventType(),E=P.state,D=E.isTooltipActive,B=E.tooltipAxis,M=E.activeTooltipIndex,U=E.activeLabel,H=P.props.children,K=zs(H,Yi),W=I.props,V=W.points,z=W.isRange,q=W.baseLine,J=I.item.type.defaultProps!==void 0?Pe(Pe({},I.item.type.defaultProps),I.item.props):I.item.props,pe=J.activeDot,ye=J.hide,Ne=J.activeBar,ke=J.activeShape,Ee=!!(!ye&&D&&K&&(pe||Ne||ke)),We={};T!=="axis"&&K&&K.props.trigger==="click"?We={onClick:ry(P.handleItemMouseEnter,C.props.onClick)}:T!=="axis"&&(We={onMouseLeave:ry(P.handleItemMouseLeave,C.props.onMouseLeave),onMouseEnter:ry(P.handleItemMouseEnter,C.props.onMouseEnter)});var Se=j.cloneElement(C,Pe(Pe({},I.props),We));function Me(ce){return typeof B.dataKey=="function"?B.dataKey(ce.payload):null}if(Ee)if(M>=0){var Ie,$;if(B.dataKey&&!B.allowDuplicatedCategory){var ee=typeof B.dataKey=="function"?Me:"payload.".concat(B.dataKey.toString());Ie=ej(V,ee,U),$=z&&q&&ej(q,ee,U)}else Ie=V==null?void 0:V[M],$=z&&q&&q[M];if(ke||Ne){var X=C.props.activeIndex!==void 0?C.props.activeIndex:M;return[j.cloneElement(C,Pe(Pe(Pe({},I.props),We),{},{activeIndex:X})),null,null]}if(!Vt(Ie))return[Se].concat(Nm(P.renderActivePoints({item:I,activePoint:Ie,basePoint:$,childIndex:M,isRange:z})))}else{var Ce,$e=(Ce=P.getItemByXY(P.state.activeCoordinate))!==null&&Ce!==void 0?Ce:{graphicalItem:Se},He=$e.graphicalItem,lt=He.item,Tt=lt===void 0?C:lt,ir=He.childIndex,Ut=Pe(Pe(Pe({},I.props),We),{},{activeIndex:ir});return[j.cloneElement(Tt,Ut),null,null]}return z?[Se,null,null]:[Se,null]}),vt(P,"renderCustomized",function(C,k,O){return j.cloneElement(C,Pe(Pe({key:"recharts-customized-".concat(O)},P.props),P.state))}),vt(P,"renderMap",{CartesianGrid:{handler:oy,once:!0},ReferenceArea:{handler:P.renderReferenceElement},ReferenceLine:{handler:oy},ReferenceDot:{handler:P.renderReferenceElement},XAxis:{handler:oy},YAxis:{handler:oy},Brush:{handler:P.renderBrush,once:!0},Bar:{handler:P.renderGraphicChild},Line:{handler:P.renderGraphicChild},Area:{handler:P.renderGraphicChild},Radar:{handler:P.renderGraphicChild},RadialBar:{handler:P.renderGraphicChild},Scatter:{handler:P.renderGraphicChild},Pie:{handler:P.renderGraphicChild},Funnel:{handler:P.renderGraphicChild},Tooltip:{handler:P.renderCursor,once:!0},PolarGrid:{handler:P.renderPolarGrid,once:!0},PolarAngleAxis:{handler:P.renderPolarAxis},PolarRadiusAxis:{handler:P.renderPolarAxis},Customized:{handler:P.renderCustomized}}),P.clipPathId="".concat((N=w.id)!==null&&N!==void 0?N:Km("recharts"),"-clip"),P.throttleTriggeredAfterMouseMove=SK(P.triggeredAfterMouseMove,(S=w.throttleDelay)!==null&&S!==void 0?S:1e3/60),P.state={},P}return SVe(b,y),jVe(b,[{key:"componentDidMount",value:function(){var N,S;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(N=this.props.margin.left)!==null&&N!==void 0?N:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var N=this.props,S=N.children,P=N.data,C=N.height,k=N.layout,O=zs(S,Yi);if(O){var I=O.props.defaultIndex;if(!(typeof I!="number"||I<0||I>this.state.tooltipTicks.length-1)){var T=this.state.tooltipTicks[I]&&this.state.tooltipTicks[I].value,E=jC(this.state,P,I,T),D=this.state.tooltipTicks[I].coordinate,B=(this.state.offset.top+C)/2,M=k==="horizontal",U=M?{x:D,y:B}:{y:D,x:B},H=this.state.formattedGraphicalItems.find(function(W){var V=W.item;return V.type.name==="Scatter"});H&&(U=Pe(Pe({},U),H.props.points[I].tooltipPosition),E=H.props.points[I].tooltipPayload);var K={activeTooltipIndex:I,isTooltipActive:!0,activeLabel:T,activePayload:E,activeCoordinate:U};this.setState(K),this.renderCursor(O),this.accessibilityManager.setIndex(I)}}}},{key:"getSnapshotBeforeUpdate",value:function(N,S){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==S.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==N.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==N.margin){var P,C;this.accessibilityManager.setDetails({offset:{left:(P=this.props.margin.left)!==null&&P!==void 0?P:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0}})}return null}},{key:"componentDidUpdate",value:function(N){X2([zs(N.children,Yi)],[zs(this.props.children,Yi)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var N=zs(this.props.children,Yi);if(N&&typeof N.props.shared=="boolean"){var S=N.props.shared?"axis":"item";return l.indexOf(S)>=0?S:a}return a}},{key:"getMouseInfo",value:function(N){if(!this.container)return null;var S=this.container,P=S.getBoundingClientRect(),C=cMe(P),k={chartX:Math.round(N.pageX-C.left),chartY:Math.round(N.pageY-C.top)},O=P.width/S.offsetWidth||1,I=this.inRange(k.chartX,k.chartY,O);if(!I)return null;var T=this.state,E=T.xAxisMap,D=T.yAxisMap,B=this.getTooltipEventType(),M=o6(this.state,this.props.data,this.props.layout,I);if(B!=="axis"&&E&&D){var U=Nl(E).scale,H=Nl(D).scale,K=U&&U.invert?U.invert(k.chartX):null,W=H&&H.invert?H.invert(k.chartY):null;return Pe(Pe({},k),{},{xValue:K,yValue:W},M)}return M?Pe(Pe({},k),M):null}},{key:"inRange",value:function(N,S){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,C=this.props.layout,k=N/P,O=S/P;if(C==="horizontal"||C==="vertical"){var I=this.state.offset,T=k>=I.left&&k<=I.left+I.width&&O>=I.top&&O<=I.top+I.height;return T?{x:k,y:O}:null}var E=this.state,D=E.angleAxisMap,B=E.radiusAxisMap;if(D&&B){var M=Nl(D);return zR({x:k,y:O},M)}return null}},{key:"parseEventsOfWrapper",value:function(){var N=this.props.children,S=this.getTooltipEventType(),P=zs(N,Yi),C={};P&&S==="axis"&&(P.props.trigger==="click"?C={onClick:this.handleClick}:C={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var k=tj(this.props,this.handleOuterEvent);return Pe(Pe({},k),C)}},{key:"addListener",value:function(){jS.on(bS,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){jS.removeListener(bS,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(N,S,P){for(var C=this.state.formattedGraphicalItems,k=0,O=C.length;k<O;k++){var I=C[k];if(I.item===N||I.props.key===N.key||S===Io(I.item.type)&&P===I.childIndex)return I}return null}},{key:"renderClipPath",value:function(){var N=this.clipPathId,S=this.state.offset,P=S.left,C=S.top,k=S.height,O=S.width;return re.createElement("defs",null,re.createElement("clipPath",{id:N},re.createElement("rect",{x:P,y:C,height:k,width:O})))}},{key:"getXScales",value:function(){var N=this.state.xAxisMap;return N?Object.entries(N).reduce(function(S,P){var C=s6(P,2),k=C[0],O=C[1];return Pe(Pe({},S),{},vt({},k,O.scale))},{}):null}},{key:"getYScales",value:function(){var N=this.state.yAxisMap;return N?Object.entries(N).reduce(function(S,P){var C=s6(P,2),k=C[0],O=C[1];return Pe(Pe({},S),{},vt({},k,O.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(N){var S;return(S=this.state.xAxisMap)===null||S===void 0||(S=S[N])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(N){var S;return(S=this.state.yAxisMap)===null||S===void 0||(S=S[N])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(N){var S=this.state,P=S.formattedGraphicalItems,C=S.activeItem;if(P&&P.length)for(var k=0,O=P.length;k<O;k++){var I=P[k],T=I.props,E=I.item,D=E.type.defaultProps!==void 0?Pe(Pe({},E.type.defaultProps),E.props):E.props,B=Io(E.type);if(B==="Bar"){var M=(T.data||[]).find(function(W){return H6e(N,W)});if(M)return{graphicalItem:I,payload:M}}else if(B==="RadialBar"){var U=(T.data||[]).find(function(W){return zR(N,W)});if(U)return{graphicalItem:I,payload:U}}else if(Bw(I,C)||Vw(I,C)||Yx(I,C)){var H=G$e({graphicalItem:I,activeTooltipItem:C,itemData:D.data}),K=D.activeIndex===void 0?H:D.activeIndex;return{graphicalItem:Pe(Pe({},I),{},{childIndex:K}),payload:Yx(I,C)?D.data[H]:I.props.data[H]}}}return null}},{key:"render",value:function(){var N=this;if(!A3(this))return null;var S=this.props,P=S.children,C=S.className,k=S.width,O=S.height,I=S.style,T=S.compact,E=S.title,D=S.desc,B=i6(S,mVe),M=It(B,!1);if(T)return re.createElement($5,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},re.createElement(J2,Qu({},M,{width:k,height:O,title:E,desc:D}),this.renderClipPath(),O3(P,this.renderMap)));if(this.props.accessibilityLayer){var U,H;M.tabIndex=(U=this.props.tabIndex)!==null&&U!==void 0?U:0,M.role=(H=this.props.role)!==null&&H!==void 0?H:"application",M.onKeyDown=function(W){N.accessibilityManager.keyboardEvent(W)},M.onFocus=function(){N.accessibilityManager.focus()}}var K=this.parseEventsOfWrapper();return re.createElement($5,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},re.createElement("div",Qu({className:Kt("recharts-wrapper",C),style:Pe({position:"relative",cursor:"default",width:k,height:O},I)},K,{ref:function(V){N.container=V}}),re.createElement(J2,Qu({},M,{width:k,height:O,title:E,desc:D,style:AVe}),this.renderClipPath(),O3(P,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(j.Component);vt(x,"displayName",n),vt(x,"defaultProps",Pe({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},m)),vt(x,"getDerivedStateFromProps",function(y,b){var w=y.dataKey,N=y.data,S=y.children,P=y.width,C=y.height,k=y.layout,O=y.stackOffset,I=y.margin,T=b.dataStartIndex,E=b.dataEndIndex;if(b.updateId===void 0){var D=l6(y);return Pe(Pe(Pe({},D),{},{updateId:0},g(Pe(Pe({props:y},D),{},{updateId:0}),b)),{},{prevDataKey:w,prevData:N,prevWidth:P,prevHeight:C,prevLayout:k,prevStackOffset:O,prevMargin:I,prevChildren:S})}if(w!==b.prevDataKey||N!==b.prevData||P!==b.prevWidth||C!==b.prevHeight||k!==b.prevLayout||O!==b.prevStackOffset||!fh(I,b.prevMargin)){var B=l6(y),M={chartX:b.chartX,chartY:b.chartY,isTooltipActive:b.isTooltipActive},U=Pe(Pe({},o6(b,N,k)),{},{updateId:b.updateId+1}),H=Pe(Pe(Pe({},B),M),U);return Pe(Pe(Pe({},H),g(Pe({props:y},H),b)),{},{prevDataKey:w,prevData:N,prevWidth:P,prevHeight:C,prevLayout:k,prevStackOffset:O,prevMargin:I,prevChildren:S})}if(!X2(S,b.prevChildren)){var K,W,V,z,q=zs(S,dm),J=q&&(K=(W=q.props)===null||W===void 0?void 0:W.startIndex)!==null&&K!==void 0?K:T,pe=q&&(V=(z=q.props)===null||z===void 0?void 0:z.endIndex)!==null&&V!==void 0?V:E,ye=J!==T||pe!==E,Ne=!Vt(N),ke=Ne&&!ye?b.updateId:b.updateId+1;return Pe(Pe({updateId:ke},g(Pe(Pe({props:y},b),{},{updateId:ke,dataStartIndex:J,dataEndIndex:pe}),b)),{},{prevChildren:S,dataStartIndex:J,dataEndIndex:pe})}return null}),vt(x,"renderActiveDot",function(y,b,w){var N;return j.isValidElement(y)?N=j.cloneElement(y,b):Et(y)?N=y(b):N=re.createElement(zw,b),re.createElement(Nr,{className:"recharts-active-dot",key:w},N)});var p=j.forwardRef(function(b,w){return re.createElement(x,Qu({},b,{ref:w}))});return p.displayName=x.displayName,p},zVe=BZ({chartName:"LineChart",GraphicalChild:gm,axisComponents:[{axisType:"xAxis",AxisComp:jm},{axisType:"yAxis",AxisComp:Fl}],formatAxisMap:tZ}),BVe=BZ({chartName:"AreaChart",GraphicalChild:el,axisComponents:[{axisType:"xAxis",AxisComp:jm},{axisType:"yAxis",AxisComp:Fl}],formatAxisMap:tZ});function VVe(){ft(),Gt();const[e,t]=j.useState("overview");j.useState("today");const n={totalMenuItems:45,todayOrders:127,todayRevenue:3250,pendingOrders:8,preparingOrders:12,readyOrders:3,averageRating:4.7,totalReviews:342,averagePreparationTime:18,tablesOccupied:15,totalTables:20,staffOnDuty:8},s=[{id:1,orderNumber:"ORD-001",customerName:"John Doe",items:["Chicken Biryani","Mango Lassi"],total:25.99,status:"preparing",orderTime:"2:30 PM",estimatedTime:15,tableNumber:7,orderType:"dine-in"},{id:2,orderNumber:"ORD-002",customerName:"Sarah Wilson",items:["Vegetable Curry","Naan","Rice"],total:18.5,status:"ready",orderTime:"2:25 PM",estimatedTime:0,orderType:"takeout"},{id:3,orderNumber:"ORD-003",customerName:"Mike Johnson",items:["Tandoori Chicken","Garlic Naan"],total:22.75,status:"pending",orderTime:"2:35 PM",estimatedTime:20,deliveryAddress:"123 Main St",orderType:"delivery"}],i=[{time:"9 AM",orders:5,revenue:125},{time:"10 AM",orders:8,revenue:200},{time:"11 AM",orders:12,revenue:300},{time:"12 PM",orders:25,revenue:625},{time:"1 PM",orders:30,revenue:750},{time:"2 PM",orders:22,revenue:550},{time:"3 PM",orders:15,revenue:375}],a=l=>{switch(l){case"pending":return"bg-yellow-500";case"preparing":return"bg-blue-500";case"ready":return"bg-green-500";case"delivered":return"bg-gray-500";case"cancelled":return"bg-red-500";default:return"bg-gray-500"}},o=l=>{switch(l){case"pending":return r.jsx(gt,{className:"h-4 w-4"});case"preparing":return r.jsx(Ta,{className:"h-4 w-4"});case"ready":return r.jsx(wt,{className:"h-4 w-4"});case"delivered":return r.jsx(kt,{className:"h-4 w-4"});case"cancelled":return r.jsx(Ys,{className:"h-4 w-4"});default:return r.jsx(wr,{className:"h-4 w-4"})}};return r.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex justify-between items-center py-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Ta,{className:"h-8 w-8 text-orange-600"}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Restaurant Dashboard"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your restaurant operations"})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs(F,{variant:"outline",size:"sm",children:[r.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Notifications"]}),r.jsxs(F,{children:[r.jsx(Wt,{className:"h-4 w-4 mr-2"}),"New Order"]})]})]})})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs(oi,{value:e,onValueChange:t,children:[r.jsxs(Ds,{className:"grid w-full grid-cols-6",children:[r.jsx(ht,{value:"overview",children:"Overview"}),r.jsx(ht,{value:"orders",children:"Orders"}),r.jsx(ht,{value:"menu",children:"Menu"}),r.jsx(ht,{value:"tables",children:"Tables"}),r.jsx(ht,{value:"staff",children:"Staff"}),r.jsx(ht,{value:"analytics",children:"Analytics"})]}),r.jsxs(tt,{value:"overview",className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs(G,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ie,{className:"text-sm font-medium",children:"Today's Orders"}),r.jsx(rre,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold",children:n.todayOrders}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"+12% from yesterday"})]})]}),r.jsxs(G,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ie,{className:"text-sm font-medium",children:"Today's Revenue"}),r.jsx(Hr,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsxs("div",{className:"text-2xl font-bold",children:["$",n.todayRevenue]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"+8% from yesterday"})]})]}),r.jsxs(G,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ie,{className:"text-sm font-medium",children:"Active Orders"}),r.jsx(Ta,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold",children:n.pendingOrders+n.preparingOrders}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.readyOrders," ready for pickup"]})]})]}),r.jsxs(G,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ie,{className:"text-sm font-medium",children:"Tables Occupied"}),r.jsx(Ti,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsxs("div",{className:"text-2xl font-bold",children:[n.tablesOccupied,"/",n.totalTables]}),r.jsx(bd,{value:n.tablesOccupied/n.totalTables*100,className:"mt-2"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs(G,{className:"lg:col-span-2",children:[r.jsx(se,{children:r.jsx(ie,{children:"Recent Orders"})}),r.jsx(Z,{children:r.jsx("div",{className:"space-y-4",children:s.map(l=>r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:`p-2 rounded-full text-white ${a(l.status)}`,children:o(l.status)}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:l.orderNumber}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[l.customerName,"  ",l.orderTime]}),r.jsx("div",{className:"text-xs text-muted-foreground",children:l.items.join(", ")})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"font-medium",children:["$",l.total]}),r.jsx(le,{variant:l.status==="ready"?"default":"secondary",children:l.status}),l.estimatedTime>0&&r.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[l.estimatedTime," min"]})]})]},l.id))})})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:"Kitchen Status"})}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:"Pending Orders"}),r.jsx(le,{variant:"outline",children:n.pendingOrders})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:"Preparing"}),r.jsx(le,{variant:"outline",children:n.preparingOrders})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:"Ready"}),r.jsx(le,{variant:"default",children:n.readyOrders})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:"Avg. Prep Time"}),r.jsxs("span",{className:"text-sm font-medium",children:[n.averagePreparationTime," min"]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:"Staff on Duty"}),r.jsx("span",{className:"text-sm font-medium",children:n.staffOnDuty})]})]})]})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:"Today's Sales"})}),r.jsx(Z,{children:r.jsx(TL,{width:"100%",height:300,children:r.jsxs(BVe,{data:i,children:[r.jsx(lC,{strokeDasharray:"3 3"}),r.jsx(jm,{dataKey:"time"}),r.jsx(Fl,{yAxisId:"left"}),r.jsx(Fl,{yAxisId:"right",orientation:"right"}),r.jsx(Yi,{}),r.jsx(rc,{}),r.jsx(el,{yAxisId:"left",type:"monotone",dataKey:"orders",stackId:"1",stroke:"#8884d8",fill:"#8884d8",name:"Orders"}),r.jsx(el,{yAxisId:"right",type:"monotone",dataKey:"revenue",stackId:"2",stroke:"#82ca9d",fill:"#82ca9d",name:"Revenue ($)"})]})})})]})]}),r.jsxs(tt,{value:"orders",className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Order Management"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(he,{placeholder:"Search orders...",className:"w-64"}),r.jsx(F,{variant:"outline",children:"Filter"}),r.jsx(F,{children:"New Order"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center",children:[r.jsx(gt,{className:"h-5 w-5 mr-2 text-yellow-500"}),"Pending (",n.pendingOrders,")"]})}),r.jsx(Z,{children:r.jsx("div",{className:"space-y-3",children:s.filter(l=>l.status==="pending").map(l=>r.jsx("div",{className:"p-3 border rounded-lg",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:l.orderNumber}),r.jsx("div",{className:"text-sm text-muted-foreground",children:l.customerName}),r.jsx("div",{className:"text-xs text-muted-foreground",children:l.orderTime})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"font-medium",children:["$",l.total]}),r.jsx(F,{size:"sm",className:"mt-1",children:"Start"})]})]})},l.id))})})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center",children:[r.jsx(Ta,{className:"h-5 w-5 mr-2 text-blue-500"}),"Preparing (",n.preparingOrders,")"]})}),r.jsx(Z,{children:r.jsx("div",{className:"space-y-3",children:s.filter(l=>l.status==="preparing").map(l=>r.jsx("div",{className:"p-3 border rounded-lg",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:l.orderNumber}),r.jsx("div",{className:"text-sm text-muted-foreground",children:l.customerName}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:[l.estimatedTime," min left"]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"font-medium",children:["$",l.total]}),r.jsx(F,{size:"sm",variant:"outline",className:"mt-1",children:"Ready"})]})]})},l.id))})})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center",children:[r.jsx(wt,{className:"h-5 w-5 mr-2 text-green-500"}),"Ready (",n.readyOrders,")"]})}),r.jsx(Z,{children:r.jsx("div",{className:"space-y-3",children:s.filter(l=>l.status==="ready").map(l=>r.jsx("div",{className:"p-3 border rounded-lg bg-green-50 dark:bg-green-900/20",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:l.orderNumber}),r.jsx("div",{className:"text-sm text-muted-foreground",children:l.customerName}),r.jsx("div",{className:"text-xs text-green-600",children:"Ready for pickup"})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"font-medium",children:["$",l.total]}),r.jsx(F,{size:"sm",variant:"default",className:"mt-1",children:"Complete"})]})]})},l.id))})})]})]})]}),r.jsxs(tt,{value:"menu",className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Menu Management"}),r.jsx("div",{className:"flex space-x-2",children:r.jsx(Ae,{href:"/seller/products/add",children:r.jsxs(F,{children:[r.jsx(Wt,{className:"h-4 w-4 mr-2"}),"Add Menu Item"]})})})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:"Menu Categories"})}),r.jsx(Z,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsx(G,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium",children:"Appetizers"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"8 items"})]}),r.jsx(F,{variant:"outline",size:"sm",children:"Manage"})]})}),r.jsx(G,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium",children:"Main Courses"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"15 items"})]}),r.jsx(F,{variant:"outline",size:"sm",children:"Manage"})]})}),r.jsx(G,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium",children:"Beverages"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"12 items"})]}),r.jsx(F,{variant:"outline",size:"sm",children:"Manage"})]})})]})})]})]}),r.jsxs(tt,{value:"tables",className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Table Management"}),r.jsxs(F,{children:[r.jsx(Wt,{className:"h-4 w-4 mr-2"}),"Add Table"]})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:"Table Status"})}),r.jsx(Z,{children:r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4",children:Array.from({length:20},(l,c)=>c+1).map(l=>r.jsxs(G,{className:`p-4 text-center cursor-pointer transition-colors ${l<=n.tablesOccupied?"bg-red-50 dark:bg-red-900/20 border-red-200":"bg-green-50 dark:bg-green-900/20 border-green-200"}`,children:[r.jsxs("div",{className:"font-medium",children:["Table ",l]}),r.jsx("div",{className:`text-sm ${l<=n.tablesOccupied?"text-red-600":"text-green-600"}`,children:l<=n.tablesOccupied?"Occupied":"Available"})]},l))})})]})]}),r.jsxs(tt,{value:"staff",className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Staff Management"}),r.jsxs(F,{children:[r.jsx(Wt,{className:"h-4 w-4 mr-2"}),"Add Staff"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:"Staff on Duty"})}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold",children:n.staffOnDuty}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"out of 12 total staff"})]})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:"Kitchen Staff"})}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold",children:"5"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"chefs and cooks"})]})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:"Service Staff"})}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold",children:"3"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"waiters and servers"})]})]})]})]}),r.jsxs(tt,{value:"analytics",className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Restaurant Analytics"}),r.jsx("div",{className:"flex space-x-2",children:r.jsx(F,{variant:"outline",size:"sm",children:"Export Report"})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{className:"text-sm",children:"Average Rating"})}),r.jsxs(Z,{children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx($t,{className:"h-5 w-5 text-yellow-500 fill-current"}),r.jsx("span",{className:"text-2xl font-bold",children:n.averageRating})]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.totalReviews," reviews"]})]})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{className:"text-sm",children:"Avg. Prep Time"})}),r.jsxs(Z,{children:[r.jsxs("div",{className:"text-2xl font-bold",children:[n.averagePreparationTime," min"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"-2 min from last week"})]})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{className:"text-sm",children:"Menu Items"})}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold",children:n.totalMenuItems}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"across all categories"})]})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{className:"text-sm",children:"Table Turnover"})}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold",children:"3.2x"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"tables per day"})]})]})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:"Weekly Sales Trend"})}),r.jsx(Z,{children:r.jsx(TL,{width:"100%",height:400,children:r.jsxs(zVe,{data:[{day:"Mon",orders:45,revenue:1125},{day:"Tue",orders:52,revenue:1300},{day:"Wed",orders:48,revenue:1200},{day:"Thu",orders:61,revenue:1525},{day:"Fri",orders:75,revenue:1875},{day:"Sat",orders:88,revenue:2200},{day:"Sun",orders:67,revenue:1675}],children:[r.jsx(lC,{strokeDasharray:"3 3"}),r.jsx(jm,{dataKey:"day"}),r.jsx(Fl,{yAxisId:"left"}),r.jsx(Fl,{yAxisId:"right",orientation:"right"}),r.jsx(Yi,{}),r.jsx(rc,{}),r.jsx(gm,{yAxisId:"left",type:"monotone",dataKey:"orders",stroke:"#8884d8",name:"Orders"}),r.jsx(gm,{yAxisId:"right",type:"monotone",dataKey:"revenue",stroke:"#82ca9d",name:"Revenue ($)"})]})})})]})]})]})})]})}function NS({rating:e,onRatingChange:t,maxRating:n=5,size:s="md",readonly:i=!1,showValue:a=!1,className:o}){const[l,c]=j.useState(0),d={sm:"h-4 w-4",md:"h-5 w-5",lg:"h-6 w-6"},h=x=>{!i&&t&&t(x)},m=x=>{i||c(x)},f=()=>{i||c(0)},g=l||e;return r.jsxs("div",{className:Ve("flex items-center gap-1",o),children:[r.jsx("div",{className:"flex items-center",children:Array.from({length:n},(x,p)=>{const y=p+1,b=y<=g,w=y>g&&y-1<g;return r.jsx("button",{type:"button",className:Ve("relative transition-colors",!i&&"hover:scale-110 cursor-pointer",i&&"cursor-default"),onClick:()=>h(y),onMouseEnter:()=>m(y),onMouseLeave:f,disabled:i,children:r.jsx($t,{className:Ve(d[s],"transition-colors",b?"fill-yellow-400 text-yellow-400":w?"fill-yellow-200 text-yellow-400":"fill-gray-200 text-gray-300 dark:fill-gray-700 dark:text-gray-600")})},p)})}),a&&r.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:e.toFixed(1)})]})}function UVe({productId:e,productName:t}){const[n,s]=j.useState(!1),[i,a]=j.useState({rating:0,title:"",comment:""}),[o,l]=j.useState(null),{user:c}=Gt(),{toast:d}=ft(),h=pn(),{data:m=[],isLoading:f}=Re({queryKey:["/api/products",e,"reviews",{minRating:o}],queryFn:async()=>{const S=await(await fetch(`/api/products/${e}/reviews${o?`?minRating=${o}`:""}`)).json();return Array.isArray(S)?S:[]}}),g=pt({mutationFn:N=>Bt("/api/reviews",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)}),onSuccess:()=>{h.invalidateQueries({queryKey:["/api/products",e,"reviews"]}),s(!1),a({rating:0,title:"",comment:""}),d({title:"Review submitted",description:"Your review has been posted successfully!"})},onError:N=>{d({title:"Error",description:N.message||"Failed to submit review",variant:"destructive"})}}),x=pt({mutationFn:N=>Bt(`/api/reviews/${N}/helpful`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:(c==null?void 0:c.id)||9})}),onSuccess:()=>{h.invalidateQueries({queryKey:["/api/products",e,"reviews"]}),d({title:"Thank you!",description:"Review marked as helpful"})},onError:N=>{const S=(N==null?void 0:N.error)||(N==null?void 0:N.message)||"Failed to mark review as helpful";d({title:"Error",description:S,variant:"destructive"})}}),p=()=>{if(!c){d({title:"Login required",description:"Please login to submit a review",variant:"destructive"});return}if(i.rating===0){d({title:"Rating required",description:"Please provide a rating",variant:"destructive"});return}const N={productId:e,customerId:c.id,rating:i.rating,title:i.title||null,comment:i.comment||null};console.log("Submitting review with payload:",N),g.mutate(N)},y=m.length>0?m.reduce((N,S)=>N+S.rating,0)/m.length:0,b=[5,4,3,2,1].map(N=>({rating:N,count:m.filter(S=>S.rating===N).length,percentage:m.length>0?m.filter(S=>S.rating===N).length/m.length*100:0})),w=c&&m.some(N=>{var S;return((S=N.customer)==null?void 0:S.id)===c.id});return f?r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-2"}),r.jsx("div",{className:"h-20 bg-gray-200 rounded"})]})}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs(G,{children:[r.jsx(se,{className:"pb-3",children:r.jsx(ie,{className:"text-lg",children:"Customer Reviews"})}),r.jsxs(Z,{className:"pt-0",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:y.toFixed(1)}),r.jsx(NS,{rating:y,readonly:!0,size:"md",className:"justify-center mb-1"}),r.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[m.length," review",m.length!==1?"s":""]})]}),r.jsx("div",{className:"space-y-1",children:b.map(({rating:N,count:S,percentage:P})=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs w-6",children:N}),r.jsx($t,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),r.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-1.5",children:r.jsx("div",{className:"bg-yellow-400 h-1.5 rounded-full",style:{width:`${P}%`}})}),r.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400 w-8",children:S})]},N))})]}),r.jsxs("div",{className:"flex flex-wrap gap-1 mt-3",children:[r.jsx(F,{variant:o===null?"default":"outline",size:"sm",className:"h-7 px-3 text-xs",onClick:()=>l(null),children:"All"}),[5,4,3,2,1].map(N=>r.jsxs(F,{variant:o===N?"default":"outline",size:"sm",className:"h-7 px-3 text-xs",onClick:()=>l(N),children:[N,""]},N))]})]})]}),c&&!w&&r.jsxs(G,{children:[r.jsx(se,{className:"pb-3",children:r.jsx(ie,{className:"text-base",children:"Write a Review"})}),r.jsx(Z,{className:"pt-0",children:n?r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium mb-1",children:"Rating *"}),r.jsx(NS,{rating:i.rating,onRatingChange:N=>a(S=>({...S,rating:N})),size:"md"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium mb-1",children:"Title (Optional)"}),r.jsx(he,{placeholder:"Summarize your review...",value:i.title,onChange:N=>a(S=>({...S,title:N.target.value})),className:"h-8"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium mb-1",children:"Review (Optional)"}),r.jsx(Yt,{placeholder:`Share your thoughts about ${t}...`,value:i.comment,onChange:N=>a(S=>({...S,comment:N.target.value})),rows:3,className:"text-sm"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(F,{onClick:p,disabled:g.isPending||i.rating===0,children:g.isPending?"Submitting...":"Submit Review"}),r.jsx(F,{variant:"outline",onClick:()=>{s(!1),a({rating:0,title:"",comment:""})},children:"Cancel"})]})]}):r.jsx(F,{onClick:()=>s(!0),children:"Write a Review"})})]}),r.jsx("div",{className:"space-y-3",children:m.length===0?r.jsx(G,{children:r.jsx(Z,{className:"text-center py-6",children:r.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No reviews yet. Be the first to review this product!"})})}):m.map(N=>{var S,P;return r.jsx(G,{children:r.jsxs(Z,{className:"pt-4 pb-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center",children:r.jsx(Wr,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:((S=N.customer)==null?void 0:S.fullName)||((P=N.customer)==null?void 0:P.username)||"Anonymous"}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600 dark:text-gray-400",children:[r.jsx(Zl,{className:"h-3 w-3"}),new Date(N.createdAt).toLocaleDateString(),N.isVerifiedPurchase&&r.jsx(le,{variant:"secondary",className:"text-xs h-4",children:"Verified"})]})]})]}),r.jsx(NS,{rating:N.rating,readonly:!0,size:"sm"})]}),N.title&&r.jsx("h4",{className:"font-medium text-sm mb-2",children:N.title}),N.comment&&r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-3 text-sm leading-relaxed",children:N.comment}),r.jsx("div",{className:"flex items-center gap-4 text-xs",children:r.jsxs("button",{onClick:()=>x.mutate(N.id),disabled:x.isPending,className:"flex items-center gap-1 text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 disabled:opacity-50 transition-colors",children:[r.jsx(F8,{className:"h-3 w-3"}),x.isPending?"...":`Helpful (${N.helpfulCount})`]})})]})},N.id)})})]})}function SS(){const{id:e}=Cm(),[,t]=Jr(),[n,s]=j.useState(1),[i,a]=j.useState(!1),{addToCart:o}=Nc(),{toggleWishlist:l,isInWishlist:c}=vg(),{user:d}=Gt(),{toast:h}=ft(),[m,f]=j.useState(null),[g,x]=j.useState(null);j.useEffect(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(T=>{f({lat:T.coords.latitude,lon:T.coords.longitude})},T=>{console.log("Location access denied:",T)},{timeout:1e4,enableHighAccuracy:!1})},[]);const{data:p,isLoading:y}=Re({queryKey:[`/api/products/${e}`],enabled:!!e}),{data:b}=Re({queryKey:[`/api/stores/${p==null?void 0:p.storeId}`],enabled:!!(p!=null&&p.storeId)}),{data:w=[]}=Re({queryKey:["/api/products",{category:p==null?void 0:p.categoryId}],enabled:!!(p!=null&&p.categoryId)});j.useEffect(()=>{if(b!=null&&b.latitude&&(b!=null&&b.longitude)&&m){const E=((D,B,M,U)=>{const K=(M-D)*Math.PI/180,W=(U-B)*Math.PI/180,V=Math.sin(K/2)*Math.sin(K/2)+Math.cos(D*Math.PI/180)*Math.cos(M*Math.PI/180)*Math.sin(W/2)*Math.sin(W/2);return 6371*(2*Math.atan2(Math.sqrt(V),Math.sqrt(1-V)))})(m.lat,m.lon,Number(b.latitude),Number(b.longitude));E<1?x(`${Math.round(E*1e3)}m away`):x(`${E.toFixed(1)}km away`)}},[b,m]);const N=async()=>{if(p)try{await o(p.id,n),h({title:"Added to cart",description:`${n} ${p.name}(s) added to your cart.`})}catch(T){h({title:"Error",description:T instanceof Error?T.message:"Failed to add to cart",variant:"destructive"})}},S=async()=>{if(!p)return;if(!d){h({title:"Login required",description:"Please login to add items to your wishlist.",variant:"destructive"});return}const T=c(p.id);await l(p.id),h({title:T?"Removed from wishlist":"Added to wishlist",description:`${p.name} has been ${T?"removed from":"added to"} your wishlist.`})},P=async()=>{if(console.log("Share button clicked"),!p){console.log("No product found");return}const T=window.location.href,E=`Check out ${p.name} on Siraha Bazaar - ${Number(p.price).toLocaleString()}`;console.log("Share URL:",T),console.log("Share text:",E);try{if(navigator.share){console.log("Using Web Share API");const D={title:p.name,text:E,url:T};await navigator.share(D),h({title:" Shared successfully",description:"Product has been shared."})}else if(navigator.clipboard)console.log("Using clipboard fallback"),await navigator.clipboard.writeText(T),h({title:" Link copied",description:"Product link copied to clipboard."});else{console.log("Using final fallback");const D=document.createElement("textarea");D.value=T,document.body.appendChild(D),D.select(),document.execCommand("copy"),document.body.removeChild(D),h({title:" Link copied",description:"Product link copied to clipboard."})}}catch(D){console.error("Share error:",D),h({title:" Share link",description:T,duration:5e3})}};if(y)return r.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Loading product..."})]})});if(!p)return r.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:r.jsxs("div",{className:"text-center px-4",children:[r.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-900",children:"Product not found"}),r.jsx(Ae,{href:"/products",children:r.jsx(F,{className:"bg-orange-500 hover:bg-orange-600",children:"Back to Products"})})]})});const C=p.originalPrice?Math.round((Number(p.originalPrice)-Number(p.price))/Number(p.originalPrice)*100):0,k=r2(p),O=c(p.id),I=w.filter(T=>T.id!==(p==null?void 0:p.id)).slice(0,8);return console.log("Rendering ModernProductDetail, icons should be visible"),console.log("ArrowLeft, Share2, Heart icons from lucide-react"),r.jsxs("div",{className:"min-h-screen bg-white modern-product-detail",style:{paddingBottom:"144px",overflowX:"hidden"},children:[r.jsxs("div",{className:"flex justify-between items-center gap-2 px-4 pt-4 pb-2",children:[r.jsxs("button",{onClick:()=>{console.log("Back button clicked"),t("/products")},className:"flex items-center justify-center p-3 hover:bg-gray-100 rounded-full transition-colors border border-gray-200 bg-white shadow-sm",style:{minWidth:"44px",minHeight:"44px"},title:"Go Back",children:[r.jsx(Xa,{className:"h-6 w-6 text-gray-700",strokeWidth:2}),r.jsx("span",{className:"sr-only",children:"Back"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:T=>{T.preventDefault(),T.stopPropagation(),console.log("Share button clicked - direct handler"),P()},className:"flex items-center justify-center p-3 hover:bg-gray-100 rounded-full transition-colors border border-gray-200 bg-white shadow-sm",style:{minWidth:"44px",minHeight:"44px"},title:"Share Product",children:[r.jsx(Hp,{className:"h-6 w-6 text-gray-700",strokeWidth:2}),r.jsx("span",{className:"sr-only",children:"Share"})]}),r.jsxs("button",{onClick:T=>{T.preventDefault(),T.stopPropagation(),console.log("Wishlist button clicked"),S()},className:"flex items-center justify-center p-3 hover:bg-gray-100 rounded-full transition-colors border border-gray-200 bg-white shadow-sm",style:{minWidth:"44px",minHeight:"44px"},title:O?"Remove from Wishlist":"Add to Wishlist",children:[r.jsx(La,{className:`h-6 w-6 ${O?"fill-red-500 text-red-500":"text-gray-700"} `,strokeWidth:2}),r.jsx("span",{className:"sr-only",children:O?"Remove from Wishlist":"Add to Wishlist"})]})]})]}),r.jsxs("div",{className:"relative overflow-hidden",children:[r.jsx("img",{src:k[0]||n2(p),alt:p.name,className:"w-full h-80 sm:h-96 object-cover bg-gray-50",onError:T=>{const E=T.target;E.src=n2(p)},loading:"lazy"}),C>0&&r.jsxs(le,{className:"absolute top-4 left-4 bg-red-500 text-white px-3 py-1 text-sm font-semibold",children:[C,"% OFF"]})]}),r.jsxs("div",{className:"px-4 py-6 pb-24",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("h1",{className:"text-xl font-bold text-gray-900 leading-tight mb-2",children:p.name}),p.rating&&parseFloat(p.rating)>0&&r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx($t,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:parseFloat(p.rating).toFixed(1)})]}),r.jsx("span",{className:"text-sm text-gray-500",children:"(245 reviews)"})]})]}),r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:["",Number(p.price).toLocaleString()]}),p.originalPrice&&r.jsxs(r.Fragment,{children:[r.jsxs("span",{className:"text-lg text-gray-400 line-through",children:["",Number(p.originalPrice).toLocaleString()]}),r.jsxs(le,{variant:"secondary",className:"bg-green-100 text-green-700",children:["Save ",(Number(p.originalPrice)-Number(p.price)).toLocaleString()]})]})]}),b&&r.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(nr,{className:"h-5 w-5 text-gray-600 mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium text-gray-900",children:b.name}),r.jsx("p",{className:"text-sm text-gray-600",children:b.address})]}),b.rating&&r.jsxs("div",{className:"flex items-center gap-1 bg-green-100 px-2 py-1 rounded",children:[r.jsx($t,{className:"h-3 w-3 fill-green-600 text-green-600"}),r.jsx("span",{className:"text-xs font-medium text-green-700",children:b.rating})]})]}),r.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[g&&r.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[r.jsx(Le,{className:"h-3 w-3"}),r.jsx("span",{children:g})]}),b.deliveryTime&&r.jsx("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:r.jsxs("span",{children:[" ",b.deliveryTime]})}),b.minimumOrder&&r.jsx("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:r.jsxs("span",{children:["Min: ",b.minimumOrder]})})]}),r.jsx(Ae,{href:`/stores/${b.id}`,children:r.jsxs(F,{variant:"outline",size:"sm",className:"text-orange-600 border-orange-600 hover:bg-orange-50",children:[r.jsx(nr,{className:"h-4 w-4 mr-2"}),"Visit Store"]})})]})]})}),r.jsxs("div",{className:"mb-6",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 mb-3",children:"Quantity"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(F,{variant:"outline",size:"sm",onClick:()=>s(Math.max(1,n-1)),disabled:n<=1,className:"h-10 w-10 p-0",children:r.jsx(R8,{className:"h-4 w-4"})}),r.jsx("span",{className:"text-lg font-medium w-12 text-center",children:n}),r.jsx(F,{variant:"outline",size:"sm",onClick:()=>s(n+1),className:"h-10 w-10 p-0",children:r.jsx(Wt,{className:"h-4 w-4"})})]})]}),p.description&&r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Description"}),r.jsxs("div",{className:"text-gray-700 leading-relaxed",children:[i?r.jsx("p",{children:p.description}):r.jsx("p",{className:"line-clamp-3",children:p.description}),p.description.length>150&&r.jsx("button",{onClick:()=>a(!i),className:"text-orange-500 hover:text-orange-600 mt-2 text-sm font-medium",children:i?"Show less":"Read more"})]})]}),p.productType==="food"&&r.jsxs("div",{className:"space-y-4 mb-6",children:[p.preparationTime&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Prep Time:"}),r.jsx("span",{className:"text-sm text-gray-600",children:p.preparationTime})]}),p.spiceLevel&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Spice Level:"}),r.jsx(le,{variant:"outline",className:"capitalize",children:p.spiceLevel})]}),r.jsxs("div",{className:"flex gap-2",children:[p.isVegetarian&&r.jsx(le,{className:"bg-green-100 text-green-700",children:"Vegetarian"}),p.isVegan&&r.jsx(le,{className:"bg-green-100 text-green-700",children:"Vegan"})]})]}),r.jsx("div",{className:"mb-6",children:r.jsx("div",{className:"border-t border-gray-100 pt-6",children:r.jsx(UVe,{productId:parseInt(e||"0"),productName:p.name})})})]}),I.length>0&&r.jsx("div",{className:"px-4 pb-6 mb-20",children:r.jsxs("div",{className:"border-t border-gray-100 pt-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"You might also like"}),r.jsx("div",{className:"grid grid-cols-2 gap-4",children:I.map(T=>r.jsxs(Ae,{href:`/products/${T.id}`,className:"group bg-white rounded-lg border border-gray-100 overflow-hidden hover:shadow-md transition-shadow",children:[r.jsx("div",{className:"aspect-square overflow-hidden bg-gray-50",children:r.jsx("img",{src:r2(T)[0],alt:T.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),r.jsxs("div",{className:"p-3",children:[r.jsx("h4",{className:"font-medium text-gray-900 text-sm line-clamp-2 mb-1",children:T.name}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"text-orange-600 font-bold text-sm",children:["",Number(T.price).toLocaleString()]}),T.originalPrice&&r.jsxs("span",{className:"text-gray-400 line-through text-xs",children:["",Number(T.originalPrice).toLocaleString()]})]})]})]},T.id))})]})}),r.jsx("div",{className:"fixed left-0 right-0 bg-white border-t border-gray-100 p-4 z-[999] fixed-bottom-cart",style:{position:"fixed",bottom:"64px",left:0,right:0,zIndex:999},children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Total"}),r.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["",(Number(p.price)*n).toLocaleString()]})]}),r.jsxs(F,{onClick:T=>{console.log("Add to Cart button clicked on mobile"),N()},className:"flex-1 modern-cart-button text-white h-12 text-base font-semibold rounded-lg",size:"lg",style:{minHeight:"48px",fontSize:"16px",touchAction:"manipulation",WebkitTouchCallout:"none"},children:[r.jsx(Bn,{className:"h-5 w-5 mr-2"}),"Add to Cart"]})]})})]})}const _S=(e,t)=>{if(e&&e.trim()!==""&&!e.includes("placeholder"))return e;const n=t.toLowerCase();return n.includes("dal")||n.includes("bhat")||n.includes("rice")?"https://images.unsplash.com/photo-1563379091339-03246963d96c?w=400&h=300&fit=crop&auto=format":n.includes("curry")||n.includes("chicken")||n.includes("meat")?"https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=400&h=300&fit=crop&auto=format":n.includes("burger")||n.includes("sandwich")?"https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=400&h=300&fit=crop&auto=format":n.includes("pizza")?"https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=400&h=300&fit=crop&auto=format":n.includes("pasta")||n.includes("noodle")?"https://images.unsplash.com/photo-1551892374-ecf8754cf8b0?w=400&h=300&fit=crop&auto=format":n.includes("dessert")||n.includes("sweet")||n.includes("cake")?"https://images.unsplash.com/photo-1563729784474-d77dbb933a9e?w=400&h=300&fit=crop&auto=format":n.includes("drink")||n.includes("juice")||n.includes("coffee")||n.includes("tea")?"https://images.unsplash.com/photo-1544145945-f90425340c7e?w=400&h=300&fit=crop&auto=format":n.includes("phone")||n.includes("mobile")||n.includes("smartphone")?"https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=400&h=300&fit=crop&auto=format":n.includes("laptop")||n.includes("computer")?"https://images.unsplash.com/photo-1496181133206-80ce9b88a853?w=400&h=300&fit=crop&auto=format":n.includes("headphone")||n.includes("earphone")?"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=400&h=300&fit=crop&auto=format":n.includes("shirt")||n.includes("top")||n.includes("cloth")?"https://images.unsplash.com/photo-1445205170230-053b83016050?w=400&h=300&fit=crop&auto=format":n.includes("food")||n.includes("restaurant")||n.includes("meal")?"https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=400&h=300&fit=crop&auto=format":"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400&h=300&fit=crop&auto=format"};function ly(){const{user:e}=rl(),{toast:t}=ft(),n=pn(),[s,i]=j.useState("dashboard"),[a,o]=j.useState(!1),[l,c]=j.useState(null),{data:d,isLoading:h,error:m}=Re({queryKey:["/api/delivery-partners/user",e==null?void 0:e.id],queryFn:async()=>{const M=await fetch(`/api/delivery-partners/user?userId=${e==null?void 0:e.id}`);if(!M.ok){if(M.status===404)return null;throw new Error("Failed to fetch partner data")}return M.json()},enabled:!!(e!=null&&e.id),retry:2});j.useEffect(()=>{d&&o(d.isAvailable)},[d]);const{data:f,isLoading:g}=Re({queryKey:["/api/delivery-partners/enhanced-stats",d==null?void 0:d.id],queryFn:async()=>{const M=await fetch(`/api/delivery-partners/${d==null?void 0:d.id}/enhanced-stats`);return M.ok?M.json():{todayDeliveries:8,todayEarnings:640,todayDistance:45.2,todayOnlineTime:420,weekDeliveries:47,weekEarnings:3760,weekDistance:312.8,weekAvgRating:4.8,monthDeliveries:195,monthEarnings:15600,monthDistance:1250.4,totalDeliveries:parseInt((d==null?void 0:d.totalDeliveries)||"0"),totalEarnings:parseFloat((d==null?void 0:d.totalEarnings)||"0"),totalDistance:2847.6,overallRating:parseFloat((d==null?void 0:d.rating)||"4.5"),successRate:97.8,activeDeliveries:2,pendingAcceptance:3,weeklyBonus:500,performanceBonus:200,fuelAllowance:150,cityRank:42,totalPartners:156,badges:["Top Performer","On-Time Delivery","Customer Favorite"]}},enabled:!!(d!=null&&d.id)}),{data:x=[],isLoading:p}=Re({queryKey:["/api/deliveries/partner",d==null?void 0:d.id],queryFn:async()=>{const M=await fetch(`/api/deliveries/partner/${d==null?void 0:d.id}`);return M.ok?M.json():[]},enabled:!!(d!=null&&d.id)}),{data:y=[],isLoading:b}=Re({queryKey:["/api/deliveries/active",e==null?void 0:e.id],queryFn:async()=>{const M=await fetch(`/api/deliveries/active/${e==null?void 0:e.id}`);return M.ok?M.json():[]},enabled:!!(e!=null&&e.id),refetchInterval:5e3}),{data:w=[],isLoading:N}=Re({queryKey:["/api/deliveries/available",d==null?void 0:d.id],queryFn:async()=>{const M=await fetch(`/api/deliveries/available?partnerId=${d==null?void 0:d.id}`);return M.ok?M.json():[{id:1,orderId:101,orderNumber:"SB001101",status:"pending_acceptance",customerName:"Priya Sharma",customerPhone:"+977-9841234567",pickupStoreName:"Family Restaurant",pickupStorePhone:"+977-9851234567",pickupAddress:"Main Road, Siraha",pickupLatitude:26.661,pickupLongitude:86.207,deliveryAddress:"Housing Colony, Siraha",deliveryLatitude:26.665,deliveryLongitude:86.212,deliveryFee:50,extraCharges:0,totalEarnings:50,paymentMethod:"COD",codAmount:450,orderValue:450,orderItems:[{name:"Dal Bhat Set",quantity:2,price:180,image:"/images/dal-bhat.jpg"},{name:"Chicken Curry",quantity:1,price:270,image:"/images/chicken-curry.jpg"}],estimatedDistance:3.2,estimatedTime:25,assignedAt:new Date().toISOString(),customerInstructions:"Please call before arriving. Blue gate house.",storeInstructions:"Order ready. Handle with care.",isLiveTracking:!1},{id:2,orderId:102,orderNumber:"SB001102",status:"pending_acceptance",customerName:"Rajesh Kumar",customerPhone:"+977-9812345678",pickupStoreName:"Siraha Electronics",pickupStorePhone:"+977-9823456789",pickupAddress:"Electronics Market, Siraha",pickupLatitude:26.659,pickupLongitude:86.205,deliveryAddress:"New Colony, Siraha",deliveryLatitude:26.668,deliveryLongitude:86.215,deliveryFee:30,extraCharges:10,totalEarnings:40,paymentMethod:"Online",codAmount:0,orderValue:2500,orderItems:[{name:"Samsung Mobile",quantity:1,price:2500,image:"/images/samsung-mobile.jpg"}],estimatedDistance:2.8,estimatedTime:20,assignedAt:new Date(Date.now()-3e5).toISOString(),customerInstructions:"Fragile item. Please handle carefully.",storeInstructions:"Check packaging before pickup.",isLiveTracking:!1}]},enabled:!!(d!=null&&d.id)}),{data:S=[],isLoading:P}=Re({queryKey:["/api/delivery-notifications",e==null?void 0:e.id],queryFn:async()=>{const M=await fetch(`/api/delivery-notifications/${e==null?void 0:e.id}`);return M.ok?M.json():[]},enabled:!!(e!=null&&e.id),refetchInterval:3e3}),C=Array.isArray(x)?x:[],k=Array.isArray(y)?y:[],O=Array.isArray(S)?S:[],I=C.filter(M=>M.status==="assigned");C.filter(M=>M.status==="delivered");const T=O.filter(M=>!M.isRead),E=pt({mutationFn:async M=>{const U=await fetch(`/api/delivery-partners/${d==null?void 0:d.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isAvailable:M})});if(!U.ok)throw new Error("Failed to toggle status");return U.json()},onSuccess:()=>{o(!a),n.invalidateQueries({queryKey:["/api/delivery-partners/user",e==null?void 0:e.id]}),t({title:a?"Going Offline":"Going Online",description:a?"You won't receive new orders":"You can now receive new orders"})}}),D=pt({mutationFn:async M=>{console.log("Attempting to accept delivery/order ID:",M),console.log("Partner data:",d);const U=await fetch(`/api/deliveries/${M}/accept`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({partnerId:(d==null?void 0:d.id)||1,deliveryPartnerId:(d==null?void 0:d.id)||1})});if(!U.ok){const H=await U.text();throw console.error("Accept delivery failed:",U.status,H),new Error(`Failed to accept delivery: ${H}`)}return U.json()},onSuccess:async(M,U)=>{console.log("Delivery accepted successfully:",M);try{const H=O.find(K=>K.orderId===U);H&&await fetch(`/api/notifications/${H.id}/read`,{method:"PUT",headers:{"Content-Type":"application/json"}})}catch(H){console.log("Failed to mark notification as read:",H)}n.invalidateQueries({queryKey:["/api/deliveries/available"]}),n.invalidateQueries({queryKey:["/api/deliveries/partner"]}),n.invalidateQueries({queryKey:["/api/deliveries/active"]}),n.invalidateQueries({queryKey:["/api/delivery-notifications"]}),n.invalidateQueries({queryKey:["/api/notifications"]}),t({title:"Order Accepted",description:"You have successfully accepted this delivery order"})},onError:M=>{console.error("Accept delivery error:",M),t({title:"Error",description:M.message||"Failed to accept delivery order",variant:"destructive"})}}),B=pt({mutationFn:async({deliveryId:M,status:U})=>(await fetch(`/api/deliveries/${M}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:U,partnerId:d==null?void 0:d.id})})).json(),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/deliveries/partner"]}),n.invalidateQueries({queryKey:["/api/deliveries/active"]}),n.invalidateQueries({queryKey:["/api/deliveries/available"]}),t({title:"Status Updated",description:"Delivery status has been updated successfully."})},onError:()=>{t({title:"Error",description:"Failed to update delivery status.",variant:"destructive"})}});return h?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx(kt,{className:"h-16 w-16 text-gray-400 mx-auto mb-4 animate-pulse"}),r.jsx("h2",{className:"text-xl font-semibold text-gray-600",children:"Loading Dashboard..."})]})}):d?r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 w-full overflow-x-hidden",children:[r.jsx("div",{className:"bg-white shadow-sm border-b w-full",children:r.jsx("div",{className:"w-full max-w-none px-2 xs:px-3 sm:px-4 lg:px-6 py-2 xs:py-3 sm:py-4",children:r.jsxs("div",{className:"flex flex-col xs:flex-row xs:items-center xs:justify-between gap-2 xs:gap-3 sm:gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2 xs:gap-3 sm:gap-4 min-w-0 flex-1",children:[r.jsx("div",{className:"p-1.5 xs:p-2 sm:p-3 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full flex-shrink-0",children:r.jsx(kt,{className:"h-3 w-3 xs:h-4 xs:w-4 sm:h-6 sm:w-6 text-white"})}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("h1",{className:"text-sm xs:text-base sm:text-lg lg:text-xl font-bold text-gray-800 truncate",children:"Partner Dashboard"}),r.jsx(le,{variant:d.status==="approved"?"default":"secondary",className:"text-[8px] xs:text-[9px] sm:text-xs px-1 xs:px-2 py-0.5",children:d.status.charAt(0).toUpperCase()+d.status.slice(1)})]})]}),r.jsxs("div",{className:"flex flex-row items-center gap-2 xs:gap-3 flex-shrink-0",children:[r.jsxs("div",{className:"flex items-center gap-1.5 xs:gap-2",children:[r.jsx("span",{className:"text-[10px] xs:text-xs text-gray-600 font-medium",children:a?"Online":"Offline"}),r.jsx("button",{onClick:()=>E.mutate(!a),disabled:E.isPending,className:`relative inline-flex h-5 xs:h-6 w-9 xs:w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 ${a?"bg-green-500 focus:ring-green-500":"bg-gray-300 focus:ring-gray-300"} ${E.isPending?"opacity-50 cursor-not-allowed":""}`,children:r.jsx("span",{className:`inline-block h-3 xs:h-4 w-3 xs:w-4 transform rounded-full bg-white transition-transform ${a?"translate-x-5 xs:translate-x-6":"translate-x-1"}`})})]}),r.jsxs("div",{className:"flex items-center gap-1 xs:gap-1.5",children:[r.jsx($t,{className:"h-3 w-3 xs:h-4 xs:w-4 text-yellow-500 fill-current"}),r.jsx("span",{className:"text-[10px] xs:text-xs font-semibold",children:d.rating||"4.5"})]})]})]})})}),r.jsx("div",{className:"w-full max-w-none px-1 xs:px-2 sm:px-3 lg:px-6 py-2 xs:py-3 sm:py-4 lg:py-6",children:r.jsxs(oi,{value:s,onValueChange:i,className:"w-full",children:[r.jsxs(Ds,{className:"grid grid-cols-7 mb-2 xs:mb-3 sm:mb-6 bg-white shadow-sm h-auto p-0.5 w-full rounded-xl",children:[r.jsx(ht,{value:"dashboard",className:"flex items-center justify-center py-2 xs:py-2.5 px-1 h-auto min-h-[45px] xs:min-h-[50px] data-[state=active]:bg-blue-50 data-[state=active]:text-blue-600 rounded-lg",title:"Dashboard",children:r.jsx(ti,{className:"h-5 w-5 xs:h-6 xs:w-6"})}),r.jsx(ht,{value:"orders",className:"flex items-center justify-center py-2 xs:py-2.5 px-1 h-auto min-h-[45px] xs:min-h-[50px] data-[state=active]:bg-orange-50 data-[state=active]:text-orange-600 rounded-lg",title:"Available Orders",children:r.jsx(rt,{className:"h-5 w-5 xs:h-6 xs:w-6"})}),r.jsx(ht,{value:"active",className:"flex items-center justify-center py-2 xs:py-2.5 px-1 h-auto min-h-[45px] xs:min-h-[50px] data-[state=active]:bg-green-50 data-[state=active]:text-green-600 rounded-lg",title:"Active Deliveries",children:r.jsx(l0,{className:"h-5 w-5 xs:h-6 xs:w-6"})}),r.jsx(ht,{value:"calendar",className:"flex items-center justify-center py-2 xs:py-2.5 px-1 h-auto min-h-[45px] xs:min-h-[50px] data-[state=active]:bg-purple-50 data-[state=active]:text-purple-600 rounded-lg",title:"Calendar",children:r.jsx(Zl,{className:"h-5 w-5 xs:h-6 xs:w-6"})}),r.jsx(ht,{value:"earnings",className:"flex items-center justify-center py-2 xs:py-2.5 px-1 h-auto min-h-[45px] xs:min-h-[50px] data-[state=active]:bg-green-50 data-[state=active]:text-green-600 rounded-lg",title:"Earnings",children:r.jsx(r1,{className:"h-5 w-5 xs:h-6 xs:w-6"})}),r.jsx(ht,{value:"profile",className:"flex items-center justify-center py-2 xs:py-2.5 px-1 h-auto min-h-[45px] xs:min-h-[50px] data-[state=active]:bg-indigo-50 data-[state=active]:text-indigo-600 rounded-lg",title:"Profile",children:r.jsx(Wr,{className:"h-5 w-5 xs:h-6 xs:w-6"})}),r.jsx(ht,{value:"notifications",className:"flex items-center justify-center py-2 xs:py-2.5 px-1 relative h-auto min-h-[45px] xs:min-h-[50px] data-[state=active]:bg-red-50 data-[state=active]:text-red-600 rounded-lg",title:"Alerts",children:r.jsxs("div",{className:"relative",children:[r.jsx(ac,{className:"h-5 w-5 xs:h-6 xs:w-6"}),r.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 xs:w-2.5 xs:h-2.5 bg-red-500 rounded-full"})]})})]}),r.jsxs(tt,{value:"dashboard",className:"space-y-2 xs:space-y-3 sm:space-y-4 lg:space-y-6",children:[r.jsx(G,{className:"bg-gradient-to-r from-red-500 to-red-600 text-white border-0 shadow-lg",children:r.jsx(Z,{className:"p-3 xs:p-4 sm:p-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl xs:text-4xl sm:text-5xl font-bold",children:new Date().getDate()}),r.jsx("div",{className:"text-sm xs:text-base sm:text-lg font-medium opacity-90",children:new Date().toLocaleDateString("en-US",{weekday:"long"}).toUpperCase()}),r.jsx("div",{className:"text-xs xs:text-sm opacity-75 mt-1",children:new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"})})]})})}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-1.5 xs:gap-2 sm:gap-3 lg:gap-4 w-full",children:[r.jsx(G,{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 text-white border-0 shadow-lg",children:r.jsx(Z,{className:"p-2 xs:p-3 sm:p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5 xs:space-y-1",children:[r.jsx("p",{className:"text-emerald-100 text-[9px] xs:text-[10px] sm:text-sm font-medium leading-tight",children:"Today's Performance"}),r.jsxs("p",{className:"text-sm xs:text-base sm:text-xl lg:text-2xl font-bold",children:["",(f==null?void 0:f.todayEarnings)||0]}),r.jsxs("div",{className:"flex items-center gap-1 xs:gap-1.5 sm:gap-2 text-[7px] xs:text-[8px] sm:text-xs text-emerald-100",children:[r.jsx(rt,{className:"h-2 w-2 xs:h-2.5 xs:w-2.5 sm:h-3 sm:w-3"}),r.jsxs("span",{children:[(f==null?void 0:f.todayDeliveries)||0," orders"]}),r.jsx(gd,{className:"h-2 w-2 xs:h-2.5 xs:w-2.5 sm:h-3 sm:w-3"}),r.jsxs("span",{children:[Math.floor(((f==null?void 0:f.todayOnlineTime)||0)/60),"h ",((f==null?void 0:f.todayOnlineTime)||0)%60,"m"]})]})]}),r.jsx("div",{className:"bg-white/20 p-1 xs:p-1.5 sm:p-2 rounded-lg",children:r.jsx(wn,{className:"h-3 w-3 xs:h-4 xs:w-4 sm:h-5 sm:w-5 lg:h-6 lg:w-6"})})]})})}),r.jsx(G,{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white border-0 shadow-lg",children:r.jsx(Z,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"This Week"}),r.jsxs("p",{className:"text-2xl font-bold",children:["",(f==null?void 0:f.weekEarnings)||0]}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-100",children:[r.jsx(h0,{className:"h-3 w-3"}),r.jsxs("span",{children:[(f==null?void 0:f.weekDistance)||0,"km"]}),r.jsx($t,{className:"h-3 w-3"}),r.jsxs("span",{children:[(f==null?void 0:f.weekAvgRating)||4.5,"/5.0"]})]})]}),r.jsx("div",{className:"bg-white/20 p-2 rounded-lg",children:r.jsx(Zl,{className:"h-6 w-6"})})]})})}),r.jsx(G,{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white border-0 shadow-lg",children:r.jsx(Z,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-purple-100 text-sm font-medium",children:"Monthly Progress"}),r.jsxs("p",{className:"text-2xl font-bold",children:["",(f==null?void 0:f.monthEarnings)||0]}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-purple-100",children:[r.jsx(kt,{className:"h-3 w-3"}),r.jsxs("span",{children:[(f==null?void 0:f.monthDeliveries)||0," completed"]}),r.jsx(jt,{className:"h-3 w-3"}),r.jsxs("span",{children:[(f==null?void 0:f.monthDistance)||0,"km"]})]})]}),r.jsx("div",{className:"bg-white/20 p-2 rounded-lg",children:r.jsx(l0,{className:"h-6 w-6"})})]})})}),r.jsx(G,{className:"bg-gradient-to-br from-amber-500 to-amber-600 text-white border-0 shadow-lg",children:r.jsx(Z,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-amber-100 text-sm font-medium",children:"Performance"}),r.jsxs("p",{className:"text-2xl font-bold",children:[(f==null?void 0:f.successRate)||95,"%"]}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-amber-100",children:[r.jsx($t,{className:"h-3 w-3"}),r.jsxs("span",{children:[(f==null?void 0:f.overallRating)||4.5,"/5.0 rating"]}),r.jsx(Ps,{className:"h-3 w-3"}),r.jsxs("span",{children:["#",(f==null?void 0:f.cityRank)||5," in city"]})]})]}),r.jsx("div",{className:"bg-white/20 p-2 rounded-lg",children:r.jsx(wt,{className:"h-6 w-6"})})]})})})]}),r.jsxs(G,{className:"border-0 shadow-lg bg-gradient-to-r from-gray-50 to-gray-100",children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center gap-2 text-gray-800",children:[r.jsx(r1,{className:"h-5 w-5 text-green-600"}),"Incentives & Bonuses (This Week)"]})}),r.jsx(Z,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx("div",{className:"bg-white p-4 rounded-lg border",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Weekly Target Bonus"}),r.jsxs("p",{className:"text-xl font-bold text-green-600",children:["",(f==null?void 0:f.weeklyBonus)||250]}),r.jsx("p",{className:"text-xs text-gray-500",children:"35+ deliveries"})]}),r.jsx(Ps,{className:"h-8 w-8 text-green-500"})]})}),r.jsx("div",{className:"bg-white p-4 rounded-lg border",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Performance Bonus"}),r.jsxs("p",{className:"text-xl font-bold text-blue-600",children:["",(f==null?void 0:f.performanceBonus)||150]}),r.jsx("p",{className:"text-xs text-gray-500",children:"4.5+ rating"})]}),r.jsx($t,{className:"h-8 w-8 text-blue-500"})]})}),r.jsx("div",{className:"bg-white p-4 rounded-lg border",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Fuel Allowance"}),r.jsxs("p",{className:"text-xl font-bold text-orange-600",children:["",(f==null?void 0:f.fuelAllowance)||120]}),r.jsx("p",{className:"text-xs text-gray-500",children:"8 per delivery"})]}),r.jsx(jt,{className:"h-8 w-8 text-orange-500"})]})})]})})]}),r.jsxs(G,{className:"border-0 shadow-lg",children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(wt,{className:"h-5 w-5 text-purple-600"}),"Achievement Badges"]})}),r.jsx(Z,{children:r.jsxs("div",{className:"flex flex-wrap gap-2",children:[((f==null?void 0:f.badges)||[]).map((M,U)=>r.jsxs(le,{variant:"outline",className:"px-3 py-1 text-sm bg-purple-50 border-purple-200 text-purple-700",children:[r.jsx($t,{className:"h-3 w-3 mr-1"}),M]},U)),(!(f!=null&&f.badges)||f.badges.length===0)&&r.jsx("p",{className:"text-gray-500 text-sm",children:"Complete more deliveries to earn achievement badges!"})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(gt,{className:"h-5 w-5"}),"Performance This Week"]})}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Deliveries Completed"}),r.jsx("span",{className:"font-semibold",children:(f==null?void 0:f.weekDeliveries)||0})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Total Earnings"}),r.jsxs("span",{className:"font-semibold",children:["",(f==null?void 0:f.weekEarnings)||0]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Distance Covered"}),r.jsxs("span",{className:"font-semibold",children:[(f==null?void 0:f.weekDistance)||0," km"]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Average Rating"}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx($t,{className:"h-4 w-4 text-yellow-500 fill-current"}),r.jsx("span",{className:"font-semibold",children:(f==null?void 0:f.weekAvgRating)||0})]})]})]})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(r1,{className:"h-5 w-5"}),"Earnings Breakdown"]})}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Base Delivery Fees"}),r.jsxs("span",{className:"font-semibold",children:["",((f==null?void 0:f.weekEarnings)||0)-((f==null?void 0:f.weeklyBonus)||0)-((f==null?void 0:f.performanceBonus)||0)]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Weekly Bonus"}),r.jsxs("span",{className:"font-semibold text-green-600",children:["",(f==null?void 0:f.weeklyBonus)||0]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Performance Bonus"}),r.jsxs("span",{className:"font-semibold text-blue-600",children:["",(f==null?void 0:f.performanceBonus)||0]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Fuel Allowance"}),r.jsxs("span",{className:"font-semibold text-purple-600",children:["",(f==null?void 0:f.fuelAllowance)||0]})]}),r.jsx("div",{className:"border-t pt-2",children:r.jsxs("div",{className:"flex justify-between items-center font-semibold",children:[r.jsx("span",{children:"Total This Week"}),r.jsxs("span",{className:"text-green-600",children:["",(f==null?void 0:f.weekEarnings)||0]})]})})]})]})]}),(f==null?void 0:f.badges)&&f.badges.length>0&&r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx($t,{className:"h-5 w-5"}),"Achievement Badges"]})}),r.jsx(Z,{children:r.jsx("div",{className:"flex flex-wrap gap-2",children:f.badges.map((M,U)=>r.jsx(le,{variant:"secondary",className:"px-3 py-1",children:M},U))})})]})]}),r.jsxs(tt,{value:"orders",className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Available Orders"}),r.jsxs(le,{variant:"outline",children:[w.length," orders available"]})]}),r.jsxs("div",{className:"space-y-4",children:[w.map(M=>{var U,H,K,W,V;return r.jsx(G,{className:"border-l-4 border-l-orange-500 shadow-lg",children:r.jsxs(Z,{className:"p-4",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-400 to-red-500 rounded-lg flex items-center justify-center text-white font-bold text-lg flex-shrink-0",children:M.pickupStoreName?M.pickupStoreName.charAt(0):"S"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("h3",{className:"font-bold text-lg",children:["Order #",M.orderNumber||M.orderId]}),r.jsx(le,{variant:M.paymentMethod==="COD"?"destructive":"default",children:M.paymentMethod||"Prepaid"})]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(rt,{className:"h-3 w-3"}),((U=M.orderItems)==null?void 0:U.length)||1," items"]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(jt,{className:"h-3 w-3"}),M.estimatedDistance||"2.5"," km"]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(gd,{className:"h-3 w-3"}),M.estimatedTime||"15"," mins"]})]})]}),r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center text-white font-bold text-sm flex-shrink-0",children:M.customerName?M.customerName.charAt(0):"C"})]}),M.orderItems&&M.orderItems.length>0&&r.jsxs("div",{className:"mb-4",children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Order Items:"}),r.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:M.orderItems.map((z,q)=>r.jsxs("div",{className:"flex-shrink-0 bg-gray-50 rounded-lg p-2 min-w-[120px]",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-gray-200 to-gray-300 rounded-lg mb-2 flex items-center justify-center",children:r.jsx("img",{src:_S(z.image,z.name),alt:z.name,className:"w-full h-full object-cover rounded-lg",onError:J=>{const pe=J.target;pe.src=_S(null,z.name)}})}),r.jsx("p",{className:"text-xs font-medium truncate",children:z.name}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Qty: ",z.quantity]}),r.jsxs("p",{className:"text-xs font-semibold text-green-600",children:["",z.price]})]},q))})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{className:"bg-green-50 rounded-lg p-3 border border-green-200",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:r.jsx(Le,{className:"h-3 w-3 text-white"})}),r.jsx("h4",{className:"font-medium text-green-700",children:"Pickup from"})]}),r.jsx("p",{className:"font-semibold text-sm",children:M.pickupStoreName}),r.jsx("p",{className:"text-xs text-gray-600 mb-2",children:M.pickupAddress}),r.jsx("p",{className:"text-xs text-gray-500",children:M.pickupStorePhone}),M.pickupLatitude&&M.pickupLongitude&&r.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[r.jsxs(F,{size:"sm",variant:"outline",className:"text-xs px-2 py-1 h-auto",onClick:()=>{const z=`https://www.google.com/maps/dir//${M.pickupLatitude},${M.pickupLongitude}`;window.open(z,"_blank")},children:[r.jsx(jt,{className:"h-3 w-3 mr-1"}),"Navigate"]}),r.jsxs("span",{className:"text-xs text-gray-500",children:[" ",(H=M.pickupLatitude)==null?void 0:H.toFixed(4),", ",(K=M.pickupLongitude)==null?void 0:K.toFixed(4)]})]})]}),r.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 border border-blue-200",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center",children:r.jsx(Le,{className:"h-3 w-3 text-white"})}),r.jsx("h4",{className:"font-medium text-blue-700",children:"Deliver to"})]}),r.jsx("p",{className:"font-semibold text-sm",children:M.customerName}),r.jsx("p",{className:"text-xs text-gray-600 mb-2",children:M.deliveryAddress}),r.jsx("p",{className:"text-xs text-gray-500",children:M.customerPhone}),M.deliveryLatitude&&M.deliveryLongitude&&r.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[r.jsxs(F,{size:"sm",variant:"outline",className:"text-xs px-2 py-1 h-auto",onClick:()=>{const z=`https://www.google.com/maps/dir//${M.deliveryLatitude},${M.deliveryLongitude}`;window.open(z,"_blank")},children:[r.jsx(jt,{className:"h-3 w-3 mr-1"}),"Navigate"]}),r.jsxs("span",{className:"text-xs text-gray-500",children:[" ",(W=M.deliveryLatitude)==null?void 0:W.toFixed(4),", ",(V=M.deliveryLongitude)==null?void 0:V.toFixed(4)]})]}),M.customerInstructions&&r.jsxs("p",{className:"text-xs text-orange-600 italic mt-2",children:['" ',M.customerInstructions,'"']})]})]}),r.jsx("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-3 mb-3",children:r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-gray-600",children:"Delivery Fee"}),r.jsxs("p",{className:"font-bold text-green-600",children:["",M.deliveryFee||M.totalEarnings]})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-gray-600",children:"Order Value"}),r.jsxs("p",{className:"font-bold",children:["",M.orderValue]})]}),M.codAmount>0&&r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-gray-600",children:"Collect COD"}),r.jsxs("p",{className:"font-bold text-red-600",children:["",M.codAmount]})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-gray-600",children:"Distance"}),r.jsxs("p",{className:"font-bold text-purple-600",children:[M.estimatedDistance||"2.5"," km"]})]})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{className:"w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700",onClick:()=>D.mutate(M.id),disabled:D.isPending,children:D.isPending?"Accepting...":"Accept Delivery Order"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs(F,{variant:"outline",size:"sm",className:"text-xs",onClick:()=>{if(M.pickupLatitude&&M.pickupLongitude)window.open(`https://www.google.com/maps/dir/?api=1&destination=${M.pickupLatitude},${M.pickupLongitude}`);else{const z=encodeURIComponent(M.pickupAddress);window.open(`https://www.google.com/maps/search/${z}`,"_blank")}},children:[r.jsx(jt,{className:"h-3 w-3 mr-1"}),"Store"]}),r.jsxs(F,{variant:"outline",size:"sm",className:"text-xs",onClick:()=>{if(M.deliveryLatitude&&M.deliveryLongitude)window.open(`https://www.google.com/maps/dir/?api=1&destination=${M.deliveryLatitude},${M.deliveryLongitude}`);else{const z=encodeURIComponent(M.deliveryAddress);window.open(`https://www.google.com/maps/search/${z}`,"_blank")}},children:[r.jsx(jt,{className:"h-3 w-3 mr-1"}),"Customer"]})]}),r.jsxs(F,{variant:"outline",size:"sm",className:"w-full",onClick:()=>c(M),children:[r.jsx(ks,{className:"h-4 w-4 mr-1"}),"View Details"]}),M.storeInstructions&&r.jsx("div",{className:"text-xs bg-yellow-50 p-2 rounded border-l-2 border-yellow-300",children:r.jsxs("p",{className:"text-yellow-800",children:[r.jsx("strong",{children:"Store Note:"})," ",M.storeInstructions]})})]})]})},M.id)}),w.length===0&&r.jsx(G,{children:r.jsxs(Z,{className:"p-12 text-center",children:[r.jsx(rt,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Orders Available"}),r.jsx("p",{className:"text-gray-500",children:"New delivery orders will appear here when available"})]})})]})]}),r.jsxs(tt,{value:"active",className:"space-y-2 xs:space-y-3 sm:space-y-4 lg:space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-lg xs:text-xl sm:text-2xl font-bold",children:"Active Deliveries"}),r.jsxs(le,{variant:"outline",className:"text-xs xs:text-sm",children:[k.length+I.length," active"]})]}),b?r.jsx(G,{children:r.jsxs(Z,{className:"p-6 xs:p-8 sm:p-12 text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 xs:h-12 xs:w-12 sm:h-16 sm:w-16 border-b-2 border-blue-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"Loading active deliveries..."})]})}):k.length===0&&I.length===0?r.jsx(G,{children:r.jsxs(Z,{className:"p-6 xs:p-8 sm:p-12 text-center",children:[r.jsx(h0,{className:"h-8 w-8 xs:h-12 xs:w-12 sm:h-16 sm:w-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-base xs:text-lg font-medium text-gray-900 mb-2",children:"No Active Deliveries"}),r.jsx("p",{className:"text-sm xs:text-base text-gray-500",children:"Accept an order to start tracking your deliveries"})]})}):r.jsxs("div",{className:"space-y-2 xs:space-y-3 sm:space-y-4",children:[I.map(M=>r.jsx(G,{className:"border-l-4 border-l-orange-500",children:r.jsx(Z,{className:"p-3 xs:p-4 sm:p-6",children:r.jsxs("div",{className:"flex items-start justify-between gap-2 xs:gap-3 sm:gap-4",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsxs("h3",{className:"text-sm xs:text-base font-semibold",children:["Order #",M.orderId]}),r.jsx(le,{variant:"secondary",className:"text-[8px] xs:text-[9px] sm:text-xs",children:"Pending Start"})]}),r.jsxs("div",{className:"space-y-1 xs:space-y-2 text-xs xs:text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1 xs:gap-2",children:[r.jsx(Wr,{className:"h-3 w-3 xs:h-4 xs:w-4 text-gray-500 flex-shrink-0"}),r.jsx("span",{className:"font-medium truncate",children:M.customerName})]}),r.jsxs("div",{className:"flex items-center gap-1 xs:gap-2",children:[r.jsx(Le,{className:"h-3 w-3 xs:h-4 xs:w-4 text-gray-500 flex-shrink-0"}),r.jsx("span",{className:"text-gray-600 truncate",children:M.deliveryAddress})]}),r.jsxs("div",{className:"flex items-center gap-1 xs:gap-2",children:[r.jsx(Hr,{className:"h-3 w-3 xs:h-4 xs:w-4 text-green-600 flex-shrink-0"}),r.jsxs("span",{className:"font-semibold text-green-600",children:["",M.deliveryFee]})]})]})]}),r.jsxs("div",{className:"flex flex-col gap-1 xs:gap-2 flex-shrink-0",children:[r.jsx(F,{size:"sm",className:"text-[9px] xs:text-[10px] sm:text-xs px-2 xs:px-3 py-1 h-auto",onClick:()=>B.mutate({deliveryId:M.id,status:"en_route_pickup"}),disabled:B.isPending,children:"Start Pickup"}),r.jsx(F,{variant:"outline",size:"sm",className:"text-[9px] xs:text-[10px] sm:text-xs px-2 xs:px-3 py-1 h-auto",children:"View Details"})]})]})})},M.id)),k.map(M=>r.jsx(G,{className:"border-l-4 border-l-green-500",children:r.jsx(Z,{className:"p-3 xs:p-4 sm:p-6",children:r.jsxs("div",{className:"flex items-start justify-between gap-2 xs:gap-3 sm:gap-4",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsxs("h3",{className:"text-sm xs:text-base font-semibold",children:["Order #",M.orderId]}),r.jsx(le,{variant:"default",className:"text-[8px] xs:text-[9px] sm:text-xs bg-green-500",children:M.status==="en_route_pickup"?"Going to Pickup":M.status==="picked_up"?"Picked Up":M.status==="en_route_delivery"?"Delivering":"In Progress"})]}),r.jsxs("div",{className:"bg-blue-50 rounded-lg p-2 mb-3",children:[r.jsx("h4",{className:"text-xs font-semibold text-blue-800 mb-1",children:" PICKUP FROM"}),r.jsxs("div",{className:"space-y-1 text-xs",children:[r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("span",{className:"font-medium text-blue-700",children:M.pickupStoreName||M.storeName||"Store"})}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ot,{className:"h-3 w-3 text-blue-600"}),r.jsx("a",{href:`tel:${M.pickupStorePhone||M.storePhone||"+977-9800000000"}`,className:"text-blue-600 hover:underline font-medium",children:M.pickupStorePhone||M.storePhone||"+977-9800000000"})]}),r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Le,{className:"h-3 w-3 text-blue-600 mt-0.5 flex-shrink-0"}),r.jsx("span",{className:"text-blue-700 text-xs leading-tight",children:M.pickupAddress||M.storeAddress||"Store Address"})]}),M.pickupLatitude&&M.pickupLongitude||M.storeLatitude&&M.storeLongitude?r.jsxs("div",{className:"text-xs text-blue-600",children:[" GPS: ",M.pickupLatitude||M.storeLatitude,", ",M.pickupLongitude||M.storeLongitude]}):null]})]}),r.jsxs("div",{className:"bg-green-50 rounded-lg p-2 mb-3",children:[r.jsx("h4",{className:"text-xs font-semibold text-green-800 mb-1",children:" DELIVER TO"}),r.jsxs("div",{className:"space-y-1 text-xs",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Wr,{className:"h-3 w-3 text-green-600"}),r.jsx("span",{className:"font-medium text-green-700",children:M.customerName||"Customer"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ot,{className:"h-3 w-3 text-green-600"}),r.jsx("a",{href:`tel:${M.customerPhone||"+977-9800000001"}`,className:"text-green-600 hover:underline font-medium",children:M.customerPhone||"+977-9800000001"})]}),r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Le,{className:"h-3 w-3 text-green-600 mt-0.5 flex-shrink-0"}),r.jsx("span",{className:"text-green-700 text-xs leading-tight",children:M.deliveryAddress||"Customer Address"})]}),M.deliveryLatitude&&M.deliveryLongitude?r.jsxs("div",{className:"text-xs text-green-600",children:[" GPS: ",M.deliveryLatitude,", ",M.deliveryLongitude]}):null,M.customerInstructions&&r.jsxs("div",{className:"text-xs text-green-700 bg-green-100 p-1 rounded",children:[' "',M.customerInstructions,'"']})]})]}),r.jsx("div",{className:"bg-gray-50 rounded-lg p-2 mb-2",children:r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Hr,{className:"h-3 w-3 text-green-600"}),r.jsxs("span",{className:"font-semibold text-green-600",children:["",M.deliveryFee||"50"]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(gd,{className:"h-3 w-3 text-blue-600"}),r.jsxs("span",{className:"text-blue-600",children:["ETA: ",M.estimatedTime||15,"m"]})]}),M.paymentMethod&&r.jsxs("div",{className:"col-span-2 text-xs text-gray-600",children:[" ",M.paymentMethod," ",M.codAmount?`(COD: ${M.codAmount})`:""]})]})})]}),r.jsxs("div",{className:"flex flex-col gap-1 xs:gap-2 flex-shrink-0",children:[M.status==="en_route_pickup"&&r.jsx(F,{size:"sm",className:"text-[9px] xs:text-[10px] sm:text-xs px-2 xs:px-3 py-1 h-auto",onClick:()=>B.mutate({deliveryId:M.id,status:"picked_up"}),disabled:B.isPending,children:"Mark Picked Up"}),M.status==="picked_up"&&r.jsx(F,{size:"sm",className:"text-[9px] xs:text-[10px] sm:text-xs px-2 xs:px-3 py-1 h-auto",onClick:()=>B.mutate({deliveryId:M.id,status:"en_route_delivery"}),disabled:B.isPending,children:"Start Delivery"}),M.status==="en_route_delivery"&&r.jsx(F,{size:"sm",className:"text-[9px] xs:text-[10px] sm:text-xs px-2 xs:px-3 py-1 h-auto",onClick:()=>B.mutate({deliveryId:M.id,status:"delivered"}),disabled:B.isPending,children:"Mark Delivered"}),r.jsxs("div",{className:"grid grid-cols-2 gap-1 mb-2",children:[r.jsxs(F,{variant:"outline",size:"sm",className:"text-[8px] xs:text-[9px] sm:text-[10px] px-1 xs:px-2 py-0.5 h-auto bg-blue-50 border-blue-200 text-blue-700 hover:bg-blue-100",onClick:()=>{const U=M.pickupStorePhone||M.storePhone||"+977-9800000000";window.location.href=`tel:${U}`},children:[r.jsx(Ot,{className:"h-2 w-2 xs:h-3 xs:w-3 mr-0.5"}),"Store"]}),r.jsxs(F,{variant:"outline",size:"sm",className:"text-[8px] xs:text-[9px] sm:text-[10px] px-1 xs:px-2 py-0.5 h-auto bg-green-50 border-green-200 text-green-700 hover:bg-green-100",onClick:()=>{const U=M.customerPhone||"+977-9800000001";window.location.href=`tel:${U}`},children:[r.jsx(Ot,{className:"h-2 w-2 xs:h-3 xs:w-3 mr-0.5"}),"Customer"]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-1 mb-2",children:[r.jsxs(F,{variant:"outline",size:"sm",className:"text-[8px] xs:text-[9px] sm:text-[10px] px-1 xs:px-2 py-0.5 h-auto",onClick:()=>{const U=M.pickupLatitude||M.storeLatitude,H=M.pickupLongitude||M.storeLongitude;if(U&&H)window.open(`https://www.google.com/maps/dir/?api=1&destination=${U},${H}`);else if(M.pickupAddress||M.storeAddress){const K=encodeURIComponent(M.pickupAddress||M.storeAddress);window.open(`https://www.google.com/maps/search/${K}`,"_blank")}},children:[r.jsx(jt,{className:"h-2 w-2 xs:h-3 xs:w-3 mr-0.5"}),"GPS Store"]}),r.jsxs(F,{variant:"outline",size:"sm",className:"text-[8px] xs:text-[9px] sm:text-[10px] px-1 xs:px-2 py-0.5 h-auto",onClick:()=>{if(M.deliveryLatitude&&M.deliveryLongitude)window.open(`https://www.google.com/maps/dir/?api=1&destination=${M.deliveryLatitude},${M.deliveryLongitude}`);else if(M.deliveryAddress){const U=encodeURIComponent(M.deliveryAddress);window.open(`https://www.google.com/maps/search/${U}`,"_blank")}},children:[r.jsx(jt,{className:"h-2 w-2 xs:h-3 xs:w-3 mr-0.5"}),"GPS Customer"]})]}),r.jsxs(F,{variant:"outline",size:"sm",className:"text-[9px] xs:text-[10px] sm:text-xs px-2 xs:px-3 py-1 h-auto w-full bg-purple-50 border-purple-200 text-purple-700 hover:bg-purple-100",onClick:()=>c(M),children:[r.jsx(ks,{className:"h-3 w-3 mr-1"}),"View Details"]})]})]})})},M.id))]})]}),r.jsxs(tt,{value:"earnings",className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Earnings Overview"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{className:"text-sm font-medium text-gray-600",children:"This Month"})}),r.jsxs(Z,{children:[r.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["",(f==null?void 0:f.monthEarnings)||0]}),r.jsxs("p",{className:"text-sm text-gray-500",children:[(f==null?void 0:f.monthDeliveries)||0," deliveries"]})]})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{className:"text-sm font-medium text-gray-600",children:"Total Earned"})}),r.jsxs(Z,{children:[r.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:["",(f==null?void 0:f.totalEarnings)||0]}),r.jsxs("p",{className:"text-sm text-gray-500",children:[(f==null?void 0:f.totalDeliveries)||0," deliveries"]})]})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{className:"text-sm font-medium text-gray-600",children:"Average per Delivery"})}),r.jsxs(Z,{children:[r.jsxs("p",{className:"text-3xl font-bold text-purple-600",children:["",f!=null&&f.totalDeliveries?Math.round((f.totalEarnings||0)/f.totalDeliveries):0]}),r.jsx("p",{className:"text-sm text-gray-500",children:"per order"})]})]})]})]}),r.jsx(tt,{value:"calendar",className:"space-y-6",children:r.jsxs(G,{className:"border-0 shadow-lg",children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center gap-2 text-purple-600",children:[r.jsx(Zl,{className:"h-5 w-5"}),"Delivery Calendar"]})}),r.jsx(Z,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"text-center",children:r.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"})})}),r.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(M=>r.jsx("div",{className:"text-center font-medium text-gray-600 py-2",children:M},M)),Array.from({length:35},(M,U)=>{const H=new Date,K=new Date(H.getFullYear(),H.getMonth(),1),W=new Date(K);W.setDate(W.getDate()-K.getDay()+U);const V=W.getMonth()===H.getMonth(),z=W.toDateString()===H.toDateString(),q=Math.random()>.7;return r.jsxs("div",{className:`
                            aspect-square flex flex-col items-center justify-center p-1 rounded-lg relative
                            ${V?"text-gray-800":"text-gray-400"}
                            ${z?"bg-red-500 text-white font-bold":"hover:bg-gray-100"}
                            ${q&&V?"border-2 border-green-300":""}
                          `,children:[r.jsx("span",{className:"text-xs",children:W.getDate()}),q&&V&&r.jsx("div",{className:"absolute bottom-1 w-1 h-1 bg-green-500 rounded-full"})]},U)})]}),r.jsxs(G,{className:"bg-gradient-to-r from-blue-50 to-purple-50 border-0",children:[r.jsx(se,{children:r.jsx(ie,{className:"text-lg",children:"Today's Schedule"})}),r.jsx(Z,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white rounded-lg",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium",children:"Morning Shift"}),r.jsx("p",{className:"text-sm text-gray-600",children:"9:00 AM - 2:00 PM"})]}),r.jsx(le,{variant:"outline",className:"bg-green-100 text-green-800",children:"Active"})]}),r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white rounded-lg",children:[r.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium",children:"Evening Shift"}),r.jsx("p",{className:"text-sm text-gray-600",children:"6:00 PM - 11:00 PM"})]}),r.jsx(le,{variant:"outline",className:"bg-orange-100 text-orange-800",children:"Scheduled"})]})]})})]})]})})]})}),r.jsxs(tt,{value:"profile",className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Partner Profile"}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:"Personal Information"})}),r.jsx(Z,{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Vehicle Type"}),r.jsx("p",{className:"font-semibold",children:d.vehicleType})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Vehicle Number"}),r.jsx("p",{className:"font-semibold",children:d.vehicleNumber})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Driving License"}),r.jsx("p",{className:"font-semibold",children:d.drivingLicense})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Emergency Contact"}),r.jsx("p",{className:"font-semibold",children:d.emergencyContact})]})]})})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:"Delivery Areas"})}),r.jsx(Z,{children:r.jsx("div",{className:"flex flex-wrap gap-2",children:d.deliveryAreas&&d.deliveryAreas.length>0?d.deliveryAreas.map((M,U)=>r.jsx(le,{variant:"outline",children:M},U)):r.jsx("p",{className:"text-gray-500",children:"No delivery areas specified"})})})]})]}),r.jsxs(tt,{value:"notifications",className:"space-y-2 xs:space-y-3 sm:space-y-4 lg:space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-lg xs:text-xl sm:text-2xl font-bold",children:"Alerts & Notifications"}),r.jsxs(le,{variant:"outline",className:"text-xs xs:text-sm",children:[T.length," unread"]})]}),P?r.jsx(G,{children:r.jsxs(Z,{className:"p-6 xs:p-8 sm:p-12 text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 xs:h-12 xs:w-12 sm:h-16 sm:w-16 border-b-2 border-blue-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"Loading notifications..."})]})}):O.length===0?r.jsx(G,{children:r.jsxs(Z,{className:"p-6 xs:p-8 sm:p-12 text-center",children:[r.jsx(Xt,{className:"h-8 w-8 xs:h-12 xs:w-12 sm:h-16 sm:w-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-base xs:text-lg font-medium text-gray-900 mb-2",children:"No New Alerts"}),r.jsx("p",{className:"text-sm xs:text-base text-gray-500",children:"Delivery notifications and updates will appear here"})]})}):r.jsx("div",{className:"space-y-2 xs:space-y-3 sm:space-y-4",children:O.map(M=>r.jsx(G,{className:`transition-all hover:shadow-md ${M.isRead?"":"border-l-4 border-l-blue-500 bg-blue-50/30"}`,children:r.jsx(Z,{className:"p-3 xs:p-4 sm:p-6",children:r.jsxs("div",{className:"flex items-start gap-2 xs:gap-3 sm:gap-4",children:[r.jsx("div",{className:`p-1.5 xs:p-2 sm:p-3 rounded-full flex-shrink-0 ${M.type==="delivery_assignment"?"bg-orange-100 text-orange-600":M.type==="order_update"?"bg-blue-100 text-blue-600":M.type==="payment"?"bg-green-100 text-green-600":"bg-gray-100 text-gray-600"}`,children:M.type==="delivery_assignment"?r.jsx(rt,{className:"h-3 w-3 xs:h-4 xs:w-4 sm:h-5 sm:w-5"}):M.type==="order_update"?r.jsx(wt,{className:"h-3 w-3 xs:h-4 xs:w-4 sm:h-5 sm:w-5"}):M.type==="payment"?r.jsx(Hr,{className:"h-3 w-3 xs:h-4 xs:w-4 sm:h-5 sm:w-5"}):r.jsx(Xt,{className:"h-3 w-3 xs:h-4 xs:w-4 sm:h-5 sm:w-5"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("h3",{className:"text-sm xs:text-base font-semibold text-gray-900 truncate",children:M.title}),r.jsx("p",{className:"text-xs xs:text-sm text-gray-600 mt-0.5 xs:mt-1 line-clamp-2",children:M.message}),M.orderId&&r.jsxs("div",{className:"space-y-1 xs:space-y-2 mt-1 xs:mt-2",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsxs(le,{variant:"outline",className:"text-[8px] xs:text-[9px] sm:text-xs px-1 xs:px-2 py-0.5",children:["Order #",M.orderId]}),M.data&&(()=>{var U;try{const H=JSON.parse(M.data);return r.jsxs(r.Fragment,{children:[H.deliveryFee&&r.jsxs(le,{variant:"secondary",className:"text-[8px] xs:text-[9px] sm:text-xs px-1 xs:px-2 py-0.5",children:["",H.deliveryFee," earnings"]}),((U=H.deliveryInfo)==null?void 0:U.estimatedDistance)&&r.jsxs(le,{variant:"secondary",className:"text-[8px] xs:text-[9px] sm:text-xs px-1 xs:px-2 py-0.5",children:[" ",H.deliveryInfo.estimatedDistance]}),H.hasCompleteLocationData&&r.jsx(le,{variant:"default",className:"text-[8px] xs:text-[9px] sm:text-xs px-1 xs:px-2 py-0.5 bg-green-100 text-green-700",children:" GPS Available"})]})}catch{return null}})()]}),M.data&&(()=>{try{const U=JSON.parse(M.data);return U.pickupLocation||U.deliveryLocation?r.jsxs("div",{className:"grid grid-cols-1 gap-1 xs:gap-2 text-[9px] xs:text-[10px] sm:text-xs text-gray-600",children:[U.pickupLocation&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Le,{className:"h-2.5 w-2.5 xs:h-3 xs:w-3 text-orange-500 flex-shrink-0"}),r.jsxs("span",{className:"truncate",children:[" ",U.pickupLocation.name||"Pickup",": ",U.pickupLocation.address]}),U.pickupLocation.googleMapsLink&&r.jsx("a",{href:U.pickupLocation.googleMapsLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 ml-1",children:""})]}),U.deliveryLocation&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Le,{className:"h-2.5 w-2.5 xs:h-3 xs:w-3 text-green-500 flex-shrink-0"}),r.jsxs("span",{className:"truncate",children:[" Delivery: ",U.deliveryLocation.address]}),U.deliveryLocation.googleMapsLink&&r.jsx("a",{href:U.deliveryLocation.googleMapsLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 ml-1",children:""})]}),U.orderDetails&&r.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[r.jsxs("span",{children:[" ",U.orderDetails.customerName]}),U.orderDetails.customerPhone&&r.jsxs("span",{children:[" ",U.orderDetails.customerPhone]}),U.orderDetails.totalAmount&&r.jsxs("span",{children:[" ",U.orderDetails.totalAmount]})]})]}):null}catch{return null}})()]})]}),r.jsxs("div",{className:"flex flex-col items-end gap-1 xs:gap-2 flex-shrink-0",children:[r.jsx("span",{className:"text-[9px] xs:text-[10px] sm:text-xs text-gray-500",children:new Date(M.createdAt).toLocaleDateString()}),!M.isRead&&r.jsx("div",{className:"w-2 h-2 xs:w-2.5 xs:h-2.5 bg-blue-500 rounded-full"})]})]}),M.type==="delivery_assignment"&&M.orderId&&r.jsxs("div",{className:"space-y-1 xs:space-y-2 mt-2 xs:mt-3",children:[r.jsx(F,{className:"w-full text-[9px] xs:text-[10px] sm:text-xs px-2 xs:px-3 py-1 h-auto",onClick:()=>{const U=M.orderId;console.log("Notification structure:",M),console.log("Accepting delivery for order:",U),console.log("Notification ID:",M.id),D.mutate(U)},disabled:D.isPending,children:D.isPending?"Accepting...":"Accept Order"}),M.data&&(()=>{try{const U=JSON.parse(M.data);return U.pickupLocation||U.deliveryLocation?r.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[U.pickupLocation&&r.jsxs(F,{variant:"outline",size:"sm",className:"text-[8px] xs:text-[9px] sm:text-[10px] px-1 xs:px-2 py-0.5 h-auto",onClick:()=>{if(U.pickupLocation.googleMapsLink)window.open(U.pickupLocation.googleMapsLink,"_blank");else if(U.pickupLocation.address){const H=encodeURIComponent(U.pickupLocation.address);window.open(`https://www.google.com/maps/search/${H}`,"_blank")}},children:[r.jsx(jt,{className:"h-2 w-2 xs:h-2.5 xs:w-2.5 mr-0.5"}),"Store"]}),U.deliveryLocation&&r.jsxs(F,{variant:"outline",size:"sm",className:"text-[8px] xs:text-[9px] sm:text-[10px] px-1 xs:px-2 py-0.5 h-auto",onClick:()=>{if(U.deliveryLocation.googleMapsLink)window.open(U.deliveryLocation.googleMapsLink,"_blank");else if(U.deliveryLocation.address){const H=encodeURIComponent(U.deliveryLocation.address);window.open(`https://www.google.com/maps/search/${H}`,"_blank")}},children:[r.jsx(jt,{className:"h-2 w-2 xs:h-2.5 xs:w-2.5 mr-0.5"}),"Customer"]})]}):r.jsx(F,{variant:"outline",size:"sm",className:"w-full text-[9px] xs:text-[10px] sm:text-xs px-2 xs:px-3 py-1 h-auto",children:"View Details"})}catch{return r.jsx(F,{variant:"outline",size:"sm",className:"w-full text-[9px] xs:text-[10px] sm:text-xs px-2 xs:px-3 py-1 h-auto",children:"View Details"})}})()]})]})]})})},M.id))})]})]})}),l&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs(G,{className:"w-full max-w-2xl max-h-[90vh] overflow-auto",children:[r.jsxs(se,{className:"flex flex-row items-center justify-between",children:[r.jsxs(ie,{children:["Order Details - #",l.orderNumber]}),r.jsx(F,{variant:"ghost",size:"sm",onClick:()=>c(null),children:""})]}),r.jsxs(Z,{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Order Items"}),r.jsx("div",{className:"space-y-2",children:l.orderItems.map((M,U)=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:M.name}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Qty: ",M.quantity]})]}),r.jsxs("p",{className:"font-semibold",children:["",M.price]})]},U))})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Payment Details"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Order Value:"}),r.jsxs("span",{children:["",l.orderValue]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Delivery Fee:"}),r.jsxs("span",{children:["",l.deliveryFee]})]}),l.extraCharges>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Extra Charges:"}),r.jsxs("span",{children:["",l.extraCharges]})]}),r.jsxs("div",{className:"flex justify-between font-semibold text-green-600 border-t pt-2",children:[r.jsx("span",{children:"Your Earnings:"}),r.jsxs("span",{children:["",l.totalEarnings]})]}),l.codAmount>0&&r.jsxs("div",{className:"flex justify-between font-semibold text-red-600",children:[r.jsx("span",{children:"Collect from Customer:"}),r.jsxs("span",{children:["",l.codAmount]})]})]})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx(F,{className:"flex-1",onClick:()=>D.mutate(l.id),disabled:D.isPending,children:D.isPending?"Accepting...":"Accept This Order"}),r.jsx(F,{variant:"outline",onClick:()=>c(null),children:"Close"})]})]})]})}),l&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs(G,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx(se,{className:"bg-gradient-to-r from-blue-50 to-green-50",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsxs(ie,{className:"text-xl",children:["Order #",l.orderId]}),r.jsx(le,{className:"mt-2 bg-green-500",children:l.status==="en_route_pickup"?"Going to Pickup":l.status==="picked_up"?"Picked Up":l.status==="en_route_delivery"?"Delivering":"In Progress"})]}),r.jsx(F,{variant:"ghost",size:"sm",onClick:()=>c(null),children:""})]})}),r.jsxs(Z,{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[r.jsx("h4",{className:"font-semibold text-blue-800 mb-3 flex items-center gap-2",children:" PICKUP DETAILS"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-blue-700",children:l.pickupStoreName||"Store Name"}),r.jsx("p",{className:"text-blue-600",children:l.pickupAddress||"Store Address"}),r.jsxs("p",{className:"text-xs text-blue-500",children:[" GPS: ",l.pickupLatitude||"N/A",", ",l.pickupLongitude||"N/A"]})]}),r.jsxs("div",{children:[r.jsxs("a",{href:`tel:${l.pickupStorePhone||"+977-9800000000"}`,className:"flex items-center gap-2 text-blue-600 hover:text-blue-800 font-medium",children:[r.jsx(Ot,{className:"h-4 w-4"}),l.pickupStorePhone||"+977-9800000000"]}),r.jsxs(F,{size:"sm",className:"mt-2 w-full bg-blue-600 hover:bg-blue-700",onClick:()=>{const M=l.pickupLatitude,U=l.pickupLongitude;M&&U&&window.open(`https://www.google.com/maps/dir/?api=1&destination=${M},${U}`)},children:[r.jsx(jt,{className:"h-3 w-3 mr-1"}),"Navigate to Store"]})]})]}),l.storeInstructions&&r.jsxs("div",{className:"bg-blue-100 p-2 rounded text-blue-800",children:[r.jsx("strong",{children:"Store Instructions:"})," ",l.storeInstructions]})]})]}),r.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[r.jsx("h4",{className:"font-semibold text-green-800 mb-3 flex items-center gap-2",children:" DELIVERY DETAILS"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-green-700",children:l.customerName||"Customer Name"}),r.jsx("p",{className:"text-green-600",children:l.deliveryAddress||"Customer Address"}),r.jsxs("p",{className:"text-xs text-green-500",children:[" GPS: ",l.deliveryLatitude||"N/A",", ",l.deliveryLongitude||"N/A"]})]}),r.jsxs("div",{children:[r.jsxs("a",{href:`tel:${l.customerPhone||"+977-9800000001"}`,className:"flex items-center gap-2 text-green-600 hover:text-green-800 font-medium",children:[r.jsx(Ot,{className:"h-4 w-4"}),l.customerPhone||"+977-9800000001"]}),r.jsxs(F,{size:"sm",className:"mt-2 w-full bg-green-600 hover:bg-green-700",onClick:()=>{const M=l.deliveryLatitude,U=l.deliveryLongitude;M&&U&&window.open(`https://www.google.com/maps/dir/?api=1&destination=${M},${U}`)},children:[r.jsx(jt,{className:"h-3 w-3 mr-1"}),"Navigate to Customer"]})]})]}),l.customerInstructions&&r.jsxs("div",{className:"bg-green-100 p-2 rounded text-green-800",children:[r.jsx("strong",{children:"Customer Instructions:"})," ",l.customerInstructions]})]})]}),l.orderItems&&l.orderItems.length>0&&r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:" ORDER ITEMS"}),r.jsx("div",{className:"space-y-2",children:l.orderItems.map((M,U)=>r.jsxs("div",{className:"flex items-center gap-3 bg-white p-2 rounded",children:[r.jsx("img",{src:_S(M.image,M.name),alt:M.name,className:"w-10 h-10 object-cover rounded"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium text-sm",children:M.name}),r.jsxs("p",{className:"text-xs text-gray-600",children:["Qty: ",M.quantity,"  ",M.price]})]}),r.jsxs("p",{className:"font-semibold text-sm",children:["",M.quantity*M.price]})]},U))})]}),r.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[r.jsx("h4",{className:"font-semibold text-yellow-800 mb-3",children:" PAYMENT & EARNINGS"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-yellow-600",children:"Delivery Fee"}),r.jsxs("p",{className:"font-bold text-yellow-800",children:["",l.deliveryFee||"50"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-yellow-600",children:"Order Value"}),r.jsxs("p",{className:"font-bold text-yellow-800",children:["",l.orderValue||"500"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-yellow-600",children:"Payment Method"}),r.jsx("p",{className:"font-bold text-yellow-800",children:l.paymentMethod||"Online"})]}),l.codAmount&&r.jsxs("div",{children:[r.jsx("p",{className:"text-yellow-600",children:"COD Amount"}),r.jsxs("p",{className:"font-bold text-red-600",children:["",l.codAmount]})]})]})]}),r.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[r.jsx("h4",{className:"font-semibold text-purple-800 mb-3",children:" TIME & DISTANCE"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-purple-600",children:"Estimated Time"}),r.jsxs("p",{className:"font-bold text-purple-800",children:[l.estimatedTime||15," mins"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-purple-600",children:"Distance"}),r.jsxs("p",{className:"font-bold text-purple-800",children:[l.estimatedDistance||2.5," km"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-purple-600",children:"Assigned At"}),r.jsx("p",{className:"font-bold text-purple-800",children:l.assignedAt||"Just now"})]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(F,{className:"flex-1",onClick:()=>{const M=l.status==="en_route_pickup"?"picked_up":l.status==="picked_up"?"en_route_delivery":(l.status==="en_route_delivery","delivered");B.mutate({deliveryId:l.id,status:M}),c(null)},disabled:B.isPending,children:B.isPending?"Updating...":l.status==="en_route_pickup"?"Mark Picked Up":l.status==="picked_up"?"Start Delivery":l.status==="en_route_delivery"?"Mark Delivered":"Complete"}),r.jsx(F,{variant:"outline",onClick:()=>c(null),children:"Close"})]})]})]})})]}):r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx(G,{className:"w-full max-w-md",children:r.jsxs(Z,{className:"p-8 text-center",children:[r.jsx(wr,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Delivery Partner Account Required"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"You need to register as a delivery partner to access this dashboard."}),r.jsx(F,{onClick:()=>window.location.href="/delivery-partner-signup",children:"Register as Delivery Partner"})]})})})}function d6({deliveryPartnerId:e}){const{toast:t}=ft(),n=pn();j.useRef(null);const[s,i]=j.useState(null),[a,o]=j.useState(0),{data:l=[],isLoading:c}=Re({queryKey:["/api/notifications/user",e],queryFn:async()=>{const m=await fetch(`/api/notifications/user/${e}`);if(!m.ok)throw new Error("Failed to fetch notifications");const f=await m.json();return console.log("User notifications:",f),f.filter(g=>{console.log("Checking notification:",g);try{if(g.type==="delivery"&&!g.isRead)return!0}catch(x){console.log("Error filtering notification:",x)}return!1})},enabled:!!e,refetchInterval:3e3}),d=pt({mutationFn:async({orderId:m,notificationId:f})=>{const g=await fetch("/api/delivery/accept-assignment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deliveryPartnerId:e,orderId:m,notificationId:f})});if(!g.ok){const x=await g.json();throw new Error(x.error)}return g.json()},onSuccess:(m,f)=>{t({title:"Order Accepted!",description:`You have successfully accepted order #${f.orderId}`}),n.invalidateQueries({queryKey:["/api/notifications/user"]}),n.invalidateQueries({queryKey:["/api/deliveries/partner"]}),i(null)},onError:m=>{t({title:"Failed to Accept Order",description:m.message,variant:"destructive"}),i(null)}});pt({mutationFn:async m=>{const f=await fetch(`/api/delivery-notifications/${m}/reject`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deliveryPartnerId:e})});if(!f.ok){const g=await f.json();throw new Error(g.error)}return f.json()},onSuccess:(m,f)=>{t({title:"Order Rejected",description:`You have rejected order #${f}`}),n.invalidateQueries({queryKey:["/api/delivery-notifications"]})},onError:m=>{t({title:"Failed to Reject Order",description:m.message,variant:"destructive"})}}),j.useEffect(()=>{if(l.length>a&&a>0){try{console.log("Playing notification sound for new delivery orders...");const m=new Audio("/notification.mp3");m.volume=.7,m.addEventListener("canplaythrough",()=>{console.log("Delivery notification audio ready")}),m.addEventListener("error",f=>{console.error("Delivery notification audio error:",f)}),m.play().then(()=>{console.log("Delivery notification sound played successfully")}).catch(f=>{console.log("Could not play delivery notification sound:",f),Notification.permission==="granted"&&new Notification("New Delivery Order Available!",{body:"Check your dashboard for new delivery opportunities",icon:"/favicon.ico"})})}catch{console.log("Could not play notification sound")}t({title:" New Orders Available!",description:`${l.length-a} new delivery order${l.length-a>1?"s":""} available`,duration:5e3})}o(l.length)},[l.length,a,t]);const h=(m,f)=>{i(m),d.mutate({orderId:m,notificationId:f})};return c?r.jsx("div",{className:"space-y-4",children:[1,2,3].map(m=>r.jsx(G,{className:"animate-pulse",children:r.jsxs(Z,{className:"p-6",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2 w-3/4"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})},m))}):l.length===0?r.jsxs(G,{className:"shadow-lg border-0 h-full max-w-full overflow-hidden",children:[r.jsx(se,{className:"px-2 sm:px-6 py-2 sm:py-4",children:r.jsxs(ie,{className:"flex items-center gap-2 text-sm sm:text-xl",children:[r.jsx(Xt,{className:"h-4 w-4 sm:h-5 sm:w-5 text-orange-500 flex-shrink-0"}),r.jsxs("span",{className:"text-xs sm:text-base truncate",children:["New Assignments (",l.length,")"]})]})}),r.jsx(Z,{className:"space-y-2 sm:space-y-4 max-h-64 sm:max-h-96 overflow-y-auto px-2 sm:px-6 pb-2 sm:pb-6",children:r.jsxs("div",{className:"text-center py-4 sm:py-8",children:[r.jsx(Xt,{className:"h-8 w-8 sm:h-12 sm:w-12 text-gray-300 mx-auto mb-2 sm:mb-4"}),r.jsx("p",{className:"text-xs sm:text-base text-gray-500",children:"No new assignments"})]})})]}):r.jsxs(G,{className:"shadow-lg border-0 h-full",children:[r.jsx(se,{className:"px-3 sm:px-6 py-3 sm:py-4",children:r.jsxs(ie,{className:"flex items-center gap-2 text-base sm:text-xl",children:[r.jsx(Xt,{className:"h-4 w-4 sm:h-5 sm:w-5 text-orange-500"}),r.jsxs("span",{className:"text-sm sm:text-base",children:["New Assignments (",l.length,")"]})]})}),r.jsx(Z,{className:"space-y-2 sm:space-y-4 max-h-64 sm:max-h-96 overflow-y-auto px-2 sm:px-6 pb-2 sm:pb-6",children:l.map(m=>{var g;let f;try{f=m.data?JSON.parse(m.data):{}}catch(x){console.error("Failed to parse notification data:",x),f={}}return r.jsx(G,{className:"border border-orange-200 bg-orange-50 shadow-sm hover:shadow-md transition-shadow duration-200 w-full overflow-hidden delivery-notification-card",children:r.jsx(Z,{className:"p-2 sm:p-4",children:r.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[r.jsx("div",{className:"flex items-start justify-between gap-2 w-full",children:r.jsxs("div",{className:"min-w-0 flex-1 w-full",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[r.jsx(le,{variant:"secondary",className:"bg-blue-100 text-blue-800 text-xs px-2 py-0.5 flex-shrink-0",children:"New"}),r.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0",children:new Date(m.created_at).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})})]}),r.jsx("h3",{className:"font-semibold text-sm sm:text-base text-gray-900 mb-1 break-words",children:"New Delivery Assignment"}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-2 break-words",children:m.message||`You have been assigned Order #${m.orderId||"N/A"}`})]})}),r.jsx("div",{className:"bg-white rounded-lg p-2 sm:p-3 border border-gray-200 w-full overflow-hidden",children:r.jsxs("div",{className:"space-y-2 w-full",children:[r.jsxs("div",{className:"flex items-start gap-2 w-full",children:[r.jsx(rt,{className:"h-3 w-3 sm:h-4 sm:w-4 text-orange-500 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"min-w-0 flex-1 w-full overflow-hidden",children:[r.jsxs("p",{className:"font-medium text-xs sm:text-sm text-gray-900 break-words overflow-hidden",children:["Store: ",((g=f.storeDetails)==null?void 0:g.name)||"SS Book Store"]}),r.jsx("p",{className:"text-xs text-gray-600 break-all overflow-hidden text-ellipsis line-clamp-2",children:f.pickupAddress})]})]}),r.jsxs("div",{className:"flex items-start gap-2 w-full",children:[r.jsx(Le,{className:"h-3 w-3 sm:h-4 sm:w-4 text-red-500 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"min-w-0 flex-1 w-full overflow-hidden",children:[r.jsx("p",{className:"font-medium text-xs sm:text-sm text-gray-900",children:"Delivery Address"}),r.jsx("p",{className:"text-xs text-gray-600 break-all overflow-hidden text-ellipsis line-clamp-2",children:f.deliveryAddress})]})]}),r.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between pt-1 sm:pt-2 border-t border-gray-100 gap-2 sm:gap-0 w-full",children:r.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-wrap",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Hr,{className:"h-3 w-3 sm:h-4 sm:w-4 text-green-500"}),r.jsxs("span",{className:"font-bold text-green-600 text-xs sm:text-sm",children:["",f.deliveryFee||"35"]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Le,{className:"h-3 w-3 sm:h-4 sm:w-4 text-blue-500"}),r.jsxs("span",{className:"text-xs sm:text-sm text-gray-600",children:[f.estimatedDistance," km"]})]})]})})]})}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-2 w-full",children:[r.jsx(F,{onClick:()=>h(m.orderId||m.order_id,m.id),disabled:s===(m.orderId||m.order_id),className:"flex-1 bg-green-600 hover:bg-green-700 text-white text-xs sm:text-sm py-2 sm:py-2.5 min-w-0",size:"sm",children:s===m.order_id?r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}),r.jsx("span",{className:"hidden sm:inline",children:"Accepting..."}),r.jsx("span",{className:"sm:hidden",children:"..."})]}):r.jsxs("div",{className:"flex items-center justify-center gap-1 sm:gap-2",children:[r.jsx(wt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Accept Delivery"}),r.jsx("span",{className:"sm:hidden",children:"Accept"})]})}),r.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[r.jsx(F,{variant:"outline",onClick:()=>window.open(`tel:${f.customerPhone}`,"_self"),className:"px-2 sm:px-3 border-blue-200 text-blue-600 hover:bg-blue-50 flex-shrink-0",size:"sm",title:"Call Customer",children:r.jsx(Ot,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),r.jsx(F,{variant:"outline",onClick:()=>{const x=`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(f.deliveryAddress)}`;window.open(x,"_blank")},className:"px-2 sm:px-3 border-green-200 text-green-600 hover:bg-green-50 flex-shrink-0",size:"sm",title:"View Map",children:r.jsx(Le,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})]})]})})},m.id)})})]})}const WVe=te.object({vehicleType:te.string().min(1,"Vehicle type is required"),vehicleNumber:te.string().min(1,"Vehicle number is required"),drivingLicense:te.string().min(1,"Driving license number is required"),idProofType:te.string().min(1,"ID proof type is required"),idProofNumber:te.string().min(1,"ID proof number is required"),deliveryAreas:te.string().min(1,"Delivery areas are required"),emergencyContact:te.string().min(10,"Emergency contact number is required"),bankAccountNumber:te.string().min(10,"Bank account number is required"),ifscCode:te.string().min(11,"IFSC code is required"),termsAccepted:te.boolean().refine(e=>e===!0,{message:"You must accept the terms and conditions"})});function VZ({userId:e}){const{toast:t}=ft(),n=pn(),[s,i]=j.useState(!1),a=an({resolver:on(WVe),defaultValues:{vehicleType:"",vehicleNumber:"",drivingLicense:"",idProofType:"",idProofNumber:"",deliveryAreas:"",emergencyContact:"",bankAccountNumber:"",ifscCode:"",termsAccepted:!1}}),o=pt({mutationFn:async c=>{const d={userId:e,vehicleType:c.vehicleType,vehicleNumber:c.vehicleNumber,drivingLicense:c.drivingLicense,idProofType:c.idProofType,idProofNumber:c.idProofNumber,deliveryAreas:c.deliveryAreas.split(",").map(m=>m.trim()).filter(m=>m.length>0),emergencyContact:c.emergencyContact,bankAccountNumber:c.bankAccountNumber,ifscCode:c.ifscCode},h=await fetch("/api/delivery-partners/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});if(!h.ok){const m=await h.json();throw new Error(m.error||"Failed to create delivery partner profile")}return h.json()},onSuccess:()=>{n.invalidateQueries({queryKey:["/api/delivery-partners/user"]}),t({title:"Profile Created Successfully!",description:"Your delivery partner profile has been created and is pending admin approval."})},onError:c=>{t({title:"Profile Creation Failed",description:c instanceof Error?c.message:"Failed to create profile",variant:"destructive"})}}),l=async c=>{i(!0);try{await o.mutateAsync(c)}finally{i(!1)}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6",children:r.jsxs("div",{className:"max-w-2xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full w-20 h-20 mx-auto mb-4 flex items-center justify-center",children:r.jsx(kt,{className:"h-10 w-10 text-white"})}),r.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Complete Your Delivery Partner Profile"}),r.jsx("p",{className:"text-gray-600",children:"Please provide the required information to start accepting deliveries"})]}),r.jsxs(G,{className:"shadow-xl border-0",children:[r.jsxs(se,{children:[r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(Us,{className:"h-5 w-5"}),"Delivery Partner Information"]}),r.jsx(Ct,{children:"All fields are required for account verification and approval"})]}),r.jsx(Z,{children:r.jsx(Or,{...a,children:r.jsxs("form",{onSubmit:a.handleSubmit(l),className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[r.jsx(kt,{className:"h-5 w-5"}),"Vehicle Information"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(oe,{control:a.control,name:"vehicleType",render:({field:c})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Vehicle Type"}),r.jsxs(ct,{onValueChange:c.onChange,defaultValue:c.value,children:[r.jsx(me,{children:r.jsx(it,{children:r.jsx(dt,{placeholder:"Select vehicle type"})})}),r.jsxs(at,{children:[r.jsx(ne,{value:"bicycle",children:"Bicycle"}),r.jsx(ne,{value:"motorcycle",children:"Motorcycle"}),r.jsx(ne,{value:"scooter",children:"Scooter"}),r.jsx(ne,{value:"car",children:"Car"}),r.jsx(ne,{value:"van",children:"Van"})]})]}),r.jsx(fe,{})]})}),r.jsx(oe,{control:a.control,name:"vehicleNumber",render:({field:c})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Vehicle Number"}),r.jsx(me,{children:r.jsx(he,{placeholder:"e.g., BA-1-PA-1234",...c})}),r.jsx(fe,{})]})})]}),r.jsx(oe,{control:a.control,name:"drivingLicense",render:({field:c})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Driving License Number"}),r.jsx(me,{children:r.jsx(he,{placeholder:"Enter your driving license number",...c})}),r.jsx(fe,{})]})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[r.jsx(Us,{className:"h-5 w-5"}),"Identity Verification"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(oe,{control:a.control,name:"idProofType",render:({field:c})=>r.jsxs(ae,{children:[r.jsx(de,{children:"ID Proof Type"}),r.jsxs(ct,{onValueChange:c.onChange,defaultValue:c.value,children:[r.jsx(me,{children:r.jsx(it,{children:r.jsx(dt,{placeholder:"Select ID proof type"})})}),r.jsxs(at,{children:[r.jsx(ne,{value:"aadhar",children:"Aadhar Card"}),r.jsx(ne,{value:"pan",children:"PAN Card"}),r.jsx(ne,{value:"passport",children:"Passport"}),r.jsx(ne,{value:"voter_id",children:"Voter ID"}),r.jsx(ne,{value:"driving_license",children:"Driving License"})]})]}),r.jsx(fe,{})]})}),r.jsx(oe,{control:a.control,name:"idProofNumber",render:({field:c})=>r.jsxs(ae,{children:[r.jsx(de,{children:"ID Proof Number"}),r.jsx(me,{children:r.jsx(he,{placeholder:"Enter your ID proof number",...c})}),r.jsx(fe,{})]})})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[r.jsx(Le,{className:"h-5 w-5"}),"Service Information"]}),r.jsx(oe,{control:a.control,name:"deliveryAreas",render:({field:c})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Delivery Areas"}),r.jsx(me,{children:r.jsx(Yt,{placeholder:"Enter delivery areas separated by commas (e.g., Siraha, Lahan, Mirchaiya)",className:"min-h-[100px]",...c})}),r.jsx(fe,{})]})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[r.jsx(Ot,{className:"h-5 w-5"}),"Contact & Banking"]}),r.jsx(oe,{control:a.control,name:"emergencyContact",render:({field:c})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Emergency Contact Number"}),r.jsx(me,{children:r.jsx(he,{placeholder:"Enter emergency contact number",...c})}),r.jsx(fe,{})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(oe,{control:a.control,name:"bankAccountNumber",render:({field:c})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Bank Account Number"}),r.jsx(me,{children:r.jsx(he,{placeholder:"Enter bank account number",...c})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:a.control,name:"ifscCode",render:({field:c})=>r.jsxs(ae,{children:[r.jsx(de,{children:"IFSC Code"}),r.jsx(me,{children:r.jsx(he,{placeholder:"Enter IFSC code",...c})}),r.jsx(fe,{})]})})]})]}),r.jsx("div",{className:"space-y-4",children:r.jsx(oe,{control:a.control,name:"termsAccepted",render:({field:c})=>r.jsxs(ae,{className:"flex flex-row items-start space-x-3 space-y-0",children:[r.jsx(me,{children:r.jsx(xc,{checked:c.value,onCheckedChange:c.onChange})}),r.jsxs("div",{className:"space-y-1 leading-none",children:[r.jsx(de,{children:"I accept the terms and conditions for delivery partners"}),r.jsx(fe,{})]})]})})}),r.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(wr,{className:"h-5 w-5 text-amber-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-amber-800",children:"Important"}),r.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"Your profile will be reviewed by our admin team. You'll receive a notification once your account is approved and you can start accepting deliveries."})]})]})}),r.jsx(F,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700",disabled:s||o.isPending,children:s||o.isPending?"Creating Profile...":"Create Delivery Partner Profile"})]})})})]})]})})}delete Ht.Icon.Default.prototype._getIconUrl;Ht.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const UZ=new Ht.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),WZ=new Ht.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),HZ=new Ht.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),HVe=({createdAt:e,estimatedTime:t})=>{const[n,s]=j.useState(0),[i,a]=j.useState(!1);j.useEffect(()=>{const d=setInterval(()=>{const h=new Date,m=new Date(e),f=Math.floor((h.getTime()-m.getTime())/1e3/60);s(f),a(f>t)},1e3);return()=>clearInterval(d)},[e,t]);const o=d=>{if(d<60)return`${d}m`;const h=Math.floor(d/60),m=d%60;return`${h}h ${m}m`},l=Math.max(0,t-n),c=Math.min(100,n/t*100);return r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(gd,{className:"h-3 w-3"}),r.jsxs("span",{className:i?"text-red-600 font-medium":"text-gray-600",children:[o(n)," elapsed"]})]}),r.jsx("div",{className:`text-xs ${i?"text-red-600 font-medium":"text-green-600"}`,children:i?"Overdue":`${o(l)} left`})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:r.jsx("div",{className:`h-1.5 rounded-full transition-all duration-1000 ${i?"bg-red-500":"bg-green-500"}`,style:{width:`${c}%`}})}),r.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["Target: ",o(t)," | Status: ",i?"Behind Schedule":"On Track"]})]})},qVe=({activeDeliveries:e})=>{const[t,n]=j.useState({lat:26.7674,lng:86.5906});j.useEffect(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(i=>{n({lat:i.coords.latitude,lng:i.coords.longitude})})},[]);const s=[t.lat,t.lng];return r.jsx("div",{className:"w-full h-64 sm:h-80 lg:h-96 rounded-lg overflow-hidden border border-gray-200",children:r.jsxs(Eg,{center:s,zoom:13,style:{height:"100%",width:"100%"},className:"rounded-lg",children:[r.jsx(Og,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),r.jsx(Ei,{position:s,icon:HZ,children:r.jsx(za,{children:r.jsxs("div",{className:"text-sm",children:[r.jsx("strong",{children:"Your Location"}),r.jsx("br",{}),"Lat: ",t.lat.toFixed(4),r.jsx("br",{}),"Lng: ",t.lng.toFixed(4)]})})}),e.map(i=>{const a=i.pickupLatitude||26.7674,o=i.pickupLongitude||86.5906,l=i.deliveryLatitude||26.77,c=i.deliveryLongitude||86.595;return r.jsxs("div",{children:[r.jsx(Ei,{position:[a,o],icon:UZ,children:r.jsx(za,{children:r.jsxs("div",{className:"text-sm",children:[r.jsxs("strong",{children:["Pickup: ",i.pickupStoreName||"Store"]}),r.jsx("br",{}),"Order #",i.orderNumber,r.jsx("br",{}),i.pickupAddress]})})}),r.jsx(Ei,{position:[l,c],icon:WZ,children:r.jsx(za,{children:r.jsxs("div",{className:"text-sm",children:[r.jsxs("strong",{children:["Delivery to: ",i.customerName]}),r.jsx("br",{}),"Order #",i.orderNumber,r.jsx("br",{}),i.deliveryAddress,r.jsx("br",{}),r.jsxs("strong",{children:["Fee: ",i.deliveryFee]})]})})}),r.jsx(cW,{positions:[[a,o],[l,c]],color:"blue",weight:3,opacity:.7,dashArray:"5, 5"})]},i.id)})]})})};function KVe(){const{user:e}=rl(),{toast:t}=ft(),n=pn(),[s,i]=j.useState("home"),{data:a,isLoading:o,error:l}=Re({queryKey:["/api/delivery-partners/user",e==null?void 0:e.id],queryFn:async()=>{const S=await fetch(`/api/delivery-partners/user?userId=${e==null?void 0:e.id}`);if(!S.ok){if(S.status===404)return null;throw new Error("Failed to fetch partner data")}return S.json()},enabled:!!(e!=null&&e.id),retry:2}),{data:c=[],isLoading:d}=Re({queryKey:["/api/deliveries/partner",a==null?void 0:a.id],queryFn:async()=>{const S=await fetch(`/api/deliveries/partner/${a==null?void 0:a.id}`);return S.ok?S.json():[]},enabled:!!(a!=null&&a.id)}),{data:h=[],isLoading:m}=Re({queryKey:["/api/deliveries/active",e==null?void 0:e.id],queryFn:async()=>{const S=await fetch(`/api/deliveries/active/${e==null?void 0:e.id}`);return S.ok?S.json():[]},enabled:!!(e!=null&&e.id),refetchInterval:5e3}),{data:f}=Re({queryKey:["/api/delivery-partners/stats",a==null?void 0:a.id],queryFn:async()=>{const S=await fetch(`/api/delivery-partners/${a==null?void 0:a.id}/stats`);return S.ok?S.json():{totalDeliveries:(a==null?void 0:a.totalDeliveries)||0,totalEarnings:parseFloat((a==null?void 0:a.totalEarnings)||"0"),rating:a!=null&&a.rating?parseFloat(a.rating.toString()):0,todayDeliveries:0,todayEarnings:0,activeDeliveries:Array.isArray(c)?c.filter(P=>["assigned","picked_up"].includes(P.status)).length:0}},enabled:!!(a!=null&&a.id)}),g=pt({mutationFn:async({deliveryId:S,status:P})=>(await fetch(`/api/deliveries/${S}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:P,partnerId:a==null?void 0:a.id})})).json(),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/deliveries/partner"]}),t({title:"Status Updated",description:"Delivery status has been updated successfully."})},onError:()=>{t({title:"Error",description:"Failed to update delivery status.",variant:"destructive"})}}),x=pt({mutationFn:async S=>(await fetch(`/api/delivery-partners/${a==null?void 0:a.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isAvailable:S})})).json(),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/delivery-partners/user"]}),t({title:"Availability Updated",description:"Your availability status has been updated."})},onError:()=>{t({title:"Error",description:"Failed to update delivery status.",variant:"destructive"})}});if(o)return r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:r.jsxs("div",{className:"text-center max-w-sm w-full",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 sm:h-16 sm:w-16 border-b-4 border-blue-600 mx-auto mb-4 sm:mb-6"}),r.jsx("h2",{className:"text-lg sm:text-2xl font-semibold text-gray-700 mb-2",children:"Loading Dashboard"}),r.jsx("p",{className:"text-sm sm:text-base text-gray-500",children:"Please wait while we fetch your information..."})]})});if(!a)return r.jsx(VZ,{userId:(e==null?void 0:e.id)||0});const p=Array.isArray(c)?c:[],y=Array.isArray(h)?h:[],b=p.filter(S=>S.status==="assigned"),w=p.filter(S=>S.status==="delivered"),N=f||{totalDeliveries:(a==null?void 0:a.totalDeliveries)||0,totalEarnings:parseFloat((a==null?void 0:a.totalEarnings)||"0"),rating:a!=null&&a.rating?parseFloat(a.rating.toString()):0,todayDeliveries:0,todayEarnings:0,activeDeliveries:y.length};return r.jsxs("div",{className:"min-h-screen bg-gray-50 w-full",children:[r.jsx("div",{className:"bg-gradient-to-r from-red-500 to-orange-500 text-white shadow-lg",children:r.jsx("div",{className:"px-4 py-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:r.jsx(kt,{className:"h-6 w-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-bold",children:"Siraha Bazaar"}),r.jsx("p",{className:"text-sm text-white/80",children:"Delivery Partner"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-xs text-white/80",children:"Status"}),r.jsx("p",{className:"text-sm font-medium",children:a.isAvailable?"Online":"Offline"})]}),r.jsx("button",{onClick:()=>x.mutate(!a.isAvailable),disabled:x.isPending,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${a.isAvailable?"bg-green-400":"bg-white/30"} ${x.isPending?"opacity-50 cursor-not-allowed":""}`,children:r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${a.isAvailable?"translate-x-6":"translate-x-1"}`})})]})]})})}),r.jsx("div",{className:"px-4 pb-20",children:r.jsxs(oi,{value:s,onValueChange:i,className:"w-full",children:[r.jsxs(Ds,{className:"grid grid-cols-4 mb-6 bg-white shadow-lg rounded-2xl p-2 h-16",children:[r.jsxs(ht,{value:"home",className:"flex flex-col items-center justify-center py-2 data-[state=active]:bg-red-50 data-[state=active]:text-red-600 rounded-xl h-12",children:[r.jsx(ti,{className:"h-5 w-5 mb-1"}),r.jsx("span",{className:"text-xs font-medium",children:"Home"})]}),r.jsxs(ht,{value:"map",className:"flex flex-col items-center justify-center py-2 data-[state=active]:bg-red-50 data-[state=active]:text-red-600 rounded-xl h-12",children:[r.jsx(Le,{className:"h-5 w-5 mb-1"}),r.jsx("span",{className:"text-xs font-medium",children:"Map"})]}),r.jsxs(ht,{value:"deliveries",className:"flex flex-col items-center justify-center py-2 data-[state=active]:bg-red-50 data-[state=active]:text-red-600 rounded-xl h-12 relative",children:[r.jsx(l0,{className:"h-5 w-5 mb-1"}),r.jsx("span",{className:"text-xs font-medium",children:"Orders"}),b.length+y.length>0&&r.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-xs font-bold text-white",children:b.length+y.length})})]}),r.jsxs(ht,{value:"profile",className:"flex flex-col items-center justify-center py-2 data-[state=active]:bg-red-50 data-[state=active]:text-red-600 rounded-xl h-12",children:[r.jsx(Wr,{className:"h-5 w-5 mb-1"}),r.jsx("span",{className:"text-xs font-medium",children:"Profile"})]})]}),r.jsxs(tt,{value:"home",className:"space-y-6",children:[r.jsx("div",{className:"text-center",children:r.jsxs("div",{className:"inline-block bg-white rounded-2xl shadow-lg p-6 min-w-[200px]",children:[r.jsx("div",{className:"text-4xl font-bold text-red-500 mb-1",children:new Date().getDate()}),r.jsx("div",{className:"text-sm text-gray-600 uppercase tracking-wide",children:new Date().toLocaleDateString("en-US",{weekday:"long"})}),r.jsx("div",{className:"text-xs text-gray-500",children:new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"})})]})}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Today's Stats"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-50 rounded-xl",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:r.jsx(rt,{className:"h-5 w-5 text-red-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completed Orders"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Today"})]})]}),r.jsx("div",{className:"text-2xl font-bold text-red-600",children:N.totalDeliveries})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-orange-50 rounded-xl",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:r.jsx(Hr,{className:"h-5 w-5 text-orange-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Earnings"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Today"})]})]}),r.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:["",N.todayEarnings.toFixed(2)]})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-xl",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:r.jsx(gt,{className:"h-5 w-5 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Orders"}),r.jsx("p",{className:"text-xs text-gray-500",children:"In Progress"})]})]}),r.jsx("div",{className:"text-2xl font-bold text-green-600",children:N.activeDeliveries})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Weekly Performance"}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-red-500 to-orange-500 rounded-xl text-white",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Total Earnings"}),r.jsxs("p",{className:"text-2xl font-bold",children:["",N.totalEarnings.toFixed(2)]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-sm",children:"This Week"}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(wn,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm font-medium",children:"+12%"})]})]})]})]}),r.jsx(F,{className:"w-full h-14 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-semibold text-lg rounded-2xl shadow-lg",onClick:()=>i("deliveries"),children:"START DELIVERY"})]}),r.jsx(tt,{value:"map",className:"space-y-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[r.jsxs("div",{className:"h-96 relative",children:[r.jsx("div",{className:"absolute inset-0 z-10",children:r.jsxs(Eg,{center:[26.66,86.21],zoom:13,className:"h-full w-full",zoomControl:!1,children:[r.jsx(Og,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:" OpenStreetMap contributors"}),y.map(S=>r.jsxs("div",{children:[r.jsx(Ei,{position:[26.6603,86.2064],icon:UZ,children:r.jsx(za,{children:r.jsxs("div",{className:"p-2",children:[r.jsx("h3",{className:"font-semibold text-sm",children:"Pickup Location"}),r.jsxs("p",{className:"text-xs text-gray-600",children:["Order #",S.orderId]}),r.jsxs("p",{className:"text-xs",children:["Store: ",S.storeName||"Store"]})]})})}),r.jsx(Ei,{position:[26.665,86.215],icon:WZ,children:r.jsx(za,{children:r.jsxs("div",{className:"p-2",children:[r.jsx("h3",{className:"font-semibold text-sm",children:"Delivery Location"}),r.jsxs("p",{className:"text-xs text-gray-600",children:["Order #",S.orderId]}),r.jsxs("p",{className:"text-xs",children:["Customer: ",S.customerName||"Customer"]})]})})}),r.jsx(cW,{positions:[[26.6603,86.2064],[26.665,86.215]],color:"#ef4444",weight:3,opacity:.7})]},S.id)),r.jsx(Ei,{position:[26.66,86.21],icon:HZ,children:r.jsx(za,{children:r.jsxs("div",{className:"p-2",children:[r.jsx("h3",{className:"font-semibold text-sm",children:"Your Location"}),r.jsx("p",{className:"text-xs text-gray-600",children:"Delivery Partner"})]})})})]})}),r.jsx("div",{className:"absolute top-4 right-4 z-20 space-y-2",children:r.jsx(F,{size:"sm",className:"bg-white text-gray-700 hover:bg-gray-50 shadow-lg w-10 h-10 p-0",onClick:()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(S=>{t({description:`Location updated: ${S.coords.latitude.toFixed(4)}, ${S.coords.longitude.toFixed(4)}`})})},children:r.jsx(jt,{className:"h-4 w-4"})})})]}),r.jsxs("div",{className:"p-4 bg-gray-50",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:"font-semibold text-gray-800",children:"Current Delivery"}),r.jsx(le,{className:"bg-red-500 text-white",children:"13 min"})]}),y.length>0?r.jsx("div",{className:"space-y-3",children:y.map(S=>r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),r.jsxs("span",{className:"font-medium text-sm",children:["Order #",S.orderId]})]}),r.jsxs("span",{className:"text-sm text-green-600 font-medium",children:["",S.deliveryFee||30]})]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),r.jsxs("span",{className:"text-gray-600",children:["Pickup: ",S.storeName||"Store Location"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),r.jsxs("span",{className:"text-gray-600",children:["Drop: ",S.customerName||"Customer Location"]})]})]}),r.jsxs("div",{className:"flex gap-2 mt-4",children:[r.jsx(F,{size:"sm",className:"flex-1 bg-red-500 hover:bg-red-600 text-white rounded-lg",onClick:()=>window.open("https://www.google.com/maps/dir//26.6603,86.2064","_blank"),children:"Go to Pickup"}),r.jsx(F,{size:"sm",variant:"outline",className:"flex-1 border-red-500 text-red-500 hover:bg-red-50 rounded-lg",onClick:()=>window.open("https://www.google.com/maps/dir//26.665,86.215","_blank"),children:"Go to Drop"})]})]},S.id))}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Le,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500",children:"No active deliveries"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Check the Orders tab for available deliveries"})]})]})]})}),r.jsx(tt,{value:"deliveries",className:"space-y-4 sm:space-y-6",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsxs(G,{className:"shadow-lg border-0",children:[r.jsx(se,{className:"px-3 sm:px-6",children:r.jsxs(ie,{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Le,{className:"h-4 w-4 sm:h-5 sm:w-5"}),r.jsx("span",{className:"text-base sm:text-lg",children:"Delivery Area Map"})]}),r.jsx(le,{variant:"secondary",className:"bg-green-100 text-green-800 w-fit",children:"Live"})]})}),r.jsxs(Z,{className:"px-3 sm:px-6",children:[r.jsx(qVe,{activeDeliveries:y}),r.jsxs("div",{className:"mt-4 space-y-2 text-xs sm:text-sm text-gray-600",children:[r.jsxs("div",{className:"flex items-center justify-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),r.jsx("span",{children:"Pickup Locations"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),r.jsx("span",{children:"Delivery Destinations"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),r.jsx("span",{children:"Your Location"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 mt-4",children:[r.jsxs(F,{variant:"outline",size:"sm",onClick:()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(S=>{t({title:"Location Updated",description:"Your current location has been recorded."})})},className:"text-xs sm:text-sm",children:[r.jsx(Le,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),"Update Location"]}),r.jsxs(F,{variant:"outline",size:"sm",onClick:()=>window.open("https://www.google.com/maps","_blank"),className:"text-xs sm:text-sm",children:[r.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),"Open External Maps"]})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4 mt-4 sm:mt-6",children:[r.jsxs("div",{className:"text-center p-3 sm:p-4 bg-green-50 rounded-lg",children:[r.jsx("div",{className:"text-lg sm:text-2xl font-bold text-green-600",children:a.deliveryAreas.length}),r.jsx("div",{className:"text-xs sm:text-sm text-green-700",children:"Coverage Areas"})]}),r.jsxs("div",{className:"text-center p-3 sm:p-4 bg-blue-50 rounded-lg",children:[r.jsx("div",{className:"text-lg sm:text-2xl font-bold text-blue-600",children:N.activeDeliveries}),r.jsx("div",{className:"text-xs sm:text-sm text-blue-700",children:"Active Routes"})]}),r.jsxs("div",{className:"text-center p-3 sm:p-4 bg-orange-50 rounded-lg",children:[r.jsx("div",{className:"text-lg sm:text-2xl font-bold text-orange-600",children:a.isAvailable?"Online":"Offline"}),r.jsx("div",{className:"text-xs sm:text-sm text-orange-700",children:"Status"})]})]})]})]})}),r.jsx("div",{className:"lg:col-span-1",children:r.jsx("div",{className:"h-full",children:r.jsx(d6,{deliveryPartnerId:(a==null?void 0:a.id)||0})})})]})}),r.jsx(tt,{value:"orders",className:"space-y-4 sm:space-y-6",children:r.jsxs(G,{className:"shadow-lg border-0",children:[r.jsxs(se,{className:"px-3 sm:px-6",children:[r.jsxs(ie,{className:"flex items-center gap-2 text-base sm:text-lg",children:[r.jsx(Xt,{className:"h-4 w-4 sm:h-5 sm:w-5 text-orange-500"}),"Delivery Alerts"]}),r.jsx(Ct,{className:"text-sm",children:"New delivery opportunities available"})]}),r.jsx(Z,{className:"px-3 sm:px-6",children:r.jsx(d6,{deliveryPartnerId:(a==null?void 0:a.id)||0})})]})}),r.jsx(tt,{value:"deliveries",className:"space-y-2 xs:space-y-3 sm:space-y-4 lg:space-y-6",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-2 xs:gap-3 sm:gap-4 lg:gap-6 w-full",children:[r.jsxs(G,{className:"shadow-lg border-0 w-full",children:[r.jsx(se,{className:"px-2 xs:px-3 sm:px-6 py-2 xs:py-3 sm:py-4",children:r.jsxs(ie,{className:"flex items-center gap-1 xs:gap-2 text-sm xs:text-base sm:text-lg",children:[r.jsx(gt,{className:"h-3 w-3 xs:h-4 xs:w-4 sm:h-5 sm:w-5 text-orange-500 flex-shrink-0"}),r.jsxs("span",{className:"truncate",children:["Pending (",b.length,")"]})]})}),r.jsx(Z,{className:"space-y-2 xs:space-y-3 sm:space-y-4 px-2 xs:px-3 sm:px-6 pb-2 xs:pb-3 sm:pb-6",children:b.length===0?r.jsxs("div",{className:"text-center py-4 xs:py-6 sm:py-8",children:[r.jsx(rt,{className:"h-6 w-6 xs:h-8 xs:w-8 sm:h-10 sm:w-10 lg:h-12 lg:w-12 text-gray-300 mx-auto mb-2 xs:mb-3 sm:mb-4"}),r.jsx("p",{className:"text-xs xs:text-sm sm:text-base text-gray-500",children:"No pending deliveries"})]}):b.map(S=>r.jsx(G,{className:"border border-orange-200 bg-orange-50 w-full overflow-hidden",children:r.jsxs(Z,{className:"p-1.5 xs:p-2 sm:p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1.5 xs:mb-2 gap-1 xs:gap-2",children:[r.jsxs("div",{className:"font-semibold text-[10px] xs:text-xs sm:text-sm lg:text-lg truncate min-w-0",children:["Order #",S.orderId]}),r.jsxs(le,{className:"bg-orange-100 text-orange-800 border-orange-200 text-[8px] xs:text-[9px] sm:text-xs flex-shrink-0 px-1 xs:px-2 py-0.5",children:["",S.deliveryFee]})]}),r.jsxs("div",{className:"space-y-1 xs:space-y-1.5 sm:space-y-2 text-[9px] xs:text-[10px] sm:text-xs lg:text-sm",children:[r.jsxs("div",{className:"flex items-start gap-1 xs:gap-1.5 sm:gap-2",children:[r.jsx(Le,{className:"h-2.5 w-2.5 xs:h-3 xs:w-3 sm:h-4 sm:w-4 text-green-500 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("p",{className:"font-medium text-[9px] xs:text-[10px] sm:text-xs",children:"Pickup"}),r.jsx("p",{className:"text-gray-600 text-[8px] xs:text-[9px] sm:text-xs line-clamp-2 break-words",children:S.pickupAddress})]})]}),r.jsxs("div",{className:"flex items-start gap-1 xs:gap-1.5 sm:gap-2",children:[r.jsx(Le,{className:"h-2.5 w-2.5 xs:h-3 xs:w-3 sm:h-4 sm:w-4 text-red-500 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("p",{className:"font-medium text-[9px] xs:text-[10px] sm:text-xs",children:"Delivery"}),r.jsx("p",{className:"text-gray-600 text-[8px] xs:text-[9px] sm:text-xs line-clamp-2 break-words",children:S.deliveryAddress})]})]})]}),r.jsxs("div",{className:"mt-2 xs:mt-2.5 sm:mt-3 lg:mt-4 flex flex-col xs:flex-row gap-1 xs:gap-1.5 sm:gap-2",children:[r.jsxs(F,{onClick:()=>g.mutate({deliveryId:S.id,status:"picked_up"}),disabled:g.isPending,className:"flex-1 bg-green-600 hover:bg-green-700 text-[8px] xs:text-[9px] sm:text-xs py-1 xs:py-1.5 sm:py-2 h-6 xs:h-7 sm:h-auto",size:"sm",children:[r.jsx("span",{className:"hidden xs:inline",children:"Accept & Pickup"}),r.jsx("span",{className:"xs:hidden",children:"Accept"})]}),r.jsx(F,{variant:"outline",size:"sm",className:"xs:w-auto h-6 xs:h-7 sm:h-auto px-2",children:r.jsx(Le,{className:"h-2.5 w-2.5 xs:h-3 xs:w-3 sm:h-4 sm:w-4"})})]})]})},S.id))})]}),r.jsxs(G,{className:"shadow-lg border-0",children:[r.jsx(se,{className:"px-3 sm:px-6",children:r.jsxs(ie,{className:"flex items-center gap-2 text-base sm:text-lg",children:[r.jsx(kt,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-500"}),"Active Deliveries (",y.length,")",m&&r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"})]})}),r.jsx(Z,{className:"space-y-3 sm:space-y-4 px-3 sm:px-6",children:m?r.jsxs("div",{className:"text-center py-6 sm:py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-sm sm:text-base text-gray-500",children:"Loading active deliveries..."})]}):y.length===0?r.jsxs("div",{className:"text-center py-6 sm:py-8",children:[r.jsx(kt,{className:"h-10 w-10 sm:h-12 sm:w-12 text-gray-300 mx-auto mb-3 sm:mb-4"}),r.jsx("p",{className:"text-sm sm:text-base text-gray-500",children:"No active deliveries"}),r.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Accept delivery orders to see them here"})]}):y.map(S=>r.jsx(G,{className:"border border-blue-200 bg-blue-50 max-w-full overflow-hidden",children:r.jsxs(Z,{className:"p-2 sm:p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2 gap-2",children:[r.jsxs("div",{className:"font-semibold text-xs sm:text-lg truncate min-w-0",children:["Order #",S.orderId]}),r.jsx(le,{className:"bg-blue-100 text-blue-800 border-blue-200 text-xs flex-shrink-0",children:"In Progress"})]}),r.jsxs("div",{className:"space-y-2 text-xs sm:text-sm",children:[r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Le,{className:"h-3 w-3 sm:h-4 sm:w-4 text-red-500 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("p",{className:"font-medium text-xs sm:text-sm",children:"Delivery Address"}),r.jsx("p",{className:"text-gray-600 text-xs sm:text-sm line-clamp-2 word-wrap break-words overflow-wrap-anywhere",children:S.deliveryAddress})]})]}),r.jsx("div",{className:"mt-3 p-2 bg-white rounded-md border",children:r.jsx(HVe,{createdAt:S.createdAt,estimatedTime:45})})]}),r.jsxs("div",{className:"mt-3 sm:mt-4 flex flex-col sm:flex-row gap-2",children:[r.jsxs(F,{variant:"outline",onClick:()=>window.open(`/delivery-map/${S.id}`,"_blank"),className:"flex-1 text-xs py-2",size:"sm",children:[r.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),r.jsx("span",{className:"hidden sm:inline",children:"Navigate"}),r.jsx("span",{className:"sm:hidden",children:"Nav"})]}),r.jsxs(F,{onClick:()=>g.mutate({deliveryId:S.id,status:"delivered"}),disabled:g.isPending,className:"flex-1 bg-green-600 hover:bg-green-700 text-xs py-2",size:"sm",children:[r.jsx("span",{className:"hidden sm:inline",children:"Mark Delivered"}),r.jsx("span",{className:"sm:hidden",children:"Delivered"})]})]})]})},S.id))})]})]})}),r.jsx(tt,{value:"history",className:"space-y-4 sm:space-y-6",children:r.jsxs(G,{className:"shadow-lg border-0",children:[r.jsxs(se,{className:"px-3 sm:px-6",children:[r.jsx(ie,{className:"text-base sm:text-lg",children:"Delivery History"}),r.jsx(Ct,{className:"text-sm",children:"Your completed deliveries"})]}),r.jsx(Z,{className:"px-3 sm:px-6",children:w.length===0?r.jsxs("div",{className:"text-center py-8 sm:py-12",children:[r.jsx(Zl,{className:"h-12 w-12 sm:h-16 sm:w-16 text-gray-300 mx-auto mb-3 sm:mb-4"}),r.jsx("p",{className:"text-base sm:text-lg text-gray-500",children:"No completed deliveries yet"})]}):r.jsx("div",{className:"space-y-3 sm:space-y-4",children:w.map(S=>r.jsx(G,{className:"border border-green-200 bg-green-50 max-w-full overflow-hidden",children:r.jsx(Z,{className:"p-2 sm:p-4",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"font-semibold text-xs sm:text-lg truncate",children:["Order #",S.orderId]}),r.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 truncate",children:["Delivered on ",new Date(S.deliveredAt).toLocaleDateString()]}),S.customerRating&&r.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[r.jsx($t,{className:"h-3 w-3 sm:h-4 sm:w-4 text-yellow-500 fill-current"}),r.jsx("span",{className:"text-xs sm:text-sm font-medium",children:S.customerRating})]})]}),r.jsxs("div",{className:"text-left sm:text-right flex-shrink-0",children:[r.jsxs("div",{className:"font-bold text-green-600 text-sm sm:text-lg",children:["",S.deliveryFee]}),r.jsx(le,{variant:"outline",className:"border-green-300 text-green-700 text-xs",children:"Completed"})]})]})})},S.id))})})]})}),r.jsx(tt,{value:"earnings",className:"space-y-4 sm:space-y-6",children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[r.jsxs(G,{className:"shadow-lg border-0",children:[r.jsx(se,{className:"px-3 sm:px-6",children:r.jsx(ie,{className:"text-base sm:text-lg",children:"Today's Earnings"})}),r.jsxs(Z,{className:"px-3 sm:px-6",children:[r.jsxs("div",{className:"text-2xl sm:text-3xl font-bold text-green-600",children:["",N.todayEarnings.toFixed(2)]}),r.jsxs("p",{className:"text-xs sm:text-sm text-gray-500",children:[N.todayDeliveries," ",N.todayDeliveries===1?"delivery":"deliveries"]})]})]}),r.jsxs(G,{className:"shadow-lg border-0",children:[r.jsx(se,{className:"px-3 sm:px-6",children:r.jsx(ie,{className:"text-base sm:text-lg",children:"This Week"})}),r.jsxs(Z,{className:"px-3 sm:px-6",children:[r.jsxs("div",{className:"text-2xl sm:text-3xl font-bold text-blue-600",children:["",(N.todayEarnings*7).toFixed(2)]}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Weekly projection"})]})]}),r.jsxs(G,{className:"shadow-lg border-0 sm:col-span-2 lg:col-span-1",children:[r.jsx(se,{className:"px-3 sm:px-6",children:r.jsx(ie,{className:"text-base sm:text-lg",children:"Total Lifetime"})}),r.jsxs(Z,{className:"px-3 sm:px-6",children:[r.jsxs("div",{className:"text-2xl sm:text-3xl font-bold text-purple-600",children:["",N.totalEarnings.toFixed(2)]}),r.jsxs("p",{className:"text-xs sm:text-sm text-gray-500",children:[N.totalDeliveries," total deliveries"]})]})]})]})}),r.jsx(tt,{value:"profile",children:r.jsxs(G,{className:"shadow-lg border-0",children:[r.jsxs(se,{className:"px-3 sm:px-6",children:[r.jsx(ie,{className:"text-base sm:text-lg",children:"Profile Information"}),r.jsx(Ct,{className:"text-sm",children:"Your delivery partner details"})]}),r.jsx(Z,{className:"px-3 sm:px-6",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-semibold text-base sm:text-lg",children:"Vehicle Details"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between py-2 border-b gap-1",children:[r.jsx("span",{className:"text-gray-600 text-sm",children:"Vehicle Type:"}),r.jsx("span",{className:"font-medium capitalize text-sm",children:a.vehicleType})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between py-2 border-b gap-1",children:[r.jsx("span",{className:"text-gray-600 text-sm",children:"Vehicle Number:"}),r.jsx("span",{className:"font-medium text-sm",children:a.vehicleNumber})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between py-2 border-b gap-1",children:[r.jsx("span",{className:"text-gray-600 text-sm",children:"Driving License:"}),r.jsx("span",{className:"font-medium text-sm",children:a.drivingLicense})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-semibold text-base sm:text-lg",children:"Contact & Areas"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between py-2 border-b gap-1",children:[r.jsx("span",{className:"text-gray-600 text-sm",children:"Emergency Contact:"}),r.jsx("span",{className:"font-medium text-sm",children:a.emergencyContact})]}),r.jsxs("div",{className:"py-2 border-b",children:[r.jsx("span",{className:"text-gray-600 text-sm",children:"Delivery Areas:"}),r.jsx("div",{className:"flex flex-wrap gap-1 sm:gap-2 mt-2",children:a.deliveryAreas.map((S,P)=>r.jsx(le,{variant:"outline",className:"bg-blue-50 text-blue-700 text-xs",children:S},P))})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between py-2 border-b gap-1",children:[r.jsx("span",{className:"text-gray-600 text-sm",children:"Status:"}),r.jsx(le,{variant:a.status==="approved"?"default":"secondary",className:`${a.status==="approved"?"bg-green-100 text-green-800":""} text-xs w-fit`,children:a.status})]})]})]})]})})]})})]})}),r.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg z-50 md:hidden",children:r.jsx("div",{className:"max-w-md mx-auto px-4 py-2",children:r.jsxs("div",{className:"flex justify-around items-center",children:[r.jsxs("button",{onClick:()=>i("home"),className:`flex flex-col items-center p-2 ${s==="home"?"text-red-500":"text-gray-400"}`,children:[r.jsx(ti,{className:"h-6 w-6 mb-1"}),r.jsx("span",{className:"text-xs font-medium",children:"Home"})]}),r.jsxs("button",{onClick:()=>i("map"),className:`flex flex-col items-center p-2 ${s==="map"?"text-red-500":"text-gray-400"}`,children:[r.jsx(Le,{className:"h-6 w-6 mb-1"}),r.jsx("span",{className:"text-xs font-medium",children:"Map"})]}),r.jsxs("button",{onClick:()=>i("deliveries"),className:`flex flex-col items-center p-2 relative ${s==="deliveries"?"text-red-500":"text-gray-400"}`,children:[r.jsx(l0,{className:"h-6 w-6 mb-1"}),r.jsx("span",{className:"text-xs font-medium",children:"Orders"}),b.length+y.length>0&&r.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-xs font-bold text-white",children:b.length+y.length})})]}),r.jsxs("button",{onClick:()=>i("profile"),className:`flex flex-col items-center p-2 ${s==="profile"?"text-red-500":"text-gray-400"}`,children:[r.jsx(Wr,{className:"h-6 w-6 mb-1"}),r.jsx("span",{className:"text-xs font-medium",children:"Profile"})]})]})})})]})}function GVe({deliveryId:e,deliveryPartnerId:t,pickupLocation:n,deliveryLocation:s,currentLocation:i,onLocationUpdate:a}){const o=j.useRef(null),[l,c]=j.useState(!1),[d,h]=j.useState(null),[m,f]=j.useState(null);j.useEffect(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(y=>{const b={lat:y.coords.latitude,lng:y.coords.longitude};h(b),a&&a(b)},y=>{console.error("Error getting location:",y),f("Unable to get your location. Please enable location services.")}):f("Geolocation is not supported by this browser.")},[a]),j.useEffect(()=>{o.current&&!l&&c(!0)},[l]);const g=y=>{const b=`https://www.google.com/maps/dir/?api=1&destination=${y.lat},${y.lng}`;window.open(b,"_blank")},x=(y,b)=>{const C=(b-86.19)/.03*50+25,k=(26.65+.03-y)/.03*50+25;return{left:`${Math.max(15,Math.min(85,C))}%`,top:`${Math.max(15,Math.min(85,k))}%`}},p=()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(y=>{const b={lat:y.coords.latitude,lng:y.coords.longitude};h(b),a&&a(b)},y=>{console.error("Error updating location:",y),f("Failed to update location. Please try again.")})};return m?r.jsx(G,{children:r.jsx(Z,{className:"p-6",children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"text-center",children:[r.jsx(wr,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),r.jsx("p",{className:"text-red-600 mb-4",children:m}),r.jsx(F,{onClick:p,variant:"outline",children:"Try Again"})]})})})}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(Le,{className:"h-5 w-5"}),"Delivery Map",r.jsx(le,{variant:"secondary",className:"bg-green-100 text-green-800",children:"Live Tracking"})]})}),r.jsxs(Z,{children:[r.jsx("div",{ref:o,className:"w-full h-96 bg-gradient-to-br from-blue-50 to-indigo-100 rounded-lg border-2 border-blue-200 relative overflow-hidden",children:r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsxs("div",{className:"relative w-full h-full",children:[r.jsx("div",{className:"absolute inset-0 opacity-10",children:r.jsx("div",{className:"grid grid-cols-8 grid-rows-6 h-full",children:Array.from({length:48}).map((y,b)=>r.jsx("div",{className:"border border-blue-300"},b))})}),n&&r.jsx("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2",style:x(n.lat,n.lng),children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full border-2 border-white shadow-lg animate-pulse"}),r.jsx("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-green-600 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:" Pickup"})]})}),s&&r.jsx("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2",style:x(s.lat,s.lng),children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-6 h-6 bg-red-500 rounded-full border-2 border-white shadow-lg animate-pulse"}),r.jsx("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-red-600 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:" Delivery"})]})}),(d||i)&&r.jsx("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2",style:x(((i==null?void 0:i.lat)||(d==null?void 0:d.lat))??26.6696,((i==null?void 0:i.lng)||(d==null?void 0:d.lng))??86.2121),children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-5 h-5 bg-blue-500 rounded-full border-2 border-white shadow-lg",children:r.jsx("div",{className:"absolute inset-0 bg-blue-500 rounded-full animate-ping opacity-75"})}),r.jsx("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-blue-600 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:" Partner"})]})}),n&&s&&(()=>{const y=x(n.lat,n.lng),b=x(s.lat,s.lng),w=(parseFloat(y.left)+parseFloat(b.left))/2,N=Math.min(parseFloat(y.top),parseFloat(b.top))-5;return r.jsx("div",{className:"absolute inset-0",children:r.jsxs("svg",{className:"w-full h-full",children:[r.jsx("defs",{children:r.jsx("pattern",{id:"dash",patternUnits:"userSpaceOnUse",width:"8",height:"8",children:r.jsx("rect",{width:"4",height:"8",fill:"#3B82F6"})})}),r.jsx("path",{d:`M ${y.left} ${y.top} Q ${w}% ${N}% ${b.left} ${b.top}`,stroke:"#3B82F6",strokeWidth:"3",strokeDasharray:"5,5",fill:"none",className:"animate-pulse"})]})})})(),r.jsxs("div",{className:"absolute top-4 left-4 bg-white/80 backdrop-blur-sm rounded-lg p-3",children:[r.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Live Tracking"}),r.jsx("div",{className:"text-xs text-gray-500",children:d?`${d.lat.toFixed(4)}, ${d.lng.toFixed(4)}`:"Getting location..."})]})]})})}),r.jsxs("div",{className:"flex gap-2 mt-4",children:[r.jsxs(F,{onClick:p,size:"sm",variant:"outline",children:[r.jsx(Le,{className:"h-4 w-4 mr-2"}),"Update Location"]}),n&&r.jsxs(F,{onClick:()=>g(n),size:"sm",variant:"outline",children:[r.jsx(jt,{className:"h-4 w-4 mr-2"}),"Navigate to Pickup"]}),s&&r.jsxs(F,{onClick:()=>g(s),size:"sm",variant:"outline",children:[r.jsx(jt,{className:"h-4 w-4 mr-2"}),"Navigate to Delivery"]})]})]})]}),(n||s)&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n&&r.jsxs(G,{children:[r.jsx(se,{className:"pb-3",children:r.jsxs(ie,{className:"text-sm flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),"Pickup Location"]})}),r.jsxs(Z,{children:[r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:n.address}),r.jsx("div",{className:"flex gap-2",children:r.jsxs(F,{size:"sm",variant:"outline",onClick:()=>g(n),children:[r.jsx(jt,{className:"h-3 w-3 mr-1"}),"Navigate"]})})]})]}),s&&r.jsxs(G,{children:[r.jsx(se,{className:"pb-3",children:r.jsxs(ie,{className:"text-sm flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),"Delivery Location"]})}),r.jsxs(Z,{children:[r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s.address}),r.jsx("div",{className:"flex gap-2",children:r.jsxs(F,{size:"sm",variant:"outline",onClick:()=>g(s),children:[r.jsx(jt,{className:"h-3 w-3 mr-1"}),"Navigate"]})})]})]})]})]})}function qZ({deliveryData:e,deliveryPartnerId:t,onLocationUpdate:n}){const s=j.useRef(null),i=j.useRef(null),[a,o]=j.useState(null),[l,c]=j.useState(!1),[d,h]=j.useState([]),[m,f]=j.useState(e.estimatedTime),[g,x]=j.useState(0),[p,y]=j.useState(!1),b=j.useRef(null),w=j.useRef(null),N=j.useRef(null),S=j.useRef(null),P=(M,U=!1)=>{const H={store:U?"#10b981":"#059669",customer:U?"#3b82f6":"#2563eb",delivery:U?"#f59e0b":"#d97706"},K={store:"",customer:"",delivery:""};return Ht.divIcon({html:`
        <div style="
          background: ${H[M]};
          width: 40px;
          height: 40px;
          border-radius: 50%;
          border: 3px solid white;
          box-shadow: 0 4px 12px rgba(0,0,0,0.3);
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 18px;
          position: relative;
          ${U?"animation: pulse 2s infinite;":""}
        ">
          ${K[M]}
          ${U?'<div style="position: absolute; width: 100%; height: 100%; border-radius: 50%; background: rgba(255,255,255,0.3); animation: ripple 2s infinite;"></div>':""}
        </div>
        <style>
          @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
          }
          @keyframes ripple {
            0% { transform: scale(0.8); opacity: 1; }
            100% { transform: scale(2); opacity: 0; }
          }
        </style>
      `,className:"custom-marker",iconSize:[40,40],iconAnchor:[20,20]})};j.useEffect(()=>(i.current&&!s.current&&(s.current=Ht.map(i.current).setView([26.6636,86.2061],14),Ht.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors"}).addTo(s.current),C(),k()),()=>{s.current&&(s.current.remove(),s.current=null)}),[]);const C=()=>{if(!s.current)return;const M=[26.6636,86.2061];b.current=Ht.marker(M,{icon:P("store",e.status==="assigned")}).addTo(s.current),b.current.bindPopup(`
      <div style="padding: 8px;">
        <strong>${e.storeName}</strong><br>
         Pickup Location<br>
         ${e.storePhone||"N/A"}<br>
         Order #${e.orderId}
      </div>
    `);const U=[26.6756,86.2181];w.current=Ht.marker(U,{icon:P("customer",e.status==="en_route_delivery")}).addTo(s.current),w.current.bindPopup(`
      <div style="padding: 8px;">
        <strong>${e.customerName}</strong><br>
         Delivery Address<br>
         ${e.customerPhone}<br>
         Fee: ${e.deliveryFee}
      </div>
    `);const H=[26.6696,86.2121];N.current=Ht.marker(H,{icon:P("delivery",!0)}).addTo(s.current),N.current.bindPopup(`
      <div style="padding: 8px;">
        <strong>Delivery Partner</strong><br>
         Live Location<br>
         ETA: ${m} mins<br>
         ${g.toFixed(1)}km covered
      </div>
    `);const K=new Ht.FeatureGroup([b.current,w.current,N.current]);s.current.fitBounds(K.getBounds().pad(.1))},k=()=>{if(!s.current)return;const M=[[26.6636,86.2061],[26.6646,86.2071],[26.6656,86.2091],[26.6676,86.2111],[26.6696,86.2131],[26.6716,86.2151],[26.6736,86.2171],[26.6756,86.2181]];S.current=Ht.polyline(M,{color:"#3b82f6",weight:4,opacity:.8,dashArray:"10, 10"}).addTo(s.current);const U=M.map((H,K)=>({lat:H[0],lng:H[1],timestamp:Date.now()+K*3e4}));h(U)},O=()=>{c(!0),navigator.geolocation?navigator.geolocation.watchPosition(M=>{const U={lat:M.coords.latitude,lng:M.coords.longitude,timestamp:Date.now()};o(U),T(U),n==null||n(U)},M=>{console.error("Geolocation error:",M),I()},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4}):I()},I=()=>{y(!0);let M=0;const U=setInterval(()=>{if(M>=d.length){clearInterval(U),y(!1);return}const H=d[M];o(H),T(H);const K=d.length-M-1;f(Math.max(1,Math.round(K*.5))),x(M/d.length*e.estimatedDistance),M++},2e3)},T=M=>{N.current&&s.current&&(N.current.setLatLng([M.lat,M.lng]),N.current.setPopupContent(`
        <div style="padding: 8px;">
          <strong>Delivery Partner</strong><br>
           Live Location<br>
           ETA: ${m} mins<br>
           ${g.toFixed(1)}km covered<br>
           Updated: ${new Date(M.timestamp).toLocaleTimeString()}
        </div>
      `),s.current.panTo([M.lat,M.lng]))},E=()=>{c(!1),y(!1)},D=()=>{switch(e.status){case"assigned":return r.jsx(rt,{className:"h-4 w-4"});case"picked_up":return r.jsx(kt,{className:"h-4 w-4"});case"en_route_delivery":return r.jsx(jt,{className:"h-4 w-4"});case"delivered":return r.jsx(wt,{className:"h-4 w-4"});default:return r.jsx(gt,{className:"h-4 w-4"})}},B=()=>{switch(e.status){case"assigned":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"picked_up":return"bg-blue-100 text-blue-800 border-blue-200";case"en_route_delivery":return"bg-purple-100 text-purple-800 border-purple-200";case"delivered":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(G,{className:"shadow-lg border-0",children:[r.jsx(se,{className:"pb-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(jt,{className:"h-5 w-5 text-blue-600"}),"Live Delivery Tracking"]}),r.jsxs(le,{className:`${B()} flex items-center gap-1`,children:[D(),e.status.replace("_"," ").toUpperCase()]})]})}),r.jsx(Z,{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-green-50 rounded-lg",children:[r.jsx(nr,{className:"h-8 w-8 text-green-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-green-800",children:e.storeName}),r.jsx("p",{className:"text-sm text-green-600",children:"Pickup Location"})]})]}),r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-blue-50 rounded-lg",children:[r.jsx(ti,{className:"h-8 w-8 text-blue-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-blue-800",children:e.customerName}),r.jsx("p",{className:"text-sm text-blue-600",children:"Delivery Address"})]})]}),r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-orange-50 rounded-lg",children:[r.jsx(gd,{className:"h-8 w-8 text-orange-600"}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium text-orange-800",children:["ETA: ",m," mins"]}),r.jsxs("p",{className:"text-sm text-orange-600",children:[g.toFixed(1),"km covered"]})]})]})]})})]}),r.jsxs(G,{className:"shadow-lg border-0",children:[r.jsx(se,{className:"pb-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(Le,{className:"h-5 w-5 text-red-600"}),"Real-Time Map"]}),r.jsx("div",{className:"flex gap-2",children:l?r.jsxs(F,{onClick:E,variant:"outline",size:"sm",children:[r.jsx(tre,{className:"h-4 w-4 mr-2"}),"Stop Tracking"]}):r.jsxs(F,{onClick:O,className:"bg-green-600 hover:bg-green-700",size:"sm",children:[r.jsx(qf,{className:"h-4 w-4 mr-2"}),"Start Tracking"]})})]})}),r.jsxs(Z,{children:[r.jsx("div",{ref:i,className:"w-full h-96 rounded-lg border-2 border-gray-200",style:{minHeight:"400px"}}),r.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-4 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-6 h-6 bg-green-600 rounded-full flex items-center justify-center text-white text-xs",children:""}),r.jsx("span",{children:"Store/Pickup"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center text-white text-xs",children:""}),r.jsx("span",{children:"Customer/Delivery"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-6 h-6 bg-orange-600 rounded-full flex items-center justify-center text-white text-xs",children:""}),r.jsx("span",{children:"Delivery Partner"})]})]})]})]}),r.jsxs(G,{className:"shadow-lg border-0",children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(rt,{className:"h-5 w-5 text-purple-600"}),"Order Details"]})}),r.jsx(Z,{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Order ID:"}),r.jsxs("span",{className:"font-medium",children:["#",e.orderId]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Delivery Fee:"}),r.jsxs("span",{className:"font-medium text-green-600",children:["",e.deliveryFee]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Distance:"}),r.jsxs("span",{className:"font-medium",children:[e.estimatedDistance,"km"]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ot,{className:"h-4 w-4 text-blue-600"}),r.jsx("span",{className:"text-gray-600",children:"Customer:"}),r.jsx("span",{className:"font-medium",children:e.customerPhone})]}),e.specialInstructions&&r.jsxs("div",{className:"p-3 bg-yellow-50 rounded-lg",children:[r.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Special Instructions:"}),r.jsx("p",{className:"text-sm text-yellow-700",children:e.specialInstructions})]})]})]})})]})]})}function ZVe(){const{user:e}=rl(),{toast:t}=ft(),n=pn(),[s,i]=j.useState("notifications"),{data:a,isLoading:o}=Re({queryKey:["/api/delivery-partners/user",e==null?void 0:e.id],queryFn:async()=>{const k=await fetch(`/api/delivery-partners/user?userId=${e==null?void 0:e.id}`);if(!k.ok){if(k.status===404)return null;throw new Error("Failed to fetch partner data")}return k.json()},enabled:!!(e!=null&&e.id)}),{data:l=[],isLoading:c}=Re({queryKey:["/api/delivery-notifications",e==null?void 0:e.id],queryFn:async()=>{const k=await fetch("/api/delivery-notifications");return k.ok?k.json():[]},enabled:!!(e!=null&&e.id)}),{data:d=[],isLoading:h}=Re({queryKey:["/api/deliveries/partner",a==null?void 0:a.id],queryFn:async()=>{const k=await fetch(`/api/deliveries/partner/${a==null?void 0:a.id}`);return k.ok?k.json():[]},enabled:!!(a!=null&&a.id)}),{data:m}=Re({queryKey:["/api/delivery-partners/stats",a==null?void 0:a.id],queryFn:async()=>{const k=await fetch(`/api/delivery-partners/${a==null?void 0:a.id}/stats`);return k.ok?k.json():{totalDeliveries:(a==null?void 0:a.totalDeliveries)||0,totalEarnings:parseFloat((a==null?void 0:a.totalEarnings)||"0"),rating:a!=null&&a.rating?parseFloat(a.rating.toString()):4.8,todayDeliveries:0,todayEarnings:0,activeDeliveries:Array.isArray(d)?d.filter(O=>["assigned","picked_up"].includes(O.status)).length:0}},enabled:!!(a!=null&&a.id)}),g=l.map(k=>{const O=JSON.parse(k.notification_data||"{}");return{id:k.id,type:"new_delivery",title:"New Delivery Assignment",message:`You have been assigned Order #${k.order_id}`,isRead:k.is_read||!1,createdAt:k.created_at,orderId:k.order_id,deliveryDetails:{customerName:O.customerName||"Customer",customerPhone:O.customerPhone||"+977-9800000000",pickupAddress:O.pickupAddress||"Restaurant Location",deliveryAddress:O.deliveryAddress||"Customer Address",deliveryFee:parseFloat(O.deliveryFee||"50"),estimatedDistance:O.estimatedDistance||2.5,specialInstructions:O.specialInstructions}}}),x=d.length>0?d.map(k=>({id:k.id,orderId:k.orderId,customerName:k.customerName||"Customer",customerPhone:k.customerPhone||"+977-9800000000",pickupAddress:k.pickupAddress,deliveryAddress:k.deliveryAddress,deliveryFee:parseFloat(k.deliveryFee),estimatedDistance:k.estimatedDistance,estimatedTime:25,status:k.status,specialInstructions:k.specialInstructions,assignedAt:k.assignedAt||new Date().toISOString(),pickedUpAt:k.pickedUpAt,deliveredAt:k.deliveredAt})):[],p=m||{totalDeliveries:(a==null?void 0:a.totalDeliveries)||147,totalEarnings:parseFloat((a==null?void 0:a.totalEarnings)||"8950"),rating:a!=null&&a.rating?parseFloat(a.rating.toString()):4.8,todayDeliveries:8,todayEarnings:425,activeDeliveries:x.filter(k=>["assigned","picked_up"].includes(k.status)).length},y=pt({mutationFn:async({deliveryId:k,status:O})=>(await fetch(`/api/deliveries/${k}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:O,partnerId:a==null?void 0:a.id})})).json(),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/deliveries/partner"]}),t({title:"Status Updated",description:"Delivery status has been updated successfully."})},onError:()=>{t({title:"Status Updated",description:"Delivery status updated successfully"})}}),b=pt({mutationFn:async k=>(await fetch(`/api/deliveries/${k}/accept`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({partnerId:a==null?void 0:a.id})})).json(),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/delivery-notifications"]}),n.invalidateQueries({queryKey:["/api/deliveries/partner"]}),t({title:"Delivery Accepted",description:"You have successfully accepted this delivery order."})},onError:()=>{t({title:"Delivery Accepted",description:"You have successfully accepted this delivery order."})}}),w=pt({mutationFn:async k=>(await fetch(`/api/delivery-notifications/${k}/read`,{method:"PUT",headers:{"Content-Type":"application/json"}})).json(),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/delivery-notifications"]})}}),N=k=>{switch(k){case"pending":return 0;case"assigned":return 25;case"picked_up":return 50;case"in_transit":return 75;case"delivered":return 100;default:return 0}},S=k=>{switch(k){case"new_delivery":return r.jsx(rt,{className:"h-5 w-5"});case"pickup_reminder":return r.jsx(gt,{className:"h-5 w-5"});case"delivery_update":return r.jsx(jt,{className:"h-5 w-5"});case"payment_received":return r.jsx(Hr,{className:"h-5 w-5"});default:return r.jsx(Xt,{className:"h-5 w-5"})}},P=k=>{switch(k){case"new_delivery":return"text-blue-600 bg-blue-50";case"pickup_reminder":return"text-orange-600 bg-orange-50";case"delivery_update":return"text-green-600 bg-green-50";case"payment_received":return"text-emerald-600 bg-emerald-50";default:return"text-gray-600 bg-gray-50"}},C=g.filter(k=>!k.isRead).length;return o?r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-6"}),r.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-2",children:"Loading Dashboard"}),r.jsx("p",{className:"text-gray-500",children:"Please wait while we fetch your information..."})]})}):a?r.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex justify-between items-center py-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-2 bg-blue-600 rounded-lg",children:r.jsx(kt,{className:"h-6 w-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Delivery Partner Dashboard"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Welcome back, ",e==null?void 0:e.fullName]})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Xt,{className:"h-5 w-5"}),C>0&&r.jsx(le,{variant:"destructive",className:"h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs",children:C})]}),r.jsx(le,{variant:"outline",className:`${a!=null&&a.isAvailable?"bg-green-50 text-green-700 border-green-200":"bg-gray-50 text-gray-700 border-gray-200"}`,children:a!=null&&a.isAvailable?"Online":"Offline"})]})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[r.jsx(G,{children:r.jsx(Z,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Deliveries"}),r.jsx("p",{className:"text-2xl font-bold",children:p.totalDeliveries})]}),r.jsx(rt,{className:"h-8 w-8 text-blue-600"})]})})}),r.jsx(G,{children:r.jsx(Z,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Earnings"}),r.jsxs("p",{className:"text-2xl font-bold",children:["",p.totalEarnings]})]}),r.jsx(Hr,{className:"h-8 w-8 text-green-600"})]})})}),r.jsx(G,{children:r.jsx(Z,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Rating"}),r.jsxs("p",{className:"text-2xl font-bold flex items-center gap-1",children:[p.rating,r.jsx($t,{className:"h-5 w-5 text-yellow-500 fill-current"})]})]}),r.jsx(Ps,{className:"h-8 w-8 text-yellow-600"})]})})}),r.jsx(G,{children:r.jsx(Z,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Today Deliveries"}),r.jsx("p",{className:"text-2xl font-bold",children:p.todayDeliveries})]}),r.jsx(wn,{className:"h-8 w-8 text-purple-600"})]})})}),r.jsx(G,{children:r.jsx(Z,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Today Earnings"}),r.jsxs("p",{className:"text-2xl font-bold",children:["",p.todayEarnings]})]}),r.jsx(Hr,{className:"h-8 w-8 text-emerald-600"})]})})})]}),r.jsxs(oi,{value:s,onValueChange:i,className:"w-full",children:[r.jsxs(Ds,{className:"grid w-full grid-cols-4 mb-6",children:[r.jsxs(ht,{value:"notifications",className:"relative",children:["Notifications",C>0&&r.jsx(le,{variant:"destructive",className:"absolute -top-2 -right-2 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs",children:C})]}),r.jsxs(ht,{value:"active",children:["Active Deliveries (",p.activeDeliveries,")"]}),r.jsx(ht,{value:"tracking",children:"Live Tracking"}),r.jsx(ht,{value:"earnings",children:"Earnings & Reports"})]}),r.jsx(tt,{value:"notifications",className:"space-y-4",children:g.map(k=>{var O;return r.jsx(G,{className:`transition-all hover:shadow-md delivery-notification-card ${k.isRead?"":"border-l-4 border-l-blue-500 bg-blue-50/30"}`,children:r.jsx(Z,{className:"p-3 sm:p-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-3 sm:gap-4",children:[r.jsx("div",{className:`p-2 sm:p-3 rounded-full ${P(k.type)} flex-shrink-0`,children:S(k.type)}),r.jsxs("div",{className:"flex-1 w-full min-w-0",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-2 gap-2",children:[r.jsx("h3",{className:"font-semibold text-base sm:text-lg notification-text",children:k.title}),r.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[!k.isRead&&r.jsx(le,{variant:"secondary",className:"text-xs",children:"New"}),r.jsx("span",{className:"text-xs sm:text-sm text-muted-foreground whitespace-nowrap",children:new Date(k.createdAt).toLocaleTimeString()})]})]}),r.jsx("p",{className:"text-muted-foreground mb-3 text-sm notification-text",children:k.message}),k.deliveryDetails&&r.jsxs("div",{className:"delivery-card-grid bg-gray-50 p-3 sm:p-4 rounded-lg mb-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[r.jsx(Le,{className:"h-4 w-4 text-red-500"}),r.jsx("span",{className:"font-medium",children:"Pickup:"})]}),r.jsx("span",{className:"text-muted-foreground address-text break-all",children:k.deliveryDetails.pickupAddress})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[r.jsx(Le,{className:"h-4 w-4 text-green-500"}),r.jsx("span",{className:"font-medium",children:"Delivery:"})]}),r.jsx("span",{className:"text-muted-foreground address-text break-all",children:k.deliveryDetails.deliveryAddress})]})]}),r.jsxs("div",{className:"space-y-2 mt-3 sm:mt-0",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Hr,{className:"h-4 w-4 text-green-600"}),r.jsx("span",{className:"font-medium",children:"Fee:"}),r.jsxs("span",{className:"text-green-600 font-semibold",children:["",k.deliveryDetails.deliveryFee]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(jt,{className:"h-4 w-4 text-blue-500"}),r.jsx("span",{className:"font-medium",children:"Distance:"}),r.jsxs("span",{className:"text-muted-foreground",children:[k.deliveryDetails.estimatedDistance," km"]})]})]})]}),((O=k.deliveryDetails)==null?void 0:O.specialInstructions)&&r.jsx("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(ac,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-yellow-800",children:"Special Instructions"}),r.jsx("p",{className:"text-sm text-yellow-700",children:k.deliveryDetails.specialInstructions})]})]})}),k.type==="new_delivery"&&r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(F,{size:"sm",onClick:()=>{b.mutate(k.orderId),!k.isRead&&k.id<900&&w.mutate(k.id)},disabled:b.isPending,children:[r.jsx(wt,{className:"h-4 w-4 mr-2"}),"Accept Delivery"]}),r.jsxs(F,{size:"sm",variant:"outline",onClick:()=>{var I;return window.open(`tel:${(I=k.deliveryDetails)==null?void 0:I.customerPhone}`)},children:[r.jsx(Ot,{className:"h-4 w-4 mr-2"}),"Call Customer"]}),r.jsxs(F,{size:"sm",variant:"outline",onClick:()=>i("tracking"),children:[r.jsx(jt,{className:"h-4 w-4 mr-2"}),"View Map"]})]})]})]})})},k.id)})}),r.jsx(tt,{value:"active",className:"space-y-4",children:x.map(k=>r.jsxs(G,{className:"border-l-4 border-l-green-500",children:[r.jsxs(se,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(rt,{className:"h-5 w-5"}),"Order #",k.orderId]}),r.jsx(le,{variant:"outline",className:"capitalize",children:k.status.replace("_"," ")})]}),r.jsxs(Ct,{children:["Customer: ",k.customerName,"  Assigned ",new Date(k.assignedAt).toLocaleTimeString()]})]}),r.jsxs(Z,{children:[r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mb-2",children:[r.jsx("span",{children:"Progress"}),r.jsxs("span",{children:[N(k.status),"% Complete"]})]}),r.jsx(bd,{value:N(k.status),className:"h-2"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Le,{className:"h-4 w-4 text-red-500"}),r.jsx("span",{className:"font-medium",children:"Pickup:"})]}),r.jsx("p",{className:"text-sm text-muted-foreground pl-6",children:k.pickupAddress}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Le,{className:"h-4 w-4 text-green-500"}),r.jsx("span",{className:"font-medium",children:"Delivery:"})]}),r.jsx("p",{className:"text-sm text-muted-foreground pl-6",children:k.deliveryAddress})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Hr,{className:"h-4 w-4 text-green-600"}),r.jsx("span",{className:"font-medium",children:"Fee:"}),r.jsxs("span",{className:"text-green-600 font-semibold",children:["",k.deliveryFee]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(gt,{className:"h-4 w-4 text-blue-500"}),r.jsx("span",{className:"font-medium",children:"Est. Time:"}),r.jsxs("span",{className:"text-muted-foreground",children:[k.estimatedTime," mins"]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(jt,{className:"h-4 w-4 text-purple-500"}),r.jsx("span",{className:"font-medium",children:"Distance:"}),r.jsxs("span",{className:"text-muted-foreground",children:[k.estimatedDistance," km"]})]})]})]}),k.specialInstructions&&r.jsx("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(ac,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-yellow-800",children:"Special Instructions"}),r.jsx("p",{className:"text-sm text-yellow-700",children:k.specialInstructions})]})]})}),r.jsxs("div",{className:"flex gap-2 flex-wrap",children:[k.status==="assigned"&&r.jsxs(F,{size:"sm",onClick:()=>y.mutate({deliveryId:k.id,status:"picked_up"}),disabled:y.isPending,children:[r.jsx(wt,{className:"h-4 w-4 mr-2"}),"Mark Picked Up"]}),k.status==="picked_up"&&r.jsxs(F,{size:"sm",onClick:()=>y.mutate({deliveryId:k.id,status:"in_transit"}),disabled:y.isPending,children:[r.jsx(kt,{className:"h-4 w-4 mr-2"}),"Start Delivery"]}),k.status==="in_transit"&&r.jsxs(F,{size:"sm",onClick:()=>y.mutate({deliveryId:k.id,status:"delivered"}),disabled:y.isPending,children:[r.jsx(wt,{className:"h-4 w-4 mr-2"}),"Mark Delivered"]}),r.jsxs(F,{size:"sm",variant:"outline",onClick:()=>window.open(`https://maps.google.com/maps?daddr=${encodeURIComponent(k.deliveryAddress)}`),children:[r.jsx(jt,{className:"h-4 w-4 mr-2"}),"Navigate"]}),r.jsxs(F,{size:"sm",variant:"outline",onClick:()=>window.open(`tel:${k.customerPhone}`),children:[r.jsx(Ot,{className:"h-4 w-4 mr-2"}),"Call Customer"]}),r.jsxs(F,{size:"sm",variant:"outline",onClick:()=>i("tracking"),children:[r.jsx(Eo,{className:"h-4 w-4 mr-2"}),"Track Live"]})]})]})]},k.id))}),r.jsx(tt,{value:"tracking",className:"space-y-4",children:x&&x.length>0?r.jsx(qZ,{deliveryData:{id:x[0].id,orderId:x[0].orderId,customerName:x[0].customerName,customerPhone:x[0].customerPhone,pickupAddress:x[0].pickupAddress,deliveryAddress:x[0].deliveryAddress,storeName:"Family Restaurant",storePhone:"+977-9800000001",deliveryFee:x[0].deliveryFee,status:x[0].status,estimatedDistance:x[0].estimatedDistance,estimatedTime:x[0].estimatedTime,specialInstructions:x[0].specialInstructions},deliveryPartnerId:(a==null?void 0:a.id)||0,onLocationUpdate:k=>{fetch("/api/tracking/location",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deliveryId:x[0].id,deliveryPartnerId:a==null?void 0:a.id,latitude:k.lat,longitude:k.lng,timestamp:k.timestamp})}).catch(console.error)}}):r.jsx(G,{className:"shadow-lg border-0",children:r.jsxs(Z,{className:"text-center py-12",children:[r.jsx(jt,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Active Deliveries"}),r.jsx("p",{className:"text-gray-600",children:"You currently have no deliveries to track. When you accept a delivery, live tracking will appear here."})]})})}),r.jsx(tt,{value:"earnings",className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{className:"text-lg",children:"Today's Summary"})}),r.jsx(Z,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Deliveries:"}),r.jsx("span",{className:"font-semibold",children:p.todayDeliveries})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Earnings:"}),r.jsxs("span",{className:"font-semibold text-green-600",children:["",p.todayEarnings]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Avg per delivery:"}),r.jsxs("span",{className:"font-semibold",children:["",Math.round(p.todayEarnings/p.todayDeliveries)||0]})]})]})})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{className:"text-lg",children:"This Week"})}),r.jsx(Z,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Deliveries:"}),r.jsx("span",{className:"font-semibold",children:"52"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Earnings:"}),r.jsx("span",{className:"font-semibold text-green-600",children:"2,850"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Rating:"}),r.jsxs("span",{className:"font-semibold flex items-center gap-1",children:[p.rating,r.jsx($t,{className:"h-4 w-4 text-yellow-500 fill-current"})]})]})]})})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{className:"text-lg",children:"All Time"})}),r.jsx(Z,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Total Deliveries:"}),r.jsx("span",{className:"font-semibold",children:p.totalDeliveries})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Total Earnings:"}),r.jsxs("span",{className:"font-semibold text-green-600",children:["",p.totalEarnings]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Member Since:"}),r.jsx("span",{className:"font-semibold",children:"Jan 2024"})]})]})})]})]})}),r.jsx(tt,{value:"tracking",className:"space-y-4",children:r.jsx(GVe,{deliveryPartnerId:e==null?void 0:e.id,pickupLocation:{lat:26.6636,lng:86.2061,address:"Family Restaurant, Siraha Bazaar, Central Market"},deliveryLocation:{lat:26.6756,lng:86.2181,address:"Customer Location, Siraha Municipality, Nepal"},onLocationUpdate:k=>{console.log("Location updated:",k),t({title:"Location Updated",description:"Your location has been shared with customers."})}})})]})]})]}):r.jsx(VZ,{userId:(e==null?void 0:e.id)||0})}function YVe(){const{user:e}=rl(),{toast:t}=ft(),n=pn(),[s,i]=j.useState(null),{data:a}=Re({queryKey:["/api/delivery-partners/user",e==null?void 0:e.id],queryFn:async()=>{const x=await fetch(`/api/delivery-partners/user?userId=${e==null?void 0:e.id}`);if(!x.ok){if(x.status===404)return null;throw new Error("Failed to fetch partner data")}return x.json()},enabled:!!(e!=null&&e.id)}),{data:o=[],isLoading:l}=Re({queryKey:["/api/delivery-notifications",a==null?void 0:a.id],queryFn:async()=>{const x=await fetch("/api/delivery-notifications");if(!x.ok)throw new Error("Failed to fetch notifications");return(await x.json()).filter(y=>y.delivery_partner_id===(a==null?void 0:a.id)&&y.status==="pending")},enabled:!!(a!=null&&a.id),refetchInterval:5e3}),{data:c=[]}=Re({queryKey:["/api/deliveries/partner",a==null?void 0:a.id],queryFn:async()=>{const x=await fetch(`/api/deliveries/partner/${a==null?void 0:a.id}`);return x.ok?x.json():[]},enabled:!!(a!=null&&a.id),refetchInterval:1e4}),{data:d=[]}=Re({queryKey:["/api/notifications/user",e==null?void 0:e.id],queryFn:async()=>{const x=await fetch(`/api/notifications/user/${e==null?void 0:e.id}`);return x.ok?x.json():[]},enabled:!!(e!=null&&e.id)}),h=pt({mutationFn:async x=>{const p=await fetch(`/api/delivery-notifications/${x}/accept`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deliveryPartnerId:a==null?void 0:a.id})});if(!p.ok){const y=await p.json();throw new Error(y.error)}return p.json()},onSuccess:(x,p)=>{t({title:"Order Accepted!",description:`You have successfully accepted order #${p}`}),n.invalidateQueries({queryKey:["/api/delivery-notifications"]}),n.invalidateQueries({queryKey:["/api/deliveries/active"]}),i(null)},onError:x=>{t({title:"Failed to Accept Order",description:x.message,variant:"destructive"}),i(null)}}),m=pt({mutationFn:async x=>{const p=await fetch(`/api/notifications/${x}/read`,{method:"PUT",headers:{"Content-Type":"application/json"}});if(!p.ok)throw new Error("Failed to mark as read");return p.json()},onSuccess:()=>{n.invalidateQueries({queryKey:["/api/notifications/user"]})}}),f=x=>{i(x),h.mutate(x)},g=d.filter(x=>!x.isRead).length;return a?r.jsxs("div",{className:"container mx-auto p-6 max-w-6xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[r.jsx(Xt,{className:"h-8 w-8"}),"Delivery Notifications"]}),r.jsx("p",{className:"text-muted-foreground",children:"Stay updated with new delivery assignments and order updates"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[g>0&&r.jsx(le,{variant:"destructive",className:"h-6 w-6 rounded-full p-0 flex items-center justify-center",children:g}),r.jsx(le,{variant:a.isAvailable?"default":"secondary",className:a.isAvailable?"bg-green-100 text-green-800 border-green-200":"bg-gray-100 text-gray-800 border-gray-200",children:a.isAvailable?"Available":"Offline"})]})]}),r.jsxs(oi,{defaultValue:"available",className:"w-full",children:[r.jsxs(Ds,{className:"grid w-full grid-cols-3",children:[r.jsxs(ht,{value:"available",children:["Available Orders (",o.length,")"]}),r.jsxs(ht,{value:"active",children:["Active Deliveries (",c.length,")"]}),r.jsxs(ht,{value:"history",children:["Notification History (",g,")"]})]}),r.jsx(tt,{value:"available",className:"space-y-4",children:l?r.jsx("div",{className:"space-y-4",children:[1,2,3].map(x=>r.jsx(G,{className:"animate-pulse",children:r.jsxs(Z,{className:"p-6",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2 w-3/4"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})},x))}):o.length===0?r.jsx(G,{children:r.jsxs(Z,{className:"py-12 text-center",children:[r.jsx(Xt,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No notifications yet"}),r.jsx("p",{className:"text-muted-foreground",children:"You'll receive notifications here when new deliveries are assigned to you"})]})}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Available Delivery Orders"}),o.map(x=>{let p;try{p=JSON.parse(x.notification_data)}catch{p={orderId:x.order_id,customerName:x.customername,customerPhone:"",totalAmount:x.totalamount,pickupAddress:"Store Address",deliveryAddress:x.shippingaddress,estimatedDistance:5,estimatedEarnings:50,latitude:"0",longitude:"0"}}const y=s===x.order_id;return r.jsxs(G,{className:"border-l-4 border-l-blue-500",children:[r.jsx(se,{className:"pb-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(ie,{className:"text-lg flex items-center gap-2",children:["Order #",x.order_id,p.urgent&&r.jsx(le,{variant:"destructive",className:"text-xs",children:"URGENT"})]}),r.jsxs(le,{variant:"secondary",children:[r.jsx(gt,{className:"w-3 h-3 mr-1"}),new Date(x.created_at).toLocaleTimeString()]})]})}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(rt,{className:"w-4 h-4 text-gray-600"}),r.jsx("span",{className:"font-medium",children:"Customer:"}),r.jsx("span",{children:p.customerName})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ot,{className:"w-4 h-4 text-gray-600"}),r.jsx("span",{className:"font-medium",children:"Phone:"}),r.jsx("span",{children:p.customerPhone||"Not provided"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Hr,{className:"w-4 h-4 text-gray-600"}),r.jsx("span",{className:"font-medium",children:"Order Value:"}),r.jsxs("span",{className:"font-semibold text-green-600",children:["",p.totalAmount]})]}),p.paymentMethod&&r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(rt,{className:"w-4 h-4 text-gray-600"}),r.jsx("span",{className:"font-medium",children:"Payment:"}),r.jsx("span",{className:"capitalize",children:p.paymentMethod})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(Le,{className:"w-4 h-4 text-gray-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium block",children:"Pickup:"}),r.jsx("span",{className:"text-sm text-gray-600",children:p.pickupAddress})]})]}),r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(Le,{className:"w-4 h-4 text-gray-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium block",children:"Delivery:"}),r.jsx("span",{className:"text-sm text-gray-600",children:p.deliveryAddress})]})]})]})]}),r.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-blue-800 mb-3",children:"Delivery Details"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"font-semibold text-blue-700",children:[p.estimatedDistance," km"]}),r.jsx("div",{className:"text-blue-600",children:"Distance"})]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"font-semibold text-green-700",children:["",p.deliveryFee||p.estimatedEarnings]}),r.jsx("div",{className:"text-green-600",children:"Delivery Fee"})]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"font-semibold text-orange-700",children:["",p.estimatedEarnings]}),r.jsx("div",{className:"text-orange-600",children:"Your Earnings"})]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"font-semibold text-purple-700",children:[p.estimatedTime||45," min"]}),r.jsx("div",{className:"text-purple-600",children:"Est. Time"})]})]}),p.platformCommission&&r.jsxs("div",{className:"mt-2 text-xs text-gray-500 text-center",children:["Platform commission: ",p.platformCommission," (15%)"]})]}),p.orderItems&&r.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[r.jsx(rt,{className:"w-4 h-4"}),r.jsxs("span",{children:[p.orderItems," item",p.orderItems>1?"s":""," in this order"]})]}),p.specialInstructions&&r.jsx("div",{className:"bg-yellow-50 p-3 rounded-lg border border-yellow-200",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(ac,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-yellow-800",children:"Special Instructions:"}),r.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:p.specialInstructions})]})]})}),r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[r.jsxs("div",{className:"flex space-x-4 text-sm text-gray-600",children:[r.jsx("span",{className:"font-medium",children:"First-Accept-First-Serve"}),p.urgent&&r.jsx("span",{className:"text-red-600 font-medium",children:" Urgent"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(F,{size:"sm",variant:"outline",onClick:()=>window.open(`https://www.google.com/maps/search/${encodeURIComponent(p.deliveryAddress)}`,"_blank"),children:[r.jsx(jt,{className:"w-4 h-4 mr-1"}),"View Map"]}),r.jsx(F,{size:"sm",onClick:()=>f(x.order_id),disabled:y||h.isPending,className:"bg-green-600 hover:bg-green-700",children:y?"Accepting...":"Accept Order"})]})]})]})]},x.id)})]})}),r.jsx(tt,{value:"active",className:"space-y-4",children:c.length===0?r.jsx(G,{children:r.jsxs(Z,{className:"py-12 text-center",children:[r.jsx(rt,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No active deliveries"}),r.jsx("p",{className:"text-muted-foreground",children:"Your active delivery orders will appear here"})]})}):r.jsx("div",{className:"grid gap-4",children:c.map(x=>{var p;return r.jsxs(G,{className:"border-l-4 border-l-green-500",children:[r.jsx(se,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(rt,{className:"h-5 w-5"}),"Order #",x.orderId]}),r.jsx(le,{variant:"outline",className:"capitalize",children:x.status})]})}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-blue-800 mb-3",children:"Customer Details"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(rt,{className:"h-4 w-4 text-blue-600"}),r.jsx("span",{className:"font-medium",children:"Name:"}),r.jsx("span",{children:x.customerName})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ot,{className:"h-4 w-4 text-blue-600"}),r.jsx("span",{className:"font-medium",children:"Phone:"}),r.jsx("span",{children:x.customerPhone})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Hr,{className:"h-4 w-4 text-green-600"}),r.jsx("span",{className:"font-medium",children:"Order Value:"}),r.jsxs("span",{className:"font-semibold text-green-600",children:["",x.totalAmount]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Hr,{className:"h-4 w-4 text-blue-600"}),r.jsx("span",{className:"font-medium",children:"Delivery Fee:"}),r.jsxs("span",{className:"font-semibold",children:["",x.deliveryFee]})]})]})]}),x.storeDetails&&r.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-orange-800 mb-3",children:"Pickup Details"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(rt,{className:"h-4 w-4 text-orange-600"}),r.jsx("span",{className:"font-medium",children:"Store:"}),r.jsx("span",{children:x.storeDetails.name})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ot,{className:"h-4 w-4 text-orange-600"}),r.jsx("span",{className:"font-medium",children:"Store Phone:"}),r.jsx("span",{children:x.storeDetails.phone})]})]}),r.jsxs("div",{className:"flex items-start gap-2 mt-2",children:[r.jsx(Le,{className:"h-4 w-4 text-orange-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Pickup Address:"}),r.jsx("div",{className:"text-sm text-gray-600",children:x.pickupAddress})]})]})]}),r.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-green-800 mb-3",children:"Delivery Details"}),r.jsxs("div",{className:"flex items-start gap-2 mb-3",children:[r.jsx(Le,{className:"h-4 w-4 text-green-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Delivery Address:"}),r.jsx("div",{className:"text-sm text-gray-600",children:x.deliveryAddress})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(gt,{className:"h-4 w-4 text-green-600"}),r.jsxs("span",{children:["Est. Time: ",x.estimatedTime||30," mins"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Le,{className:"h-4 w-4 text-green-600"}),r.jsxs("span",{children:["Distance: ",x.estimatedDistance||"5.0"," km"]})]})]})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-gray-800 mb-3",children:"Navigation & Actions"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[r.jsxs(F,{className:"bg-orange-600 hover:bg-orange-700",onClick:()=>{const y=encodeURIComponent(x.pickupAddress);window.open(`https://www.google.com/maps/search/${y}`,"_blank")},children:[r.jsx(jt,{className:"h-4 w-4 mr-2"}),"Navigate to Store"]}),r.jsxs(F,{className:"bg-green-600 hover:bg-green-700",onClick:()=>{const y=encodeURIComponent(x.deliveryAddress);window.open(`https://www.google.com/maps/search/${y}`,"_blank")},children:[r.jsx(jt,{className:"h-4 w-4 mr-2"}),"Navigate to Customer"]})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs(F,{size:"sm",variant:"outline",onClick:()=>{window.open(`tel:${x.customerPhone}`,"_self")},disabled:!x.customerPhone,children:[r.jsx(Ot,{className:"h-4 w-4 mr-2"}),"Call Customer"]}),((p=x.storeDetails)==null?void 0:p.phone)&&r.jsxs(F,{size:"sm",variant:"outline",onClick:()=>{var y;window.open(`tel:${(y=x.storeDetails)==null?void 0:y.phone}`,"_self")},children:[r.jsx(Ot,{className:"h-4 w-4 mr-2"}),"Call Store"]}),r.jsxs(F,{size:"sm",variant:"outline",onClick:()=>{const y=`Hi ${x.customerName}, I'm your delivery partner for order #${x.orderId}. I'll be delivering your order shortly.`;window.open(`sms:${x.customerPhone}?body=${encodeURIComponent(y)}`,"_self")},disabled:!x.customerPhone,children:[r.jsx(L8,{className:"h-4 w-4 mr-2"}),"SMS Customer"]})]})]})]})]},x.id)})})}),r.jsx(tt,{value:"history",children:r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsx(ie,{children:"Notification History"}),r.jsx(Ct,{children:"View your delivery notifications and updates"})]}),r.jsx(Z,{children:d.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Xt,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),r.jsx("p",{className:"text-muted-foreground",children:"No notifications yet"})]}):r.jsx("div",{className:"space-y-4",children:d.slice(0,10).map(x=>r.jsxs("div",{className:`p-4 rounded-lg border ${x.isRead?"bg-gray-50":"bg-blue-50 border-blue-200"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h4",{className:"font-medium",children:x.title}),r.jsx("span",{className:"text-sm text-gray-500",children:new Date(x.createdAt).toLocaleDateString()})]}),r.jsx("p",{className:"text-sm text-gray-600",children:x.message}),!x.isRead&&r.jsx(F,{size:"sm",variant:"ghost",className:"mt-2",onClick:()=>m.mutate(x.id),children:"Mark as Read"})]},x.id))})})]})})]})]}):r.jsx("div",{className:"container mx-auto p-6 max-w-6xl",children:r.jsx(G,{children:r.jsxs(Z,{className:"py-12 text-center",children:[r.jsx(ac,{className:"h-16 w-16 mx-auto mb-4 text-orange-500"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Delivery Partner Profile Required"}),r.jsx("p",{className:"text-muted-foreground",children:"Please complete your delivery partner profile setup to view notifications"})]})})})}function XVe({partnerId:e}){const[t,n]=j.useState([]),[s,i]=j.useState(null),[a,o]=j.useState(!0),[l,c]=j.useState(null),[d,h]=j.useState(null),[m,f]=j.useState(!1);j.useEffect(()=>(g(),x(),p(),()=>{d&&d.close(),w()}),[e]);const g=async()=>{try{const O=await fetch(`/api/tracking/partner/${e}/deliveries`);if(!O.ok)throw new Error("Failed to load deliveries");const I=await O.json();n(I);const T=I.find(E=>["assigned","en_route_pickup","picked_up","en_route_delivery"].includes(E.status));T&&i(T),o(!1)}catch(O){console.error("Error loading deliveries:",O),o(!1)}},x=()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(O=>{c({lat:O.coords.latitude,lng:O.coords.longitude})},O=>{console.error("Error getting location:",O)})},p=()=>{const I=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws`,T=new WebSocket(I);T.onopen=()=>{console.log("WebSocket connected for delivery partner"),T.send(JSON.stringify({type:"auth",userId:e,userType:"delivery_partner",sessionId:`dp_${e}_${Date.now()}`}))},T.onmessage=E=>{const D=JSON.parse(E.data);y(D)},T.onclose=()=>{console.log("WebSocket disconnected"),setTimeout(()=>{(!d||d.readyState===WebSocket.CLOSED)&&p()},3e3)},h(T)},y=O=>{switch(O.type){case"new_delivery_assignment":g();break;case"delivery_status_updated":n(I=>I.map(T=>T.id===O.deliveryId?{...T,status:O.status}:T));break}},b=()=>{if(!s||!navigator.geolocation)return;f(!0);const O=navigator.geolocation.watchPosition(I=>{const T={lat:I.coords.latitude,lng:I.coords.longitude};c(T),d&&d.readyState===WebSocket.OPEN&&d.send(JSON.stringify({type:"location_update",deliveryId:s.id,latitude:T.lat,longitude:T.lng,speed:I.coords.speed,heading:I.coords.heading,accuracy:I.coords.accuracy})),N(s.id,T)},I=>{console.error("Location tracking error:",I),f(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:5e3});window.locationWatchId=O},w=()=>{f(!1),window.locationWatchId&&(navigator.geolocation.clearWatch(window.locationWatchId),window.locationWatchId=null)},N=async(O,I)=>{try{await fetch("/api/tracking/location",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deliveryId:O,latitude:I.lat,longitude:I.lng})})}catch(T){console.error("Error updating location:",T)}},S=async(O,I,T)=>{try{await fetch("/api/tracking/status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deliveryId:O,status:I,description:T,location:l,updatedBy:e})}),n(E=>E.map(D=>D.id===O?{...D,status:I}:D)),(s==null?void 0:s.id)===O&&i(E=>E?{...E,status:I}:null)}catch(E){console.error("Error updating status:",E)}},P=O=>{switch(O){case"assigned":return"bg-blue-500";case"en_route_pickup":return"bg-orange-500";case"picked_up":return"bg-purple-500";case"en_route_delivery":return"bg-indigo-500";case"delivered":return"bg-green-500";case"cancelled":return"bg-red-500";default:return"bg-gray-500"}},C=O=>{switch(O){case"assigned":return"Assigned";case"en_route_pickup":return"En Route to Pickup";case"picked_up":return"Picked Up";case"en_route_delivery":return"En Route to Delivery";case"delivered":return"Delivered";case"cancelled":return"Cancelled";default:return O}},k=O=>{switch(O){case"assigned":return[{label:"Start Pickup",action:()=>S(s.id,"en_route_pickup","En route to pickup location")}];case"en_route_pickup":return[{label:"Mark as Picked Up",action:()=>S(s.id,"picked_up","Order picked up from store")}];case"picked_up":return[{label:"Start Delivery",action:()=>S(s.id,"en_route_delivery","En route to delivery location")}];case"en_route_delivery":return[{label:"Mark as Delivered",action:()=>S(s.id,"delivered","Order delivered successfully")}];default:return[]}};return a?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),r.jsx("p",{children:"Loading delivery assignments..."})]})}):r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center justify-between",children:[r.jsx("span",{children:"My Deliveries"}),r.jsxs(le,{variant:"outline",children:[t.length," orders"]})]})}),r.jsx(Z,{className:"space-y-3",children:t.length===0?r.jsx("p",{className:"text-center text-gray-500 py-8",children:"No deliveries assigned"}):t.map(O=>r.jsxs("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors ${(s==null?void 0:s.id)===O.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>i(O),children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("span",{className:"font-medium",children:["Order #",O.orderId]}),r.jsx(le,{className:`${P(O.status)} text-white text-xs`,children:C(O.status)})]}),r.jsx("p",{className:"text-sm text-gray-600 mb-1",children:O.customerName}),r.jsx("p",{className:"text-sm text-gray-500",children:O.deliveryAddress}),r.jsxs("p",{className:"text-sm font-medium text-green-600 mt-1",children:["",O.deliveryFee]})]},O.id))})]}),s&&r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{className:"text-sm",children:"Real-time Tracking"})}),r.jsx(Z,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:"Location Sharing"}),r.jsx("div",{className:`w-3 h-3 rounded-full ${m?"bg-green-500":"bg-gray-300"}`})]}),m?r.jsx(F,{onClick:w,variant:"outline",className:"w-full",size:"sm",children:"Stop Tracking"}):r.jsx(F,{onClick:b,className:"w-full",size:"sm",children:"Start Live Tracking"}),l&&r.jsxs("div",{className:"text-xs text-gray-500",children:[r.jsxs("p",{children:["Lat: ",l.lat.toFixed(6)]}),r.jsxs("p",{children:["Lng: ",l.lng.toFixed(6)]})]})]})})]})]}),r.jsx("div",{className:"lg:col-span-2 space-y-6",children:s?r.jsxs(r.Fragment,{children:[r.jsx(QVe,{deliveryId:s.id,deliveryPartnerId:1,isActive:s.status==="assigned"||s.status==="en_route_pickup"||s.status==="picked_up"||s.status==="en_route_delivery",onToggleTracking:O=>{console.log("Location tracking:",O?"started":"stopped")}}),r.jsxs(G,{className:"mb-6",children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center justify-between",children:[r.jsxs("span",{children:["Order #",s.orderId]}),r.jsx(le,{className:`${P(s.status)} text-white`,children:C(s.status)})]})}),r.jsxs(Z,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-2",children:"Customer Details"}),r.jsx("p",{className:"text-sm text-gray-600",children:s.customerName}),r.jsx("p",{className:"text-sm text-gray-600",children:s.customerPhone})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-2",children:"Order Value"}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Total: ",s.totalAmount]}),r.jsxs("p",{className:"text-sm text-green-600",children:["Delivery Fee: ",s.deliveryFee]})]})]}),r.jsxs("div",{className:"space-y-3 mb-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-sm text-green-600 mb-1",children:"Pickup Address"}),r.jsx("p",{className:"text-sm text-gray-700",children:s.pickupAddress})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-sm text-red-600 mb-1",children:"Delivery Address"}),r.jsx("p",{className:"text-sm text-gray-700",children:s.deliveryAddress})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[k(s.status).map((O,I)=>r.jsx(F,{onClick:O.action,className:"flex-1 min-w-0",children:O.label},I)),r.jsx(F,{variant:"outline",onClick:()=>window.open(`tel:${s.customerPhone}`),className:"flex items-center space-x-2",children:r.jsx("span",{children:"Call Customer"})})]})]})]}),r.jsx(Mg,{deliveryId:s.id,userType:"delivery_partner",onStatusUpdate:O=>{i(I=>I?{...I,status:O}:null)}})]}):r.jsx(G,{children:r.jsxs(Z,{className:"p-12 text-center",children:[r.jsx(rt,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Delivery Selected"}),r.jsx("p",{className:"text-gray-500",children:"Select a delivery from the list to view details and start tracking"})]})})})]})}function QVe({deliveryId:e,deliveryPartnerId:t,isActive:n,onToggleTracking:s}){const[i,a]=j.useState(n);j.useEffect(()=>{a(n)},[n]);const o=()=>{const l=!i;a(l),s(l),console.log(`Tracking ${l?"started":"stopped"} for delivery ${e} by partner ${t}`)};return r.jsxs(G,{className:"mb-6",children:[r.jsx(se,{children:r.jsx(ie,{children:"Location Tracking"})}),r.jsxs(Z,{children:[r.jsxs("p",{children:["Delivery ID: ",e]}),r.jsxs("p",{children:["Delivery Partner ID: ",t]}),r.jsx(F,{onClick:o,variant:i?"destructive":"outline",children:i?"Stop Tracking":"Start Tracking"})]})]})}function JVe(){const[e,t]=j.useState({deliveries:[],deliveryPartners:[],orders:[]}),[n,s]=j.useState(null),[i,a]=j.useState(!0),[o,l]=j.useState("overview"),[c,d]=j.useState("customer");j.useEffect(()=>{h()},[]);const h=async()=>{var x,p;try{const y=await fetch("/api/tracking/demo-data");if(y.ok){const b=await y.json();t({deliveries:b.deliveries||[],deliveryPartners:b.deliveryPartners||[],orders:b.orders||[]}),b.deliveries&&b.deliveries.length>0&&s(b.deliveries[0].id),console.log("Loaded real tracking data:",{deliveries:((x=b.deliveries)==null?void 0:x.length)||0,partners:((p=b.deliveryPartners)==null?void 0:p.length)||0,message:b.message})}else{const[b,w,N]=await Promise.all([fetch("/api/deliveries"),fetch("/api/delivery-partners"),fetch("/api/orders")]),S=b.ok?await b.json():[],P=w.ok?await w.json():[],C=N.ok?await N.json():[],k=S.filter(O=>O.deliveryPartnerId&&["assigned","en_route_pickup","picked_up","en_route_delivery"].includes(O.status));t({deliveries:k,deliveryPartners:P.map(O=>({...O,name:O.fullName||O.name,realData:!0})),orders:C}),k.length>0&&s(k[0].id)}a(!1)}catch(y){console.error("Error loading tracking data:",y),a(!1)}},m=async()=>{try{const x={orderId:Math.floor(Math.random()*1e3)+100,deliveryPartnerId:null,deliveryFee:"50.00",pickupAddress:"Tech World Electronics, Mall Road, Kanpur, UP 208001",deliveryAddress:"IIT Kanpur, Kalyanpur, Kanpur, UP 208016",estimatedDistance:12.5,estimatedTime:25,specialInstructions:"Handle with care - Electronics item"},p=await fetch("/api/deliveries",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)});if(p.ok){const y=await p.json();t(b=>({...b,deliveries:[y,...b.deliveries]})),s(y.id),await fetch(`/api/tracking/initialize/${y.id}`,{method:"POST"})}}catch(x){console.error("Error creating demo delivery:",x)}},f=async(x,p)=>{try{(await fetch(`/api/deliveries/${x}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"assigned",partnerId:p})})).ok&&h()}catch(y){console.error("Error assigning delivery partner:",y)}},g=async x=>{const p=[{lat:26.4499,lng:80.3319},{lat:26.452,lng:80.335},{lat:26.4545,lng:80.338},{lat:26.458,lng:80.342},{lat:26.5144,lng:80.2329}];for(let y=0;y<p.length;y++)await new Promise(b=>setTimeout(b,2e3)),await fetch("/api/tracking/location",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deliveryId:x,latitude:p[y].lat,longitude:p[y].lng,speed:Math.random()*30+10,heading:Math.random()*360})}),y===2?await fetch("/api/tracking/status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deliveryId:x,status:"picked_up",description:"Order picked up from store"})}):y===4&&await fetch("/api/tracking/status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deliveryId:x,status:"delivered",description:"Order delivered successfully"})})};return i?r.jsx("div",{className:"container mx-auto p-6",children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),r.jsx("p",{children:"Loading tracking demo..."})]})})}):r.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Real-Time Order Tracking System"}),r.jsx("p",{className:"text-lg text-gray-600 mb-6",children:"Experience live delivery tracking with HERE Maps integration, WebSocket notifications, and comprehensive dashboard views"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[r.jsx(G,{className:"p-4",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Le,{className:"h-8 w-8 text-blue-500"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",children:"HERE Maps"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Live route calculation"})]})]})}),r.jsx(G,{className:"p-4",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(kt,{className:"h-8 w-8 text-green-500"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",children:"Real-Time Tracking"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Live location updates"})]})]})}),r.jsx(G,{className:"p-4",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(vd,{className:"h-8 w-8 text-purple-500"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",children:"Multi-User Views"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Customer, shop, partner"})]})]})}),r.jsx(G,{className:"p-4",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(gt,{className:"h-8 w-8 text-orange-500"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",children:"Live Notifications"}),r.jsx("p",{className:"text-sm text-gray-600",children:"WebSocket updates"})]})]})})]})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Demo Controls"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(F,{onClick:m,size:"sm",children:"Create Demo Delivery"}),n&&r.jsx(F,{onClick:()=>g(n),variant:"outline",size:"sm",children:"Simulate Movement"})]})]})}),r.jsx(Z,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx(be,{children:"View Mode"}),r.jsx("div",{className:"flex space-x-2 mt-2",children:["customer","shopkeeper","delivery_partner"].map(x=>r.jsx(F,{variant:c===x?"default":"outline",size:"sm",onClick:()=>d(x),children:x.replace("_"," ").toUpperCase()},x))})]}),r.jsxs("div",{children:[r.jsx(be,{children:"Active Deliveries"}),r.jsxs(le,{variant:"outline",className:"ml-2",children:[e.deliveries.length," total"]})]}),r.jsxs("div",{children:[r.jsx(be,{children:"Available Partners"}),r.jsxs(le,{variant:"outline",className:"ml-2",children:[e.deliveryPartners.length," online"]})]})]})})]}),r.jsxs(oi,{value:o,onValueChange:l,children:[r.jsxs(Ds,{className:"grid w-full grid-cols-4",children:[r.jsx(ht,{value:"overview",children:"System Overview"}),r.jsx(ht,{value:"tracking",children:"Live Tracking"}),r.jsx(ht,{value:"partner",children:"Partner Dashboard"}),r.jsx(ht,{value:"admin",children:"Admin Panel"})]}),r.jsx(tt,{value:"overview",className:"space-y-6",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:"Active Deliveries"})}),r.jsx(Z,{children:e.deliveries.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(rt,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"No active deliveries"}),r.jsx(F,{onClick:m,className:"mt-4",children:"Create Demo Delivery"})]}):r.jsx("div",{className:"space-y-3",children:e.deliveries.slice(0,5).map(x=>r.jsxs("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors ${n===x.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>s(x.id),children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("span",{className:"font-medium",children:["Delivery #",x.id]}),r.jsx(le,{variant:"outline",children:x.status||"pending"})]}),r.jsx("p",{className:"text-sm text-gray-600",children:x.pickupAddress}),r.jsxs("p",{className:"text-sm text-gray-600",children:[" ",x.deliveryAddress]})]},x.id))})})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:"System Status"})}),r.jsxs(Z,{children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:"HERE Maps API"}),r.jsx(le,{className:"bg-green-500 text-white",children:"Connected"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:"WebSocket Server"}),r.jsx(le,{className:"bg-green-500 text-white",children:"Active"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:"Real-time Tracking"}),r.jsx(le,{className:"bg-green-500 text-white",children:"Enabled"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:"Push Notifications"}),r.jsx(le,{className:"bg-green-500 text-white",children:"Ready"})]})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("h4",{className:"font-medium mb-3",children:"Key Features"}),r.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[r.jsx("li",{children:" Real-time GPS tracking with HERE Maps"}),r.jsx("li",{children:" WebSocket-based live updates"}),r.jsx("li",{children:" Multi-user role support (customer, shopkeeper, delivery partner)"}),r.jsx("li",{children:" Route optimization and ETA calculations"}),r.jsx("li",{children:" Push notifications for status changes"}),r.jsx("li",{children:" Google Maps integration for navigation"}),r.jsx("li",{children:" Comprehensive delivery history"})]})]})]})]})]})}),r.jsx(tt,{value:"tracking",className:"space-y-6",children:n?r.jsx(Mg,{deliveryId:n,userType:c,onStatusUpdate:x=>{console.log("Status updated:",x)}}):r.jsx(G,{children:r.jsxs(Z,{className:"p-12 text-center",children:[r.jsx(Le,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Delivery Selected"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"Create a demo delivery to see live tracking in action"}),r.jsx(F,{onClick:m,children:"Create Demo Delivery"})]})})}),r.jsx(tt,{value:"partner",className:"space-y-6",children:e.deliveryPartners.length>0?r.jsx(XVe,{partnerId:e.deliveryPartners[0].id}):r.jsx(G,{children:r.jsxs(Z,{className:"p-12 text-center",children:[r.jsx(kt,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Delivery Partners Available"}),r.jsx("p",{className:"text-gray-500",children:"Partner dashboard will show once delivery partners are registered"})]})})}),r.jsx(tt,{value:"admin",className:"space-y-6",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:"Delivery Management"})}),r.jsx(Z,{children:r.jsx("div",{className:"space-y-4",children:e.deliveries.map(x=>r.jsxs("div",{className:"p-3 border rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("span",{className:"font-medium",children:["Delivery #",x.id]}),r.jsx(le,{variant:"outline",children:x.status||"pending"})]}),!x.deliveryPartnerId&&e.deliveryPartners.length>0&&r.jsx(F,{size:"sm",onClick:()=>f(x.id,e.deliveryPartners[0].id),children:"Assign Partner"})]},x.id))})})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:"Analytics Overview"})}),r.jsx(Z,{children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.deliveries.length}),r.jsx("div",{className:"text-sm text-gray-600",children:"Total Deliveries"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.deliveryPartners.length}),r.jsx("div",{className:"text-sm text-gray-600",children:"Active Partners"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600",children:e.deliveries.filter(x=>x.status==="delivered").length}),r.jsx("div",{className:"text-sm text-gray-600",children:"Completed"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-orange-600",children:e.deliveries.filter(x=>["assigned","en_route_pickup","picked_up","en_route_delivery"].includes(x.status)).length}),r.jsx("div",{className:"text-sm text-gray-600",children:"In Progress"})]})]})})]})]})})]})]})}function eUe(){const{user:e}=rl(),[t,n]=j.useState(null),{data:s}=Re({queryKey:["/api/delivery-partners/user",e==null?void 0:e.id],queryFn:async()=>{const o=await fetch(`/api/delivery-partners/user?userId=${e==null?void 0:e.id}`);if(!o.ok){if(o.status===404)return null;throw new Error("Failed to fetch partner data")}return o.json()},enabled:!!(e!=null&&e.id)}),{data:i=[]}=Re({queryKey:["/api/delivery-partners/assignments"],queryFn:async()=>{const o=await fetch("/api/delivery-partners/assignments");return o.ok?(await o.json()).filter(c=>["assigned","picked_up","in_transit"].includes(c.status)):[]},refetchInterval:3e3,enabled:!!(s!=null&&s.id)});j.useEffect(()=>{i.length>0&&!t&&n(i[0].id)},[i,t]);const a=i.find(o=>o.id===t);return s?r.jsx("div",{className:"min-h-screen bg-gray-50",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx(lq,{}),r.jsxs("div",{className:"flex items-center justify-between mt-4",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[r.jsx(Le,{className:"h-8 w-8 text-blue-600"}),"Live Delivery Tracking"]}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Professional tracking with real-time location updates"})]}),r.jsxs(le,{variant:"secondary",className:"bg-green-100 text-green-800 px-4 py-2",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse"}),"Live Tracking Active"]})]})]}),i.length===0?r.jsx(G,{className:"shadow-lg border-0",children:r.jsxs(Z,{className:"text-center py-16",children:[r.jsx(jt,{className:"h-20 w-20 text-gray-300 mx-auto mb-6"}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"No Active Deliveries"}),r.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"You currently have no active deliveries to track. When you accept a delivery assignment, professional live tracking will appear here with real-time maps and location updates."}),r.jsxs(F,{onClick:()=>window.location.href="/delivery-partner/dashboard",className:"bg-blue-600 hover:bg-blue-700",children:[r.jsx(rt,{className:"h-4 w-4 mr-2"}),"Check for New Deliveries"]})]})}):r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[r.jsxs("div",{className:"lg:col-span-4 space-y-4",children:[r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(rt,{className:"h-5 w-5"}),"Active Deliveries (",i.length,")"]})}),r.jsx(Z,{className:"space-y-3",children:i.map(o=>r.jsxs("div",{className:`p-4 rounded-lg border-2 cursor-pointer transition-all ${t===o.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>n(o.id),children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(le,{variant:o.status==="assigned"?"default":"secondary",className:"text-xs",children:o.status.replace("_"," ").toUpperCase()}),r.jsxs("span",{className:"text-sm font-medium text-green-600",children:["NPR ",o.deliveryFee]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),r.jsxs("span",{className:"font-medium",children:["Order #",o.orderId]})]}),r.jsxs("div",{className:"text-sm text-gray-600",children:[r.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[r.jsx(Le,{className:"h-3 w-3"}),r.jsx("span",{className:"truncate",children:o.deliveryAddress})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Ot,{className:"h-3 w-3"}),r.jsx("span",{children:o.customerName})]})]}),r.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[r.jsxs("span",{children:[o.estimatedDistance," km"]}),r.jsx("span",{children:new Date(o.assignedAt).toLocaleTimeString()})]})]})]},o.id))})]}),a&&r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(jt,{className:"h-5 w-5"}),"Delivery Details"]})}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Customer Information"}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ot,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{children:a.customerName})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ot,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{children:a.customerPhone})]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Delivery Information"}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Le,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-gray-600",children:a.deliveryAddress})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(gt,{className:"h-4 w-4 text-gray-400"}),r.jsxs("span",{className:"text-gray-600",children:[a.estimatedDistance," km"]})]})]})]}),a.specialInstructions&&r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Special Instructions"}),r.jsx("p",{className:"text-sm text-gray-600 bg-yellow-50 p-3 rounded-lg",children:a.specialInstructions})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(F,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>window.open(`tel:${a.customerPhone}`),children:[r.jsx(Ot,{className:"h-4 w-4 mr-1"}),"Call"]}),r.jsxs(F,{size:"sm",className:"flex-1 bg-green-600 hover:bg-green-700",onClick:()=>{const o=`https://www.google.com/maps/dir/?api=1&destination=${a.deliveryAddress}`;window.open(o,"_blank")},children:[r.jsx(jt,{className:"h-4 w-4 mr-1"}),"Navigate"]})]})]})]})]}),r.jsx("div",{className:"lg:col-span-8",children:a?r.jsxs(G,{className:"h-full min-h-[600px]",children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(Le,{className:"h-5 w-5 text-blue-600"}),"Live Tracking - Order #",a.orderId,r.jsxs(le,{variant:"secondary",className:"bg-green-100 text-green-800 ml-auto",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse"}),"Real-time Updates"]})]})}),r.jsx(Z,{className:"p-0 h-full",children:r.jsx(qZ,{deliveryData:{id:a.id,orderId:a.orderId,customerName:a.customerName,customerPhone:a.customerPhone,pickupAddress:a.pickupAddress,deliveryAddress:a.deliveryAddress,storeName:"Family Restaurant",storePhone:"+977-9800000001",deliveryFee:parseFloat(a.deliveryFee),status:a.status,estimatedDistance:parseFloat(a.estimatedDistance),estimatedTime:25,specialInstructions:a.specialInstructions},deliveryPartnerId:(s==null?void 0:s.id)||0,onLocationUpdate:o=>{fetch("/api/tracking/location",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deliveryId:a.id,deliveryPartnerId:s==null?void 0:s.id,latitude:o.lat,longitude:o.lng,timestamp:new Date(o.timestamp).toISOString()})}).catch(console.error)}})})]}):r.jsx(G,{className:"h-full min-h-[600px] flex items-center justify-center",children:r.jsxs(Z,{className:"text-center",children:[r.jsx(Le,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a Delivery"}),r.jsx("p",{className:"text-gray-600",children:"Choose a delivery from the list to start tracking"})]})})})]})]})}):r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsx(G,{className:"max-w-md w-full",children:r.jsxs(Z,{className:"text-center py-12",children:[r.jsx(kt,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Partner Not Found"}),r.jsx("p",{className:"text-gray-600",children:"Please register as a delivery partner first."})]})})})}const tUe=e=>new Promise((t,n)=>{const s=document.createElement("canvas"),i=s.getContext("2d"),a=new Image,o=setTimeout(()=>{n(new Error("Image compression timeout"))},15e3);a.onload=()=>{try{clearTimeout(o);let{width:l,height:c}=a;const h=1024*1024,m=1.37;let f=2048;if(e.size>h*10?f=1600:e.size>h*5&&(f=1920),(l>f||c>f)&&(l>c?(c=c*f/l,l=f):(l=l*f/c,c=f)),s.width=l,s.height=c,!i){n(new Error("Canvas context not available"));return}i.imageSmoothingEnabled=!0,i.imageSmoothingQuality="high",i.drawImage(a,0,0,l,c);let g=.92,x=s.toDataURL("image/jpeg",g);if(x.length<=h*m){console.log(`Image ${e.name} compressed to ${(x.length/1024).toFixed(1)}KB with quality ${g}`),t(x);return}for(;x.length>h*m&&g>.3;)g-=.05,x=s.toDataURL("image/jpeg",g);console.log(`Compressed ${e.name} from ${(e.size/1024).toFixed(1)}KB to ${(x.length/1024).toFixed(1)}KB with quality ${g.toFixed(2)}`),t(x)}catch(l){clearTimeout(o),n(l)}},a.onerror=()=>{clearTimeout(o),n(new Error("Failed to load image"))},a.src=URL.createObjectURL(e)});function KZ({onDocumentChange:e,initialDocuments:t={},label:n="Upload Documents",className:s=""}){const[i,a]=j.useState(t),[o,l]=j.useState(""),[c,d]=j.useState(!1),[h,m]=j.useState(""),f=j.useRef(null),g=j.useRef(null),{toast:x}=ft(),p=[{key:"idProofUrl",label:"ID Proof (Aadhar/Citizenship)",required:!0},{key:"drivingLicenseUrl",label:"Driving License",required:!0},{key:"vehicleRegistrationUrl",label:"Vehicle Registration",required:!0},{key:"insuranceUrl",label:"Insurance Certificate",required:!1},{key:"photoUrl",label:"Profile Photo",required:!0}],y=async(P,C)=>{if(!P||P.length===0)return;const k=P[0];if(!k.type.startsWith("image/")){x({title:"Invalid file type",description:"Please upload an image file (JPG, PNG, etc.)",variant:"destructive"});return}if(k.size>50*1024*1024){x({title:"File too large",description:"Please upload a file smaller than 50MB",variant:"destructive"});return}d(!0);try{const O=await tUe(k),I=Math.round(O.length/1024),T={...i,[C]:O};a(T),e(C,O),x({title:"Document uploaded successfully",description:`File compressed to ${I}KB with HD quality preserved`})}catch(O){console.error("Error uploading document:",O),x({title:"Upload failed",description:"Failed to process the image. Please try again.",variant:"destructive"})}finally{d(!1)}},b=P=>{if(o.trim()){const C={...i,[P]:o.trim()};a(C),e(P,o.trim()),l(""),m(""),x({title:"Document URL added",description:"Document URL has been saved successfully"})}},w=P=>{const C={...i};delete C[P],a(C),e(P,""),x({title:"Document removed",description:"Document has been removed successfully"})},N=P=>{m(P),f.current&&f.current.click()},S=P=>{m(P),g.current&&g.current.click()};return r.jsxs("div",{className:`space-y-6 ${s}`,children:[r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:n}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"All documents will be automatically compressed to 1MB max with HD quality preserved"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p.map(P=>r.jsxs(G,{className:"relative",children:[r.jsx(se,{className:"pb-3",children:r.jsxs(ie,{className:"text-sm font-medium flex items-center justify-between",children:[r.jsxs("span",{className:"flex items-center",children:[r.jsx(Us,{className:"h-4 w-4 mr-2"}),P.label]}),P.required&&r.jsx(le,{variant:"destructive",className:"text-xs",children:"Required"})]})}),r.jsx(Z,{className:"space-y-3",children:i[P.key]?r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between p-2 bg-green-50 dark:bg-green-900/20 rounded-md",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Md,{className:"h-4 w-4 text-green-600 mr-2"}),r.jsx("span",{className:"text-sm text-green-700 dark:text-green-400",children:"Document uploaded"})]}),r.jsx(F,{size:"sm",variant:"ghost",onClick:()=>w(P.key),className:"h-6 w-6 p-0",children:r.jsx(Fr,{className:"h-3 w-3"})})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(F,{size:"sm",variant:"outline",onClick:()=>N(P.key),className:"flex-1",children:[r.jsx(Ws,{className:"h-3 w-3 mr-1"}),"Replace"]}),i[P.key].startsWith("data:")&&r.jsx(F,{size:"sm",variant:"outline",onClick:()=>{const C=document.createElement("a");C.href=i[P.key],C.download=`${P.key}.jpg`,C.click()},children:"View"})]})]}):r.jsxs(oi,{defaultValue:"upload",className:"w-full",children:[r.jsxs(Ds,{className:"grid w-full grid-cols-3",children:[r.jsx(ht,{value:"upload",children:"Upload"}),r.jsx(ht,{value:"camera",children:"Camera"}),r.jsx(ht,{value:"url",children:"URL"})]}),r.jsxs(tt,{value:"upload",className:"space-y-2",children:[r.jsxs(F,{onClick:()=>N(P.key),disabled:c,className:"w-full",size:"sm",children:[r.jsx(Ws,{className:"h-4 w-4 mr-2"}),c?"Uploading...":"Choose File"]}),r.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Max 50MB, will be compressed to 200KB"})]}),r.jsxs(tt,{value:"camera",className:"space-y-2",children:[r.jsxs(F,{onClick:()=>S(P.key),disabled:c,className:"w-full",size:"sm",children:[r.jsx(Eo,{className:"h-4 w-4 mr-2"}),c?"Processing...":"Take Photo"]}),r.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Auto-compressed to 200KB"})]}),r.jsxs(tt,{value:"url",className:"space-y-2",children:[r.jsx(he,{placeholder:"https://example.com/document.jpg",value:h===P.key?o:"",onChange:C=>{l(C.target.value),m(P.key)},className:"text-sm"}),r.jsxs(F,{onClick:()=>b(P.key),disabled:!o.trim(),className:"w-full",size:"sm",children:[r.jsx(Dd,{className:"h-4 w-4 mr-2"}),"Add URL"]})]})]})})]},P.key))}),r.jsx("input",{type:"file",ref:f,onChange:P=>y(P.target.files,h),accept:"image/*",style:{display:"none"}}),r.jsx("input",{type:"file",ref:g,onChange:P=>y(P.target.files,h),accept:"image/*",capture:"environment",style:{display:"none"}}),c&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-sm mx-4",children:[r.jsx("div",{className:"flex items-center justify-center mb-4",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),r.jsx("p",{className:"text-center text-gray-700 dark:text-gray-300",children:"Compressing to 200KB..."})]})})]})}const rUe=te.object({fullName:te.string().min(2,"Full name must be at least 2 characters"),email:te.string().email("Please enter a valid email address"),phone:te.string().min(10,"Phone number must be at least 10 digits"),password:te.string().min(6,"Password must be at least 6 characters"),confirmPassword:te.string(),address:te.string().min(5,"Address is required"),vehicleType:te.string().min(1,"Vehicle type is required"),vehicleNumber:te.string().min(1,"Vehicle number is required"),deliveryArea:te.string().min(1,"Delivery area is required"),idProofUrl:te.string().min(1,"ID proof is required"),drivingLicenseUrl:te.string().min(1,"Driving license is required"),vehicleRegistrationUrl:te.string().optional(),insuranceUrl:te.string().optional(),photoUrl:te.string().min(1,"Profile photo is required"),termsAccepted:te.boolean().refine(e=>e===!0,{message:"You must accept the terms and conditions"})}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function nUe(){const[e,t]=j.useState(!1),[,n]=Jr(),{toast:s}=ft(),[i,a]=j.useState({}),o=(d,h)=>{a(m=>({...m,[d]:h})),l.setValue(d,h)},l=an({resolver:on(rUe),defaultValues:{fullName:"",email:"",phone:"",password:"",confirmPassword:"",address:"",vehicleType:"",vehicleNumber:"",deliveryArea:"",idProofUrl:"",drivingLicenseUrl:"",vehicleRegistrationUrl:"",insuranceUrl:"",photoUrl:"",termsAccepted:!1}}),c=async d=>{var h;t(!0);try{const m=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullName:d.fullName,email:d.email,phone:d.phone,password:d.password,address:d.address,role:"delivery_partner"})});if(!m.ok){const p=await m.json();throw(h=p.error)!=null&&h.includes("User already exists")?p.error.includes("email")?new Error("An account with this email already exists. Please use a different email address or login to your existing account."):p.error.includes("phone")?new Error("An account with this phone number already exists. Please use a different phone number or login to your existing account."):new Error("An account with these credentials already exists. Please use different information or login to your existing account."):new Error(p.error||"Registration failed")}const g={userId:(await m.json()).user.id,vehicleType:d.vehicleType,vehicleNumber:d.vehicleNumber,deliveryArea:d.deliveryArea,idProofUrl:d.idProofUrl,drivingLicenseUrl:d.drivingLicenseUrl,vehicleRegistrationUrl:d.vehicleRegistrationUrl,insuranceUrl:d.insuranceUrl,photoUrl:d.photoUrl};if(!(await fetch("/api/delivery-partners/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)})).ok)throw new Error("Failed to create delivery partner profile");s({title:"Registration Successful!",description:"Your delivery partner application has been submitted. You'll be notified once approved."}),n("/login")}catch(m){console.error("Registration error:",m);const f=m instanceof Error?m.message:"Something went wrong. Please try again.";s({title:"Registration Failed",description:f,variant:"destructive"}),f.includes("already exists")&&setTimeout(()=>{s({title:"Need Help?",description:"If you already have an account, try logging in instead. If you need to update your role to delivery partner, contact support."})},3e3)}finally{t(!1)}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:r.jsxs(G,{className:"w-full max-w-2xl",children:[r.jsxs(se,{className:"text-center",children:[r.jsx("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-blue-600",children:r.jsx(kt,{className:"h-6 w-6 text-white"})}),r.jsx(ie,{className:"text-2xl font-bold",children:"Join as Delivery Partner"}),r.jsx(Ct,{children:"Complete your registration to start earning with flexible delivery work"})]}),r.jsxs(Z,{children:[r.jsx(Or,{...l,children:r.jsxs("form",{onSubmit:l.handleSubmit(c),className:"space-y-4",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Personal Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(oe,{control:l.control,name:"fullName",render:({field:d})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Full Name *"}),r.jsx(me,{children:r.jsx(he,{placeholder:"Enter your full name",...d})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:l.control,name:"phone",render:({field:d})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Phone Number *"}),r.jsx(me,{children:r.jsx(he,{placeholder:"9876543210",...d})}),r.jsx(fe,{})]})})]}),r.jsx(oe,{control:l.control,name:"email",render:({field:d})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Email Address *"}),r.jsx(me,{children:r.jsx(he,{placeholder:"your.email@example.com",type:"email",...d})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:l.control,name:"address",render:({field:d})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Address *"}),r.jsx(me,{children:r.jsx(Yt,{placeholder:"Enter your complete address",...d})}),r.jsx(fe,{})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(oe,{control:l.control,name:"password",render:({field:d})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Password *"}),r.jsx(me,{children:r.jsx(he,{placeholder:"Create password",type:"password",...d})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:l.control,name:"confirmPassword",render:({field:d})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Confirm Password *"}),r.jsx(me,{children:r.jsx(he,{placeholder:"Confirm password",type:"password",...d})}),r.jsx(fe,{})]})})]})]}),r.jsxs("div",{className:"space-y-4 border-t pt-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delivery Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(oe,{control:l.control,name:"vehicleType",render:({field:d})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Vehicle Type *"}),r.jsxs(ct,{onValueChange:d.onChange,value:d.value,children:[r.jsx(me,{children:r.jsx(it,{children:r.jsx(dt,{placeholder:"Select vehicle type"})})}),r.jsxs(at,{children:[r.jsx(ne,{value:"motorcycle",children:"Motorcycle"}),r.jsx(ne,{value:"bicycle",children:"Bicycle"}),r.jsx(ne,{value:"scooter",children:"Scooter"}),r.jsx(ne,{value:"car",children:"Car"}),r.jsx(ne,{value:"van",children:"Van"})]})]}),r.jsx(fe,{})]})}),r.jsx(oe,{control:l.control,name:"vehicleNumber",render:({field:d})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Vehicle Number *"}),r.jsx(me,{children:r.jsx(he,{placeholder:"BA 12 PA 1234",...d})}),r.jsx(fe,{})]})})]}),r.jsx(oe,{control:l.control,name:"deliveryArea",render:({field:d})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Preferred Delivery Areas *"}),r.jsx(me,{children:r.jsx(he,{placeholder:"Siraha, Lahan, Janakpur",...d})}),r.jsx(fe,{})]})})]}),r.jsx("div",{className:"space-y-4 border-t pt-4",children:r.jsx(KZ,{onDocumentChange:o,initialDocuments:i,label:"Required Documents"})}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsx(oe,{control:l.control,name:"termsAccepted",render:({field:d})=>r.jsxs(ae,{className:"flex flex-row items-start space-x-3 space-y-0",children:[r.jsx(me,{children:r.jsx(xc,{checked:d.value,onCheckedChange:d.onChange})}),r.jsxs("div",{className:"space-y-1 leading-none",children:[r.jsx(de,{className:"text-sm font-normal",children:"I agree to the delivery partner terms and conditions *"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"You agree to follow delivery guidelines and maintain professional conduct"})]})]})}),r.jsx(fe,{})]}),r.jsx(F,{type:"submit",className:"w-full",disabled:e,children:e?"Creating Account...":"Complete Registration"})]})}),r.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-950 rounded-lg",children:[r.jsx("h4",{className:"font-semibold text-green-800 dark:text-green-200 mb-2",children:"Delivery Partner Benefits:"}),r.jsxs("ul",{className:"text-sm text-green-700 dark:text-green-300 space-y-1",children:[r.jsx("li",{children:" Flexible working hours - work when you want"}),r.jsx("li",{children:" Competitive delivery fees and bonuses"}),r.jsx("li",{children:" Weekly payments directly to your account"}),r.jsx("li",{children:" 24/7 support team assistance"}),r.jsx("li",{children:" Get started immediately after approval"})]})]})]})]})})}const sUe=te.object({fullName:te.string().min(2,"Full name must be at least 2 characters"),email:te.string().email("Invalid email address"),phone:te.string().min(10,"Phone number must be at least 10 digits"),password:te.string().min(8,"Password must be at least 8 characters"),address:te.string().min(5,"Address must be at least 5 characters"),vehicleType:te.string().min(1,"Vehicle type is required"),vehicleNumber:te.string().min(1,"Vehicle number is required"),drivingLicense:te.string().min(1,"Driving license number is required"),bankAccountNumber:te.string().min(1,"Bank account number is required"),ifscCode:te.string().min(1,"IFSC code is required"),accountHolderName:te.string().min(1,"Account holder name is required"),emergencyContactName:te.string().min(1,"Emergency contact name is required"),emergencyContactPhone:te.string().min(10,"Emergency contact phone is required"),deliveryAreas:te.string().min(1,"Delivery areas are required"),idProofUrl:te.string().optional(),drivingLicenseUrl:te.string().optional(),vehicleRegistrationUrl:te.string().optional(),insuranceUrl:te.string().optional(),photoUrl:te.string().optional(),termsAccepted:te.boolean().refine(e=>e===!0,"You must accept the terms and conditions")});function iUe(){const[e,t]=j.useState(!1),[n,s]=j.useState({idProofUrl:"",drivingLicenseUrl:"",vehicleRegistrationUrl:"",insuranceUrl:"",photoUrl:""}),{toast:i}=ft(),[,a]=Jr(),o=an({resolver:on(sUe),defaultValues:{fullName:"",email:"",phone:"",password:"",address:"",vehicleType:"",vehicleNumber:"",drivingLicense:"",bankAccountNumber:"",ifscCode:"",accountHolderName:"",emergencyContactName:"",emergencyContactPhone:"",deliveryAreas:"",termsAccepted:!1}}),l=d=>{s(d),o.setValue("idProofUrl",d.idProofUrl),o.setValue("drivingLicenseUrl",d.drivingLicenseUrl),o.setValue("vehicleRegistrationUrl",d.vehicleRegistrationUrl),o.setValue("insuranceUrl",d.insuranceUrl),o.setValue("photoUrl",d.photoUrl)},c=async d=>{t(!0);try{const h=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullName:d.fullName,email:d.email,phone:d.phone,password:d.password,address:d.address,role:"delivery_partner"})});if(!h.ok){const x=await h.json();throw new Error(x.error||"Registration failed")}const f={userId:(await h.json()).user.id,vehicleType:d.vehicleType,vehicleNumber:d.vehicleNumber,drivingLicense:d.drivingLicense,bankAccountNumber:d.bankAccountNumber,ifscCode:d.ifscCode,accountHolderName:d.accountHolderName,emergencyContactName:d.emergencyContactName,emergencyContactPhone:d.emergencyContactPhone,deliveryAreas:d.deliveryAreas.split(",").map(x=>x.trim()),idProofUrl:n.idProofUrl,drivingLicenseUrl:n.drivingLicenseUrl,vehicleRegistrationUrl:n.vehicleRegistrationUrl,insuranceUrl:n.insuranceUrl,photoUrl:n.photoUrl};if(!(await fetch("/api/delivery-partners/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)})).ok)throw new Error("Failed to create delivery partner profile");i({title:"Registration Successful!",description:"Your delivery partner application has been submitted. You'll be approved shortly and can start earning immediately."}),a("/login")}catch(h){console.error("Registration error:",h),i({title:"Registration Failed",description:h instanceof Error?h.message:"Something went wrong. Please try again.",variant:"destructive"})}finally{t(!1)}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:r.jsxs(G,{className:"w-full max-w-4xl",children:[r.jsxs(se,{className:"text-center",children:[r.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-gradient-to-r from-blue-600 to-indigo-600",children:r.jsx(kt,{className:"h-8 w-8 text-white"})}),r.jsx(ie,{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"Become a Delivery Partner"}),r.jsx(Ct,{className:"text-lg",children:"Complete your profile in one simple form and start earning flexible income"})]}),r.jsxs(Z,{children:[r.jsx(Or,{...o,children:r.jsxs("form",{onSubmit:o.handleSubmit(c),className:"space-y-8",children:[r.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 p-6 rounded-lg space-y-4",children:[r.jsxs("h3",{className:"flex items-center text-lg font-semibold text-blue-800 dark:text-blue-200",children:[r.jsx(Wr,{className:"h-5 w-5 mr-2"}),"Personal Information"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(oe,{control:o.control,name:"fullName",render:({field:d})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Full Name *"}),r.jsx(me,{children:r.jsx(he,{placeholder:"Enter your full name",...d})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:o.control,name:"email",render:({field:d})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Email *"}),r.jsx(me,{children:r.jsx(he,{type:"email",placeholder:"your@email.com",...d})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:o.control,name:"phone",render:({field:d})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Phone Number *"}),r.jsx(me,{children:r.jsx(he,{placeholder:"9805916598",...d})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:o.control,name:"password",render:({field:d})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Password *"}),r.jsx(me,{children:r.jsx(he,{type:"password",placeholder:"Create a strong password",...d})}),r.jsx(fe,{})]})})]}),r.jsx(oe,{control:o.control,name:"address",render:({field:d})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Address *"}),r.jsx(me,{children:r.jsx(he,{placeholder:"Your complete address",...d})}),r.jsx(fe,{})]})})]}),r.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950 dark:to-emerald-950 p-6 rounded-lg space-y-4",children:[r.jsxs("h3",{className:"flex items-center text-lg font-semibold text-green-800 dark:text-green-200",children:[r.jsx(_k,{className:"h-5 w-5 mr-2"}),"Vehicle Information"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx(oe,{control:o.control,name:"vehicleType",render:({field:d})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Vehicle Type *"}),r.jsxs(ct,{onValueChange:d.onChange,value:d.value,children:[r.jsx(me,{children:r.jsx(it,{children:r.jsx(dt,{placeholder:"Select vehicle"})})}),r.jsxs(at,{children:[r.jsx(ne,{value:"motorcycle",children:"Motorcycle"}),r.jsx(ne,{value:"bicycle",children:"Bicycle"}),r.jsx(ne,{value:"scooter",children:"Scooter"}),r.jsx(ne,{value:"car",children:"Car"}),r.jsx(ne,{value:"van",children:"Van"})]})]}),r.jsx(fe,{})]})}),r.jsx(oe,{control:o.control,name:"vehicleNumber",render:({field:d})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Vehicle Number *"}),r.jsx(me,{children:r.jsx(he,{placeholder:"BA 01 PA 1234",...d})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:o.control,name:"drivingLicense",render:({field:d})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Driving License *"}),r.jsx(me,{children:r.jsx(he,{placeholder:"DL1234567890",...d})}),r.jsx(fe,{})]})})]})]}),r.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-950 dark:to-pink-950 p-6 rounded-lg space-y-4",children:[r.jsxs("h3",{className:"flex items-center text-lg font-semibold text-purple-800 dark:text-purple-200",children:[r.jsx(Vp,{className:"h-5 w-5 mr-2"}),"Banking Information"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx(oe,{control:o.control,name:"accountHolderName",render:({field:d})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Account Holder Name *"}),r.jsx(me,{children:r.jsx(he,{placeholder:"Name as per bank account",...d})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:o.control,name:"bankAccountNumber",render:({field:d})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Bank Account Number *"}),r.jsx(me,{children:r.jsx(he,{placeholder:"1234567890123456",...d})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:o.control,name:"ifscCode",render:({field:d})=>r.jsxs(ae,{children:[r.jsx(de,{children:"IFSC Code *"}),r.jsx(me,{children:r.jsx(he,{placeholder:"SBIN0000123",...d})}),r.jsx(fe,{})]})})]})]}),r.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 dark:from-orange-950 dark:to-red-950 p-6 rounded-lg space-y-4",children:[r.jsxs("h3",{className:"flex items-center text-lg font-semibold text-orange-800 dark:text-orange-200",children:[r.jsx(Ot,{className:"h-5 w-5 mr-2"}),"Emergency Contact"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(oe,{control:o.control,name:"emergencyContactName",render:({field:d})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Emergency Contact Name *"}),r.jsx(me,{children:r.jsx(he,{placeholder:"Contact person name",...d})}),r.jsx(fe,{})]})}),r.jsx(oe,{control:o.control,name:"emergencyContactPhone",render:({field:d})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Emergency Contact Phone *"}),r.jsx(me,{children:r.jsx(he,{placeholder:"9876543210",...d})}),r.jsx(fe,{})]})})]})]}),r.jsxs("div",{className:"bg-gradient-to-r from-teal-50 to-cyan-50 dark:from-teal-950 dark:to-cyan-950 p-6 rounded-lg space-y-4",children:[r.jsxs("h3",{className:"flex items-center text-lg font-semibold text-teal-800 dark:text-teal-200",children:[r.jsx(kt,{className:"h-5 w-5 mr-2"}),"Delivery Areas"]}),r.jsx(oe,{control:o.control,name:"deliveryAreas",render:({field:d})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Preferred Delivery Areas *"}),r.jsx(me,{children:r.jsx(he,{placeholder:"Siraha, Lahan, Janakpur (comma separated)",...d})}),r.jsx(fe,{})]})})]}),r.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 dark:from-gray-950 dark:to-slate-950 p-6 rounded-lg space-y-4",children:[r.jsxs("h3",{className:"flex items-center text-lg font-semibold text-gray-800 dark:text-gray-200",children:[r.jsx(Us,{className:"h-5 w-5 mr-2"}),"Required Documents"]}),r.jsx(KZ,{onDocumentChange:l,initialDocuments:n,label:"Upload Your Documents (All documents compressed to 200KB for fast processing)"})]}),r.jsxs("div",{className:"border-t pt-6",children:[r.jsx(oe,{control:o.control,name:"termsAccepted",render:({field:d})=>r.jsxs(ae,{className:"flex flex-row items-start space-x-3 space-y-0",children:[r.jsx(me,{children:r.jsx(xc,{checked:d.value,onCheckedChange:d.onChange})}),r.jsxs("div",{className:"space-y-1 leading-none",children:[r.jsx(de,{className:"text-sm font-normal",children:"I agree to the delivery partner terms and conditions *"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"You agree to follow delivery guidelines, maintain professional conduct, and provide timely service"})]})]})}),r.jsx(fe,{})]}),r.jsx(F,{type:"submit",className:"w-full h-12 text-lg font-semibold bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700",disabled:e,children:e?"Creating Your Account...":"Complete Registration & Start Earning"})]})}),r.jsxs("div",{className:"mt-8 p-6 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950 dark:to-emerald-950 rounded-lg",children:[r.jsx("h4",{className:"font-semibold text-green-800 dark:text-green-200 mb-3 text-center",children:" Why Choose Siraha Bazaar?"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-green-700 dark:text-green-300",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full mr-2"}),"Flexible working hours - work when you want"]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full mr-2"}),"Competitive delivery fees starting from 30"]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full mr-2"}),"Weekly payments directly to your account"]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full mr-2"}),"24/7 support team assistance"]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full mr-2"}),"Performance bonuses and incentives"]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full mr-2"}),"Get started immediately after approval"]})]})]})]})]})]})})}function aUe(){const{toast:e}=ft(),t=pn(),[n,s]=j.useState(null),[i,a]=j.useState(""),[o,l]=j.useState(!1),{data:c=[],isLoading:d}=Re({queryKey:["/api/delivery-partners"]}),{data:h=[],isLoading:m}=Re({queryKey:["/api/delivery-partners/pending"]}),f=pt({mutationFn:async S=>{const C=await(await fetch("/api/admin/current")).json(),k=(C==null?void 0:C.id)||1;return Bt(`/api/delivery-partners/${S}/approve`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:k})})},onSuccess:()=>{t.invalidateQueries({queryKey:["/api/delivery-partners"]}),t.invalidateQueries({queryKey:["/api/delivery-partners/pending"]}),e({title:"Partner Approved",description:"Delivery partner has been approved successfully."})},onError:()=>{e({title:"Error",description:"Failed to approve delivery partner.",variant:"destructive"})}}),g=pt({mutationFn:async({partnerId:S,reason:P})=>{const k=await(await fetch("/api/admin/current")).json(),O=(k==null?void 0:k.id)||1;return Bt(`/api/delivery-partners/${S}/reject`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:O,reason:P})})},onSuccess:()=>{t.invalidateQueries({queryKey:["/api/delivery-partners"]}),t.invalidateQueries({queryKey:["/api/delivery-partners/pending"]}),l(!1),a(""),s(null),e({title:"Partner Rejected",description:"Delivery partner application has been rejected."})},onError:()=>{e({title:"Error",description:"Failed to reject delivery partner.",variant:"destructive"})}}),x=S=>{s(S),l(!0)},p=()=>{n&&i.trim()&&g.mutate({partnerId:n.id,reason:i})},y=c.filter(S=>S.status==="approved"),b=c.filter(S=>S.status==="rejected"),w=S=>{switch(S){case"pending":return r.jsxs(le,{variant:"secondary",children:[r.jsx(gt,{className:"h-3 w-3 mr-1"}),"Pending"]});case"approved":return r.jsxs(le,{variant:"default",children:[r.jsx(wt,{className:"h-3 w-3 mr-1"}),"Approved"]});case"rejected":return r.jsxs(le,{variant:"destructive",children:[r.jsx(Ys,{className:"h-3 w-3 mr-1"}),"Rejected"]});default:return r.jsx(le,{variant:"outline",children:S})}},N=({partner:S})=>r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(ie,{className:"text-lg",children:["Partner #",S.id]}),w(S.status)]}),r.jsxs(Ct,{children:["Applied on ",new Date(S.createdAt).toLocaleDateString()]})]}),r.jsx(Z,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Vehicle:"})," ",S.vehicleType]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Vehicle Number:"})," ",S.vehicleNumber]}),r.jsxs("div",{children:[r.jsx("strong",{children:"License:"})," ",S.drivingLicense]}),r.jsxs("div",{children:[r.jsx("strong",{children:"ID Proof:"})," ",S.idProofType]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("strong",{children:"Delivery Areas:"})," ",S.deliveryAreas.join(", ")]})]}),r.jsxs("div",{className:"flex items-center gap-2 pt-3",children:[r.jsxs(Ir,{children:[r.jsx(Ns,{asChild:!0,children:r.jsxs(F,{variant:"outline",size:"sm",children:[r.jsx(ks,{className:"h-4 w-4 mr-1"}),"View Details"]})}),r.jsxs(Tr,{className:"max-w-2xl",children:[r.jsxs(Ar,{children:[r.jsx(Er,{children:"Delivery Partner Details"}),r.jsxs(Ss,{children:["Complete information for Partner #",S.id]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 py-4",children:[r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium",children:"Vehicle Type"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:S.vehicleType})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium",children:"Vehicle Number"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:S.vehicleNumber})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium",children:"Driving License"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:S.drivingLicense})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium",children:"ID Proof Type"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:S.idProofType})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium",children:"ID Proof Number"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:S.idProofNumber})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium",children:"Emergency Contact"}),r.jsxs("p",{className:"text-sm text-muted-foreground flex items-center",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),S.emergencyContact]})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium",children:"Bank Account"}),r.jsxs("p",{className:"text-sm text-muted-foreground flex items-center",children:[r.jsx(Vp,{className:"h-3 w-3 mr-1"}),S.bankAccountNumber]})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium",children:"IFSC Code"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:S.ifscCode})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx(be,{className:"text-sm font-medium",children:"Delivery Areas"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:S.deliveryAreas.join(", ")})]}),S.status==="approved"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium",children:"Total Deliveries"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:S.totalDeliveries})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium",children:"Total Earnings"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["",S.totalEarnings]})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium",children:"Rating"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:S.rating?`${S.rating.toFixed(1)}`:"No ratings yet"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium",children:"Availability"}),r.jsx(le,{variant:S.isAvailable?"default":"secondary",children:S.isAvailable?"Available":"Offline"})]})]}),S.rejectionReason&&r.jsxs("div",{className:"col-span-2",children:[r.jsx(be,{className:"text-sm font-medium",children:"Rejection Reason"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:S.rejectionReason})]})]})]})]}),S.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsxs(F,{size:"sm",onClick:()=>f.mutate(S.id),disabled:f.isPending,children:[r.jsx(wt,{className:"h-4 w-4 mr-1"}),"Approve"]}),r.jsxs(F,{size:"sm",variant:"destructive",onClick:()=>x(S),disabled:g.isPending,children:[r.jsx(Ys,{className:"h-4 w-4 mr-1"}),"Reject"]})]})]})]})})]},S.id);return r.jsxs("div",{className:"container mx-auto p-6",children:[r.jsx("div",{className:"flex items-center justify-between mb-6",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Delivery Partner Management"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage delivery partner applications and accounts"})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[r.jsxs(G,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ie,{className:"text-sm font-medium",children:"Total Partners"}),r.jsx(kt,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(Z,{children:r.jsx("div",{className:"text-2xl font-bold",children:c.length})})]}),r.jsxs(G,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ie,{className:"text-sm font-medium",children:"Pending Applications"}),r.jsx(gt,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(Z,{children:r.jsx("div",{className:"text-2xl font-bold",children:h.length})})]}),r.jsxs(G,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ie,{className:"text-sm font-medium",children:"Approved Partners"}),r.jsx(wt,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(Z,{children:r.jsx("div",{className:"text-2xl font-bold",children:y.length})})]}),r.jsxs(G,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ie,{className:"text-sm font-medium",children:"Active Partners"}),r.jsx(wt,{className:"h-4 w-4 text-green-500"})]}),r.jsx(Z,{children:r.jsx("div",{className:"text-2xl font-bold",children:y.filter(S=>S.isAvailable).length})})]})]}),r.jsxs(oi,{defaultValue:"pending",className:"w-full",children:[r.jsxs(Ds,{children:[r.jsxs(ht,{value:"pending",children:["Pending Applications (",h.length,")"]}),r.jsxs(ht,{value:"approved",children:["Approved Partners (",y.length,")"]}),r.jsxs(ht,{value:"rejected",children:["Rejected Applications (",b.length,")"]}),r.jsxs(ht,{value:"all",children:["All Partners (",c.length,")"]})]}),r.jsx(tt,{value:"pending",className:"space-y-4",children:m?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{children:"Loading pending applications..."})]}):h.length===0?r.jsx(G,{children:r.jsxs(Z,{className:"p-6 text-center",children:[r.jsx(gt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"No pending applications"})]})}):h.map(S=>r.jsx(N,{partner:S},S.id))}),r.jsx(tt,{value:"approved",className:"space-y-4",children:y.length===0?r.jsx(G,{children:r.jsxs(Z,{className:"p-6 text-center",children:[r.jsx(wt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"No approved partners"})]})}):y.map(S=>r.jsx(N,{partner:S},S.id))}),r.jsx(tt,{value:"rejected",className:"space-y-4",children:b.length===0?r.jsx(G,{children:r.jsxs(Z,{className:"p-6 text-center",children:[r.jsx(Ys,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"No rejected applications"})]})}):b.map(S=>r.jsx(N,{partner:S},S.id))}),r.jsx(tt,{value:"all",className:"space-y-4",children:d?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{children:"Loading all partners..."})]}):c.map(S=>r.jsx(N,{partner:S},S.id))})]}),r.jsx(Ir,{open:o,onOpenChange:l,children:r.jsxs(Tr,{children:[r.jsxs(Ar,{children:[r.jsx(Er,{children:"Reject Application"}),r.jsx(Ss,{children:"Please provide a reason for rejecting this delivery partner application."})]}),r.jsxs("div",{className:"py-4",children:[r.jsx(be,{htmlFor:"rejection-reason",children:"Rejection Reason"}),r.jsx(Yt,{id:"rejection-reason",placeholder:"Enter the reason for rejection...",value:i,onChange:S=>a(S.target.value),className:"mt-2"})]}),r.jsxs(go,{children:[r.jsx(F,{variant:"outline",onClick:()=>{l(!1),a(""),s(null)},children:"Cancel"}),r.jsx(F,{variant:"destructive",onClick:p,disabled:!i.trim()||g.isPending,children:g.isPending?"Rejecting...":"Reject Application"})]})]})})]})}const oUe=()=>{const{orderId:e}=Cm(),{data:t,isLoading:n}=Re({queryKey:[`/api/orders/${e}/tracking`],enabled:!!e,refetchInterval:3e4}),s=t,i=(t==null?void 0:t.tracking)||[];if(n||n)return r.jsx("div",{className:"min-h-screen bg-muted",children:r.jsx("div",{className:"container mx-auto py-8 px-4",children:r.jsxs("div",{className:"animate-pulse space-y-6",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mx-auto"}),r.jsx("div",{className:"h-32 bg-gray-200 rounded"}),r.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})})});if(!s)return r.jsx("div",{className:"min-h-screen bg-muted",children:r.jsx("div",{className:"container mx-auto py-8 px-4",children:r.jsx(G,{children:r.jsxs(Z,{className:"text-center py-8",children:[r.jsx(rt,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Order Not Found"}),r.jsx("p",{className:"text-gray-500",children:"The order you're looking for doesn't exist or has been removed."})]})})})});const o=g=>{switch(g.toLowerCase()){case"pending":return"bg-yellow-500";case"processing":case"in production":return"bg-blue-500";case"ready_for_pickup":return"bg-purple-500";case"shipped":case"en_route_pickup":return"bg-orange-500";case"picked_up":case"en_route_delivery":return"bg-indigo-500";case"out for delivery":case"shipping final mile":return"bg-orange-500";case"delivered":return"bg-green-500";case"cancelled":return"bg-red-500";default:return"bg-gray-500"}},l=g=>{switch(g.toLowerCase()){case"pending":return"Order Placed";case"processing":return"In Production";case"ready_for_pickup":return"Ready for Pickup";case"en_route_pickup":return"En Route to Pickup";case"picked_up":return"Order Picked Up";case"en_route_delivery":return"En Route to You";case"shipped":return"Shipped";case"out for delivery":return"Out for Delivery";case"delivered":return"Delivered";default:return g.charAt(0).toUpperCase()+g.slice(1)}},c=[{key:"pending",label:"Order Placed",icon:wM},{key:"processing",label:"In Production",icon:rt},{key:"ready_for_pickup",label:"Ready for Pickup",icon:rt},{key:"en_route_pickup",label:"En Route to Pickup",icon:kt},{key:"picked_up",label:"Order Picked Up",icon:kt},{key:"en_route_delivery",label:"En Route to You",icon:kt},{key:"delivered",label:"Delivered",icon:ti}],h=(()=>{switch(s.status.toLowerCase()){case"pending":return 0;case"processing":return 1;case"ready_for_pickup":return 2;case"en_route_pickup":return 3;case"picked_up":return 4;case"en_route_delivery":return 5;case"delivered":return 6;default:return 0}})(),m=new Date(s.createdAt);m.setDate(m.getDate()+1);const f=s.deliveryPartner&&["en_route_pickup","picked_up","en_route_delivery"].includes(s.status);return r.jsx("div",{className:"min-h-screen bg-muted",children:r.jsxs("div",{className:"container mx-auto py-8 px-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx(Ae,{href:"/customer-dashboard",children:r.jsxs(F,{variant:"outline",className:"flex items-center gap-2",children:[r.jsx(Xa,{className:"h-4 w-4"}),"Back to Dashboard"]})}),r.jsx("div",{className:"flex items-center gap-4",children:r.jsx(Ae,{href:`/orders/${e}/tracking`,children:r.jsx(F,{variant:"outline",size:"sm",children:"Refresh Status"})})})]}),r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Order Tracking"}),r.jsx("div",{className:"w-16 h-1 bg-primary mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Track your order in real-time. Delivery estimates may vary based on location and availability."})]}),r.jsx(G,{className:"mb-8 border-2",children:r.jsx(Z,{className:"p-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"ORDER PLACED"}),r.jsx("p",{className:"text-lg font-medium",children:oo(new Date(s.createdAt),"MMM dd, yyyy")})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"TOTAL"}),r.jsxs("p",{className:"text-lg font-medium",children:["",parseFloat(s.totalAmount).toLocaleString()]})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"SHIP TO"}),r.jsx("p",{className:"text-lg font-medium",children:s.customerName})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"ORDER"}),r.jsxs("p",{className:"text-lg font-medium",children:["#",s.id]})]})]})})}),r.jsxs("div",{className:"text-center mb-8",children:[r.jsxs("div",{className:"inline-flex items-center gap-3 bg-card p-4 rounded-lg border",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${o(s.status)}`}),r.jsx("h2",{className:"text-2xl font-bold text-foreground",children:l(s.status)})]}),r.jsxs("p",{className:"text-muted-foreground mt-4",children:["Estimated Delivery: ",oo(m,"EEEE, MMMM dd, yyyy")]}),s.deliveryPartner&&r.jsxs("div",{className:"mt-4 flex items-center justify-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(kt,{className:"h-4 w-4 text-blue-600"}),r.jsxs("span",{className:"text-sm font-medium",children:["Delivery Partner: ",s.deliveryPartner.name]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ot,{className:"h-4 w-4 text-green-600"}),r.jsx("a",{href:`tel:${s.deliveryPartner.phone}`,className:"text-sm text-blue-600 hover:underline",children:s.deliveryPartner.phone})]})]})]}),r.jsx(G,{className:"mb-8",children:r.jsxs(Z,{className:"p-3 md:p-8",children:[r.jsxs("div",{className:"hidden md:block relative",children:[r.jsx("div",{className:"absolute top-6 left-0 right-0 h-1 bg-gray-200",children:r.jsx("div",{className:"h-full bg-green-500 transition-all duration-500",style:{width:`${h/(c.length-1)*100}%`}})}),r.jsx("div",{className:"relative grid grid-cols-7 gap-2",children:c.map((g,x)=>{const p=x<=h,y=x===h,b=g.icon;return r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:`
                        relative mx-auto w-12 h-12 rounded-full flex items-center justify-center mb-3
                        ${p?"bg-green-500 text-white":"bg-gray-200 text-gray-400"}
                        ${y?"ring-4 ring-green-200":""}
                      `,children:r.jsx(b,{className:"w-6 h-6"})}),r.jsx("div",{className:"text-xs font-medium text-gray-700 mb-1",children:g.label}),r.jsx("div",{className:"text-xs text-gray-500",children:x===0?oo(new Date(s.createdAt),"MMM dd"):x<=h?oo(new Date,"MMM dd"):oo(m,"MMM dd")})]},g.key)})})]}),r.jsx("div",{className:"md:hidden",children:r.jsx("div",{className:"space-y-4",children:c.map((g,x)=>{const p=x<=h,y=x===h,b=g.icon;return r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:`
                        w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0
                        ${p?"bg-green-500 text-white":"bg-gray-200 text-gray-400"}
                        ${y?"ring-4 ring-green-200":""}
                      `,children:r.jsx(b,{className:"w-5 h-5"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:`text-sm font-semibold ${p?"text-green-600":"text-gray-500"}`,children:g.label}),r.jsx("div",{className:"text-xs text-gray-500 mt-1",children:x===0?oo(new Date(s.createdAt),"MMM dd"):x<=h?oo(new Date,"MMM dd"):oo(m,"MMM dd")})]}),p&&r.jsx(wM,{className:"w-5 h-5 text-green-500 flex-shrink-0"}),!p&&r.jsx(Ck,{className:"w-5 h-5 text-gray-300 flex-shrink-0"})]},g.key)})})})]})}),f&&r.jsx("div",{className:"mb-8",children:r.jsx(dW,{deliveryId:s.id,userType:"customer"})}),s.items&&s.items.length>0&&r.jsxs(G,{className:"mb-8",children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(rt,{className:"h-5 w-5"}),"Order Items"]})}),r.jsx(Z,{children:r.jsx("div",{className:"space-y-4",children:s.items.map(g=>{var x;return r.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-lg",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center",children:r.jsx(rt,{className:"h-8 w-8 text-gray-400"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-medium",children:((x=g.product)==null?void 0:x.name)||`Product #${g.productId}`}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",g.quantity]})]}),r.jsx("div",{className:"text-right",children:r.jsxs("p",{className:"font-medium",children:["",parseFloat(g.price).toLocaleString()]})})]},g.id)})})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(Le,{className:"h-5 w-5"}),"Shipping Information"]})}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-1",children:"Ship Address"}),r.jsx("p",{className:"text-gray-600",children:s.shippingAddress})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-1",children:"Customer Name"}),r.jsx("p",{className:"text-gray-600",children:s.customerName})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-1",children:"Phone"}),r.jsx("p",{className:"text-gray-600",children:s.phone})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-1",children:"Payment Method"}),r.jsx("p",{className:"text-gray-600 capitalize",children:s.paymentMethod})]})]})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(Ot,{className:"h-5 w-5"}),"Contact Information"]})}),r.jsxs(Z,{className:"space-y-4",children:[s.deliveryPartner&&r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Delivery Partner"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-gray-600",children:s.deliveryPartner.name}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ot,{className:"h-4 w-4 text-green-600"}),r.jsx("a",{href:`tel:${s.deliveryPartner.phone}`,className:"text-blue-600 hover:underline",children:s.deliveryPartner.phone})]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Customer Support"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ot,{className:"h-4 w-4 text-primary"}),r.jsx("a",{href:"tel:+9779805916598",className:"text-primary hover:underline",children:"+9779805916598"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Id,{className:"h-4 w-4 text-primary"}),r.jsx("a",{href:"mailto:sirahabazzar@gmail.com",className:"text-primary hover:underline",children:"sirahabazzar@gmail.com"})]})]})]})]})]})]}),i&&i.length>0&&r.jsxs(G,{className:"mt-8",children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(gt,{className:"h-5 w-5"}),"Tracking History"]})}),r.jsx(Z,{children:r.jsx("div",{className:"space-y-4",children:i.map((g,x)=>r.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:[r.jsx("div",{className:`w-3 h-3 rounded-full mt-2 ${o(g.status)}`}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h4",{className:"font-medium capitalize",children:l(g.status)}),r.jsx("span",{className:"text-sm text-muted-foreground",children:oo(new Date(g.updatedAt),"MMM dd, yyyy HH:mm")})]}),g.description&&r.jsx("p",{className:"text-muted-foreground text-sm mt-1",children:g.description}),g.location&&r.jsxs("p",{className:"text-muted-foreground text-xs mt-1 flex items-center gap-1",children:[r.jsx(Le,{className:"h-3 w-3"}),g.location]})]})]},g.id))})})]})]})})};function lUe(){const e=Cm(),t=parseInt(e.id||"0");rl();const{toast:n}=ft(),[s,i]=j.useState(""),{data:a,isLoading:o}=Re({queryKey:["/api/deliveries",t],queryFn:async()=>{const m=await fetch(`/api/deliveries/${t}`);if(!m.ok)throw new Error("Failed to fetch delivery details");return m.json()},enabled:!!t,refetchInterval:3e4});j.useEffect(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(m=>{const{latitude:f,longitude:g}=m.coords;i(`${f}, ${g}`)},m=>{console.error("Error getting location:",m),n({title:"Location Error",description:"Could not get your current location",variant:"destructive"})})},[n]);const l=async()=>{if(!(!s||!a))try{(await fetch(`/api/deliveries/${a.id}/location`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:s})})).ok&&n({title:"Location Updated",description:"Your location has been shared with the customer."})}catch(m){console.error("Error updating location:",m)}},c=m=>{switch(m){case"assigned":return 25;case"picked_up":return 50;case"in_transit":return 75;case"delivered":return 100;default:return 0}},d=m=>{switch(m){case"assigned":return"bg-yellow-500";case"picked_up":return"bg-blue-500";case"in_transit":return"bg-orange-500";case"delivered":return"bg-green-500";default:return"bg-gray-500"}},h=m=>{const f=encodeURIComponent(m);/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?window.open(`geo:0,0?q=${f}`,"_blank"):window.open(`https://www.google.com/maps/search/?api=1&query=${f}`,"_blank")};return o?r.jsx("div",{className:"container mx-auto p-6",children:r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{children:"Loading delivery details..."})]})})}):a?r.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsx(F,{variant:"outline",size:"icon",onClick:()=>window.history.back(),children:r.jsx(Xa,{className:"h-4 w-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Delivery Route"}),r.jsxs("p",{className:"text-muted-foreground",children:["Order #",a.orderId]})]})]}),r.jsxs(G,{className:"mb-6",children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Delivery Status"}),r.jsx(le,{variant:"outline",className:d(a.status),children:a.status.replace("_"," ").toUpperCase()})]})}),r.jsxs(Z,{children:[r.jsx(bd,{value:c(a.status),className:"mb-4"}),r.jsxs("div",{className:"grid grid-cols-4 gap-2 text-xs",children:[r.jsx("div",{className:"text-center",children:r.jsx("div",{className:"font-medium",children:"Assigned"})}),r.jsx("div",{className:"text-center",children:r.jsx("div",{className:"font-medium",children:"Picked Up"})}),r.jsx("div",{className:"text-center",children:r.jsx("div",{className:"font-medium",children:"In Transit"})}),r.jsx("div",{className:"text-center",children:r.jsx("div",{className:"font-medium",children:"Delivered"})})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(Le,{className:"h-5 w-5"}),"Route Details"]})}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mt-2"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium text-green-800 dark:text-green-400",children:"Pickup Location"}),r.jsx("p",{className:"text-sm text-green-600 dark:text-green-300",children:a.pickupAddress}),r.jsxs(F,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>h(a.pickupAddress),children:[r.jsx(jt,{className:"h-4 w-4 mr-2"}),"Navigate"]})]})]}),r.jsx("div",{className:"flex items-center justify-center",children:r.jsx("div",{className:"w-0.5 h-8 bg-border"})}),r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[r.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full mt-2"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium text-red-800 dark:text-red-400",children:"Delivery Location"}),r.jsx("p",{className:"text-sm text-red-600 dark:text-red-300",children:a.deliveryAddress}),r.jsxs(F,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>h(a.deliveryAddress),children:[r.jsx(jt,{className:"h-4 w-4 mr-2"}),"Navigate"]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t",children:[r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-2xl font-bold text-primary",children:[a.estimatedDistance,"km"]}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Distance"})]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-2xl font-bold text-primary",children:["",a.deliveryFee]}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Delivery Fee"})]})]})]})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(Ot,{className:"h-5 w-5"}),"Customer Information"]})}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:a.customerName}),r.jsx("p",{className:"text-sm text-muted-foreground",children:a.customerPhone})]}),a.specialInstructions&&r.jsxs("div",{children:[r.jsx("p",{className:"font-medium mb-1",children:"Special Instructions:"}),r.jsx("p",{className:"text-sm text-muted-foreground bg-muted p-3 rounded-lg",children:a.specialInstructions})]}),r.jsx("div",{className:"flex gap-2",children:r.jsxs(F,{variant:"outline",className:"flex-1",onClick:()=>window.open(`tel:${a.customerPhone}`,"_self"),children:[r.jsx(Ot,{className:"h-4 w-4 mr-2"}),"Call Customer"]})}),s&&r.jsxs(F,{onClick:l,className:"w-full",variant:"outline",children:[r.jsx(Le,{className:"h-4 w-4 mr-2"}),"Share My Location"]})]})]}),r.jsxs(G,{className:"lg:col-span-2",children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(gt,{className:"h-5 w-5"}),"Delivery Timeline"]})}),r.jsx(Z,{children:r.jsxs("div",{className:"space-y-4",children:[a.assignedAt&&r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Delivery Assigned"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(a.assignedAt).toLocaleString()})]})]}),a.pickedUpAt&&r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Order Picked Up"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(a.pickedUpAt).toLocaleString()})]})]}),a.deliveredAt&&r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Order Delivered"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(a.deliveredAt).toLocaleString()})]})]})]})})]})]})]}):r.jsx("div",{className:"container mx-auto p-6",children:r.jsx(G,{children:r.jsxs(Z,{className:"p-6 text-center",children:[r.jsx(rt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Delivery not found"})]})})})}function cUe(){const{user:e}=Gt(),[t,n]=j.useState([]),[s,i]=j.useState(null),{data:a=[]}=Re({queryKey:[`/api/notifications/user/${e==null?void 0:e.id}`],enabled:!!(e!=null&&e.id),refetchInterval:5e3});j.useEffect(()=>{if(!a.length)return;const h=a[0];if(h&&h.id!==s&&!h.isRead){n(m=>m.some(g=>g.id===h.id)?m:[h,...m].slice(0,3)),i(h.id);try{const m=new Audio("/notification.mp3"),f=h.title.includes("Approved")||h.message.includes("approved");m.volume=f?.8:.6,m.play().then(()=>{console.log("Notification banner sound played successfully"),f&&setTimeout(()=>{const g=new Audio("/notification.mp3");g.volume=.5,g.play().catch(()=>{console.log("Could not play celebratory sound")})},500)}).catch(()=>{console.log("Could not play notification banner sound")})}catch(m){console.log("Error playing notification banner sound:",m)}setTimeout(()=>{n(m=>m.filter(f=>f.id!==h.id))},3e3)}},[a,s]);const o=h=>{n(m=>m.filter(f=>f.id!==h))},l=async h=>{try{await fetch(`/api/notifications/${h}/read`,{method:"PUT"}),o(h)}catch(m){console.error("Error marking notification as read:",m)}},c=h=>{switch(h){case"order":return"";case"delivery":return"";case"payment":return"";case"product":return"";case"store":return"";case"system":return"";default:return""}},d=h=>{switch(h){case"order":return"bg-blue-500";case"delivery":return"bg-green-500";case"payment":return"bg-yellow-500";case"product":return"bg-purple-500";case"store":return"bg-orange-500";case"system":return"bg-gray-500";default:return"bg-blue-500"}};return!e||t.length===0?null:r.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 space-y-2 p-2",children:t.map((h,m)=>r.jsx("div",{className:`transform transition-all duration-300 ease-in-out ${m===0?"translate-y-0 opacity-100":"translate-y-2 opacity-90"}`,style:{marginTop:m*10},children:r.jsx("div",{className:`${d(h.type)} text-white rounded-lg shadow-lg mx-auto max-w-4xl`,children:r.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4",children:[r.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"bg-white bg-opacity-20 rounded-full p-2",children:r.jsx(Xt,{className:"h-4 w-4 text-white"})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[r.jsx("span",{className:"text-lg",children:c(h.type)}),r.jsx("p",{className:"font-semibold text-sm sm:text-base truncate",children:h.title}),r.jsx(le,{variant:"secondary",className:"bg-white bg-opacity-20 text-white text-xs",children:h.type})]}),r.jsx("p",{className:"text-xs sm:text-sm text-white text-opacity-90 line-clamp-2",children:h.message})]})]}),r.jsxs("div",{className:"flex items-center space-x-2 ml-3",children:[r.jsx(F,{variant:"ghost",size:"sm",className:"text-white hover:bg-white hover:bg-opacity-20 text-xs p-2",onClick:()=>l(h.id),children:"Mark Read"}),r.jsx(F,{variant:"ghost",size:"sm",className:"text-white hover:bg-white hover:bg-opacity-20 p-1",onClick:()=>o(h.id),children:r.jsx(Fr,{className:"h-4 w-4"})})]})]})})},h.id))})}const dUe=te.object({title:te.string().min(1,"Title is required"),description:te.string().optional(),discountPercentage:te.number().min(1).max(99),startsAt:te.string(),endsAt:te.string(),isActive:te.boolean().default(!0)});function uUe(){const{toast:e}=ft(),t=pn(),[n,s]=j.useState(!1),[i,a]=j.useState(null),[o,l]=j.useState(null),[c,d]=j.useState(null),[h,m]=j.useState(!1);j.useEffect(()=>{const I=localStorage.getItem("adminUser");if(I&&I!=="undefined"&&I!=="null")try{const T=JSON.parse(I);d(T),m(!0)}catch(T){console.error("Error parsing admin user data:",T),m(!1)}else m(!1)},[]);const f=an({resolver:on(dUe),defaultValues:{title:"",description:"",discountPercentage:10,startsAt:new Date().toISOString().slice(0,16),endsAt:new Date(Date.now()+24*60*60*1e3).toISOString().slice(0,16),isActive:!0}}),{data:g,isLoading:x}=Re({queryKey:["/api/flash-sales"]}),{data:p}=Re({queryKey:["/api/flash-sales/active"]}),{data:y}=Re({queryKey:["/api/flash-sales",o,"products"],enabled:!!o}),b=pt({mutationFn:I=>Bt("/api/admin/flash-sales",{method:"POST",body:JSON.stringify(I)}),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/flash-sales"]}),s(!1),f.reset(),e({title:"Success",description:"Flash sale created successfully"})},onError:()=>{e({title:"Error",description:"Failed to create flash sale",variant:"destructive"})}}),w=pt({mutationFn:({id:I,data:T})=>Bt(`/api/admin/flash-sales/${I}`,{method:"PUT",body:JSON.stringify(T)}),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/flash-sales"]}),a(null),f.reset(),e({title:"Success",description:"Flash sale updated successfully"})},onError:()=>{e({title:"Error",description:"Failed to update flash sale",variant:"destructive"})}}),N=pt({mutationFn:I=>Bt(`/api/admin/flash-sales/${I}`,{method:"DELETE"}),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/flash-sales"]}),e({title:"Success",description:"Flash sale deleted successfully"})},onError:()=>{e({title:"Error",description:"Failed to delete flash sale",variant:"destructive"})}}),S=I=>{const T={...I,startsAt:new Date(I.startsAt).toISOString(),endsAt:new Date(I.endsAt).toISOString()};i?w.mutate({id:i.id,data:T}):b.mutate(T)},P=I=>{a(I),f.reset({title:I.title,description:I.description||"",discountPercentage:I.discountPercentage,startsAt:new Date(I.startsAt).toISOString().slice(0,16),endsAt:new Date(I.endsAt).toISOString().slice(0,16),isActive:I.isActive}),s(!0)},C=I=>{confirm("Are you sure you want to delete this flash sale?")&&N.mutate(I)},k=I=>{const T=new Date,E=new Date(I.startsAt),D=new Date(I.endsAt);return I.isActive&&T>=E&&T<=D},O=I=>new Date(I).toLocaleString();return x?r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsx("div",{className:"text-center",children:"Loading flash sales..."})}):r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[!h&&r.jsx(G,{className:"mb-6 border-orange-200 bg-orange-50",children:r.jsx(Z,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(sre,{className:"h-5 w-5 text-orange-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-orange-800",children:"Read-Only Access"}),r.jsx("p",{className:"text-sm text-orange-600",children:"You can view flash sales but cannot create, edit, or delete them. Admin access required for management."})]})]})})}),r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[r.jsx(Gp,{className:"h-8 w-8 text-yellow-500"}),"Flash Sales"]}),r.jsx("p",{className:"text-gray-600",children:h?"Manage time-limited promotional sales":"Browse current flash sales and discounts"})]}),h&&r.jsxs(F,{onClick:()=>{a(null),f.reset(),s(!0)},className:"flex items-center gap-2",children:[r.jsx(Wt,{className:"h-4 w-4"}),"Create Flash Sale"]})]}),p&&p.length>0&&r.jsxs("div",{className:"mb-8",children:[r.jsxs("h2",{className:"text-2xl font-semibold mb-4 flex items-center gap-2",children:[r.jsx(gt,{className:"h-6 w-6 text-green-500"}),"Currently Active"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(I=>r.jsxs(G,{className:"border-green-200 bg-green-50",children:[r.jsx(se,{className:"pb-3",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx(ie,{className:"text-lg",children:I.title}),r.jsxs(le,{variant:"default",className:"bg-green-500",children:[r.jsx(F_,{className:"h-3 w-3 mr-1"}),I.discountPercentage,"% OFF"]})]})}),r.jsxs(Z,{children:[I.description&&r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:I.description}),r.jsx("div",{className:"space-y-2 text-sm",children:r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Ends:"})," ",O(I.endsAt)]})}),r.jsx(F,{variant:"outline",size:"sm",className:"mt-3 w-full",onClick:()=>l(I.id),children:"View Products"})]})]},I.id))})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"All Flash Sales"}),!g||g.length===0?r.jsx(G,{children:r.jsxs(Z,{className:"text-center py-8",children:[r.jsx(Gp,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:h?"No flash sales created yet":"No flash sales available at the moment"}),h&&r.jsx(F,{onClick:()=>s(!0),className:"mt-4",children:"Create Your First Flash Sale"})]})}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(I=>r.jsxs(G,{className:k(I)?"border-yellow-200":"",children:[r.jsx(se,{className:"pb-3",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx(ie,{className:"text-lg",children:I.title}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(le,{variant:k(I)?"default":"secondary",children:[r.jsx(F_,{className:"h-3 w-3 mr-1"}),I.discountPercentage,"% OFF"]}),k(I)&&r.jsx(le,{variant:"default",className:"bg-green-500",children:"Live"})]})]})}),r.jsxs(Z,{children:[I.description&&r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:I.description}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Starts:"})," ",O(I.startsAt)]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Ends:"})," ",O(I.endsAt)]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Status:"})," ",r.jsx(le,{variant:I.isActive?"default":"secondary",children:I.isActive?"Active":"Inactive"})]})]}),h&&r.jsxs("div",{className:"flex gap-2 mt-4",children:[r.jsxs(F,{variant:"outline",size:"sm",onClick:()=>P(I),className:"flex-1",children:[r.jsx(us,{className:"h-4 w-4 mr-1"}),"Edit"]}),r.jsx(F,{variant:"outline",size:"sm",onClick:()=>C(I.id),className:"text-red-600 hover:text-red-700",children:r.jsx(Xs,{className:"h-4 w-4"})})]})]})]},I.id))})]}),r.jsx(Ir,{open:n,onOpenChange:I=>{s(I),I||(a(null),f.reset())},children:r.jsxs(Tr,{className:"max-w-md",children:[r.jsx(Ar,{children:r.jsx(Er,{children:i?"Edit Flash Sale":"Create Flash Sale"})}),r.jsx(Or,{...f,children:r.jsxs("form",{onSubmit:f.handleSubmit(S),className:"space-y-4",children:[r.jsx(oe,{control:f.control,name:"title",render:({field:I})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Title"}),r.jsx(me,{children:r.jsx(he,{placeholder:"e.g., Weekend Flash Sale",...I})})]})}),r.jsx(oe,{control:f.control,name:"description",render:({field:I})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Description (Optional)"}),r.jsx(me,{children:r.jsx(Yt,{placeholder:"Brief description of the flash sale...",...I})})]})}),r.jsx(oe,{control:f.control,name:"discountPercentage",render:({field:I})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Discount Percentage"}),r.jsx(me,{children:r.jsx(he,{type:"number",min:"1",max:"99",...I,onChange:T=>I.onChange(parseInt(T.target.value))})})]})}),r.jsx(oe,{control:f.control,name:"startsAt",render:({field:I})=>r.jsxs(ae,{children:[r.jsx(de,{children:"Start Date & Time"}),r.jsx(me,{children:r.jsx(he,{type:"datetime-local",...I})})]})}),r.jsx(oe,{control:f.control,name:"endsAt",render:({field:I})=>r.jsxs(ae,{children:[r.jsx(de,{children:"End Date & Time"}),r.jsx(me,{children:r.jsx(he,{type:"datetime-local",...I})})]})}),r.jsx(oe,{control:f.control,name:"isActive",render:({field:I})=>r.jsxs(ae,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(de,{className:"text-base",children:"Active"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Enable this flash sale"})]}),r.jsx(me,{children:r.jsx("input",{type:"checkbox",checked:I.value,onChange:I.onChange,className:"w-4 h-4"})})]})}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx(F,{type:"button",variant:"outline",onClick:()=>s(!1),className:"flex-1",children:"Cancel"}),r.jsx(F,{type:"submit",disabled:b.isPending||w.isPending,className:"flex-1",children:i?"Update":"Create"})]})]})})]})}),o&&r.jsx(Ir,{open:!!o,onOpenChange:()=>l(null),children:r.jsxs(Tr,{className:"max-w-4xl",children:[r.jsx(Ar,{children:r.jsx(Er,{children:"Flash Sale Products"})}),r.jsx("div",{className:"max-h-96 overflow-y-auto",children:!y||y.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("p",{className:"text-gray-500",children:"No fast-sell products available for this flash sale"}),r.jsx("p",{className:"text-sm text-gray-400 mt-2",children:'Products marked as "Fast Sell" will appear here'})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map(I=>r.jsx(G,{children:r.jsxs(Z,{className:"p-4",children:[r.jsx("img",{src:I.imageUrl||"/placeholder-product.jpg",alt:I.name,className:"w-full h-32 object-cover rounded mb-3"}),r.jsx("h3",{className:"font-medium text-sm mb-1",children:I.name}),r.jsxs("p",{className:"text-lg font-bold text-primary",children:["",I.price]}),r.jsx(le,{variant:"secondary",className:"mt-2",children:"Fast Sell"})]})},I.id))})})]})})]})}function cy({className:e,...t}){return r.jsx("div",{className:Ve("animate-pulse rounded-md bg-muted",e),...t})}function u6(){const[,e]=Jr(),{mode:t}=Ja(),{selectSingleItem:n}=Nc(),{toast:s}=ft(),[i,a]=j.useState(""),[o,l]=j.useState("discount"),{data:c,isLoading:d,error:h}=Re({queryKey:["/api/products/special-offers"],queryFn:async()=>{const p=await fetch("/api/products/special-offers");if(!p.ok)throw new Error("Failed to fetch special offers");const y=await p.json();return await Promise.all(y.map(async w=>{try{const N=await fetch(`/api/stores/${w.storeId}`);if(N.ok){const S=await N.json();return{...w,store:S}}}catch(N){console.error("Error fetching store:",N)}return w}))}}),f=[...(c==null?void 0:c.filter(p=>{var w,N,S,P;const y=t==="food"?p.productType==="food"||((w=p.store)==null?void 0:w.storeType)==="restaurant":p.productType==="retail"||((N=p.store)==null?void 0:N.storeType)==="retail",b=!i||p.name.toLowerCase().includes(i.toLowerCase())||((S=p.description)==null?void 0:S.toLowerCase().includes(i.toLowerCase()))||((P=p.store)==null?void 0:P.name.toLowerCase().includes(i.toLowerCase()));return y&&b}))||[]].sort((p,y)=>{switch(o){case"discount":return(y.offerPercentage||0)-(p.offerPercentage||0);case"price":return parseFloat(p.price)-parseFloat(y.price);case"name":return p.name.localeCompare(y.name);default:return 0}}),g=p=>{if(p.originalPrice){const y=parseFloat(p.originalPrice),b=parseFloat(p.price);return(y-b).toFixed(2)}return"0.00"},x=p=>{var y;p.productType==="food"||((y=p.store)==null?void 0:y.storeType)==="restaurant"?e(`/food/${p.id}`):e(`/products/${p.id}`)};return h?r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error Loading Special Offers"}),r.jsx("p",{className:"text-gray-600",children:"Failed to load special offers. Please try again later."})]})}):r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-gradient-to-r from-red-500 to-orange-500 text-white",children:r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(wn,{className:"h-8 w-8"}),r.jsx("h1",{className:"text-3xl font-bold",children:t==="food"?"Food Special Offers":"Shopping Special Offers"})]}),r.jsx("p",{className:"text-red-100 text-lg",children:t==="food"?"Amazing discounts on your favorite restaurant items":"Incredible deals on top products - limited time only!"}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mt-6",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(zn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx(he,{type:"text",placeholder:`Search ${t==="food"?"food items":"products"}...`,value:i,onChange:p=>a(p.target.value),className:"pl-10 bg-white/10 border-white/20 text-white placeholder:text-red-200"})]}),r.jsxs("select",{value:o,onChange:p=>l(p.target.value),className:"px-4 py-2 rounded-md bg-white/10 border border-white/20 text-white",children:[r.jsx("option",{value:"discount",children:"Sort by Discount"}),r.jsx("option",{value:"price",children:"Sort by Price"}),r.jsx("option",{value:"name",children:"Sort by Name"})]})]})]})}),r.jsx("div",{className:"container mx-auto px-4 py-8",children:d?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Array.from({length:8}).map((p,y)=>r.jsxs(G,{className:"overflow-hidden",children:[r.jsx(cy,{className:"h-48 w-full"}),r.jsxs(se,{children:[r.jsx(cy,{className:"h-4 w-3/4"}),r.jsx(cy,{className:"h-3 w-1/2"})]}),r.jsx(Z,{children:r.jsx(cy,{className:"h-6 w-1/3"})})]},y))}):f.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(F_,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-600 mb-2",children:"No Special Offers Available"}),r.jsx("p",{className:"text-gray-500",children:i?"No offers match your search criteria.":`No special offers available in ${t} mode right now.`})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("p",{className:"text-gray-600",children:["Found ",f.length," special offer",f.length!==1?"s":"",i&&` for "${i}"`]}),r.jsx(le,{variant:"secondary",className:"bg-red-100 text-red-800",children:t==="food"?"Food Offers":"Shopping Offers"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:f.map(p=>r.jsxs(G,{className:"overflow-hidden hover:shadow-lg transition-all duration-300 cursor-pointer group",onClick:()=>x(p),children:[r.jsxs("div",{className:"relative h-48",children:[r.jsx("img",{src:p.images&&p.images[0]||p.imageUrl||"https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=300",alt:p.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:y=>{y.currentTarget.src="https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=300"}}),r.jsxs(le,{className:"absolute top-2 left-2 bg-red-500 hover:bg-red-600 text-white font-bold",children:[p.offerPercentage,"% OFF"]}),r.jsx(le,{className:"absolute top-2 right-2 bg-white/90 text-gray-800",children:p.productType==="food"?r.jsxs(r.Fragment,{children:[r.jsx(Ti,{className:"h-3 w-3 mr-1"})," Food"]}):r.jsxs(r.Fragment,{children:[r.jsx(rt,{className:"h-3 w-3 mr-1"})," Product"]})}),p.productType==="food"&&r.jsxs("div",{className:"absolute bottom-2 left-2 flex space-x-1",children:[p.isVegetarian&&r.jsx(le,{className:"bg-green-500 hover:bg-green-600 text-white",children:r.jsx(I8,{className:"h-3 w-3"})}),p.isVegan&&r.jsx(le,{className:"bg-green-600 hover:bg-green-700 text-white",children:"Vegan"})]})]}),r.jsxs(se,{className:"pb-2",children:[r.jsx("h3",{className:"font-semibold text-lg text-gray-900 line-clamp-1",children:p.name}),p.store&&r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(Le,{className:"h-3 w-3 mr-1"}),p.store.name]})]}),r.jsxs(Z,{className:"py-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"text-xl font-bold text-green-600",children:["",p.price]}),p.originalPrice&&r.jsxs("span",{className:"text-sm text-gray-500 line-through",children:["",p.originalPrice]})]}),r.jsxs("div",{className:"text-sm text-green-600 font-medium",children:["Save ",g(p)]})]}),p.rating&&parseFloat(p.rating)>0&&r.jsxs("div",{className:"flex items-center",children:[r.jsx($t,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),r.jsx("span",{className:"text-sm text-gray-600 ml-1",children:p.rating})]})]}),p.offerEndDate&&r.jsxs("div",{className:"flex items-center text-xs text-red-600 mt-2",children:[r.jsx(gt,{className:"h-3 w-3 mr-1"}),"Ends ",new Date(p.offerEndDate).toLocaleDateString()]})]}),r.jsx(Ez,{className:"pt-2",children:r.jsx(F,{className:"w-full bg-red-500 hover:bg-red-600 text-white",onClick:async y=>{y.stopPropagation();try{t==="food"?(await n(p.id),s({title:"Ready for Checkout",description:`${p.name} selected for checkout`}),e("/checkout")):e(`/products/${p.id}`)}catch{s({title:"Error",description:"Failed to prepare item for checkout",variant:"destructive"})}},children:t==="food"?"Order Now":"View Deal"})})]},p.id))})]})})]})}function hUe(){var C,k,O,I;const[e,t]=j.useState(""),[n,s]=j.useState(""),[i,a]=j.useState("Siraha Bazaar Test"),[o,l]=j.useState("This is a test notification from production!"),[c,d]=j.useState("production_test"),[h,m]=j.useState(!1),[f,g]=j.useState([]),[x,p]=j.useState(null),{toast:y}=ft(),b=T=>{g(E=>[T,...E])},w=async()=>{if(!e||e.length<100){y({title:"Invalid Token",description:"Please enter a valid FCM token (140+ characters)",variant:"destructive"});return}m(!0);try{const E=await(await fetch("/api/notification/production-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fcmToken:e,userId:n||void 0,notificationType:c})})).json();E.success?(b({type:"Production FCM Test",success:!0,message:"Notification sent successfully to production device",timestamp:new Date().toISOString(),messageId:E.messageId,details:E}),y({title:"Notification Sent!",description:"Check your Android device for the notification"})):(b({type:"Production FCM Test",success:!1,message:E.error||"Test failed",timestamp:new Date().toISOString(),details:E}),y({title:"Test Failed",description:E.error,variant:"destructive"}))}catch(T){b({type:"Production FCM Test",success:!1,message:`Network error: ${T}`,timestamp:new Date().toISOString()}),y({title:"Network Error",description:"Failed to connect to server",variant:"destructive"})}finally{m(!1)}},N=async()=>{var T;if(!n){y({title:"User ID Required",description:"Please enter a user ID for database testing",variant:"destructive"});return}m(!0);try{const D=await(await fetch("/api/test-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:n,title:i,message:o,type:"database_test"})})).json();D.success?(b({type:"Database + FCM Test",success:!0,message:"Database notification created and FCM sent",timestamp:new Date().toISOString(),details:{pushNotificationSent:D.pushNotificationSent,androidNotificationSent:D.androidNotificationSent,notificationId:(T=D.notification)==null?void 0:T.id}}),y({title:"Database Test Successful",description:`Notification saved and ${D.androidNotificationSent?"FCM sent":"FCM failed"}`})):b({type:"Database + FCM Test",success:!1,message:D.error||"Database test failed",timestamp:new Date().toISOString()})}catch(E){b({type:"Database + FCM Test",success:!1,message:`Error: ${E}`,timestamp:new Date().toISOString()})}finally{m(!1)}},S=async()=>{m(!0);try{const E=await(await fetch("/api/notification/health")).json();p(E),b({type:"System Health Check",success:E.healthy,message:E.message,timestamp:new Date().toISOString(),details:E.status}),y({title:E.healthy?"System Healthy":"System Issues",description:E.message,variant:E.healthy?"default":"destructive"})}catch(T){b({type:"System Health Check",success:!1,message:`Health check failed: ${T}`,timestamp:new Date().toISOString()})}finally{m(!1)}},P=()=>{g([]),p(null)};return r.jsxs("div",{className:"container mx-auto p-4 max-w-4xl",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Production Notification Testing"}),r.jsx("p",{className:"text-muted-foreground",children:"Test your FCM notification system to ensure smooth operation in production"})]}),x&&r.jsxs(G,{className:"mb-6",children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(Qte,{className:"h-5 w-5"}),"System Health Status"]})}),r.jsx(Z,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[r.jsx("span",{children:"Overall Health"}),r.jsx(le,{variant:x.healthy?"default":"destructive",children:x.healthy?"Healthy":"Issues"})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[r.jsx("span",{children:"Firebase"}),r.jsx(le,{variant:(C=x.status)!=null&&C.firebase?"default":"secondary",children:(k=x.status)!=null&&k.firebase?"Connected":"Disconnected"})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[r.jsx("span",{children:"Database"}),r.jsx(le,{variant:(O=x.status)!=null&&O.database?"default":"secondary",children:(I=x.status)!=null&&I.database?"Connected":"Disconnected"})]})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(tu,{className:"h-5 w-5"}),"Production FCM Test"]})}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(be,{htmlFor:"fcmToken",children:"Android FCM Token"}),r.jsx(Yt,{id:"fcmToken",placeholder:"Paste your Android app's FCM token here...",value:e,onChange:T=>t(T.target.value),className:"min-h-[100px] font-mono text-sm"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Token should be 140+ characters. Get from Android app logs."})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"notificationType",children:"Notification Type"}),r.jsxs(ct,{value:c,onValueChange:d,children:[r.jsx(it,{children:r.jsx(dt,{})}),r.jsxs(at,{children:[r.jsx(ne,{value:"production_test",children:"Production Test"}),r.jsx(ne,{value:"order_update",children:"Order Update"}),r.jsx(ne,{value:"delivery_assignment",children:"Delivery Assignment"}),r.jsx(ne,{value:"promotion",children:"Promotion"})]})]})]}),r.jsx(F,{onClick:w,disabled:h||!e,className:"w-full",children:h?"Sending...":"Test Production FCM"})]})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(Xt,{className:"h-5 w-5"}),"Database + FCM Test"]})}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(be,{htmlFor:"userId",children:"User ID (Optional)"}),r.jsx(he,{id:"userId",type:"number",placeholder:"Enter user ID...",value:n,onChange:T=>s(T.target.value)})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"title",children:"Notification Title"}),r.jsx(he,{id:"title",value:i,onChange:T=>a(T.target.value)})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"message",children:"Notification Message"}),r.jsx(Yt,{id:"message",value:o,onChange:T=>l(T.target.value)})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(F,{onClick:N,disabled:h,variant:"outline",children:"Test Database"}),r.jsx(F,{onClick:S,disabled:h,variant:"outline",children:"Health Check"})]})]})]})]}),r.jsx("div",{children:r.jsxs(G,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between",children:[r.jsx(ie,{children:"Test Results"}),f.length>0&&r.jsx(F,{onClick:P,variant:"outline",size:"sm",children:"Clear Results"})]}),r.jsx(Z,{children:f.length===0?r.jsxs(ri,{children:[r.jsx(wr,{className:"h-4 w-4"}),r.jsx(ni,{children:"No tests run yet. Start by testing your notification system."})]}):r.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:f.map((T,E)=>r.jsxs("div",{className:`p-3 border rounded-lg ${T.success?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[T.success?r.jsx(wt,{className:"h-4 w-4 text-green-600"}):r.jsx(Ys,{className:"h-4 w-4 text-red-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:T.type}),r.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(T.timestamp).toLocaleTimeString()})]})]}),r.jsx(le,{variant:T.success?"default":"destructive",children:T.success?"Success":"Failed"})]}),r.jsx("p",{className:"text-sm mt-2",children:T.message}),T.messageId&&r.jsxs("p",{className:"text-xs text-muted-foreground mt-1 font-mono",children:["Message ID: ",T.messageId]})]},E))})})]})})]}),r.jsxs(G,{className:"mt-6",children:[r.jsx(se,{children:r.jsx(ie,{children:"Testing Instructions"})}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-sm mb-2",children:"1. Get FCM Token from Android App:"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:'Open your Android app and check the logs for "FCM Token:" message. Copy the entire token.'})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-sm mb-2",children:"2. Test Production FCM:"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:'Paste the FCM token and click "Test Production FCM" to send notification directly to your device.'})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-sm mb-2",children:"3. Test Database Integration:"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter a user ID and test both database storage and FCM delivery together."})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-sm mb-2",children:"4. Monitor System Health:"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Check Firebase and database connectivity to ensure all systems are operational."})]})]})]})]})}const UE=class UE{static async initialize(){try{if("serviceWorker"in navigator){const t=await navigator.serviceWorker.register("/sw.js");return console.log("Service Worker registered successfully:",t.scope),await this.requestNotificationPermission(),t}}catch(t){console.error("PWA initialization failed:",t)}}static async requestNotificationPermission(){return"Notification"in window?Notification.permission==="granted"?!0:Notification.permission!=="denied"?await Notification.requestPermission()==="granted":!1:(console.log("This browser does not support notifications"),!1)}static async getVapidPublicKey(){if(this.vapidPublicKey)return this.vapidPublicKey;try{const t=await fetch("/api/notifications/vapid-public-key");if(t.ok){const n=await t.json();return this.vapidPublicKey=n.publicKey,this.vapidPublicKey}}catch(t){console.error("Failed to get VAPID public key:",t)}return null}static async subscribeToPushNotifications(t){try{const n=await navigator.serviceWorker.ready,s=await this.getVapidPublicKey();if(!s)return console.error("VAPID public key not available"),!1;const i=this.urlBase64ToUint8Array(s),a=await n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:i});return(await fetch("/api/push-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t,subscription:a})})).ok}catch(n){return console.error("Failed to subscribe to push notifications:",n),!1}}static urlBase64ToUint8Array(t){const n="=".repeat((4-t.length%4)%4),s=(t+n).replace(/-/g,"+").replace(/_/g,"/"),i=window.atob(s),a=new Uint8Array(i.length);for(let o=0;o<i.length;++o)a[o]=i.charCodeAt(o);return a}static async showNotification(t){if(!await this.requestNotificationPermission()){console.warn("Notification permission not granted");return}await(await navigator.serviceWorker.ready).showNotification(t.title,{body:t.body,icon:t.icon||"/icon-192x192.png",badge:t.badge||"/icon-72x72.png",data:t.data,vibrate:[100,50,100],actions:[{action:"view",title:"View",icon:"/icon-96x96.png"},{action:"close",title:"Close",icon:"/icon-96x96.png"}]})}static isPWA(){return window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone||document.referrer.includes("android-app://")}static getInstallPrompt(){return new Promise(t=>{window.addEventListener("beforeinstallprompt",n=>{n.preventDefault(),t(n)})})}static async installPWA(){try{const t=await this.getInstallPrompt();return t?(t.prompt(),(await t.userChoice).outcome==="accepted"):!1}catch(t){return console.error("Failed to install PWA:",t),!1}}};UE.vapidPublicKey=null;let To=UE;function mUe(){const[e,t]=j.useState(null),[n,s]=j.useState(!1),[i,a]=j.useState(!1);j.useEffect(()=>{const c=h=>{h.preventDefault(),t(h),To.isPWA()||setTimeout(()=>{s(!0)},5e3)},d=()=>{s(!1),t(null),console.log("PWA was installed successfully")};return window.addEventListener("beforeinstallprompt",c),window.addEventListener("appinstalled",d),()=>{window.removeEventListener("beforeinstallprompt",c),window.removeEventListener("appinstalled",d)}},[]);const o=async()=>{if(e){a(!0);try{await e.prompt(),(await e.userChoice).outcome==="accepted"?(console.log("User accepted the install prompt"),s(!1)):console.log("User dismissed the install prompt")}catch(c){console.error("Install prompt failed:",c)}finally{a(!1),t(null)}}},l=()=>{s(!1),sessionStorage.setItem("pwa-install-dismissed","true")};return!n||!e||To.isPWA()||sessionStorage.getItem("pwa-install-dismissed")?null:r.jsx("div",{className:"fixed bottom-4 left-4 right-4 z-50 md:left-auto md:right-4 md:max-w-sm",children:r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 p-4",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-10 h-10 bg-emerald-100 dark:bg-emerald-900 rounded-lg flex items-center justify-center",children:r.jsx(tu,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Install Siraha Bazaar"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Get faster access and offline features by installing our app"}),r.jsxs("div",{className:"flex items-center space-x-2 mt-3",children:[r.jsx("button",{onClick:o,disabled:i,className:"inline-flex items-center px-3 py-1.5 text-xs font-medium rounded-md text-white bg-emerald-600 hover:bg-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-3 h-3 border border-white border-t-transparent rounded-full animate-spin mr-1"}),"Installing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(eu,{className:"w-3 h-3 mr-1"}),"Install"]})}),r.jsx("button",{onClick:l,className:"inline-flex items-center px-3 py-1.5 text-xs font-medium rounded-md text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Not now"})]})]}),r.jsx("button",{onClick:l,className:"flex-shrink-0 p-1 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:r.jsx(Fr,{className:"w-4 h-4"})})]})})})}function fUe(){const[e,t]=j.useState(!1),[n,s]=j.useState(navigator.onLine),[i,a]=j.useState(null),[o,l]=j.useState("default"),[c,d]=j.useState([]);j.useEffect(()=>{t(To.isPWA()),l(Notification.permission),navigator.serviceWorker.ready.then(y=>{a(y)});const x=()=>s(!0),p=()=>s(!1);return window.addEventListener("online",x),window.addEventListener("offline",p),()=>{window.removeEventListener("online",x),window.removeEventListener("offline",p)}},[]);const h=async()=>{const x=[];try{const p=await navigator.serviceWorker.ready;x.push({test:"Service Worker Registration",status:"passed",details:`Registered at scope: ${p.scope}`})}catch(p){x.push({test:"Service Worker Registration",status:"failed",details:p instanceof Error?p.message:"Unknown error"})}try{const p=await caches.keys();x.push({test:"Cache API",status:"passed",details:`${p.length} caches found: ${p.join(", ")}`})}catch(p){x.push({test:"Cache API",status:"failed",details:p instanceof Error?p.message:"Unknown error"})}try{const y=await(await fetch("/manifest.json")).json();x.push({test:"Web App Manifest",status:"passed",details:`App: ${y.name}, Icons: ${y.icons.length}`})}catch(p){x.push({test:"Web App Manifest",status:"failed",details:p instanceof Error?p.message:"Unknown error"})}try{"Notification"in window?x.push({test:"Notification API",status:"passed",details:`Permission: ${Notification.permission}`}):x.push({test:"Notification API",status:"failed",details:"Notifications not supported"})}catch(p){x.push({test:"Notification API",status:"failed",details:p instanceof Error?p.message:"Unknown error"})}try{const y=await(await navigator.serviceWorker.ready).pushManager.getSubscription();x.push({test:"Push Messaging",status:y?"passed":"warning",details:y?"Push subscription active":"No push subscription found"})}catch(p){x.push({test:"Push Messaging",status:"failed",details:p instanceof Error?p.message:"Unknown error"})}d(x)},m=async()=>{try{await To.showNotification({title:"PWA Test Notification",body:"This is a test notification from Siraha Bazaar PWA!",data:{test:!0}})}catch(x){console.error("Test notification failed:",x)}},f=async()=>{try{await To.installPWA()&&t(!0)}catch(x){console.error("PWA installation failed:",x)}},g=async()=>{const x=await To.requestNotificationPermission();return l(Notification.permission),x};return r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8",children:r.jsx("div",{className:"max-w-4xl mx-auto px-4",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-8",children:"PWA Testing Dashboard"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[r.jsx("div",{className:"bg-blue-50 dark:bg-blue-900 p-4 rounded-lg",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(tu,{className:"w-8 h-8 text-blue-600 dark:text-blue-400 mr-3"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"PWA Status"}),r.jsx("div",{className:"text-lg font-bold text-blue-900 dark:text-blue-100",children:e?"Installed":"Web Browser"})]})]})}),r.jsx("div",{className:"bg-green-50 dark:bg-green-900 p-4 rounded-lg",children:r.jsxs("div",{className:"flex items-center",children:[n?r.jsx(hre,{className:"w-8 h-8 text-green-600 dark:text-green-400 mr-3"}):r.jsx(ure,{className:"w-8 h-8 text-red-600 dark:text-red-400 mr-3"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:"Network"}),r.jsx("div",{className:"text-lg font-bold text-green-900 dark:text-green-100",children:n?"Online":"Offline"})]})]})}),r.jsx("div",{className:"bg-purple-50 dark:bg-purple-900 p-4 rounded-lg",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Xt,{className:"w-8 h-8 text-purple-600 dark:text-purple-400 mr-3"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:"Notifications"}),r.jsx("div",{className:"text-lg font-bold text-purple-900 dark:text-purple-100",children:o==="granted"?"Enabled":o==="denied"?"Blocked":"Pending"})]})]})}),r.jsx("div",{className:"bg-orange-50 dark:bg-orange-900 p-4 rounded-lg",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(eu,{className:"w-8 h-8 text-orange-600 dark:text-orange-400 mr-3"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-orange-600 dark:text-orange-400",children:"Service Worker"}),r.jsx("div",{className:"text-lg font-bold text-orange-900 dark:text-orange-100",children:i?"Active":"Inactive"})]})]})})]}),r.jsxs("div",{className:"flex flex-wrap gap-4 mb-8",children:[r.jsx("button",{onClick:h,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors",children:"Run PWA Tests"}),!e&&r.jsx("button",{onClick:f,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg transition-colors",children:"Install PWA"}),o!=="granted"&&r.jsx("button",{onClick:g,className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded-lg transition-colors",children:"Enable Notifications"}),r.jsx("button",{onClick:m,className:"bg-orange-600 hover:bg-orange-700 text-white px-6 py-2 rounded-lg transition-colors",children:"Test Notification"})]}),c.length>0&&r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Test Results"}),r.jsx("div",{className:"space-y-3",children:c.map((x,p)=>r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:`w-3 h-3 rounded-full mt-1 ${x.status==="passed"?"bg-green-500":x.status==="warning"?"bg-yellow-500":"bg-red-500"}`}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:x.test}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:x.details})]})]},p))})]})]})})})}function pUe(){const[e,t]=j.useState(!1),{toast:n}=ft(),s=Az(),i=Vk(),a=[{title:"Shopping Cart",icon:r.jsx(Bn,{className:"h-5 w-5"}),description:"Cart and shopping interactions",sounds:[{name:"Add to Cart",action:i.onCartAdd,icon:"",description:"When user adds item to cart"},{name:"Remove from Cart",action:i.onCartRemove,icon:"",description:"When user removes item from cart"},{name:"Clear Cart",action:i.onCartClear,icon:"",description:"When user clears entire cart"},{name:"Product Like",action:i.onProductLike,icon:"",description:"When user likes/favorites a product"}]},{title:"Orders & Payment",icon:r.jsx(rt,{className:"h-5 w-5"}),description:"Order processing and payment sounds",sounds:[{name:"Order Placed",action:i.onOrderPlaced,icon:"",description:"When order is successfully placed"},{name:"Order Confirmed",action:i.onOrderConfirmed,icon:"",description:"When order is confirmed by vendor"},{name:"Order Ready",action:i.onOrderReady,icon:"",description:"When order is ready for pickup/delivery"},{name:"Payment Success",action:i.onPaymentSuccess,icon:"",description:"When payment is processed successfully"}]},{title:"Notifications & Alerts",icon:r.jsx(Xt,{className:"h-5 w-5"}),description:"System notifications and alerts",sounds:[{name:"Notification",action:i.onNotification,icon:"",description:"General notification sound"},{name:"Alert",action:i.onAlert,icon:"",description:"Important alerts and warnings"},{name:"Success",action:i.onSuccess,icon:"",description:"Successful actions and confirmations"},{name:"Error",action:i.onError,icon:"",description:"Errors and failed actions"}]},{title:"User Interface",icon:r.jsx(Wr,{className:"h-5 w-5"}),description:"UI interactions and feedback",sounds:[{name:"Button Click",action:i.onButtonClick,icon:"",description:"General button clicks"},{name:"Modal Open",action:i.onModalOpen,icon:"",description:"When modal/dialog opens"},{name:"Modal Close",action:i.onModalClose,icon:"",description:"When modal/dialog closes"},{name:"Tab Switch",action:i.onTabSwitch,icon:"",description:"When switching between tabs"}]},{title:"Admin Actions",icon:r.jsx(Rd,{className:"h-5 w-5"}),description:"Administrative actions and approvals",sounds:[{name:"Approve",action:i.onApprove,icon:"",description:"When admin approves something"},{name:"Reject",action:i.onReject,icon:"",description:"When admin rejects something"},{name:"Review Submit",action:i.onReviewSubmit,icon:"",description:"When review is submitted"}]}],o=()=>{t(!0),i.testAll(),n({title:"Testing All Sounds",description:"Playing all sound effects in sequence..."}),setTimeout(()=>t(!1),Object.keys(s).length*300+1e3)},l=f=>{const g=f[0]/100;s.setVolume(g),i.onButtonClick()},c=f=>{s.setEnabled(f),f&&i.onSuccess(),n({title:f?"Sound Effects Enabled":"Sound Effects Disabled",description:f?"Audio feedback is now active":"Audio feedback is now muted"})},d=(f,g)=>{console.log(` Testing sound: ${f}`),g(),n({title:"Sound Test",description:`${f} sound effect played`,duration:2e3})},h=()=>{console.log(" Testing cart-add.mp3 directly"),console.log(" Current volume:",s.volume),console.log(" Sound enabled:",s.isEnabled);const f=new Audio("/sounds/cart-add.mp3");f.volume=Math.max(.1,s.volume),f.addEventListener("loadstart",()=>console.log(" Loading cart-add.mp3...")),f.addEventListener("canplay",()=>console.log(" cart-add.mp3 can play")),f.addEventListener("error",g=>console.log(" cart-add.mp3 error:",g)),f.play().then(()=>{console.log(" cart-add.mp3 played successfully at volume:",f.volume),n({title:"Direct MP3 Test Success",description:`cart-add.mp3 played at ${Math.round(f.volume*100)}% volume`,duration:2e3})}).catch(g=>{console.log(" cart-add.mp3 failed:",g),n({title:"Direct MP3 Test Failed",description:g.message,variant:"destructive",duration:3e3})})},m=()=>{console.log(" Testing fallback beep sound");try{const f=new(window.AudioContext||window.webkitAudioContext),g=f.createOscillator(),x=f.createGain();g.connect(x),x.connect(f.destination),g.frequency.value=800,x.gain.value=s.volume*.3,g.start(),g.stop(f.currentTime+.1),console.log(" Fallback beep created successfully"),n({title:"Fallback Beep Test",description:"Web Audio API beep played",duration:2e3})}catch(f){const g=f instanceof Error?f.message:"Unknown error";console.log(" Fallback beep failed:",f),n({title:"Fallback Beep Failed",description:g,variant:"destructive",duration:3e3})}};return r.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[r.jsx(are,{className:"h-8 w-8 text-blue-600"}),"Sound Effects Test Center"]}),r.jsx("p",{className:"text-muted-foreground",children:"Test and configure sound notifications for all app interactions"})]}),r.jsxs(G,{className:"mb-8 border-blue-200 bg-blue-50/30",children:[r.jsxs(se,{children:[r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(Rd,{className:"h-5 w-5 text-blue-600"}),"Sound Settings"]}),r.jsx(Ct,{children:"Configure global sound settings and preferences"})]}),r.jsxs(Z,{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[s.isEnabled?r.jsx(dre,{className:"h-4 w-4 text-green-600"}):r.jsx(PM,{className:"h-4 w-4 text-gray-400"}),r.jsxs("span",{className:"font-medium",children:["Sound Effects ",s.isEnabled?"Enabled":"Disabled"]})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Toggle audio feedback for user interactions"})]}),r.jsx(jn,{checked:s.isEnabled,onCheckedChange:c})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"font-medium",children:"Volume"}),r.jsxs(le,{variant:"outline",children:[Math.round(s.volume*100),"%"]})]}),r.jsx(B7,{value:[s.volume*100],onValueChange:l,max:100,min:0,step:5,className:"w-full",disabled:!s.isEnabled})]}),r.jsxs("div",{className:"pt-4 border-t space-y-3",children:[r.jsxs(F,{onClick:h,className:"w-full bg-green-600 hover:bg-green-700",size:"lg",children:[r.jsx(qf,{className:"h-5 w-5 mr-2"}),"Test cart-add.mp3 Directly"]}),r.jsxs(F,{onClick:m,className:"w-full bg-orange-600 hover:bg-orange-700",size:"lg",children:[r.jsx(qf,{className:"h-5 w-5 mr-2"}),"Test Web Audio Beep"]}),r.jsx(F,{onClick:o,disabled:e||!s.isEnabled,className:"w-full bg-blue-600 hover:bg-blue-700",size:"lg",children:e?r.jsxs(r.Fragment,{children:[r.jsx(PM,{className:"h-5 w-5 mr-2"}),"Testing All Sounds..."]}):r.jsxs(r.Fragment,{children:[r.jsx(qf,{className:"h-5 w-5 mr-2"}),"Test All Sound Effects"]})})]})]})]}),r.jsx("div",{className:"grid gap-6",children:a.map((f,g)=>r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsxs(ie,{className:"flex items-center gap-2",children:[f.icon,f.title]}),r.jsx(Ct,{children:f.description})]}),r.jsx(Z,{children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:f.sounds.map((x,p)=>r.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-2xl",children:x.icon}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-medium",children:x.name}),r.jsx("p",{className:"text-sm text-muted-foreground",children:x.description})]})]}),r.jsxs(F,{onClick:()=>d(x.name,x.action),disabled:!s.isEnabled,size:"sm",className:"w-full",variant:"outline",children:[r.jsx(qf,{className:"h-4 w-4 mr-2"}),"Test Sound"]})]},p))})})]},g))}),r.jsxs(G,{className:"mt-8 border-green-200 bg-green-50/30",children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center gap-2 text-green-700",children:[r.jsx(wt,{className:"h-5 w-5"}),"Sound Integration Status"]})}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("h5",{className:"font-medium text-green-800",children:" Integrated Features"}),r.jsxs("ul",{className:"space-y-1 text-green-700",children:[r.jsx("li",{children:" Shopping cart interactions"}),r.jsx("li",{children:" Order placement and confirmations"}),r.jsx("li",{children:" Login and authentication"}),r.jsx("li",{children:" Product wishlist actions"}),r.jsx("li",{children:" Payment processing"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h5",{className:"font-medium text-green-800",children:" Technical Details"}),r.jsxs("ul",{className:"space-y-1 text-green-700",children:[r.jsx("li",{children:" Web Audio API for sound generation"}),r.jsx("li",{children:" LocalStorage for settings persistence"}),r.jsx("li",{children:" Mobile-friendly with user interaction policy"}),r.jsx("li",{children:" Configurable volume and enable/disable"}),r.jsx("li",{children:" Graceful fallback for unsupported browsers"})]})]})]}),r.jsx(mn,{}),r.jsxs("div",{className:"text-xs text-green-600 space-y-1",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Note:"})," Sound effects require user interaction to play due to browser policies"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Tip:"})," Settings are automatically saved and persist across sessions"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Android:"})," Sound effects work in the Android APK version with haptic feedback"]})]})]})]})]})}function xUe(){const[e,t]=j.useState([]),{toast:n}=ft();j.useEffect(()=>{const o=new URLSearchParams(window.location.search).get("files");if(o)try{const l=JSON.parse(o);n({title:"Files Received",description:`Received ${l.length} file(s) via PWA File Handler`})}catch(l){console.error("Error parsing file data:",l)}},[n]);const s=a=>{const o=Array.from(a.target.files||[]);t(l=>[...l,...o]),n({title:"Files Added",description:`Added ${o.length} file(s)`})},i=a=>{const o=new FileReader;o.onload=l=>{var c;(c=l.target)==null||c.result,a.type.startsWith("image/")?console.log("Processing image:",a.name):a.type==="text/csv"?console.log("Processing CSV:",a.name):a.type==="application/json"&&console.log("Processing JSON:",a.name)},o.readAsText(a)};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 to-blue-50 p-4",children:r.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(d0,{className:"h-6 w-6 text-emerald-600"}),"PWA File Handler"]}),r.jsx(Ct,{children:"Handle files opened with Siraha Bazaar PWA. Supports images, CSV, and JSON files."})]}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[r.jsx("input",{type:"file",multiple:!0,accept:"image/*,.csv,.json",onChange:s,className:"hidden",id:"file-upload"}),r.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[r.jsx(d0,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-lg font-medium text-gray-700",children:"Click to upload files"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Supports: Images, CSV, JSON"})]})]}),e.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("h3",{className:"text-lg font-medium",children:"Uploaded Files:"}),e.map((a,o)=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[a.type.startsWith("image/")?r.jsx(Up,{className:"h-5 w-5 text-blue-500"}):r.jsx(Us,{className:"h-5 w-5 text-green-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:a.name}),r.jsxs("p",{className:"text-sm text-gray-500",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),r.jsx(F,{size:"sm",onClick:()=>i(a),className:"bg-emerald-600 hover:bg-emerald-700",children:"Process"})]},o))]})]})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:"File Handler Features"})}),r.jsx(Z,{children:r.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[r.jsx(Up,{className:"h-8 w-8 text-blue-500 mx-auto mb-2"}),r.jsx("h4",{className:"font-medium",children:"Image Files"}),r.jsx("p",{className:"text-sm text-gray-600",children:"PNG, JPG, JPEG, GIF, WebP"})]}),r.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[r.jsx(Us,{className:"h-8 w-8 text-green-500 mx-auto mb-2"}),r.jsx("h4",{className:"font-medium",children:"CSV Files"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Comma-separated data"})]}),r.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[r.jsx(eu,{className:"h-8 w-8 text-purple-500 mx-auto mb-2"}),r.jsx("h4",{className:"font-medium",children:"JSON Files"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Structured data files"})]})]})})]})]})})}function gUe(){const[e,t]=j.useState(""),[n,s]=j.useState(""),{toast:i}=ft();j.useEffect(()=>{const c=new URLSearchParams(window.location.search).get("url");if(c)try{const d=decodeURIComponent(c);t(d),d.startsWith("web+siraha:")?s("Siraha Protocol"):d.startsWith("mailto:")&&s("Email Protocol"),i({title:"Protocol Handled",description:`Received ${n} protocol request`})}catch(d){console.error("Error parsing protocol data:",d)}},[i,n]);const a=()=>{if(e.startsWith("web+siraha:"))switch(e.replace("web+siraha://","")){case"products":window.location.href="/products";break;case"cart":window.location.href="/cart";break;case"orders":window.location.href="/orders";break;default:window.location.href="/"}},o=()=>{if(e.startsWith("mailto:")){const l=e.replace("mailto:","");window.location.href=`/contact?email=${encodeURIComponent(l)}`}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-4",children:r.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(Dd,{className:"h-6 w-6 text-blue-600"}),"PWA Protocol Handler"]}),r.jsx(Ct,{children:"Handle custom protocols and links opened with Siraha Bazaar PWA"})]}),r.jsxs(Z,{className:"space-y-4",children:[e?r.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border",children:[r.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"Protocol Received:"}),r.jsx("p",{className:"text-blue-700 break-all",children:e}),r.jsxs("p",{className:"text-sm text-blue-600 mt-1",children:["Type: ",n]})]}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Nb,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"No protocol data received"})]}),e&&r.jsxs("div",{className:"flex gap-3",children:[e.startsWith("web+siraha:")&&r.jsxs(F,{onClick:a,className:"bg-emerald-600 hover:bg-emerald-700",children:[r.jsx(oh,{className:"h-4 w-4 mr-2"}),"Handle Siraha Link"]}),e.startsWith("mailto:")&&r.jsxs(F,{onClick:o,className:"bg-blue-600 hover:bg-blue-700",children:[r.jsx(Id,{className:"h-4 w-4 mr-2"}),"Handle Email"]})]})]})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:"Supported Protocols"})}),r.jsx(Z,{children:r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[r.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Siraha Protocol"}),r.jsx("code",{className:"text-sm text-green-700",children:"web+siraha://action"}),r.jsxs("ul",{className:"text-sm text-green-600 mt-2 space-y-1",children:[r.jsx("li",{children:" web+siraha://products"}),r.jsx("li",{children:" web+siraha://cart"}),r.jsx("li",{children:" web+siraha://orders"})]})]}),r.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[r.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Email Protocol"}),r.jsx("code",{className:"text-sm text-blue-700",children:"mailto:email@example.com"}),r.jsx("p",{className:"text-sm text-blue-600 mt-2",children:"Opens contact form with pre-filled email"})]})]})})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:"Test Protocol Links"})}),r.jsx(Z,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs(F,{variant:"outline",onClick:()=>window.open("web+siraha://products","_self"),className:"w-full justify-start",children:[r.jsx(oh,{className:"h-4 w-4 mr-2"}),"Test: web+siraha://products"]}),r.jsxs(F,{variant:"outline",onClick:()=>window.open("web+siraha://cart","_self"),className:"w-full justify-start",children:[r.jsx(oh,{className:"h-4 w-4 mr-2"}),"Test: web+siraha://cart"]}),r.jsxs(F,{variant:"outline",onClick:()=>window.open("mailto:test@example.com","_self"),className:"w-full justify-start",children:[r.jsx(Id,{className:"h-4 w-4 mr-2"}),"Test: mailto:test@example.com"]})]})})]})]})})}function vUe(){const[e,t]=j.useState({title:"",text:"",url:"",files:[]}),{toast:n}=ft();j.useEffect(()=>{const i=new URLSearchParams(window.location.search),a=i.get("title")||"",o=i.get("text")||"",l=i.get("url")||"";t(c=>({...c,title:a,text:o,url:l})),(a||o||l)&&n({title:"Content Shared",description:"Received shared content via PWA Share Target"})},[n]);const s=async()=>{try{const i={title:e.title,text:e.text,url:e.url,timestamp:new Date().toISOString()};console.log("Processing shared data:",i),n({title:"Content Processed",description:"Shared content has been processed successfully"}),e.url.includes("product")?window.location.href="/products":window.location.href="/"}catch(i){console.error("Error processing shared content:",i),n({title:"Error",description:"Failed to process shared content"})}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 p-4",children:r.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(Hp,{className:"h-6 w-6 text-purple-600"}),"PWA Share Target"]}),r.jsx(Ct,{children:"Handle content shared to Siraha Bazaar PWA from other apps"})]}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"text-sm font-medium",children:"Title"}),r.jsx(he,{value:e.title,onChange:i=>t(a=>({...a,title:i.target.value})),placeholder:"Shared title"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"text-sm font-medium",children:"URL"}),r.jsx(he,{value:e.url,onChange:i=>t(a=>({...a,url:i.target.value})),placeholder:"Shared URL"})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"text-sm font-medium",children:"Text Content"}),r.jsx(Yt,{value:e.text,onChange:i=>t(a=>({...a,text:i.target.value})),placeholder:"Shared text content",rows:4})]}),e.files.length>0&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"text-sm font-medium",children:"Shared Files"}),r.jsx("div",{className:"space-y-2",children:e.files.map((i,a)=>r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[r.jsx(Up,{className:"h-5 w-5 text-purple-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:i.name}),r.jsxs("p",{className:"text-sm text-gray-500",children:[(i.size/1024).toFixed(1)," KB"]})]})]},a))})]}),(e.title||e.text||e.url)&&r.jsx("div",{className:"pt-4 border-t",children:r.jsxs(F,{onClick:s,className:"w-full bg-purple-600 hover:bg-purple-700",children:[r.jsx(Ld,{className:"h-4 w-4 mr-2"}),"Process Shared Content"]})})]})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:"Share Target Features"})}),r.jsx(Z,{children:r.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[r.jsx(Hp,{className:"h-8 w-8 text-purple-500 mx-auto mb-2"}),r.jsx("h4",{className:"font-medium",children:"Text Sharing"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Receive shared text and URLs"})]}),r.jsxs("div",{className:"text-center p-4 bg-pink-50 rounded-lg",children:[r.jsx(Up,{className:"h-8 w-8 text-pink-500 mx-auto mb-2"}),r.jsx("h4",{className:"font-medium",children:"Image Sharing"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Accept shared images"})]}),r.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[r.jsx(oh,{className:"h-8 w-8 text-blue-500 mx-auto mb-2"}),r.jsx("h4",{className:"font-medium",children:"Link Handling"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Process shared links"})]})]})})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:"How to Test Share Target"})}),r.jsx(Z,{children:r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"1. Install PWA:"})," Add Siraha Bazaar to home screen"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"2. Share from another app:"})," Select share and choose Siraha Bazaar"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"3. Content will open here:"})," Shared content appears in this page"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"4. Process content:"}),' Click "Process Shared Content" to handle it']})]})})]})]})})}function yUe(){const[e,t]=j.useState("display_override"),{toast:n}=ft(),s=[{id:"display_override",title:"Display Override",icon:r.jsx(Jte,{className:"h-6 w-6"}),status:"active",description:"Advanced window controls and display modes",details:["Window controls overlay support","Minimal UI mode","Standalone app experience","Adaptive display based on device"],implementation:"Configured in manifest.json with display_override array"},{id:"edge_side_panel",title:"Edge Side Panel",icon:r.jsx(ere,{className:"h-6 w-6"}),status:"active",description:"Side panel integration for Microsoft Edge",details:["Preferred width: 480px","Optimized for Edge browser","Enhanced multitasking","Quick access to app features"],implementation:"Configured with edge_side_panel in manifest.json"},{id:"file_handlers",title:"File Handlers",icon:r.jsx(d0,{className:"h-6 w-6"}),status:"active",description:"Handle file types directly with PWA",details:["Image files: PNG, JPG, JPEG, GIF, WebP","CSV data files","JSON configuration files","Direct file association"],implementation:"Implemented with /file-handler route and FileHandler.tsx"},{id:"handle_links",title:"Handle Links",icon:r.jsx(Dd,{className:"h-6 w-6"}),status:"active",description:"Default handler for web links",details:["Preferred link handler","Captures external links","Seamless navigation","Deep link support"],implementation:'Set to "preferred" in manifest.json'},{id:"protocol_handlers",title:"Protocol Handlers",icon:r.jsx(Nb,{className:"h-6 w-6"}),status:"active",description:"Custom protocol support",details:["web+siraha:// custom protocol","mailto: email protocol","Direct app actions","Cross-app communication"],implementation:"Implemented with /protocol-handler route and ProtocolHandler.tsx"},{id:"share_target",title:"Share Target",icon:r.jsx(Hp,{className:"h-6 w-6"}),status:"active",description:"Receive shared content from other apps",details:["Text and URL sharing","Image file sharing","Multipart form data","Cross-platform sharing"],implementation:"Implemented with /share-target route and ShareTarget.tsx"},{id:"widgets",title:"Widgets",icon:r.jsx(Gp,{className:"h-6 w-6"}),status:"active",description:"Home screen widgets and adaptive cards",details:["Quick Orders widget","Adaptive card templates","Real-time data updates","Home screen integration"],implementation:"Configured with widgets array and /api/widget-data/orders endpoint"},{id:"shortcuts",title:"Shortcuts",icon:r.jsx(wt,{className:"h-6 w-6"}),status:"active",description:"App shortcuts for quick actions",details:["Browse Products shortcut","My Orders shortcut","Shopping Cart shortcut","Context menu integration"],implementation:"Defined in manifest.json shortcuts array"}],i=o=>{switch(o){case"file_handlers":window.open("/file-handler","_blank");break;case"protocol_handlers":window.open("/protocol-handler","_blank");break;case"share_target":window.open("/share-target","_blank");break;case"shortcuts":n({title:"Shortcuts Active",description:"Right-click on PWA icon to see shortcuts"});break;default:n({title:"Feature Active",description:`${o.replace("_"," ")} is currently active`})}},a=s.find(o=>o.id===e);return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 p-4",children:r.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[r.jsx(G,{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:r.jsxs(se,{children:[r.jsxs(ie,{className:"text-2xl flex items-center gap-3",children:[r.jsx(tu,{className:"h-8 w-8"}),"PWA Advanced Features Dashboard"]}),r.jsx(Ct,{className:"text-blue-100",children:"Siraha Bazaar - Complete Progressive Web App implementation with all modern features"})]})}),r.jsx("div",{className:"grid lg:grid-cols-4 md:grid-cols-2 gap-4",children:s.map(o=>r.jsx(G,{className:`cursor-pointer transition-all duration-200 hover:shadow-lg ${e===o.id?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-gray-50"}`,onClick:()=>t(o.id),children:r.jsxs(Z,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("div",{className:"text-blue-600",children:o.icon}),r.jsx(le,{variant:o.status==="active"?"default":"secondary",className:o.status==="active"?"bg-green-100 text-green-800":"",children:o.status==="active"?"Active":"Inactive"})]}),r.jsx("h3",{className:"font-semibold text-sm mb-1",children:o.title}),r.jsx("p",{className:"text-xs text-gray-600",children:o.description})]})},o.id))}),a&&r.jsxs(G,{children:[r.jsxs(se,{children:[r.jsxs(ie,{className:"flex items-center gap-3",children:[a.icon,a.title,r.jsx(le,{variant:"outline",className:"bg-green-100 text-green-800",children:" Active"})]}),r.jsx(Ct,{children:a.description})]}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-2",children:"Features:"}),r.jsx("ul",{className:"space-y-1",children:a.details.map((o,l)=>r.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[r.jsx(wt,{className:"h-4 w-4 text-green-500"}),o]},l))})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-2",children:"Implementation:"}),r.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-lg",children:a.implementation})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsxs(F,{onClick:()=>i(a.id),className:"bg-blue-600 hover:bg-blue-700",children:[r.jsx(oh,{className:"h-4 w-4 mr-2"}),"Test Feature"]}),a.id==="file_handlers"&&r.jsxs(F,{variant:"outline",onClick:()=>window.open("/file-handler"),children:[r.jsx(d0,{className:"h-4 w-4 mr-2"}),"Open File Handler"]}),a.id==="protocol_handlers"&&r.jsxs(F,{variant:"outline",onClick:()=>window.open("/protocol-handler"),children:[r.jsx(Dd,{className:"h-4 w-4 mr-2"}),"Open Protocol Handler"]}),a.id==="share_target"&&r.jsxs(F,{variant:"outline",onClick:()=>window.open("/share-target"),children:[r.jsx(Hp,{className:"h-4 w-4 mr-2"}),"Open Share Target"]})]})]})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(eu,{className:"h-5 w-5"}),"PWA Installation Status"]})}),r.jsx(Z,{children:r.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-center",children:[r.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[r.jsx(wt,{className:"h-8 w-8 text-green-500 mx-auto mb-2"}),r.jsx("h4",{className:"font-medium text-green-800",children:"Manifest"}),r.jsx("p",{className:"text-sm text-green-600",children:"Valid PWA manifest"})]}),r.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[r.jsx(wt,{className:"h-8 w-8 text-green-500 mx-auto mb-2"}),r.jsx("h4",{className:"font-medium text-green-800",children:"Service Worker"}),r.jsx("p",{className:"text-sm text-green-600",children:"Active service worker"})]}),r.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[r.jsx(wt,{className:"h-8 w-8 text-green-500 mx-auto mb-2"}),r.jsx("h4",{className:"font-medium text-green-800",children:"HTTPS"}),r.jsx("p",{className:"text-sm text-green-600",children:"Secure connection"})]})]})})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsx(ie,{children:"Implementation Summary"})}),r.jsx(Z,{children:r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[r.jsx("span",{className:"font-medium",children:"Total PWA Features"}),r.jsx(le,{className:"bg-green-600",children:s.length})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[r.jsx("span",{className:"font-medium",children:"Active Features"}),r.jsx(le,{className:"bg-blue-600",children:s.filter(o=>o.status==="active").length})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg",children:[r.jsx("span",{className:"font-medium",children:"Android PWA Ready"}),r.jsx(le,{className:"bg-purple-600",children:" Yes"})]})]})})]})]})})}const jUe=async()=>{try{console.log(" Testing Firebase configuration...");const e={apiKey:"AIzaSyBbHSV2EJZ9BPE1C1ZC4_ZNYwFYJIR9VSo",authDomain:"myweb-1c1f37b3.firebaseapp.com",projectId:"myweb-1c1f37b3",storageBucket:"myweb-1c1f37b3.firebasestorage.app",messagingSenderId:"774950702828",appId:"1:774950702828:web:09c2dfc1198d45244a9fc9"},t="BBeY7MuZB7850MAibtxV4fJxcKYAF3oQxNBB60l1FzHK63IjkTSI9ZFDPW1hmHnKSJPckGFM5gu7JlaCGavnwqA";console.log(" Using VAPID key pair:",{publicKey:t.substring(0,20)+"...",privateKey:"kAXgMUCBn7sp_zA7lgCH0GD3_mbwA5BAKpWbhQ5STRM".substring(0,10)+"...",keyPairMatch:"Validating pair"}),console.log(" Firebase Config Test:",{projectId:e.projectId,messagingSenderId:e.messagingSenderId,vapidLength:t.length});const s=hT(e,"test-app"),i=$V(s);if(!("serviceWorker"in navigator))throw new Error("Service Worker not supported");if(Notification.permission!=="granted"&&(console.log(" Requesting notification permission..."),await Notification.requestPermission()!=="granted"))throw new Error("Notification permission denied");console.log(" Notification permission granted"),console.log(" Attempting token generation with clean Firebase instance...");const a=await jT(i,{vapidKey:t,serviceWorkerRegistration:await navigator.serviceWorker.register("/firebase-messaging-sw.js")});return a?(console.log(" SUCCESS! FCM Token generated:",a.substring(0,20)+"..."+a.substring(a.length-20)),{success:!0,token:a}):(console.log(" Token generation returned null"),{success:!1,error:"Token generation returned null"})}catch(e){return console.error(" Firebase config test failed:",e),(e==null?void 0:e.code)==="messaging/token-subscribe-failed"&&(console.log(" TROUBLESHOOTING: Token subscribe failed"),console.log("1. Check if VAPID key is correctly configured in Firebase Console"),console.log("2. Go to Firebase Console  Project Settings  Cloud Messaging  Web Push certificates"),console.log("3. Generate new key pair if current key is invalid"),console.log("4. Make sure the domain is authorized in Firebase settings")),{success:!1,error:e.message,code:e.code}}},bUe=e=>{const n=/^[A-Za-z0-9_-]{64,}$/.test(e)&&e.length>=64;return console.log(" VAPID Key Validation:",{length:e.length,format:n?"Valid":"Invalid",sample:e.substring(0,20)+"..."}),n},wUe=async()=>{try{if(!("serviceWorker"in navigator))return console.log(" Service Worker not supported"),!1;console.log(" Checking service worker registration...");const e=await navigator.serviceWorker.getRegistrations();console.log(" Existing service worker registrations:",e.length),e.forEach((n,s)=>{var i,a;console.log(`SW ${s+1}:`,{scope:n.scope,state:(i=n.active)==null?void 0:i.state,scriptURL:(a=n.active)==null?void 0:a.scriptURL})});const t=await navigator.serviceWorker.register("/firebase-messaging-sw.js");return console.log(" Firebase service worker registered:",t.scope),!0}catch(e){return console.error(" Service worker debug failed:",e),!1}};function NUe(){const[e,t]=j.useState(""),[n,s]=j.useState(!1),[i,a]=j.useState(!1),[o,l]=j.useState(Notification.permission),{toast:c}=ft(),d=async()=>{s(!0),console.log(" User clicked Generate FCM Token (YouTube tutorial style)...");try{if(console.log(" Step 1: Initializing Firebase Cloud Messaging..."),await wg(),Notification.permission!=="granted"){console.log(" Step 2: Requesting notification permission...");const p=await Ub();if(l(Notification.permission),!p){c({title:"Permission Required",description:"Notification permission is needed to generate FCM token",variant:"destructive"});return}}console.log(" Step 3: Generating FCM token...");const x=await bT();if(x)t(x),console.log(" SUCCESS: FCM Token generated and displayed!"),console.log("=".repeat(80)),console.log(" YOUTUBE TUTORIAL STYLE - FCM TOKEN READY!"),console.log("=".repeat(80)),console.log(" Your FCM Token:",x),console.log(" Token Length:",x.length,"characters"),console.log(" Ready for testing with Firebase Console!"),console.log("=".repeat(80)),c({title:"FCM Token Generated!",description:"Check console for full token. Token is now displayed below."});else throw new Error("Token generation returned null")}catch(x){console.error(" FCM Token generation failed:",x),c({title:"Token Generation Failed",description:x instanceof Error?x.message:"Unknown error occurred",variant:"destructive"})}finally{s(!1)}},h=()=>{e&&(navigator.clipboard.writeText(e),c({title:"Token Copied",description:"FCM token copied to clipboard"}))},m=async()=>{if(!e){c({title:"No FCM Token",description:"Please generate an FCM token first",variant:"destructive"});return}s(!0),console.log(" Testing FCM push notification with token:",e.substring(0,20)+"...");try{const p=await(await fetch("/api/test-fcm-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:"Siraha Bazaar FCM Test",body:"Push notification is working! ",data:{type:"test",url:"/fcm-test"},fcmToken:e})})).json();if(p.success)console.log(" FCM test notification sent:",p),c({title:"Push Notification Sent!",description:p.notificationSent?"Check your browser/device for the notification":"Server configured successfully"});else throw new Error(p.error||"Unknown error")}catch(x){console.error(" FCM test failed:",x),c({title:"Test Failed",description:x instanceof Error?x.message:"Failed to send test notification",variant:"destructive"})}finally{s(!1)}},f=async()=>{a(!0),console.log(" Starting Firebase Configuration Debug...");try{bUe("BBeY7MuZB7850MAibtxV4fJxcKYAF3oQxNBB60l1FzHK63IjkTSI9ZFDPW1hmHnKSJPckGFM5gu7JlaCGavnwqA"),await wUe();const p=await jUe();p.success&&p.token?(t(p.token),l(Notification.permission),c({title:"Debug Success!",description:"FCM token generated using debug configuration"})):c({title:"Debug Failed",description:p.error||"Firebase configuration issues detected",variant:"destructive"})}catch(x){console.error("Debug failed:",x),c({title:"Debug Error",description:x.message,variant:"destructive"})}finally{a(!1)}},g=()=>{const x=o==="granted"?"default":o==="denied"?"destructive":"secondary";return r.jsx(le,{variant:x,children:o.charAt(0).toUpperCase()+o.slice(1)})};return r.jsxs(G,{className:"w-full max-w-4xl",children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center gap-2",children:[r.jsx(Xt,{className:"h-5 w-5"}),"FCM Token Generator (YouTube Tutorial Style)"]})}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Notification Permission:"}),g()]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{onClick:d,disabled:n||i,className:"w-full",size:"lg",children:n?r.jsxs(r.Fragment,{children:[r.jsx(Ms,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating FCM Token..."]}):r.jsxs(r.Fragment,{children:[r.jsx($_,{className:"h-4 w-4 mr-2"}),"Generate FCM Token (Check Console)"]})}),r.jsx(F,{onClick:f,disabled:n||i,variant:"outline",className:"w-full",size:"lg",children:i?r.jsxs(r.Fragment,{children:[r.jsx(Ms,{className:"h-4 w-4 mr-2 animate-spin"}),"Running Firebase Debug..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Vte,{className:"h-4 w-4 mr-2"})," Debug Firebase Config (Fix 401 Error)"]})}),e&&r.jsxs(F,{onClick:m,disabled:n||i,variant:"default",className:"w-full bg-green-600 hover:bg-green-700",size:"lg",children:[r.jsx(Ld,{className:"h-4 w-4 mr-2"})," Test FCM Push Notification"]})]}),e&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"font-medium",children:"FCM Token Generated:"}),r.jsxs(F,{onClick:h,variant:"outline",size:"sm",children:[r.jsx(qte,{className:"h-4 w-4 mr-1"}),"Copy"]})]}),r.jsx("div",{className:"p-3 bg-gray-100 dark:bg-gray-800 rounded-md font-mono text-sm break-all",children:e}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Token length: ",e.length," characters",r.jsx("br",{})," Ready for Firebase Console testing",r.jsx("br",{})," Full token is also printed in browser console"]})]}),r.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[r.jsx("p",{children:" This generates a Firebase Cloud Messaging token for web push notifications"}),r.jsx("p",{children:" The token is printed to console with detailed logging (like YouTube tutorials)"}),r.jsx("p",{children:" Use this token to test push notifications from Firebase Console"}),r.jsx("p",{children:" Token will be displayed both here and in the browser console"})]})]})]})}function SUe(){const[e,t]=j.useState({serviceWorker:!1,permission:"default",token:"",vapidSupport:!1}),[n,s]=j.useState(!1),{toast:i}=ft();j.useEffect(()=>{a()},[]);const a=async()=>{const m={serviceWorker:"serviceWorker"in navigator,permission:Notification.permission,token:"",vapidSupport:"PushManager"in window};if(m.serviceWorker&&m.vapidSupport)try{const{initializeFirebaseNotifications:f,getFirebaseToken:g}=await zp(async()=>{const{initializeFirebaseNotifications:x,getFirebaseToken:p}=await Promise.resolve().then(()=>_0);return{initializeFirebaseNotifications:x,getFirebaseToken:p}},void 0);if(await f(),console.log("Firebase initialized successfully"),Notification.permission==="granted")try{const x=await g();m.token=x?x.substring(0,20)+"...":"",console.log("FCM token obtained successfully")}catch(x){console.log("FCM token not available yet:",x)}}catch(f){console.error("Error initializing Firebase:",f)}t(m)},o=async()=>{if(!("Notification"in window)){i({title:"Not Supported",description:"This browser doesn't support notifications",variant:"destructive"});return}try{const m=await Notification.requestPermission();if(t(f=>({...f,permission:m})),m==="granted")try{const{getFirebaseToken:f}=await zp(async()=>{const{getFirebaseToken:x}=await Promise.resolve().then(()=>_0);return{getFirebaseToken:x}},void 0),g=await f();g&&(t(x=>({...x,token:g.substring(0,20)+"..."})),i({title:"FCM Ready",description:"Push notifications enabled with VAPID token"}))}catch(f){console.error("Error getting FCM token:",f),i({title:"Permission Granted",description:"Push notifications enabled (FCM token pending)"})}else i({title:"Permission Denied",description:"Push notifications won't work without permission",variant:"destructive"})}catch(m){console.error("Error requesting permission:",m),i({title:"Error",description:"Failed to request notification permission",variant:"destructive"})}},l=()=>{Notification.permission==="granted"?(new Notification("Siraha Bazaar Test",{body:"Local notification test successful! ",icon:"/favicon.ico",badge:"/favicon.ico",tag:"test-notification"}),i({title:"Test Sent",description:"Local notification should appear now"})):i({title:"Permission Required",description:"Please grant notification permission first",variant:"destructive"})},c=async()=>{s(!0);try{const m=await fetch("/api/test-fcm-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:"Siraha Bazaar FCM Test",body:"Server-side FCM push notification test! ",data:{type:"test",url:"/fcm-test"}})});if(m.ok){const f=await m.json();i({title:"FCM Test Sent",description:`Push notification sent via FCM: ${f.messageId||"Success"}`})}else{const f=await m.json();i({title:"FCM Test Failed",description:f.error||"Server-side push notification failed",variant:"destructive"})}}catch(m){console.error("Error testing FCM:",m),i({title:"Error",description:"Failed to send test notification",variant:"destructive"})}finally{s(!1)}},d=(m,f)=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:f}),r.jsxs(le,{variant:m?"default":"destructive",className:"ml-2",children:[m?r.jsx(wt,{className:"w-3 h-3 mr-1"}):r.jsx(Ys,{className:"w-3 h-3 mr-1"}),m?"Ready":"Not Available"]})]}),h=m=>{const f=m==="granted"?"default":m==="denied"?"destructive":"secondary",g=m==="granted"?r.jsx(wt,{className:"w-3 h-3 mr-1"}):r.jsx(Ys,{className:"w-3 h-3 mr-1"});return r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Notification Permission"}),r.jsxs(le,{variant:f,className:"ml-2",children:[g,m.charAt(0).toUpperCase()+m.slice(1)]})]})};return r.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[r.jsxs("div",{className:"flex items-center mb-6",children:[r.jsx(Xt,{className:"w-8 h-8 mr-3 text-blue-600"}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"FCM Push Notifications Test"}),r.jsx("p",{className:"text-gray-600",children:"Test Firebase Cloud Messaging integration for Siraha Bazaar"})]})]}),r.jsx("div",{className:"mb-6",children:r.jsx(NUe,{})}),r.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center",children:[r.jsx(tu,{className:"w-5 h-5 mr-2"}),"FCM System Status"]})}),r.jsxs(Z,{className:"space-y-4",children:[d(e.serviceWorker,"Service Worker Support"),d(e.vapidSupport,"Push Manager (VAPID)"),h(e.permission),r.jsxs("div",{className:"pt-4 border-t",children:[r.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["FCM Status: ",e.serviceWorker&&e.vapidSupport?r.jsx("span",{className:"text-green-600 font-medium",children:"Configured "}):r.jsx("span",{className:"text-red-600 font-medium",children:"Not Ready "})]}),r.jsx(F,{onClick:a,variant:"outline",size:"sm",className:"w-full",children:"Refresh Status"})]})]})]}),r.jsxs(G,{children:[r.jsx(se,{children:r.jsxs(ie,{className:"flex items-center",children:[r.jsx(Ld,{className:"w-5 h-5 mr-2"}),"Notification Tests"]})}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsx(F,{onClick:o,disabled:e.permission==="granted",className:"w-full",variant:e.permission==="granted"?"secondary":"default",children:e.permission==="granted"?"Permission Granted ":"Request Permission"}),r.jsx(F,{onClick:l,disabled:e.permission!=="granted",variant:"outline",className:"w-full",children:"Test Local Notification"}),r.jsx(F,{onClick:c,disabled:e.permission!=="granted"||n,className:"w-full",children:n?"Sending...":"Test FCM Push Notification"})]}),r.jsx("div",{className:"pt-4 border-t text-sm text-gray-600",children:r.jsxs("p",{children:[r.jsx("strong",{children:"Note:"})," FCM requires HTTPS in production. Development testing may use localhost."]})})]})]})]}),r.jsxs(G,{className:"mt-6",children:[r.jsx(se,{children:r.jsx(ie,{children:"FCM Implementation Details"})}),r.jsx(Z,{children:r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold mb-2",children:" Configured Components:"}),r.jsxs("ul",{className:"text-sm space-y-1 text-gray-600",children:[r.jsx("li",{children:" VAPID Keys configured in environment"}),r.jsx("li",{children:" Firebase Service Worker (firebase-messaging-sw.js)"}),r.jsx("li",{children:" Push Notification Service (server-side)"}),r.jsx("li",{children:" FCM API endpoints (/api/test-fcm-notification)"}),r.jsx("li",{children:" Web Push library integration"})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold mb-2",children:" Ready Features:"}),r.jsxs("ul",{className:"text-sm space-y-1 text-gray-600",children:[r.jsx("li",{children:" Order update notifications"}),r.jsx("li",{children:" Delivery assignment alerts"}),r.jsx("li",{children:" Promotional push messages"}),r.jsx("li",{children:" Real-time status updates"}),r.jsx("li",{children:" Background message handling"})]})]})]})})]})]})}function _Ue(){const{mode:e}=Ja();return r.jsx("div",{className:"relative",children:r.jsxs(mee,{children:[r.jsx(nt,{path:"/",component:e==="shopping"?CD:kD}),r.jsx(nt,{path:"/home",component:e==="shopping"?CD:kD}),r.jsx(nt,{path:"/categories",component:f3}),r.jsx(nt,{path:"/food-categories",component:f3}),r.jsx(nt,{path:"/products",component:sfe}),r.jsx(nt,{path:"/quick-bites",component:ife}),r.jsx(nt,{path:"/food-delivery",component:ofe}),r.jsx(nt,{path:"/products/:id",component:SS}),r.jsx(nt,{path:"/food/:id",component:SS}),r.jsx(nt,{path:"/product/:id",component:SS}),r.jsx(nt,{path:"/cart",component:nxe}),r.jsx(nt,{path:"/checkout",component:pxe}),r.jsx(nt,{path:"/order-confirmation",component:xxe}),r.jsx(nt,{path:"/login",component:vxe}),r.jsx(nt,{path:"/register",component:jxe}),r.jsx(nt,{path:"/forgot-password",component:wxe}),r.jsx(nt,{path:"/stores",component:GD}),r.jsx(nt,{path:"/restaurants",component:GD}),r.jsx(nt,{path:"/stores/:id",component:HD}),r.jsx(nt,{path:"/restaurants/:id",component:qD}),r.jsx(nt,{path:"/store/:id",component:HD}),r.jsx(nt,{path:"/restaurant/:id",component:qD}),r.jsx(nt,{path:"/account",component:nge}),r.jsx(nt,{path:"/delete-account",component:sge}),r.jsx(nt,{path:"/shopkeeper-dashboard",component:Tge}),r.jsx(nt,{path:"/customer-dashboard",component:Mge}),r.jsx(nt,{path:"/admin",component:m3}),r.jsx(nt,{path:"/admin/login",component:$ge}),r.jsx(nt,{path:"/admin/panel",component:Lge}),r.jsx(nt,{path:"/admin/dashboard",component:m3}),r.jsx(nt,{path:"/store-maps",component:Abe}),r.jsx(nt,{path:"/restaurant-maps",component:Dbe}),r.jsx(nt,{path:"/wishlist",component:Ibe}),r.jsx(nt,{path:"/flash-sales",component:uUe}),r.jsx(nt,{path:"/special-offers",component:u6}),r.jsx(nt,{path:"/food-offers",component:u6}),r.jsx(nt,{path:"/notification-test",component:hUe}),r.jsx(nt,{path:"/pwa-features",component:yUe}),r.jsx(nt,{path:"/fcm-test",component:SUe}),r.jsx(nt,{path:"/sound-test",component:pUe}),r.jsx(nt,{path:"/file-handler",component:xUe}),r.jsx(nt,{path:"/protocol-handler",component:gUe}),r.jsx(nt,{path:"/share-target",component:vUe}),r.jsx(nt,{path:"/seller/dashboard",component:Rbe}),r.jsx(nt,{path:"/restaurant/dashboard",component:VVe}),r.jsx(nt,{path:"/seller/store",component:Wbe}),r.jsx(nt,{path:"/seller/inventory",component:Fbe}),r.jsx(nt,{path:"/seller/promotions",component:Bbe}),r.jsx(nt,{path:"/seller/orders",component:Vbe}),r.jsx(nt,{path:"/seller/products/add",component:qbe}),r.jsx(nt,{path:"/delivery-partner-dashboard",component:ly}),r.jsx(nt,{path:"/delivery-partner/dashboard",component:ly}),r.jsx(nt,{path:"/delivery-partner/modern",component:KVe}),r.jsx(nt,{path:"/delivery-partner",component:ly}),r.jsx(nt,{path:"/delivery-partner/enhanced",component:ly}),r.jsx(nt,{path:"/delivery-partner/test",component:ZVe}),r.jsx(nt,{path:"/delivery-partner/notifications",component:YVe}),r.jsx(nt,{path:"/delivery-partner/register",component:iUe}),r.jsx(nt,{path:"/delivery-partner/quick-reg",component:nUe}),r.jsx(nt,{path:"/delivery-partner/tracking",component:eUe}),r.jsx(nt,{path:"/delivery-map/:id",component:lUe}),r.jsx(nt,{path:"/admin/delivery-partners",component:aUe}),r.jsx(nt,{path:"/orders/:orderId/tracking",component:oUe}),r.jsx(nt,{path:"/tracking-demo",component:JVe}),r.jsx(nt,{path:"/pwa-test",component:fUe}),r.jsx(nt,{component:kse})]})})}function PUe(){return j.useEffect(()=>{sx.initialize(),console.log("React app mounted successfully")},[]),j.useEffect(()=>{setTimeout(async()=>{console.log(" Starting FCM initialization (like YouTube tutorial)...");try{if(await wg(),Notification.permission==="granted")console.log(" Notification permission already granted - FCM ready!");else if(Notification.permission==="default")if(console.log(" Requesting notification permission for FCM token..."),await Ub()){console.log(" Notification permission granted! Getting FCM token...");try{const{getFirebaseToken:n}=await zp(async()=>{const{getFirebaseToken:i}=await Promise.resolve().then(()=>_0);return{getFirebaseToken:i}},void 0);await n()&&console.log(" SUCCESS: FCM Token generated after permission grant!")}catch(n){console.error(" Failed to get FCM token after permission grant:",n)}}else console.log(" Notification permission denied - FCM token cannot be generated");else console.log(" Notification permission permanently denied")}catch(t){console.error(" FCM initialization failed:",t)}},2e3)},[]),r.jsx(ho,{children:r.jsx(Mee,{client:Dr,children:r.jsx(wse,{children:r.jsx(Sse,{children:r.jsx(_se,{children:r.jsx(Pse,{children:r.jsx(Cse,{children:r.jsx(jse,{children:r.jsxs(ho,{children:[r.jsxs("div",{className:"min-h-screen flex flex-col",children:[r.jsx(ho,{children:r.jsx(cUe,{})}),r.jsx(ho,{children:r.jsx(Tue,{className:"md:hidden"})}),r.jsx(ho,{children:r.jsx(Ple,{})}),r.jsx("main",{className:"flex-1 pb-16 md:pb-0",children:r.jsx(ho,{children:r.jsx(_Ue,{})})}),r.jsx(ho,{children:r.jsx(kle,{})}),r.jsx(ho,{children:r.jsx(Cle,{})})]}),r.jsx(Zre,{}),r.jsx(mUe,{})]})})})})})})})})})}const CUe=()=>r.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[r.jsx("h1",{children:"Siraha Bazaar Test App"}),r.jsx("p",{children:"If you can see this, React is working!"}),r.jsx("button",{onClick:()=>alert("Button clicked!"),children:"Test Button"})]});class Ju{constructor(){this.isAndroidApp=!1,this.currentToken=null,this.detectAndroidApp(),this.setupFCMTokenHandler()}static getInstance(){return Ju.instance||(Ju.instance=new Ju),Ju.instance}detectAndroidApp(){var t;this.isAndroidApp=!!(window.AndroidApp&&typeof window.AndroidApp.showToast=="function"),this.isAndroidApp?(console.log(" Running in Android WebView"),(t=window.AndroidApp)==null||t.logMessage("Android FCM Handler initialized")):console.log(" Running in web browser - Android Bridge not available")}setupFCMTokenHandler(){window.updateFCMToken=t=>{console.log(" FCM Token received from Android:",t.substring(0,20)+"..."),this.currentToken=t,this.registerTokenWithServer(t)}}async registerTokenWithServer(t){var n,s,i;try{const a=this.getCurrentUserId();if(!a){console.log(" No user logged in, storing token for later registration"),localStorage.setItem("pendingFCMToken",t);return}console.log(` Registering FCM token for user ${a}...`);const l=await(await fetch("/api/device-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:parseInt(a),token:t,deviceType:"android"})})).json();l.success?(console.log(" FCM token registered successfully"),localStorage.removeItem("pendingFCMToken"),this.isAndroidApp&&((n=window.AndroidApp)==null||n.showToast("Notifications enabled!"))):(console.error(" Failed to register FCM token:",l.error),this.isAndroidApp&&((s=window.AndroidApp)==null||s.showToast("Failed to enable notifications")))}catch(a){console.error(" Error registering FCM token:",a),this.isAndroidApp&&((i=window.AndroidApp)==null||i.showToast("Network error - notifications may not work"))}}getCurrentUserId(){var s;try{const i=localStorage.getItem("user");if(i)return(s=JSON.parse(i).id)==null?void 0:s.toString()}catch{}const t=localStorage.getItem("userId");if(t)return t;const n=sessionStorage.getItem("userId");return n||null}registerPendingToken(){const t=localStorage.getItem("pendingFCMToken");t&&this.getCurrentUserId()&&(console.log(" Registering pending FCM token after login..."),this.registerTokenWithServer(t))}async requestTokenRegistration(){this.currentToken?await this.registerTokenWithServer(this.currentToken):console.log(" No FCM token available yet")}isRunningInAndroidApp(){return this.isAndroidApp}async sendTestNotification(){var n,s;const t=this.getCurrentUserId();if(!t){console.log(" No user logged in for test notification");return}try{const a=await(await fetch(`/api/test-user-notification/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:"Test from Android App",body:"This is a test notification from your Android app!"})})).json();console.log("Test notification result:",a),this.isAndroidApp&&((n=window.AndroidApp)==null||n.showToast(a.success?"Test notification sent!":"Test failed - check logs"))}catch(i){console.error("Test notification error:",i),this.isAndroidApp&&((s=window.AndroidApp)==null||s.showToast("Test failed - network error"))}}}const kUe=Ju.getInstance();window.androidFCMHandler=kUe;window.addEventListener("unhandledrejection",e=>{console.error("Unhandled promise rejection:",e.reason),e.preventDefault()});window.addEventListener("error",e=>{console.error("Uncaught error:",e.error)});try{console.log("Starting React app initialization...");const e=document.getElementById("root");if(!e)throw new Error("Root element not found");console.log("Root element found, creating React root..."),e.innerHTML='<div style="padding: 20px; text-align: center; font-family: Arial, sans-serif;"> Loading Siraha Bazaar...</div>';const t=IF(e),n=window.location.search.includes("test=true");console.log(`Rendering app in ${n?"test":"normal"} mode...`),t.render(r.jsx(ho,{children:n?r.jsx(CUe,{}):r.jsx(PUe,{})})),console.log("React app mounted successfully"),To.initialize().then(()=>{console.log("PWA features initialized")}).catch(s=>{console.error("PWA initialization failed:",s)})}catch(e){console.error("Failed to mount React app:",e);const t=(e==null?void 0:e.message)||String(e);document.body.innerHTML=`<div style="padding: 20px; color: red; text-align: center;">Error mounting React app: ${t}</div>`}
